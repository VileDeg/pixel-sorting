var a0=Object.defineProperty;var Fp=r=>{throw TypeError(r)};var o0=(r,a,n)=>a in r?a0(r,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[a]=n;var ti=(r,a,n)=>o0(r,typeof a!="symbol"?a+"":a,n),If=(r,a,n)=>a.has(r)||Fp("Cannot "+n);var ka=(r,a,n)=>(If(r,a,"read from private field"),n?n.call(r):a.get(r)),Pf=(r,a,n)=>a.has(r)?Fp("Cannot add the same private member more than once"):a instanceof WeakSet?a.add(r):a.set(r,n),Uu=(r,a,n,t)=>(If(r,a,"write to private field"),t?t.call(r,n):a.set(r,n),n),Nf=(r,a,n)=>(If(r,a,"access private method"),n);(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))t(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const s of u.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function t(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function getAugmentedNamespace(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var a=r.default;if(typeof a=="function"){var n=function t(){return this instanceof t?Reflect.construct(a,arguments,this.constructor):a.apply(this,arguments)};n.prototype=a.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(r).forEach(function(t){var l=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(n,t,l.get?l:{enumerable:!0,get:function(){return r[t]}})}),n}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var r=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function n(t,l,u){var s=null;if(u!==void 0&&(s=""+u),l.key!==void 0&&(s=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:r,type:t,key:s,ref:l!==void 0?l:null,props:u}}return reactJsxRuntime_production.Fragment=a,reactJsxRuntime_production.jsx=n,reactJsxRuntime_production.jsxs=n,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var r=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),t=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),s=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),Be=Symbol.iterator;function b(Ut){return Ut===null||typeof Ut!="object"?null:(Ut=Be&&Ut[Be]||Ut["@@iterator"],typeof Ut=="function"?Ut:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},de=Object.assign,pe={};function Ye(Ut,Yt,Zt){this.props=Ut,this.context=Yt,this.refs=pe,this.updater=Zt||E}Ye.prototype.isReactComponent={},Ye.prototype.setState=function(Ut,Yt){if(typeof Ut!="object"&&typeof Ut!="function"&&Ut!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ut,Yt,"setState")},Ye.prototype.forceUpdate=function(Ut){this.updater.enqueueForceUpdate(this,Ut,"forceUpdate")};function me(){}me.prototype=Ye.prototype;function Le(Ut,Yt,Zt){this.props=Ut,this.context=Yt,this.refs=pe,this.updater=Zt||E}var nt=Le.prototype=new me;nt.constructor=Le,de(nt,Ye.prototype),nt.isPureReactComponent=!0;var tt=Array.isArray,ft={H:null,A:null,T:null,S:null,V:null},yt=Object.prototype.hasOwnProperty;function gt(Ut,Yt,Zt,vt,Rt,Lt){return Zt=Lt.ref,{$$typeof:r,type:Ut,key:Yt,ref:Zt!==void 0?Zt:null,props:Lt}}function mt(Ut,Yt){return gt(Ut.type,Yt,void 0,void 0,void 0,Ut.props)}function wt(Ut){return typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===r}function St(Ut){var Yt={"=":"=0",":":"=2"};return"$"+Ut.replace(/[=:]/g,function(Zt){return Yt[Zt]})}var bt=/\/+/g;function Ct(Ut,Yt){return typeof Ut=="object"&&Ut!==null&&Ut.key!=null?St(""+Ut.key):Yt.toString(36)}function Et(){}function It(Ut){switch(Ut.status){case"fulfilled":return Ut.value;case"rejected":throw Ut.reason;default:switch(typeof Ut.status=="string"?Ut.then(Et,Et):(Ut.status="pending",Ut.then(function(Yt){Ut.status==="pending"&&(Ut.status="fulfilled",Ut.value=Yt)},function(Yt){Ut.status==="pending"&&(Ut.status="rejected",Ut.reason=Yt)})),Ut.status){case"fulfilled":return Ut.value;case"rejected":throw Ut.reason}}throw Ut}function Dt(Ut,Yt,Zt,vt,Rt){var Lt=typeof Ut;(Lt==="undefined"||Lt==="boolean")&&(Ut=null);var Vt=!1;if(Ut===null)Vt=!0;else switch(Lt){case"bigint":case"string":case"number":Vt=!0;break;case"object":switch(Ut.$$typeof){case r:case a:Vt=!0;break;case N:return Vt=Ut._init,Dt(Vt(Ut._payload),Yt,Zt,vt,Rt)}}if(Vt)return Rt=Rt(Ut),Vt=vt===""?"."+Ct(Ut,0):vt,tt(Rt)?(Zt="",Vt!=null&&(Zt=Vt.replace(bt,"$&/")+"/"),Dt(Rt,Yt,Zt,"",function(ur){return ur})):Rt!=null&&(wt(Rt)&&(Rt=mt(Rt,Zt+(Rt.key==null||Ut&&Ut.key===Rt.key?"":(""+Rt.key).replace(bt,"$&/")+"/")+Vt)),Yt.push(Rt)),1;Vt=0;var Jt=vt===""?".":vt+":";if(tt(Ut))for(var er=0;er<Ut.length;er++)vt=Ut[er],Lt=Jt+Ct(vt,er),Vt+=Dt(vt,Yt,Zt,Lt,Rt);else if(er=b(Ut),typeof er=="function")for(Ut=er.call(Ut),er=0;!(vt=Ut.next()).done;)vt=vt.value,Lt=Jt+Ct(vt,er++),Vt+=Dt(vt,Yt,Zt,Lt,Rt);else if(Lt==="object"){if(typeof Ut.then=="function")return Dt(It(Ut),Yt,Zt,vt,Rt);throw Yt=String(Ut),Error("Objects are not valid as a React child (found: "+(Yt==="[object Object]"?"object with keys {"+Object.keys(Ut).join(", ")+"}":Yt)+"). If you meant to render a collection of children, use an array instead.")}return Vt}function Pt(Ut,Yt,Zt){if(Ut==null)return Ut;var vt=[],Rt=0;return Dt(Ut,vt,"","",function(Lt){return Yt.call(Zt,Lt,Rt++)}),vt}function qt(Ut){if(Ut._status===-1){var Yt=Ut._result;Yt=Yt(),Yt.then(function(Zt){(Ut._status===0||Ut._status===-1)&&(Ut._status=1,Ut._result=Zt)},function(Zt){(Ut._status===0||Ut._status===-1)&&(Ut._status=2,Ut._result=Zt)}),Ut._status===-1&&(Ut._status=0,Ut._result=Yt)}if(Ut._status===1)return Ut._result.default;throw Ut._result}var Ht=typeof reportError=="function"?reportError:function(Ut){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Yt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Ut=="object"&&Ut!==null&&typeof Ut.message=="string"?String(Ut.message):String(Ut),error:Ut});if(!window.dispatchEvent(Yt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Ut);return}console.error(Ut)};function Gt(){}return react_production.Children={map:Pt,forEach:function(Ut,Yt,Zt){Pt(Ut,function(){Yt.apply(this,arguments)},Zt)},count:function(Ut){var Yt=0;return Pt(Ut,function(){Yt++}),Yt},toArray:function(Ut){return Pt(Ut,function(Yt){return Yt})||[]},only:function(Ut){if(!wt(Ut))throw Error("React.Children.only expected to receive a single React element child.");return Ut}},react_production.Component=Ye,react_production.Fragment=n,react_production.Profiler=l,react_production.PureComponent=Le,react_production.StrictMode=t,react_production.Suspense=d,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ft,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(Ut){return ft.H.useMemoCache(Ut)}},react_production.cache=function(Ut){return function(){return Ut.apply(null,arguments)}},react_production.cloneElement=function(Ut,Yt,Zt){if(Ut==null)throw Error("The argument must be a React element, but you passed "+Ut+".");var vt=de({},Ut.props),Rt=Ut.key,Lt=void 0;if(Yt!=null)for(Vt in Yt.ref!==void 0&&(Lt=void 0),Yt.key!==void 0&&(Rt=""+Yt.key),Yt)!yt.call(Yt,Vt)||Vt==="key"||Vt==="__self"||Vt==="__source"||Vt==="ref"&&Yt.ref===void 0||(vt[Vt]=Yt[Vt]);var Vt=arguments.length-2;if(Vt===1)vt.children=Zt;else if(1<Vt){for(var Jt=Array(Vt),er=0;er<Vt;er++)Jt[er]=arguments[er+2];vt.children=Jt}return gt(Ut.type,Rt,void 0,void 0,Lt,vt)},react_production.createContext=function(Ut){return Ut={$$typeof:s,_currentValue:Ut,_currentValue2:Ut,_threadCount:0,Provider:null,Consumer:null},Ut.Provider=Ut,Ut.Consumer={$$typeof:u,_context:Ut},Ut},react_production.createElement=function(Ut,Yt,Zt){var vt,Rt={},Lt=null;if(Yt!=null)for(vt in Yt.key!==void 0&&(Lt=""+Yt.key),Yt)yt.call(Yt,vt)&&vt!=="key"&&vt!=="__self"&&vt!=="__source"&&(Rt[vt]=Yt[vt]);var Vt=arguments.length-2;if(Vt===1)Rt.children=Zt;else if(1<Vt){for(var Jt=Array(Vt),er=0;er<Vt;er++)Jt[er]=arguments[er+2];Rt.children=Jt}if(Ut&&Ut.defaultProps)for(vt in Vt=Ut.defaultProps,Vt)Rt[vt]===void 0&&(Rt[vt]=Vt[vt]);return gt(Ut,Lt,void 0,void 0,null,Rt)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(Ut){return{$$typeof:p,render:Ut}},react_production.isValidElement=wt,react_production.lazy=function(Ut){return{$$typeof:N,_payload:{_status:-1,_result:Ut},_init:qt}},react_production.memo=function(Ut,Yt){return{$$typeof:h,type:Ut,compare:Yt===void 0?null:Yt}},react_production.startTransition=function(Ut){var Yt=ft.T,Zt={};ft.T=Zt;try{var vt=Ut(),Rt=ft.S;Rt!==null&&Rt(Zt,vt),typeof vt=="object"&&vt!==null&&typeof vt.then=="function"&&vt.then(Gt,Ht)}catch(Lt){Ht(Lt)}finally{ft.T=Yt}},react_production.unstable_useCacheRefresh=function(){return ft.H.useCacheRefresh()},react_production.use=function(Ut){return ft.H.use(Ut)},react_production.useActionState=function(Ut,Yt,Zt){return ft.H.useActionState(Ut,Yt,Zt)},react_production.useCallback=function(Ut,Yt){return ft.H.useCallback(Ut,Yt)},react_production.useContext=function(Ut){return ft.H.useContext(Ut)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(Ut,Yt){return ft.H.useDeferredValue(Ut,Yt)},react_production.useEffect=function(Ut,Yt,Zt){var vt=ft.H;if(typeof Zt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return vt.useEffect(Ut,Yt)},react_production.useId=function(){return ft.H.useId()},react_production.useImperativeHandle=function(Ut,Yt,Zt){return ft.H.useImperativeHandle(Ut,Yt,Zt)},react_production.useInsertionEffect=function(Ut,Yt){return ft.H.useInsertionEffect(Ut,Yt)},react_production.useLayoutEffect=function(Ut,Yt){return ft.H.useLayoutEffect(Ut,Yt)},react_production.useMemo=function(Ut,Yt){return ft.H.useMemo(Ut,Yt)},react_production.useOptimistic=function(Ut,Yt){return ft.H.useOptimistic(Ut,Yt)},react_production.useReducer=function(Ut,Yt,Zt){return ft.H.useReducer(Ut,Yt,Zt)},react_production.useRef=function(Ut){return ft.H.useRef(Ut)},react_production.useState=function(Ut){return ft.H.useState(Ut)},react_production.useSyncExternalStore=function(Ut,Yt,Zt){return ft.H.useSyncExternalStore(Ut,Yt,Zt)},react_production.useTransition=function(){return ft.H.useTransition()},react_production.version="19.1.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,function(r){function a(Pt,qt){var Ht=Pt.length;Pt.push(qt);e:for(;0<Ht;){var Gt=Ht-1>>>1,Ut=Pt[Gt];if(0<l(Ut,qt))Pt[Gt]=qt,Pt[Ht]=Ut,Ht=Gt;else break e}}function n(Pt){return Pt.length===0?null:Pt[0]}function t(Pt){if(Pt.length===0)return null;var qt=Pt[0],Ht=Pt.pop();if(Ht!==qt){Pt[0]=Ht;e:for(var Gt=0,Ut=Pt.length,Yt=Ut>>>1;Gt<Yt;){var Zt=2*(Gt+1)-1,vt=Pt[Zt],Rt=Zt+1,Lt=Pt[Rt];if(0>l(vt,Ht))Rt<Ut&&0>l(Lt,vt)?(Pt[Gt]=Lt,Pt[Rt]=Ht,Gt=Rt):(Pt[Gt]=vt,Pt[Zt]=Ht,Gt=Zt);else if(Rt<Ut&&0>l(Lt,Ht))Pt[Gt]=Lt,Pt[Rt]=Ht,Gt=Rt;else break e}}return qt}function l(Pt,qt){var Ht=Pt.sortIndex-qt.sortIndex;return Ht!==0?Ht:Pt.id-qt.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var s=Date,p=s.now();r.unstable_now=function(){return s.now()-p}}var d=[],h=[],N=1,Be=null,b=3,E=!1,de=!1,pe=!1,Ye=!1,me=typeof setTimeout=="function"?setTimeout:null,Le=typeof clearTimeout=="function"?clearTimeout:null,nt=typeof setImmediate<"u"?setImmediate:null;function tt(Pt){for(var qt=n(h);qt!==null;){if(qt.callback===null)t(h);else if(qt.startTime<=Pt)t(h),qt.sortIndex=qt.expirationTime,a(d,qt);else break;qt=n(h)}}function ft(Pt){if(pe=!1,tt(Pt),!de)if(n(d)!==null)de=!0,yt||(yt=!0,Ct());else{var qt=n(h);qt!==null&&Dt(ft,qt.startTime-Pt)}}var yt=!1,gt=-1,mt=5,wt=-1;function St(){return Ye?!0:!(r.unstable_now()-wt<mt)}function bt(){if(Ye=!1,yt){var Pt=r.unstable_now();wt=Pt;var qt=!0;try{e:{de=!1,pe&&(pe=!1,Le(gt),gt=-1),E=!0;var Ht=b;try{t:{for(tt(Pt),Be=n(d);Be!==null&&!(Be.expirationTime>Pt&&St());){var Gt=Be.callback;if(typeof Gt=="function"){Be.callback=null,b=Be.priorityLevel;var Ut=Gt(Be.expirationTime<=Pt);if(Pt=r.unstable_now(),typeof Ut=="function"){Be.callback=Ut,tt(Pt),qt=!0;break t}Be===n(d)&&t(d),tt(Pt)}else t(d);Be=n(d)}if(Be!==null)qt=!0;else{var Yt=n(h);Yt!==null&&Dt(ft,Yt.startTime-Pt),qt=!1}}break e}finally{Be=null,b=Ht,E=!1}qt=void 0}}finally{qt?Ct():yt=!1}}}var Ct;if(typeof nt=="function")Ct=function(){nt(bt)};else if(typeof MessageChannel<"u"){var Et=new MessageChannel,It=Et.port2;Et.port1.onmessage=bt,Ct=function(){It.postMessage(null)}}else Ct=function(){me(bt,0)};function Dt(Pt,qt){gt=me(function(){Pt(r.unstable_now())},qt)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Pt){Pt.callback=null},r.unstable_forceFrameRate=function(Pt){0>Pt||125<Pt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):mt=0<Pt?Math.floor(1e3/Pt):5},r.unstable_getCurrentPriorityLevel=function(){return b},r.unstable_next=function(Pt){switch(b){case 1:case 2:case 3:var qt=3;break;default:qt=b}var Ht=b;b=qt;try{return Pt()}finally{b=Ht}},r.unstable_requestPaint=function(){Ye=!0},r.unstable_runWithPriority=function(Pt,qt){switch(Pt){case 1:case 2:case 3:case 4:case 5:break;default:Pt=3}var Ht=b;b=Pt;try{return qt()}finally{b=Ht}},r.unstable_scheduleCallback=function(Pt,qt,Ht){var Gt=r.unstable_now();switch(typeof Ht=="object"&&Ht!==null?(Ht=Ht.delay,Ht=typeof Ht=="number"&&0<Ht?Gt+Ht:Gt):Ht=Gt,Pt){case 1:var Ut=-1;break;case 2:Ut=250;break;case 5:Ut=1073741823;break;case 4:Ut=1e4;break;default:Ut=5e3}return Ut=Ht+Ut,Pt={id:N++,callback:qt,priorityLevel:Pt,startTime:Ht,expirationTime:Ut,sortIndex:-1},Ht>Gt?(Pt.sortIndex=Ht,a(h,Pt),n(d)===null&&Pt===n(h)&&(pe?(Le(gt),gt=-1):pe=!0,Dt(ft,Ht-Gt))):(Pt.sortIndex=Ut,a(d,Pt),de||E||(de=!0,yt||(yt=!0,Ct()))),Pt},r.unstable_shouldYield=St,r.unstable_wrapCallback=function(Pt){var qt=b;return function(){var Ht=b;b=qt;try{return Pt.apply(this,arguments)}finally{b=Ht}}}}(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var r=requireReact();function a(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var N=2;N<arguments.length;N++)h+="&args[]="+encodeURIComponent(arguments[N])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var t={d:{f:n,r:function(){throw Error(a(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(d,h,N){var Be=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:Be==null?null:""+Be,children:d,containerInfo:h,implementation:N}}var s=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=t,reactDom_production.createPortal=function(d,h){var N=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(a(299));return u(d,h,null,N)},reactDom_production.flushSync=function(d){var h=s.T,N=t.p;try{if(s.T=null,t.p=2,d)return d()}finally{s.T=h,t.p=N,t.d.f()}},reactDom_production.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,t.d.C(d,h))},reactDom_production.prefetchDNS=function(d){typeof d=="string"&&t.d.D(d)},reactDom_production.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var N=h.as,Be=p(N,h.crossOrigin),b=typeof h.integrity=="string"?h.integrity:void 0,E=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;N==="style"?t.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:Be,integrity:b,fetchPriority:E}):N==="script"&&t.d.X(d,{crossOrigin:Be,integrity:b,fetchPriority:E,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},reactDom_production.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var N=p(h.as,h.crossOrigin);t.d.M(d,{crossOrigin:N,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&t.d.M(d)},reactDom_production.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var N=h.as,Be=p(N,h.crossOrigin);t.d.L(d,N,{crossOrigin:Be,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},reactDom_production.preloadModule=function(d,h){if(typeof d=="string")if(h){var N=p(h.as,h.crossOrigin);t.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:N,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else t.d.m(d)},reactDom_production.requestFormReset=function(d){t.d.r(d)},reactDom_production.unstable_batchedUpdates=function(d,h){return d(h)},reactDom_production.useFormState=function(d,h,N){return s.H.useFormState(d,h,N)},reactDom_production.useFormStatus=function(){return s.H.useHostTransitionStatus()},reactDom_production.version="19.1.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(a){console.error(a)}}return r(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var r=requireScheduler(),a=requireReact(),n=requireReactDom();function t(o){var P="https://react.dev/errors/"+o;if(1<arguments.length){P+="?args[]="+encodeURIComponent(arguments[1]);for(var ot=2;ot<arguments.length;ot++)P+="&args[]="+encodeURIComponent(arguments[ot])}return"Minified React error #"+o+"; visit "+P+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function u(o){var P=o,ot=o;if(o.alternate)for(;P.return;)P=P.return;else{o=P;do P=o,(P.flags&4098)!==0&&(ot=P.return),o=P.return;while(o)}return P.tag===3?ot:null}function s(o){if(o.tag===13){var P=o.memoizedState;if(P===null&&(o=o.alternate,o!==null&&(P=o.memoizedState)),P!==null)return P.dehydrated}return null}function p(o){if(u(o)!==o)throw Error(t(188))}function d(o){var P=o.alternate;if(!P){if(P=u(o),P===null)throw Error(t(188));return P!==o?null:o}for(var ot=o,ht=P;;){var kt=ot.return;if(kt===null)break;var Nt=kt.alternate;if(Nt===null){if(ht=kt.return,ht!==null){ot=ht;continue}break}if(kt.child===Nt.child){for(Nt=kt.child;Nt;){if(Nt===ot)return p(kt),o;if(Nt===ht)return p(kt),P;Nt=Nt.sibling}throw Error(t(188))}if(ot.return!==ht.return)ot=kt,ht=Nt;else{for(var rr=!1,pr=kt.child;pr;){if(pr===ot){rr=!0,ot=kt,ht=Nt;break}if(pr===ht){rr=!0,ht=kt,ot=Nt;break}pr=pr.sibling}if(!rr){for(pr=Nt.child;pr;){if(pr===ot){rr=!0,ot=Nt,ht=kt;break}if(pr===ht){rr=!0,ht=Nt,ot=kt;break}pr=pr.sibling}if(!rr)throw Error(t(189))}}if(ot.alternate!==ht)throw Error(t(190))}if(ot.tag!==3)throw Error(t(188));return ot.stateNode.current===ot?o:P}function h(o){var P=o.tag;if(P===5||P===26||P===27||P===6)return o;for(o=o.child;o!==null;){if(P=h(o),P!==null)return P;o=o.sibling}return null}var N=Object.assign,Be=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),de=Symbol.for("react.fragment"),pe=Symbol.for("react.strict_mode"),Ye=Symbol.for("react.profiler"),me=Symbol.for("react.provider"),Le=Symbol.for("react.consumer"),nt=Symbol.for("react.context"),tt=Symbol.for("react.forward_ref"),ft=Symbol.for("react.suspense"),yt=Symbol.for("react.suspense_list"),gt=Symbol.for("react.memo"),mt=Symbol.for("react.lazy"),wt=Symbol.for("react.activity"),St=Symbol.for("react.memo_cache_sentinel"),bt=Symbol.iterator;function Ct(o){return o===null||typeof o!="object"?null:(o=bt&&o[bt]||o["@@iterator"],typeof o=="function"?o:null)}var Et=Symbol.for("react.client.reference");function It(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===Et?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case de:return"Fragment";case Ye:return"Profiler";case pe:return"StrictMode";case ft:return"Suspense";case yt:return"SuspenseList";case wt:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case E:return"Portal";case nt:return(o.displayName||"Context")+".Provider";case Le:return(o._context.displayName||"Context")+".Consumer";case tt:var P=o.render;return o=o.displayName,o||(o=P.displayName||P.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case gt:return P=o.displayName||null,P!==null?P:It(o.type)||"Memo";case mt:P=o._payload,o=o._init;try{return It(o(P))}catch{}}return null}var Dt=Array.isArray,Pt=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,qt=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ht={pending:!1,data:null,method:null,action:null},Gt=[],Ut=-1;function Yt(o){return{current:o}}function Zt(o){0>Ut||(o.current=Gt[Ut],Gt[Ut]=null,Ut--)}function vt(o,P){Ut++,Gt[Ut]=o.current,o.current=P}var Rt=Yt(null),Lt=Yt(null),Vt=Yt(null),Jt=Yt(null);function er(o,P){switch(vt(Vt,P),vt(Lt,o),vt(Rt,null),P.nodeType){case 9:case 11:o=(o=P.documentElement)&&(o=o.namespaceURI)?dp(o):0;break;default:if(o=P.tagName,P=P.namespaceURI)P=dp(P),o=pp(P,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}Zt(Rt),vt(Rt,o)}function ur(){Zt(Rt),Zt(Lt),Zt(Vt)}function yr(o){o.memoizedState!==null&&vt(Jt,o);var P=Rt.current,ot=pp(P,o.type);P!==ot&&(vt(Lt,o),vt(Rt,ot))}function Qt(o){Lt.current===o&&(Zt(Rt),Zt(Lt)),Jt.current===o&&(Zt(Jt),bl._currentValue=Ht)}var nr=Object.prototype.hasOwnProperty,or=r.unstable_scheduleCallback,Wt=r.unstable_cancelCallback,ir=r.unstable_shouldYield,br=r.unstable_requestPaint,Sr=r.unstable_now,_r=r.unstable_getCurrentPriorityLevel,sr=r.unstable_ImmediatePriority,jr=r.unstable_UserBlockingPriority,Nr=r.unstable_NormalPriority,kr=r.unstable_LowPriority,qr=r.unstable_IdlePriority,Pr=r.log,Vr=r.unstable_setDisableYieldValue,Xr=null,Gr=null;function Er(o){if(typeof Pr=="function"&&Vr(o),Gr&&typeof Gr.setStrictMode=="function")try{Gr.setStrictMode(Xr,o)}catch{}}var Ir=Math.clz32?Math.clz32:ar,Cr=Math.log,tr=Math.LN2;function ar(o){return o>>>=0,o===0?32:31-(Cr(o)/tr|0)|0}var Kt=256,cr=4194304;function Tr(o){var P=o&42;if(P!==0)return P;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Dr(o,P,ot){var ht=o.pendingLanes;if(ht===0)return 0;var kt=0,Nt=o.suspendedLanes,rr=o.pingedLanes;o=o.warmLanes;var pr=ht&134217727;return pr!==0?(ht=pr&~Nt,ht!==0?kt=Tr(ht):(rr&=pr,rr!==0?kt=Tr(rr):ot||(ot=pr&~o,ot!==0&&(kt=Tr(ot))))):(pr=ht&~Nt,pr!==0?kt=Tr(pr):rr!==0?kt=Tr(rr):ot||(ot=ht&~o,ot!==0&&(kt=Tr(ot)))),kt===0?0:P!==0&&P!==kt&&(P&Nt)===0&&(Nt=kt&-kt,ot=P&-P,Nt>=ot||Nt===32&&(ot&4194048)!==0)?P:kt}function zr(o,P){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&P)===0}function fn(o,P){switch(o){case 1:case 2:case 4:case 8:case 64:return P+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return P+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vn(){var o=Kt;return Kt<<=1,(Kt&4194048)===0&&(Kt=256),o}function _n(){var o=cr;return cr<<=1,(cr&62914560)===0&&(cr=4194304),o}function wn(o){for(var P=[],ot=0;31>ot;ot++)P.push(o);return P}function An(o,P){o.pendingLanes|=P,P!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Cn(o,P,ot,ht,kt,Nt){var rr=o.pendingLanes;o.pendingLanes=ot,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=ot,o.entangledLanes&=ot,o.errorRecoveryDisabledLanes&=ot,o.shellSuspendCounter=0;var pr=o.entanglements,Or=o.expirationTimes,rn=o.hiddenUpdates;for(ot=rr&~ot;0<ot;){var dn=31-Ir(ot),yn=1<<dn;pr[dn]=0,Or[dn]=-1;var nn=rn[dn];if(nn!==null)for(rn[dn]=null,dn=0;dn<nn.length;dn++){var sn=nn[dn];sn!==null&&(sn.lane&=-536870913)}ot&=~yn}ht!==0&&En(o,ht,0),Nt!==0&&kt===0&&o.tag!==0&&(o.suspendedLanes|=Nt&~(rr&~P))}function En(o,P,ot){o.pendingLanes|=P,o.suspendedLanes&=~P;var ht=31-Ir(P);o.entangledLanes|=P,o.entanglements[ht]=o.entanglements[ht]|1073741824|ot&4194090}function Tn(o,P){var ot=o.entangledLanes|=P;for(o=o.entanglements;ot;){var ht=31-Ir(ot),kt=1<<ht;kt&P|o[ht]&P&&(o[ht]|=P),ot&=~kt}}function Mn(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Ft(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Tt(){var o=qt.p;return o!==0?o:(o=window.event,o===void 0?32:Dp(o.type))}function jt(o,P){var ot=qt.p;try{return qt.p=o,P()}finally{qt.p=ot}}var xt=Math.random().toString(36).slice(2),At="__reactFiber$"+xt,Bt="__reactProps$"+xt,lr="__reactContainer$"+xt,hr="__reactEvents$"+xt,dr="__reactListeners$"+xt,vr="__reactHandles$"+xt,Ur="__reactResources$"+xt,Ar="__reactMarker$"+xt;function an(o){delete o[At],delete o[Bt],delete o[hr],delete o[dr],delete o[vr]}function pn(o){var P=o[At];if(P)return P;for(var ot=o.parentNode;ot;){if(P=ot[lr]||ot[At]){if(ot=P.alternate,P.child!==null||ot!==null&&ot.child!==null)for(o=vp(o);o!==null;){if(ot=o[At])return ot;o=vp(o)}return P}o=ot,ot=o.parentNode}return null}function Jr(o){if(o=o[At]||o[lr]){var P=o.tag;if(P===5||P===6||P===13||P===26||P===27||P===3)return o}return null}function on(o){var P=o.tag;if(P===5||P===26||P===27||P===6)return o.stateNode;throw Error(t(33))}function mr(o){var P=o[Ur];return P||(P=o[Ur]={hoistableStyles:new Map,hoistableScripts:new Map}),P}function gr(o){o[Ar]=!0}var Yr=new Set,Hr={};function Sn(o,P){Kr(o,P),Kr(o+"Capture",P)}function Kr(o,P){for(Hr[o]=P,o=0;o<P.length;o++)Yr.add(P[o])}var Dn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ln={},jn={};function bn(o){return nr.call(jn,o)?!0:nr.call(ln,o)?!1:Dn.test(o)?jn[o]=!0:(ln[o]=!0,!1)}function Lr(o,P,ot){if(bn(P))if(ot===null)o.removeAttribute(P);else{switch(typeof ot){case"undefined":case"function":case"symbol":o.removeAttribute(P);return;case"boolean":var ht=P.toLowerCase().slice(0,5);if(ht!=="data-"&&ht!=="aria-"){o.removeAttribute(P);return}}o.setAttribute(P,""+ot)}}function cn(o,P,ot){if(ot===null)o.removeAttribute(P);else{switch(typeof ot){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(P);return}o.setAttribute(P,""+ot)}}function xn(o,P,ot,ht){if(ht===null)o.removeAttribute(ot);else{switch(typeof ht){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(ot);return}o.setAttributeNS(P,ot,""+ht)}}var mn,$n;function Bn(o){if(mn===void 0)try{throw Error()}catch(ot){var P=ot.stack.trim().match(/\n( *(at )?)/);mn=P&&P[1]||"",$n=-1<ot.stack.indexOf(`
    at`)?" (<anonymous>)":-1<ot.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mn+o+$n}var qn=!1;function Gn(o,P){if(!o||qn)return"";qn=!0;var ot=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var ht={DetermineComponentFrameRoot:function(){try{if(P){var yn=function(){throw Error()};if(Object.defineProperty(yn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(yn,[])}catch(sn){var nn=sn}Reflect.construct(o,[],yn)}else{try{yn.call()}catch(sn){nn=sn}o.call(yn.prototype)}}else{try{throw Error()}catch(sn){nn=sn}(yn=o())&&typeof yn.catch=="function"&&yn.catch(function(){})}}catch(sn){if(sn&&nn&&typeof sn.stack=="string")return[sn.stack,nn.stack]}return[null,null]}};ht.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var kt=Object.getOwnPropertyDescriptor(ht.DetermineComponentFrameRoot,"name");kt&&kt.configurable&&Object.defineProperty(ht.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Nt=ht.DetermineComponentFrameRoot(),rr=Nt[0],pr=Nt[1];if(rr&&pr){var Or=rr.split(`
`),rn=pr.split(`
`);for(kt=ht=0;ht<Or.length&&!Or[ht].includes("DetermineComponentFrameRoot");)ht++;for(;kt<rn.length&&!rn[kt].includes("DetermineComponentFrameRoot");)kt++;if(ht===Or.length||kt===rn.length)for(ht=Or.length-1,kt=rn.length-1;1<=ht&&0<=kt&&Or[ht]!==rn[kt];)kt--;for(;1<=ht&&0<=kt;ht--,kt--)if(Or[ht]!==rn[kt]){if(ht!==1||kt!==1)do if(ht--,kt--,0>kt||Or[ht]!==rn[kt]){var dn=`
`+Or[ht].replace(" at new "," at ");return o.displayName&&dn.includes("<anonymous>")&&(dn=dn.replace("<anonymous>",o.displayName)),dn}while(1<=ht&&0<=kt);break}}}finally{qn=!1,Error.prepareStackTrace=ot}return(ot=o?o.displayName||o.name:"")?Bn(ot):""}function Ai(o){switch(o.tag){case 26:case 27:case 5:return Bn(o.type);case 16:return Bn("Lazy");case 13:return Bn("Suspense");case 19:return Bn("SuspenseList");case 0:case 15:return Gn(o.type,!1);case 11:return Gn(o.type.render,!1);case 1:return Gn(o.type,!0);case 31:return Bn("Activity");default:return""}}function vi(o){try{var P="";do P+=Ai(o),o=o.return;while(o);return P}catch(ot){return`
Error generating stack: `+ot.message+`
`+ot.stack}}function Yn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Gi(o){var P=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(P==="checkbox"||P==="radio")}function Qi(o){var P=Gi(o)?"checked":"value",ot=Object.getOwnPropertyDescriptor(o.constructor.prototype,P),ht=""+o[P];if(!o.hasOwnProperty(P)&&typeof ot<"u"&&typeof ot.get=="function"&&typeof ot.set=="function"){var kt=ot.get,Nt=ot.set;return Object.defineProperty(o,P,{configurable:!0,get:function(){return kt.call(this)},set:function(rr){ht=""+rr,Nt.call(this,rr)}}),Object.defineProperty(o,P,{enumerable:ot.enumerable}),{getValue:function(){return ht},setValue:function(rr){ht=""+rr},stopTracking:function(){o._valueTracker=null,delete o[P]}}}}function Hn(o){o._valueTracker||(o._valueTracker=Qi(o))}function wi(o){if(!o)return!1;var P=o._valueTracker;if(!P)return!0;var ot=P.getValue(),ht="";return o&&(ht=Gi(o)?o.checked?"true":"false":o.value),o=ht,o!==ot?(P.setValue(o),!0):!1}function ki(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Hi=/[\n"\\]/g;function Jn(o){return o.replace(Hi,function(P){return"\\"+P.charCodeAt(0).toString(16)+" "})}function no(o,P,ot,ht,kt,Nt,rr,pr){o.name="",rr!=null&&typeof rr!="function"&&typeof rr!="symbol"&&typeof rr!="boolean"?o.type=rr:o.removeAttribute("type"),P!=null?rr==="number"?(P===0&&o.value===""||o.value!=P)&&(o.value=""+Yn(P)):o.value!==""+Yn(P)&&(o.value=""+Yn(P)):rr!=="submit"&&rr!=="reset"||o.removeAttribute("value"),P!=null?Ua(o,rr,Yn(P)):ot!=null?Ua(o,rr,Yn(ot)):ht!=null&&o.removeAttribute("value"),kt==null&&Nt!=null&&(o.defaultChecked=!!Nt),kt!=null&&(o.checked=kt&&typeof kt!="function"&&typeof kt!="symbol"),pr!=null&&typeof pr!="function"&&typeof pr!="symbol"&&typeof pr!="boolean"?o.name=""+Yn(pr):o.removeAttribute("name")}function Jo(o,P,ot,ht,kt,Nt,rr,pr){if(Nt!=null&&typeof Nt!="function"&&typeof Nt!="symbol"&&typeof Nt!="boolean"&&(o.type=Nt),P!=null||ot!=null){if(!(Nt!=="submit"&&Nt!=="reset"||P!=null))return;ot=ot!=null?""+Yn(ot):"",P=P!=null?""+Yn(P):ot,pr||P===o.value||(o.value=P),o.defaultValue=P}ht=ht??kt,ht=typeof ht!="function"&&typeof ht!="symbol"&&!!ht,o.checked=pr?o.checked:!!ht,o.defaultChecked=!!ht,rr!=null&&typeof rr!="function"&&typeof rr!="symbol"&&typeof rr!="boolean"&&(o.name=rr)}function Ua(o,P,ot){P==="number"&&ki(o.ownerDocument)===o||o.defaultValue===""+ot||(o.defaultValue=""+ot)}function ja(o,P,ot,ht){if(o=o.options,P){P={};for(var kt=0;kt<ot.length;kt++)P["$"+ot[kt]]=!0;for(ot=0;ot<o.length;ot++)kt=P.hasOwnProperty("$"+o[ot].value),o[ot].selected!==kt&&(o[ot].selected=kt),kt&&ht&&(o[ot].defaultSelected=!0)}else{for(ot=""+Yn(ot),P=null,kt=0;kt<o.length;kt++){if(o[kt].value===ot){o[kt].selected=!0,ht&&(o[kt].defaultSelected=!0);return}P!==null||o[kt].disabled||(P=o[kt])}P!==null&&(P.selected=!0)}}function Do(o,P,ot){if(P!=null&&(P=""+Yn(P),P!==o.value&&(o.value=P),ot==null)){o.defaultValue!==P&&(o.defaultValue=P);return}o.defaultValue=ot!=null?""+Yn(ot):""}function za(o,P,ot,ht){if(P==null){if(ht!=null){if(ot!=null)throw Error(t(92));if(Dt(ht)){if(1<ht.length)throw Error(t(93));ht=ht[0]}ot=ht}ot==null&&(ot=""),P=ot}ot=Yn(P),o.defaultValue=ot,ht=o.textContent,ht===ot&&ht!==""&&ht!==null&&(o.value=ht)}function aa(o,P){if(P){var ot=o.firstChild;if(ot&&ot===o.lastChild&&ot.nodeType===3){ot.nodeValue=P;return}}o.textContent=P}var Ji=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lo(o,P,ot){var ht=P.indexOf("--")===0;ot==null||typeof ot=="boolean"||ot===""?ht?o.setProperty(P,""):P==="float"?o.cssFloat="":o[P]="":ht?o.setProperty(P,ot):typeof ot!="number"||ot===0||Ji.has(P)?P==="float"?o.cssFloat=ot:o[P]=(""+ot).trim():o[P]=ot+"px"}function Ls(o,P,ot){if(P!=null&&typeof P!="object")throw Error(t(62));if(o=o.style,ot!=null){for(var ht in ot)!ot.hasOwnProperty(ht)||P!=null&&P.hasOwnProperty(ht)||(ht.indexOf("--")===0?o.setProperty(ht,""):ht==="float"?o.cssFloat="":o[ht]="");for(var kt in P)ht=P[kt],P.hasOwnProperty(kt)&&ot[kt]!==ht&&Lo(o,kt,ht)}else for(var Nt in P)P.hasOwnProperty(Nt)&&Lo(o,Nt,P[Nt])}function Ca(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Gu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function io(o){return Gu.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var ts=null;function Is(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ga=null,Ha=null;function El(o){var P=Jr(o);if(P&&(o=P.stateNode)){var ot=o[Bt]||null;e:switch(o=P.stateNode,P.type){case"input":if(no(o,ot.value,ot.defaultValue,ot.defaultValue,ot.checked,ot.defaultChecked,ot.type,ot.name),P=ot.name,ot.type==="radio"&&P!=null){for(ot=o;ot.parentNode;)ot=ot.parentNode;for(ot=ot.querySelectorAll('input[name="'+Jn(""+P)+'"][type="radio"]'),P=0;P<ot.length;P++){var ht=ot[P];if(ht!==o&&ht.form===o.form){var kt=ht[Bt]||null;if(!kt)throw Error(t(90));no(ht,kt.value,kt.defaultValue,kt.defaultValue,kt.checked,kt.defaultChecked,kt.type,kt.name)}}for(P=0;P<ot.length;P++)ht=ot[P],ht.form===o.form&&wi(ht)}break e;case"textarea":Do(o,ot.value,ot.defaultValue);break e;case"select":P=ot.value,P!=null&&ja(o,!!ot.multiple,P,!1)}}}var rs=!1;function Tl(o,P,ot){if(rs)return o(P,ot);rs=!0;try{var ht=o(P);return ht}finally{if(rs=!1,(Ga!==null||Ha!==null)&&(bu(),Ga&&(P=Ga,o=Ha,Ha=Ga=null,El(P),o)))for(P=0;P<o.length;P++)El(o[P])}}function Io(o,P){var ot=o.stateNode;if(ot===null)return null;var ht=ot[Bt]||null;if(ht===null)return null;ot=ht[P];e:switch(P){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(ht=!ht.disabled)||(o=o.type,ht=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!ht;break e;default:o=!1}if(o)return null;if(ot&&typeof ot!="function")throw Error(t(231,P,typeof ot));return ot}var Ea=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ps=!1;if(Ea)try{var ao={};Object.defineProperty(ao,"passive",{get:function(){Ps=!0}}),window.addEventListener("test",ao,ao),window.removeEventListener("test",ao,ao)}catch{Ps=!1}var Ni=null,oa=null,Oa=null;function oo(){if(Oa)return Oa;var o,P=oa,ot=P.length,ht,kt="value"in Ni?Ni.value:Ni.textContent,Nt=kt.length;for(o=0;o<ot&&P[o]===kt[o];o++);var rr=ot-o;for(ht=1;ht<=rr&&P[ot-ht]===kt[Nt-ht];ht++);return Oa=kt.slice(o,1<ht?1-ht:void 0)}function ea(o){var P=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&P===13&&(o=13)):o=P,o===10&&(o=13),32<=o||o===13?o:0}function Ra(){return!0}function Ml(){return!1}function Si(o){function P(ot,ht,kt,Nt,rr){this._reactName=ot,this._targetInst=kt,this.type=ht,this.nativeEvent=Nt,this.target=rr,this.currentTarget=null;for(var pr in o)o.hasOwnProperty(pr)&&(ot=o[pr],this[pr]=ot?ot(Nt):Nt[pr]);return this.isDefaultPrevented=(Nt.defaultPrevented!=null?Nt.defaultPrevented:Nt.returnValue===!1)?Ra:Ml,this.isPropagationStopped=Ml,this}return N(P.prototype,{preventDefault:function(){this.defaultPrevented=!0;var ot=this.nativeEvent;ot&&(ot.preventDefault?ot.preventDefault():typeof ot.returnValue!="unknown"&&(ot.returnValue=!1),this.isDefaultPrevented=Ra)},stopPropagation:function(){var ot=this.nativeEvent;ot&&(ot.stopPropagation?ot.stopPropagation():typeof ot.cancelBubble!="unknown"&&(ot.cancelBubble=!0),this.isPropagationStopped=Ra)},persist:function(){},isPersistent:Ra}),P}var ga={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Po=Si(ga),so=N({},ga,{view:0,detail:0}),Al=Si(so),ns,is,lo,uo=N({},so,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==lo&&(lo&&o.type==="mousemove"?(ns=o.screenX-lo.screenX,is=o.screenY-lo.screenY):is=ns=0,lo=o),ns)},movementY:function(o){return"movementY"in o?o.movementY:is}}),Ns=Si(uo),kl=N({},uo,{dataTransfer:0}),Cl=Si(kl),Ol=N({},so,{relatedTarget:0}),as=Si(Ol),Rl=N({},ga,{animationName:0,elapsedTime:0,pseudoElement:0}),Dl=Si(Rl),Ll=N({},ga,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Il=Si(Ll),Bs=N({},ga,{data:0}),No=Si(Bs),Fs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Da={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function La(o){var P=this.nativeEvent;return P.getModifierState?P.getModifierState(o):(o=Da[o])?!!P[o]:!1}function kn(){return La}var Hu=N({},so,{key:function(o){if(o.key){var P=Fs[o.key]||o.key;if(P!=="Unidentified")return P}return o.type==="keypress"?(o=ea(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Pl[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(o){return o.type==="keypress"?ea(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?ea(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Nl=Si(Hu),co=N({},uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bl=Si(co),Vu=N({},so,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn}),oi=Si(Vu),Fl=N({},ga,{propertyName:0,elapsedTime:0,pseudoElement:0}),qu=Si(Fl),sa=N({},uo,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Yu=Si(sa),Xu=N({},ga,{newState:0,oldState:0}),$u=Si(Xu),Wu=[9,13,27,32],Us=Ea&&"CompositionEvent"in window,Bo=null;Ea&&"documentMode"in document&&(Bo=document.documentMode);var Ul=Ea&&"TextEvent"in window&&!Bo,ji=Ea&&(!Us||Bo&&8<Bo&&11>=Bo),os=" ",st=!1;function _t(o,P){switch(o){case"keyup":return Wu.indexOf(P.keyCode)!==-1;case"keydown":return P.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mt(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Ot=!1;function zt(o,P){switch(o){case"compositionend":return Mt(P);case"keypress":return P.which!==32?null:(st=!0,os);case"textInput":return o=P.data,o===os&&st?null:o;default:return null}}function Xt(o,P){if(Ot)return o==="compositionend"||!Us&&_t(o,P)?(o=oo(),Oa=oa=Ni=null,Ot=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(P.ctrlKey||P.altKey||P.metaKey)||P.ctrlKey&&P.altKey){if(P.char&&1<P.char.length)return P.char;if(P.which)return String.fromCharCode(P.which)}return null;case"compositionend":return ji&&P.locale!=="ko"?null:P.data;default:return null}}var $t={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fr(o){var P=o&&o.nodeName&&o.nodeName.toLowerCase();return P==="input"?!!$t[o.type]:P==="textarea"}function wr(o,P,ot,ht){Ga?Ha?Ha.push(ht):Ha=[ht]:Ga=ht,P=Eu(P,"onChange"),0<P.length&&(ot=new Po("onChange","change",null,ot,ht),o.push({event:ot,listeners:P}))}var xr=null,Rr=null;function Wr(o){lp(o,0)}function Fr(o){var P=on(o);if(wi(P))return o}function Mr(o,P){if(o==="change")return P}var hn=!1;if(Ea){var tn;if(Ea){var un="oninput"in document;if(!un){var Zr=document.createElement("div");Zr.setAttribute("oninput","return;"),un=typeof Zr.oninput=="function"}tn=un}else tn=!1;hn=tn&&(!document.documentMode||9<document.documentMode)}function Qr(){xr&&(xr.detachEvent("onpropertychange",On),Rr=xr=null)}function On(o){if(o.propertyName==="value"&&Fr(Rr)){var P=[];wr(P,Rr,o,Is(o)),Tl(Wr,P)}}function Un(o,P,ot){o==="focusin"?(Qr(),xr=P,Rr=ot,xr.attachEvent("onpropertychange",On)):o==="focusout"&&Qr()}function Ln(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Fr(Rr)}function In(o,P){if(o==="click")return Fr(P)}function Vn(o,P){if(o==="input"||o==="change")return Fr(P)}function hi(o,P){return o===P&&(o!==0||1/o===1/P)||o!==o&&P!==P}var Qn=typeof Object.is=="function"?Object.is:hi;function bi(o,P){if(Qn(o,P))return!0;if(typeof o!="object"||o===null||typeof P!="object"||P===null)return!1;var ot=Object.keys(o),ht=Object.keys(P);if(ot.length!==ht.length)return!1;for(ht=0;ht<ot.length;ht++){var kt=ot[ht];if(!nr.call(P,kt)||!Qn(o[kt],P[kt]))return!1}return!0}function Bi(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Fi(o,P){var ot=Bi(o);o=0;for(var ht;ot;){if(ot.nodeType===3){if(ht=o+ot.textContent.length,o<=P&&ht>=P)return{node:ot,offset:P-o};o=ht}e:{for(;ot;){if(ot.nextSibling){ot=ot.nextSibling;break e}ot=ot.parentNode}ot=void 0}ot=Bi(ot)}}function ta(o,P){return o&&P?o===P?!0:o&&o.nodeType===3?!1:P&&P.nodeType===3?ta(o,P.parentNode):"contains"in o?o.contains(P):o.compareDocumentPosition?!!(o.compareDocumentPosition(P)&16):!1:!1}function ai(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var P=ki(o.document);P instanceof o.HTMLIFrameElement;){try{var ot=typeof P.contentWindow.location.href=="string"}catch{ot=!1}if(ot)o=P.contentWindow;else break;P=ki(o.document)}return P}function si(o){var P=o&&o.nodeName&&o.nodeName.toLowerCase();return P&&(P==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||P==="textarea"||o.contentEditable==="true")}var ni=Ea&&"documentMode"in document&&11>=document.documentMode,Ei=null,gi=null,Ti=null,ui=!1;function Ri(o,P,ot){var ht=ot.window===ot?ot.document:ot.nodeType===9?ot:ot.ownerDocument;ui||Ei==null||Ei!==ki(ht)||(ht=Ei,"selectionStart"in ht&&si(ht)?ht={start:ht.selectionStart,end:ht.selectionEnd}:(ht=(ht.ownerDocument&&ht.ownerDocument.defaultView||window).getSelection(),ht={anchorNode:ht.anchorNode,anchorOffset:ht.anchorOffset,focusNode:ht.focusNode,focusOffset:ht.focusOffset}),Ti&&bi(Ti,ht)||(Ti=ht,ht=Eu(gi,"onSelect"),0<ht.length&&(P=new Po("onSelect","select",null,P,ot),o.push({event:P,listeners:ht}),P.target=Ei)))}function la(o,P){var ot={};return ot[o.toLowerCase()]=P.toLowerCase(),ot["Webkit"+o]="webkit"+P,ot["Moz"+o]="moz"+P,ot}var ua={animationend:la("Animation","AnimationEnd"),animationiteration:la("Animation","AnimationIteration"),animationstart:la("Animation","AnimationStart"),transitionrun:la("Transition","TransitionRun"),transitionstart:la("Transition","TransitionStart"),transitioncancel:la("Transition","TransitionCancel"),transitionend:la("Transition","TransitionEnd")},ss={},Ff={};Ea&&(Ff=document.createElement("div").style,"AnimationEvent"in window||(delete ua.animationend.animation,delete ua.animationiteration.animation,delete ua.animationstart.animation),"TransitionEvent"in window||delete ua.transitionend.transition);function Fo(o){if(ss[o])return ss[o];if(!ua[o])return o;var P=ua[o],ot;for(ot in P)if(P.hasOwnProperty(ot)&&ot in Ff)return ss[o]=P[ot];return o}var Uf=Fo("animationend"),zf=Fo("animationiteration"),Gf=Fo("animationstart"),zp=Fo("transitionrun"),Gp=Fo("transitionstart"),Hp=Fo("transitioncancel"),Hf=Fo("transitionend"),Vf=new Map,Ku="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ku.push("scrollEnd");function Ta(o,P){Vf.set(o,P),Sn(P,[o])}var qf=new WeakMap;function ya(o,P){if(typeof o=="object"&&o!==null){var ot=qf.get(o);return ot!==void 0?ot:(P={value:o,source:P,stack:vi(P)},qf.set(o,P),P)}return{value:o,source:P,stack:vi(P)}}var va=[],ls=0,Zu=0;function zl(){for(var o=ls,P=Zu=ls=0;P<o;){var ot=va[P];va[P++]=null;var ht=va[P];va[P++]=null;var kt=va[P];va[P++]=null;var Nt=va[P];if(va[P++]=null,ht!==null&&kt!==null){var rr=ht.pending;rr===null?kt.next=kt:(kt.next=rr.next,rr.next=kt),ht.pending=kt}Nt!==0&&Yf(ot,kt,Nt)}}function Gl(o,P,ot,ht){va[ls++]=o,va[ls++]=P,va[ls++]=ot,va[ls++]=ht,Zu|=ht,o.lanes|=ht,o=o.alternate,o!==null&&(o.lanes|=ht)}function Qu(o,P,ot,ht){return Gl(o,P,ot,ht),Hl(o)}function us(o,P){return Gl(o,null,null,P),Hl(o)}function Yf(o,P,ot){o.lanes|=ot;var ht=o.alternate;ht!==null&&(ht.lanes|=ot);for(var kt=!1,Nt=o.return;Nt!==null;)Nt.childLanes|=ot,ht=Nt.alternate,ht!==null&&(ht.childLanes|=ot),Nt.tag===22&&(o=Nt.stateNode,o===null||o._visibility&1||(kt=!0)),o=Nt,Nt=Nt.return;return o.tag===3?(Nt=o.stateNode,kt&&P!==null&&(kt=31-Ir(ot),o=Nt.hiddenUpdates,ht=o[kt],ht===null?o[kt]=[P]:ht.push(P),P.lane=ot|536870912),Nt):null}function Hl(o){if(50<fl)throw fl=0,af=null,Error(t(185));for(var P=o.return;P!==null;)o=P,P=o.return;return o.tag===3?o.stateNode:null}var cs={};function Vp(o,P,ot,ht){this.tag=o,this.key=ot,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=P,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=ht,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ca(o,P,ot,ht){return new Vp(o,P,ot,ht)}function Ju(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Va(o,P){var ot=o.alternate;return ot===null?(ot=ca(o.tag,P,o.key,o.mode),ot.elementType=o.elementType,ot.type=o.type,ot.stateNode=o.stateNode,ot.alternate=o,o.alternate=ot):(ot.pendingProps=P,ot.type=o.type,ot.flags=0,ot.subtreeFlags=0,ot.deletions=null),ot.flags=o.flags&65011712,ot.childLanes=o.childLanes,ot.lanes=o.lanes,ot.child=o.child,ot.memoizedProps=o.memoizedProps,ot.memoizedState=o.memoizedState,ot.updateQueue=o.updateQueue,P=o.dependencies,ot.dependencies=P===null?null:{lanes:P.lanes,firstContext:P.firstContext},ot.sibling=o.sibling,ot.index=o.index,ot.ref=o.ref,ot.refCleanup=o.refCleanup,ot}function Xf(o,P){o.flags&=65011714;var ot=o.alternate;return ot===null?(o.childLanes=0,o.lanes=P,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=ot.childLanes,o.lanes=ot.lanes,o.child=ot.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=ot.memoizedProps,o.memoizedState=ot.memoizedState,o.updateQueue=ot.updateQueue,o.type=ot.type,P=ot.dependencies,o.dependencies=P===null?null:{lanes:P.lanes,firstContext:P.firstContext}),o}function Vl(o,P,ot,ht,kt,Nt){var rr=0;if(ht=o,typeof o=="function")Ju(o)&&(rr=1);else if(typeof o=="string")rr=Ym(o,ot,Rt.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case wt:return o=ca(31,ot,P,kt),o.elementType=wt,o.lanes=Nt,o;case de:return Uo(ot.children,kt,Nt,P);case pe:rr=8,kt|=24;break;case Ye:return o=ca(12,ot,P,kt|2),o.elementType=Ye,o.lanes=Nt,o;case ft:return o=ca(13,ot,P,kt),o.elementType=ft,o.lanes=Nt,o;case yt:return o=ca(19,ot,P,kt),o.elementType=yt,o.lanes=Nt,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case me:case nt:rr=10;break e;case Le:rr=9;break e;case tt:rr=11;break e;case gt:rr=14;break e;case mt:rr=16,ht=null;break e}rr=29,ot=Error(t(130,o===null?"null":typeof o,"")),ht=null}return P=ca(rr,ot,P,kt),P.elementType=o,P.type=ht,P.lanes=Nt,P}function Uo(o,P,ot,ht){return o=ca(7,o,ht,P),o.lanes=ot,o}function ec(o,P,ot){return o=ca(6,o,null,P),o.lanes=ot,o}function tc(o,P,ot){return P=ca(4,o.children!==null?o.children:[],o.key,P),P.lanes=ot,P.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},P}var fs=[],hs=0,ql=null,Yl=0,ba=[],xa=0,zo=null,qa=1,Ya="";function Go(o,P){fs[hs++]=Yl,fs[hs++]=ql,ql=o,Yl=P}function $f(o,P,ot){ba[xa++]=qa,ba[xa++]=Ya,ba[xa++]=zo,zo=o;var ht=qa;o=Ya;var kt=32-Ir(ht)-1;ht&=~(1<<kt),ot+=1;var Nt=32-Ir(P)+kt;if(30<Nt){var rr=kt-kt%5;Nt=(ht&(1<<rr)-1).toString(32),ht>>=rr,kt-=rr,qa=1<<32-Ir(P)+kt|ot<<kt|ht,Ya=Nt+o}else qa=1<<Nt|ot<<kt|ht,Ya=o}function rc(o){o.return!==null&&(Go(o,1),$f(o,1,0))}function nc(o){for(;o===ql;)ql=fs[--hs],fs[hs]=null,Yl=fs[--hs],fs[hs]=null;for(;o===zo;)zo=ba[--xa],ba[xa]=null,Ya=ba[--xa],ba[xa]=null,qa=ba[--xa],ba[xa]=null}var Zi=null,Ci=null,ii=!1,Ho=null,Ia=!1,ic=Error(t(519));function Vo(o){var P=Error(t(418,""));throw Hs(ya(P,o)),ic}function Wf(o){var P=o.stateNode,ot=o.type,ht=o.memoizedProps;switch(P[At]=o,P[Bt]=ht,ot){case"dialog":Zn("cancel",P),Zn("close",P);break;case"iframe":case"object":case"embed":Zn("load",P);break;case"video":case"audio":for(ot=0;ot<dl.length;ot++)Zn(dl[ot],P);break;case"source":Zn("error",P);break;case"img":case"image":case"link":Zn("error",P),Zn("load",P);break;case"details":Zn("toggle",P);break;case"input":Zn("invalid",P),Jo(P,ht.value,ht.defaultValue,ht.checked,ht.defaultChecked,ht.type,ht.name,!0),Hn(P);break;case"select":Zn("invalid",P);break;case"textarea":Zn("invalid",P),za(P,ht.value,ht.defaultValue,ht.children),Hn(P)}ot=ht.children,typeof ot!="string"&&typeof ot!="number"&&typeof ot!="bigint"||P.textContent===""+ot||ht.suppressHydrationWarning===!0||hp(P.textContent,ot)?(ht.popover!=null&&(Zn("beforetoggle",P),Zn("toggle",P)),ht.onScroll!=null&&Zn("scroll",P),ht.onScrollEnd!=null&&Zn("scrollend",P),ht.onClick!=null&&(P.onclick=Tu),P=!0):P=!1,P||Vo(o)}function Kf(o){for(Zi=o.return;Zi;)switch(Zi.tag){case 5:case 13:Ia=!1;return;case 27:case 3:Ia=!0;return;default:Zi=Zi.return}}function zs(o){if(o!==Zi)return!1;if(!ii)return Kf(o),ii=!0,!1;var P=o.tag,ot;if((ot=P!==3&&P!==27)&&((ot=P===5)&&(ot=o.type,ot=!(ot!=="form"&&ot!=="button")||_f(o.type,o.memoizedProps)),ot=!ot),ot&&Ci&&Vo(o),Kf(o),P===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,P=0;o;){if(o.nodeType===8)if(ot=o.data,ot==="/$"){if(P===0){Ci=Aa(o.nextSibling);break e}P--}else ot!=="$"&&ot!=="$!"&&ot!=="$?"||P++;o=o.nextSibling}Ci=null}}else P===27?(P=Ci,Mo(o.type)?(o=Ef,Ef=null,Ci=o):Ci=P):Ci=Zi?Aa(o.stateNode.nextSibling):null;return!0}function Gs(){Ci=Zi=null,ii=!1}function Zf(){var o=Ho;return o!==null&&(ia===null?ia=o:ia.push.apply(ia,o),Ho=null),o}function Hs(o){Ho===null?Ho=[o]:Ho.push(o)}var ac=Yt(null),qo=null,Xa=null;function fo(o,P,ot){vt(ac,P._currentValue),P._currentValue=ot}function $a(o){o._currentValue=ac.current,Zt(ac)}function oc(o,P,ot){for(;o!==null;){var ht=o.alternate;if((o.childLanes&P)!==P?(o.childLanes|=P,ht!==null&&(ht.childLanes|=P)):ht!==null&&(ht.childLanes&P)!==P&&(ht.childLanes|=P),o===ot)break;o=o.return}}function sc(o,P,ot,ht){var kt=o.child;for(kt!==null&&(kt.return=o);kt!==null;){var Nt=kt.dependencies;if(Nt!==null){var rr=kt.child;Nt=Nt.firstContext;e:for(;Nt!==null;){var pr=Nt;Nt=kt;for(var Or=0;Or<P.length;Or++)if(pr.context===P[Or]){Nt.lanes|=ot,pr=Nt.alternate,pr!==null&&(pr.lanes|=ot),oc(Nt.return,ot,o),ht||(rr=null);break e}Nt=pr.next}}else if(kt.tag===18){if(rr=kt.return,rr===null)throw Error(t(341));rr.lanes|=ot,Nt=rr.alternate,Nt!==null&&(Nt.lanes|=ot),oc(rr,ot,o),rr=null}else rr=kt.child;if(rr!==null)rr.return=kt;else for(rr=kt;rr!==null;){if(rr===o){rr=null;break}if(kt=rr.sibling,kt!==null){kt.return=rr.return,rr=kt;break}rr=rr.return}kt=rr}}function Vs(o,P,ot,ht){o=null;for(var kt=P,Nt=!1;kt!==null;){if(!Nt){if((kt.flags&524288)!==0)Nt=!0;else if((kt.flags&262144)!==0)break}if(kt.tag===10){var rr=kt.alternate;if(rr===null)throw Error(t(387));if(rr=rr.memoizedProps,rr!==null){var pr=kt.type;Qn(kt.pendingProps.value,rr.value)||(o!==null?o.push(pr):o=[pr])}}else if(kt===Jt.current){if(rr=kt.alternate,rr===null)throw Error(t(387));rr.memoizedState.memoizedState!==kt.memoizedState.memoizedState&&(o!==null?o.push(bl):o=[bl])}kt=kt.return}o!==null&&sc(P,o,ot,ht),P.flags|=262144}function Xl(o){for(o=o.firstContext;o!==null;){if(!Qn(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Yo(o){qo=o,Xa=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Ki(o){return Qf(qo,o)}function $l(o,P){return qo===null&&Yo(o),Qf(o,P)}function Qf(o,P){var ot=P._currentValue;if(P={context:P,memoizedValue:ot,next:null},Xa===null){if(o===null)throw Error(t(308));Xa=P,o.dependencies={lanes:0,firstContext:P},o.flags|=524288}else Xa=Xa.next=P;return ot}var qp=typeof AbortController<"u"?AbortController:function(){var o=[],P=this.signal={aborted:!1,addEventListener:function(ot,ht){o.push(ht)}};this.abort=function(){P.aborted=!0,o.forEach(function(ot){return ot()})}},Yp=r.unstable_scheduleCallback,Xp=r.unstable_NormalPriority,Ui={$$typeof:nt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lc(){return{controller:new qp,data:new Map,refCount:0}}function qs(o){o.refCount--,o.refCount===0&&Yp(Xp,function(){o.controller.abort()})}var Ys=null,uc=0,ds=0,ps=null;function $p(o,P){if(Ys===null){var ot=Ys=[];uc=0,ds=hf(),ps={status:"pending",value:void 0,then:function(ht){ot.push(ht)}}}return uc++,P.then(Jf,Jf),P}function Jf(){if(--uc===0&&Ys!==null){ps!==null&&(ps.status="fulfilled");var o=Ys;Ys=null,ds=0,ps=null;for(var P=0;P<o.length;P++)(0,o[P])()}}function Wp(o,P){var ot=[],ht={status:"pending",value:null,reason:null,then:function(kt){ot.push(kt)}};return o.then(function(){ht.status="fulfilled",ht.value=P;for(var kt=0;kt<ot.length;kt++)(0,ot[kt])(P)},function(kt){for(ht.status="rejected",ht.reason=kt,kt=0;kt<ot.length;kt++)(0,ot[kt])(void 0)}),ht}var eh=Pt.S;Pt.S=function(o,P){typeof P=="object"&&P!==null&&typeof P.then=="function"&&$p(o,P),eh!==null&&eh(o,P)};var Xo=Yt(null);function cc(){var o=Xo.current;return o!==null?o:xi.pooledCache}function Wl(o,P){P===null?vt(Xo,Xo.current):vt(Xo,P.pool)}function th(){var o=cc();return o===null?null:{parent:Ui._currentValue,pool:o}}var Xs=Error(t(460)),rh=Error(t(474)),Kl=Error(t(542)),fc={then:function(){}};function nh(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Zl(){}function ih(o,P,ot){switch(ot=o[ot],ot===void 0?o.push(P):ot!==P&&(P.then(Zl,Zl),P=ot),P.status){case"fulfilled":return P.value;case"rejected":throw o=P.reason,oh(o),o;default:if(typeof P.status=="string")P.then(Zl,Zl);else{if(o=xi,o!==null&&100<o.shellSuspendCounter)throw Error(t(482));o=P,o.status="pending",o.then(function(ht){if(P.status==="pending"){var kt=P;kt.status="fulfilled",kt.value=ht}},function(ht){if(P.status==="pending"){var kt=P;kt.status="rejected",kt.reason=ht}})}switch(P.status){case"fulfilled":return P.value;case"rejected":throw o=P.reason,oh(o),o}throw $s=P,Xs}}var $s=null;function ah(){if($s===null)throw Error(t(459));var o=$s;return $s=null,o}function oh(o){if(o===Xs||o===Kl)throw Error(t(483))}var ho=!1;function hc(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dc(o,P){o=o.updateQueue,P.updateQueue===o&&(P.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function po(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function mo(o,P,ot){var ht=o.updateQueue;if(ht===null)return null;if(ht=ht.shared,(ci&2)!==0){var kt=ht.pending;return kt===null?P.next=P:(P.next=kt.next,kt.next=P),ht.pending=P,P=Hl(o),Yf(o,null,ot),P}return Gl(o,ht,P,ot),Hl(o)}function Ws(o,P,ot){if(P=P.updateQueue,P!==null&&(P=P.shared,(ot&4194048)!==0)){var ht=P.lanes;ht&=o.pendingLanes,ot|=ht,P.lanes=ot,Tn(o,ot)}}function pc(o,P){var ot=o.updateQueue,ht=o.alternate;if(ht!==null&&(ht=ht.updateQueue,ot===ht)){var kt=null,Nt=null;if(ot=ot.firstBaseUpdate,ot!==null){do{var rr={lane:ot.lane,tag:ot.tag,payload:ot.payload,callback:null,next:null};Nt===null?kt=Nt=rr:Nt=Nt.next=rr,ot=ot.next}while(ot!==null);Nt===null?kt=Nt=P:Nt=Nt.next=P}else kt=Nt=P;ot={baseState:ht.baseState,firstBaseUpdate:kt,lastBaseUpdate:Nt,shared:ht.shared,callbacks:ht.callbacks},o.updateQueue=ot;return}o=ot.lastBaseUpdate,o===null?ot.firstBaseUpdate=P:o.next=P,ot.lastBaseUpdate=P}var mc=!1;function Ks(){if(mc){var o=ps;if(o!==null)throw o}}function Zs(o,P,ot,ht){mc=!1;var kt=o.updateQueue;ho=!1;var Nt=kt.firstBaseUpdate,rr=kt.lastBaseUpdate,pr=kt.shared.pending;if(pr!==null){kt.shared.pending=null;var Or=pr,rn=Or.next;Or.next=null,rr===null?Nt=rn:rr.next=rn,rr=Or;var dn=o.alternate;dn!==null&&(dn=dn.updateQueue,pr=dn.lastBaseUpdate,pr!==rr&&(pr===null?dn.firstBaseUpdate=rn:pr.next=rn,dn.lastBaseUpdate=Or))}if(Nt!==null){var yn=kt.baseState;rr=0,dn=rn=Or=null,pr=Nt;do{var nn=pr.lane&-536870913,sn=nn!==pr.lane;if(sn?(ei&nn)===nn:(ht&nn)===nn){nn!==0&&nn===ds&&(mc=!0),dn!==null&&(dn=dn.next={lane:0,tag:pr.tag,payload:pr.payload,callback:null,next:null});e:{var zn=o,Nn=pr;nn=P;var mi=ot;switch(Nn.tag){case 1:if(zn=Nn.payload,typeof zn=="function"){yn=zn.call(mi,yn,nn);break e}yn=zn;break e;case 3:zn.flags=zn.flags&-65537|128;case 0:if(zn=Nn.payload,nn=typeof zn=="function"?zn.call(mi,yn,nn):zn,nn==null)break e;yn=N({},yn,nn);break e;case 2:ho=!0}}nn=pr.callback,nn!==null&&(o.flags|=64,sn&&(o.flags|=8192),sn=kt.callbacks,sn===null?kt.callbacks=[nn]:sn.push(nn))}else sn={lane:nn,tag:pr.tag,payload:pr.payload,callback:pr.callback,next:null},dn===null?(rn=dn=sn,Or=yn):dn=dn.next=sn,rr|=nn;if(pr=pr.next,pr===null){if(pr=kt.shared.pending,pr===null)break;sn=pr,pr=sn.next,sn.next=null,kt.lastBaseUpdate=sn,kt.shared.pending=null}}while(!0);dn===null&&(Or=yn),kt.baseState=Or,kt.firstBaseUpdate=rn,kt.lastBaseUpdate=dn,Nt===null&&(kt.shared.lanes=0),So|=rr,o.lanes=rr,o.memoizedState=yn}}function sh(o,P){if(typeof o!="function")throw Error(t(191,o));o.call(P)}function lh(o,P){var ot=o.callbacks;if(ot!==null)for(o.callbacks=null,o=0;o<ot.length;o++)sh(ot[o],P)}var ms=Yt(null),Ql=Yt(0);function uh(o,P){o=to,vt(Ql,o),vt(ms,P),to=o|P.baseLanes}function gc(){vt(Ql,to),vt(ms,ms.current)}function yc(){to=Ql.current,Zt(ms),Zt(Ql)}var go=0,Xn=null,di=null,Ii=null,Jl=!1,gs=!1,$o=!1,eu=0,Qs=0,ys=null,Kp=0;function Di(){throw Error(t(321))}function vc(o,P){if(P===null)return!1;for(var ot=0;ot<P.length&&ot<o.length;ot++)if(!Qn(o[ot],P[ot]))return!1;return!0}function bc(o,P,ot,ht,kt,Nt){return go=Nt,Xn=P,P.memoizedState=null,P.updateQueue=null,P.lanes=0,Pt.H=o===null||o.memoizedState===null?Yh:Xh,$o=!1,Nt=ot(ht,kt),$o=!1,gs&&(Nt=fh(P,ot,ht,kt)),ch(o),Nt}function ch(o){Pt.H=ou;var P=di!==null&&di.next!==null;if(go=0,Ii=di=Xn=null,Jl=!1,Qs=0,ys=null,P)throw Error(t(300));o===null||Vi||(o=o.dependencies,o!==null&&Xl(o)&&(Vi=!0))}function fh(o,P,ot,ht){Xn=o;var kt=0;do{if(gs&&(ys=null),Qs=0,gs=!1,25<=kt)throw Error(t(301));if(kt+=1,Ii=di=null,o.updateQueue!=null){var Nt=o.updateQueue;Nt.lastEffect=null,Nt.events=null,Nt.stores=null,Nt.memoCache!=null&&(Nt.memoCache.index=0)}Pt.H=nm,Nt=P(ot,ht)}while(gs);return Nt}function Zp(){var o=Pt.H,P=o.useState()[0];return P=typeof P.then=="function"?Js(P):P,o=o.useState()[0],(di!==null?di.memoizedState:null)!==o&&(Xn.flags|=1024),P}function xc(){var o=eu!==0;return eu=0,o}function _c(o,P,ot){P.updateQueue=o.updateQueue,P.flags&=-2053,o.lanes&=~ot}function wc(o){if(Jl){for(o=o.memoizedState;o!==null;){var P=o.queue;P!==null&&(P.pending=null),o=o.next}Jl=!1}go=0,Ii=di=Xn=null,gs=!1,Qs=eu=0,ys=null}function ra(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ii===null?Xn.memoizedState=Ii=o:Ii=Ii.next=o,Ii}function Pi(){if(di===null){var o=Xn.alternate;o=o!==null?o.memoizedState:null}else o=di.next;var P=Ii===null?Xn.memoizedState:Ii.next;if(P!==null)Ii=P,di=o;else{if(o===null)throw Xn.alternate===null?Error(t(467)):Error(t(310));di=o,o={memoizedState:di.memoizedState,baseState:di.baseState,baseQueue:di.baseQueue,queue:di.queue,next:null},Ii===null?Xn.memoizedState=Ii=o:Ii=Ii.next=o}return Ii}function Sc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Js(o){var P=Qs;return Qs+=1,ys===null&&(ys=[]),o=ih(ys,o,P),P=Xn,(Ii===null?P.memoizedState:Ii.next)===null&&(P=P.alternate,Pt.H=P===null||P.memoizedState===null?Yh:Xh),o}function tu(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Js(o);if(o.$$typeof===nt)return Ki(o)}throw Error(t(438,String(o)))}function jc(o){var P=null,ot=Xn.updateQueue;if(ot!==null&&(P=ot.memoCache),P==null){var ht=Xn.alternate;ht!==null&&(ht=ht.updateQueue,ht!==null&&(ht=ht.memoCache,ht!=null&&(P={data:ht.data.map(function(kt){return kt.slice()}),index:0})))}if(P==null&&(P={data:[],index:0}),ot===null&&(ot=Sc(),Xn.updateQueue=ot),ot.memoCache=P,ot=P.data[P.index],ot===void 0)for(ot=P.data[P.index]=Array(o),ht=0;ht<o;ht++)ot[ht]=St;return P.index++,ot}function Wa(o,P){return typeof P=="function"?P(o):P}function ru(o){var P=Pi();return Ec(P,di,o)}function Ec(o,P,ot){var ht=o.queue;if(ht===null)throw Error(t(311));ht.lastRenderedReducer=ot;var kt=o.baseQueue,Nt=ht.pending;if(Nt!==null){if(kt!==null){var rr=kt.next;kt.next=Nt.next,Nt.next=rr}P.baseQueue=kt=Nt,ht.pending=null}if(Nt=o.baseState,kt===null)o.memoizedState=Nt;else{P=kt.next;var pr=rr=null,Or=null,rn=P,dn=!1;do{var yn=rn.lane&-536870913;if(yn!==rn.lane?(ei&yn)===yn:(go&yn)===yn){var nn=rn.revertLane;if(nn===0)Or!==null&&(Or=Or.next={lane:0,revertLane:0,action:rn.action,hasEagerState:rn.hasEagerState,eagerState:rn.eagerState,next:null}),yn===ds&&(dn=!0);else if((go&nn)===nn){rn=rn.next,nn===ds&&(dn=!0);continue}else yn={lane:0,revertLane:rn.revertLane,action:rn.action,hasEagerState:rn.hasEagerState,eagerState:rn.eagerState,next:null},Or===null?(pr=Or=yn,rr=Nt):Or=Or.next=yn,Xn.lanes|=nn,So|=nn;yn=rn.action,$o&&ot(Nt,yn),Nt=rn.hasEagerState?rn.eagerState:ot(Nt,yn)}else nn={lane:yn,revertLane:rn.revertLane,action:rn.action,hasEagerState:rn.hasEagerState,eagerState:rn.eagerState,next:null},Or===null?(pr=Or=nn,rr=Nt):Or=Or.next=nn,Xn.lanes|=yn,So|=yn;rn=rn.next}while(rn!==null&&rn!==P);if(Or===null?rr=Nt:Or.next=pr,!Qn(Nt,o.memoizedState)&&(Vi=!0,dn&&(ot=ps,ot!==null)))throw ot;o.memoizedState=Nt,o.baseState=rr,o.baseQueue=Or,ht.lastRenderedState=Nt}return kt===null&&(ht.lanes=0),[o.memoizedState,ht.dispatch]}function Tc(o){var P=Pi(),ot=P.queue;if(ot===null)throw Error(t(311));ot.lastRenderedReducer=o;var ht=ot.dispatch,kt=ot.pending,Nt=P.memoizedState;if(kt!==null){ot.pending=null;var rr=kt=kt.next;do Nt=o(Nt,rr.action),rr=rr.next;while(rr!==kt);Qn(Nt,P.memoizedState)||(Vi=!0),P.memoizedState=Nt,P.baseQueue===null&&(P.baseState=Nt),ot.lastRenderedState=Nt}return[Nt,ht]}function hh(o,P,ot){var ht=Xn,kt=Pi(),Nt=ii;if(Nt){if(ot===void 0)throw Error(t(407));ot=ot()}else ot=P();var rr=!Qn((di||kt).memoizedState,ot);rr&&(kt.memoizedState=ot,Vi=!0),kt=kt.queue;var pr=mh.bind(null,ht,kt,o);if(el(2048,8,pr,[o]),kt.getSnapshot!==P||rr||Ii!==null&&Ii.memoizedState.tag&1){if(ht.flags|=2048,vs(9,nu(),ph.bind(null,ht,kt,ot,P),null),xi===null)throw Error(t(349));Nt||(go&124)!==0||dh(ht,P,ot)}return ot}function dh(o,P,ot){o.flags|=16384,o={getSnapshot:P,value:ot},P=Xn.updateQueue,P===null?(P=Sc(),Xn.updateQueue=P,P.stores=[o]):(ot=P.stores,ot===null?P.stores=[o]:ot.push(o))}function ph(o,P,ot,ht){P.value=ot,P.getSnapshot=ht,gh(P)&&yh(o)}function mh(o,P,ot){return ot(function(){gh(P)&&yh(o)})}function gh(o){var P=o.getSnapshot;o=o.value;try{var ot=P();return!Qn(o,ot)}catch{return!0}}function yh(o){var P=us(o,2);P!==null&&ma(P,o,2)}function Mc(o){var P=ra();if(typeof o=="function"){var ot=o;if(o=ot(),$o){Er(!0);try{ot()}finally{Er(!1)}}}return P.memoizedState=P.baseState=o,P.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:o},P}function vh(o,P,ot,ht){return o.baseState=ot,Ec(o,di,typeof ht=="function"?ht:Wa)}function Qp(o,P,ot,ht,kt){if(au(o))throw Error(t(485));if(o=P.action,o!==null){var Nt={payload:kt,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(rr){Nt.listeners.push(rr)}};Pt.T!==null?ot(!0):Nt.isTransition=!1,ht(Nt),ot=P.pending,ot===null?(Nt.next=P.pending=Nt,bh(P,Nt)):(Nt.next=ot.next,P.pending=ot.next=Nt)}}function bh(o,P){var ot=P.action,ht=P.payload,kt=o.state;if(P.isTransition){var Nt=Pt.T,rr={};Pt.T=rr;try{var pr=ot(kt,ht),Or=Pt.S;Or!==null&&Or(rr,pr),xh(o,P,pr)}catch(rn){Ac(o,P,rn)}finally{Pt.T=Nt}}else try{Nt=ot(kt,ht),xh(o,P,Nt)}catch(rn){Ac(o,P,rn)}}function xh(o,P,ot){ot!==null&&typeof ot=="object"&&typeof ot.then=="function"?ot.then(function(ht){_h(o,P,ht)},function(ht){return Ac(o,P,ht)}):_h(o,P,ot)}function _h(o,P,ot){P.status="fulfilled",P.value=ot,wh(P),o.state=ot,P=o.pending,P!==null&&(ot=P.next,ot===P?o.pending=null:(ot=ot.next,P.next=ot,bh(o,ot)))}function Ac(o,P,ot){var ht=o.pending;if(o.pending=null,ht!==null){ht=ht.next;do P.status="rejected",P.reason=ot,wh(P),P=P.next;while(P!==ht)}o.action=null}function wh(o){o=o.listeners;for(var P=0;P<o.length;P++)(0,o[P])()}function Sh(o,P){return P}function jh(o,P){if(ii){var ot=xi.formState;if(ot!==null){e:{var ht=Xn;if(ii){if(Ci){t:{for(var kt=Ci,Nt=Ia;kt.nodeType!==8;){if(!Nt){kt=null;break t}if(kt=Aa(kt.nextSibling),kt===null){kt=null;break t}}Nt=kt.data,kt=Nt==="F!"||Nt==="F"?kt:null}if(kt){Ci=Aa(kt.nextSibling),ht=kt.data==="F!";break e}}Vo(ht)}ht=!1}ht&&(P=ot[0])}}return ot=ra(),ot.memoizedState=ot.baseState=P,ht={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sh,lastRenderedState:P},ot.queue=ht,ot=Hh.bind(null,Xn,ht),ht.dispatch=ot,ht=Mc(!1),Nt=Dc.bind(null,Xn,!1,ht.queue),ht=ra(),kt={state:P,dispatch:null,action:o,pending:null},ht.queue=kt,ot=Qp.bind(null,Xn,kt,Nt,ot),kt.dispatch=ot,ht.memoizedState=o,[P,ot,!1]}function Eh(o){var P=Pi();return Th(P,di,o)}function Th(o,P,ot){if(P=Ec(o,P,Sh)[0],o=ru(Wa)[0],typeof P=="object"&&P!==null&&typeof P.then=="function")try{var ht=Js(P)}catch(rr){throw rr===Xs?Kl:rr}else ht=P;P=Pi();var kt=P.queue,Nt=kt.dispatch;return ot!==P.memoizedState&&(Xn.flags|=2048,vs(9,nu(),Jp.bind(null,kt,ot),null)),[ht,Nt,o]}function Jp(o,P){o.action=P}function Mh(o){var P=Pi(),ot=di;if(ot!==null)return Th(P,ot,o);Pi(),P=P.memoizedState,ot=Pi();var ht=ot.queue.dispatch;return ot.memoizedState=o,[P,ht,!1]}function vs(o,P,ot,ht){return o={tag:o,create:ot,deps:ht,inst:P,next:null},P=Xn.updateQueue,P===null&&(P=Sc(),Xn.updateQueue=P),ot=P.lastEffect,ot===null?P.lastEffect=o.next=o:(ht=ot.next,ot.next=o,o.next=ht,P.lastEffect=o),o}function nu(){return{destroy:void 0,resource:void 0}}function Ah(){return Pi().memoizedState}function iu(o,P,ot,ht){var kt=ra();ht=ht===void 0?null:ht,Xn.flags|=o,kt.memoizedState=vs(1|P,nu(),ot,ht)}function el(o,P,ot,ht){var kt=Pi();ht=ht===void 0?null:ht;var Nt=kt.memoizedState.inst;di!==null&&ht!==null&&vc(ht,di.memoizedState.deps)?kt.memoizedState=vs(P,Nt,ot,ht):(Xn.flags|=o,kt.memoizedState=vs(1|P,Nt,ot,ht))}function kh(o,P){iu(8390656,8,o,P)}function Ch(o,P){el(2048,8,o,P)}function Oh(o,P){return el(4,2,o,P)}function Rh(o,P){return el(4,4,o,P)}function Dh(o,P){if(typeof P=="function"){o=o();var ot=P(o);return function(){typeof ot=="function"?ot():P(null)}}if(P!=null)return o=o(),P.current=o,function(){P.current=null}}function Lh(o,P,ot){ot=ot!=null?ot.concat([o]):null,el(4,4,Dh.bind(null,P,o),ot)}function kc(){}function Ih(o,P){var ot=Pi();P=P===void 0?null:P;var ht=ot.memoizedState;return P!==null&&vc(P,ht[1])?ht[0]:(ot.memoizedState=[o,P],o)}function Ph(o,P){var ot=Pi();P=P===void 0?null:P;var ht=ot.memoizedState;if(P!==null&&vc(P,ht[1]))return ht[0];if(ht=o(),$o){Er(!0);try{o()}finally{Er(!1)}}return ot.memoizedState=[ht,P],ht}function Cc(o,P,ot){return ot===void 0||(go&1073741824)!==0?o.memoizedState=P:(o.memoizedState=ot,o=Fd(),Xn.lanes|=o,So|=o,ot)}function Nh(o,P,ot,ht){return Qn(ot,P)?ot:ms.current!==null?(o=Cc(o,ot,ht),Qn(o,P)||(Vi=!0),o):(go&42)===0?(Vi=!0,o.memoizedState=ot):(o=Fd(),Xn.lanes|=o,So|=o,P)}function Bh(o,P,ot,ht,kt){var Nt=qt.p;qt.p=Nt!==0&&8>Nt?Nt:8;var rr=Pt.T,pr={};Pt.T=pr,Dc(o,!1,P,ot);try{var Or=kt(),rn=Pt.S;if(rn!==null&&rn(pr,Or),Or!==null&&typeof Or=="object"&&typeof Or.then=="function"){var dn=Wp(Or,ht);tl(o,P,dn,pa(o))}else tl(o,P,ht,pa(o))}catch(yn){tl(o,P,{then:function(){},status:"rejected",reason:yn},pa())}finally{qt.p=Nt,Pt.T=rr}}function em(){}function Oc(o,P,ot,ht){if(o.tag!==5)throw Error(t(476));var kt=Fh(o).queue;Bh(o,kt,P,Ht,ot===null?em:function(){return Uh(o),ot(ht)})}function Fh(o){var P=o.memoizedState;if(P!==null)return P;P={memoizedState:Ht,baseState:Ht,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:Ht},next:null};var ot={};return P.next={memoizedState:ot,baseState:ot,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:ot},next:null},o.memoizedState=P,o=o.alternate,o!==null&&(o.memoizedState=P),P}function Uh(o){var P=Fh(o).next.queue;tl(o,P,{},pa())}function Rc(){return Ki(bl)}function zh(){return Pi().memoizedState}function Gh(){return Pi().memoizedState}function tm(o){for(var P=o.return;P!==null;){switch(P.tag){case 24:case 3:var ot=pa();o=po(ot);var ht=mo(P,o,ot);ht!==null&&(ma(ht,P,ot),Ws(ht,P,ot)),P={cache:lc()},o.payload=P;return}P=P.return}}function rm(o,P,ot){var ht=pa();ot={lane:ht,revertLane:0,action:ot,hasEagerState:!1,eagerState:null,next:null},au(o)?Vh(P,ot):(ot=Qu(o,P,ot,ht),ot!==null&&(ma(ot,o,ht),qh(ot,P,ht)))}function Hh(o,P,ot){var ht=pa();tl(o,P,ot,ht)}function tl(o,P,ot,ht){var kt={lane:ht,revertLane:0,action:ot,hasEagerState:!1,eagerState:null,next:null};if(au(o))Vh(P,kt);else{var Nt=o.alternate;if(o.lanes===0&&(Nt===null||Nt.lanes===0)&&(Nt=P.lastRenderedReducer,Nt!==null))try{var rr=P.lastRenderedState,pr=Nt(rr,ot);if(kt.hasEagerState=!0,kt.eagerState=pr,Qn(pr,rr))return Gl(o,P,kt,0),xi===null&&zl(),!1}catch{}finally{}if(ot=Qu(o,P,kt,ht),ot!==null)return ma(ot,o,ht),qh(ot,P,ht),!0}return!1}function Dc(o,P,ot,ht){if(ht={lane:2,revertLane:hf(),action:ht,hasEagerState:!1,eagerState:null,next:null},au(o)){if(P)throw Error(t(479))}else P=Qu(o,ot,ht,2),P!==null&&ma(P,o,2)}function au(o){var P=o.alternate;return o===Xn||P!==null&&P===Xn}function Vh(o,P){gs=Jl=!0;var ot=o.pending;ot===null?P.next=P:(P.next=ot.next,ot.next=P),o.pending=P}function qh(o,P,ot){if((ot&4194048)!==0){var ht=P.lanes;ht&=o.pendingLanes,ot|=ht,P.lanes=ot,Tn(o,ot)}}var ou={readContext:Ki,use:tu,useCallback:Di,useContext:Di,useEffect:Di,useImperativeHandle:Di,useLayoutEffect:Di,useInsertionEffect:Di,useMemo:Di,useReducer:Di,useRef:Di,useState:Di,useDebugValue:Di,useDeferredValue:Di,useTransition:Di,useSyncExternalStore:Di,useId:Di,useHostTransitionStatus:Di,useFormState:Di,useActionState:Di,useOptimistic:Di,useMemoCache:Di,useCacheRefresh:Di},Yh={readContext:Ki,use:tu,useCallback:function(o,P){return ra().memoizedState=[o,P===void 0?null:P],o},useContext:Ki,useEffect:kh,useImperativeHandle:function(o,P,ot){ot=ot!=null?ot.concat([o]):null,iu(4194308,4,Dh.bind(null,P,o),ot)},useLayoutEffect:function(o,P){return iu(4194308,4,o,P)},useInsertionEffect:function(o,P){iu(4,2,o,P)},useMemo:function(o,P){var ot=ra();P=P===void 0?null:P;var ht=o();if($o){Er(!0);try{o()}finally{Er(!1)}}return ot.memoizedState=[ht,P],ht},useReducer:function(o,P,ot){var ht=ra();if(ot!==void 0){var kt=ot(P);if($o){Er(!0);try{ot(P)}finally{Er(!1)}}}else kt=P;return ht.memoizedState=ht.baseState=kt,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:kt},ht.queue=o,o=o.dispatch=rm.bind(null,Xn,o),[ht.memoizedState,o]},useRef:function(o){var P=ra();return o={current:o},P.memoizedState=o},useState:function(o){o=Mc(o);var P=o.queue,ot=Hh.bind(null,Xn,P);return P.dispatch=ot,[o.memoizedState,ot]},useDebugValue:kc,useDeferredValue:function(o,P){var ot=ra();return Cc(ot,o,P)},useTransition:function(){var o=Mc(!1);return o=Bh.bind(null,Xn,o.queue,!0,!1),ra().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,P,ot){var ht=Xn,kt=ra();if(ii){if(ot===void 0)throw Error(t(407));ot=ot()}else{if(ot=P(),xi===null)throw Error(t(349));(ei&124)!==0||dh(ht,P,ot)}kt.memoizedState=ot;var Nt={value:ot,getSnapshot:P};return kt.queue=Nt,kh(mh.bind(null,ht,Nt,o),[o]),ht.flags|=2048,vs(9,nu(),ph.bind(null,ht,Nt,ot,P),null),ot},useId:function(){var o=ra(),P=xi.identifierPrefix;if(ii){var ot=Ya,ht=qa;ot=(ht&~(1<<32-Ir(ht)-1)).toString(32)+ot,P=""+P+"R"+ot,ot=eu++,0<ot&&(P+="H"+ot.toString(32)),P+=""}else ot=Kp++,P=""+P+"r"+ot.toString(32)+"";return o.memoizedState=P},useHostTransitionStatus:Rc,useFormState:jh,useActionState:jh,useOptimistic:function(o){var P=ra();P.memoizedState=P.baseState=o;var ot={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return P.queue=ot,P=Dc.bind(null,Xn,!0,ot),ot.dispatch=P,[o,P]},useMemoCache:jc,useCacheRefresh:function(){return ra().memoizedState=tm.bind(null,Xn)}},Xh={readContext:Ki,use:tu,useCallback:Ih,useContext:Ki,useEffect:Ch,useImperativeHandle:Lh,useInsertionEffect:Oh,useLayoutEffect:Rh,useMemo:Ph,useReducer:ru,useRef:Ah,useState:function(){return ru(Wa)},useDebugValue:kc,useDeferredValue:function(o,P){var ot=Pi();return Nh(ot,di.memoizedState,o,P)},useTransition:function(){var o=ru(Wa)[0],P=Pi().memoizedState;return[typeof o=="boolean"?o:Js(o),P]},useSyncExternalStore:hh,useId:zh,useHostTransitionStatus:Rc,useFormState:Eh,useActionState:Eh,useOptimistic:function(o,P){var ot=Pi();return vh(ot,di,o,P)},useMemoCache:jc,useCacheRefresh:Gh},nm={readContext:Ki,use:tu,useCallback:Ih,useContext:Ki,useEffect:Ch,useImperativeHandle:Lh,useInsertionEffect:Oh,useLayoutEffect:Rh,useMemo:Ph,useReducer:Tc,useRef:Ah,useState:function(){return Tc(Wa)},useDebugValue:kc,useDeferredValue:function(o,P){var ot=Pi();return di===null?Cc(ot,o,P):Nh(ot,di.memoizedState,o,P)},useTransition:function(){var o=Tc(Wa)[0],P=Pi().memoizedState;return[typeof o=="boolean"?o:Js(o),P]},useSyncExternalStore:hh,useId:zh,useHostTransitionStatus:Rc,useFormState:Mh,useActionState:Mh,useOptimistic:function(o,P){var ot=Pi();return di!==null?vh(ot,di,o,P):(ot.baseState=o,[o,ot.queue.dispatch])},useMemoCache:jc,useCacheRefresh:Gh},bs=null,rl=0;function su(o){var P=rl;return rl+=1,bs===null&&(bs=[]),ih(bs,o,P)}function nl(o,P){P=P.props.ref,o.ref=P!==void 0?P:null}function lu(o,P){throw P.$$typeof===Be?Error(t(525)):(o=Object.prototype.toString.call(P),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":o)))}function $h(o){var P=o._init;return P(o._payload)}function Wh(o){function P($r,Br){if(o){var en=$r.deletions;en===null?($r.deletions=[Br],$r.flags|=16):en.push(Br)}}function ot($r,Br){if(!o)return null;for(;Br!==null;)P($r,Br),Br=Br.sibling;return null}function ht($r){for(var Br=new Map;$r!==null;)$r.key!==null?Br.set($r.key,$r):Br.set($r.index,$r),$r=$r.sibling;return Br}function kt($r,Br){return $r=Va($r,Br),$r.index=0,$r.sibling=null,$r}function Nt($r,Br,en){return $r.index=en,o?(en=$r.alternate,en!==null?(en=en.index,en<Br?($r.flags|=67108866,Br):en):($r.flags|=67108866,Br)):($r.flags|=1048576,Br)}function rr($r){return o&&$r.alternate===null&&($r.flags|=67108866),$r}function pr($r,Br,en,gn){return Br===null||Br.tag!==6?(Br=ec(en,$r.mode,gn),Br.return=$r,Br):(Br=kt(Br,en),Br.return=$r,Br)}function Or($r,Br,en,gn){var Rn=en.type;return Rn===de?dn($r,Br,en.props.children,gn,en.key):Br!==null&&(Br.elementType===Rn||typeof Rn=="object"&&Rn!==null&&Rn.$$typeof===mt&&$h(Rn)===Br.type)?(Br=kt(Br,en.props),nl(Br,en),Br.return=$r,Br):(Br=Vl(en.type,en.key,en.props,null,$r.mode,gn),nl(Br,en),Br.return=$r,Br)}function rn($r,Br,en,gn){return Br===null||Br.tag!==4||Br.stateNode.containerInfo!==en.containerInfo||Br.stateNode.implementation!==en.implementation?(Br=tc(en,$r.mode,gn),Br.return=$r,Br):(Br=kt(Br,en.children||[]),Br.return=$r,Br)}function dn($r,Br,en,gn,Rn){return Br===null||Br.tag!==7?(Br=Uo(en,$r.mode,gn,Rn),Br.return=$r,Br):(Br=kt(Br,en),Br.return=$r,Br)}function yn($r,Br,en){if(typeof Br=="string"&&Br!==""||typeof Br=="number"||typeof Br=="bigint")return Br=ec(""+Br,$r.mode,en),Br.return=$r,Br;if(typeof Br=="object"&&Br!==null){switch(Br.$$typeof){case b:return en=Vl(Br.type,Br.key,Br.props,null,$r.mode,en),nl(en,Br),en.return=$r,en;case E:return Br=tc(Br,$r.mode,en),Br.return=$r,Br;case mt:var gn=Br._init;return Br=gn(Br._payload),yn($r,Br,en)}if(Dt(Br)||Ct(Br))return Br=Uo(Br,$r.mode,en,null),Br.return=$r,Br;if(typeof Br.then=="function")return yn($r,su(Br),en);if(Br.$$typeof===nt)return yn($r,$l($r,Br),en);lu($r,Br)}return null}function nn($r,Br,en,gn){var Rn=Br!==null?Br.key:null;if(typeof en=="string"&&en!==""||typeof en=="number"||typeof en=="bigint")return Rn!==null?null:pr($r,Br,""+en,gn);if(typeof en=="object"&&en!==null){switch(en.$$typeof){case b:return en.key===Rn?Or($r,Br,en,gn):null;case E:return en.key===Rn?rn($r,Br,en,gn):null;case mt:return Rn=en._init,en=Rn(en._payload),nn($r,Br,en,gn)}if(Dt(en)||Ct(en))return Rn!==null?null:dn($r,Br,en,gn,null);if(typeof en.then=="function")return nn($r,Br,su(en),gn);if(en.$$typeof===nt)return nn($r,Br,$l($r,en),gn);lu($r,en)}return null}function sn($r,Br,en,gn,Rn){if(typeof gn=="string"&&gn!==""||typeof gn=="number"||typeof gn=="bigint")return $r=$r.get(en)||null,pr(Br,$r,""+gn,Rn);if(typeof gn=="object"&&gn!==null){switch(gn.$$typeof){case b:return $r=$r.get(gn.key===null?en:gn.key)||null,Or(Br,$r,gn,Rn);case E:return $r=$r.get(gn.key===null?en:gn.key)||null,rn(Br,$r,gn,Rn);case mt:var Wn=gn._init;return gn=Wn(gn._payload),sn($r,Br,en,gn,Rn)}if(Dt(gn)||Ct(gn))return $r=$r.get(en)||null,dn(Br,$r,gn,Rn,null);if(typeof gn.then=="function")return sn($r,Br,en,su(gn),Rn);if(gn.$$typeof===nt)return sn($r,Br,en,$l(Br,gn),Rn);lu(Br,gn)}return null}function zn($r,Br,en,gn){for(var Rn=null,Wn=null,Pn=Br,Fn=Br=0,Yi=null;Pn!==null&&Fn<en.length;Fn++){Pn.index>Fn?(Yi=Pn,Pn=null):Yi=Pn.sibling;var ri=nn($r,Pn,en[Fn],gn);if(ri===null){Pn===null&&(Pn=Yi);break}o&&Pn&&ri.alternate===null&&P($r,Pn),Br=Nt(ri,Br,Fn),Wn===null?Rn=ri:Wn.sibling=ri,Wn=ri,Pn=Yi}if(Fn===en.length)return ot($r,Pn),ii&&Go($r,Fn),Rn;if(Pn===null){for(;Fn<en.length;Fn++)Pn=yn($r,en[Fn],gn),Pn!==null&&(Br=Nt(Pn,Br,Fn),Wn===null?Rn=Pn:Wn.sibling=Pn,Wn=Pn);return ii&&Go($r,Fn),Rn}for(Pn=ht(Pn);Fn<en.length;Fn++)Yi=sn(Pn,$r,Fn,en[Fn],gn),Yi!==null&&(o&&Yi.alternate!==null&&Pn.delete(Yi.key===null?Fn:Yi.key),Br=Nt(Yi,Br,Fn),Wn===null?Rn=Yi:Wn.sibling=Yi,Wn=Yi);return o&&Pn.forEach(function(Ro){return P($r,Ro)}),ii&&Go($r,Fn),Rn}function Nn($r,Br,en,gn){if(en==null)throw Error(t(151));for(var Rn=null,Wn=null,Pn=Br,Fn=Br=0,Yi=null,ri=en.next();Pn!==null&&!ri.done;Fn++,ri=en.next()){Pn.index>Fn?(Yi=Pn,Pn=null):Yi=Pn.sibling;var Ro=nn($r,Pn,ri.value,gn);if(Ro===null){Pn===null&&(Pn=Yi);break}o&&Pn&&Ro.alternate===null&&P($r,Pn),Br=Nt(Ro,Br,Fn),Wn===null?Rn=Ro:Wn.sibling=Ro,Wn=Ro,Pn=Yi}if(ri.done)return ot($r,Pn),ii&&Go($r,Fn),Rn;if(Pn===null){for(;!ri.done;Fn++,ri=en.next())ri=yn($r,ri.value,gn),ri!==null&&(Br=Nt(ri,Br,Fn),Wn===null?Rn=ri:Wn.sibling=ri,Wn=ri);return ii&&Go($r,Fn),Rn}for(Pn=ht(Pn);!ri.done;Fn++,ri=en.next())ri=sn(Pn,$r,Fn,ri.value,gn),ri!==null&&(o&&ri.alternate!==null&&Pn.delete(ri.key===null?Fn:ri.key),Br=Nt(ri,Br,Fn),Wn===null?Rn=ri:Wn.sibling=ri,Wn=ri);return o&&Pn.forEach(function(i0){return P($r,i0)}),ii&&Go($r,Fn),Rn}function mi($r,Br,en,gn){if(typeof en=="object"&&en!==null&&en.type===de&&en.key===null&&(en=en.props.children),typeof en=="object"&&en!==null){switch(en.$$typeof){case b:e:{for(var Rn=en.key;Br!==null;){if(Br.key===Rn){if(Rn=en.type,Rn===de){if(Br.tag===7){ot($r,Br.sibling),gn=kt(Br,en.props.children),gn.return=$r,$r=gn;break e}}else if(Br.elementType===Rn||typeof Rn=="object"&&Rn!==null&&Rn.$$typeof===mt&&$h(Rn)===Br.type){ot($r,Br.sibling),gn=kt(Br,en.props),nl(gn,en),gn.return=$r,$r=gn;break e}ot($r,Br);break}else P($r,Br);Br=Br.sibling}en.type===de?(gn=Uo(en.props.children,$r.mode,gn,en.key),gn.return=$r,$r=gn):(gn=Vl(en.type,en.key,en.props,null,$r.mode,gn),nl(gn,en),gn.return=$r,$r=gn)}return rr($r);case E:e:{for(Rn=en.key;Br!==null;){if(Br.key===Rn)if(Br.tag===4&&Br.stateNode.containerInfo===en.containerInfo&&Br.stateNode.implementation===en.implementation){ot($r,Br.sibling),gn=kt(Br,en.children||[]),gn.return=$r,$r=gn;break e}else{ot($r,Br);break}else P($r,Br);Br=Br.sibling}gn=tc(en,$r.mode,gn),gn.return=$r,$r=gn}return rr($r);case mt:return Rn=en._init,en=Rn(en._payload),mi($r,Br,en,gn)}if(Dt(en))return zn($r,Br,en,gn);if(Ct(en)){if(Rn=Ct(en),typeof Rn!="function")throw Error(t(150));return en=Rn.call(en),Nn($r,Br,en,gn)}if(typeof en.then=="function")return mi($r,Br,su(en),gn);if(en.$$typeof===nt)return mi($r,Br,$l($r,en),gn);lu($r,en)}return typeof en=="string"&&en!==""||typeof en=="number"||typeof en=="bigint"?(en=""+en,Br!==null&&Br.tag===6?(ot($r,Br.sibling),gn=kt(Br,en),gn.return=$r,$r=gn):(ot($r,Br),gn=ec(en,$r.mode,gn),gn.return=$r,$r=gn),rr($r)):ot($r,Br)}return function($r,Br,en,gn){try{rl=0;var Rn=mi($r,Br,en,gn);return bs=null,Rn}catch(Pn){if(Pn===Xs||Pn===Kl)throw Pn;var Wn=ca(29,Pn,null,$r.mode);return Wn.lanes=gn,Wn.return=$r,Wn}finally{}}}var xs=Wh(!0),Kh=Wh(!1),_a=Yt(null),Pa=null;function yo(o){var P=o.alternate;vt(zi,zi.current&1),vt(_a,o),Pa===null&&(P===null||ms.current!==null||P.memoizedState!==null)&&(Pa=o)}function Zh(o){if(o.tag===22){if(vt(zi,zi.current),vt(_a,o),Pa===null){var P=o.alternate;P!==null&&P.memoizedState!==null&&(Pa=o)}}else vo()}function vo(){vt(zi,zi.current),vt(_a,_a.current)}function Ka(o){Zt(_a),Pa===o&&(Pa=null),Zt(zi)}var zi=Yt(0);function uu(o){for(var P=o;P!==null;){if(P.tag===13){var ot=P.memoizedState;if(ot!==null&&(ot=ot.dehydrated,ot===null||ot.data==="$?"||jf(ot)))return P}else if(P.tag===19&&P.memoizedProps.revealOrder!==void 0){if((P.flags&128)!==0)return P}else if(P.child!==null){P.child.return=P,P=P.child;continue}if(P===o)break;for(;P.sibling===null;){if(P.return===null||P.return===o)return null;P=P.return}P.sibling.return=P.return,P=P.sibling}return null}function Lc(o,P,ot,ht){P=o.memoizedState,ot=ot(ht,P),ot=ot==null?P:N({},P,ot),o.memoizedState=ot,o.lanes===0&&(o.updateQueue.baseState=ot)}var Ic={enqueueSetState:function(o,P,ot){o=o._reactInternals;var ht=pa(),kt=po(ht);kt.payload=P,ot!=null&&(kt.callback=ot),P=mo(o,kt,ht),P!==null&&(ma(P,o,ht),Ws(P,o,ht))},enqueueReplaceState:function(o,P,ot){o=o._reactInternals;var ht=pa(),kt=po(ht);kt.tag=1,kt.payload=P,ot!=null&&(kt.callback=ot),P=mo(o,kt,ht),P!==null&&(ma(P,o,ht),Ws(P,o,ht))},enqueueForceUpdate:function(o,P){o=o._reactInternals;var ot=pa(),ht=po(ot);ht.tag=2,P!=null&&(ht.callback=P),P=mo(o,ht,ot),P!==null&&(ma(P,o,ot),Ws(P,o,ot))}};function Qh(o,P,ot,ht,kt,Nt,rr){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(ht,Nt,rr):P.prototype&&P.prototype.isPureReactComponent?!bi(ot,ht)||!bi(kt,Nt):!0}function Jh(o,P,ot,ht){o=P.state,typeof P.componentWillReceiveProps=="function"&&P.componentWillReceiveProps(ot,ht),typeof P.UNSAFE_componentWillReceiveProps=="function"&&P.UNSAFE_componentWillReceiveProps(ot,ht),P.state!==o&&Ic.enqueueReplaceState(P,P.state,null)}function Wo(o,P){var ot=P;if("ref"in P){ot={};for(var ht in P)ht!=="ref"&&(ot[ht]=P[ht])}if(o=o.defaultProps){ot===P&&(ot=N({},ot));for(var kt in o)ot[kt]===void 0&&(ot[kt]=o[kt])}return ot}var cu=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function ed(o){cu(o)}function td(o){console.error(o)}function rd(o){cu(o)}function fu(o,P){try{var ot=o.onUncaughtError;ot(P.value,{componentStack:P.stack})}catch(ht){setTimeout(function(){throw ht})}}function nd(o,P,ot){try{var ht=o.onCaughtError;ht(ot.value,{componentStack:ot.stack,errorBoundary:P.tag===1?P.stateNode:null})}catch(kt){setTimeout(function(){throw kt})}}function Pc(o,P,ot){return ot=po(ot),ot.tag=3,ot.payload={element:null},ot.callback=function(){fu(o,P)},ot}function id(o){return o=po(o),o.tag=3,o}function ad(o,P,ot,ht){var kt=ot.type.getDerivedStateFromError;if(typeof kt=="function"){var Nt=ht.value;o.payload=function(){return kt(Nt)},o.callback=function(){nd(P,ot,ht)}}var rr=ot.stateNode;rr!==null&&typeof rr.componentDidCatch=="function"&&(o.callback=function(){nd(P,ot,ht),typeof kt!="function"&&(jo===null?jo=new Set([this]):jo.add(this));var pr=ht.stack;this.componentDidCatch(ht.value,{componentStack:pr!==null?pr:""})})}function im(o,P,ot,ht,kt){if(ot.flags|=32768,ht!==null&&typeof ht=="object"&&typeof ht.then=="function"){if(P=ot.alternate,P!==null&&Vs(P,ot,kt,!0),ot=_a.current,ot!==null){switch(ot.tag){case 13:return Pa===null?sf():ot.alternate===null&&Oi===0&&(Oi=3),ot.flags&=-257,ot.flags|=65536,ot.lanes=kt,ht===fc?ot.flags|=16384:(P=ot.updateQueue,P===null?ot.updateQueue=new Set([ht]):P.add(ht),uf(o,ht,kt)),!1;case 22:return ot.flags|=65536,ht===fc?ot.flags|=16384:(P=ot.updateQueue,P===null?(P={transitions:null,markerInstances:null,retryQueue:new Set([ht])},ot.updateQueue=P):(ot=P.retryQueue,ot===null?P.retryQueue=new Set([ht]):ot.add(ht)),uf(o,ht,kt)),!1}throw Error(t(435,ot.tag))}return uf(o,ht,kt),sf(),!1}if(ii)return P=_a.current,P!==null?((P.flags&65536)===0&&(P.flags|=256),P.flags|=65536,P.lanes=kt,ht!==ic&&(o=Error(t(422),{cause:ht}),Hs(ya(o,ot)))):(ht!==ic&&(P=Error(t(423),{cause:ht}),Hs(ya(P,ot))),o=o.current.alternate,o.flags|=65536,kt&=-kt,o.lanes|=kt,ht=ya(ht,ot),kt=Pc(o.stateNode,ht,kt),pc(o,kt),Oi!==4&&(Oi=2)),!1;var Nt=Error(t(520),{cause:ht});if(Nt=ya(Nt,ot),cl===null?cl=[Nt]:cl.push(Nt),Oi!==4&&(Oi=2),P===null)return!0;ht=ya(ht,ot),ot=P;do{switch(ot.tag){case 3:return ot.flags|=65536,o=kt&-kt,ot.lanes|=o,o=Pc(ot.stateNode,ht,o),pc(ot,o),!1;case 1:if(P=ot.type,Nt=ot.stateNode,(ot.flags&128)===0&&(typeof P.getDerivedStateFromError=="function"||Nt!==null&&typeof Nt.componentDidCatch=="function"&&(jo===null||!jo.has(Nt))))return ot.flags|=65536,kt&=-kt,ot.lanes|=kt,kt=id(kt),ad(kt,o,ot,ht),pc(ot,kt),!1}ot=ot.return}while(ot!==null);return!1}var od=Error(t(461)),Vi=!1;function Xi(o,P,ot,ht){P.child=o===null?Kh(P,null,ot,ht):xs(P,o.child,ot,ht)}function sd(o,P,ot,ht,kt){ot=ot.render;var Nt=P.ref;if("ref"in ht){var rr={};for(var pr in ht)pr!=="ref"&&(rr[pr]=ht[pr])}else rr=ht;return Yo(P),ht=bc(o,P,ot,rr,Nt,kt),pr=xc(),o!==null&&!Vi?(_c(o,P,kt),Za(o,P,kt)):(ii&&pr&&rc(P),P.flags|=1,Xi(o,P,ht,kt),P.child)}function ld(o,P,ot,ht,kt){if(o===null){var Nt=ot.type;return typeof Nt=="function"&&!Ju(Nt)&&Nt.defaultProps===void 0&&ot.compare===null?(P.tag=15,P.type=Nt,ud(o,P,Nt,ht,kt)):(o=Vl(ot.type,null,ht,P,P.mode,kt),o.ref=P.ref,o.return=P,P.child=o)}if(Nt=o.child,!Vc(o,kt)){var rr=Nt.memoizedProps;if(ot=ot.compare,ot=ot!==null?ot:bi,ot(rr,ht)&&o.ref===P.ref)return Za(o,P,kt)}return P.flags|=1,o=Va(Nt,ht),o.ref=P.ref,o.return=P,P.child=o}function ud(o,P,ot,ht,kt){if(o!==null){var Nt=o.memoizedProps;if(bi(Nt,ht)&&o.ref===P.ref)if(Vi=!1,P.pendingProps=ht=Nt,Vc(o,kt))(o.flags&131072)!==0&&(Vi=!0);else return P.lanes=o.lanes,Za(o,P,kt)}return Nc(o,P,ot,ht,kt)}function cd(o,P,ot){var ht=P.pendingProps,kt=ht.children,Nt=o!==null?o.memoizedState:null;if(ht.mode==="hidden"){if((P.flags&128)!==0){if(ht=Nt!==null?Nt.baseLanes|ot:ot,o!==null){for(kt=P.child=o.child,Nt=0;kt!==null;)Nt=Nt|kt.lanes|kt.childLanes,kt=kt.sibling;P.childLanes=Nt&~ht}else P.childLanes=0,P.child=null;return fd(o,P,ht,ot)}if((ot&536870912)!==0)P.memoizedState={baseLanes:0,cachePool:null},o!==null&&Wl(P,Nt!==null?Nt.cachePool:null),Nt!==null?uh(P,Nt):gc(),Zh(P);else return P.lanes=P.childLanes=536870912,fd(o,P,Nt!==null?Nt.baseLanes|ot:ot,ot)}else Nt!==null?(Wl(P,Nt.cachePool),uh(P,Nt),vo(),P.memoizedState=null):(o!==null&&Wl(P,null),gc(),vo());return Xi(o,P,kt,ot),P.child}function fd(o,P,ot,ht){var kt=cc();return kt=kt===null?null:{parent:Ui._currentValue,pool:kt},P.memoizedState={baseLanes:ot,cachePool:kt},o!==null&&Wl(P,null),gc(),Zh(P),o!==null&&Vs(o,P,ht,!0),null}function hu(o,P){var ot=P.ref;if(ot===null)o!==null&&o.ref!==null&&(P.flags|=4194816);else{if(typeof ot!="function"&&typeof ot!="object")throw Error(t(284));(o===null||o.ref!==ot)&&(P.flags|=4194816)}}function Nc(o,P,ot,ht,kt){return Yo(P),ot=bc(o,P,ot,ht,void 0,kt),ht=xc(),o!==null&&!Vi?(_c(o,P,kt),Za(o,P,kt)):(ii&&ht&&rc(P),P.flags|=1,Xi(o,P,ot,kt),P.child)}function hd(o,P,ot,ht,kt,Nt){return Yo(P),P.updateQueue=null,ot=fh(P,ht,ot,kt),ch(o),ht=xc(),o!==null&&!Vi?(_c(o,P,Nt),Za(o,P,Nt)):(ii&&ht&&rc(P),P.flags|=1,Xi(o,P,ot,Nt),P.child)}function dd(o,P,ot,ht,kt){if(Yo(P),P.stateNode===null){var Nt=cs,rr=ot.contextType;typeof rr=="object"&&rr!==null&&(Nt=Ki(rr)),Nt=new ot(ht,Nt),P.memoizedState=Nt.state!==null&&Nt.state!==void 0?Nt.state:null,Nt.updater=Ic,P.stateNode=Nt,Nt._reactInternals=P,Nt=P.stateNode,Nt.props=ht,Nt.state=P.memoizedState,Nt.refs={},hc(P),rr=ot.contextType,Nt.context=typeof rr=="object"&&rr!==null?Ki(rr):cs,Nt.state=P.memoizedState,rr=ot.getDerivedStateFromProps,typeof rr=="function"&&(Lc(P,ot,rr,ht),Nt.state=P.memoizedState),typeof ot.getDerivedStateFromProps=="function"||typeof Nt.getSnapshotBeforeUpdate=="function"||typeof Nt.UNSAFE_componentWillMount!="function"&&typeof Nt.componentWillMount!="function"||(rr=Nt.state,typeof Nt.componentWillMount=="function"&&Nt.componentWillMount(),typeof Nt.UNSAFE_componentWillMount=="function"&&Nt.UNSAFE_componentWillMount(),rr!==Nt.state&&Ic.enqueueReplaceState(Nt,Nt.state,null),Zs(P,ht,Nt,kt),Ks(),Nt.state=P.memoizedState),typeof Nt.componentDidMount=="function"&&(P.flags|=4194308),ht=!0}else if(o===null){Nt=P.stateNode;var pr=P.memoizedProps,Or=Wo(ot,pr);Nt.props=Or;var rn=Nt.context,dn=ot.contextType;rr=cs,typeof dn=="object"&&dn!==null&&(rr=Ki(dn));var yn=ot.getDerivedStateFromProps;dn=typeof yn=="function"||typeof Nt.getSnapshotBeforeUpdate=="function",pr=P.pendingProps!==pr,dn||typeof Nt.UNSAFE_componentWillReceiveProps!="function"&&typeof Nt.componentWillReceiveProps!="function"||(pr||rn!==rr)&&Jh(P,Nt,ht,rr),ho=!1;var nn=P.memoizedState;Nt.state=nn,Zs(P,ht,Nt,kt),Ks(),rn=P.memoizedState,pr||nn!==rn||ho?(typeof yn=="function"&&(Lc(P,ot,yn,ht),rn=P.memoizedState),(Or=ho||Qh(P,ot,Or,ht,nn,rn,rr))?(dn||typeof Nt.UNSAFE_componentWillMount!="function"&&typeof Nt.componentWillMount!="function"||(typeof Nt.componentWillMount=="function"&&Nt.componentWillMount(),typeof Nt.UNSAFE_componentWillMount=="function"&&Nt.UNSAFE_componentWillMount()),typeof Nt.componentDidMount=="function"&&(P.flags|=4194308)):(typeof Nt.componentDidMount=="function"&&(P.flags|=4194308),P.memoizedProps=ht,P.memoizedState=rn),Nt.props=ht,Nt.state=rn,Nt.context=rr,ht=Or):(typeof Nt.componentDidMount=="function"&&(P.flags|=4194308),ht=!1)}else{Nt=P.stateNode,dc(o,P),rr=P.memoizedProps,dn=Wo(ot,rr),Nt.props=dn,yn=P.pendingProps,nn=Nt.context,rn=ot.contextType,Or=cs,typeof rn=="object"&&rn!==null&&(Or=Ki(rn)),pr=ot.getDerivedStateFromProps,(rn=typeof pr=="function"||typeof Nt.getSnapshotBeforeUpdate=="function")||typeof Nt.UNSAFE_componentWillReceiveProps!="function"&&typeof Nt.componentWillReceiveProps!="function"||(rr!==yn||nn!==Or)&&Jh(P,Nt,ht,Or),ho=!1,nn=P.memoizedState,Nt.state=nn,Zs(P,ht,Nt,kt),Ks();var sn=P.memoizedState;rr!==yn||nn!==sn||ho||o!==null&&o.dependencies!==null&&Xl(o.dependencies)?(typeof pr=="function"&&(Lc(P,ot,pr,ht),sn=P.memoizedState),(dn=ho||Qh(P,ot,dn,ht,nn,sn,Or)||o!==null&&o.dependencies!==null&&Xl(o.dependencies))?(rn||typeof Nt.UNSAFE_componentWillUpdate!="function"&&typeof Nt.componentWillUpdate!="function"||(typeof Nt.componentWillUpdate=="function"&&Nt.componentWillUpdate(ht,sn,Or),typeof Nt.UNSAFE_componentWillUpdate=="function"&&Nt.UNSAFE_componentWillUpdate(ht,sn,Or)),typeof Nt.componentDidUpdate=="function"&&(P.flags|=4),typeof Nt.getSnapshotBeforeUpdate=="function"&&(P.flags|=1024)):(typeof Nt.componentDidUpdate!="function"||rr===o.memoizedProps&&nn===o.memoizedState||(P.flags|=4),typeof Nt.getSnapshotBeforeUpdate!="function"||rr===o.memoizedProps&&nn===o.memoizedState||(P.flags|=1024),P.memoizedProps=ht,P.memoizedState=sn),Nt.props=ht,Nt.state=sn,Nt.context=Or,ht=dn):(typeof Nt.componentDidUpdate!="function"||rr===o.memoizedProps&&nn===o.memoizedState||(P.flags|=4),typeof Nt.getSnapshotBeforeUpdate!="function"||rr===o.memoizedProps&&nn===o.memoizedState||(P.flags|=1024),ht=!1)}return Nt=ht,hu(o,P),ht=(P.flags&128)!==0,Nt||ht?(Nt=P.stateNode,ot=ht&&typeof ot.getDerivedStateFromError!="function"?null:Nt.render(),P.flags|=1,o!==null&&ht?(P.child=xs(P,o.child,null,kt),P.child=xs(P,null,ot,kt)):Xi(o,P,ot,kt),P.memoizedState=Nt.state,o=P.child):o=Za(o,P,kt),o}function pd(o,P,ot,ht){return Gs(),P.flags|=256,Xi(o,P,ot,ht),P.child}var Bc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fc(o){return{baseLanes:o,cachePool:th()}}function Uc(o,P,ot){return o=o!==null?o.childLanes&~ot:0,P&&(o|=wa),o}function md(o,P,ot){var ht=P.pendingProps,kt=!1,Nt=(P.flags&128)!==0,rr;if((rr=Nt)||(rr=o!==null&&o.memoizedState===null?!1:(zi.current&2)!==0),rr&&(kt=!0,P.flags&=-129),rr=(P.flags&32)!==0,P.flags&=-33,o===null){if(ii){if(kt?yo(P):vo(),ii){var pr=Ci,Or;if(Or=pr){e:{for(Or=pr,pr=Ia;Or.nodeType!==8;){if(!pr){pr=null;break e}if(Or=Aa(Or.nextSibling),Or===null){pr=null;break e}}pr=Or}pr!==null?(P.memoizedState={dehydrated:pr,treeContext:zo!==null?{id:qa,overflow:Ya}:null,retryLane:536870912,hydrationErrors:null},Or=ca(18,null,null,0),Or.stateNode=pr,Or.return=P,P.child=Or,Zi=P,Ci=null,Or=!0):Or=!1}Or||Vo(P)}if(pr=P.memoizedState,pr!==null&&(pr=pr.dehydrated,pr!==null))return jf(pr)?P.lanes=32:P.lanes=536870912,null;Ka(P)}return pr=ht.children,ht=ht.fallback,kt?(vo(),kt=P.mode,pr=du({mode:"hidden",children:pr},kt),ht=Uo(ht,kt,ot,null),pr.return=P,ht.return=P,pr.sibling=ht,P.child=pr,kt=P.child,kt.memoizedState=Fc(ot),kt.childLanes=Uc(o,rr,ot),P.memoizedState=Bc,ht):(yo(P),zc(P,pr))}if(Or=o.memoizedState,Or!==null&&(pr=Or.dehydrated,pr!==null)){if(Nt)P.flags&256?(yo(P),P.flags&=-257,P=Gc(o,P,ot)):P.memoizedState!==null?(vo(),P.child=o.child,P.flags|=128,P=null):(vo(),kt=ht.fallback,pr=P.mode,ht=du({mode:"visible",children:ht.children},pr),kt=Uo(kt,pr,ot,null),kt.flags|=2,ht.return=P,kt.return=P,ht.sibling=kt,P.child=ht,xs(P,o.child,null,ot),ht=P.child,ht.memoizedState=Fc(ot),ht.childLanes=Uc(o,rr,ot),P.memoizedState=Bc,P=kt);else if(yo(P),jf(pr)){if(rr=pr.nextSibling&&pr.nextSibling.dataset,rr)var rn=rr.dgst;rr=rn,ht=Error(t(419)),ht.stack="",ht.digest=rr,Hs({value:ht,source:null,stack:null}),P=Gc(o,P,ot)}else if(Vi||Vs(o,P,ot,!1),rr=(ot&o.childLanes)!==0,Vi||rr){if(rr=xi,rr!==null&&(ht=ot&-ot,ht=(ht&42)!==0?1:Mn(ht),ht=(ht&(rr.suspendedLanes|ot))!==0?0:ht,ht!==0&&ht!==Or.retryLane))throw Or.retryLane=ht,us(o,ht),ma(rr,o,ht),od;pr.data==="$?"||sf(),P=Gc(o,P,ot)}else pr.data==="$?"?(P.flags|=192,P.child=o.child,P=null):(o=Or.treeContext,Ci=Aa(pr.nextSibling),Zi=P,ii=!0,Ho=null,Ia=!1,o!==null&&(ba[xa++]=qa,ba[xa++]=Ya,ba[xa++]=zo,qa=o.id,Ya=o.overflow,zo=P),P=zc(P,ht.children),P.flags|=4096);return P}return kt?(vo(),kt=ht.fallback,pr=P.mode,Or=o.child,rn=Or.sibling,ht=Va(Or,{mode:"hidden",children:ht.children}),ht.subtreeFlags=Or.subtreeFlags&65011712,rn!==null?kt=Va(rn,kt):(kt=Uo(kt,pr,ot,null),kt.flags|=2),kt.return=P,ht.return=P,ht.sibling=kt,P.child=ht,ht=kt,kt=P.child,pr=o.child.memoizedState,pr===null?pr=Fc(ot):(Or=pr.cachePool,Or!==null?(rn=Ui._currentValue,Or=Or.parent!==rn?{parent:rn,pool:rn}:Or):Or=th(),pr={baseLanes:pr.baseLanes|ot,cachePool:Or}),kt.memoizedState=pr,kt.childLanes=Uc(o,rr,ot),P.memoizedState=Bc,ht):(yo(P),ot=o.child,o=ot.sibling,ot=Va(ot,{mode:"visible",children:ht.children}),ot.return=P,ot.sibling=null,o!==null&&(rr=P.deletions,rr===null?(P.deletions=[o],P.flags|=16):rr.push(o)),P.child=ot,P.memoizedState=null,ot)}function zc(o,P){return P=du({mode:"visible",children:P},o.mode),P.return=o,o.child=P}function du(o,P){return o=ca(22,o,null,P),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function Gc(o,P,ot){return xs(P,o.child,null,ot),o=zc(P,P.pendingProps.children),o.flags|=2,P.memoizedState=null,o}function gd(o,P,ot){o.lanes|=P;var ht=o.alternate;ht!==null&&(ht.lanes|=P),oc(o.return,P,ot)}function Hc(o,P,ot,ht,kt){var Nt=o.memoizedState;Nt===null?o.memoizedState={isBackwards:P,rendering:null,renderingStartTime:0,last:ht,tail:ot,tailMode:kt}:(Nt.isBackwards=P,Nt.rendering=null,Nt.renderingStartTime=0,Nt.last=ht,Nt.tail=ot,Nt.tailMode=kt)}function yd(o,P,ot){var ht=P.pendingProps,kt=ht.revealOrder,Nt=ht.tail;if(Xi(o,P,ht.children,ot),ht=zi.current,(ht&2)!==0)ht=ht&1|2,P.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=P.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&gd(o,ot,P);else if(o.tag===19)gd(o,ot,P);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===P)break e;for(;o.sibling===null;){if(o.return===null||o.return===P)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}ht&=1}switch(vt(zi,ht),kt){case"forwards":for(ot=P.child,kt=null;ot!==null;)o=ot.alternate,o!==null&&uu(o)===null&&(kt=ot),ot=ot.sibling;ot=kt,ot===null?(kt=P.child,P.child=null):(kt=ot.sibling,ot.sibling=null),Hc(P,!1,kt,ot,Nt);break;case"backwards":for(ot=null,kt=P.child,P.child=null;kt!==null;){if(o=kt.alternate,o!==null&&uu(o)===null){P.child=kt;break}o=kt.sibling,kt.sibling=ot,ot=kt,kt=o}Hc(P,!0,ot,null,Nt);break;case"together":Hc(P,!1,null,null,void 0);break;default:P.memoizedState=null}return P.child}function Za(o,P,ot){if(o!==null&&(P.dependencies=o.dependencies),So|=P.lanes,(ot&P.childLanes)===0)if(o!==null){if(Vs(o,P,ot,!1),(ot&P.childLanes)===0)return null}else return null;if(o!==null&&P.child!==o.child)throw Error(t(153));if(P.child!==null){for(o=P.child,ot=Va(o,o.pendingProps),P.child=ot,ot.return=P;o.sibling!==null;)o=o.sibling,ot=ot.sibling=Va(o,o.pendingProps),ot.return=P;ot.sibling=null}return P.child}function Vc(o,P){return(o.lanes&P)!==0?!0:(o=o.dependencies,!!(o!==null&&Xl(o)))}function am(o,P,ot){switch(P.tag){case 3:er(P,P.stateNode.containerInfo),fo(P,Ui,o.memoizedState.cache),Gs();break;case 27:case 5:yr(P);break;case 4:er(P,P.stateNode.containerInfo);break;case 10:fo(P,P.type,P.memoizedProps.value);break;case 13:var ht=P.memoizedState;if(ht!==null)return ht.dehydrated!==null?(yo(P),P.flags|=128,null):(ot&P.child.childLanes)!==0?md(o,P,ot):(yo(P),o=Za(o,P,ot),o!==null?o.sibling:null);yo(P);break;case 19:var kt=(o.flags&128)!==0;if(ht=(ot&P.childLanes)!==0,ht||(Vs(o,P,ot,!1),ht=(ot&P.childLanes)!==0),kt){if(ht)return yd(o,P,ot);P.flags|=128}if(kt=P.memoizedState,kt!==null&&(kt.rendering=null,kt.tail=null,kt.lastEffect=null),vt(zi,zi.current),ht)break;return null;case 22:case 23:return P.lanes=0,cd(o,P,ot);case 24:fo(P,Ui,o.memoizedState.cache)}return Za(o,P,ot)}function vd(o,P,ot){if(o!==null)if(o.memoizedProps!==P.pendingProps)Vi=!0;else{if(!Vc(o,ot)&&(P.flags&128)===0)return Vi=!1,am(o,P,ot);Vi=(o.flags&131072)!==0}else Vi=!1,ii&&(P.flags&1048576)!==0&&$f(P,Yl,P.index);switch(P.lanes=0,P.tag){case 16:e:{o=P.pendingProps;var ht=P.elementType,kt=ht._init;if(ht=kt(ht._payload),P.type=ht,typeof ht=="function")Ju(ht)?(o=Wo(ht,o),P.tag=1,P=dd(null,P,ht,o,ot)):(P.tag=0,P=Nc(null,P,ht,o,ot));else{if(ht!=null){if(kt=ht.$$typeof,kt===tt){P.tag=11,P=sd(null,P,ht,o,ot);break e}else if(kt===gt){P.tag=14,P=ld(null,P,ht,o,ot);break e}}throw P=It(ht)||ht,Error(t(306,P,""))}}return P;case 0:return Nc(o,P,P.type,P.pendingProps,ot);case 1:return ht=P.type,kt=Wo(ht,P.pendingProps),dd(o,P,ht,kt,ot);case 3:e:{if(er(P,P.stateNode.containerInfo),o===null)throw Error(t(387));ht=P.pendingProps;var Nt=P.memoizedState;kt=Nt.element,dc(o,P),Zs(P,ht,null,ot);var rr=P.memoizedState;if(ht=rr.cache,fo(P,Ui,ht),ht!==Nt.cache&&sc(P,[Ui],ot,!0),Ks(),ht=rr.element,Nt.isDehydrated)if(Nt={element:ht,isDehydrated:!1,cache:rr.cache},P.updateQueue.baseState=Nt,P.memoizedState=Nt,P.flags&256){P=pd(o,P,ht,ot);break e}else if(ht!==kt){kt=ya(Error(t(424)),P),Hs(kt),P=pd(o,P,ht,ot);break e}else{switch(o=P.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Ci=Aa(o.firstChild),Zi=P,ii=!0,Ho=null,Ia=!0,ot=Kh(P,null,ht,ot),P.child=ot;ot;)ot.flags=ot.flags&-3|4096,ot=ot.sibling}else{if(Gs(),ht===kt){P=Za(o,P,ot);break e}Xi(o,P,ht,ot)}P=P.child}return P;case 26:return hu(o,P),o===null?(ot=wp(P.type,null,P.pendingProps,null))?P.memoizedState=ot:ii||(ot=P.type,o=P.pendingProps,ht=Mu(Vt.current).createElement(ot),ht[At]=P,ht[Bt]=o,Wi(ht,ot,o),gr(ht),P.stateNode=ht):P.memoizedState=wp(P.type,o.memoizedProps,P.pendingProps,o.memoizedState),null;case 27:return yr(P),o===null&&ii&&(ht=P.stateNode=bp(P.type,P.pendingProps,Vt.current),Zi=P,Ia=!0,kt=Ci,Mo(P.type)?(Ef=kt,Ci=Aa(ht.firstChild)):Ci=kt),Xi(o,P,P.pendingProps.children,ot),hu(o,P),o===null&&(P.flags|=4194304),P.child;case 5:return o===null&&ii&&((kt=ht=Ci)&&(ht=Dm(ht,P.type,P.pendingProps,Ia),ht!==null?(P.stateNode=ht,Zi=P,Ci=Aa(ht.firstChild),Ia=!1,kt=!0):kt=!1),kt||Vo(P)),yr(P),kt=P.type,Nt=P.pendingProps,rr=o!==null?o.memoizedProps:null,ht=Nt.children,_f(kt,Nt)?ht=null:rr!==null&&_f(kt,rr)&&(P.flags|=32),P.memoizedState!==null&&(kt=bc(o,P,Zp,null,null,ot),bl._currentValue=kt),hu(o,P),Xi(o,P,ht,ot),P.child;case 6:return o===null&&ii&&((o=ot=Ci)&&(ot=Lm(ot,P.pendingProps,Ia),ot!==null?(P.stateNode=ot,Zi=P,Ci=null,o=!0):o=!1),o||Vo(P)),null;case 13:return md(o,P,ot);case 4:return er(P,P.stateNode.containerInfo),ht=P.pendingProps,o===null?P.child=xs(P,null,ht,ot):Xi(o,P,ht,ot),P.child;case 11:return sd(o,P,P.type,P.pendingProps,ot);case 7:return Xi(o,P,P.pendingProps,ot),P.child;case 8:return Xi(o,P,P.pendingProps.children,ot),P.child;case 12:return Xi(o,P,P.pendingProps.children,ot),P.child;case 10:return ht=P.pendingProps,fo(P,P.type,ht.value),Xi(o,P,ht.children,ot),P.child;case 9:return kt=P.type._context,ht=P.pendingProps.children,Yo(P),kt=Ki(kt),ht=ht(kt),P.flags|=1,Xi(o,P,ht,ot),P.child;case 14:return ld(o,P,P.type,P.pendingProps,ot);case 15:return ud(o,P,P.type,P.pendingProps,ot);case 19:return yd(o,P,ot);case 31:return ht=P.pendingProps,ot=P.mode,ht={mode:ht.mode,children:ht.children},o===null?(ot=du(ht,ot),ot.ref=P.ref,P.child=ot,ot.return=P,P=ot):(ot=Va(o.child,ht),ot.ref=P.ref,P.child=ot,ot.return=P,P=ot),P;case 22:return cd(o,P,ot);case 24:return Yo(P),ht=Ki(Ui),o===null?(kt=cc(),kt===null&&(kt=xi,Nt=lc(),kt.pooledCache=Nt,Nt.refCount++,Nt!==null&&(kt.pooledCacheLanes|=ot),kt=Nt),P.memoizedState={parent:ht,cache:kt},hc(P),fo(P,Ui,kt)):((o.lanes&ot)!==0&&(dc(o,P),Zs(P,null,null,ot),Ks()),kt=o.memoizedState,Nt=P.memoizedState,kt.parent!==ht?(kt={parent:ht,cache:ht},P.memoizedState=kt,P.lanes===0&&(P.memoizedState=P.updateQueue.baseState=kt),fo(P,Ui,ht)):(ht=Nt.cache,fo(P,Ui,ht),ht!==kt.cache&&sc(P,[Ui],ot,!0))),Xi(o,P,P.pendingProps.children,ot),P.child;case 29:throw P.pendingProps}throw Error(t(156,P.tag))}function Qa(o){o.flags|=4}function bd(o,P){if(P.type!=="stylesheet"||(P.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!Mp(P)){if(P=_a.current,P!==null&&((ei&4194048)===ei?Pa!==null:(ei&62914560)!==ei&&(ei&536870912)===0||P!==Pa))throw $s=fc,rh;o.flags|=8192}}function pu(o,P){P!==null&&(o.flags|=4),o.flags&16384&&(P=o.tag!==22?_n():536870912,o.lanes|=P,js|=P)}function il(o,P){if(!ii)switch(o.tailMode){case"hidden":P=o.tail;for(var ot=null;P!==null;)P.alternate!==null&&(ot=P),P=P.sibling;ot===null?o.tail=null:ot.sibling=null;break;case"collapsed":ot=o.tail;for(var ht=null;ot!==null;)ot.alternate!==null&&(ht=ot),ot=ot.sibling;ht===null?P||o.tail===null?o.tail=null:o.tail.sibling=null:ht.sibling=null}}function Mi(o){var P=o.alternate!==null&&o.alternate.child===o.child,ot=0,ht=0;if(P)for(var kt=o.child;kt!==null;)ot|=kt.lanes|kt.childLanes,ht|=kt.subtreeFlags&65011712,ht|=kt.flags&65011712,kt.return=o,kt=kt.sibling;else for(kt=o.child;kt!==null;)ot|=kt.lanes|kt.childLanes,ht|=kt.subtreeFlags,ht|=kt.flags,kt.return=o,kt=kt.sibling;return o.subtreeFlags|=ht,o.childLanes=ot,P}function om(o,P,ot){var ht=P.pendingProps;switch(nc(P),P.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mi(P),null;case 1:return Mi(P),null;case 3:return ot=P.stateNode,ht=null,o!==null&&(ht=o.memoizedState.cache),P.memoizedState.cache!==ht&&(P.flags|=2048),$a(Ui),ur(),ot.pendingContext&&(ot.context=ot.pendingContext,ot.pendingContext=null),(o===null||o.child===null)&&(zs(P)?Qa(P):o===null||o.memoizedState.isDehydrated&&(P.flags&256)===0||(P.flags|=1024,Zf())),Mi(P),null;case 26:return ot=P.memoizedState,o===null?(Qa(P),ot!==null?(Mi(P),bd(P,ot)):(Mi(P),P.flags&=-16777217)):ot?ot!==o.memoizedState?(Qa(P),Mi(P),bd(P,ot)):(Mi(P),P.flags&=-16777217):(o.memoizedProps!==ht&&Qa(P),Mi(P),P.flags&=-16777217),null;case 27:Qt(P),ot=Vt.current;var kt=P.type;if(o!==null&&P.stateNode!=null)o.memoizedProps!==ht&&Qa(P);else{if(!ht){if(P.stateNode===null)throw Error(t(166));return Mi(P),null}o=Rt.current,zs(P)?Wf(P):(o=bp(kt,ht,ot),P.stateNode=o,Qa(P))}return Mi(P),null;case 5:if(Qt(P),ot=P.type,o!==null&&P.stateNode!=null)o.memoizedProps!==ht&&Qa(P);else{if(!ht){if(P.stateNode===null)throw Error(t(166));return Mi(P),null}if(o=Rt.current,zs(P))Wf(P);else{switch(kt=Mu(Vt.current),o){case 1:o=kt.createElementNS("http://www.w3.org/2000/svg",ot);break;case 2:o=kt.createElementNS("http://www.w3.org/1998/Math/MathML",ot);break;default:switch(ot){case"svg":o=kt.createElementNS("http://www.w3.org/2000/svg",ot);break;case"math":o=kt.createElementNS("http://www.w3.org/1998/Math/MathML",ot);break;case"script":o=kt.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof ht.is=="string"?kt.createElement("select",{is:ht.is}):kt.createElement("select"),ht.multiple?o.multiple=!0:ht.size&&(o.size=ht.size);break;default:o=typeof ht.is=="string"?kt.createElement(ot,{is:ht.is}):kt.createElement(ot)}}o[At]=P,o[Bt]=ht;e:for(kt=P.child;kt!==null;){if(kt.tag===5||kt.tag===6)o.appendChild(kt.stateNode);else if(kt.tag!==4&&kt.tag!==27&&kt.child!==null){kt.child.return=kt,kt=kt.child;continue}if(kt===P)break e;for(;kt.sibling===null;){if(kt.return===null||kt.return===P)break e;kt=kt.return}kt.sibling.return=kt.return,kt=kt.sibling}P.stateNode=o;e:switch(Wi(o,ot,ht),ot){case"button":case"input":case"select":case"textarea":o=!!ht.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Qa(P)}}return Mi(P),P.flags&=-16777217,null;case 6:if(o&&P.stateNode!=null)o.memoizedProps!==ht&&Qa(P);else{if(typeof ht!="string"&&P.stateNode===null)throw Error(t(166));if(o=Vt.current,zs(P)){if(o=P.stateNode,ot=P.memoizedProps,ht=null,kt=Zi,kt!==null)switch(kt.tag){case 27:case 5:ht=kt.memoizedProps}o[At]=P,o=!!(o.nodeValue===ot||ht!==null&&ht.suppressHydrationWarning===!0||hp(o.nodeValue,ot)),o||Vo(P)}else o=Mu(o).createTextNode(ht),o[At]=P,P.stateNode=o}return Mi(P),null;case 13:if(ht=P.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(kt=zs(P),ht!==null&&ht.dehydrated!==null){if(o===null){if(!kt)throw Error(t(318));if(kt=P.memoizedState,kt=kt!==null?kt.dehydrated:null,!kt)throw Error(t(317));kt[At]=P}else Gs(),(P.flags&128)===0&&(P.memoizedState=null),P.flags|=4;Mi(P),kt=!1}else kt=Zf(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=kt),kt=!0;if(!kt)return P.flags&256?(Ka(P),P):(Ka(P),null)}if(Ka(P),(P.flags&128)!==0)return P.lanes=ot,P;if(ot=ht!==null,o=o!==null&&o.memoizedState!==null,ot){ht=P.child,kt=null,ht.alternate!==null&&ht.alternate.memoizedState!==null&&ht.alternate.memoizedState.cachePool!==null&&(kt=ht.alternate.memoizedState.cachePool.pool);var Nt=null;ht.memoizedState!==null&&ht.memoizedState.cachePool!==null&&(Nt=ht.memoizedState.cachePool.pool),Nt!==kt&&(ht.flags|=2048)}return ot!==o&&ot&&(P.child.flags|=8192),pu(P,P.updateQueue),Mi(P),null;case 4:return ur(),o===null&&gf(P.stateNode.containerInfo),Mi(P),null;case 10:return $a(P.type),Mi(P),null;case 19:if(Zt(zi),kt=P.memoizedState,kt===null)return Mi(P),null;if(ht=(P.flags&128)!==0,Nt=kt.rendering,Nt===null)if(ht)il(kt,!1);else{if(Oi!==0||o!==null&&(o.flags&128)!==0)for(o=P.child;o!==null;){if(Nt=uu(o),Nt!==null){for(P.flags|=128,il(kt,!1),o=Nt.updateQueue,P.updateQueue=o,pu(P,o),P.subtreeFlags=0,o=ot,ot=P.child;ot!==null;)Xf(ot,o),ot=ot.sibling;return vt(zi,zi.current&1|2),P.child}o=o.sibling}kt.tail!==null&&Sr()>yu&&(P.flags|=128,ht=!0,il(kt,!1),P.lanes=4194304)}else{if(!ht)if(o=uu(Nt),o!==null){if(P.flags|=128,ht=!0,o=o.updateQueue,P.updateQueue=o,pu(P,o),il(kt,!0),kt.tail===null&&kt.tailMode==="hidden"&&!Nt.alternate&&!ii)return Mi(P),null}else 2*Sr()-kt.renderingStartTime>yu&&ot!==536870912&&(P.flags|=128,ht=!0,il(kt,!1),P.lanes=4194304);kt.isBackwards?(Nt.sibling=P.child,P.child=Nt):(o=kt.last,o!==null?o.sibling=Nt:P.child=Nt,kt.last=Nt)}return kt.tail!==null?(P=kt.tail,kt.rendering=P,kt.tail=P.sibling,kt.renderingStartTime=Sr(),P.sibling=null,o=zi.current,vt(zi,ht?o&1|2:o&1),P):(Mi(P),null);case 22:case 23:return Ka(P),yc(),ht=P.memoizedState!==null,o!==null?o.memoizedState!==null!==ht&&(P.flags|=8192):ht&&(P.flags|=8192),ht?(ot&536870912)!==0&&(P.flags&128)===0&&(Mi(P),P.subtreeFlags&6&&(P.flags|=8192)):Mi(P),ot=P.updateQueue,ot!==null&&pu(P,ot.retryQueue),ot=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(ot=o.memoizedState.cachePool.pool),ht=null,P.memoizedState!==null&&P.memoizedState.cachePool!==null&&(ht=P.memoizedState.cachePool.pool),ht!==ot&&(P.flags|=2048),o!==null&&Zt(Xo),null;case 24:return ot=null,o!==null&&(ot=o.memoizedState.cache),P.memoizedState.cache!==ot&&(P.flags|=2048),$a(Ui),Mi(P),null;case 25:return null;case 30:return null}throw Error(t(156,P.tag))}function sm(o,P){switch(nc(P),P.tag){case 1:return o=P.flags,o&65536?(P.flags=o&-65537|128,P):null;case 3:return $a(Ui),ur(),o=P.flags,(o&65536)!==0&&(o&128)===0?(P.flags=o&-65537|128,P):null;case 26:case 27:case 5:return Qt(P),null;case 13:if(Ka(P),o=P.memoizedState,o!==null&&o.dehydrated!==null){if(P.alternate===null)throw Error(t(340));Gs()}return o=P.flags,o&65536?(P.flags=o&-65537|128,P):null;case 19:return Zt(zi),null;case 4:return ur(),null;case 10:return $a(P.type),null;case 22:case 23:return Ka(P),yc(),o!==null&&Zt(Xo),o=P.flags,o&65536?(P.flags=o&-65537|128,P):null;case 24:return $a(Ui),null;case 25:return null;default:return null}}function xd(o,P){switch(nc(P),P.tag){case 3:$a(Ui),ur();break;case 26:case 27:case 5:Qt(P);break;case 4:ur();break;case 13:Ka(P);break;case 19:Zt(zi);break;case 10:$a(P.type);break;case 22:case 23:Ka(P),yc(),o!==null&&Zt(Xo);break;case 24:$a(Ui)}}function al(o,P){try{var ot=P.updateQueue,ht=ot!==null?ot.lastEffect:null;if(ht!==null){var kt=ht.next;ot=kt;do{if((ot.tag&o)===o){ht=void 0;var Nt=ot.create,rr=ot.inst;ht=Nt(),rr.destroy=ht}ot=ot.next}while(ot!==kt)}}catch(pr){yi(P,P.return,pr)}}function bo(o,P,ot){try{var ht=P.updateQueue,kt=ht!==null?ht.lastEffect:null;if(kt!==null){var Nt=kt.next;ht=Nt;do{if((ht.tag&o)===o){var rr=ht.inst,pr=rr.destroy;if(pr!==void 0){rr.destroy=void 0,kt=P;var Or=ot,rn=pr;try{rn()}catch(dn){yi(kt,Or,dn)}}}ht=ht.next}while(ht!==Nt)}}catch(dn){yi(P,P.return,dn)}}function _d(o){var P=o.updateQueue;if(P!==null){var ot=o.stateNode;try{lh(P,ot)}catch(ht){yi(o,o.return,ht)}}}function wd(o,P,ot){ot.props=Wo(o.type,o.memoizedProps),ot.state=o.memoizedState;try{ot.componentWillUnmount()}catch(ht){yi(o,P,ht)}}function ol(o,P){try{var ot=o.ref;if(ot!==null){switch(o.tag){case 26:case 27:case 5:var ht=o.stateNode;break;case 30:ht=o.stateNode;break;default:ht=o.stateNode}typeof ot=="function"?o.refCleanup=ot(ht):ot.current=ht}}catch(kt){yi(o,P,kt)}}function Na(o,P){var ot=o.ref,ht=o.refCleanup;if(ot!==null)if(typeof ht=="function")try{ht()}catch(kt){yi(o,P,kt)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof ot=="function")try{ot(null)}catch(kt){yi(o,P,kt)}else ot.current=null}function Sd(o){var P=o.type,ot=o.memoizedProps,ht=o.stateNode;try{e:switch(P){case"button":case"input":case"select":case"textarea":ot.autoFocus&&ht.focus();break e;case"img":ot.src?ht.src=ot.src:ot.srcSet&&(ht.srcset=ot.srcSet)}}catch(kt){yi(o,o.return,kt)}}function qc(o,P,ot){try{var ht=o.stateNode;Am(ht,o.type,ot,P),ht[Bt]=P}catch(kt){yi(o,o.return,kt)}}function jd(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Mo(o.type)||o.tag===4}function Yc(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||jd(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Mo(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Xc(o,P,ot){var ht=o.tag;if(ht===5||ht===6)o=o.stateNode,P?(ot.nodeType===9?ot.body:ot.nodeName==="HTML"?ot.ownerDocument.body:ot).insertBefore(o,P):(P=ot.nodeType===9?ot.body:ot.nodeName==="HTML"?ot.ownerDocument.body:ot,P.appendChild(o),ot=ot._reactRootContainer,ot!=null||P.onclick!==null||(P.onclick=Tu));else if(ht!==4&&(ht===27&&Mo(o.type)&&(ot=o.stateNode,P=null),o=o.child,o!==null))for(Xc(o,P,ot),o=o.sibling;o!==null;)Xc(o,P,ot),o=o.sibling}function mu(o,P,ot){var ht=o.tag;if(ht===5||ht===6)o=o.stateNode,P?ot.insertBefore(o,P):ot.appendChild(o);else if(ht!==4&&(ht===27&&Mo(o.type)&&(ot=o.stateNode),o=o.child,o!==null))for(mu(o,P,ot),o=o.sibling;o!==null;)mu(o,P,ot),o=o.sibling}function Ed(o){var P=o.stateNode,ot=o.memoizedProps;try{for(var ht=o.type,kt=P.attributes;kt.length;)P.removeAttributeNode(kt[0]);Wi(P,ht,ot),P[At]=o,P[Bt]=ot}catch(Nt){yi(o,o.return,Nt)}}var Ja=!1,Li=!1,$c=!1,Td=typeof WeakSet=="function"?WeakSet:Set,qi=null;function lm(o,P){if(o=o.containerInfo,bf=Du,o=ai(o),si(o)){if("selectionStart"in o)var ot={start:o.selectionStart,end:o.selectionEnd};else e:{ot=(ot=o.ownerDocument)&&ot.defaultView||window;var ht=ot.getSelection&&ot.getSelection();if(ht&&ht.rangeCount!==0){ot=ht.anchorNode;var kt=ht.anchorOffset,Nt=ht.focusNode;ht=ht.focusOffset;try{ot.nodeType,Nt.nodeType}catch{ot=null;break e}var rr=0,pr=-1,Or=-1,rn=0,dn=0,yn=o,nn=null;t:for(;;){for(var sn;yn!==ot||kt!==0&&yn.nodeType!==3||(pr=rr+kt),yn!==Nt||ht!==0&&yn.nodeType!==3||(Or=rr+ht),yn.nodeType===3&&(rr+=yn.nodeValue.length),(sn=yn.firstChild)!==null;)nn=yn,yn=sn;for(;;){if(yn===o)break t;if(nn===ot&&++rn===kt&&(pr=rr),nn===Nt&&++dn===ht&&(Or=rr),(sn=yn.nextSibling)!==null)break;yn=nn,nn=yn.parentNode}yn=sn}ot=pr===-1||Or===-1?null:{start:pr,end:Or}}else ot=null}ot=ot||{start:0,end:0}}else ot=null;for(xf={focusedElem:o,selectionRange:ot},Du=!1,qi=P;qi!==null;)if(P=qi,o=P.child,(P.subtreeFlags&1024)!==0&&o!==null)o.return=P,qi=o;else for(;qi!==null;){switch(P=qi,Nt=P.alternate,o=P.flags,P.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&Nt!==null){o=void 0,ot=P,kt=Nt.memoizedProps,Nt=Nt.memoizedState,ht=ot.stateNode;try{var zn=Wo(ot.type,kt,ot.elementType===ot.type);o=ht.getSnapshotBeforeUpdate(zn,Nt),ht.__reactInternalSnapshotBeforeUpdate=o}catch(Nn){yi(ot,ot.return,Nn)}}break;case 3:if((o&1024)!==0){if(o=P.stateNode.containerInfo,ot=o.nodeType,ot===9)Sf(o);else if(ot===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Sf(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(t(163))}if(o=P.sibling,o!==null){o.return=P.return,qi=o;break}qi=P.return}}function Md(o,P,ot){var ht=ot.flags;switch(ot.tag){case 0:case 11:case 15:xo(o,ot),ht&4&&al(5,ot);break;case 1:if(xo(o,ot),ht&4)if(o=ot.stateNode,P===null)try{o.componentDidMount()}catch(rr){yi(ot,ot.return,rr)}else{var kt=Wo(ot.type,P.memoizedProps);P=P.memoizedState;try{o.componentDidUpdate(kt,P,o.__reactInternalSnapshotBeforeUpdate)}catch(rr){yi(ot,ot.return,rr)}}ht&64&&_d(ot),ht&512&&ol(ot,ot.return);break;case 3:if(xo(o,ot),ht&64&&(o=ot.updateQueue,o!==null)){if(P=null,ot.child!==null)switch(ot.child.tag){case 27:case 5:P=ot.child.stateNode;break;case 1:P=ot.child.stateNode}try{lh(o,P)}catch(rr){yi(ot,ot.return,rr)}}break;case 27:P===null&&ht&4&&Ed(ot);case 26:case 5:xo(o,ot),P===null&&ht&4&&Sd(ot),ht&512&&ol(ot,ot.return);break;case 12:xo(o,ot);break;case 13:xo(o,ot),ht&4&&Cd(o,ot),ht&64&&(o=ot.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(ot=ym.bind(null,ot),Im(o,ot))));break;case 22:if(ht=ot.memoizedState!==null||Ja,!ht){P=P!==null&&P.memoizedState!==null||Li,kt=Ja;var Nt=Li;Ja=ht,(Li=P)&&!Nt?_o(o,ot,(ot.subtreeFlags&8772)!==0):xo(o,ot),Ja=kt,Li=Nt}break;case 30:break;default:xo(o,ot)}}function Ad(o){var P=o.alternate;P!==null&&(o.alternate=null,Ad(P)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(P=o.stateNode,P!==null&&an(P)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var _i=null,na=!1;function eo(o,P,ot){for(ot=ot.child;ot!==null;)kd(o,P,ot),ot=ot.sibling}function kd(o,P,ot){if(Gr&&typeof Gr.onCommitFiberUnmount=="function")try{Gr.onCommitFiberUnmount(Xr,ot)}catch{}switch(ot.tag){case 26:Li||Na(ot,P),eo(o,P,ot),ot.memoizedState?ot.memoizedState.count--:ot.stateNode&&(ot=ot.stateNode,ot.parentNode.removeChild(ot));break;case 27:Li||Na(ot,P);var ht=_i,kt=na;Mo(ot.type)&&(_i=ot.stateNode,na=!1),eo(o,P,ot),ml(ot.stateNode),_i=ht,na=kt;break;case 5:Li||Na(ot,P);case 6:if(ht=_i,kt=na,_i=null,eo(o,P,ot),_i=ht,na=kt,_i!==null)if(na)try{(_i.nodeType===9?_i.body:_i.nodeName==="HTML"?_i.ownerDocument.body:_i).removeChild(ot.stateNode)}catch(Nt){yi(ot,P,Nt)}else try{_i.removeChild(ot.stateNode)}catch(Nt){yi(ot,P,Nt)}break;case 18:_i!==null&&(na?(o=_i,yp(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,ot.stateNode),Sl(o)):yp(_i,ot.stateNode));break;case 4:ht=_i,kt=na,_i=ot.stateNode.containerInfo,na=!0,eo(o,P,ot),_i=ht,na=kt;break;case 0:case 11:case 14:case 15:Li||bo(2,ot,P),Li||bo(4,ot,P),eo(o,P,ot);break;case 1:Li||(Na(ot,P),ht=ot.stateNode,typeof ht.componentWillUnmount=="function"&&wd(ot,P,ht)),eo(o,P,ot);break;case 21:eo(o,P,ot);break;case 22:Li=(ht=Li)||ot.memoizedState!==null,eo(o,P,ot),Li=ht;break;default:eo(o,P,ot)}}function Cd(o,P){if(P.memoizedState===null&&(o=P.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Sl(o)}catch(ot){yi(P,P.return,ot)}}function um(o){switch(o.tag){case 13:case 19:var P=o.stateNode;return P===null&&(P=o.stateNode=new Td),P;case 22:return o=o.stateNode,P=o._retryCache,P===null&&(P=o._retryCache=new Td),P;default:throw Error(t(435,o.tag))}}function Wc(o,P){var ot=um(o);P.forEach(function(ht){var kt=vm.bind(null,o,ht);ot.has(ht)||(ot.add(ht),ht.then(kt,kt))})}function fa(o,P){var ot=P.deletions;if(ot!==null)for(var ht=0;ht<ot.length;ht++){var kt=ot[ht],Nt=o,rr=P,pr=rr;e:for(;pr!==null;){switch(pr.tag){case 27:if(Mo(pr.type)){_i=pr.stateNode,na=!1;break e}break;case 5:_i=pr.stateNode,na=!1;break e;case 3:case 4:_i=pr.stateNode.containerInfo,na=!0;break e}pr=pr.return}if(_i===null)throw Error(t(160));kd(Nt,rr,kt),_i=null,na=!1,Nt=kt.alternate,Nt!==null&&(Nt.return=null),kt.return=null}if(P.subtreeFlags&13878)for(P=P.child;P!==null;)Od(P,o),P=P.sibling}var Ma=null;function Od(o,P){var ot=o.alternate,ht=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:fa(P,o),ha(o),ht&4&&(bo(3,o,o.return),al(3,o),bo(5,o,o.return));break;case 1:fa(P,o),ha(o),ht&512&&(Li||ot===null||Na(ot,ot.return)),ht&64&&Ja&&(o=o.updateQueue,o!==null&&(ht=o.callbacks,ht!==null&&(ot=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=ot===null?ht:ot.concat(ht))));break;case 26:var kt=Ma;if(fa(P,o),ha(o),ht&512&&(Li||ot===null||Na(ot,ot.return)),ht&4){var Nt=ot!==null?ot.memoizedState:null;if(ht=o.memoizedState,ot===null)if(ht===null)if(o.stateNode===null){e:{ht=o.type,ot=o.memoizedProps,kt=kt.ownerDocument||kt;t:switch(ht){case"title":Nt=kt.getElementsByTagName("title")[0],(!Nt||Nt[Ar]||Nt[At]||Nt.namespaceURI==="http://www.w3.org/2000/svg"||Nt.hasAttribute("itemprop"))&&(Nt=kt.createElement(ht),kt.head.insertBefore(Nt,kt.querySelector("head > title"))),Wi(Nt,ht,ot),Nt[At]=o,gr(Nt),ht=Nt;break e;case"link":var rr=Ep("link","href",kt).get(ht+(ot.href||""));if(rr){for(var pr=0;pr<rr.length;pr++)if(Nt=rr[pr],Nt.getAttribute("href")===(ot.href==null||ot.href===""?null:ot.href)&&Nt.getAttribute("rel")===(ot.rel==null?null:ot.rel)&&Nt.getAttribute("title")===(ot.title==null?null:ot.title)&&Nt.getAttribute("crossorigin")===(ot.crossOrigin==null?null:ot.crossOrigin)){rr.splice(pr,1);break t}}Nt=kt.createElement(ht),Wi(Nt,ht,ot),kt.head.appendChild(Nt);break;case"meta":if(rr=Ep("meta","content",kt).get(ht+(ot.content||""))){for(pr=0;pr<rr.length;pr++)if(Nt=rr[pr],Nt.getAttribute("content")===(ot.content==null?null:""+ot.content)&&Nt.getAttribute("name")===(ot.name==null?null:ot.name)&&Nt.getAttribute("property")===(ot.property==null?null:ot.property)&&Nt.getAttribute("http-equiv")===(ot.httpEquiv==null?null:ot.httpEquiv)&&Nt.getAttribute("charset")===(ot.charSet==null?null:ot.charSet)){rr.splice(pr,1);break t}}Nt=kt.createElement(ht),Wi(Nt,ht,ot),kt.head.appendChild(Nt);break;default:throw Error(t(468,ht))}Nt[At]=o,gr(Nt),ht=Nt}o.stateNode=ht}else Tp(kt,o.type,o.stateNode);else o.stateNode=jp(kt,ht,o.memoizedProps);else Nt!==ht?(Nt===null?ot.stateNode!==null&&(ot=ot.stateNode,ot.parentNode.removeChild(ot)):Nt.count--,ht===null?Tp(kt,o.type,o.stateNode):jp(kt,ht,o.memoizedProps)):ht===null&&o.stateNode!==null&&qc(o,o.memoizedProps,ot.memoizedProps)}break;case 27:fa(P,o),ha(o),ht&512&&(Li||ot===null||Na(ot,ot.return)),ot!==null&&ht&4&&qc(o,o.memoizedProps,ot.memoizedProps);break;case 5:if(fa(P,o),ha(o),ht&512&&(Li||ot===null||Na(ot,ot.return)),o.flags&32){kt=o.stateNode;try{aa(kt,"")}catch(sn){yi(o,o.return,sn)}}ht&4&&o.stateNode!=null&&(kt=o.memoizedProps,qc(o,kt,ot!==null?ot.memoizedProps:kt)),ht&1024&&($c=!0);break;case 6:if(fa(P,o),ha(o),ht&4){if(o.stateNode===null)throw Error(t(162));ht=o.memoizedProps,ot=o.stateNode;try{ot.nodeValue=ht}catch(sn){yi(o,o.return,sn)}}break;case 3:if(Cu=null,kt=Ma,Ma=Au(P.containerInfo),fa(P,o),Ma=kt,ha(o),ht&4&&ot!==null&&ot.memoizedState.isDehydrated)try{Sl(P.containerInfo)}catch(sn){yi(o,o.return,sn)}$c&&($c=!1,Rd(o));break;case 4:ht=Ma,Ma=Au(o.stateNode.containerInfo),fa(P,o),ha(o),Ma=ht;break;case 12:fa(P,o),ha(o);break;case 13:fa(P,o),ha(o),o.child.flags&8192&&o.memoizedState!==null!=(ot!==null&&ot.memoizedState!==null)&&(tf=Sr()),ht&4&&(ht=o.updateQueue,ht!==null&&(o.updateQueue=null,Wc(o,ht)));break;case 22:kt=o.memoizedState!==null;var Or=ot!==null&&ot.memoizedState!==null,rn=Ja,dn=Li;if(Ja=rn||kt,Li=dn||Or,fa(P,o),Li=dn,Ja=rn,ha(o),ht&8192)e:for(P=o.stateNode,P._visibility=kt?P._visibility&-2:P._visibility|1,kt&&(ot===null||Or||Ja||Li||Ko(o)),ot=null,P=o;;){if(P.tag===5||P.tag===26){if(ot===null){Or=ot=P;try{if(Nt=Or.stateNode,kt)rr=Nt.style,typeof rr.setProperty=="function"?rr.setProperty("display","none","important"):rr.display="none";else{pr=Or.stateNode;var yn=Or.memoizedProps.style,nn=yn!=null&&yn.hasOwnProperty("display")?yn.display:null;pr.style.display=nn==null||typeof nn=="boolean"?"":(""+nn).trim()}}catch(sn){yi(Or,Or.return,sn)}}}else if(P.tag===6){if(ot===null){Or=P;try{Or.stateNode.nodeValue=kt?"":Or.memoizedProps}catch(sn){yi(Or,Or.return,sn)}}}else if((P.tag!==22&&P.tag!==23||P.memoizedState===null||P===o)&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===o)break e;for(;P.sibling===null;){if(P.return===null||P.return===o)break e;ot===P&&(ot=null),P=P.return}ot===P&&(ot=null),P.sibling.return=P.return,P=P.sibling}ht&4&&(ht=o.updateQueue,ht!==null&&(ot=ht.retryQueue,ot!==null&&(ht.retryQueue=null,Wc(o,ot))));break;case 19:fa(P,o),ha(o),ht&4&&(ht=o.updateQueue,ht!==null&&(o.updateQueue=null,Wc(o,ht)));break;case 30:break;case 21:break;default:fa(P,o),ha(o)}}function ha(o){var P=o.flags;if(P&2){try{for(var ot,ht=o.return;ht!==null;){if(jd(ht)){ot=ht;break}ht=ht.return}if(ot==null)throw Error(t(160));switch(ot.tag){case 27:var kt=ot.stateNode,Nt=Yc(o);mu(o,Nt,kt);break;case 5:var rr=ot.stateNode;ot.flags&32&&(aa(rr,""),ot.flags&=-33);var pr=Yc(o);mu(o,pr,rr);break;case 3:case 4:var Or=ot.stateNode.containerInfo,rn=Yc(o);Xc(o,rn,Or);break;default:throw Error(t(161))}}catch(dn){yi(o,o.return,dn)}o.flags&=-3}P&4096&&(o.flags&=-4097)}function Rd(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var P=o;Rd(P),P.tag===5&&P.flags&1024&&P.stateNode.reset(),o=o.sibling}}function xo(o,P){if(P.subtreeFlags&8772)for(P=P.child;P!==null;)Md(o,P.alternate,P),P=P.sibling}function Ko(o){for(o=o.child;o!==null;){var P=o;switch(P.tag){case 0:case 11:case 14:case 15:bo(4,P,P.return),Ko(P);break;case 1:Na(P,P.return);var ot=P.stateNode;typeof ot.componentWillUnmount=="function"&&wd(P,P.return,ot),Ko(P);break;case 27:ml(P.stateNode);case 26:case 5:Na(P,P.return),Ko(P);break;case 22:P.memoizedState===null&&Ko(P);break;case 30:Ko(P);break;default:Ko(P)}o=o.sibling}}function _o(o,P,ot){for(ot=ot&&(P.subtreeFlags&8772)!==0,P=P.child;P!==null;){var ht=P.alternate,kt=o,Nt=P,rr=Nt.flags;switch(Nt.tag){case 0:case 11:case 15:_o(kt,Nt,ot),al(4,Nt);break;case 1:if(_o(kt,Nt,ot),ht=Nt,kt=ht.stateNode,typeof kt.componentDidMount=="function")try{kt.componentDidMount()}catch(rn){yi(ht,ht.return,rn)}if(ht=Nt,kt=ht.updateQueue,kt!==null){var pr=ht.stateNode;try{var Or=kt.shared.hiddenCallbacks;if(Or!==null)for(kt.shared.hiddenCallbacks=null,kt=0;kt<Or.length;kt++)sh(Or[kt],pr)}catch(rn){yi(ht,ht.return,rn)}}ot&&rr&64&&_d(Nt),ol(Nt,Nt.return);break;case 27:Ed(Nt);case 26:case 5:_o(kt,Nt,ot),ot&&ht===null&&rr&4&&Sd(Nt),ol(Nt,Nt.return);break;case 12:_o(kt,Nt,ot);break;case 13:_o(kt,Nt,ot),ot&&rr&4&&Cd(kt,Nt);break;case 22:Nt.memoizedState===null&&_o(kt,Nt,ot),ol(Nt,Nt.return);break;case 30:break;default:_o(kt,Nt,ot)}P=P.sibling}}function Kc(o,P){var ot=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(ot=o.memoizedState.cachePool.pool),o=null,P.memoizedState!==null&&P.memoizedState.cachePool!==null&&(o=P.memoizedState.cachePool.pool),o!==ot&&(o!=null&&o.refCount++,ot!=null&&qs(ot))}function Zc(o,P){o=null,P.alternate!==null&&(o=P.alternate.memoizedState.cache),P=P.memoizedState.cache,P!==o&&(P.refCount++,o!=null&&qs(o))}function Ba(o,P,ot,ht){if(P.subtreeFlags&10256)for(P=P.child;P!==null;)Dd(o,P,ot,ht),P=P.sibling}function Dd(o,P,ot,ht){var kt=P.flags;switch(P.tag){case 0:case 11:case 15:Ba(o,P,ot,ht),kt&2048&&al(9,P);break;case 1:Ba(o,P,ot,ht);break;case 3:Ba(o,P,ot,ht),kt&2048&&(o=null,P.alternate!==null&&(o=P.alternate.memoizedState.cache),P=P.memoizedState.cache,P!==o&&(P.refCount++,o!=null&&qs(o)));break;case 12:if(kt&2048){Ba(o,P,ot,ht),o=P.stateNode;try{var Nt=P.memoizedProps,rr=Nt.id,pr=Nt.onPostCommit;typeof pr=="function"&&pr(rr,P.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(Or){yi(P,P.return,Or)}}else Ba(o,P,ot,ht);break;case 13:Ba(o,P,ot,ht);break;case 23:break;case 22:Nt=P.stateNode,rr=P.alternate,P.memoizedState!==null?Nt._visibility&2?Ba(o,P,ot,ht):sl(o,P):Nt._visibility&2?Ba(o,P,ot,ht):(Nt._visibility|=2,_s(o,P,ot,ht,(P.subtreeFlags&10256)!==0)),kt&2048&&Kc(rr,P);break;case 24:Ba(o,P,ot,ht),kt&2048&&Zc(P.alternate,P);break;default:Ba(o,P,ot,ht)}}function _s(o,P,ot,ht,kt){for(kt=kt&&(P.subtreeFlags&10256)!==0,P=P.child;P!==null;){var Nt=o,rr=P,pr=ot,Or=ht,rn=rr.flags;switch(rr.tag){case 0:case 11:case 15:_s(Nt,rr,pr,Or,kt),al(8,rr);break;case 23:break;case 22:var dn=rr.stateNode;rr.memoizedState!==null?dn._visibility&2?_s(Nt,rr,pr,Or,kt):sl(Nt,rr):(dn._visibility|=2,_s(Nt,rr,pr,Or,kt)),kt&&rn&2048&&Kc(rr.alternate,rr);break;case 24:_s(Nt,rr,pr,Or,kt),kt&&rn&2048&&Zc(rr.alternate,rr);break;default:_s(Nt,rr,pr,Or,kt)}P=P.sibling}}function sl(o,P){if(P.subtreeFlags&10256)for(P=P.child;P!==null;){var ot=o,ht=P,kt=ht.flags;switch(ht.tag){case 22:sl(ot,ht),kt&2048&&Kc(ht.alternate,ht);break;case 24:sl(ot,ht),kt&2048&&Zc(ht.alternate,ht);break;default:sl(ot,ht)}P=P.sibling}}var ll=8192;function ws(o){if(o.subtreeFlags&ll)for(o=o.child;o!==null;)Ld(o),o=o.sibling}function Ld(o){switch(o.tag){case 26:ws(o),o.flags&ll&&o.memoizedState!==null&&$m(Ma,o.memoizedState,o.memoizedProps);break;case 5:ws(o);break;case 3:case 4:var P=Ma;Ma=Au(o.stateNode.containerInfo),ws(o),Ma=P;break;case 22:o.memoizedState===null&&(P=o.alternate,P!==null&&P.memoizedState!==null?(P=ll,ll=16777216,ws(o),ll=P):ws(o));break;default:ws(o)}}function Id(o){var P=o.alternate;if(P!==null&&(o=P.child,o!==null)){P.child=null;do P=o.sibling,o.sibling=null,o=P;while(o!==null)}}function ul(o){var P=o.deletions;if((o.flags&16)!==0){if(P!==null)for(var ot=0;ot<P.length;ot++){var ht=P[ot];qi=ht,Nd(ht,o)}Id(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Pd(o),o=o.sibling}function Pd(o){switch(o.tag){case 0:case 11:case 15:ul(o),o.flags&2048&&bo(9,o,o.return);break;case 3:ul(o);break;case 12:ul(o);break;case 22:var P=o.stateNode;o.memoizedState!==null&&P._visibility&2&&(o.return===null||o.return.tag!==13)?(P._visibility&=-3,gu(o)):ul(o);break;default:ul(o)}}function gu(o){var P=o.deletions;if((o.flags&16)!==0){if(P!==null)for(var ot=0;ot<P.length;ot++){var ht=P[ot];qi=ht,Nd(ht,o)}Id(o)}for(o=o.child;o!==null;){switch(P=o,P.tag){case 0:case 11:case 15:bo(8,P,P.return),gu(P);break;case 22:ot=P.stateNode,ot._visibility&2&&(ot._visibility&=-3,gu(P));break;default:gu(P)}o=o.sibling}}function Nd(o,P){for(;qi!==null;){var ot=qi;switch(ot.tag){case 0:case 11:case 15:bo(8,ot,P);break;case 23:case 22:if(ot.memoizedState!==null&&ot.memoizedState.cachePool!==null){var ht=ot.memoizedState.cachePool.pool;ht!=null&&ht.refCount++}break;case 24:qs(ot.memoizedState.cache)}if(ht=ot.child,ht!==null)ht.return=ot,qi=ht;else e:for(ot=o;qi!==null;){ht=qi;var kt=ht.sibling,Nt=ht.return;if(Ad(ht),ht===ot){qi=null;break e}if(kt!==null){kt.return=Nt,qi=kt;break e}qi=Nt}}}var cm={getCacheForType:function(o){var P=Ki(Ui),ot=P.data.get(o);return ot===void 0&&(ot=o(),P.data.set(o,ot)),ot}},fm=typeof WeakMap=="function"?WeakMap:Map,ci=0,xi=null,Kn=null,ei=0,fi=0,da=null,wo=!1,Ss=!1,Qc=!1,to=0,Oi=0,So=0,Zo=0,Jc=0,wa=0,js=0,cl=null,ia=null,ef=!1,tf=0,yu=1/0,vu=null,jo=null,$i=0,Eo=null,Es=null,Ts=0,rf=0,nf=null,Bd=null,fl=0,af=null;function pa(){if((ci&2)!==0&&ei!==0)return ei&-ei;if(Pt.T!==null){var o=ds;return o!==0?o:hf()}return Tt()}function Fd(){wa===0&&(wa=(ei&536870912)===0||ii?vn():536870912);var o=_a.current;return o!==null&&(o.flags|=32),wa}function ma(o,P,ot){(o===xi&&(fi===2||fi===9)||o.cancelPendingCommit!==null)&&(Ms(o,0),To(o,ei,wa,!1)),An(o,ot),((ci&2)===0||o!==xi)&&(o===xi&&((ci&2)===0&&(Zo|=ot),Oi===4&&To(o,ei,wa,!1)),Fa(o))}function Ud(o,P,ot){if((ci&6)!==0)throw Error(t(327));var ht=!ot&&(P&124)===0&&(P&o.expiredLanes)===0||zr(o,P),kt=ht?pm(o,P):lf(o,P,!0),Nt=ht;do{if(kt===0){Ss&&!ht&&To(o,P,0,!1);break}else{if(ot=o.current.alternate,Nt&&!hm(ot)){kt=lf(o,P,!1),Nt=!1;continue}if(kt===2){if(Nt=P,o.errorRecoveryDisabledLanes&Nt)var rr=0;else rr=o.pendingLanes&-536870913,rr=rr!==0?rr:rr&536870912?536870912:0;if(rr!==0){P=rr;e:{var pr=o;kt=cl;var Or=pr.current.memoizedState.isDehydrated;if(Or&&(Ms(pr,rr).flags|=256),rr=lf(pr,rr,!1),rr!==2){if(Qc&&!Or){pr.errorRecoveryDisabledLanes|=Nt,Zo|=Nt,kt=4;break e}Nt=ia,ia=kt,Nt!==null&&(ia===null?ia=Nt:ia.push.apply(ia,Nt))}kt=rr}if(Nt=!1,kt!==2)continue}}if(kt===1){Ms(o,0),To(o,P,0,!0);break}e:{switch(ht=o,Nt=kt,Nt){case 0:case 1:throw Error(t(345));case 4:if((P&4194048)!==P)break;case 6:To(ht,P,wa,!wo);break e;case 2:ia=null;break;case 3:case 5:break;default:throw Error(t(329))}if((P&62914560)===P&&(kt=tf+300-Sr(),10<kt)){if(To(ht,P,wa,!wo),Dr(ht,0,!0)!==0)break e;ht.timeoutHandle=mp(zd.bind(null,ht,ot,ia,vu,ef,P,wa,Zo,js,wo,Nt,2,-0,0),kt);break e}zd(ht,ot,ia,vu,ef,P,wa,Zo,js,wo,Nt,0,-0,0)}}break}while(!0);Fa(o)}function zd(o,P,ot,ht,kt,Nt,rr,pr,Or,rn,dn,yn,nn,sn){if(o.timeoutHandle=-1,yn=P.subtreeFlags,(yn&8192||(yn&16785408)===16785408)&&(vl={stylesheets:null,count:0,unsuspend:Xm},Ld(P),yn=Wm(),yn!==null)){o.cancelPendingCommit=yn($d.bind(null,o,P,Nt,ot,ht,kt,rr,pr,Or,dn,1,nn,sn)),To(o,Nt,rr,!rn);return}$d(o,P,Nt,ot,ht,kt,rr,pr,Or)}function hm(o){for(var P=o;;){var ot=P.tag;if((ot===0||ot===11||ot===15)&&P.flags&16384&&(ot=P.updateQueue,ot!==null&&(ot=ot.stores,ot!==null)))for(var ht=0;ht<ot.length;ht++){var kt=ot[ht],Nt=kt.getSnapshot;kt=kt.value;try{if(!Qn(Nt(),kt))return!1}catch{return!1}}if(ot=P.child,P.subtreeFlags&16384&&ot!==null)ot.return=P,P=ot;else{if(P===o)break;for(;P.sibling===null;){if(P.return===null||P.return===o)return!0;P=P.return}P.sibling.return=P.return,P=P.sibling}}return!0}function To(o,P,ot,ht){P&=~Jc,P&=~Zo,o.suspendedLanes|=P,o.pingedLanes&=~P,ht&&(o.warmLanes|=P),ht=o.expirationTimes;for(var kt=P;0<kt;){var Nt=31-Ir(kt),rr=1<<Nt;ht[Nt]=-1,kt&=~rr}ot!==0&&En(o,ot,P)}function bu(){return(ci&6)===0?(hl(0),!1):!0}function of(){if(Kn!==null){if(fi===0)var o=Kn.return;else o=Kn,Xa=qo=null,wc(o),bs=null,rl=0,o=Kn;for(;o!==null;)xd(o.alternate,o),o=o.return;Kn=null}}function Ms(o,P){var ot=o.timeoutHandle;ot!==-1&&(o.timeoutHandle=-1,Cm(ot)),ot=o.cancelPendingCommit,ot!==null&&(o.cancelPendingCommit=null,ot()),of(),xi=o,Kn=ot=Va(o.current,null),ei=P,fi=0,da=null,wo=!1,Ss=zr(o,P),Qc=!1,js=wa=Jc=Zo=So=Oi=0,ia=cl=null,ef=!1,(P&8)!==0&&(P|=P&32);var ht=o.entangledLanes;if(ht!==0)for(o=o.entanglements,ht&=P;0<ht;){var kt=31-Ir(ht),Nt=1<<kt;P|=o[kt],ht&=~Nt}return to=P,zl(),ot}function Gd(o,P){Xn=null,Pt.H=ou,P===Xs||P===Kl?(P=ah(),fi=3):P===rh?(P=ah(),fi=4):fi=P===od?8:P!==null&&typeof P=="object"&&typeof P.then=="function"?6:1,da=P,Kn===null&&(Oi=1,fu(o,ya(P,o.current)))}function Hd(){var o=Pt.H;return Pt.H=ou,o===null?ou:o}function Vd(){var o=Pt.A;return Pt.A=cm,o}function sf(){Oi=4,wo||(ei&4194048)!==ei&&_a.current!==null||(Ss=!0),(So&134217727)===0&&(Zo&134217727)===0||xi===null||To(xi,ei,wa,!1)}function lf(o,P,ot){var ht=ci;ci|=2;var kt=Hd(),Nt=Vd();(xi!==o||ei!==P)&&(vu=null,Ms(o,P)),P=!1;var rr=Oi;e:do try{if(fi!==0&&Kn!==null){var pr=Kn,Or=da;switch(fi){case 8:of(),rr=6;break e;case 3:case 2:case 9:case 6:_a.current===null&&(P=!0);var rn=fi;if(fi=0,da=null,As(o,pr,Or,rn),ot&&Ss){rr=0;break e}break;default:rn=fi,fi=0,da=null,As(o,pr,Or,rn)}}dm(),rr=Oi;break}catch(dn){Gd(o,dn)}while(!0);return P&&o.shellSuspendCounter++,Xa=qo=null,ci=ht,Pt.H=kt,Pt.A=Nt,Kn===null&&(xi=null,ei=0,zl()),rr}function dm(){for(;Kn!==null;)qd(Kn)}function pm(o,P){var ot=ci;ci|=2;var ht=Hd(),kt=Vd();xi!==o||ei!==P?(vu=null,yu=Sr()+500,Ms(o,P)):Ss=zr(o,P);e:do try{if(fi!==0&&Kn!==null){P=Kn;var Nt=da;t:switch(fi){case 1:fi=0,da=null,As(o,P,Nt,1);break;case 2:case 9:if(nh(Nt)){fi=0,da=null,Yd(P);break}P=function(){fi!==2&&fi!==9||xi!==o||(fi=7),Fa(o)},Nt.then(P,P);break e;case 3:fi=7;break e;case 4:fi=5;break e;case 7:nh(Nt)?(fi=0,da=null,Yd(P)):(fi=0,da=null,As(o,P,Nt,7));break;case 5:var rr=null;switch(Kn.tag){case 26:rr=Kn.memoizedState;case 5:case 27:var pr=Kn;if(!rr||Mp(rr)){fi=0,da=null;var Or=pr.sibling;if(Or!==null)Kn=Or;else{var rn=pr.return;rn!==null?(Kn=rn,xu(rn)):Kn=null}break t}}fi=0,da=null,As(o,P,Nt,5);break;case 6:fi=0,da=null,As(o,P,Nt,6);break;case 8:of(),Oi=6;break e;default:throw Error(t(462))}}mm();break}catch(dn){Gd(o,dn)}while(!0);return Xa=qo=null,Pt.H=ht,Pt.A=kt,ci=ot,Kn!==null?0:(xi=null,ei=0,zl(),Oi)}function mm(){for(;Kn!==null&&!ir();)qd(Kn)}function qd(o){var P=vd(o.alternate,o,to);o.memoizedProps=o.pendingProps,P===null?xu(o):Kn=P}function Yd(o){var P=o,ot=P.alternate;switch(P.tag){case 15:case 0:P=hd(ot,P,P.pendingProps,P.type,void 0,ei);break;case 11:P=hd(ot,P,P.pendingProps,P.type.render,P.ref,ei);break;case 5:wc(P);default:xd(ot,P),P=Kn=Xf(P,to),P=vd(ot,P,to)}o.memoizedProps=o.pendingProps,P===null?xu(o):Kn=P}function As(o,P,ot,ht){Xa=qo=null,wc(P),bs=null,rl=0;var kt=P.return;try{if(im(o,kt,P,ot,ei)){Oi=1,fu(o,ya(ot,o.current)),Kn=null;return}}catch(Nt){if(kt!==null)throw Kn=kt,Nt;Oi=1,fu(o,ya(ot,o.current)),Kn=null;return}P.flags&32768?(ii||ht===1?o=!0:Ss||(ei&536870912)!==0?o=!1:(wo=o=!0,(ht===2||ht===9||ht===3||ht===6)&&(ht=_a.current,ht!==null&&ht.tag===13&&(ht.flags|=16384))),Xd(P,o)):xu(P)}function xu(o){var P=o;do{if((P.flags&32768)!==0){Xd(P,wo);return}o=P.return;var ot=om(P.alternate,P,to);if(ot!==null){Kn=ot;return}if(P=P.sibling,P!==null){Kn=P;return}Kn=P=o}while(P!==null);Oi===0&&(Oi=5)}function Xd(o,P){do{var ot=sm(o.alternate,o);if(ot!==null){ot.flags&=32767,Kn=ot;return}if(ot=o.return,ot!==null&&(ot.flags|=32768,ot.subtreeFlags=0,ot.deletions=null),!P&&(o=o.sibling,o!==null)){Kn=o;return}Kn=o=ot}while(o!==null);Oi=6,Kn=null}function $d(o,P,ot,ht,kt,Nt,rr,pr,Or){o.cancelPendingCommit=null;do _u();while($i!==0);if((ci&6)!==0)throw Error(t(327));if(P!==null){if(P===o.current)throw Error(t(177));if(Nt=P.lanes|P.childLanes,Nt|=Zu,Cn(o,ot,Nt,rr,pr,Or),o===xi&&(Kn=xi=null,ei=0),Es=P,Eo=o,Ts=ot,rf=Nt,nf=kt,Bd=ht,(P.subtreeFlags&10256)!==0||(P.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,bm(Nr,function(){return Jd(),null})):(o.callbackNode=null,o.callbackPriority=0),ht=(P.flags&13878)!==0,(P.subtreeFlags&13878)!==0||ht){ht=Pt.T,Pt.T=null,kt=qt.p,qt.p=2,rr=ci,ci|=4;try{lm(o,P,ot)}finally{ci=rr,qt.p=kt,Pt.T=ht}}$i=1,Wd(),Kd(),Zd()}}function Wd(){if($i===1){$i=0;var o=Eo,P=Es,ot=(P.flags&13878)!==0;if((P.subtreeFlags&13878)!==0||ot){ot=Pt.T,Pt.T=null;var ht=qt.p;qt.p=2;var kt=ci;ci|=4;try{Od(P,o);var Nt=xf,rr=ai(o.containerInfo),pr=Nt.focusedElem,Or=Nt.selectionRange;if(rr!==pr&&pr&&pr.ownerDocument&&ta(pr.ownerDocument.documentElement,pr)){if(Or!==null&&si(pr)){var rn=Or.start,dn=Or.end;if(dn===void 0&&(dn=rn),"selectionStart"in pr)pr.selectionStart=rn,pr.selectionEnd=Math.min(dn,pr.value.length);else{var yn=pr.ownerDocument||document,nn=yn&&yn.defaultView||window;if(nn.getSelection){var sn=nn.getSelection(),zn=pr.textContent.length,Nn=Math.min(Or.start,zn),mi=Or.end===void 0?Nn:Math.min(Or.end,zn);!sn.extend&&Nn>mi&&(rr=mi,mi=Nn,Nn=rr);var $r=Fi(pr,Nn),Br=Fi(pr,mi);if($r&&Br&&(sn.rangeCount!==1||sn.anchorNode!==$r.node||sn.anchorOffset!==$r.offset||sn.focusNode!==Br.node||sn.focusOffset!==Br.offset)){var en=yn.createRange();en.setStart($r.node,$r.offset),sn.removeAllRanges(),Nn>mi?(sn.addRange(en),sn.extend(Br.node,Br.offset)):(en.setEnd(Br.node,Br.offset),sn.addRange(en))}}}}for(yn=[],sn=pr;sn=sn.parentNode;)sn.nodeType===1&&yn.push({element:sn,left:sn.scrollLeft,top:sn.scrollTop});for(typeof pr.focus=="function"&&pr.focus(),pr=0;pr<yn.length;pr++){var gn=yn[pr];gn.element.scrollLeft=gn.left,gn.element.scrollTop=gn.top}}Du=!!bf,xf=bf=null}finally{ci=kt,qt.p=ht,Pt.T=ot}}o.current=P,$i=2}}function Kd(){if($i===2){$i=0;var o=Eo,P=Es,ot=(P.flags&8772)!==0;if((P.subtreeFlags&8772)!==0||ot){ot=Pt.T,Pt.T=null;var ht=qt.p;qt.p=2;var kt=ci;ci|=4;try{Md(o,P.alternate,P)}finally{ci=kt,qt.p=ht,Pt.T=ot}}$i=3}}function Zd(){if($i===4||$i===3){$i=0,br();var o=Eo,P=Es,ot=Ts,ht=Bd;(P.subtreeFlags&10256)!==0||(P.flags&10256)!==0?$i=5:($i=0,Es=Eo=null,Qd(o,o.pendingLanes));var kt=o.pendingLanes;if(kt===0&&(jo=null),Ft(ot),P=P.stateNode,Gr&&typeof Gr.onCommitFiberRoot=="function")try{Gr.onCommitFiberRoot(Xr,P,void 0,(P.current.flags&128)===128)}catch{}if(ht!==null){P=Pt.T,kt=qt.p,qt.p=2,Pt.T=null;try{for(var Nt=o.onRecoverableError,rr=0;rr<ht.length;rr++){var pr=ht[rr];Nt(pr.value,{componentStack:pr.stack})}}finally{Pt.T=P,qt.p=kt}}(Ts&3)!==0&&_u(),Fa(o),kt=o.pendingLanes,(ot&4194090)!==0&&(kt&42)!==0?o===af?fl++:(fl=0,af=o):fl=0,hl(0)}}function Qd(o,P){(o.pooledCacheLanes&=P)===0&&(P=o.pooledCache,P!=null&&(o.pooledCache=null,qs(P)))}function _u(o){return Wd(),Kd(),Zd(),Jd()}function Jd(){if($i!==5)return!1;var o=Eo,P=rf;rf=0;var ot=Ft(Ts),ht=Pt.T,kt=qt.p;try{qt.p=32>ot?32:ot,Pt.T=null,ot=nf,nf=null;var Nt=Eo,rr=Ts;if($i=0,Es=Eo=null,Ts=0,(ci&6)!==0)throw Error(t(331));var pr=ci;if(ci|=4,Pd(Nt.current),Dd(Nt,Nt.current,rr,ot),ci=pr,hl(0,!1),Gr&&typeof Gr.onPostCommitFiberRoot=="function")try{Gr.onPostCommitFiberRoot(Xr,Nt)}catch{}return!0}finally{qt.p=kt,Pt.T=ht,Qd(o,P)}}function ep(o,P,ot){P=ya(ot,P),P=Pc(o.stateNode,P,2),o=mo(o,P,2),o!==null&&(An(o,2),Fa(o))}function yi(o,P,ot){if(o.tag===3)ep(o,o,ot);else for(;P!==null;){if(P.tag===3){ep(P,o,ot);break}else if(P.tag===1){var ht=P.stateNode;if(typeof P.type.getDerivedStateFromError=="function"||typeof ht.componentDidCatch=="function"&&(jo===null||!jo.has(ht))){o=ya(ot,o),ot=id(2),ht=mo(P,ot,2),ht!==null&&(ad(ot,ht,P,o),An(ht,2),Fa(ht));break}}P=P.return}}function uf(o,P,ot){var ht=o.pingCache;if(ht===null){ht=o.pingCache=new fm;var kt=new Set;ht.set(P,kt)}else kt=ht.get(P),kt===void 0&&(kt=new Set,ht.set(P,kt));kt.has(ot)||(Qc=!0,kt.add(ot),o=gm.bind(null,o,P,ot),P.then(o,o))}function gm(o,P,ot){var ht=o.pingCache;ht!==null&&ht.delete(P),o.pingedLanes|=o.suspendedLanes&ot,o.warmLanes&=~ot,xi===o&&(ei&ot)===ot&&(Oi===4||Oi===3&&(ei&62914560)===ei&&300>Sr()-tf?(ci&2)===0&&Ms(o,0):Jc|=ot,js===ei&&(js=0)),Fa(o)}function tp(o,P){P===0&&(P=_n()),o=us(o,P),o!==null&&(An(o,P),Fa(o))}function ym(o){var P=o.memoizedState,ot=0;P!==null&&(ot=P.retryLane),tp(o,ot)}function vm(o,P){var ot=0;switch(o.tag){case 13:var ht=o.stateNode,kt=o.memoizedState;kt!==null&&(ot=kt.retryLane);break;case 19:ht=o.stateNode;break;case 22:ht=o.stateNode._retryCache;break;default:throw Error(t(314))}ht!==null&&ht.delete(P),tp(o,ot)}function bm(o,P){return or(o,P)}var wu=null,ks=null,cf=!1,Su=!1,ff=!1,Qo=0;function Fa(o){o!==ks&&o.next===null&&(ks===null?wu=ks=o:ks=ks.next=o),Su=!0,cf||(cf=!0,_m())}function hl(o,P){if(!ff&&Su){ff=!0;do for(var ot=!1,ht=wu;ht!==null;){if(o!==0){var kt=ht.pendingLanes;if(kt===0)var Nt=0;else{var rr=ht.suspendedLanes,pr=ht.pingedLanes;Nt=(1<<31-Ir(42|o)+1)-1,Nt&=kt&~(rr&~pr),Nt=Nt&201326741?Nt&201326741|1:Nt?Nt|2:0}Nt!==0&&(ot=!0,ap(ht,Nt))}else Nt=ei,Nt=Dr(ht,ht===xi?Nt:0,ht.cancelPendingCommit!==null||ht.timeoutHandle!==-1),(Nt&3)===0||zr(ht,Nt)||(ot=!0,ap(ht,Nt));ht=ht.next}while(ot);ff=!1}}function xm(){rp()}function rp(){Su=cf=!1;var o=0;Qo!==0&&(km()&&(o=Qo),Qo=0);for(var P=Sr(),ot=null,ht=wu;ht!==null;){var kt=ht.next,Nt=np(ht,P);Nt===0?(ht.next=null,ot===null?wu=kt:ot.next=kt,kt===null&&(ks=ot)):(ot=ht,(o!==0||(Nt&3)!==0)&&(Su=!0)),ht=kt}hl(o)}function np(o,P){for(var ot=o.suspendedLanes,ht=o.pingedLanes,kt=o.expirationTimes,Nt=o.pendingLanes&-62914561;0<Nt;){var rr=31-Ir(Nt),pr=1<<rr,Or=kt[rr];Or===-1?((pr&ot)===0||(pr&ht)!==0)&&(kt[rr]=fn(pr,P)):Or<=P&&(o.expiredLanes|=pr),Nt&=~pr}if(P=xi,ot=ei,ot=Dr(o,o===P?ot:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),ht=o.callbackNode,ot===0||o===P&&(fi===2||fi===9)||o.cancelPendingCommit!==null)return ht!==null&&ht!==null&&Wt(ht),o.callbackNode=null,o.callbackPriority=0;if((ot&3)===0||zr(o,ot)){if(P=ot&-ot,P===o.callbackPriority)return P;switch(ht!==null&&Wt(ht),Ft(ot)){case 2:case 8:ot=jr;break;case 32:ot=Nr;break;case 268435456:ot=qr;break;default:ot=Nr}return ht=ip.bind(null,o),ot=or(ot,ht),o.callbackPriority=P,o.callbackNode=ot,P}return ht!==null&&ht!==null&&Wt(ht),o.callbackPriority=2,o.callbackNode=null,2}function ip(o,P){if($i!==0&&$i!==5)return o.callbackNode=null,o.callbackPriority=0,null;var ot=o.callbackNode;if(_u()&&o.callbackNode!==ot)return null;var ht=ei;return ht=Dr(o,o===xi?ht:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),ht===0?null:(Ud(o,ht,P),np(o,Sr()),o.callbackNode!=null&&o.callbackNode===ot?ip.bind(null,o):null)}function ap(o,P){if(_u())return null;Ud(o,P,!0)}function _m(){Om(function(){(ci&6)!==0?or(sr,xm):rp()})}function hf(){return Qo===0&&(Qo=vn()),Qo}function op(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:io(""+o)}function sp(o,P){var ot=P.ownerDocument.createElement("input");return ot.name=P.name,ot.value=P.value,o.id&&ot.setAttribute("form",o.id),P.parentNode.insertBefore(ot,P),o=new FormData(o),ot.parentNode.removeChild(ot),o}function wm(o,P,ot,ht,kt){if(P==="submit"&&ot&&ot.stateNode===kt){var Nt=op((kt[Bt]||null).action),rr=ht.submitter;rr&&(P=(P=rr[Bt]||null)?op(P.formAction):rr.getAttribute("formAction"),P!==null&&(Nt=P,rr=null));var pr=new Po("action","action",null,ht,kt);o.push({event:pr,listeners:[{instance:null,listener:function(){if(ht.defaultPrevented){if(Qo!==0){var Or=rr?sp(kt,rr):new FormData(kt);Oc(ot,{pending:!0,data:Or,method:kt.method,action:Nt},null,Or)}}else typeof Nt=="function"&&(pr.preventDefault(),Or=rr?sp(kt,rr):new FormData(kt),Oc(ot,{pending:!0,data:Or,method:kt.method,action:Nt},Nt,Or))},currentTarget:kt}]})}}for(var df=0;df<Ku.length;df++){var pf=Ku[df],Sm=pf.toLowerCase(),jm=pf[0].toUpperCase()+pf.slice(1);Ta(Sm,"on"+jm)}Ta(Uf,"onAnimationEnd"),Ta(zf,"onAnimationIteration"),Ta(Gf,"onAnimationStart"),Ta("dblclick","onDoubleClick"),Ta("focusin","onFocus"),Ta("focusout","onBlur"),Ta(zp,"onTransitionRun"),Ta(Gp,"onTransitionStart"),Ta(Hp,"onTransitionCancel"),Ta(Hf,"onTransitionEnd"),Kr("onMouseEnter",["mouseout","mouseover"]),Kr("onMouseLeave",["mouseout","mouseover"]),Kr("onPointerEnter",["pointerout","pointerover"]),Kr("onPointerLeave",["pointerout","pointerover"]),Sn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Sn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Sn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Sn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Sn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Sn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Em=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(dl));function lp(o,P){P=(P&4)!==0;for(var ot=0;ot<o.length;ot++){var ht=o[ot],kt=ht.event;ht=ht.listeners;e:{var Nt=void 0;if(P)for(var rr=ht.length-1;0<=rr;rr--){var pr=ht[rr],Or=pr.instance,rn=pr.currentTarget;if(pr=pr.listener,Or!==Nt&&kt.isPropagationStopped())break e;Nt=pr,kt.currentTarget=rn;try{Nt(kt)}catch(dn){cu(dn)}kt.currentTarget=null,Nt=Or}else for(rr=0;rr<ht.length;rr++){if(pr=ht[rr],Or=pr.instance,rn=pr.currentTarget,pr=pr.listener,Or!==Nt&&kt.isPropagationStopped())break e;Nt=pr,kt.currentTarget=rn;try{Nt(kt)}catch(dn){cu(dn)}kt.currentTarget=null,Nt=Or}}}}function Zn(o,P){var ot=P[hr];ot===void 0&&(ot=P[hr]=new Set);var ht=o+"__bubble";ot.has(ht)||(up(P,o,2,!1),ot.add(ht))}function mf(o,P,ot){var ht=0;P&&(ht|=4),up(ot,o,ht,P)}var ju="_reactListening"+Math.random().toString(36).slice(2);function gf(o){if(!o[ju]){o[ju]=!0,Yr.forEach(function(ot){ot!=="selectionchange"&&(Em.has(ot)||mf(ot,!1,o),mf(ot,!0,o))});var P=o.nodeType===9?o:o.ownerDocument;P===null||P[ju]||(P[ju]=!0,mf("selectionchange",!1,P))}}function up(o,P,ot,ht){switch(Dp(P)){case 2:var kt=Qm;break;case 8:kt=Jm;break;default:kt=Cf}ot=kt.bind(null,P,ot,o),kt=void 0,!Ps||P!=="touchstart"&&P!=="touchmove"&&P!=="wheel"||(kt=!0),ht?kt!==void 0?o.addEventListener(P,ot,{capture:!0,passive:kt}):o.addEventListener(P,ot,!0):kt!==void 0?o.addEventListener(P,ot,{passive:kt}):o.addEventListener(P,ot,!1)}function yf(o,P,ot,ht,kt){var Nt=ht;if((P&1)===0&&(P&2)===0&&ht!==null)e:for(;;){if(ht===null)return;var rr=ht.tag;if(rr===3||rr===4){var pr=ht.stateNode.containerInfo;if(pr===kt)break;if(rr===4)for(rr=ht.return;rr!==null;){var Or=rr.tag;if((Or===3||Or===4)&&rr.stateNode.containerInfo===kt)return;rr=rr.return}for(;pr!==null;){if(rr=pn(pr),rr===null)return;if(Or=rr.tag,Or===5||Or===6||Or===26||Or===27){ht=Nt=rr;continue e}pr=pr.parentNode}}ht=ht.return}Tl(function(){var rn=Nt,dn=Is(ot),yn=[];e:{var nn=Vf.get(o);if(nn!==void 0){var sn=Po,zn=o;switch(o){case"keypress":if(ea(ot)===0)break e;case"keydown":case"keyup":sn=Nl;break;case"focusin":zn="focus",sn=as;break;case"focusout":zn="blur",sn=as;break;case"beforeblur":case"afterblur":sn=as;break;case"click":if(ot.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":sn=Ns;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":sn=Cl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":sn=oi;break;case Uf:case zf:case Gf:sn=Dl;break;case Hf:sn=qu;break;case"scroll":case"scrollend":sn=Al;break;case"wheel":sn=Yu;break;case"copy":case"cut":case"paste":sn=Il;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":sn=Bl;break;case"toggle":case"beforetoggle":sn=$u}var Nn=(P&4)!==0,mi=!Nn&&(o==="scroll"||o==="scrollend"),$r=Nn?nn!==null?nn+"Capture":null:nn;Nn=[];for(var Br=rn,en;Br!==null;){var gn=Br;if(en=gn.stateNode,gn=gn.tag,gn!==5&&gn!==26&&gn!==27||en===null||$r===null||(gn=Io(Br,$r),gn!=null&&Nn.push(pl(Br,gn,en))),mi)break;Br=Br.return}0<Nn.length&&(nn=new sn(nn,zn,null,ot,dn),yn.push({event:nn,listeners:Nn}))}}if((P&7)===0){e:{if(nn=o==="mouseover"||o==="pointerover",sn=o==="mouseout"||o==="pointerout",nn&&ot!==ts&&(zn=ot.relatedTarget||ot.fromElement)&&(pn(zn)||zn[lr]))break e;if((sn||nn)&&(nn=dn.window===dn?dn:(nn=dn.ownerDocument)?nn.defaultView||nn.parentWindow:window,sn?(zn=ot.relatedTarget||ot.toElement,sn=rn,zn=zn?pn(zn):null,zn!==null&&(mi=u(zn),Nn=zn.tag,zn!==mi||Nn!==5&&Nn!==27&&Nn!==6)&&(zn=null)):(sn=null,zn=rn),sn!==zn)){if(Nn=Ns,gn="onMouseLeave",$r="onMouseEnter",Br="mouse",(o==="pointerout"||o==="pointerover")&&(Nn=Bl,gn="onPointerLeave",$r="onPointerEnter",Br="pointer"),mi=sn==null?nn:on(sn),en=zn==null?nn:on(zn),nn=new Nn(gn,Br+"leave",sn,ot,dn),nn.target=mi,nn.relatedTarget=en,gn=null,pn(dn)===rn&&(Nn=new Nn($r,Br+"enter",zn,ot,dn),Nn.target=en,Nn.relatedTarget=mi,gn=Nn),mi=gn,sn&&zn)t:{for(Nn=sn,$r=zn,Br=0,en=Nn;en;en=Cs(en))Br++;for(en=0,gn=$r;gn;gn=Cs(gn))en++;for(;0<Br-en;)Nn=Cs(Nn),Br--;for(;0<en-Br;)$r=Cs($r),en--;for(;Br--;){if(Nn===$r||$r!==null&&Nn===$r.alternate)break t;Nn=Cs(Nn),$r=Cs($r)}Nn=null}else Nn=null;sn!==null&&cp(yn,nn,sn,Nn,!1),zn!==null&&mi!==null&&cp(yn,mi,zn,Nn,!0)}}e:{if(nn=rn?on(rn):window,sn=nn.nodeName&&nn.nodeName.toLowerCase(),sn==="select"||sn==="input"&&nn.type==="file")var Rn=Mr;else if(fr(nn))if(hn)Rn=Vn;else{Rn=Ln;var Wn=Un}else sn=nn.nodeName,!sn||sn.toLowerCase()!=="input"||nn.type!=="checkbox"&&nn.type!=="radio"?rn&&Ca(rn.elementType)&&(Rn=Mr):Rn=In;if(Rn&&(Rn=Rn(o,rn))){wr(yn,Rn,ot,dn);break e}Wn&&Wn(o,nn,rn),o==="focusout"&&rn&&nn.type==="number"&&rn.memoizedProps.value!=null&&Ua(nn,"number",nn.value)}switch(Wn=rn?on(rn):window,o){case"focusin":(fr(Wn)||Wn.contentEditable==="true")&&(Ei=Wn,gi=rn,Ti=null);break;case"focusout":Ti=gi=Ei=null;break;case"mousedown":ui=!0;break;case"contextmenu":case"mouseup":case"dragend":ui=!1,Ri(yn,ot,dn);break;case"selectionchange":if(ni)break;case"keydown":case"keyup":Ri(yn,ot,dn)}var Pn;if(Us)e:{switch(o){case"compositionstart":var Fn="onCompositionStart";break e;case"compositionend":Fn="onCompositionEnd";break e;case"compositionupdate":Fn="onCompositionUpdate";break e}Fn=void 0}else Ot?_t(o,ot)&&(Fn="onCompositionEnd"):o==="keydown"&&ot.keyCode===229&&(Fn="onCompositionStart");Fn&&(ji&&ot.locale!=="ko"&&(Ot||Fn!=="onCompositionStart"?Fn==="onCompositionEnd"&&Ot&&(Pn=oo()):(Ni=dn,oa="value"in Ni?Ni.value:Ni.textContent,Ot=!0)),Wn=Eu(rn,Fn),0<Wn.length&&(Fn=new No(Fn,o,null,ot,dn),yn.push({event:Fn,listeners:Wn}),Pn?Fn.data=Pn:(Pn=Mt(ot),Pn!==null&&(Fn.data=Pn)))),(Pn=Ul?zt(o,ot):Xt(o,ot))&&(Fn=Eu(rn,"onBeforeInput"),0<Fn.length&&(Wn=new No("onBeforeInput","beforeinput",null,ot,dn),yn.push({event:Wn,listeners:Fn}),Wn.data=Pn)),wm(yn,o,rn,ot,dn)}lp(yn,P)})}function pl(o,P,ot){return{instance:o,listener:P,currentTarget:ot}}function Eu(o,P){for(var ot=P+"Capture",ht=[];o!==null;){var kt=o,Nt=kt.stateNode;if(kt=kt.tag,kt!==5&&kt!==26&&kt!==27||Nt===null||(kt=Io(o,ot),kt!=null&&ht.unshift(pl(o,kt,Nt)),kt=Io(o,P),kt!=null&&ht.push(pl(o,kt,Nt))),o.tag===3)return ht;o=o.return}return[]}function Cs(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function cp(o,P,ot,ht,kt){for(var Nt=P._reactName,rr=[];ot!==null&&ot!==ht;){var pr=ot,Or=pr.alternate,rn=pr.stateNode;if(pr=pr.tag,Or!==null&&Or===ht)break;pr!==5&&pr!==26&&pr!==27||rn===null||(Or=rn,kt?(rn=Io(ot,Nt),rn!=null&&rr.unshift(pl(ot,rn,Or))):kt||(rn=Io(ot,Nt),rn!=null&&rr.push(pl(ot,rn,Or)))),ot=ot.return}rr.length!==0&&o.push({event:P,listeners:rr})}var Tm=/\r\n?/g,Mm=/\u0000|\uFFFD/g;function fp(o){return(typeof o=="string"?o:""+o).replace(Tm,`
`).replace(Mm,"")}function hp(o,P){return P=fp(P),fp(o)===P}function Tu(){}function pi(o,P,ot,ht,kt,Nt){switch(ot){case"children":typeof ht=="string"?P==="body"||P==="textarea"&&ht===""||aa(o,ht):(typeof ht=="number"||typeof ht=="bigint")&&P!=="body"&&aa(o,""+ht);break;case"className":cn(o,"class",ht);break;case"tabIndex":cn(o,"tabindex",ht);break;case"dir":case"role":case"viewBox":case"width":case"height":cn(o,ot,ht);break;case"style":Ls(o,ht,Nt);break;case"data":if(P!=="object"){cn(o,"data",ht);break}case"src":case"href":if(ht===""&&(P!=="a"||ot!=="href")){o.removeAttribute(ot);break}if(ht==null||typeof ht=="function"||typeof ht=="symbol"||typeof ht=="boolean"){o.removeAttribute(ot);break}ht=io(""+ht),o.setAttribute(ot,ht);break;case"action":case"formAction":if(typeof ht=="function"){o.setAttribute(ot,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Nt=="function"&&(ot==="formAction"?(P!=="input"&&pi(o,P,"name",kt.name,kt,null),pi(o,P,"formEncType",kt.formEncType,kt,null),pi(o,P,"formMethod",kt.formMethod,kt,null),pi(o,P,"formTarget",kt.formTarget,kt,null)):(pi(o,P,"encType",kt.encType,kt,null),pi(o,P,"method",kt.method,kt,null),pi(o,P,"target",kt.target,kt,null)));if(ht==null||typeof ht=="symbol"||typeof ht=="boolean"){o.removeAttribute(ot);break}ht=io(""+ht),o.setAttribute(ot,ht);break;case"onClick":ht!=null&&(o.onclick=Tu);break;case"onScroll":ht!=null&&Zn("scroll",o);break;case"onScrollEnd":ht!=null&&Zn("scrollend",o);break;case"dangerouslySetInnerHTML":if(ht!=null){if(typeof ht!="object"||!("__html"in ht))throw Error(t(61));if(ot=ht.__html,ot!=null){if(kt.children!=null)throw Error(t(60));o.innerHTML=ot}}break;case"multiple":o.multiple=ht&&typeof ht!="function"&&typeof ht!="symbol";break;case"muted":o.muted=ht&&typeof ht!="function"&&typeof ht!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(ht==null||typeof ht=="function"||typeof ht=="boolean"||typeof ht=="symbol"){o.removeAttribute("xlink:href");break}ot=io(""+ht),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",ot);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":ht!=null&&typeof ht!="function"&&typeof ht!="symbol"?o.setAttribute(ot,""+ht):o.removeAttribute(ot);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":ht&&typeof ht!="function"&&typeof ht!="symbol"?o.setAttribute(ot,""):o.removeAttribute(ot);break;case"capture":case"download":ht===!0?o.setAttribute(ot,""):ht!==!1&&ht!=null&&typeof ht!="function"&&typeof ht!="symbol"?o.setAttribute(ot,ht):o.removeAttribute(ot);break;case"cols":case"rows":case"size":case"span":ht!=null&&typeof ht!="function"&&typeof ht!="symbol"&&!isNaN(ht)&&1<=ht?o.setAttribute(ot,ht):o.removeAttribute(ot);break;case"rowSpan":case"start":ht==null||typeof ht=="function"||typeof ht=="symbol"||isNaN(ht)?o.removeAttribute(ot):o.setAttribute(ot,ht);break;case"popover":Zn("beforetoggle",o),Zn("toggle",o),Lr(o,"popover",ht);break;case"xlinkActuate":xn(o,"http://www.w3.org/1999/xlink","xlink:actuate",ht);break;case"xlinkArcrole":xn(o,"http://www.w3.org/1999/xlink","xlink:arcrole",ht);break;case"xlinkRole":xn(o,"http://www.w3.org/1999/xlink","xlink:role",ht);break;case"xlinkShow":xn(o,"http://www.w3.org/1999/xlink","xlink:show",ht);break;case"xlinkTitle":xn(o,"http://www.w3.org/1999/xlink","xlink:title",ht);break;case"xlinkType":xn(o,"http://www.w3.org/1999/xlink","xlink:type",ht);break;case"xmlBase":xn(o,"http://www.w3.org/XML/1998/namespace","xml:base",ht);break;case"xmlLang":xn(o,"http://www.w3.org/XML/1998/namespace","xml:lang",ht);break;case"xmlSpace":xn(o,"http://www.w3.org/XML/1998/namespace","xml:space",ht);break;case"is":Lr(o,"is",ht);break;case"innerText":case"textContent":break;default:(!(2<ot.length)||ot[0]!=="o"&&ot[0]!=="O"||ot[1]!=="n"&&ot[1]!=="N")&&(ot=jl.get(ot)||ot,Lr(o,ot,ht))}}function vf(o,P,ot,ht,kt,Nt){switch(ot){case"style":Ls(o,ht,Nt);break;case"dangerouslySetInnerHTML":if(ht!=null){if(typeof ht!="object"||!("__html"in ht))throw Error(t(61));if(ot=ht.__html,ot!=null){if(kt.children!=null)throw Error(t(60));o.innerHTML=ot}}break;case"children":typeof ht=="string"?aa(o,ht):(typeof ht=="number"||typeof ht=="bigint")&&aa(o,""+ht);break;case"onScroll":ht!=null&&Zn("scroll",o);break;case"onScrollEnd":ht!=null&&Zn("scrollend",o);break;case"onClick":ht!=null&&(o.onclick=Tu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hr.hasOwnProperty(ot))e:{if(ot[0]==="o"&&ot[1]==="n"&&(kt=ot.endsWith("Capture"),P=ot.slice(2,kt?ot.length-7:void 0),Nt=o[Bt]||null,Nt=Nt!=null?Nt[ot]:null,typeof Nt=="function"&&o.removeEventListener(P,Nt,kt),typeof ht=="function")){typeof Nt!="function"&&Nt!==null&&(ot in o?o[ot]=null:o.hasAttribute(ot)&&o.removeAttribute(ot)),o.addEventListener(P,ht,kt);break e}ot in o?o[ot]=ht:ht===!0?o.setAttribute(ot,""):Lr(o,ot,ht)}}}function Wi(o,P,ot){switch(P){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Zn("error",o),Zn("load",o);var ht=!1,kt=!1,Nt;for(Nt in ot)if(ot.hasOwnProperty(Nt)){var rr=ot[Nt];if(rr!=null)switch(Nt){case"src":ht=!0;break;case"srcSet":kt=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(t(137,P));default:pi(o,P,Nt,rr,ot,null)}}kt&&pi(o,P,"srcSet",ot.srcSet,ot,null),ht&&pi(o,P,"src",ot.src,ot,null);return;case"input":Zn("invalid",o);var pr=Nt=rr=kt=null,Or=null,rn=null;for(ht in ot)if(ot.hasOwnProperty(ht)){var dn=ot[ht];if(dn!=null)switch(ht){case"name":kt=dn;break;case"type":rr=dn;break;case"checked":Or=dn;break;case"defaultChecked":rn=dn;break;case"value":Nt=dn;break;case"defaultValue":pr=dn;break;case"children":case"dangerouslySetInnerHTML":if(dn!=null)throw Error(t(137,P));break;default:pi(o,P,ht,dn,ot,null)}}Jo(o,Nt,pr,Or,rn,rr,kt,!1),Hn(o);return;case"select":Zn("invalid",o),ht=rr=Nt=null;for(kt in ot)if(ot.hasOwnProperty(kt)&&(pr=ot[kt],pr!=null))switch(kt){case"value":Nt=pr;break;case"defaultValue":rr=pr;break;case"multiple":ht=pr;default:pi(o,P,kt,pr,ot,null)}P=Nt,ot=rr,o.multiple=!!ht,P!=null?ja(o,!!ht,P,!1):ot!=null&&ja(o,!!ht,ot,!0);return;case"textarea":Zn("invalid",o),Nt=kt=ht=null;for(rr in ot)if(ot.hasOwnProperty(rr)&&(pr=ot[rr],pr!=null))switch(rr){case"value":ht=pr;break;case"defaultValue":kt=pr;break;case"children":Nt=pr;break;case"dangerouslySetInnerHTML":if(pr!=null)throw Error(t(91));break;default:pi(o,P,rr,pr,ot,null)}za(o,ht,kt,Nt),Hn(o);return;case"option":for(Or in ot)if(ot.hasOwnProperty(Or)&&(ht=ot[Or],ht!=null))switch(Or){case"selected":o.selected=ht&&typeof ht!="function"&&typeof ht!="symbol";break;default:pi(o,P,Or,ht,ot,null)}return;case"dialog":Zn("beforetoggle",o),Zn("toggle",o),Zn("cancel",o),Zn("close",o);break;case"iframe":case"object":Zn("load",o);break;case"video":case"audio":for(ht=0;ht<dl.length;ht++)Zn(dl[ht],o);break;case"image":Zn("error",o),Zn("load",o);break;case"details":Zn("toggle",o);break;case"embed":case"source":case"link":Zn("error",o),Zn("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(rn in ot)if(ot.hasOwnProperty(rn)&&(ht=ot[rn],ht!=null))switch(rn){case"children":case"dangerouslySetInnerHTML":throw Error(t(137,P));default:pi(o,P,rn,ht,ot,null)}return;default:if(Ca(P)){for(dn in ot)ot.hasOwnProperty(dn)&&(ht=ot[dn],ht!==void 0&&vf(o,P,dn,ht,ot,void 0));return}}for(pr in ot)ot.hasOwnProperty(pr)&&(ht=ot[pr],ht!=null&&pi(o,P,pr,ht,ot,null))}function Am(o,P,ot,ht){switch(P){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var kt=null,Nt=null,rr=null,pr=null,Or=null,rn=null,dn=null;for(sn in ot){var yn=ot[sn];if(ot.hasOwnProperty(sn)&&yn!=null)switch(sn){case"checked":break;case"value":break;case"defaultValue":Or=yn;default:ht.hasOwnProperty(sn)||pi(o,P,sn,null,ht,yn)}}for(var nn in ht){var sn=ht[nn];if(yn=ot[nn],ht.hasOwnProperty(nn)&&(sn!=null||yn!=null))switch(nn){case"type":Nt=sn;break;case"name":kt=sn;break;case"checked":rn=sn;break;case"defaultChecked":dn=sn;break;case"value":rr=sn;break;case"defaultValue":pr=sn;break;case"children":case"dangerouslySetInnerHTML":if(sn!=null)throw Error(t(137,P));break;default:sn!==yn&&pi(o,P,nn,sn,ht,yn)}}no(o,rr,pr,Or,rn,dn,Nt,kt);return;case"select":sn=rr=pr=nn=null;for(Nt in ot)if(Or=ot[Nt],ot.hasOwnProperty(Nt)&&Or!=null)switch(Nt){case"value":break;case"multiple":sn=Or;default:ht.hasOwnProperty(Nt)||pi(o,P,Nt,null,ht,Or)}for(kt in ht)if(Nt=ht[kt],Or=ot[kt],ht.hasOwnProperty(kt)&&(Nt!=null||Or!=null))switch(kt){case"value":nn=Nt;break;case"defaultValue":pr=Nt;break;case"multiple":rr=Nt;default:Nt!==Or&&pi(o,P,kt,Nt,ht,Or)}P=pr,ot=rr,ht=sn,nn!=null?ja(o,!!ot,nn,!1):!!ht!=!!ot&&(P!=null?ja(o,!!ot,P,!0):ja(o,!!ot,ot?[]:"",!1));return;case"textarea":sn=nn=null;for(pr in ot)if(kt=ot[pr],ot.hasOwnProperty(pr)&&kt!=null&&!ht.hasOwnProperty(pr))switch(pr){case"value":break;case"children":break;default:pi(o,P,pr,null,ht,kt)}for(rr in ht)if(kt=ht[rr],Nt=ot[rr],ht.hasOwnProperty(rr)&&(kt!=null||Nt!=null))switch(rr){case"value":nn=kt;break;case"defaultValue":sn=kt;break;case"children":break;case"dangerouslySetInnerHTML":if(kt!=null)throw Error(t(91));break;default:kt!==Nt&&pi(o,P,rr,kt,ht,Nt)}Do(o,nn,sn);return;case"option":for(var zn in ot)if(nn=ot[zn],ot.hasOwnProperty(zn)&&nn!=null&&!ht.hasOwnProperty(zn))switch(zn){case"selected":o.selected=!1;break;default:pi(o,P,zn,null,ht,nn)}for(Or in ht)if(nn=ht[Or],sn=ot[Or],ht.hasOwnProperty(Or)&&nn!==sn&&(nn!=null||sn!=null))switch(Or){case"selected":o.selected=nn&&typeof nn!="function"&&typeof nn!="symbol";break;default:pi(o,P,Or,nn,ht,sn)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Nn in ot)nn=ot[Nn],ot.hasOwnProperty(Nn)&&nn!=null&&!ht.hasOwnProperty(Nn)&&pi(o,P,Nn,null,ht,nn);for(rn in ht)if(nn=ht[rn],sn=ot[rn],ht.hasOwnProperty(rn)&&nn!==sn&&(nn!=null||sn!=null))switch(rn){case"children":case"dangerouslySetInnerHTML":if(nn!=null)throw Error(t(137,P));break;default:pi(o,P,rn,nn,ht,sn)}return;default:if(Ca(P)){for(var mi in ot)nn=ot[mi],ot.hasOwnProperty(mi)&&nn!==void 0&&!ht.hasOwnProperty(mi)&&vf(o,P,mi,void 0,ht,nn);for(dn in ht)nn=ht[dn],sn=ot[dn],!ht.hasOwnProperty(dn)||nn===sn||nn===void 0&&sn===void 0||vf(o,P,dn,nn,ht,sn);return}}for(var $r in ot)nn=ot[$r],ot.hasOwnProperty($r)&&nn!=null&&!ht.hasOwnProperty($r)&&pi(o,P,$r,null,ht,nn);for(yn in ht)nn=ht[yn],sn=ot[yn],!ht.hasOwnProperty(yn)||nn===sn||nn==null&&sn==null||pi(o,P,yn,nn,ht,sn)}var bf=null,xf=null;function Mu(o){return o.nodeType===9?o:o.ownerDocument}function dp(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function pp(o,P){if(o===0)switch(P){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&P==="foreignObject"?0:o}function _f(o,P){return o==="textarea"||o==="noscript"||typeof P.children=="string"||typeof P.children=="number"||typeof P.children=="bigint"||typeof P.dangerouslySetInnerHTML=="object"&&P.dangerouslySetInnerHTML!==null&&P.dangerouslySetInnerHTML.__html!=null}var wf=null;function km(){var o=window.event;return o&&o.type==="popstate"?o===wf?!1:(wf=o,!0):(wf=null,!1)}var mp=typeof setTimeout=="function"?setTimeout:void 0,Cm=typeof clearTimeout=="function"?clearTimeout:void 0,gp=typeof Promise=="function"?Promise:void 0,Om=typeof queueMicrotask=="function"?queueMicrotask:typeof gp<"u"?function(o){return gp.resolve(null).then(o).catch(Rm)}:mp;function Rm(o){setTimeout(function(){throw o})}function Mo(o){return o==="head"}function yp(o,P){var ot=P,ht=0,kt=0;do{var Nt=ot.nextSibling;if(o.removeChild(ot),Nt&&Nt.nodeType===8)if(ot=Nt.data,ot==="/$"){if(0<ht&&8>ht){ot=ht;var rr=o.ownerDocument;if(ot&1&&ml(rr.documentElement),ot&2&&ml(rr.body),ot&4)for(ot=rr.head,ml(ot),rr=ot.firstChild;rr;){var pr=rr.nextSibling,Or=rr.nodeName;rr[Ar]||Or==="SCRIPT"||Or==="STYLE"||Or==="LINK"&&rr.rel.toLowerCase()==="stylesheet"||ot.removeChild(rr),rr=pr}}if(kt===0){o.removeChild(Nt),Sl(P);return}kt--}else ot==="$"||ot==="$?"||ot==="$!"?kt++:ht=ot.charCodeAt(0)-48;else ht=0;ot=Nt}while(ot);Sl(P)}function Sf(o){var P=o.firstChild;for(P&&P.nodeType===10&&(P=P.nextSibling);P;){var ot=P;switch(P=P.nextSibling,ot.nodeName){case"HTML":case"HEAD":case"BODY":Sf(ot),an(ot);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(ot.rel.toLowerCase()==="stylesheet")continue}o.removeChild(ot)}}function Dm(o,P,ot,ht){for(;o.nodeType===1;){var kt=ot;if(o.nodeName.toLowerCase()!==P.toLowerCase()){if(!ht&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(ht){if(!o[Ar])switch(P){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(Nt=o.getAttribute("rel"),Nt==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(Nt!==kt.rel||o.getAttribute("href")!==(kt.href==null||kt.href===""?null:kt.href)||o.getAttribute("crossorigin")!==(kt.crossOrigin==null?null:kt.crossOrigin)||o.getAttribute("title")!==(kt.title==null?null:kt.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(Nt=o.getAttribute("src"),(Nt!==(kt.src==null?null:kt.src)||o.getAttribute("type")!==(kt.type==null?null:kt.type)||o.getAttribute("crossorigin")!==(kt.crossOrigin==null?null:kt.crossOrigin))&&Nt&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(P==="input"&&o.type==="hidden"){var Nt=kt.name==null?null:""+kt.name;if(kt.type==="hidden"&&o.getAttribute("name")===Nt)return o}else return o;if(o=Aa(o.nextSibling),o===null)break}return null}function Lm(o,P,ot){if(P==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!ot||(o=Aa(o.nextSibling),o===null))return null;return o}function jf(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function Im(o,P){var ot=o.ownerDocument;if(o.data!=="$?"||ot.readyState==="complete")P();else{var ht=function(){P(),ot.removeEventListener("DOMContentLoaded",ht)};ot.addEventListener("DOMContentLoaded",ht),o._reactRetry=ht}}function Aa(o){for(;o!=null;o=o.nextSibling){var P=o.nodeType;if(P===1||P===3)break;if(P===8){if(P=o.data,P==="$"||P==="$!"||P==="$?"||P==="F!"||P==="F")break;if(P==="/$")return null}}return o}var Ef=null;function vp(o){o=o.previousSibling;for(var P=0;o;){if(o.nodeType===8){var ot=o.data;if(ot==="$"||ot==="$!"||ot==="$?"){if(P===0)return o;P--}else ot==="/$"&&P++}o=o.previousSibling}return null}function bp(o,P,ot){switch(P=Mu(ot),o){case"html":if(o=P.documentElement,!o)throw Error(t(452));return o;case"head":if(o=P.head,!o)throw Error(t(453));return o;case"body":if(o=P.body,!o)throw Error(t(454));return o;default:throw Error(t(451))}}function ml(o){for(var P=o.attributes;P.length;)o.removeAttributeNode(P[0]);an(o)}var Sa=new Map,xp=new Set;function Au(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var ro=qt.d;qt.d={f:Pm,r:Nm,D:Bm,C:Fm,L:Um,m:zm,X:Hm,S:Gm,M:Vm};function Pm(){var o=ro.f(),P=bu();return o||P}function Nm(o){var P=Jr(o);P!==null&&P.tag===5&&P.type==="form"?Uh(P):ro.r(o)}var Os=typeof document>"u"?null:document;function _p(o,P,ot){var ht=Os;if(ht&&typeof P=="string"&&P){var kt=Jn(P);kt='link[rel="'+o+'"][href="'+kt+'"]',typeof ot=="string"&&(kt+='[crossorigin="'+ot+'"]'),xp.has(kt)||(xp.add(kt),o={rel:o,crossOrigin:ot,href:P},ht.querySelector(kt)===null&&(P=ht.createElement("link"),Wi(P,"link",o),gr(P),ht.head.appendChild(P)))}}function Bm(o){ro.D(o),_p("dns-prefetch",o,null)}function Fm(o,P){ro.C(o,P),_p("preconnect",o,P)}function Um(o,P,ot){ro.L(o,P,ot);var ht=Os;if(ht&&o&&P){var kt='link[rel="preload"][as="'+Jn(P)+'"]';P==="image"&&ot&&ot.imageSrcSet?(kt+='[imagesrcset="'+Jn(ot.imageSrcSet)+'"]',typeof ot.imageSizes=="string"&&(kt+='[imagesizes="'+Jn(ot.imageSizes)+'"]')):kt+='[href="'+Jn(o)+'"]';var Nt=kt;switch(P){case"style":Nt=Rs(o);break;case"script":Nt=Ds(o)}Sa.has(Nt)||(o=N({rel:"preload",href:P==="image"&&ot&&ot.imageSrcSet?void 0:o,as:P},ot),Sa.set(Nt,o),ht.querySelector(kt)!==null||P==="style"&&ht.querySelector(gl(Nt))||P==="script"&&ht.querySelector(yl(Nt))||(P=ht.createElement("link"),Wi(P,"link",o),gr(P),ht.head.appendChild(P)))}}function zm(o,P){ro.m(o,P);var ot=Os;if(ot&&o){var ht=P&&typeof P.as=="string"?P.as:"script",kt='link[rel="modulepreload"][as="'+Jn(ht)+'"][href="'+Jn(o)+'"]',Nt=kt;switch(ht){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Nt=Ds(o)}if(!Sa.has(Nt)&&(o=N({rel:"modulepreload",href:o},P),Sa.set(Nt,o),ot.querySelector(kt)===null)){switch(ht){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(ot.querySelector(yl(Nt)))return}ht=ot.createElement("link"),Wi(ht,"link",o),gr(ht),ot.head.appendChild(ht)}}}function Gm(o,P,ot){ro.S(o,P,ot);var ht=Os;if(ht&&o){var kt=mr(ht).hoistableStyles,Nt=Rs(o);P=P||"default";var rr=kt.get(Nt);if(!rr){var pr={loading:0,preload:null};if(rr=ht.querySelector(gl(Nt)))pr.loading=5;else{o=N({rel:"stylesheet",href:o,"data-precedence":P},ot),(ot=Sa.get(Nt))&&Tf(o,ot);var Or=rr=ht.createElement("link");gr(Or),Wi(Or,"link",o),Or._p=new Promise(function(rn,dn){Or.onload=rn,Or.onerror=dn}),Or.addEventListener("load",function(){pr.loading|=1}),Or.addEventListener("error",function(){pr.loading|=2}),pr.loading|=4,ku(rr,P,ht)}rr={type:"stylesheet",instance:rr,count:1,state:pr},kt.set(Nt,rr)}}}function Hm(o,P){ro.X(o,P);var ot=Os;if(ot&&o){var ht=mr(ot).hoistableScripts,kt=Ds(o),Nt=ht.get(kt);Nt||(Nt=ot.querySelector(yl(kt)),Nt||(o=N({src:o,async:!0},P),(P=Sa.get(kt))&&Mf(o,P),Nt=ot.createElement("script"),gr(Nt),Wi(Nt,"link",o),ot.head.appendChild(Nt)),Nt={type:"script",instance:Nt,count:1,state:null},ht.set(kt,Nt))}}function Vm(o,P){ro.M(o,P);var ot=Os;if(ot&&o){var ht=mr(ot).hoistableScripts,kt=Ds(o),Nt=ht.get(kt);Nt||(Nt=ot.querySelector(yl(kt)),Nt||(o=N({src:o,async:!0,type:"module"},P),(P=Sa.get(kt))&&Mf(o,P),Nt=ot.createElement("script"),gr(Nt),Wi(Nt,"link",o),ot.head.appendChild(Nt)),Nt={type:"script",instance:Nt,count:1,state:null},ht.set(kt,Nt))}}function wp(o,P,ot,ht){var kt=(kt=Vt.current)?Au(kt):null;if(!kt)throw Error(t(446));switch(o){case"meta":case"title":return null;case"style":return typeof ot.precedence=="string"&&typeof ot.href=="string"?(P=Rs(ot.href),ot=mr(kt).hoistableStyles,ht=ot.get(P),ht||(ht={type:"style",instance:null,count:0,state:null},ot.set(P,ht)),ht):{type:"void",instance:null,count:0,state:null};case"link":if(ot.rel==="stylesheet"&&typeof ot.href=="string"&&typeof ot.precedence=="string"){o=Rs(ot.href);var Nt=mr(kt).hoistableStyles,rr=Nt.get(o);if(rr||(kt=kt.ownerDocument||kt,rr={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Nt.set(o,rr),(Nt=kt.querySelector(gl(o)))&&!Nt._p&&(rr.instance=Nt,rr.state.loading=5),Sa.has(o)||(ot={rel:"preload",as:"style",href:ot.href,crossOrigin:ot.crossOrigin,integrity:ot.integrity,media:ot.media,hrefLang:ot.hrefLang,referrerPolicy:ot.referrerPolicy},Sa.set(o,ot),Nt||qm(kt,o,ot,rr.state))),P&&ht===null)throw Error(t(528,""));return rr}if(P&&ht!==null)throw Error(t(529,""));return null;case"script":return P=ot.async,ot=ot.src,typeof ot=="string"&&P&&typeof P!="function"&&typeof P!="symbol"?(P=Ds(ot),ot=mr(kt).hoistableScripts,ht=ot.get(P),ht||(ht={type:"script",instance:null,count:0,state:null},ot.set(P,ht)),ht):{type:"void",instance:null,count:0,state:null};default:throw Error(t(444,o))}}function Rs(o){return'href="'+Jn(o)+'"'}function gl(o){return'link[rel="stylesheet"]['+o+"]"}function Sp(o){return N({},o,{"data-precedence":o.precedence,precedence:null})}function qm(o,P,ot,ht){o.querySelector('link[rel="preload"][as="style"]['+P+"]")?ht.loading=1:(P=o.createElement("link"),ht.preload=P,P.addEventListener("load",function(){return ht.loading|=1}),P.addEventListener("error",function(){return ht.loading|=2}),Wi(P,"link",ot),gr(P),o.head.appendChild(P))}function Ds(o){return'[src="'+Jn(o)+'"]'}function yl(o){return"script[async]"+o}function jp(o,P,ot){if(P.count++,P.instance===null)switch(P.type){case"style":var ht=o.querySelector('style[data-href~="'+Jn(ot.href)+'"]');if(ht)return P.instance=ht,gr(ht),ht;var kt=N({},ot,{"data-href":ot.href,"data-precedence":ot.precedence,href:null,precedence:null});return ht=(o.ownerDocument||o).createElement("style"),gr(ht),Wi(ht,"style",kt),ku(ht,ot.precedence,o),P.instance=ht;case"stylesheet":kt=Rs(ot.href);var Nt=o.querySelector(gl(kt));if(Nt)return P.state.loading|=4,P.instance=Nt,gr(Nt),Nt;ht=Sp(ot),(kt=Sa.get(kt))&&Tf(ht,kt),Nt=(o.ownerDocument||o).createElement("link"),gr(Nt);var rr=Nt;return rr._p=new Promise(function(pr,Or){rr.onload=pr,rr.onerror=Or}),Wi(Nt,"link",ht),P.state.loading|=4,ku(Nt,ot.precedence,o),P.instance=Nt;case"script":return Nt=Ds(ot.src),(kt=o.querySelector(yl(Nt)))?(P.instance=kt,gr(kt),kt):(ht=ot,(kt=Sa.get(Nt))&&(ht=N({},ot),Mf(ht,kt)),o=o.ownerDocument||o,kt=o.createElement("script"),gr(kt),Wi(kt,"link",ht),o.head.appendChild(kt),P.instance=kt);case"void":return null;default:throw Error(t(443,P.type))}else P.type==="stylesheet"&&(P.state.loading&4)===0&&(ht=P.instance,P.state.loading|=4,ku(ht,ot.precedence,o));return P.instance}function ku(o,P,ot){for(var ht=ot.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),kt=ht.length?ht[ht.length-1]:null,Nt=kt,rr=0;rr<ht.length;rr++){var pr=ht[rr];if(pr.dataset.precedence===P)Nt=pr;else if(Nt!==kt)break}Nt?Nt.parentNode.insertBefore(o,Nt.nextSibling):(P=ot.nodeType===9?ot.head:ot,P.insertBefore(o,P.firstChild))}function Tf(o,P){o.crossOrigin==null&&(o.crossOrigin=P.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=P.referrerPolicy),o.title==null&&(o.title=P.title)}function Mf(o,P){o.crossOrigin==null&&(o.crossOrigin=P.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=P.referrerPolicy),o.integrity==null&&(o.integrity=P.integrity)}var Cu=null;function Ep(o,P,ot){if(Cu===null){var ht=new Map,kt=Cu=new Map;kt.set(ot,ht)}else kt=Cu,ht=kt.get(ot),ht||(ht=new Map,kt.set(ot,ht));if(ht.has(o))return ht;for(ht.set(o,null),ot=ot.getElementsByTagName(o),kt=0;kt<ot.length;kt++){var Nt=ot[kt];if(!(Nt[Ar]||Nt[At]||o==="link"&&Nt.getAttribute("rel")==="stylesheet")&&Nt.namespaceURI!=="http://www.w3.org/2000/svg"){var rr=Nt.getAttribute(P)||"";rr=o+rr;var pr=ht.get(rr);pr?pr.push(Nt):ht.set(rr,[Nt])}}return ht}function Tp(o,P,ot){o=o.ownerDocument||o,o.head.insertBefore(ot,P==="title"?o.querySelector("head > title"):null)}function Ym(o,P,ot){if(ot===1||P.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof P.precedence!="string"||typeof P.href!="string"||P.href==="")break;return!0;case"link":if(typeof P.rel!="string"||typeof P.href!="string"||P.href===""||P.onLoad||P.onError)break;switch(P.rel){case"stylesheet":return o=P.disabled,typeof P.precedence=="string"&&o==null;default:return!0}case"script":if(P.async&&typeof P.async!="function"&&typeof P.async!="symbol"&&!P.onLoad&&!P.onError&&P.src&&typeof P.src=="string")return!0}return!1}function Mp(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var vl=null;function Xm(){}function $m(o,P,ot){if(vl===null)throw Error(t(475));var ht=vl;if(P.type==="stylesheet"&&(typeof ot.media!="string"||matchMedia(ot.media).matches!==!1)&&(P.state.loading&4)===0){if(P.instance===null){var kt=Rs(ot.href),Nt=o.querySelector(gl(kt));if(Nt){o=Nt._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(ht.count++,ht=Ou.bind(ht),o.then(ht,ht)),P.state.loading|=4,P.instance=Nt,gr(Nt);return}Nt=o.ownerDocument||o,ot=Sp(ot),(kt=Sa.get(kt))&&Tf(ot,kt),Nt=Nt.createElement("link"),gr(Nt);var rr=Nt;rr._p=new Promise(function(pr,Or){rr.onload=pr,rr.onerror=Or}),Wi(Nt,"link",ot),P.instance=Nt}ht.stylesheets===null&&(ht.stylesheets=new Map),ht.stylesheets.set(P,o),(o=P.state.preload)&&(P.state.loading&3)===0&&(ht.count++,P=Ou.bind(ht),o.addEventListener("load",P),o.addEventListener("error",P))}}function Wm(){if(vl===null)throw Error(t(475));var o=vl;return o.stylesheets&&o.count===0&&Af(o,o.stylesheets),0<o.count?function(P){var ot=setTimeout(function(){if(o.stylesheets&&Af(o,o.stylesheets),o.unsuspend){var ht=o.unsuspend;o.unsuspend=null,ht()}},6e4);return o.unsuspend=P,function(){o.unsuspend=null,clearTimeout(ot)}}:null}function Ou(){if(this.count--,this.count===0){if(this.stylesheets)Af(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Ru=null;function Af(o,P){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Ru=new Map,P.forEach(Km,o),Ru=null,Ou.call(o))}function Km(o,P){if(!(P.state.loading&4)){var ot=Ru.get(o);if(ot)var ht=ot.get(null);else{ot=new Map,Ru.set(o,ot);for(var kt=o.querySelectorAll("link[data-precedence],style[data-precedence]"),Nt=0;Nt<kt.length;Nt++){var rr=kt[Nt];(rr.nodeName==="LINK"||rr.getAttribute("media")!=="not all")&&(ot.set(rr.dataset.precedence,rr),ht=rr)}ht&&ot.set(null,ht)}kt=P.instance,rr=kt.getAttribute("data-precedence"),Nt=ot.get(rr)||ht,Nt===ht&&ot.set(null,kt),ot.set(rr,kt),this.count++,ht=Ou.bind(this),kt.addEventListener("load",ht),kt.addEventListener("error",ht),Nt?Nt.parentNode.insertBefore(kt,Nt.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(kt,o.firstChild)),P.state.loading|=4}}var bl={$$typeof:nt,Provider:null,Consumer:null,_currentValue:Ht,_currentValue2:Ht,_threadCount:0};function Zm(o,P,ot,ht,kt,Nt,rr,pr){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wn(0),this.hiddenUpdates=wn(null),this.identifierPrefix=ht,this.onUncaughtError=kt,this.onCaughtError=Nt,this.onRecoverableError=rr,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=pr,this.incompleteTransitions=new Map}function Ap(o,P,ot,ht,kt,Nt,rr,pr,Or,rn,dn,yn){return o=new Zm(o,P,ot,rr,pr,Or,rn,yn),P=1,Nt===!0&&(P|=24),Nt=ca(3,null,null,P),o.current=Nt,Nt.stateNode=o,P=lc(),P.refCount++,o.pooledCache=P,P.refCount++,Nt.memoizedState={element:ht,isDehydrated:ot,cache:P},hc(Nt),o}function kp(o){return o?(o=cs,o):cs}function Cp(o,P,ot,ht,kt,Nt){kt=kp(kt),ht.context===null?ht.context=kt:ht.pendingContext=kt,ht=po(P),ht.payload={element:ot},Nt=Nt===void 0?null:Nt,Nt!==null&&(ht.callback=Nt),ot=mo(o,ht,P),ot!==null&&(ma(ot,o,P),Ws(ot,o,P))}function Op(o,P){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var ot=o.retryLane;o.retryLane=ot!==0&&ot<P?ot:P}}function kf(o,P){Op(o,P),(o=o.alternate)&&Op(o,P)}function Rp(o){if(o.tag===13){var P=us(o,67108864);P!==null&&ma(P,o,67108864),kf(o,67108864)}}var Du=!0;function Qm(o,P,ot,ht){var kt=Pt.T;Pt.T=null;var Nt=qt.p;try{qt.p=2,Cf(o,P,ot,ht)}finally{qt.p=Nt,Pt.T=kt}}function Jm(o,P,ot,ht){var kt=Pt.T;Pt.T=null;var Nt=qt.p;try{qt.p=8,Cf(o,P,ot,ht)}finally{qt.p=Nt,Pt.T=kt}}function Cf(o,P,ot,ht){if(Du){var kt=Of(ht);if(kt===null)yf(o,P,ht,Lu,ot),Lp(o,ht);else if(t0(kt,o,P,ot,ht))ht.stopPropagation();else if(Lp(o,ht),P&4&&-1<e0.indexOf(o)){for(;kt!==null;){var Nt=Jr(kt);if(Nt!==null)switch(Nt.tag){case 3:if(Nt=Nt.stateNode,Nt.current.memoizedState.isDehydrated){var rr=Tr(Nt.pendingLanes);if(rr!==0){var pr=Nt;for(pr.pendingLanes|=2,pr.entangledLanes|=2;rr;){var Or=1<<31-Ir(rr);pr.entanglements[1]|=Or,rr&=~Or}Fa(Nt),(ci&6)===0&&(yu=Sr()+500,hl(0))}}break;case 13:pr=us(Nt,2),pr!==null&&ma(pr,Nt,2),bu(),kf(Nt,2)}if(Nt=Of(ht),Nt===null&&yf(o,P,ht,Lu,ot),Nt===kt)break;kt=Nt}kt!==null&&ht.stopPropagation()}else yf(o,P,ht,null,ot)}}function Of(o){return o=Is(o),Rf(o)}var Lu=null;function Rf(o){if(Lu=null,o=pn(o),o!==null){var P=u(o);if(P===null)o=null;else{var ot=P.tag;if(ot===13){if(o=s(P),o!==null)return o;o=null}else if(ot===3){if(P.stateNode.current.memoizedState.isDehydrated)return P.tag===3?P.stateNode.containerInfo:null;o=null}else P!==o&&(o=null)}}return Lu=o,null}function Dp(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_r()){case sr:return 2;case jr:return 8;case Nr:case kr:return 32;case qr:return 268435456;default:return 32}default:return 32}}var Df=!1,Ao=null,ko=null,Co=null,xl=new Map,_l=new Map,Oo=[],e0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lp(o,P){switch(o){case"focusin":case"focusout":Ao=null;break;case"dragenter":case"dragleave":ko=null;break;case"mouseover":case"mouseout":Co=null;break;case"pointerover":case"pointerout":xl.delete(P.pointerId);break;case"gotpointercapture":case"lostpointercapture":_l.delete(P.pointerId)}}function wl(o,P,ot,ht,kt,Nt){return o===null||o.nativeEvent!==Nt?(o={blockedOn:P,domEventName:ot,eventSystemFlags:ht,nativeEvent:Nt,targetContainers:[kt]},P!==null&&(P=Jr(P),P!==null&&Rp(P)),o):(o.eventSystemFlags|=ht,P=o.targetContainers,kt!==null&&P.indexOf(kt)===-1&&P.push(kt),o)}function t0(o,P,ot,ht,kt){switch(P){case"focusin":return Ao=wl(Ao,o,P,ot,ht,kt),!0;case"dragenter":return ko=wl(ko,o,P,ot,ht,kt),!0;case"mouseover":return Co=wl(Co,o,P,ot,ht,kt),!0;case"pointerover":var Nt=kt.pointerId;return xl.set(Nt,wl(xl.get(Nt)||null,o,P,ot,ht,kt)),!0;case"gotpointercapture":return Nt=kt.pointerId,_l.set(Nt,wl(_l.get(Nt)||null,o,P,ot,ht,kt)),!0}return!1}function Ip(o){var P=pn(o.target);if(P!==null){var ot=u(P);if(ot!==null){if(P=ot.tag,P===13){if(P=s(ot),P!==null){o.blockedOn=P,jt(o.priority,function(){if(ot.tag===13){var ht=pa();ht=Mn(ht);var kt=us(ot,ht);kt!==null&&ma(kt,ot,ht),kf(ot,ht)}});return}}else if(P===3&&ot.stateNode.current.memoizedState.isDehydrated){o.blockedOn=ot.tag===3?ot.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Iu(o){if(o.blockedOn!==null)return!1;for(var P=o.targetContainers;0<P.length;){var ot=Of(o.nativeEvent);if(ot===null){ot=o.nativeEvent;var ht=new ot.constructor(ot.type,ot);ts=ht,ot.target.dispatchEvent(ht),ts=null}else return P=Jr(ot),P!==null&&Rp(P),o.blockedOn=ot,!1;P.shift()}return!0}function Pp(o,P,ot){Iu(o)&&ot.delete(P)}function r0(){Df=!1,Ao!==null&&Iu(Ao)&&(Ao=null),ko!==null&&Iu(ko)&&(ko=null),Co!==null&&Iu(Co)&&(Co=null),xl.forEach(Pp),_l.forEach(Pp)}function Pu(o,P){o.blockedOn===P&&(o.blockedOn=null,Df||(Df=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,r0)))}var Nu=null;function Np(o){Nu!==o&&(Nu=o,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Nu===o&&(Nu=null);for(var P=0;P<o.length;P+=3){var ot=o[P],ht=o[P+1],kt=o[P+2];if(typeof ht!="function"){if(Rf(ht||ot)===null)continue;break}var Nt=Jr(ot);Nt!==null&&(o.splice(P,3),P-=3,Oc(Nt,{pending:!0,data:kt,method:ot.method,action:ht},ht,kt))}}))}function Sl(o){function P(Or){return Pu(Or,o)}Ao!==null&&Pu(Ao,o),ko!==null&&Pu(ko,o),Co!==null&&Pu(Co,o),xl.forEach(P),_l.forEach(P);for(var ot=0;ot<Oo.length;ot++){var ht=Oo[ot];ht.blockedOn===o&&(ht.blockedOn=null)}for(;0<Oo.length&&(ot=Oo[0],ot.blockedOn===null);)Ip(ot),ot.blockedOn===null&&Oo.shift();if(ot=(o.ownerDocument||o).$$reactFormReplay,ot!=null)for(ht=0;ht<ot.length;ht+=3){var kt=ot[ht],Nt=ot[ht+1],rr=kt[Bt]||null;if(typeof Nt=="function")rr||Np(ot);else if(rr){var pr=null;if(Nt&&Nt.hasAttribute("formAction")){if(kt=Nt,rr=Nt[Bt]||null)pr=rr.formAction;else if(Rf(kt)!==null)continue}else pr=rr.action;typeof pr=="function"?ot[ht+1]=pr:(ot.splice(ht,3),ht-=3),Np(ot)}}}function Lf(o){this._internalRoot=o}Bu.prototype.render=Lf.prototype.render=function(o){var P=this._internalRoot;if(P===null)throw Error(t(409));var ot=P.current,ht=pa();Cp(ot,ht,o,P,null,null)},Bu.prototype.unmount=Lf.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var P=o.containerInfo;Cp(o.current,2,null,o,null,null),bu(),P[lr]=null}};function Bu(o){this._internalRoot=o}Bu.prototype.unstable_scheduleHydration=function(o){if(o){var P=Tt();o={blockedOn:null,target:o,priority:P};for(var ot=0;ot<Oo.length&&P!==0&&P<Oo[ot].priority;ot++);Oo.splice(ot,0,o),ot===0&&Ip(o)}};var Bp=a.version;if(Bp!=="19.1.0")throw Error(t(527,Bp,"19.1.0"));qt.findDOMNode=function(o){var P=o._reactInternals;if(P===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=d(P),o=o!==null?h(o):null,o=o===null?null:o.stateNode,o};var n0={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Pt,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fu.isDisabled&&Fu.supportsFiber)try{Xr=Fu.inject(n0),Gr=Fu}catch{}}return reactDomClient_production.createRoot=function(o,P){if(!l(o))throw Error(t(299));var ot=!1,ht="",kt=ed,Nt=td,rr=rd,pr=null;return P!=null&&(P.unstable_strictMode===!0&&(ot=!0),P.identifierPrefix!==void 0&&(ht=P.identifierPrefix),P.onUncaughtError!==void 0&&(kt=P.onUncaughtError),P.onCaughtError!==void 0&&(Nt=P.onCaughtError),P.onRecoverableError!==void 0&&(rr=P.onRecoverableError),P.unstable_transitionCallbacks!==void 0&&(pr=P.unstable_transitionCallbacks)),P=Ap(o,1,!1,null,null,ot,ht,kt,Nt,rr,pr,null),o[lr]=P.current,gf(o),new Lf(P)},reactDomClient_production.hydrateRoot=function(o,P,ot){if(!l(o))throw Error(t(299));var ht=!1,kt="",Nt=ed,rr=td,pr=rd,Or=null,rn=null;return ot!=null&&(ot.unstable_strictMode===!0&&(ht=!0),ot.identifierPrefix!==void 0&&(kt=ot.identifierPrefix),ot.onUncaughtError!==void 0&&(Nt=ot.onUncaughtError),ot.onCaughtError!==void 0&&(rr=ot.onCaughtError),ot.onRecoverableError!==void 0&&(pr=ot.onRecoverableError),ot.unstable_transitionCallbacks!==void 0&&(Or=ot.unstable_transitionCallbacks),ot.formState!==void 0&&(rn=ot.formState)),P=Ap(o,1,!0,P,ot??null,ht,kt,Nt,rr,pr,Or,rn),P.context=kp(null),ot=P.current,ht=pa(),ht=Mn(ht),kt=po(ht),kt.callback=null,mo(ot,kt,ht),ot=ht,P.current.lanes=ot,An(P,ot),Fa(P),o[lr]=P.current,gf(o),new Bu(P)},reactDomClient_production.version="19.1.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(a){console.error(a)}}return r(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const byteToHex=[];for(let r=0;r<256;++r)byteToHex.push((r+256).toString(16).slice(1));function unsafeStringify(r,a=0){return(byteToHex[r[a+0]]+byteToHex[r[a+1]]+byteToHex[r[a+2]]+byteToHex[r[a+3]]+"-"+byteToHex[r[a+4]]+byteToHex[r[a+5]]+"-"+byteToHex[r[a+6]]+byteToHex[r[a+7]]+"-"+byteToHex[r[a+8]]+byteToHex[r[a+9]]+"-"+byteToHex[r[a+10]]+byteToHex[r[a+11]]+byteToHex[r[a+12]]+byteToHex[r[a+13]]+byteToHex[r[a+14]]+byteToHex[r[a+15]]).toLowerCase()}let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");getRandomValues=crypto.getRandomValues.bind(crypto)}return getRandomValues(rnds8)}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(r,a,n){var l;if(native.randomUUID&&!r)return native.randomUUID();r=r||{};const t=r.random??((l=r.rng)==null?void 0:l.call(r))??rng();if(t.length<16)throw new Error("Random bytes length must be >= 16");return t[6]=t[6]&15|64,t[8]=t[8]&63|128,unsafeStringify(t)}function commonjsRequire(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var p5_min={exports:{}};/*! p5.js v1.11.8 June 05, 2025 */var hasRequiredP5_min;function requireP5_min(){return hasRequiredP5_min||(hasRequiredP5_min=1,function(r,a){(function(n){r.exports=n()})(function(){var n;return function t(l,u,s){function p(N,Be){if(!u[N]){if(!l[N]){var b=typeof commonjsRequire=="function"&&commonjsRequire;if(!Be&&b)return b(N,!0);if(d)return d(N,!0);throw(Be=new Error("Cannot find module '"+N+"'")).code="MODULE_NOT_FOUND",Be}b=u[N]={exports:{}},l[N][0].call(b.exports,function(E){return p(l[N][1][E]||E)},b,b.exports,t,l,u,s)}return u[N].exports}for(var d=typeof commonjsRequire=="function"&&commonjsRequire,h=0;h<s.length;h++)p(s[h]);return p}({1:[function(t,l,u){u.byteLength=function(pe){var pe=b(pe),de=pe[0],pe=pe[1];return 3*(de+pe)/4-pe},u.toByteArray=function(E){var de,pe,me=b(E),Ye=me[0],me=me[1],Le=new d(function(ft,yt){return 3*(ft+yt)/4-yt}(Ye,me)),nt=0,tt=0<me?Ye-4:Ye;for(pe=0;pe<tt;pe+=4)de=p[E.charCodeAt(pe)]<<18|p[E.charCodeAt(pe+1)]<<12|p[E.charCodeAt(pe+2)]<<6|p[E.charCodeAt(pe+3)],Le[nt++]=de>>16&255,Le[nt++]=de>>8&255,Le[nt++]=255&de;return me===2&&(de=p[E.charCodeAt(pe)]<<2|p[E.charCodeAt(pe+1)]>>4,Le[nt++]=255&de),me===1&&(de=p[E.charCodeAt(pe)]<<10|p[E.charCodeAt(pe+1)]<<4|p[E.charCodeAt(pe+2)]>>2,Le[nt++]=de>>8&255,Le[nt++]=255&de),Le},u.fromByteArray=function(E){for(var de,pe=E.length,Ye=pe%3,me=[],Le=0,nt=pe-Ye;Le<nt;Le+=16383)me.push(function(tt,ft,yt){for(var gt,mt=[],wt=ft;wt<yt;wt+=3)gt=(tt[wt]<<16&16711680)+(tt[wt+1]<<8&65280)+(255&tt[wt+2]),mt.push(function(St){return s[St>>18&63]+s[St>>12&63]+s[St>>6&63]+s[63&St]}(gt));return mt.join("")}(E,Le,nt<Le+16383?nt:Le+16383));return Ye==1?(de=E[pe-1],me.push(s[de>>2]+s[de<<4&63]+"==")):Ye==2&&(de=(E[pe-2]<<8)+E[pe-1],me.push(s[de>>10]+s[de>>4&63]+s[de<<2&63]+"=")),me.join("")};for(var s=[],p=[],d=typeof Uint8Array<"u"?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=0,Be=h.length;N<Be;++N)s[N]=h[N],p[h.charCodeAt(N)]=N;function b(E){var de=E.length;if(0<de%4)throw new Error("Invalid string. Length must be a multiple of 4");return E=E.indexOf("="),de=(E=E===-1?de:E)===de?0:4-E%4,[E,de]}p[45]=62,p[95]=63},{}],2:[function(t,l,u){},{}],3:[function(t,l,u){},{}],4:[function(t,l,u){(function(b){var p=t("base64-js"),d=t("ieee754"),h=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,N=(u.Buffer=b,u.SlowBuffer=function(vt){return+vt!=vt&&(vt=0),b.alloc(+vt)},u.INSPECT_MAX_BYTES=50,2147483647);function Be(vt){if(N<vt)throw new RangeError('The value "'+vt+'" is invalid for option "size"');return vt=new Uint8Array(vt),Object.setPrototypeOf(vt,b.prototype),vt}function b(vt,Rt,Lt){if(typeof vt!="number")return E(vt,Rt,Lt);if(typeof Rt=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return pe(vt)}function E(vt,Rt,Lt){if(typeof vt=="string"){var Vt=vt,Jt=Rt;if(b.isEncoding(Jt=typeof Jt=="string"&&Jt!==""?Jt:"utf8"))return er=0|Le(Vt,Jt),ur=Be(er),ur=(Vt=ur.write(Vt,Jt))!==er?ur.slice(0,Vt):ur;throw new TypeError("Unknown encoding: "+Jt)}if(ArrayBuffer.isView(vt))return Ye(vt);if(vt!=null){if(Ut(vt,ArrayBuffer)||vt&&Ut(vt.buffer,ArrayBuffer)){var er=vt,Vt=Rt,ur=Lt;if(Vt<0||er.byteLength<Vt)throw new RangeError('"offset" is outside of buffer bounds');if(er.byteLength<Vt+(ur||0))throw new RangeError('"length" is outside of buffer bounds');return er=Vt===void 0&&ur===void 0?new Uint8Array(er):ur===void 0?new Uint8Array(er,Vt):new Uint8Array(er,Vt,ur),Object.setPrototypeOf(er,b.prototype),er}if(typeof vt=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');if(Jt=vt.valueOf&&vt.valueOf(),Jt!=null&&Jt!==vt)return b.from(Jt,Rt,Lt);var yr=function(Qt){{var nr,or;if(b.isBuffer(Qt))return nr=0|me(Qt.length),(or=Be(nr)).length!==0&&Qt.copy(or,0,0,nr),or}if(Qt.length!==void 0)return typeof Qt.length!="number"||Yt(Qt.length)?Be(0):Ye(Qt);if(Qt.type==="Buffer"&&Array.isArray(Qt.data))return Ye(Qt.data)}(vt);if(yr)return yr;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof vt[Symbol.toPrimitive]=="function")return b.from(vt[Symbol.toPrimitive]("string"),Rt,Lt)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof vt)}function de(vt){if(typeof vt!="number")throw new TypeError('"size" argument must be of type number');if(vt<0)throw new RangeError('The value "'+vt+'" is invalid for option "size"')}function pe(vt){return de(vt),Be(vt<0?0:0|me(vt))}function Ye(vt){for(var Rt=vt.length<0?0:0|me(vt.length),Lt=Be(Rt),Vt=0;Vt<Rt;Vt+=1)Lt[Vt]=255&vt[Vt];return Lt}function me(vt){if(N<=vt)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+N.toString(16)+" bytes");return 0|vt}function Le(vt,Rt){if(b.isBuffer(vt))return vt.length;if(ArrayBuffer.isView(vt)||Ut(vt,ArrayBuffer))return vt.byteLength;if(typeof vt!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof vt);var Lt=vt.length,Vt=2<arguments.length&&arguments[2]===!0;if(!Vt&&Lt===0)return 0;for(var Jt=!1;;)switch(Rt){case"ascii":case"latin1":case"binary":return Lt;case"utf8":case"utf-8":return qt(vt).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Lt;case"hex":return Lt>>>1;case"base64":return Ht(vt).length;default:if(Jt)return Vt?-1:qt(vt).length;Rt=(""+Rt).toLowerCase(),Jt=!0}}function nt(vt,Rt,Lt){var Vt,Jt=!1;if((Rt=Rt===void 0||Rt<0?0:Rt)>this.length||(Lt=Lt===void 0||Lt>this.length?this.length:Lt)<=0||(Lt>>>=0)<=(Rt>>>=0))return"";for(vt=vt||"utf8";;)switch(vt){case"hex":var er=this,_r=Rt,ur=Lt,or=er.length;(!ur||ur<0||or<ur)&&(ur=or);for(var yr="",Qt=_r=!_r||_r<0?0:_r;Qt<ur;++Qt)yr+=Zt[er[Qt]];return yr;case"utf8":case"utf-8":return wt(this,Rt,Lt);case"ascii":var nr=this,or=Rt,Wt=Lt,ir="";Wt=Math.min(nr.length,Wt);for(var br=or;br<Wt;++br)ir+=String.fromCharCode(127&nr[br]);return ir;case"latin1":case"binary":var Sr=this,_r=Rt,sr=Lt,jr="";sr=Math.min(Sr.length,sr);for(var Nr=_r;Nr<sr;++Nr)jr+=String.fromCharCode(Sr[Nr]);return jr;case"base64":return kr=this,Vt=Lt,(qr=Rt)===0&&Vt===kr.length?p.fromByteArray(kr):p.fromByteArray(kr.slice(qr,Vt));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var kr=Rt,qr=Lt,Pr=this.slice(kr,qr),Vr="",Xr=0;Xr<Pr.length;Xr+=2)Vr+=String.fromCharCode(Pr[Xr]+256*Pr[Xr+1]);return Vr;default:if(Jt)throw new TypeError("Unknown encoding: "+vt);vt=(vt+"").toLowerCase(),Jt=!0}}function tt(vt,Rt,Lt){var Vt=vt[Rt];vt[Rt]=vt[Lt],vt[Lt]=Vt}function ft(vt,Rt,Lt,Vt,Jt){if(vt.length===0)return-1;if(typeof Lt=="string"?(Vt=Lt,Lt=0):2147483647<Lt?Lt=2147483647:Lt<-2147483648&&(Lt=-2147483648),(Lt=(Lt=Yt(Lt=+Lt)?Jt?0:vt.length-1:Lt)<0?vt.length+Lt:Lt)>=vt.length){if(Jt)return-1;Lt=vt.length-1}else if(Lt<0){if(!Jt)return-1;Lt=0}if(typeof Rt=="string"&&(Rt=b.from(Rt,Vt)),b.isBuffer(Rt))return Rt.length===0?-1:yt(vt,Rt,Lt,Vt,Jt);if(typeof Rt=="number")return Rt&=255,typeof Uint8Array.prototype.indexOf=="function"?(Jt?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(vt,Rt,Lt):yt(vt,[Rt],Lt,Vt,Jt);throw new TypeError("val must be string, number or Buffer")}function yt(vt,Rt,Lt,Vt,Jt){var er=1,ur=vt.length,yr=Rt.length;if(Vt!==void 0&&((Vt=String(Vt).toLowerCase())==="ucs2"||Vt==="ucs-2"||Vt==="utf16le"||Vt==="utf-16le")){if(vt.length<2||Rt.length<2)return-1;ur/=er=2,yr/=2,Lt/=2}function Qt(br,Sr){return er===1?br[Sr]:br.readUInt16BE(Sr*er)}if(Jt)for(var nr=-1,or=Lt;or<ur;or++)if(Qt(vt,or)===Qt(Rt,nr===-1?0:or-nr)){if(or-(nr=nr===-1?or:nr)+1===yr)return nr*er}else nr!==-1&&(or-=or-nr),nr=-1;else for(or=Lt=ur<Lt+yr?ur-yr:Lt;0<=or;or--){for(var Wt=!0,ir=0;ir<yr;ir++)if(Qt(vt,or+ir)!==Qt(Rt,ir)){Wt=!1;break}if(Wt)return or}return-1}function gt(vt,Rt,Lt,Vt){return Gt(function(Jt){for(var er=[],ur=0;ur<Jt.length;++ur)er.push(255&Jt.charCodeAt(ur));return er}(Rt),vt,Lt,Vt)}function mt(vt,Rt,Lt,Vt){return Gt(function(Jt,er){for(var ur,yr,Qt=[],nr=0;nr<Jt.length&&!((er-=2)<0);++nr)yr=Jt.charCodeAt(nr),ur=yr>>8,yr=yr%256,Qt.push(yr),Qt.push(ur);return Qt}(Rt,vt.length-Lt),vt,Lt,Vt)}function wt(vt,Rt,Lt){Lt=Math.min(vt.length,Lt);for(var Vt=[],Jt=Rt;Jt<Lt;){var er,ur,yr,Qt,nr=vt[Jt],or=null,Wt=239<nr?4:223<nr?3:191<nr?2:1;if(Jt+Wt<=Lt)switch(Wt){case 1:nr<128&&(or=nr);break;case 2:(192&(er=vt[Jt+1]))==128&&127<(Qt=(31&nr)<<6|63&er)&&(or=Qt);break;case 3:er=vt[Jt+1],ur=vt[Jt+2],(192&er)==128&&(192&ur)==128&&2047<(Qt=(15&nr)<<12|(63&er)<<6|63&ur)&&(Qt<55296||57343<Qt)&&(or=Qt);break;case 4:er=vt[Jt+1],ur=vt[Jt+2],yr=vt[Jt+3],(192&er)==128&&(192&ur)==128&&(192&yr)==128&&65535<(Qt=(15&nr)<<18|(63&er)<<12|(63&ur)<<6|63&yr)&&Qt<1114112&&(or=Qt)}or===null?(or=65533,Wt=1):65535<or&&(or-=65536,Vt.push(or>>>10&1023|55296),or=56320|1023&or),Vt.push(or),Jt+=Wt}var ir=Vt,br=ir.length;if(br<=St)return String.fromCharCode.apply(String,ir);for(var Sr="",_r=0;_r<br;)Sr+=String.fromCharCode.apply(String,ir.slice(_r,_r+=St));return Sr}u.kMaxLength=N,(b.TYPED_ARRAY_SUPPORT=function(){try{var vt=new Uint8Array(1),Rt={foo:function(){return 42}};return Object.setPrototypeOf(Rt,Uint8Array.prototype),Object.setPrototypeOf(vt,Rt),vt.foo()===42}catch{return!1}}())||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.buffer}}),Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&b[Symbol.species]===b&&Object.defineProperty(b,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),b.poolSize=8192,b.from=E,Object.setPrototypeOf(b.prototype,Uint8Array.prototype),Object.setPrototypeOf(b,Uint8Array),b.alloc=function(vt,Rt,Lt){return Rt=Rt,Lt=Lt,de(vt=vt),!(vt<=0)&&Rt!==void 0?typeof Lt=="string"?Be(vt).fill(Rt,Lt):Be(vt).fill(Rt):Be(vt)},b.allocUnsafe=pe,b.allocUnsafeSlow=pe,b.isBuffer=function(vt){return vt!=null&&vt._isBuffer===!0&&vt!==b.prototype},b.compare=function(vt,Rt){if(Ut(vt,Uint8Array)&&(vt=b.from(vt,vt.offset,vt.byteLength)),Ut(Rt,Uint8Array)&&(Rt=b.from(Rt,Rt.offset,Rt.byteLength)),!b.isBuffer(vt)||!b.isBuffer(Rt))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(vt===Rt)return 0;for(var Lt=vt.length,Vt=Rt.length,Jt=0,er=Math.min(Lt,Vt);Jt<er;++Jt)if(vt[Jt]!==Rt[Jt]){Lt=vt[Jt],Vt=Rt[Jt];break}return Lt<Vt?-1:Vt<Lt?1:0},b.isEncoding=function(vt){switch(String(vt).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.concat=function(vt,Rt){if(!Array.isArray(vt))throw new TypeError('"list" argument must be an Array of Buffers');if(vt.length===0)return b.alloc(0);if(Rt===void 0)for(Jt=Rt=0;Jt<vt.length;++Jt)Rt+=vt[Jt].length;for(var Lt=b.allocUnsafe(Rt),Vt=0,Jt=0;Jt<vt.length;++Jt){var er=vt[Jt];if(Ut(er,Uint8Array)&&(er=b.from(er)),!b.isBuffer(er))throw new TypeError('"list" argument must be an Array of Buffers');er.copy(Lt,Vt),Vt+=er.length}return Lt},b.byteLength=Le,b.prototype._isBuffer=!0,b.prototype.swap16=function(){var vt=this.length;if(vt%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Rt=0;Rt<vt;Rt+=2)tt(this,Rt,Rt+1);return this},b.prototype.swap32=function(){var vt=this.length;if(vt%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Rt=0;Rt<vt;Rt+=4)tt(this,Rt,Rt+3),tt(this,Rt+1,Rt+2);return this},b.prototype.swap64=function(){var vt=this.length;if(vt%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Rt=0;Rt<vt;Rt+=8)tt(this,Rt,Rt+7),tt(this,Rt+1,Rt+6),tt(this,Rt+2,Rt+5),tt(this,Rt+3,Rt+4);return this},b.prototype.toLocaleString=b.prototype.toString=function(){var vt=this.length;return vt===0?"":arguments.length===0?wt(this,0,vt):nt.apply(this,arguments)},b.prototype.equals=function(vt){if(b.isBuffer(vt))return this===vt||b.compare(this,vt)===0;throw new TypeError("Argument must be a Buffer")},b.prototype.inspect=function(){var Rt="",vt=u.INSPECT_MAX_BYTES,Rt=this.toString("hex",0,vt).replace(/(.{2})/g,"$1 ").trim();return this.length>vt&&(Rt+=" ... "),"<Buffer "+Rt+">"},h&&(b.prototype[h]=b.prototype.inspect),b.prototype.compare=function(vt,Rt,Lt,Vt,Jt){if(Ut(vt,Uint8Array)&&(vt=b.from(vt,vt.offset,vt.byteLength)),!b.isBuffer(vt))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof vt);if(Lt===void 0&&(Lt=vt?vt.length:0),Vt===void 0&&(Vt=0),Jt===void 0&&(Jt=this.length),(Rt=Rt===void 0?0:Rt)<0||Lt>vt.length||Vt<0||Jt>this.length)throw new RangeError("out of range index");if(Jt<=Vt&&Lt<=Rt)return 0;if(Jt<=Vt)return-1;if(Lt<=Rt)return 1;if(this===vt)return 0;for(var er=(Jt>>>=0)-(Vt>>>=0),ur=(Lt>>>=0)-(Rt>>>=0),yr=Math.min(er,ur),Qt=this.slice(Vt,Jt),nr=vt.slice(Rt,Lt),or=0;or<yr;++or)if(Qt[or]!==nr[or]){er=Qt[or],ur=nr[or];break}return er<ur?-1:ur<er?1:0},b.prototype.includes=function(vt,Rt,Lt){return this.indexOf(vt,Rt,Lt)!==-1},b.prototype.indexOf=function(vt,Rt,Lt){return ft(this,vt,Rt,Lt,!0)},b.prototype.lastIndexOf=function(vt,Rt,Lt){return ft(this,vt,Rt,Lt,!1)},b.prototype.write=function(vt,Rt,Lt,Vt){if(Rt===void 0)Vt="utf8",Lt=this.length,Rt=0;else if(Lt===void 0&&typeof Rt=="string")Vt=Rt,Lt=this.length,Rt=0;else{if(!isFinite(Rt))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");Rt>>>=0,isFinite(Lt)?(Lt>>>=0,Vt===void 0&&(Vt="utf8")):(Vt=Lt,Lt=void 0)}var Jt=this.length-Rt;if((Lt===void 0||Jt<Lt)&&(Lt=Jt),0<vt.length&&(Lt<0||Rt<0)||Rt>this.length)throw new RangeError("Attempt to write outside buffer bounds");Vt=Vt||"utf8";for(var er,ur,yr,Qt=!1;;)switch(Vt){case"hex":var nr=this,or=vt,Wt=Rt,ir=Lt,br=(Wt=Number(Wt)||0,nr.length-Wt);(!ir||br<(ir=Number(ir)))&&(ir=br),(br=or.length)/2<ir&&(ir=br/2);for(var Sr=0;Sr<ir;++Sr){var _r=parseInt(or.substr(2*Sr,2),16);if(Yt(_r))return Sr;nr[Wt+Sr]=_r}return Sr;case"utf8":case"utf-8":return br=Rt,yr=Lt,Gt(qt(vt,(ur=this).length-br),ur,br,yr);case"ascii":return gt(this,vt,Rt,Lt);case"latin1":case"binary":return gt(this,vt,Rt,Lt);case"base64":return ur=this,yr=Rt,er=Lt,Gt(Ht(vt),ur,yr,er);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return mt(this,vt,Rt,Lt);default:if(Qt)throw new TypeError("Unknown encoding: "+Vt);Vt=(""+Vt).toLowerCase(),Qt=!0}},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var St=4096;function bt(vt,Rt,Lt){if(vt%1!=0||vt<0)throw new RangeError("offset is not uint");if(Lt<vt+Rt)throw new RangeError("Trying to access beyond buffer length")}function Ct(vt,Rt,Lt,Vt,Jt,er){if(!b.isBuffer(vt))throw new TypeError('"buffer" argument must be a Buffer instance');if(Jt<Rt||Rt<er)throw new RangeError('"value" argument is out of bounds');if(Lt+Vt>vt.length)throw new RangeError("Index out of range")}function Et(vt,Rt,Lt,Vt){if(Lt+Vt>vt.length)throw new RangeError("Index out of range");if(Lt<0)throw new RangeError("Index out of range")}function It(vt,Rt,Lt,Vt,Jt){return Rt=+Rt,Lt>>>=0,Jt||Et(vt,0,Lt,4),d.write(vt,Rt,Lt,Vt,23,4),Lt+4}function Dt(vt,Rt,Lt,Vt,Jt){return Rt=+Rt,Lt>>>=0,Jt||Et(vt,0,Lt,8),d.write(vt,Rt,Lt,Vt,52,8),Lt+8}b.prototype.slice=function(vt,Rt){var Lt=this.length,Lt=((vt=~~vt)<0?(vt+=Lt)<0&&(vt=0):Lt<vt&&(vt=Lt),(Rt=Rt===void 0?Lt:~~Rt)<0?(Rt+=Lt)<0&&(Rt=0):Lt<Rt&&(Rt=Lt),Rt<vt&&(Rt=vt),this.subarray(vt,Rt));return Object.setPrototypeOf(Lt,b.prototype),Lt},b.prototype.readUIntLE=function(vt,Rt,Lt){vt>>>=0,Rt>>>=0,Lt||bt(vt,Rt,this.length);for(var Vt=this[vt],Jt=1,er=0;++er<Rt&&(Jt*=256);)Vt+=this[vt+er]*Jt;return Vt},b.prototype.readUIntBE=function(vt,Rt,Lt){vt>>>=0,Rt>>>=0,Lt||bt(vt,Rt,this.length);for(var Vt=this[vt+--Rt],Jt=1;0<Rt&&(Jt*=256);)Vt+=this[vt+--Rt]*Jt;return Vt},b.prototype.readUInt8=function(vt,Rt){return vt>>>=0,Rt||bt(vt,1,this.length),this[vt]},b.prototype.readUInt16LE=function(vt,Rt){return vt>>>=0,Rt||bt(vt,2,this.length),this[vt]|this[vt+1]<<8},b.prototype.readUInt16BE=function(vt,Rt){return vt>>>=0,Rt||bt(vt,2,this.length),this[vt]<<8|this[vt+1]},b.prototype.readUInt32LE=function(vt,Rt){return vt>>>=0,Rt||bt(vt,4,this.length),(this[vt]|this[vt+1]<<8|this[vt+2]<<16)+16777216*this[vt+3]},b.prototype.readUInt32BE=function(vt,Rt){return vt>>>=0,Rt||bt(vt,4,this.length),16777216*this[vt]+(this[vt+1]<<16|this[vt+2]<<8|this[vt+3])},b.prototype.readIntLE=function(vt,Rt,Lt){vt>>>=0,Rt>>>=0,Lt||bt(vt,Rt,this.length);for(var Vt=this[vt],Jt=1,er=0;++er<Rt&&(Jt*=256);)Vt+=this[vt+er]*Jt;return(Jt*=128)<=Vt&&(Vt-=Math.pow(2,8*Rt)),Vt},b.prototype.readIntBE=function(vt,Rt,Lt){vt>>>=0,Rt>>>=0,Lt||bt(vt,Rt,this.length);for(var Vt=Rt,Jt=1,er=this[vt+--Vt];0<Vt&&(Jt*=256);)er+=this[vt+--Vt]*Jt;return(Jt*=128)<=er&&(er-=Math.pow(2,8*Rt)),er},b.prototype.readInt8=function(vt,Rt){return vt>>>=0,Rt||bt(vt,1,this.length),128&this[vt]?-1*(255-this[vt]+1):this[vt]},b.prototype.readInt16LE=function(vt,Rt){return vt>>>=0,Rt||bt(vt,2,this.length),Rt=this[vt]|this[vt+1]<<8,32768&Rt?4294901760|Rt:Rt},b.prototype.readInt16BE=function(vt,Rt){return vt>>>=0,Rt||bt(vt,2,this.length),Rt=this[vt+1]|this[vt]<<8,32768&Rt?4294901760|Rt:Rt},b.prototype.readInt32LE=function(vt,Rt){return vt>>>=0,Rt||bt(vt,4,this.length),this[vt]|this[vt+1]<<8|this[vt+2]<<16|this[vt+3]<<24},b.prototype.readInt32BE=function(vt,Rt){return vt>>>=0,Rt||bt(vt,4,this.length),this[vt]<<24|this[vt+1]<<16|this[vt+2]<<8|this[vt+3]},b.prototype.readFloatLE=function(vt,Rt){return vt>>>=0,Rt||bt(vt,4,this.length),d.read(this,vt,!0,23,4)},b.prototype.readFloatBE=function(vt,Rt){return vt>>>=0,Rt||bt(vt,4,this.length),d.read(this,vt,!1,23,4)},b.prototype.readDoubleLE=function(vt,Rt){return vt>>>=0,Rt||bt(vt,8,this.length),d.read(this,vt,!0,52,8)},b.prototype.readDoubleBE=function(vt,Rt){return vt>>>=0,Rt||bt(vt,8,this.length),d.read(this,vt,!1,52,8)},b.prototype.writeUIntLE=function(vt,Rt,Lt,Vt){vt=+vt,Rt>>>=0,Lt>>>=0,Vt||Ct(this,vt,Rt,Lt,Math.pow(2,8*Lt)-1,0);var Jt=1,er=0;for(this[Rt]=255&vt;++er<Lt&&(Jt*=256);)this[Rt+er]=vt/Jt&255;return Rt+Lt},b.prototype.writeUIntBE=function(vt,Rt,Lt,Vt){vt=+vt,Rt>>>=0,Lt>>>=0,Vt||Ct(this,vt,Rt,Lt,Math.pow(2,8*Lt)-1,0);var Jt=Lt-1,er=1;for(this[Rt+Jt]=255&vt;0<=--Jt&&(er*=256);)this[Rt+Jt]=vt/er&255;return Rt+Lt},b.prototype.writeUInt8=function(vt,Rt,Lt){return vt=+vt,Rt>>>=0,Lt||Ct(this,vt,Rt,1,255,0),this[Rt]=255&vt,Rt+1},b.prototype.writeUInt16LE=function(vt,Rt,Lt){return vt=+vt,Rt>>>=0,Lt||Ct(this,vt,Rt,2,65535,0),this[Rt]=255&vt,this[Rt+1]=vt>>>8,Rt+2},b.prototype.writeUInt16BE=function(vt,Rt,Lt){return vt=+vt,Rt>>>=0,Lt||Ct(this,vt,Rt,2,65535,0),this[Rt]=vt>>>8,this[Rt+1]=255&vt,Rt+2},b.prototype.writeUInt32LE=function(vt,Rt,Lt){return vt=+vt,Rt>>>=0,Lt||Ct(this,vt,Rt,4,4294967295,0),this[Rt+3]=vt>>>24,this[Rt+2]=vt>>>16,this[Rt+1]=vt>>>8,this[Rt]=255&vt,Rt+4},b.prototype.writeUInt32BE=function(vt,Rt,Lt){return vt=+vt,Rt>>>=0,Lt||Ct(this,vt,Rt,4,4294967295,0),this[Rt]=vt>>>24,this[Rt+1]=vt>>>16,this[Rt+2]=vt>>>8,this[Rt+3]=255&vt,Rt+4},b.prototype.writeIntLE=function(vt,Rt,Lt,Vt){vt=+vt,Rt>>>=0,Vt||Ct(this,vt,Rt,Lt,(Vt=Math.pow(2,8*Lt-1))-1,-Vt);var Jt=0,er=1,ur=0;for(this[Rt]=255&vt;++Jt<Lt&&(er*=256);)vt<0&&ur===0&&this[Rt+Jt-1]!==0&&(ur=1),this[Rt+Jt]=(vt/er>>0)-ur&255;return Rt+Lt},b.prototype.writeIntBE=function(vt,Rt,Lt,Vt){vt=+vt,Rt>>>=0,Vt||Ct(this,vt,Rt,Lt,(Vt=Math.pow(2,8*Lt-1))-1,-Vt);var Jt=Lt-1,er=1,ur=0;for(this[Rt+Jt]=255&vt;0<=--Jt&&(er*=256);)vt<0&&ur===0&&this[Rt+Jt+1]!==0&&(ur=1),this[Rt+Jt]=(vt/er>>0)-ur&255;return Rt+Lt},b.prototype.writeInt8=function(vt,Rt,Lt){return vt=+vt,Rt>>>=0,Lt||Ct(this,vt,Rt,1,127,-128),this[Rt]=255&(vt=vt<0?255+vt+1:vt),Rt+1},b.prototype.writeInt16LE=function(vt,Rt,Lt){return vt=+vt,Rt>>>=0,Lt||Ct(this,vt,Rt,2,32767,-32768),this[Rt]=255&vt,this[Rt+1]=vt>>>8,Rt+2},b.prototype.writeInt16BE=function(vt,Rt,Lt){return vt=+vt,Rt>>>=0,Lt||Ct(this,vt,Rt,2,32767,-32768),this[Rt]=vt>>>8,this[Rt+1]=255&vt,Rt+2},b.prototype.writeInt32LE=function(vt,Rt,Lt){return vt=+vt,Rt>>>=0,Lt||Ct(this,vt,Rt,4,2147483647,-2147483648),this[Rt]=255&vt,this[Rt+1]=vt>>>8,this[Rt+2]=vt>>>16,this[Rt+3]=vt>>>24,Rt+4},b.prototype.writeInt32BE=function(vt,Rt,Lt){return vt=+vt,Rt>>>=0,Lt||Ct(this,vt,Rt,4,2147483647,-2147483648),this[Rt]=(vt=vt<0?4294967295+vt+1:vt)>>>24,this[Rt+1]=vt>>>16,this[Rt+2]=vt>>>8,this[Rt+3]=255&vt,Rt+4},b.prototype.writeFloatLE=function(vt,Rt,Lt){return It(this,vt,Rt,!0,Lt)},b.prototype.writeFloatBE=function(vt,Rt,Lt){return It(this,vt,Rt,!1,Lt)},b.prototype.writeDoubleLE=function(vt,Rt,Lt){return Dt(this,vt,Rt,!0,Lt)},b.prototype.writeDoubleBE=function(vt,Rt,Lt){return Dt(this,vt,Rt,!1,Lt)},b.prototype.copy=function(vt,Rt,Lt,Vt){if(!b.isBuffer(vt))throw new TypeError("argument should be a Buffer");if(Lt=Lt||0,Vt||Vt===0||(Vt=this.length),Rt>=vt.length&&(Rt=vt.length),(Vt=0<Vt&&Vt<Lt?Lt:Vt)===Lt||vt.length===0||this.length===0)return 0;if((Rt=Rt||0)<0)throw new RangeError("targetStart out of bounds");if(Lt<0||Lt>=this.length)throw new RangeError("Index out of range");if(Vt<0)throw new RangeError("sourceEnd out of bounds");Vt>this.length&&(Vt=this.length);var Jt=(Vt=vt.length-Rt<Vt-Lt?vt.length-Rt+Lt:Vt)-Lt;if(this===vt&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(Rt,Lt,Vt);else if(this===vt&&Lt<Rt&&Rt<Vt)for(var er=Jt-1;0<=er;--er)vt[er+Rt]=this[er+Lt];else Uint8Array.prototype.set.call(vt,this.subarray(Lt,Vt),Rt);return Jt},b.prototype.fill=function(vt,Rt,Lt,Vt){if(typeof vt=="string"){if(typeof Rt=="string"?(Vt=Rt,Rt=0,Lt=this.length):typeof Lt=="string"&&(Vt=Lt,Lt=this.length),Vt!==void 0&&typeof Vt!="string")throw new TypeError("encoding must be a string");if(typeof Vt=="string"&&!b.isEncoding(Vt))throw new TypeError("Unknown encoding: "+Vt);var Jt;vt.length===1&&(Jt=vt.charCodeAt(0),(Vt==="utf8"&&Jt<128||Vt==="latin1")&&(vt=Jt))}else typeof vt=="number"?vt&=255:typeof vt=="boolean"&&(vt=Number(vt));if(Rt<0||this.length<Rt||this.length<Lt)throw new RangeError("Out of range index");var er;if(!(Lt<=Rt))if(Rt>>>=0,Lt=Lt===void 0?this.length:Lt>>>0,typeof(vt=vt||0)=="number")for(er=Rt;er<Lt;++er)this[er]=vt;else{var ur=b.isBuffer(vt)?vt:b.from(vt,Vt),yr=ur.length;if(yr===0)throw new TypeError('The value "'+vt+'" is invalid for argument "value"');for(er=0;er<Lt-Rt;++er)this[er+Rt]=ur[er%yr]}return this};var Pt=/[^+/0-9A-Za-z-_]/g;function qt(vt,Rt){Rt=Rt||1/0;for(var Lt,Vt=vt.length,Jt=null,er=[],ur=0;ur<Vt;++ur){if(55295<(Lt=vt.charCodeAt(ur))&&Lt<57344){if(!Jt){if(56319<Lt){-1<(Rt-=3)&&er.push(239,191,189);continue}if(ur+1===Vt){-1<(Rt-=3)&&er.push(239,191,189);continue}Jt=Lt;continue}if(Lt<56320){-1<(Rt-=3)&&er.push(239,191,189),Jt=Lt;continue}Lt=65536+(Jt-55296<<10|Lt-56320)}else Jt&&-1<(Rt-=3)&&er.push(239,191,189);if(Jt=null,Lt<128){if(--Rt<0)break;er.push(Lt)}else if(Lt<2048){if((Rt-=2)<0)break;er.push(Lt>>6|192,63&Lt|128)}else if(Lt<65536){if((Rt-=3)<0)break;er.push(Lt>>12|224,Lt>>6&63|128,63&Lt|128)}else{if(!(Lt<1114112))throw new Error("Invalid code point");if((Rt-=4)<0)break;er.push(Lt>>18|240,Lt>>12&63|128,Lt>>6&63|128,63&Lt|128)}}return er}function Ht(vt){return p.toByteArray(function(Rt){if((Rt=(Rt=Rt.split("=")[0]).trim().replace(Pt,"")).length<2)return"";for(;Rt.length%4!=0;)Rt+="=";return Rt}(vt))}function Gt(vt,Rt,Lt,Vt){for(var Jt=0;Jt<Vt&&!(Jt+Lt>=Rt.length||Jt>=vt.length);++Jt)Rt[Jt+Lt]=vt[Jt];return Jt}function Ut(vt,Rt){return vt instanceof Rt||vt!=null&&vt.constructor!=null&&vt.constructor.name!=null&&vt.constructor.name===Rt.name}function Yt(vt){return vt!=vt}var Zt=function(){for(var vt="0123456789abcdef",Rt=new Array(256),Lt=0;Lt<16;++Lt)for(var Vt=16*Lt,Jt=0;Jt<16;++Jt)Rt[Vt+Jt]=vt[Lt]+vt[Jt];return Rt}()}).call(this,t("buffer").Buffer)},{"base64-js":1,buffer:4,ieee754:254}],5:[function(t,l,u){l.exports=function(s){if(typeof s!="function")throw TypeError(String(s)+" is not a function");return s}},{}],6:[function(t,l,u){var s=t("../internals/is-object");l.exports=function(p){if(s(p)||p===null)return p;throw TypeError("Can't set "+String(p)+" as a prototype")}},{"../internals/is-object":75}],7:[function(d,l,u){var s=d("../internals/well-known-symbol"),p=d("../internals/object-create"),d=d("../internals/object-define-property"),h=s("unscopables"),N=Array.prototype;N[h]==null&&d.f(N,h,{configurable:!0,value:p(null)}),l.exports=function(Be){N[h][Be]=!0}},{"../internals/object-create":91,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],8:[function(t,l,u){var s=t("../internals/string-multibyte").charAt;l.exports=function(p,d,h){return d+(h?s(p,d).length:1)}},{"../internals/string-multibyte":125}],9:[function(t,l,u){l.exports=function(s,p,d){if(s instanceof p)return s;throw TypeError("Incorrect "+(d?d+" ":"")+"invocation")}},{}],10:[function(t,l,u){var s=t("../internals/is-object");l.exports=function(p){if(s(p))return p;throw TypeError(String(p)+" is not an object")}},{"../internals/is-object":75}],11:[function(t,l,u){l.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},{}],12:[function(Et,l,u){function s(Dt){return Be(Dt)&&b(It,E(Dt))}var p,d=Et("../internals/array-buffer-native"),h=Et("../internals/descriptors"),N=Et("../internals/global"),Be=Et("../internals/is-object"),b=Et("../internals/has"),E=Et("../internals/classof"),de=Et("../internals/create-non-enumerable-property"),pe=Et("../internals/redefine"),Ye=Et("../internals/object-define-property").f,me=Et("../internals/object-get-prototype-of"),Le=Et("../internals/object-set-prototype-of"),St=Et("../internals/well-known-symbol"),Et=Et("../internals/uid"),nt=N.Int8Array,tt=nt&&nt.prototype,ft=N.Uint8ClampedArray,ft=ft&&ft.prototype,yt=nt&&me(nt),gt=tt&&me(tt),mt=Object.prototype,wt=mt.isPrototypeOf,St=St("toStringTag"),bt=Et("TYPED_ARRAY_TAG"),Ct=d&&!!Le&&E(N.opera)!=="Opera",Et=!1,It={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(p in It)N[p]||(Ct=!1);if((!Ct||typeof yt!="function"||yt===Function.prototype)&&(yt=function(){throw TypeError("Incorrect invocation")},Ct))for(p in It)N[p]&&Le(N[p],yt);if((!Ct||!gt||gt===mt)&&(gt=yt.prototype,Ct))for(p in It)N[p]&&Le(N[p].prototype,gt);if(Ct&&me(ft)!==gt&&Le(ft,gt),h&&!b(gt,St))for(p in Et=!0,Ye(gt,St,{get:function(){return Be(this)?this[bt]:void 0}}),It)N[p]&&de(N[p],bt,p);l.exports={NATIVE_ARRAY_BUFFER_VIEWS:Ct,TYPED_ARRAY_TAG:Et&&bt,aTypedArray:function(Dt){if(s(Dt))return Dt;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(Dt){if(Le){if(wt.call(yt,Dt))return Dt}else for(var Pt in It)if(b(It,p)&&(Pt=N[Pt],Pt&&(Dt===Pt||wt.call(Pt,Dt))))return Dt;throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(Dt,Pt,qt){if(h){if(qt)for(var Ht in It)Ht=N[Ht],Ht&&b(Ht.prototype,Dt)&&delete Ht.prototype[Dt];gt[Dt]&&!qt||pe(gt,Dt,!qt&&Ct&&tt[Dt]||Pt)}},exportTypedArrayStaticMethod:function(Dt,Pt,qt){var Ht,Gt;if(h){if(Le){if(qt)for(Ht in It)(Gt=N[Ht])&&b(Gt,Dt)&&delete Gt[Dt];if(yt[Dt]&&!qt)return;try{return pe(yt,Dt,!qt&&Ct&&nt[Dt]||Pt)}catch{}}for(Ht in It)!(Gt=N[Ht])||Gt[Dt]&&!qt||pe(Gt,Dt,Pt)}},isView:function(Dt){return Dt=E(Dt),Dt==="DataView"||b(It,Dt)},isTypedArray:s,TypedArray:yt,TypedArrayPrototype:gt}},{"../internals/array-buffer-native":11,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":110,"../internals/uid":147,"../internals/well-known-symbol":150}],13:[function(Lt,l,u){function s(Wt){return[255&Wt]}function p(Wt){return[255&Wt,Wt>>8&255]}function d(Wt){return[255&Wt,Wt>>8&255,Wt>>16&255,Wt>>24&255]}function h(Wt){return Wt[3]<<24|Wt[2]<<16|Wt[1]<<8|Wt[0]}function N(Wt){return er(Wt,23,4)}function Be(Wt){return er(Wt,52,8)}function b(Wt,ir){Et(Wt[Ut],ir,{get:function(){return Pt(this)[ir]}})}function E(jr,ir,sr,Sr){if(sr=mt(sr),jr=Pt(jr),sr+ir>jr.byteLength)throw Jt(Yt);var _r=Pt(jr.buffer).bytes,sr=sr+jr.byteOffset,jr=_r.slice(sr,sr+ir);return Sr?jr:jr.reverse()}function de(Wt,ir,br,Sr,_r,sr){if(br=mt(br),Wt=Pt(Wt),br+ir>Wt.byteLength)throw Jt(Yt);for(var jr=Pt(Wt.buffer).bytes,Nr=br+Wt.byteOffset,kr=Sr(+_r),qr=0;qr<ir;qr++)jr[Nr+qr]=kr[sr?qr:ir-qr-1]}var pe=Lt("../internals/global"),Ye=Lt("../internals/descriptors"),me=Lt("../internals/array-buffer-native"),Le=Lt("../internals/create-non-enumerable-property"),nt=Lt("../internals/redefine-all"),tt=Lt("../internals/fails"),ft=Lt("../internals/an-instance"),yt=Lt("../internals/to-integer"),gt=Lt("../internals/to-length"),mt=Lt("../internals/to-index"),wt=Lt("../internals/ieee754"),St=Lt("../internals/object-get-prototype-of"),bt=Lt("../internals/object-set-prototype-of"),Ct=Lt("../internals/object-get-own-property-names").f,Et=Lt("../internals/object-define-property").f,It=Lt("../internals/array-fill"),Dt=Lt("../internals/set-to-string-tag"),Lt=Lt("../internals/internal-state"),Pt=Lt.get,qt=Lt.set,Ht="ArrayBuffer",Gt="DataView",Ut="prototype",Yt="Wrong index",Zt=pe[Ht],vt=Zt,Rt=pe[Gt],Lt=Rt&&Rt[Ut],Vt=Object.prototype,Jt=pe.RangeError,er=wt.pack,ur=wt.unpack;if(me){if(!tt(function(){Zt(1)})||!tt(function(){new Zt(-1)})||tt(function(){return new Zt,new Zt(1.5),new Zt(NaN),Zt.name!=Ht})){for(var yr,pe=(vt=function(br){return ft(this,vt),new Zt(mt(br))})[Ut]=Zt[Ut],Qt=Ct(Zt),nr=0;Qt.length>nr;)(yr=Qt[nr++])in vt||Le(vt,yr,Zt[yr]);pe.constructor=vt}bt&&St(Lt)!==Vt&&bt(Lt,Vt);var wt=new Rt(new vt(2)),or=Lt.setInt8;wt.setInt8(0,2147483648),wt.setInt8(1,2147483649),!wt.getInt8(0)&&wt.getInt8(1)||nt(Lt,{setInt8:function(ir,br){or.call(this,ir,br<<24>>24)},setUint8:function(ir,br){or.call(this,ir,br<<24>>24)}},{unsafe:!0})}else vt=function(Wt){ft(this,vt,Ht),Wt=mt(Wt),qt(this,{bytes:It.call(new Array(Wt),0),byteLength:Wt}),Ye||(this.byteLength=Wt)},Rt=function(Wt,_r,br){ft(this,Rt,Gt),ft(Wt,vt,Gt);var Sr=Pt(Wt).byteLength,_r=yt(_r);if(_r<0||Sr<_r)throw Jt("Wrong offset");if(Sr<_r+(br=br===void 0?Sr-_r:gt(br)))throw Jt("Wrong length");qt(this,{buffer:Wt,byteLength:br,byteOffset:_r}),Ye||(this.buffer=Wt,this.byteLength=br,this.byteOffset=_r)},Ye&&(b(vt,"byteLength"),b(Rt,"buffer"),b(Rt,"byteLength"),b(Rt,"byteOffset")),nt(Rt[Ut],{getInt8:function(Wt){return E(this,1,Wt)[0]<<24>>24},getUint8:function(Wt){return E(this,1,Wt)[0]},getInt16:function(Wt){return Wt=E(this,2,Wt,1<arguments.length?arguments[1]:void 0),(Wt[1]<<8|Wt[0])<<16>>16},getUint16:function(Wt){return Wt=E(this,2,Wt,1<arguments.length?arguments[1]:void 0),Wt[1]<<8|Wt[0]},getInt32:function(Wt){return h(E(this,4,Wt,1<arguments.length?arguments[1]:void 0))},getUint32:function(Wt){return h(E(this,4,Wt,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(Wt){return ur(E(this,4,Wt,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(Wt){return ur(E(this,8,Wt,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(Wt,ir){de(this,1,Wt,s,ir)},setUint8:function(Wt,ir){de(this,1,Wt,s,ir)},setInt16:function(Wt,ir){de(this,2,Wt,p,ir,2<arguments.length?arguments[2]:void 0)},setUint16:function(Wt,ir){de(this,2,Wt,p,ir,2<arguments.length?arguments[2]:void 0)},setInt32:function(Wt,ir){de(this,4,Wt,d,ir,2<arguments.length?arguments[2]:void 0)},setUint32:function(Wt,ir){de(this,4,Wt,d,ir,2<arguments.length?arguments[2]:void 0)},setFloat32:function(Wt,ir){de(this,4,Wt,N,ir,2<arguments.length?arguments[2]:void 0)},setFloat64:function(Wt,ir){de(this,8,Wt,Be,ir,2<arguments.length?arguments[2]:void 0)}});Dt(vt,Ht),Dt(Rt,Gt),l.exports={ArrayBuffer:vt,DataView:Rt}},{"../internals/an-instance":9,"../internals/array-buffer-native":11,"../internals/array-fill":15,"../internals/create-non-enumerable-property":38,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/ieee754":66,"../internals/internal-state":71,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine-all":109,"../internals/set-to-string-tag":119,"../internals/to-index":135,"../internals/to-integer":137,"../internals/to-length":138}],14:[function(t,l,u){var s=t("../internals/to-object"),p=t("../internals/to-absolute-index"),d=t("../internals/to-length"),h=Math.min;l.exports=[].copyWithin||function(Ye,Be){var b=s(this),E=d(b.length),de=p(Ye,E),pe=p(Be,E),Ye=2<arguments.length?arguments[2]:void 0,me=h((Ye===void 0?E:p(Ye,E))-pe,E-de),Le=1;for(pe<de&&de<pe+me&&(Le=-1,pe+=me-1,de+=me-1);0<me--;)pe in b?b[de]=b[pe]:delete b[de],de+=Le,pe+=Le;return b}},{"../internals/to-absolute-index":134,"../internals/to-length":138,"../internals/to-object":139}],15:[function(t,l,u){var s=t("../internals/to-object"),p=t("../internals/to-absolute-index"),d=t("../internals/to-length");l.exports=function(h){for(var N=s(this),Be=d(N.length),E=arguments.length,b=p(1<E?arguments[1]:void 0,Be),E=2<E?arguments[2]:void 0,de=E===void 0?Be:p(E,Be);b<de;)N[b++]=h;return N}},{"../internals/to-absolute-index":134,"../internals/to-length":138,"../internals/to-object":139}],16:[function(d,l,u){var s=d("../internals/array-iteration").forEach,p=d("../internals/array-method-is-strict"),d=d("../internals/array-method-uses-to-length"),p=p("forEach"),d=d("forEach");l.exports=p&&d?[].forEach:function(h){return s(this,h,1<arguments.length?arguments[1]:void 0)}},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23}],17:[function(t,l,u){var s=t("../internals/function-bind-context"),p=t("../internals/to-object"),d=t("../internals/call-with-safe-iteration-closing"),h=t("../internals/is-array-iterator-method"),N=t("../internals/to-length"),Be=t("../internals/create-property"),b=t("../internals/get-iterator-method");l.exports=function(ft){var de,pe,Ye,me,Le,nt,tt=p(ft),ft=typeof this=="function"?this:Array,yt=arguments.length,gt=1<yt?arguments[1]:void 0,mt=gt!==void 0,wt=b(tt),St=0;if(mt&&(gt=s(gt,2<yt?arguments[2]:void 0,2)),wt==null||ft==Array&&h(wt))for(pe=new ft(de=N(tt.length));St<de;St++)nt=mt?gt(tt[St],St):tt[St],Be(pe,St,nt);else for(Le=(me=wt.call(tt)).next,pe=new ft;!(Ye=Le.call(me)).done;St++)nt=mt?d(me,gt,[Ye.value,St],!0):Ye.value,Be(pe,St,nt);return pe.length=St,pe}},{"../internals/call-with-safe-iteration-closing":26,"../internals/create-property":40,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138,"../internals/to-object":139}],18:[function(t,l,u){function s(N){return function(Be,b,E){var de,pe=p(Be),Ye=d(pe.length),me=h(E,Ye);if(N&&b!=b){for(;me<Ye;)if((de=pe[me++])!=de)return!0}else for(;me<Ye;me++)if((N||me in pe)&&pe[me]===b)return N||me||0;return!N&&-1}}var p=t("../internals/to-indexed-object"),d=t("../internals/to-length"),h=t("../internals/to-absolute-index");l.exports={includes:s(!0),indexOf:s(!1)}},{"../internals/to-absolute-index":134,"../internals/to-indexed-object":136,"../internals/to-length":138}],19:[function(t,l,u){function s(E){var de=E==1,pe=E==2,Ye=E==3,me=E==4,Le=E==6,nt=E==5||Le;return function(tt,ft,yt,gt){for(var mt,wt,St=h(tt),bt=d(St),Ct=p(ft,yt,3),Et=N(bt.length),It=0,ft=gt||Be,Dt=de?ft(tt,Et):pe?ft(tt,0):void 0;It<Et;It++)if((nt||It in bt)&&(wt=Ct(mt=bt[It],It,St),E)){if(de)Dt[It]=wt;else if(wt)switch(E){case 3:return!0;case 5:return mt;case 6:return It;case 2:b.call(Dt,mt)}else if(me)return!1}return Le?-1:Ye||me?me:Dt}}var p=t("../internals/function-bind-context"),d=t("../internals/indexed-object"),h=t("../internals/to-object"),N=t("../internals/to-length"),Be=t("../internals/array-species-create"),b=[].push;l.exports={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6)}},{"../internals/array-species-create":25,"../internals/function-bind-context":55,"../internals/indexed-object":67,"../internals/to-length":138,"../internals/to-object":139}],20:[function(E,l,u){var s=E("../internals/to-indexed-object"),p=E("../internals/to-integer"),d=E("../internals/to-length"),b=E("../internals/array-method-is-strict"),E=E("../internals/array-method-uses-to-length"),h=Math.min,N=[].lastIndexOf,Be=!!N&&1/[1].lastIndexOf(1,-0)<0,b=b("lastIndexOf"),E=E("indexOf",{ACCESSORS:!0,1:0});l.exports=Be||!b||!E?function(de){if(Be)return N.apply(this,arguments)||0;var pe=s(this),Ye=d(pe.length),me=Ye-1;for((me=1<arguments.length?h(me,p(arguments[1])):me)<0&&(me=Ye+me);0<=me;me--)if(me in pe&&pe[me]===de)return me||0;return-1}:N},{"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/to-indexed-object":136,"../internals/to-integer":137,"../internals/to-length":138}],21:[function(t,l,u){var s=t("../internals/fails"),p=t("../internals/well-known-symbol"),d=t("../internals/engine-v8-version"),h=p("species");l.exports=function(N){return 51<=d||!s(function(){var Be=[];return(Be.constructor={})[h]=function(){return{foo:1}},Be[N](Boolean).foo!==1})}},{"../internals/engine-v8-version":48,"../internals/fails":51,"../internals/well-known-symbol":150}],22:[function(t,l,u){var s=t("../internals/fails");l.exports=function(p,d){var h=[][p];return!!h&&s(function(){h.call(null,d||function(){throw 1},1)})}},{"../internals/fails":51}],23:[function(t,l,u){function s(b){throw b}var p=t("../internals/descriptors"),d=t("../internals/fails"),h=t("../internals/has"),N=Object.defineProperty,Be={};l.exports=function(b,E){var de,pe,Ye,me;return h(Be,b)?Be[b]:(de=[][b],pe=!!h(E=E||{},"ACCESSORS")&&E.ACCESSORS,Ye=h(E,0)?E[0]:s,me=h(E,1)?E[1]:void 0,Be[b]=!!de&&!d(function(){if(pe&&!p)return!0;var Le={length:-1};pe?N(Le,1,{enumerable:!0,get:s}):Le[1]=1,de.call(Le,Ye,me)}))}},{"../internals/descriptors":43,"../internals/fails":51,"../internals/has":61}],24:[function(t,l,u){function s(Be){return function(b,E,de,pe){p(E);var Ye=d(b),me=h(Ye),Le=N(Ye.length),nt=Be?Le-1:0,tt=Be?-1:1;if(de<2)for(;;){if(nt in me){pe=me[nt],nt+=tt;break}if(nt+=tt,Be?nt<0:Le<=nt)throw TypeError("Reduce of empty array with no initial value")}for(;Be?0<=nt:nt<Le;nt+=tt)nt in me&&(pe=E(pe,me[nt],nt,Ye));return pe}}var p=t("../internals/a-function"),d=t("../internals/to-object"),h=t("../internals/indexed-object"),N=t("../internals/to-length");l.exports={left:s(!1),right:s(!0)}},{"../internals/a-function":5,"../internals/indexed-object":67,"../internals/to-length":138,"../internals/to-object":139}],25:[function(t,l,u){var s=t("../internals/is-object"),p=t("../internals/is-array"),d=t("../internals/well-known-symbol")("species");l.exports=function(h,N){var Be;return new((Be=p(h)&&(typeof(Be=h.constructor)=="function"&&(Be===Array||p(Be.prototype))||s(Be)&&(Be=Be[d])===null)?void 0:Be)===void 0?Array:Be)(N===0?0:N)}},{"../internals/is-array":73,"../internals/is-object":75,"../internals/well-known-symbol":150}],26:[function(t,l,u){var s=t("../internals/an-object");l.exports=function(p,d,h,N){try{return N?d(s(h)[0],h[1]):d(h)}catch(Be){throw N=p.return,N!==void 0&&s(N.call(p)),Be}}},{"../internals/an-object":10}],27:[function(t,l,u){var s=t("../internals/well-known-symbol")("iterator"),p=!1;try{var d=0,h={next:function(){return{done:!!d++}},return:function(){p=!0}};h[s]=function(){return this},Array.from(h,function(){throw 2})}catch{}l.exports=function(N,Be){if(!Be&&!p)return!1;var b=!1;try{var E={};E[s]=function(){return{next:function(){return{done:b=!0}}}},N(E)}catch{}return b}},{"../internals/well-known-symbol":150}],28:[function(t,l,u){var s={}.toString;l.exports=function(p){return s.call(p).slice(8,-1)}},{}],29:[function(t,l,u){var s=t("../internals/to-string-tag-support"),p=t("../internals/classof-raw"),d=t("../internals/well-known-symbol")("toStringTag"),h=p(function(){return arguments}())=="Arguments";l.exports=s?p:function(N){var Be;return N===void 0?"Undefined":N===null?"Null":typeof(Be=function(b,E){try{return b[E]}catch{}}(N=Object(N),d))=="string"?Be:h?p(N):(Be=p(N))=="Object"&&typeof N.callee=="function"?"Arguments":Be}},{"../internals/classof-raw":28,"../internals/to-string-tag-support":143,"../internals/well-known-symbol":150}],30:[function(Ye,l,u){var s=Ye("../internals/object-define-property").f,p=Ye("../internals/object-create"),d=Ye("../internals/redefine-all"),h=Ye("../internals/function-bind-context"),N=Ye("../internals/an-instance"),Be=Ye("../internals/iterate"),b=Ye("../internals/define-iterator"),E=Ye("../internals/set-species"),de=Ye("../internals/descriptors"),pe=Ye("../internals/internal-metadata").fastKey,Ye=Ye("../internals/internal-state"),me=Ye.set,Le=Ye.getterFor;l.exports={getConstructor:function(nt,tt,ft,yt){function gt(bt,Ct,Et){var It,Dt=St(bt),Pt=mt(bt,Ct);return Pt?Pt.value=Et:(Dt.last=Pt={index:It=pe(Ct,!0),key:Ct,value:Et,previous:Ct=Dt.last,next:void 0,removed:!1},Dt.first||(Dt.first=Pt),Ct&&(Ct.next=Pt),de?Dt.size++:bt.size++,It!=="F"&&(Dt.index[It]=Pt)),bt}function mt(It,Ct){var Et,It=St(It),Dt=pe(Ct);if(Dt!=="F")return It.index[Dt];for(Et=It.first;Et;Et=Et.next)if(Et.key==Ct)return Et}var wt=nt(function(bt,Ct){N(bt,wt,tt),me(bt,{type:tt,index:p(null),first:void 0,last:void 0,size:0}),de||(bt.size=0),Ct!=null&&Be(Ct,bt[yt],bt,ft)}),St=Le(tt);return d(wt.prototype,{clear:function(){for(var bt=St(this),Ct=bt.index,Et=bt.first;Et;)Et.removed=!0,Et.previous&&(Et.previous=Et.previous.next=void 0),delete Ct[Et.index],Et=Et.next;bt.first=bt.last=void 0,de?bt.size=0:this.size=0},delete:function(Dt){var Ct,Et,It=St(this),Dt=mt(this,Dt);return Dt&&(Ct=Dt.next,Et=Dt.previous,delete It.index[Dt.index],Dt.removed=!0,Et&&(Et.next=Ct),Ct&&(Ct.previous=Et),It.first==Dt&&(It.first=Ct),It.last==Dt&&(It.last=Et),de?It.size--:this.size--),!!Dt},forEach:function(bt){for(var Ct,Et=St(this),It=h(bt,1<arguments.length?arguments[1]:void 0,3);Ct=Ct?Ct.next:Et.first;)for(It(Ct.value,Ct.key,this);Ct&&Ct.removed;)Ct=Ct.previous},has:function(bt){return!!mt(this,bt)}}),d(wt.prototype,ft?{get:function(bt){return bt=mt(this,bt),bt&&bt.value},set:function(bt,Ct){return gt(this,bt===0?0:bt,Ct)}}:{add:function(bt){return gt(this,bt=bt===0?0:bt,bt)}}),de&&s(wt.prototype,"size",{get:function(){return St(this).size}}),wt},setStrong:function(nt,tt,ft){var yt=tt+" Iterator",gt=Le(tt),mt=Le(yt);b(nt,tt,function(wt,St){me(this,{type:yt,target:wt,state:gt(wt),kind:St,last:void 0})},function(){for(var wt=mt(this),St=wt.kind,bt=wt.last;bt&&bt.removed;)bt=bt.previous;return wt.target&&(wt.last=bt=bt?bt.next:wt.state.first)?St=="keys"?{value:bt.key,done:!1}:St=="values"?{value:bt.value,done:!1}:{value:[bt.key,bt.value],done:!1}:{value:wt.target=void 0,done:!0}},ft?"entries":"values",!ft,!0),E(tt)}}},{"../internals/an-instance":9,"../internals/define-iterator":41,"../internals/descriptors":43,"../internals/function-bind-context":55,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/iterate":78,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/redefine-all":109,"../internals/set-species":118}],31:[function(me,l,u){function s(gt){return gt.frozen||(gt.frozen=new p)}function p(){this.entries=[]}function d(gt,mt){return tt(gt.entries,function(wt){return wt[0]===mt})}var h=me("../internals/redefine-all"),N=me("../internals/internal-metadata").getWeakData,Be=me("../internals/an-object"),b=me("../internals/is-object"),E=me("../internals/an-instance"),de=me("../internals/iterate"),pe=me("../internals/array-iteration"),Ye=me("../internals/has"),me=me("../internals/internal-state"),Le=me.set,nt=me.getterFor,tt=pe.find,ft=pe.findIndex,yt=0;p.prototype={get:function(gt){if(gt=d(this,gt),gt)return gt[1]},has:function(gt){return!!d(this,gt)},set:function(gt,mt){var wt=d(this,gt);wt?wt[1]=mt:this.entries.push([gt,mt])},delete:function(gt){var mt=ft(this.entries,function(wt){return wt[0]===gt});return~mt&&this.entries.splice(mt,1),!!~mt}},l.exports={getConstructor:function(gt,mt,wt,St){function bt(It,Dt,Pt){var qt=Et(It),Ht=N(Be(Dt),!0);return Ht===!0?s(qt).set(Dt,Pt):Ht[qt.id]=Pt,It}var Ct=gt(function(It,Dt){E(It,Ct,mt),Le(It,{type:mt,id:yt++,frozen:void 0}),Dt!=null&&de(Dt,It[St],It,wt)}),Et=nt(mt);return h(Ct.prototype,{delete:function(It){var Dt,Pt=Et(this);return!!b(It)&&((Dt=N(It))===!0?s(Pt).delete(It):Dt&&Ye(Dt,Pt.id)&&delete Dt[Pt.id])},has:function(It){var Dt,Pt=Et(this);return!!b(It)&&((Dt=N(It))===!0?s(Pt).has(It):Dt&&Ye(Dt,Pt.id))}}),h(Ct.prototype,wt?{get:function(It){var Dt,Pt=Et(this);if(b(It))return(Dt=N(It))===!0?s(Pt).get(It):Dt?Dt[Pt.id]:void 0},set:function(It,Dt){return bt(this,It,Dt)}}:{add:function(It){return bt(this,It,!0)}}),Ct}}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/array-iteration":19,"../internals/has":61,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine-all":109}],32:[function(t,l,u){var s=t("../internals/export"),p=t("../internals/global"),d=t("../internals/is-forced"),h=t("../internals/redefine"),N=t("../internals/internal-metadata"),Be=t("../internals/iterate"),b=t("../internals/an-instance"),E=t("../internals/is-object"),de=t("../internals/fails"),pe=t("../internals/check-correctness-of-iteration"),Ye=t("../internals/set-to-string-tag"),me=t("../internals/inherit-if-required");l.exports=function(Le,nt,tt){function ft(Ht){var Gt=Dt[Ht];h(Dt,Ht,Ht=="add"?function(Ut){return Gt.call(this,Ut===0?0:Ut),this}:Ht=="delete"?function(Ut){return!(Ct&&!E(Ut))&&Gt.call(this,Ut===0?0:Ut)}:Ht=="get"?function(Ut){return Ct&&!E(Ut)?void 0:Gt.call(this,Ut===0?0:Ut)}:Ht=="has"?function(Ut){return!(Ct&&!E(Ut))&&Gt.call(this,Ut===0?0:Ut)}:function(Ut,Yt){return Gt.call(this,Ut===0?0:Ut,Yt),this})}var yt,gt,mt,wt,St,bt=Le.indexOf("Map")!==-1,Ct=Le.indexOf("Weak")!==-1,Et=bt?"set":"add",It=p[Le],Dt=It&&It.prototype,Pt=It,qt={};return d(Le,typeof It!="function"||!(Ct||Dt.forEach&&!de(function(){new It().entries().next()})))?(Pt=tt.getConstructor(nt,Le,bt,Et),N.REQUIRED=!0):d(Le,!0)&&(gt=(yt=new Pt)[Et](Ct?{}:-0,1)!=yt,mt=de(function(){yt.has(1)}),wt=pe(function(Ht){new It(Ht)}),St=!Ct&&de(function(){for(var Ht=new It,Gt=5;Gt--;)Ht[Et](Gt,Gt);return!Ht.has(-0)}),wt||(((Pt=nt(function(Ht,Gt){return b(Ht,Pt,Le),Ht=me(new It,Ht,Pt),Gt!=null&&Be(Gt,Ht[Et],Ht,bt),Ht})).prototype=Dt).constructor=Pt),(mt||St)&&(ft("delete"),ft("has"),bt&&ft("get")),(St||gt)&&ft(Et),Ct&&Dt.clear&&delete Dt.clear),qt[Le]=Pt,s({global:!0,forced:Pt!=It},qt),Ye(Pt,Le),Ct||tt.setStrong(Pt,Le,bt),Pt}},{"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/export":50,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-metadata":70,"../internals/is-forced":74,"../internals/is-object":75,"../internals/iterate":78,"../internals/redefine":110,"../internals/set-to-string-tag":119}],33:[function(t,l,u){var s=t("../internals/has"),p=t("../internals/own-keys"),d=t("../internals/object-get-own-property-descriptor"),h=t("../internals/object-define-property");l.exports=function(N,Be){for(var b=p(Be),E=h.f,de=d.f,pe=0;pe<b.length;pe++){var Ye=b[pe];s(N,Ye)||E(N,Ye,de(Be,Ye))}}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/own-keys":105}],34:[function(t,l,u){var s=t("../internals/well-known-symbol")("match");l.exports=function(p){var d=/./;try{"/./"[p](d)}catch{try{return d[s]=!1,"/./"[p](d)}catch{}}return!1}},{"../internals/well-known-symbol":150}],35:[function(t,l,u){t=t("../internals/fails"),l.exports=!t(function(){function s(){}return s.prototype.constructor=null,Object.getPrototypeOf(new s)!==s.prototype})},{"../internals/fails":51}],36:[function(t,l,u){var s=t("../internals/require-object-coercible"),p=/"/g;l.exports=function(b,h,N,Be){var b=String(s(b)),E="<"+h;return N!==""&&(E+=" "+N+'="'+String(Be).replace(p,"&quot;")+'"'),E+">"+b+"</"+h+">"}},{"../internals/require-object-coercible":115}],37:[function(t,l,u){function s(){return this}var p=t("../internals/iterators-core").IteratorPrototype,d=t("../internals/object-create"),h=t("../internals/create-property-descriptor"),N=t("../internals/set-to-string-tag"),Be=t("../internals/iterators");l.exports=function(b,E,de){return E+=" Iterator",b.prototype=d(p,{next:h(1,de)}),N(b,E,!1,!0),Be[E]=s,b}},{"../internals/create-property-descriptor":39,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-create":91,"../internals/set-to-string-tag":119}],38:[function(t,l,u){var s=t("../internals/descriptors"),p=t("../internals/object-define-property"),d=t("../internals/create-property-descriptor");l.exports=s?function(h,N,Be){return p.f(h,N,d(1,Be))}:function(h,N,Be){return h[N]=Be,h}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/object-define-property":93}],39:[function(t,l,u){l.exports=function(s,p){return{enumerable:!(1&s),configurable:!(2&s),writable:!(4&s),value:p}}},{}],40:[function(t,l,u){var s=t("../internals/to-primitive"),p=t("../internals/object-define-property"),d=t("../internals/create-property-descriptor");l.exports=function(h,N,Be){N=s(N),N in h?p.f(h,N,d(0,Be)):h[N]=Be}},{"../internals/create-property-descriptor":39,"../internals/object-define-property":93,"../internals/to-primitive":142}],41:[function(me,l,u){function s(){return this}var p=me("../internals/export"),d=me("../internals/create-iterator-constructor"),h=me("../internals/object-get-prototype-of"),N=me("../internals/object-set-prototype-of"),Be=me("../internals/set-to-string-tag"),b=me("../internals/create-non-enumerable-property"),E=me("../internals/redefine"),de=me("../internals/well-known-symbol"),pe=me("../internals/is-pure"),Ye=me("../internals/iterators"),me=me("../internals/iterators-core"),Le=me.IteratorPrototype,nt=me.BUGGY_SAFARI_ITERATORS,tt=de("iterator"),ft="values",yt="entries";l.exports=function(gt,mt,wt,qt,bt,Ct,Et){d(wt,mt,qt);function It(vt){if(vt===bt&&Yt)return Yt;if(!nt&&vt in Gt)return Gt[vt];switch(vt){case"keys":case ft:case yt:return function(){return new wt(this,vt)}}return function(){return new wt(this)}}var Dt,Pt,qt=mt+" Iterator",Ht=!1,Gt=gt.prototype,Ut=Gt[tt]||Gt["@@iterator"]||bt&&Gt[bt],Yt=!nt&&Ut||It(bt),Zt=mt=="Array"&&Gt.entries||Ut;if(Zt&&(Zt=h(Zt.call(new gt)),Le!==Object.prototype&&Zt.next&&(pe||h(Zt)===Le||(N?N(Zt,Le):typeof Zt[tt]!="function"&&b(Zt,tt,s)),Be(Zt,qt,!0,!0),pe&&(Ye[qt]=s))),bt==ft&&Ut&&Ut.name!==ft&&(Ht=!0,Yt=function(){return Ut.call(this)}),pe&&!Et||Gt[tt]===Yt||b(Gt,tt,Yt),Ye[mt]=Yt,bt)if(Dt={values:It(ft),keys:Ct?Yt:It("keys"),entries:It(yt)},Et)for(Pt in Dt)!nt&&!Ht&&Pt in Gt||E(Gt,Pt,Dt[Pt]);else p({target:mt,proto:!0,forced:nt||Ht},Dt);return Dt}},{"../internals/create-iterator-constructor":37,"../internals/create-non-enumerable-property":38,"../internals/export":50,"../internals/is-pure":76,"../internals/iterators":80,"../internals/iterators-core":79,"../internals/object-get-prototype-of":98,"../internals/object-set-prototype-of":102,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/well-known-symbol":150}],42:[function(t,l,u){var s=t("../internals/path"),p=t("../internals/has"),d=t("../internals/well-known-symbol-wrapped"),h=t("../internals/object-define-property").f;l.exports=function(N){var Be=s.Symbol||(s.Symbol={});p(Be,N)||h(Be,N,{value:d.f(N)})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/path":106,"../internals/well-known-symbol-wrapped":149}],43:[function(t,l,u){t=t("../internals/fails"),l.exports=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},{"../internals/fails":51}],44:[function(p,l,u){var s=p("../internals/global"),p=p("../internals/is-object"),d=s.document,h=p(d)&&p(d.createElement);l.exports=function(N){return h?d.createElement(N):{}}},{"../internals/global":60,"../internals/is-object":75}],45:[function(t,l,u){l.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},{}],46:[function(t,l,u){t=t("../internals/engine-user-agent"),l.exports=/(iphone|ipod|ipad).*applewebkit/i.test(t)},{"../internals/engine-user-agent":47}],47:[function(t,l,u){t=t("../internals/get-built-in"),l.exports=t("navigator","userAgent")||""},{"../internals/get-built-in":57}],48:[function(d,l,u){var s,p,h=d("../internals/global"),d=d("../internals/engine-user-agent"),h=h.process,h=h&&h.versions,h=h&&h.v8;h?p=(s=h.split("."))[0]+s[1]:d&&(!(s=d.match(/Edge\/(\d+)/))||74<=s[1])&&(s=d.match(/Chrome\/(\d+)/))&&(p=s[1]),l.exports=p&&+p},{"../internals/engine-user-agent":47,"../internals/global":60}],49:[function(t,l,u){l.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],50:[function(t,l,u){var s=t("../internals/global"),p=t("../internals/object-get-own-property-descriptor").f,d=t("../internals/create-non-enumerable-property"),h=t("../internals/redefine"),N=t("../internals/set-global"),Be=t("../internals/copy-constructor-properties"),b=t("../internals/is-forced");l.exports=function(E,de){var pe,Ye,me,Le=E.target,nt=E.global,tt=E.stat,ft=nt?s:tt?s[Le]||N(Le,{}):(s[Le]||{}).prototype;if(ft)for(pe in de){if(Ye=de[pe],me=E.noTargetGet?(me=p(ft,pe))&&me.value:ft[pe],!b(nt?pe:Le+(tt?".":"#")+pe,E.forced)&&me!==void 0){if(typeof Ye==typeof me)continue;Be(Ye,me)}(E.sham||me&&me.sham)&&d(Ye,"sham",!0),h(ft,pe,Ye,E)}}},{"../internals/copy-constructor-properties":33,"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/is-forced":74,"../internals/object-get-own-property-descriptor":94,"../internals/redefine":110,"../internals/set-global":117}],51:[function(t,l,u){l.exports=function(s){try{return!!s()}catch{return!0}}},{}],52:[function(de,l,u){de("../modules/es.regexp.exec");var s=de("../internals/redefine"),p=de("../internals/fails"),d=de("../internals/well-known-symbol"),h=de("../internals/regexp-exec"),N=de("../internals/create-non-enumerable-property"),Be=d("species"),b=!p(function(){var me=/./;return me.exec=function(){var Le=[];return Le.groups={a:"7"},Le},"".replace(me,"$<a>")!=="7"}),E="a".replace(/./,"$0")==="$0",de=d("replace"),pe=!!/./[de]&&/./[de]("a","$0")==="",Ye=!p(function(){var Le=/(?:)/,me=Le.exec,Le=(Le.exec=function(){return me.apply(this,arguments)},"ab".split(Le));return Le.length!==2||Le[0]!=="a"||Le[1]!=="b"});l.exports=function(me,Le,nt,tt){var ft,yt,gt=d(me),mt=!p(function(){var St={};return St[gt]=function(){return 7},""[me](St)!=7}),wt=mt&&!p(function(){var St=!1,bt=/a/;return me==="split"&&((bt={constructor:{}}).constructor[Be]=function(){return bt},bt.flags="",bt[gt]=/./[gt]),bt.exec=function(){return St=!0,null},bt[gt](""),!St});mt&&wt&&(me!=="replace"||b&&E&&!pe)&&(me!=="split"||Ye)||(ft=/./[gt],nt=(wt=nt(gt,""[me],function(St,bt,Ct,Et,It){return bt.exec===h?mt&&!It?{done:!0,value:ft.call(bt,Ct,Et)}:{done:!0,value:St.call(Ct,bt,Et)}:{done:!1}},{REPLACE_KEEPS_$0:E,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:pe}))[0],yt=wt[1],s(String.prototype,me,nt),s(RegExp.prototype,gt,Le==2?function(St,bt){return yt.call(St,this,bt)}:function(St){return yt.call(St,this)})),tt&&N(RegExp.prototype[gt],"sham",!0)}},{"../internals/create-non-enumerable-property":38,"../internals/fails":51,"../internals/redefine":110,"../internals/regexp-exec":112,"../internals/well-known-symbol":150,"../modules/es.regexp.exec":195}],53:[function(t,l,u){function s(N,Be,b,E,de,pe,Ye,me){for(var Le,nt=de,tt=0,ft=!!Ye&&h(Ye,me,3);tt<E;){if(tt in b){if(Le=ft?ft(b[tt],tt,Be):b[tt],0<pe&&p(Le))nt=s(N,Be,Le,d(Le.length),nt,pe-1)-1;else{if(9007199254740991<=nt)throw TypeError("Exceed the acceptable array length");N[nt]=Le}nt++}tt++}return nt}var p=t("../internals/is-array"),d=t("../internals/to-length"),h=t("../internals/function-bind-context");l.exports=s},{"../internals/function-bind-context":55,"../internals/is-array":73,"../internals/to-length":138}],54:[function(t,l,u){t=t("../internals/fails"),l.exports=!t(function(){return Object.isExtensible(Object.preventExtensions({}))})},{"../internals/fails":51}],55:[function(t,l,u){var s=t("../internals/a-function");l.exports=function(p,d,h){if(s(p),d===void 0)return p;switch(h){case 0:return function(){return p.call(d)};case 1:return function(N){return p.call(d,N)};case 2:return function(N,Be){return p.call(d,N,Be)};case 3:return function(N,Be,b){return p.call(d,N,Be,b)}}return function(){return p.apply(d,arguments)}}},{"../internals/a-function":5}],56:[function(t,l,u){var s=t("../internals/a-function"),p=t("../internals/is-object"),d=[].slice,h={};l.exports=Function.bind||function(N){var Be=s(this),b=d.call(arguments,1),E=function(){var de=b.concat(d.call(arguments));if(this instanceof E){var pe=Be,Ye=de.length,me=de;if(!(Ye in h)){for(var Le=[],nt=0;nt<Ye;nt++)Le[nt]="a["+nt+"]";h[Ye]=Function("C,a","return new C("+Le.join(",")+")")}return h[Ye](pe,me)}return Be.apply(N,de)};return p(Be.prototype)&&(E.prototype=Be.prototype),E}},{"../internals/a-function":5,"../internals/is-object":75}],57:[function(t,l,u){function s(h){return typeof h=="function"?h:void 0}var p=t("../internals/path"),d=t("../internals/global");l.exports=function(h,N){return arguments.length<2?s(p[h])||s(d[h]):p[h]&&p[h][N]||d[h]&&d[h][N]}},{"../internals/global":60,"../internals/path":106}],58:[function(t,l,u){var s=t("../internals/classof"),p=t("../internals/iterators"),d=t("../internals/well-known-symbol")("iterator");l.exports=function(h){if(h!=null)return h[d]||h["@@iterator"]||p[s(h)]}},{"../internals/classof":29,"../internals/iterators":80,"../internals/well-known-symbol":150}],59:[function(t,l,u){var s=t("../internals/an-object"),p=t("../internals/get-iterator-method");l.exports=function(d){var h=p(d);if(typeof h!="function")throw TypeError(String(d)+" is not iterable");return s(h.call(d))}},{"../internals/an-object":10,"../internals/get-iterator-method":58}],60:[function(t,l,u){(function(s){function p(d){return d&&d.Math==Math&&d}l.exports=p(typeof globalThis=="object"&&globalThis)||p(typeof window=="object"&&window)||p(typeof self=="object"&&self)||p(typeof s=="object"&&s)||Function("return this")()}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}],61:[function(t,l,u){var s={}.hasOwnProperty;l.exports=function(p,d){return s.call(p,d)}},{}],62:[function(t,l,u){l.exports={}},{}],63:[function(t,l,u){var s=t("../internals/global");l.exports=function(p,d){var h=s.console;h&&h.error&&(arguments.length===1?h.error(p):h.error(p,d))}},{"../internals/global":60}],64:[function(t,l,u){t=t("../internals/get-built-in"),l.exports=t("document","documentElement")},{"../internals/get-built-in":57}],65:[function(t,l,u){var s=t("../internals/descriptors"),p=t("../internals/fails"),d=t("../internals/document-create-element");l.exports=!s&&!p(function(){return Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a!=7})},{"../internals/descriptors":43,"../internals/document-create-element":44,"../internals/fails":51}],66:[function(t,l,u){var s=Math.abs,p=Math.pow,d=Math.floor,h=Math.log,N=Math.LN2;l.exports={pack:function(Be,b,nt){var de,pe,Ye,me=new Array(nt),Le=8*nt-b-1,nt=(1<<Le)-1,tt=nt>>1,ft=b===23?p(2,-24)-p(2,-77):0,yt=Be<0||Be===0&&1/Be<0?1:0,gt=0;for((Be=s(Be))!=Be||Be===1/0?(pe=Be!=Be?1:0,de=nt):(de=d(h(Be)/N),Be*(Ye=p(2,-de))<1&&(de--,Ye*=2),2<=(Be+=1<=de+tt?ft/Ye:ft*p(2,1-tt))*Ye&&(de++,Ye/=2),nt<=de+tt?(pe=0,de=nt):1<=de+tt?(pe=(Be*Ye-1)*p(2,b),de+=tt):(pe=Be*p(2,tt-1)*p(2,b),de=0));8<=b;me[gt++]=255&pe,pe/=256,b-=8);for(de=de<<b|pe,Le+=b;0<Le;me[gt++]=255&de,de/=256,Le-=8);return me[--gt]|=128*yt,me},unpack:function(Be,b){var E,de=Be.length,nt=8*de-b-1,pe=(1<<nt)-1,Ye=pe>>1,me=nt-7,Le=de-1,nt=Be[Le--],tt=127&nt;for(nt>>=7;0<me;tt=256*tt+Be[Le],Le--,me-=8);for(E=tt&(1<<-me)-1,tt>>=-me,me+=b;0<me;E=256*E+Be[Le],Le--,me-=8);if(tt===0)tt=1-Ye;else{if(tt===pe)return E?NaN:nt?-1/0:1/0;E+=p(2,b),tt-=Ye}return(nt?-1:1)*E*p(2,tt-b)}}},{}],67:[function(t,l,u){var s=t("../internals/fails"),p=t("../internals/classof-raw"),d="".split;l.exports=s(function(){return!Object("z").propertyIsEnumerable(0)})?function(h){return p(h)=="String"?d.call(h,""):Object(h)}:Object},{"../internals/classof-raw":28,"../internals/fails":51}],68:[function(t,l,u){var s=t("../internals/is-object"),p=t("../internals/object-set-prototype-of");l.exports=function(d,h,N){return p&&typeof(h=h.constructor)=="function"&&h!==N&&s(h=h.prototype)&&h!==N.prototype&&p(d,h),d}},{"../internals/is-object":75,"../internals/object-set-prototype-of":102}],69:[function(s,l,u){var s=s("../internals/shared-store"),p=Function.toString;typeof s.inspectSource!="function"&&(s.inspectSource=function(d){return p.call(d)}),l.exports=s.inspectSource},{"../internals/shared-store":121}],70:[function(t,l,u){function s(me){N(me,E,{value:{objectID:"O"+ ++de,weakData:{}}})}var p=t("../internals/hidden-keys"),d=t("../internals/is-object"),h=t("../internals/has"),N=t("../internals/object-define-property").f,Be=t("../internals/uid"),b=t("../internals/freezing"),E=Be("meta"),de=0,pe=Object.isExtensible||function(){return!0},Ye=l.exports={REQUIRED:!1,fastKey:function(me,Le){if(!d(me))return typeof me=="symbol"?me:(typeof me=="string"?"S":"P")+me;if(!h(me,E)){if(!pe(me))return"F";if(!Le)return"E";s(me)}return me[E].objectID},getWeakData:function(me,Le){if(!h(me,E)){if(!pe(me))return!0;if(!Le)return!1;s(me)}return me[E].weakData},onFreeze:function(me){return b&&Ye.REQUIRED&&pe(me)&&!h(me,E)&&s(me),me}};p[E]=!0},{"../internals/freezing":54,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/object-define-property":93,"../internals/uid":147}],71:[function(nt,l,u){var s,p,d,h,N,Be,b,E,de=nt("../internals/native-weak-map"),tt=nt("../internals/global"),pe=nt("../internals/is-object"),Ye=nt("../internals/create-non-enumerable-property"),me=nt("../internals/has"),Le=nt("../internals/shared-key"),nt=nt("../internals/hidden-keys"),tt=tt.WeakMap;b=de?(s=new tt,p=s.get,d=s.has,h=s.set,N=function(ft,yt){return h.call(s,ft,yt),yt},Be=function(ft){return p.call(s,ft)||{}},function(ft){return d.call(s,ft)}):(nt[E=Le("state")]=!0,N=function(ft,yt){return Ye(ft,E,yt),yt},Be=function(ft){return me(ft,E)?ft[E]:{}},function(ft){return me(ft,E)}),l.exports={set:N,get:Be,has:b,enforce:function(ft){return b(ft)?Be(ft):N(ft,{})},getterFor:function(ft){return function(yt){if(pe(yt)&&(yt=Be(yt)).type===ft)return yt;throw TypeError("Incompatible receiver, "+ft+" required")}}}},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/shared-key":120}],72:[function(t,l,u){var s=t("../internals/well-known-symbol"),p=t("../internals/iterators"),d=s("iterator"),h=Array.prototype;l.exports=function(N){return N!==void 0&&(p.Array===N||h[d]===N)}},{"../internals/iterators":80,"../internals/well-known-symbol":150}],73:[function(t,l,u){var s=t("../internals/classof-raw");l.exports=Array.isArray||function(p){return s(p)=="Array"}},{"../internals/classof-raw":28}],74:[function(t,l,u){function s(E,de){return(E=N[h(E)])==b||E!=Be&&(typeof de=="function"?p(de):!!de)}var p=t("../internals/fails"),d=/#|\.prototype\./,h=s.normalize=function(E){return String(E).replace(d,".").toLowerCase()},N=s.data={},Be=s.NATIVE="N",b=s.POLYFILL="P";l.exports=s},{"../internals/fails":51}],75:[function(t,l,u){l.exports=function(s){return typeof s=="object"?s!==null:typeof s=="function"}},{}],76:[function(t,l,u){l.exports=!1},{}],77:[function(t,l,u){var s=t("../internals/is-object"),p=t("../internals/classof-raw"),d=t("../internals/well-known-symbol")("match");l.exports=function(h){var N;return s(h)&&((N=h[d])!==void 0?!!N:p(h)=="RegExp")}},{"../internals/classof-raw":28,"../internals/is-object":75,"../internals/well-known-symbol":150}],78:[function(t,l,u){function s(E,de){this.stopped=E,this.result=de}var p=t("../internals/an-object"),d=t("../internals/is-array-iterator-method"),h=t("../internals/to-length"),N=t("../internals/function-bind-context"),Be=t("../internals/get-iterator-method"),b=t("../internals/call-with-safe-iteration-closing");(l.exports=function(E,de,pe,Ye,me){var Le,nt,tt,ft,yt,gt,mt=N(de,pe,Ye?2:1);if(me)Le=E;else{if(typeof(de=Be(E))!="function")throw TypeError("Target is not iterable");if(d(de)){for(nt=0,tt=h(E.length);nt<tt;nt++)if((ft=Ye?mt(p(gt=E[nt])[0],gt[1]):mt(E[nt]))&&ft instanceof s)return ft;return new s(!1)}Le=de.call(E)}for(yt=Le.next;!(gt=yt.call(Le)).done;)if(typeof(ft=b(Le,mt,gt.value,Ye))=="object"&&ft&&ft instanceof s)return ft;return new s(!1)}).stop=function(E){return new s(!0,E)}},{"../internals/an-object":10,"../internals/call-with-safe-iteration-closing":26,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138}],79:[function(Be,l,u){var s,p,d=Be("../internals/object-get-prototype-of"),h=Be("../internals/create-non-enumerable-property"),N=Be("../internals/has"),b=Be("../internals/well-known-symbol"),Be=Be("../internals/is-pure"),b=b("iterator"),E=!1;[].keys&&("next"in(p=[].keys())?(d=d(d(p)))!==Object.prototype&&(s=d):E=!0),s==null&&(s={}),Be||N(s,b)||h(s,b,function(){return this}),l.exports={IteratorPrototype:s,BUGGY_SAFARI_ITERATORS:E}},{"../internals/create-non-enumerable-property":38,"../internals/has":61,"../internals/is-pure":76,"../internals/object-get-prototype-of":98,"../internals/well-known-symbol":150}],80:[function(t,l,u){l.exports={}},{}],81:[function(t,l,u){l.exports=Math.sign||function(s){return(s=+s)==0||s!=s?s:s<0?-1:1}},{}],82:[function(Ye,l,u){var s,p,d,h,N,Be,b,E,de=Ye("../internals/global"),yt=Ye("../internals/object-get-own-property-descriptor").f,ft=Ye("../internals/classof-raw"),pe=Ye("../internals/task").set,Ye=Ye("../internals/engine-is-ios"),me=de.MutationObserver||de.WebKitMutationObserver,Le=de.process,nt=de.Promise,tt=ft(Le)=="process",ft=yt(de,"queueMicrotask"),yt=ft&&ft.value;yt||(s=function(){var gt,mt;for(tt&&(gt=Le.domain)&&gt.exit();p;){mt=p.fn,p=p.next;try{mt()}catch(wt){throw p?h():d=void 0,wt}}d=void 0,gt&&gt.enter()},h=tt?function(){Le.nextTick(s)}:me&&!Ye?(N=!0,Be=document.createTextNode(""),new me(s).observe(Be,{characterData:!0}),function(){Be.data=N=!N}):nt&&nt.resolve?(b=nt.resolve(void 0),E=b.then,function(){E.call(b,s)}):function(){pe.call(de,s)}),l.exports=yt||function(gt){gt={fn:gt,next:void 0},d&&(d.next=gt),p||(p=gt,h()),d=gt}},{"../internals/classof-raw":28,"../internals/engine-is-ios":46,"../internals/global":60,"../internals/object-get-own-property-descriptor":94,"../internals/task":132}],83:[function(t,l,u){t=t("../internals/global"),l.exports=t.Promise},{"../internals/global":60}],84:[function(t,l,u){t=t("../internals/fails"),l.exports=!!Object.getOwnPropertySymbols&&!t(function(){return!String(Symbol())})},{"../internals/fails":51}],85:[function(t,l,u){var s=t("../internals/fails"),p=t("../internals/well-known-symbol"),d=t("../internals/is-pure"),h=p("iterator");l.exports=!s(function(){var N=new URL("b?a=1&b=2&c=3","http://a"),Be=N.searchParams,b="";return N.pathname="c%20d",Be.forEach(function(E,de){Be.delete("b"),b+=de+E}),d&&!N.toJSON||!Be.sort||N.href!=="http://a/c%20d?a=1&c=3"||Be.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!Be[h]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://").host!=="xn--e1aybc"||new URL("http://a#").hash!=="#%D0%B1"||b!=="a1c3"||new URL("http://x",void 0).host!=="x"})},{"../internals/fails":51,"../internals/is-pure":76,"../internals/well-known-symbol":150}],86:[function(s,l,u){var p=s("../internals/global"),s=s("../internals/inspect-source"),p=p.WeakMap;l.exports=typeof p=="function"&&/native code/.test(s(p))},{"../internals/global":60,"../internals/inspect-source":69}],87:[function(t,l,u){function s(d){var h,N;this.promise=new d(function(Be,b){if(h!==void 0||N!==void 0)throw TypeError("Bad Promise constructor");h=Be,N=b}),this.resolve=p(h),this.reject=p(N)}var p=t("../internals/a-function");l.exports.f=function(d){return new s(d)}},{"../internals/a-function":5}],88:[function(t,l,u){var s=t("../internals/is-regexp");l.exports=function(p){if(s(p))throw TypeError("The method doesn't accept regular expressions");return p}},{"../internals/is-regexp":77}],89:[function(t,l,u){var s=t("../internals/global").isFinite;l.exports=Number.isFinite||function(p){return typeof p=="number"&&s(p)}},{"../internals/global":60}],90:[function(t,l,u){var s=t("../internals/descriptors"),p=t("../internals/fails"),d=t("../internals/object-keys"),h=t("../internals/object-get-own-property-symbols"),N=t("../internals/object-property-is-enumerable"),Be=t("../internals/to-object"),b=t("../internals/indexed-object"),E=Object.assign,de=Object.defineProperty;l.exports=!E||p(function(){var pe,Ye,me,Le;return!(!s||E({b:1},E(de({},"a",{enumerable:!0,get:function(){de(this,"b",{value:3,enumerable:!1})}}),{b:2})).b===1)||(Ye={},Le="abcdefghijklmnopqrst",(pe={})[me=Symbol()]=7,Le.split("").forEach(function(nt){Ye[nt]=nt}),E({},pe)[me]!=7||d(E({},Ye)).join("")!=Le)})?function(pe,Ye){for(var me=Be(pe),Le=arguments.length,nt=1,tt=h.f,ft=N.f;nt<Le;)for(var yt,gt=b(arguments[nt++]),mt=tt?d(gt).concat(tt(gt)):d(gt),wt=mt.length,St=0;St<wt;)yt=mt[St++],s&&!ft.call(gt,yt)||(me[yt]=gt[yt]);return me}:E},{"../internals/descriptors":43,"../internals/fails":51,"../internals/indexed-object":67,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-object":139}],91:[function(de,l,u){function s(){}var p,d=de("../internals/an-object"),h=de("../internals/object-define-properties"),N=de("../internals/enum-bug-keys"),Be=de("../internals/hidden-keys"),b=de("../internals/html"),E=de("../internals/document-create-element"),de=de("../internals/shared-key"),pe="prototype",Ye="script",me=de("IE_PROTO"),Le=function(tt){return"<"+Ye+">"+tt+"</"+Ye+">"},nt=function(){try{p=document.domain&&new ActiveXObject("htmlfile")}catch{}nt=p?((tt=p).write(Le("")),tt.close(),ft=tt.parentWindow.Object,tt=null,ft):(tt=E("iframe"),ft="java"+Ye+":",tt.style.display="none",b.appendChild(tt),tt.src=String(ft),(ft=tt.contentWindow.document).open(),ft.write(Le("document.F=Object")),ft.close(),ft.F);for(var tt,ft,yt=N.length;yt--;)delete nt[pe][N[yt]];return nt()};Be[me]=!0,l.exports=Object.create||function(tt,ft){var yt;return tt!==null?(s[pe]=d(tt),yt=new s,s[pe]=null,yt[me]=tt):yt=nt(),ft===void 0?yt:h(yt,ft)}},{"../internals/an-object":10,"../internals/document-create-element":44,"../internals/enum-bug-keys":49,"../internals/hidden-keys":62,"../internals/html":64,"../internals/object-define-properties":92,"../internals/shared-key":120}],92:[function(t,l,u){var s=t("../internals/descriptors"),p=t("../internals/object-define-property"),d=t("../internals/an-object"),h=t("../internals/object-keys");l.exports=s?Object.defineProperties:function(N,Be){d(N);for(var b,E=h(Be),de=E.length,pe=0;pe<de;)p.f(N,b=E[pe++],Be[b]);return N}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/object-define-property":93,"../internals/object-keys":100}],93:[function(t,l,u){var s=t("../internals/descriptors"),p=t("../internals/ie8-dom-define"),d=t("../internals/an-object"),h=t("../internals/to-primitive"),N=Object.defineProperty;u.f=s?N:function(Be,b,E){if(d(Be),b=h(b,!0),d(E),p)try{return N(Be,b,E)}catch{}if("get"in E||"set"in E)throw TypeError("Accessors not supported");return"value"in E&&(Be[b]=E.value),Be}},{"../internals/an-object":10,"../internals/descriptors":43,"../internals/ie8-dom-define":65,"../internals/to-primitive":142}],94:[function(t,l,u){var s=t("../internals/descriptors"),p=t("../internals/object-property-is-enumerable"),d=t("../internals/create-property-descriptor"),h=t("../internals/to-indexed-object"),N=t("../internals/to-primitive"),Be=t("../internals/has"),b=t("../internals/ie8-dom-define"),E=Object.getOwnPropertyDescriptor;u.f=s?E:function(de,pe){if(de=h(de),pe=N(pe,!0),b)try{return E(de,pe)}catch{}if(Be(de,pe))return d(!p.f.call(de,pe),de[pe])}},{"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/has":61,"../internals/ie8-dom-define":65,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":136,"../internals/to-primitive":142}],95:[function(t,l,u){var s=t("../internals/to-indexed-object"),p=t("../internals/object-get-own-property-names").f,d={}.toString,h=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];l.exports.f=function(N){if(!h||d.call(N)!="[object Window]")return p(s(N));try{return p(N)}catch{return h.slice()}}},{"../internals/object-get-own-property-names":96,"../internals/to-indexed-object":136}],96:[function(t,l,u){var s=t("../internals/object-keys-internal"),p=t("../internals/enum-bug-keys").concat("length","prototype");u.f=Object.getOwnPropertyNames||function(d){return s(d,p)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],97:[function(t,l,u){u.f=Object.getOwnPropertySymbols},{}],98:[function(h,l,u){var s=h("../internals/has"),p=h("../internals/to-object"),d=h("../internals/shared-key"),h=h("../internals/correct-prototype-getter"),N=d("IE_PROTO"),Be=Object.prototype;l.exports=h?Object.getPrototypeOf:function(b){return b=p(b),s(b,N)?b[N]:typeof b.constructor=="function"&&b instanceof b.constructor?b.constructor.prototype:b instanceof Object?Be:null}},{"../internals/correct-prototype-getter":35,"../internals/has":61,"../internals/shared-key":120,"../internals/to-object":139}],99:[function(t,l,u){var s=t("../internals/has"),p=t("../internals/to-indexed-object"),d=t("../internals/array-includes").indexOf,h=t("../internals/hidden-keys");l.exports=function(N,Be){var b,E=p(N),de=0,pe=[];for(b in E)!s(h,b)&&s(E,b)&&pe.push(b);for(;Be.length>de;)!s(E,b=Be[de++])||~d(pe,b)||pe.push(b);return pe}},{"../internals/array-includes":18,"../internals/has":61,"../internals/hidden-keys":62,"../internals/to-indexed-object":136}],100:[function(t,l,u){var s=t("../internals/object-keys-internal"),p=t("../internals/enum-bug-keys");l.exports=Object.keys||function(d){return s(d,p)}},{"../internals/enum-bug-keys":49,"../internals/object-keys-internal":99}],101:[function(t,l,u){var s={}.propertyIsEnumerable,p=Object.getOwnPropertyDescriptor,d=p&&!s.call({1:2},1);u.f=d?function(h){return h=p(this,h),!!h&&h.enumerable}:s},{}],102:[function(t,l,u){var s=t("../internals/an-object"),p=t("../internals/a-possible-prototype");l.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var d,h=!1,N={};try{(d=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(N,[]),h=N instanceof Array}catch{}return function(Be,b){return s(Be),p(b),h?d.call(Be,b):Be.__proto__=b,Be}}():void 0)},{"../internals/a-possible-prototype":6,"../internals/an-object":10}],103:[function(t,l,u){function s(Be){return function(b){for(var E,de=h(b),pe=d(de),Ye=pe.length,me=0,Le=[];me<Ye;)E=pe[me++],p&&!N.call(de,E)||Le.push(Be?[E,de[E]]:de[E]);return Le}}var p=t("../internals/descriptors"),d=t("../internals/object-keys"),h=t("../internals/to-indexed-object"),N=t("../internals/object-property-is-enumerable").f;l.exports={entries:s(!0),values:s(!1)}},{"../internals/descriptors":43,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/to-indexed-object":136}],104:[function(t,l,u){var s=t("../internals/to-string-tag-support"),p=t("../internals/classof");l.exports=s?{}.toString:function(){return"[object "+p(this)+"]"}},{"../internals/classof":29,"../internals/to-string-tag-support":143}],105:[function(t,l,u){var s=t("../internals/get-built-in"),p=t("../internals/object-get-own-property-names"),d=t("../internals/object-get-own-property-symbols"),h=t("../internals/an-object");l.exports=s("Reflect","ownKeys")||function(N){var Be=p.f(h(N)),b=d.f;return b?Be.concat(b(N)):Be}},{"../internals/an-object":10,"../internals/get-built-in":57,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-symbols":97}],106:[function(t,l,u){t=t("../internals/global"),l.exports=t},{"../internals/global":60}],107:[function(t,l,u){l.exports=function(s){try{return{error:!1,value:s()}}catch(p){return{error:!0,value:p}}}},{}],108:[function(t,l,u){var s=t("../internals/an-object"),p=t("../internals/is-object"),d=t("../internals/new-promise-capability");l.exports=function(h,N){return s(h),p(N)&&N.constructor===h?N:((0,(h=d.f(h)).resolve)(N),h.promise)}},{"../internals/an-object":10,"../internals/is-object":75,"../internals/new-promise-capability":87}],109:[function(t,l,u){var s=t("../internals/redefine");l.exports=function(p,d,h){for(var N in d)s(p,N,d[N],h);return p}},{"../internals/redefine":110}],110:[function(Be,l,u){var s=Be("../internals/global"),p=Be("../internals/create-non-enumerable-property"),d=Be("../internals/has"),h=Be("../internals/set-global"),N=Be("../internals/inspect-source"),Be=Be("../internals/internal-state"),b=Be.get,E=Be.enforce,de=String(String).split("String");(l.exports=function(pe,Ye,me,ft){var nt=!!ft&&!!ft.unsafe,tt=!!ft&&!!ft.enumerable,ft=!!ft&&!!ft.noTargetGet;typeof me=="function"&&(typeof Ye!="string"||d(me,"name")||p(me,"name",Ye),E(me).source=de.join(typeof Ye=="string"?Ye:"")),pe===s?tt?pe[Ye]=me:h(Ye,me):(nt?!ft&&pe[Ye]&&(tt=!0):delete pe[Ye],tt?pe[Ye]=me:p(pe,Ye,me))})(Function.prototype,"toString",function(){return typeof this=="function"&&b(this).source||N(this)})},{"../internals/create-non-enumerable-property":38,"../internals/global":60,"../internals/has":61,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/set-global":117}],111:[function(t,l,u){var s=t("./classof-raw"),p=t("./regexp-exec");l.exports=function(d,h){var N=d.exec;if(typeof N=="function"){if(N=N.call(d,h),typeof N!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return N}if(s(d)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return p.call(d,h)}},{"./classof-raw":28,"./regexp-exec":112}],112:[function(h,l,u){var s,p,d=h("./regexp-flags"),h=h("./regexp-sticky-helpers"),N=RegExp.prototype.exec,Be=String.prototype.replace,b=N,E=(s=/a/,p=/b*/g,N.call(s,"a"),N.call(p,"a"),s.lastIndex!==0||p.lastIndex!==0),de=h.UNSUPPORTED_Y||h.BROKEN_CARET,pe=/()??/.exec("")[1]!==void 0;l.exports=b=E||pe||de?function(Ye){var me,Le,nt,tt,ft=this,yt=de&&ft.sticky,gt=d.call(ft),mt=ft.source,wt=0,St=Ye;return yt&&((gt=gt.replace("y","")).indexOf("g")===-1&&(gt+="g"),St=String(Ye).slice(ft.lastIndex),0<ft.lastIndex&&(!ft.multiline||ft.multiline&&Ye[ft.lastIndex-1]!==`
`)&&(mt="(?: "+mt+")",St=" "+St,wt++),Le=new RegExp("^(?:"+mt+")",gt)),pe&&(Le=new RegExp("^"+mt+"$(?!\\s)",gt)),E&&(me=ft.lastIndex),nt=N.call(yt?Le:ft,St),yt?nt?(nt.input=nt.input.slice(wt),nt[0]=nt[0].slice(wt),nt.index=ft.lastIndex,ft.lastIndex+=nt[0].length):ft.lastIndex=0:E&&nt&&(ft.lastIndex=ft.global?nt.index+nt[0].length:me),pe&&nt&&1<nt.length&&Be.call(nt[0],Le,function(){for(tt=1;tt<arguments.length-2;tt++)arguments[tt]===void 0&&(nt[tt]=void 0)}),nt}:b},{"./regexp-flags":113,"./regexp-sticky-helpers":114}],113:[function(t,l,u){var s=t("../internals/an-object");l.exports=function(){var p=s(this),d="";return p.global&&(d+="g"),p.ignoreCase&&(d+="i"),p.multiline&&(d+="m"),p.dotAll&&(d+="s"),p.unicode&&(d+="u"),p.sticky&&(d+="y"),d}},{"../internals/an-object":10}],114:[function(t,l,u){t=t("./fails");function s(p,d){return RegExp(p,d)}u.UNSUPPORTED_Y=t(function(){var p=s("a","y");return p.lastIndex=2,p.exec("abcd")!=null}),u.BROKEN_CARET=t(function(){var p=s("^r","gy");return p.lastIndex=2,p.exec("str")!=null})},{"./fails":51}],115:[function(t,l,u){l.exports=function(s){if(s==null)throw TypeError("Can't call method on "+s);return s}},{}],116:[function(t,l,u){l.exports=Object.is||function(s,p){return s===p?s!==0||1/s==1/p:s!=s&&p!=p}},{}],117:[function(t,l,u){var s=t("../internals/global"),p=t("../internals/create-non-enumerable-property");l.exports=function(d,h){try{p(s,d,h)}catch{s[d]=h}return h}},{"../internals/create-non-enumerable-property":38,"../internals/global":60}],118:[function(t,l,u){var s=t("../internals/get-built-in"),p=t("../internals/object-define-property"),d=t("../internals/well-known-symbol"),h=t("../internals/descriptors"),N=d("species");l.exports=function(b){var b=s(b),E=p.f;h&&b&&!b[N]&&E(b,N,{configurable:!0,get:function(){return this}})}},{"../internals/descriptors":43,"../internals/get-built-in":57,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],119:[function(t,l,u){var s=t("../internals/object-define-property").f,p=t("../internals/has"),d=t("../internals/well-known-symbol")("toStringTag");l.exports=function(h,N,Be){h&&!p(h=Be?h:h.prototype,d)&&s(h,d,{configurable:!0,value:N})}},{"../internals/has":61,"../internals/object-define-property":93,"../internals/well-known-symbol":150}],120:[function(t,l,u){var s=t("../internals/shared"),p=t("../internals/uid"),d=s("keys");l.exports=function(h){return d[h]||(d[h]=p(h))}},{"../internals/shared":122,"../internals/uid":147}],121:[function(s,l,u){var d=s("../internals/global"),s=s("../internals/set-global"),p="__core-js_shared__",d=d[p]||s(p,{});l.exports=d},{"../internals/global":60,"../internals/set-global":117}],122:[function(t,l,u){var s=t("../internals/is-pure"),p=t("../internals/shared-store");(l.exports=function(d,h){return p[d]||(p[d]=h!==void 0?h:{})})("versions",[]).push({version:"3.6.5",mode:s?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},{"../internals/is-pure":76,"../internals/shared-store":121}],123:[function(t,l,u){var s=t("../internals/an-object"),p=t("../internals/a-function"),d=t("../internals/well-known-symbol")("species");l.exports=function(Be,N){var Be=s(Be).constructor;return Be===void 0||(Be=s(Be)[d])==null?N:p(Be)}},{"../internals/a-function":5,"../internals/an-object":10,"../internals/well-known-symbol":150}],124:[function(t,l,u){var s=t("../internals/fails");l.exports=function(p){return s(function(){var d=""[p]('"');return d!==d.toLowerCase()||3<d.split('"').length})}},{"../internals/fails":51}],125:[function(t,l,u){function s(h){return function(E,de){var b,E=String(d(E)),de=p(de),pe=E.length;return de<0||pe<=de?h?"":void 0:(b=E.charCodeAt(de))<55296||56319<b||de+1===pe||(pe=E.charCodeAt(de+1))<56320||57343<pe?h?E.charAt(de):b:h?E.slice(de,de+2):pe-56320+(b-55296<<10)+65536}}var p=t("../internals/to-integer"),d=t("../internals/require-object-coercible");l.exports={codeAt:s(!1),charAt:s(!0)}},{"../internals/require-object-coercible":115,"../internals/to-integer":137}],126:[function(t,l,u){t=t("../internals/engine-user-agent"),l.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(t)},{"../internals/engine-user-agent":47}],127:[function(t,l,u){function s(Be){return function(pe,Le,me){var pe=String(h(pe)),Ye=pe.length,me=me===void 0?" ":String(me),Le=p(Le);return Le<=Ye||me==""?pe:((Ye=d.call(me,N((Le=Le-Ye)/me.length))).length>Le&&(Ye=Ye.slice(0,Le)),Be?pe+Ye:Ye+pe)}}var p=t("../internals/to-length"),d=t("../internals/string-repeat"),h=t("../internals/require-object-coercible"),N=Math.ceil;l.exports={start:s(!1),end:s(!0)}},{"../internals/require-object-coercible":115,"../internals/string-repeat":129,"../internals/to-length":138}],128:[function(t,l,u){function s(nt){return nt+22+75*(nt<26)}function p(nt){var tt,ft=[],yt=(nt=function(Ut){for(var Yt=[],Zt=0,vt=Ut.length;Zt<vt;){var Rt,Lt=Ut.charCodeAt(Zt++);55296<=Lt&&Lt<=56319&&Zt<vt?(64512&(Rt=Ut.charCodeAt(Zt++)))==56320?Yt.push(((1023&Lt)<<10)+(1023&Rt)+65536):(Yt.push(Lt),Zt--):Yt.push(Lt)}return Yt}(nt)).length,gt=128,mt=0,wt=72;for(Et=0;Et<nt.length;Et++)(tt=nt[Et])<128&&ft.push(Le(tt));var St=ft.length,bt=St;for(St&&ft.push("-");bt<yt;){for(var Ct=d,Et=0;Et<nt.length;Et++)gt<=(tt=nt[Et])&&tt<Ct&&(Ct=tt);var It=bt+1;if(Ct-gt>me((d-mt)/It))throw RangeError(pe);for(mt+=(Ct-gt)*It,gt=Ct,Et=0;Et<nt.length;Et++){if((tt=nt[Et])<gt&&++mt>d)throw RangeError(pe);if(tt==gt){for(var Dt=mt,Pt=h;;Pt+=h){var qt=Pt<=wt?1:wt+N<=Pt?N:Pt-wt;if(Dt<qt)break;var Ht=Dt-qt,Gt=h-qt;ft.push(Le(s(qt+Ht%Gt))),Dt=me(Ht/Gt)}ft.push(Le(s(Dt))),wt=function(Ut,Yt,Zt){var vt=0;for(Ut=Zt?me(Ut/b):Ut>>1,Ut+=me(Ut/Yt);Ye*N>>1<Ut;vt+=h)Ut=me(Ut/Ye);return me(vt+(Ye+1)*Ut/(Ut+Be))}(mt,It,bt==St),mt=0,++bt}}++mt,++gt}return ft.join("")}var d=2147483647,h=36,N=26,Be=38,b=700,E=/[^\0-\u007E]/,de=/[.\u3002\uFF0E\uFF61]/g,pe="Overflow: input needs wider integers to process",Ye=h-1,me=Math.floor,Le=String.fromCharCode;l.exports=function(nt){for(var tt,ft=[],yt=nt.toLowerCase().replace(de,".").split("."),gt=0;gt<yt.length;gt++)tt=yt[gt],ft.push(E.test(tt)?"xn--"+p(tt):tt);return ft.join(".")}},{}],129:[function(t,l,u){var s=t("../internals/to-integer"),p=t("../internals/require-object-coercible");l.exports="".repeat||function(d){var h=String(p(this)),N="",Be=s(d);if(Be<0||Be==1/0)throw RangeError("Wrong number of repetitions");for(;0<Be;(Be>>>=1)&&(h+=h))1&Be&&(N+=h);return N}},{"../internals/require-object-coercible":115,"../internals/to-integer":137}],130:[function(t,l,u){var s=t("../internals/fails"),p=t("../internals/whitespaces");l.exports=function(d){return s(function(){return!!p[d]()||""[d]()!=""||p[d].name!==d})}},{"../internals/fails":51,"../internals/whitespaces":151}],131:[function(d,l,u){function s(Be){return function(b){return b=String(p(b)),1&Be&&(b=b.replace(h,"")),b=2&Be?b.replace(N,""):b}}var p=d("../internals/require-object-coercible"),d="["+d("../internals/whitespaces")+"]",h=RegExp("^"+d+d+"*"),N=RegExp(d+d+"*$");l.exports={start:s(1),end:s(2),trim:s(3)}},{"../internals/require-object-coercible":115,"../internals/whitespaces":151}],132:[function(Ye,l,u){function s(bt){return function(){St(bt)}}function p(bt){St(bt.data)}function d(bt){N.postMessage(bt+"",me.protocol+"//"+me.host)}var h,N=Ye("../internals/global"),Be=Ye("../internals/fails"),b=Ye("../internals/classof-raw"),E=Ye("../internals/function-bind-context"),de=Ye("../internals/html"),pe=Ye("../internals/document-create-element"),Ye=Ye("../internals/engine-is-ios"),me=N.location,Le=N.setImmediate,nt=N.clearImmediate,tt=N.process,ft=N.MessageChannel,yt=N.Dispatch,gt=0,mt={},wt="onreadystatechange",St=function(bt){var Ct;mt.hasOwnProperty(bt)&&(Ct=mt[bt],delete mt[bt],Ct())};Le&&nt||(Le=function(bt){for(var Ct=[],Et=1;Et<arguments.length;)Ct.push(arguments[Et++]);return mt[++gt]=function(){(typeof bt=="function"?bt:Function(bt)).apply(void 0,Ct)},h(gt),gt},nt=function(bt){delete mt[bt]},b(tt)=="process"?h=function(bt){tt.nextTick(s(bt))}:yt&&yt.now?h=function(bt){yt.now(s(bt))}:ft&&!Ye?(Ye=(b=new ft).port2,b.port1.onmessage=p,h=E(Ye.postMessage,Ye,1)):!N.addEventListener||typeof postMessage!="function"||N.importScripts||Be(d)||me.protocol==="file:"?h=wt in pe("script")?function(bt){de.appendChild(pe("script"))[wt]=function(){de.removeChild(this),St(bt)}}:function(bt){setTimeout(s(bt),0)}:(h=d,N.addEventListener("message",p,!1))),l.exports={set:Le,clear:nt}},{"../internals/classof-raw":28,"../internals/document-create-element":44,"../internals/engine-is-ios":46,"../internals/fails":51,"../internals/function-bind-context":55,"../internals/global":60,"../internals/html":64}],133:[function(t,l,u){var s=t("../internals/classof-raw");l.exports=function(p){if(typeof p!="number"&&s(p)!="Number")throw TypeError("Incorrect invocation");return+p}},{"../internals/classof-raw":28}],134:[function(t,l,u){var s=t("../internals/to-integer"),p=Math.max,d=Math.min;l.exports=function(h,N){return h=s(h),h<0?p(h+N,0):d(h,N)}},{"../internals/to-integer":137}],135:[function(t,l,u){var s=t("../internals/to-integer"),p=t("../internals/to-length");l.exports=function(h){if(h===void 0)return 0;var h=s(h),N=p(h);if(h!==N)throw RangeError("Wrong length or index");return N}},{"../internals/to-integer":137,"../internals/to-length":138}],136:[function(t,l,u){var s=t("../internals/indexed-object"),p=t("../internals/require-object-coercible");l.exports=function(d){return s(p(d))}},{"../internals/indexed-object":67,"../internals/require-object-coercible":115}],137:[function(t,l,u){var s=Math.ceil,p=Math.floor;l.exports=function(d){return isNaN(d=+d)?0:(0<d?p:s)(d)}},{}],138:[function(t,l,u){var s=t("../internals/to-integer"),p=Math.min;l.exports=function(d){return 0<d?p(s(d),9007199254740991):0}},{"../internals/to-integer":137}],139:[function(t,l,u){var s=t("../internals/require-object-coercible");l.exports=function(p){return Object(s(p))}},{"../internals/require-object-coercible":115}],140:[function(t,l,u){var s=t("../internals/to-positive-integer");l.exports=function(p,d){if(p=s(p),p%d)throw RangeError("Wrong offset");return p}},{"../internals/to-positive-integer":141}],141:[function(t,l,u){var s=t("../internals/to-integer");l.exports=function(p){if(p=s(p),p<0)throw RangeError("The argument can't be less than 0");return p}},{"../internals/to-integer":137}],142:[function(t,l,u){var s=t("../internals/is-object");l.exports=function(p,d){if(!s(p))return p;var h,N;if(d&&typeof(h=p.toString)=="function"&&!s(N=h.call(p))||typeof(h=p.valueOf)=="function"&&!s(N=h.call(p))||!d&&typeof(h=p.toString)=="function"&&!s(N=h.call(p)))return N;throw TypeError("Can't convert object to primitive value")}},{"../internals/is-object":75}],143:[function(t,l,u){var s={};s[t("../internals/well-known-symbol")("toStringTag")]="z",l.exports=String(s)==="[object z]"},{"../internals/well-known-symbol":150}],144:[function(t,l,u){function s(_r,sr){for(var jr=0,Nr=sr.length,kr=new(Wt(_r))(Nr);jr<Nr;)kr[jr]=sr[jr++];return kr}function p(_r,sr){Rt(_r,sr,{get:function(){return Zt(this)[sr]}})}function d(_r){return _r instanceof er||(_r=St(_r))=="ArrayBuffer"||_r=="SharedArrayBuffer"}function h(_r,sr){return ir(_r)&&typeof sr!="symbol"&&sr in _r&&String(+sr)==String(sr)}function N(_r,sr){return h(_r,sr=mt(sr,!0))?nt(2,_r[sr]):Lt(_r,sr)}function Be(_r,sr,jr){return!(h(_r,sr=mt(sr,!0))&&bt(jr)&&wt(jr,"value"))||wt(jr,"get")||wt(jr,"set")||jr.configurable||wt(jr,"writable")&&!jr.writable||wt(jr,"enumerable")&&!jr.enumerable?Rt(_r,sr,jr):(_r[sr]=jr.value,_r)}var b=t("../internals/export"),E=t("../internals/global"),de=t("../internals/descriptors"),pe=t("../internals/typed-array-constructors-require-wrappers"),Ye=t("../internals/array-buffer-view-core"),me=t("../internals/array-buffer"),Le=t("../internals/an-instance"),nt=t("../internals/create-property-descriptor"),tt=t("../internals/create-non-enumerable-property"),ft=t("../internals/to-length"),yt=t("../internals/to-index"),gt=t("../internals/to-offset"),mt=t("../internals/to-primitive"),wt=t("../internals/has"),St=t("../internals/classof"),bt=t("../internals/is-object"),Ct=t("../internals/object-create"),Et=t("../internals/object-set-prototype-of"),It=t("../internals/object-get-own-property-names").f,Dt=t("../internals/typed-array-from"),Pt=t("../internals/array-iteration").forEach,qt=t("../internals/set-species"),Ht=t("../internals/object-define-property"),Gt=t("../internals/object-get-own-property-descriptor"),Ut=t("../internals/internal-state"),Yt=t("../internals/inherit-if-required"),Zt=Ut.get,vt=Ut.set,Rt=Ht.f,Lt=Gt.f,Vt=Math.round,Jt=E.RangeError,er=me.ArrayBuffer,ur=me.DataView,yr=Ye.NATIVE_ARRAY_BUFFER_VIEWS,Qt=Ye.TYPED_ARRAY_TAG,nr=Ye.TypedArray,or=Ye.TypedArrayPrototype,Wt=Ye.aTypedArrayConstructor,ir=Ye.isTypedArray,br="BYTES_PER_ELEMENT",Sr="Wrong length";de?(yr||(Gt.f=N,Ht.f=Be,p(or,"buffer"),p(or,"byteOffset"),p(or,"byteLength"),p(or,"length")),b({target:"Object",stat:!0,forced:!yr},{getOwnPropertyDescriptor:N,defineProperty:Be}),l.exports=function(Er,sr,jr){function Nr(Cr,tr){Rt(Cr,tr,{get:function(){var ar=this,Kt=tr;return(ar=Zt(ar)).view[Pr](Kt*kr+ar.byteOffset,!0)},set:function(ar){var Kt=this,cr=tr;Kt=Zt(Kt),jr&&(ar=(ar=Vt(ar))<0?0:255<ar?255:255&ar),Kt.view[Vr](cr*kr+Kt.byteOffset,ar,!0)},enumerable:!0})}var kr=Er.match(/\d+$/)[0]/8,qr=Er+(jr?"Clamped":"")+"Array",Pr="get"+Er,Vr="set"+Er,Xr=E[qr],Gr=Xr,Er=Gr&&Gr.prototype,Ir={};yr?pe&&(Gr=sr(function(Cr,tr,ar,Kt){return Le(Cr,Gr,qr),Yt(bt(tr)?d(tr)?Kt!==void 0?new Xr(tr,gt(ar,kr),Kt):ar!==void 0?new Xr(tr,gt(ar,kr)):new Xr(tr):ir(tr)?s(Gr,tr):Dt.call(Gr,tr):new Xr(yt(tr)),Cr,Gr)}),Et&&Et(Gr,nr),Pt(It(Xr),function(Cr){Cr in Gr||tt(Gr,Cr,Xr[Cr])}),Gr.prototype=Er):(Gr=sr(function(Cr,tr,ar,Kt){Le(Cr,Gr,qr);var cr,Tr,Dr=0,zr=0;if(bt(tr)){if(!d(tr))return ir(tr)?s(Gr,tr):Dt.call(Gr,tr);var fn=tr,zr=gt(ar,kr),ar=tr.byteLength;if(Kt===void 0){if(ar%kr||(cr=ar-zr)<0)throw Jt(Sr)}else if(ar<(cr=ft(Kt)*kr)+zr)throw Jt(Sr);Tr=cr/kr}else Tr=yt(tr),fn=new er(cr=Tr*kr);for(vt(Cr,{buffer:fn,byteOffset:zr,byteLength:cr,length:Tr,view:new ur(fn)});Dr<Tr;)Nr(Cr,Dr++)}),Et&&Et(Gr,nr),Er=Gr.prototype=Ct(or)),Er.constructor!==Gr&&tt(Er,"constructor",Gr),Qt&&tt(Er,Qt,qr),Ir[qr]=Gr,b({global:!0,forced:Gr!=Xr,sham:!yr},Ir),br in Gr||tt(Gr,br,kr),br in Er||tt(Er,br,kr),qt(qr)}):l.exports=function(){}},{"../internals/an-instance":9,"../internals/array-buffer":13,"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/classof":29,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-object":75,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-set-prototype-of":102,"../internals/set-species":118,"../internals/to-index":135,"../internals/to-length":138,"../internals/to-offset":140,"../internals/to-primitive":142,"../internals/typed-array-constructors-require-wrappers":145,"../internals/typed-array-from":146}],145:[function(h,l,u){var s=h("../internals/global"),p=h("../internals/fails"),d=h("../internals/check-correctness-of-iteration"),h=h("../internals/array-buffer-view-core").NATIVE_ARRAY_BUFFER_VIEWS,N=s.ArrayBuffer,Be=s.Int8Array;l.exports=!h||!p(function(){Be(1)})||!p(function(){new Be(-1)})||!d(function(b){new Be,new Be(null),new Be(1.5),new Be(b)},!0)||p(function(){return new Be(new N(2),1,void 0).length!==1})},{"../internals/array-buffer-view-core":12,"../internals/check-correctness-of-iteration":27,"../internals/fails":51,"../internals/global":60}],146:[function(t,l,u){var s=t("../internals/to-object"),p=t("../internals/to-length"),d=t("../internals/get-iterator-method"),h=t("../internals/is-array-iterator-method"),N=t("../internals/function-bind-context"),Be=t("../internals/array-buffer-view-core").aTypedArrayConstructor;l.exports=function(b){var E,de,pe,Ye,me,Le,nt=s(b),tt=arguments.length,ft=1<tt?arguments[1]:void 0,yt=ft!==void 0,gt=d(nt);if(gt!=null&&!h(gt))for(Le=(me=gt.call(nt)).next,nt=[];!(Ye=Le.call(me)).done;)nt.push(Ye.value);for(yt&&2<tt&&(ft=N(ft,arguments[2],2)),de=p(nt.length),pe=new(Be(this))(de),E=0;E<de;E++)pe[E]=yt?ft(nt[E],E):nt[E];return pe}},{"../internals/array-buffer-view-core":12,"../internals/function-bind-context":55,"../internals/get-iterator-method":58,"../internals/is-array-iterator-method":72,"../internals/to-length":138,"../internals/to-object":139}],147:[function(t,l,u){var s=0,p=Math.random();l.exports=function(d){return"Symbol("+String(d===void 0?"":d)+")_"+(++s+p).toString(36)}},{}],148:[function(t,l,u){t=t("../internals/native-symbol"),l.exports=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/native-symbol":84}],149:[function(t,l,u){t=t("../internals/well-known-symbol"),u.f=t},{"../internals/well-known-symbol":150}],150:[function(Be,l,u){var s=Be("../internals/global"),p=Be("../internals/shared"),d=Be("../internals/has"),h=Be("../internals/uid"),N=Be("../internals/native-symbol"),Be=Be("../internals/use-symbol-as-uid"),b=p("wks"),E=s.Symbol,de=Be?E:E&&E.withoutSetter||h;l.exports=function(pe){return d(b,pe)||(N&&d(E,pe)?b[pe]=E[pe]:b[pe]=de("Symbol."+pe)),b[pe]}},{"../internals/global":60,"../internals/has":61,"../internals/native-symbol":84,"../internals/shared":122,"../internals/uid":147,"../internals/use-symbol-as-uid":148}],151:[function(t,l,u){l.exports=`	
\v\f\r \u2028\u2029\uFEFF`},{}],152:[function(d,l,u){var s=d("../internals/export"),p=d("../internals/global"),N=d("../internals/array-buffer"),d=d("../internals/set-species"),h="ArrayBuffer",N=N[h];s({global:!0,forced:p[h]!==N},{ArrayBuffer:N}),d(h)},{"../internals/array-buffer":13,"../internals/export":50,"../internals/global":60,"../internals/set-species":118}],153:[function(nt,l,u){var s=nt("../internals/export"),p=nt("../internals/fails"),d=nt("../internals/is-array"),h=nt("../internals/is-object"),N=nt("../internals/to-object"),Be=nt("../internals/to-length"),b=nt("../internals/create-property"),E=nt("../internals/array-species-create"),de=nt("../internals/array-method-has-species-support"),Le=nt("../internals/well-known-symbol"),nt=nt("../internals/engine-v8-version"),pe=Le("isConcatSpreadable"),Ye=9007199254740991,me="Maximum allowed index exceeded",Le=51<=nt||!p(function(){var tt=[];return tt[pe]=!1,tt.concat()[0]!==tt}),nt=de("concat");s({target:"Array",proto:!0,forced:!Le||!nt},{concat:function(tt){for(var ft,yt,gt,mt,wt,St=N(this),bt=E(St,0),Ct=0,Et=-1,It=arguments.length;Et<It;Et++)if(wt=void 0,!h(mt=gt=Et===-1?St:arguments[Et])||((wt=mt[pe])!==void 0?!wt:!d(mt))){if(Ye<=Ct)throw TypeError(me);b(bt,Ct++,gt)}else{if(yt=Be(gt.length),Ye<Ct+yt)throw TypeError(me);for(ft=0;ft<yt;ft++,Ct++)ft in gt&&b(bt,Ct,gt[ft])}return bt.length=Ct,bt}})},{"../internals/array-method-has-species-support":21,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/fails":51,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-length":138,"../internals/to-object":139,"../internals/well-known-symbol":150}],154:[function(d,l,u){var s=d("../internals/export"),p=d("../internals/array-copy-within"),d=d("../internals/add-to-unscopables");s({target:"Array",proto:!0},{copyWithin:p}),d("copyWithin")},{"../internals/add-to-unscopables":7,"../internals/array-copy-within":14,"../internals/export":50}],155:[function(h,l,u){var s=h("../internals/export"),p=h("../internals/array-iteration").every,d=h("../internals/array-method-is-strict"),h=h("../internals/array-method-uses-to-length"),d=d("every"),h=h("every");s({target:"Array",proto:!0,forced:!d||!h},{every:function(N){return p(this,N,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],156:[function(d,l,u){var s=d("../internals/export"),p=d("../internals/array-fill"),d=d("../internals/add-to-unscopables");s({target:"Array",proto:!0},{fill:p}),d("fill")},{"../internals/add-to-unscopables":7,"../internals/array-fill":15,"../internals/export":50}],157:[function(h,l,u){var s=h("../internals/export"),p=h("../internals/array-iteration").filter,d=h("../internals/array-method-has-species-support"),h=h("../internals/array-method-uses-to-length"),d=d("filter"),h=h("filter");s({target:"Array",proto:!0,forced:!d||!h},{filter:function(N){return p(this,N,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],158:[function(Be,l,u){var s=Be("../internals/export"),p=Be("../internals/array-iteration").findIndex,d=Be("../internals/add-to-unscopables"),Be=Be("../internals/array-method-uses-to-length"),h="findIndex",N=!0,Be=Be(h);h in[]&&Array(1)[h](function(){N=!1}),s({target:"Array",proto:!0,forced:N||!Be},{findIndex:function(b){return p(this,b,1<arguments.length?arguments[1]:void 0)}}),d(h)},{"../internals/add-to-unscopables":7,"../internals/array-iteration":19,"../internals/array-method-uses-to-length":23,"../internals/export":50}],159:[function(t,l,u){var s=t("../internals/export"),p=t("../internals/flatten-into-array"),d=t("../internals/to-object"),h=t("../internals/to-length"),N=t("../internals/a-function"),Be=t("../internals/array-species-create");s({target:"Array",proto:!0},{flatMap:function(b){var E,de=d(this),pe=h(de.length);return N(b),(E=Be(de,0)).length=p(E,de,de,pe,0,1,b,1<arguments.length?arguments[1]:void 0),E}})},{"../internals/a-function":5,"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-length":138,"../internals/to-object":139}],160:[function(t,l,u){var s=t("../internals/export"),p=t("../internals/flatten-into-array"),d=t("../internals/to-object"),h=t("../internals/to-length"),N=t("../internals/to-integer"),Be=t("../internals/array-species-create");s({target:"Array",proto:!0},{flat:function(){var b=arguments.length?arguments[0]:void 0,E=d(this),de=h(E.length),pe=Be(E,0);return pe.length=p(pe,E,E,de,0,b===void 0?1:N(b)),pe}})},{"../internals/array-species-create":25,"../internals/export":50,"../internals/flatten-into-array":53,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],161:[function(p,l,u){var s=p("../internals/export"),p=p("../internals/array-for-each");s({target:"Array",proto:!0,forced:[].forEach!=p},{forEach:p})},{"../internals/array-for-each":16,"../internals/export":50}],162:[function(t,l,u){var s=t("../internals/export"),p=t("../internals/array-from");s({target:"Array",stat:!0,forced:!t("../internals/check-correctness-of-iteration")(function(d){Array.from(d)})},{from:p})},{"../internals/array-from":17,"../internals/check-correctness-of-iteration":27,"../internals/export":50}],163:[function(t,l,u){var s=t("../internals/export"),p=t("../internals/array-includes").includes,d=t("../internals/add-to-unscopables");s({target:"Array",proto:!0,forced:!t("../internals/array-method-uses-to-length")("indexOf",{ACCESSORS:!0,1:0})},{includes:function(h){return p(this,h,1<arguments.length?arguments[1]:void 0)}}),d("includes")},{"../internals/add-to-unscopables":7,"../internals/array-includes":18,"../internals/array-method-uses-to-length":23,"../internals/export":50}],164:[function(Be,l,u){var s=Be("../internals/export"),p=Be("../internals/array-includes").indexOf,N=Be("../internals/array-method-is-strict"),Be=Be("../internals/array-method-uses-to-length"),d=[].indexOf,h=!!d&&1/[1].indexOf(1,-0)<0,N=N("indexOf"),Be=Be("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:h||!N||!Be},{indexOf:function(b){return h?d.apply(this,arguments)||0:p(this,b,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-includes":18,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],165:[function(N,l,u){var s=N("../internals/to-indexed-object"),p=N("../internals/add-to-unscopables"),d=N("../internals/iterators"),h=N("../internals/internal-state"),N=N("../internals/define-iterator"),Be="Array Iterator",b=h.set,E=h.getterFor(Be);l.exports=N(Array,"Array",function(de,pe){b(this,{type:Be,target:s(de),index:0,kind:pe})},function(){var de=E(this),pe=de.target,Ye=de.kind,me=de.index++;return!pe||me>=pe.length?{value:de.target=void 0,done:!0}:Ye=="keys"?{value:me,done:!1}:Ye=="values"?{value:pe[me],done:!1}:{value:[me,pe[me]],done:!1}},"values"),d.Arguments=d.Array,p("keys"),p("values"),p("entries")},{"../internals/add-to-unscopables":7,"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/iterators":80,"../internals/to-indexed-object":136}],166:[function(N,l,u){var s=N("../internals/export"),h=N("../internals/indexed-object"),p=N("../internals/to-indexed-object"),N=N("../internals/array-method-is-strict"),d=[].join,h=h!=Object,N=N("join",",");s({target:"Array",proto:!0,forced:h||!N},{join:function(Be){return d.call(p(this),Be===void 0?",":Be)}})},{"../internals/array-method-is-strict":22,"../internals/export":50,"../internals/indexed-object":67,"../internals/to-indexed-object":136}],167:[function(p,l,u){var s=p("../internals/export"),p=p("../internals/array-last-index-of");s({target:"Array",proto:!0,forced:p!==[].lastIndexOf},{lastIndexOf:p})},{"../internals/array-last-index-of":20,"../internals/export":50}],168:[function(h,l,u){var s=h("../internals/export"),p=h("../internals/array-iteration").map,d=h("../internals/array-method-has-species-support"),h=h("../internals/array-method-uses-to-length"),d=d("map"),h=h("map");s({target:"Array",proto:!0,forced:!d||!h},{map:function(N){return p(this,N,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/export":50}],169:[function(pe,l,u){var s=pe("../internals/export"),p=pe("../internals/is-object"),d=pe("../internals/is-array"),h=pe("../internals/to-absolute-index"),N=pe("../internals/to-length"),Be=pe("../internals/to-indexed-object"),b=pe("../internals/create-property"),E=pe("../internals/well-known-symbol"),de=pe("../internals/array-method-has-species-support"),pe=pe("../internals/array-method-uses-to-length"),de=de("slice"),pe=pe("slice",{ACCESSORS:!0,0:0,1:2}),Ye=E("species"),me=[].slice,Le=Math.max;s({target:"Array",proto:!0,forced:!de||!pe},{slice:function(nt,tt){var ft,yt,gt,mt=Be(this),wt=N(mt.length),St=h(nt,wt),bt=h(tt===void 0?wt:tt,wt);if(d(mt)&&((ft=typeof(ft=mt.constructor)=="function"&&(ft===Array||d(ft.prototype))||p(ft)&&(ft=ft[Ye])===null?void 0:ft)===Array||ft===void 0))return me.call(mt,St,bt);for(yt=new(ft===void 0?Array:ft)(Le(bt-St,0)),gt=0;St<bt;St++,gt++)St in mt&&b(yt,gt,mt[St]);return yt.length=gt,yt}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/create-property":40,"../internals/export":50,"../internals/is-array":73,"../internals/is-object":75,"../internals/to-absolute-index":134,"../internals/to-indexed-object":136,"../internals/to-length":138,"../internals/well-known-symbol":150}],170:[function(h,l,u){var s=h("../internals/export"),p=h("../internals/array-iteration").some,d=h("../internals/array-method-is-strict"),h=h("../internals/array-method-uses-to-length"),d=d("some"),h=h("some");s({target:"Array",proto:!0,forced:!d||!h},{some:function(N){return p(this,N,1<arguments.length?arguments[1]:void 0)}})},{"../internals/array-iteration":19,"../internals/array-method-is-strict":22,"../internals/array-method-uses-to-length":23,"../internals/export":50}],171:[function(de,l,u){var s=de("../internals/export"),p=de("../internals/to-absolute-index"),d=de("../internals/to-integer"),h=de("../internals/to-length"),N=de("../internals/to-object"),Be=de("../internals/array-species-create"),b=de("../internals/create-property"),E=de("../internals/array-method-has-species-support"),de=de("../internals/array-method-uses-to-length"),E=E("splice"),de=de("splice",{ACCESSORS:!0,0:0,1:2}),pe=Math.max,Ye=Math.min;s({target:"Array",proto:!0,forced:!E||!de},{splice:function(Ct,Le){var nt,tt,ft,yt,gt,mt,wt=N(this),St=h(wt.length),bt=p(Ct,St),Ct=arguments.length;if(Ct===0?nt=tt=0:tt=Ct===1?(nt=0,St-bt):(nt=Ct-2,Ye(pe(d(Le),0),St-bt)),9007199254740991<St+nt-tt)throw TypeError("Maximum allowed length exceeded");for(ft=Be(wt,tt),yt=0;yt<tt;yt++)(gt=bt+yt)in wt&&b(ft,yt,wt[gt]);if(nt<(ft.length=tt)){for(yt=bt;yt<St-tt;yt++)mt=yt+nt,(gt=yt+tt)in wt?wt[mt]=wt[gt]:delete wt[mt];for(yt=St;St-tt+nt<yt;yt--)delete wt[yt-1]}else if(tt<nt)for(yt=St-tt;bt<yt;yt--)mt=yt+nt-1,(gt=yt+tt-1)in wt?wt[mt]=wt[gt]:delete wt[mt];for(yt=0;yt<nt;yt++)wt[yt+bt]=arguments[yt+2];return wt.length=St-tt+nt,ft}})},{"../internals/array-method-has-species-support":21,"../internals/array-method-uses-to-length":23,"../internals/array-species-create":25,"../internals/create-property":40,"../internals/export":50,"../internals/to-absolute-index":134,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],172:[function(t,l,u){t("../internals/add-to-unscopables")("flatMap")},{"../internals/add-to-unscopables":7}],173:[function(t,l,u){t("../internals/add-to-unscopables")("flat")},{"../internals/add-to-unscopables":7}],174:[function(p,l,u){var s=p("../internals/descriptors"),p=p("../internals/object-define-property").f,d=Function.prototype,h=d.toString,N=/^\s*function ([^ (]*)/;!s||"name"in d||p(d,"name",{configurable:!0,get:function(){try{return h.call(this).match(N)[1]}catch{return""}}})},{"../internals/descriptors":43,"../internals/object-define-property":93}],175:[function(p,l,u){var s=p("../internals/collection"),p=p("../internals/collection-strong");l.exports=s("Map",function(d){return function(){return d(this,arguments.length?arguments[0]:void 0)}},p)},{"../internals/collection":32,"../internals/collection-strong":30}],176:[function(s,l,u){var s=s("../internals/export"),p=Math.hypot,d=Math.abs,h=Math.sqrt;s({target:"Math",stat:!0,forced:!!p&&p(1/0,NaN)!==1/0},{hypot:function(N,Be){for(var b,E,de=0,pe=0,Ye=arguments.length,me=0;pe<Ye;)me<(b=d(arguments[pe++]))?(de=de*(E=me/b)*E+1,me=b):de+=0<b?(E=b/me)*E:b;return me===1/0?1/0:me*h(de)}})},{"../internals/export":50}],177:[function(s,l,u){var s=s("../internals/export"),p=Math.log,d=Math.LN2;s({target:"Math",stat:!0},{log2:function(h){return p(h)/d}})},{"../internals/export":50}],178:[function(t,l,u){t("../internals/export")({target:"Math",stat:!0},{sign:t("../internals/math-sign")})},{"../internals/export":50,"../internals/math-sign":81}],179:[function(t,l,u){function s(Et){var It,Dt,Pt,qt,Ht,Gt,Ut,Yt=de(Et,!1);if(typeof Yt=="string"&&2<Yt.length){if((Et=(Yt=tt(Yt)).charCodeAt(0))===43||Et===45){if((It=Yt.charCodeAt(2))===88||It===120)return NaN}else if(Et===48){switch(Yt.charCodeAt(1)){case 66:case 98:Dt=2,Pt=49;break;case 79:case 111:Dt=8,Pt=55;break;default:return+Yt}for(Ht=(qt=Yt.slice(2)).length,Gt=0;Gt<Ht;Gt++)if((Ut=qt.charCodeAt(Gt))<48||Pt<Ut)return NaN;return parseInt(qt,Dt)}}return+Yt}var p=t("../internals/descriptors"),d=t("../internals/global"),h=t("../internals/is-forced"),N=t("../internals/redefine"),Be=t("../internals/has"),b=t("../internals/classof-raw"),E=t("../internals/inherit-if-required"),de=t("../internals/to-primitive"),pe=t("../internals/fails"),Ye=t("../internals/object-create"),me=t("../internals/object-get-own-property-names").f,Le=t("../internals/object-get-own-property-descriptor").f,nt=t("../internals/object-define-property").f,tt=t("../internals/string-trim").trim,ft="Number",yt=d[ft],gt=yt.prototype,mt=b(Ye(gt))==ft;if(h(ft,!yt(" 0o1")||!yt("0b1")||yt("+0x1"))){for(var wt,St=function(It){var It=arguments.length<1?0:It,Dt=this;return Dt instanceof St&&(mt?pe(function(){gt.valueOf.call(Dt)}):b(Dt)!=ft)?E(new yt(s(It)),Dt,St):s(It)},bt=p?me(yt):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),Ct=0;bt.length>Ct;Ct++)Be(yt,wt=bt[Ct])&&!Be(St,wt)&&nt(St,wt,Le(yt,wt));(St.prototype=gt).constructor=St,N(d,ft,St)}},{"../internals/classof-raw":28,"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/has":61,"../internals/inherit-if-required":68,"../internals/is-forced":74,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/redefine":110,"../internals/string-trim":131,"../internals/to-primitive":142}],180:[function(t,l,u){t("../internals/export")({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},{"../internals/export":50}],181:[function(t,l,u){t("../internals/export")({target:"Number",stat:!0},{isFinite:t("../internals/number-is-finite")})},{"../internals/export":50,"../internals/number-is-finite":89}],182:[function(Be,l,u){function s(de,pe,Ye){return pe===0?Ye:pe%2==1?s(de,pe-1,Ye*de):s(de*de,pe/2,Ye)}var p=Be("../internals/export"),d=Be("../internals/to-integer"),h=Be("../internals/this-number-value"),N=Be("../internals/string-repeat"),Be=Be("../internals/fails"),b=1 .toFixed,E=Math.floor;p({target:"Number",proto:!0,forced:b&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128")||!Be(function(){b.call({})})},{toFixed:function(ft){function pe(wt,St){for(var bt=-1,Ct=St;++bt<6;)Ct+=wt*yt[bt],yt[bt]=Ct%1e7,Ct=E(Ct/1e7)}function Ye(wt){for(var St=6,bt=0;0<=--St;)bt+=yt[St],yt[St]=E(bt/wt),bt=bt%wt*1e7}function me(){for(var wt,St=6,bt="";0<=--St;)bt===""&&St!==0&&yt[St]===0||(wt=String(yt[St]),bt=bt===""?wt:bt+N.call("0",7-wt.length)+wt);return bt}var Le,nt,tt=h(this),ft=d(ft),yt=[0,0,0,0,0,0],gt="",mt="0";if(ft<0||20<ft)throw RangeError("Incorrect fraction digits");if(tt!=tt)return"NaN";if(tt<=-1e21||1e21<=tt)return String(tt);if(tt<0&&(gt="-",tt=-tt),1e-21<tt)if(tt=(Le=function(wt){for(var St=0,bt=wt;4096<=bt;)St+=12,bt/=4096;for(;2<=bt;)St+=1,bt/=2;return St}(tt*s(2,69,1))-69)<0?tt*s(2,-Le,1):tt/s(2,Le,1),tt*=4503599627370496,0<(Le=52-Le)){for(pe(0,tt),nt=ft;7<=nt;)pe(1e7,0),nt-=7;for(pe(s(10,nt,1),0),nt=Le-1;23<=nt;)Ye(1<<23),nt-=23;Ye(1<<nt),pe(1,1),Ye(2),mt=me()}else pe(0,tt),pe(1<<-Le,0),mt=me()+N.call("0",ft);return mt=0<ft?gt+((tt=mt.length)<=ft?"0."+N.call("0",ft-tt)+mt:mt.slice(0,tt-ft)+"."+mt.slice(tt-ft)):gt+mt}})},{"../internals/export":50,"../internals/fails":51,"../internals/string-repeat":129,"../internals/this-number-value":133,"../internals/to-integer":137}],183:[function(p,l,u){var s=p("../internals/export"),p=p("../internals/object-assign");s({target:"Object",stat:!0,forced:Object.assign!==p},{assign:p})},{"../internals/export":50,"../internals/object-assign":90}],184:[function(t,l,u){var s=t("../internals/export"),p=t("../internals/object-to-array").entries;s({target:"Object",stat:!0},{entries:function(d){return p(d)}})},{"../internals/export":50,"../internals/object-to-array":103}],185:[function(t,l,u){var s=t("../internals/export"),p=t("../internals/iterate"),d=t("../internals/create-property");s({target:"Object",stat:!0},{fromEntries:function(h){var N={};return p(h,function(Be,b){d(N,Be,b)},void 0,!0),N}})},{"../internals/create-property":40,"../internals/export":50,"../internals/iterate":78}],186:[function(h,l,u){var s=h("../internals/export"),N=h("../internals/fails"),p=h("../internals/to-indexed-object"),d=h("../internals/object-get-own-property-descriptor").f,h=h("../internals/descriptors"),N=N(function(){d(1)});s({target:"Object",stat:!0,forced:!h||N,sham:!h},{getOwnPropertyDescriptor:function(Be,b){return d(p(Be),b)}})},{"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-descriptor":94,"../internals/to-indexed-object":136}],187:[function(d,l,u){var s=d("../internals/export"),p=d("../internals/fails"),d=d("../internals/object-get-own-property-names-external").f;s({target:"Object",stat:!0,forced:p(function(){return!Object.getOwnPropertyNames(1)})},{getOwnPropertyNames:d})},{"../internals/export":50,"../internals/fails":51,"../internals/object-get-own-property-names-external":95}],188:[function(N,l,u){var s=N("../internals/export"),p=N("../internals/fails"),d=N("../internals/to-object"),h=N("../internals/object-get-prototype-of"),N=N("../internals/correct-prototype-getter");s({target:"Object",stat:!0,forced:p(function(){h(1)}),sham:!N},{getPrototypeOf:function(Be){return h(d(Be))}})},{"../internals/correct-prototype-getter":35,"../internals/export":50,"../internals/fails":51,"../internals/object-get-prototype-of":98,"../internals/to-object":139}],189:[function(t,l,u){var s=t("../internals/export"),p=t("../internals/to-object"),d=t("../internals/object-keys");s({target:"Object",stat:!0,forced:t("../internals/fails")(function(){d(1)})},{keys:function(h){return d(p(h))}})},{"../internals/export":50,"../internals/fails":51,"../internals/object-keys":100,"../internals/to-object":139}],190:[function(d,l,u){var s=d("../internals/to-string-tag-support"),p=d("../internals/redefine"),d=d("../internals/object-to-string");s||p(Object.prototype,"toString",d,{unsafe:!0})},{"../internals/object-to-string":104,"../internals/redefine":110,"../internals/to-string-tag-support":143}],191:[function(jr,l,u){var s,p,d,h,N=jr("../internals/export"),Be=jr("../internals/is-pure"),b=jr("../internals/global"),E=jr("../internals/get-built-in"),de=jr("../internals/native-promise-constructor"),pe=jr("../internals/redefine"),Ye=jr("../internals/redefine-all"),me=jr("../internals/set-to-string-tag"),Le=jr("../internals/set-species"),nt=jr("../internals/is-object"),tt=jr("../internals/a-function"),ft=jr("../internals/an-instance"),yt=jr("../internals/classof-raw"),gt=jr("../internals/inspect-source"),mt=jr("../internals/iterate"),wt=jr("../internals/check-correctness-of-iteration"),St=jr("../internals/species-constructor"),bt=jr("../internals/task").set,Ct=jr("../internals/microtask"),Et=jr("../internals/promise-resolve"),It=jr("../internals/host-report-errors"),Dt=jr("../internals/new-promise-capability"),Pt=jr("../internals/perform"),qt=jr("../internals/internal-state"),Ht=jr("../internals/is-forced"),Nr=jr("../internals/well-known-symbol"),Gt=jr("../internals/engine-v8-version"),Ut=Nr("species"),Yt="Promise",Zt=qt.get,vt=qt.set,Rt=qt.getterFor(Yt),Lt=de,Vt=b.TypeError,Jt=b.document,er=b.process,ur=E("fetch"),yr=Dt.f,Qt=yr,nr=yt(er)=="process",or=!!(Jt&&Jt.createEvent&&b.dispatchEvent),Wt="unhandledrejection",ir="rejectionhandled",br=1,Sr=2,_r=1,sr=2,jr=Ht(Yt,function(){var Ir,Cr;return gt(Lt)===String(Lt)&&(Gt===66||!nr&&typeof PromiseRejectionEvent!="function")?!0:!(!Be||Lt.prototype.finally)||!(51<=Gt&&/native code/.test(Lt))&&(Cr=function(tr){tr(function(){},function(){})},((Ir=Lt.resolve(1)).constructor={})[Ut]=Cr,!(Ir.then(function(){})instanceof Cr))}),Nr=jr||!wt(function(Ir){Lt.all(Ir).catch(function(){})}),kr=function(Ir){var Cr;return!(!nt(Ir)||typeof(Cr=Ir.then)!="function")&&Cr},qr=function(Ir,Cr,tr){var ar;Cr.notified||(Cr.notified=!0,ar=Cr.reactions,Ct(function(){for(var Kt,cr,Tr=Cr.value,Dr=Cr.state==br,zr=0;ar.length>zr;){var fn,vn,_n,wn=ar[zr++],An=Dr?wn.ok:wn.fail,Cn=wn.resolve,En=wn.reject,Tn=wn.domain;try{An?(Dr||(Cr.rejection===sr&&function(Mn,Ft){bt.call(b,function(){nr?er.emit("rejectionHandled",Mn):Pr(ir,Mn,Ft.value)})}(Ir,Cr),Cr.rejection=_r),An===!0?fn=Tr:(Tn&&Tn.enter(),fn=An(Tr),Tn&&(Tn.exit(),_n=!0)),fn===wn.promise?En(Vt("Promise-chain cycle")):(vn=kr(fn))?vn.call(fn,Cn,En):Cn(fn)):En(Tr)}catch(Mn){Tn&&!_n&&Tn.exit(),En(Mn)}}Cr.reactions=[],Cr.notified=!1,tr&&!Cr.rejection&&(Kt=Ir,cr=Cr,bt.call(b,function(){var Mn=cr.value,Ft=Vr(cr);if(Ft&&(Ft=Pt(function(){nr?er.emit("unhandledRejection",Mn,Kt):Pr(Wt,Kt,Mn)}),cr.rejection=nr||Vr(cr)?sr:_r,Ft.error))throw Ft.value}))}))},Pr=function(Ir,Cr,tr){var ar;or?((ar=Jt.createEvent("Event")).promise=Cr,ar.reason=tr,ar.initEvent(Ir,!1,!0),b.dispatchEvent(ar)):ar={promise:Cr,reason:tr},(Cr=b["on"+Ir])?Cr(ar):Ir===Wt&&It("Unhandled promise rejection",tr)},Vr=function(Ir){return Ir.rejection!==_r&&!Ir.parent},Xr=function(Ir,Cr,tr,ar){return function(Kt){Ir(Cr,tr,Kt,ar)}},Gr=function(Ir,Cr,tr,ar){Cr.done||(Cr.done=!0,(Cr=ar||Cr).value=tr,Cr.state=Sr,qr(Ir,Cr,!0))},Er=function(Ir,Cr,tr,ar){if(!Cr.done){Cr.done=!0,ar&&(Cr=ar);try{if(Ir===tr)throw Vt("Promise can't be resolved itself");var Kt=kr(tr);Kt?Ct(function(){var cr={done:!1};try{Kt.call(tr,Xr(Er,Ir,cr,Cr),Xr(Gr,Ir,cr,Cr))}catch(Tr){Gr(Ir,cr,Tr,Cr)}}):(Cr.value=tr,Cr.state=br,qr(Ir,Cr,!1))}catch(cr){Gr(Ir,{done:!1},cr,Cr)}}};jr&&(Lt=function(Ir){ft(this,Lt,Yt),tt(Ir),s.call(this);var Cr=Zt(this);try{Ir(Xr(Er,this,Cr),Xr(Gr,this,Cr))}catch(tr){Gr(this,Cr,tr)}},(s=function(Ir){vt(this,{type:Yt,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Ye(Lt.prototype,{then:function(Ir,Cr){var tr=Rt(this),ar=yr(St(this,Lt));return ar.ok=typeof Ir!="function"||Ir,ar.fail=typeof Cr=="function"&&Cr,ar.domain=nr?er.domain:void 0,tr.parent=!0,tr.reactions.push(ar),tr.state!=0&&qr(this,tr,!1),ar.promise},catch:function(Ir){return this.then(void 0,Ir)}}),p=function(){var Ir=new s,Cr=Zt(Ir);this.promise=Ir,this.resolve=Xr(Er,Ir,Cr),this.reject=Xr(Gr,Ir,Cr)},Dt.f=yr=function(Ir){return Ir===Lt||Ir===d?new p:Qt(Ir)},Be||typeof de!="function"||(h=de.prototype.then,pe(de.prototype,"then",function(Ir,Cr){var tr=this;return new Lt(function(ar,Kt){h.call(tr,ar,Kt)}).then(Ir,Cr)},{unsafe:!0}),typeof ur=="function"&&N({global:!0,enumerable:!0,forced:!0},{fetch:function(Ir){return Et(Lt,ur.apply(b,arguments))}}))),N({global:!0,wrap:!0,forced:jr},{Promise:Lt}),me(Lt,Yt,!1,!0),Le(Yt),d=E(Yt),N({target:Yt,stat:!0,forced:jr},{reject:function(Ir){var Cr=yr(this);return Cr.reject.call(void 0,Ir),Cr.promise}}),N({target:Yt,stat:!0,forced:Be||jr},{resolve:function(Ir){return Et(Be&&this===d?Lt:this,Ir)}}),N({target:Yt,stat:!0,forced:Nr},{all:function(Ir){var Cr=this,tr=yr(Cr),ar=tr.resolve,Kt=tr.reject,cr=Pt(function(){var Tr=tt(Cr.resolve),Dr=[],zr=0,fn=1;mt(Ir,function(vn){var _n=zr++,wn=!1;Dr.push(void 0),fn++,Tr.call(Cr,vn).then(function(An){wn||(wn=!0,Dr[_n]=An,--fn||ar(Dr))},Kt)}),--fn||ar(Dr)});return cr.error&&Kt(cr.value),tr.promise},race:function(Ir){var Cr=this,tr=yr(Cr),ar=tr.reject,Kt=Pt(function(){var cr=tt(Cr.resolve);mt(Ir,function(Tr){cr.call(Cr,Tr).then(tr.resolve,ar)})});return Kt.error&&ar(Kt.value),tr.promise}})},{"../internals/a-function":5,"../internals/an-instance":9,"../internals/check-correctness-of-iteration":27,"../internals/classof-raw":28,"../internals/engine-v8-version":48,"../internals/export":50,"../internals/get-built-in":57,"../internals/global":60,"../internals/host-report-errors":63,"../internals/inspect-source":69,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-object":75,"../internals/is-pure":76,"../internals/iterate":78,"../internals/microtask":82,"../internals/native-promise-constructor":83,"../internals/new-promise-capability":87,"../internals/perform":107,"../internals/promise-resolve":108,"../internals/redefine":110,"../internals/redefine-all":109,"../internals/set-species":118,"../internals/set-to-string-tag":119,"../internals/species-constructor":123,"../internals/task":132,"../internals/well-known-symbol":150}],192:[function(b,l,u){var s=b("../internals/export"),Ye=b("../internals/get-built-in"),p=b("../internals/a-function"),d=b("../internals/an-object"),h=b("../internals/is-object"),N=b("../internals/object-create"),Be=b("../internals/function-bind"),b=b("../internals/fails"),E=Ye("Reflect","construct"),de=b(function(){function me(){}return!(E(function(){},[],me)instanceof me)}),pe=!b(function(){E(function(){})}),Ye=de||pe;s({target:"Reflect",stat:!0,forced:Ye,sham:Ye},{construct:function(me,Le){p(me),d(Le);var nt=arguments.length<3?me:p(arguments[2]);if(pe&&!de)return E(me,Le,nt);if(me==nt){switch(Le.length){case 0:return new me;case 1:return new me(Le[0]);case 2:return new me(Le[0],Le[1]);case 3:return new me(Le[0],Le[1],Le[2]);case 4:return new me(Le[0],Le[1],Le[2],Le[3])}var tt=[null];return tt.push.apply(tt,Le),new(Be.apply(me,tt))}return tt=nt.prototype,nt=N(h(tt)?tt:Object.prototype),tt=Function.apply.call(me,nt,Le),h(tt)?tt:nt}})},{"../internals/a-function":5,"../internals/an-object":10,"../internals/export":50,"../internals/fails":51,"../internals/function-bind":56,"../internals/get-built-in":57,"../internals/is-object":75,"../internals/object-create":91}],193:[function(t,l,u){var s=t("../internals/export"),p=t("../internals/is-object"),d=t("../internals/an-object"),h=t("../internals/has"),N=t("../internals/object-get-own-property-descriptor"),Be=t("../internals/object-get-prototype-of");s({target:"Reflect",stat:!0},{get:function b(E,de){var pe,Ye=arguments.length<3?E:arguments[2];return d(E)===Ye?E[de]:(pe=N.f(E,de))?h(pe,"value")?pe.value:pe.get===void 0?void 0:pe.get.call(Ye):p(pe=Be(E))?b(pe,de,Ye):void 0}})},{"../internals/an-object":10,"../internals/export":50,"../internals/has":61,"../internals/is-object":75,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-prototype-of":98}],194:[function(t,l,u){var s=t("../internals/descriptors"),p=t("../internals/global"),d=t("../internals/is-forced"),h=t("../internals/inherit-if-required"),N=t("../internals/object-define-property").f,Be=t("../internals/object-get-own-property-names").f,b=t("../internals/is-regexp"),E=t("../internals/regexp-flags"),de=t("../internals/regexp-sticky-helpers"),pe=t("../internals/redefine"),Ye=t("../internals/fails"),me=t("../internals/internal-state").set,Le=t("../internals/set-species"),nt=t("../internals/well-known-symbol")("match"),tt=p.RegExp,ft=tt.prototype,yt=/a/g,gt=/a/g,mt=new tt(yt)!==yt,wt=de.UNSUPPORTED_Y;if(s&&d("RegExp",!mt||wt||Ye(function(){return gt[nt]=!1,tt(yt)!=yt||tt(gt)==gt||tt(yt,"i")!="/a/i"}))){for(var St=function(Et,It){var Dt,Pt=this instanceof St,qt=b(Et),Ht=It===void 0;return!Pt&&qt&&Et.constructor===St&&Ht?Et:(mt?qt&&!Ht&&(Et=Et.source):Et instanceof St&&(Ht&&(It=E.call(Et)),Et=Et.source),wt&&(Dt=!!It&&-1<It.indexOf("y"))&&(It=It.replace(/y/g,"")),qt=h(mt?new tt(Et,It):tt(Et,It),Pt?this:ft,St),wt&&Dt&&me(qt,{sticky:Dt}),qt)},bt=Be(tt),Ct=0;bt.length>Ct;)(function(Et){Et in St||N(St,Et,{configurable:!0,get:function(){return tt[Et]},set:function(It){tt[Et]=It}})})(bt[Ct++]);(ft.constructor=St).prototype=ft,pe(p,"RegExp",St)}Le("RegExp")},{"../internals/descriptors":43,"../internals/fails":51,"../internals/global":60,"../internals/inherit-if-required":68,"../internals/internal-state":71,"../internals/is-forced":74,"../internals/is-regexp":77,"../internals/object-define-property":93,"../internals/object-get-own-property-names":96,"../internals/redefine":110,"../internals/regexp-flags":113,"../internals/regexp-sticky-helpers":114,"../internals/set-species":118,"../internals/well-known-symbol":150}],195:[function(p,l,u){var s=p("../internals/export"),p=p("../internals/regexp-exec");s({target:"RegExp",proto:!0,forced:/./.exec!==p},{exec:p})},{"../internals/export":50,"../internals/regexp-exec":112}],196:[function(h,l,u){var s=h("../internals/redefine"),p=h("../internals/an-object"),b=h("../internals/fails"),d=h("../internals/regexp-flags"),h="toString",N=RegExp.prototype,Be=N[h],b=b(function(){return Be.call({source:"a",flags:"b"})!="/a/b"}),E=Be.name!=h;(b||E)&&s(RegExp.prototype,h,function(){var de=p(this),pe=String(de.source),Ye=de.flags;return"/"+pe+"/"+String(Ye===void 0&&de instanceof RegExp&&!("flags"in N)?d.call(de):Ye)},{unsafe:!0})},{"../internals/an-object":10,"../internals/fails":51,"../internals/redefine":110,"../internals/regexp-flags":113}],197:[function(p,l,u){var s=p("../internals/collection"),p=p("../internals/collection-strong");l.exports=s("Set",function(d){return function(){return d(this,arguments.length?arguments[0]:void 0)}},p)},{"../internals/collection":32,"../internals/collection-strong":30}],198:[function(Be,l,u){var s=Be("../internals/export"),p=Be("../internals/object-get-own-property-descriptor").f,d=Be("../internals/to-length"),h=Be("../internals/not-a-regexp"),N=Be("../internals/require-object-coercible"),de=Be("../internals/correct-is-regexp-logic"),Be=Be("../internals/is-pure"),b="".endsWith,E=Math.min,de=de("endsWith");s({target:"String",proto:!0,forced:!!(Be||de||!(s=p(String.prototype,"endsWith"))||s.writable)&&!de},{endsWith:function(pe){var Ye=String(N(this)),me=(h(pe),1<arguments.length?arguments[1]:void 0),Le=d(Ye.length),me=me===void 0?Le:E(d(me),Le),Le=String(pe);return b?b.call(Ye,Le,me):Ye.slice(me-Le.length,me)===Le}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":115,"../internals/to-length":138}],199:[function(t,l,u){var s=t("../internals/export"),p=t("../internals/not-a-regexp"),d=t("../internals/require-object-coercible");s({target:"String",proto:!0,forced:!t("../internals/correct-is-regexp-logic")("includes")},{includes:function(h){return!!~String(d(this)).indexOf(p(h),1<arguments.length?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/not-a-regexp":88,"../internals/require-object-coercible":115}],200:[function(d,l,u){var s=d("../internals/string-multibyte").charAt,p=d("../internals/internal-state"),d=d("../internals/define-iterator"),h="String Iterator",N=p.set,Be=p.getterFor(h);d(String,"String",function(b){N(this,{type:h,string:String(b),index:0})},function(){var b=Be(this),E=b.string,de=b.index;return de>=E.length?{value:void 0,done:!0}:(E=s(E,de),b.index+=E.length,{value:E,done:!1})})},{"../internals/define-iterator":41,"../internals/internal-state":71,"../internals/string-multibyte":125}],201:[function(t,l,u){var s=t("../internals/fix-regexp-well-known-symbol-logic"),p=t("../internals/an-object"),d=t("../internals/to-length"),h=t("../internals/require-object-coercible"),N=t("../internals/advance-string-index"),Be=t("../internals/regexp-exec-abstract");s("match",1,function(b,E,de){return[function(pe){var Ye=h(this),me=pe==null?void 0:pe[b];return me!==void 0?me.call(pe,Ye):new RegExp(pe)[b](String(Ye))},function(pe){var Ye=de(E,pe,this);if(Ye.done)return Ye.value;var me=p(pe),Le=String(this);if(!me.global)return Be(me,Le);for(var nt=me.unicode,tt=[],ft=me.lastIndex=0;(yt=Be(me,Le))!==null;){var yt=String(yt[0]);(tt[ft]=yt)===""&&(me.lastIndex=N(Le,d(me.lastIndex),nt)),ft++}return ft===0?null:tt}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/to-length":138}],202:[function(t,l,u){var s=t("../internals/export"),p=t("../internals/string-pad").start;s({target:"String",proto:!0,forced:t("../internals/string-pad-webkit-bug")},{padStart:function(d){return p(this,d,1<arguments.length?arguments[1]:void 0)}})},{"../internals/export":50,"../internals/string-pad":127,"../internals/string-pad-webkit-bug":126}],203:[function(t,l,u){t("../internals/export")({target:"String",proto:!0},{repeat:t("../internals/string-repeat")})},{"../internals/export":50,"../internals/string-repeat":129}],204:[function(t,l,u){var s=t("../internals/fix-regexp-well-known-symbol-logic"),p=t("../internals/an-object"),d=t("../internals/to-object"),h=t("../internals/to-length"),N=t("../internals/to-integer"),Be=t("../internals/require-object-coercible"),b=t("../internals/advance-string-index"),E=t("../internals/regexp-exec-abstract"),de=Math.max,pe=Math.min,Ye=Math.floor,me=/\$([$&'`]|\d\d?|<[^>]*>)/g,Le=/\$([$&'`]|\d\d?)/g;s("replace",2,function(nt,tt,ft,yt){var gt=yt.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,mt=yt.REPLACE_KEEPS_$0,wt=gt?"$":"$0";return[function(St,bt){var Ct=Be(this),Et=St==null?void 0:St[nt];return Et!==void 0?Et.call(St,Ct,bt):tt.call(String(Ct),St,bt)},function(St,bt){if(!gt&&mt||typeof bt=="string"&&bt.indexOf(wt)===-1){var Ct=ft(tt,St,this,bt);if(Ct.done)return Ct.value}for(var Et,It=p(St),Dt=String(this),Pt=typeof bt=="function",qt=(Pt||(bt=String(bt)),It.global),Ht=(qt&&(Et=It.unicode,It.lastIndex=0),[]);(vt=E(It,Dt))!==null&&(Ht.push(vt),qt);)String(vt[0])===""&&(It.lastIndex=b(Dt,h(It.lastIndex),Et));for(var Gt,Ut="",Yt=0,Zt=0;Zt<Ht.length;Zt++){for(var vt=Ht[Zt],Rt=String(vt[0]),Lt=de(pe(N(vt.index),Dt.length),0),Vt=[],Jt=1;Jt<vt.length;Jt++)Vt.push((Gt=vt[Jt])===void 0?Gt:String(Gt));var er=vt.groups,ur=Pt?(ur=[Rt].concat(Vt,Lt,Dt),er!==void 0&&ur.push(er),String(bt.apply(void 0,ur))):function(yr,Qt,nr,or,Wt,ir){var br=nr+yr.length,Sr=or.length,_r=Le;return Wt!==void 0&&(Wt=d(Wt),_r=me),tt.call(ir,_r,function(sr,jr){var Nr;switch(jr.charAt(0)){case"$":return"$";case"&":return yr;case"`":return Qt.slice(0,nr);case"'":return Qt.slice(br);case"<":Nr=Wt[jr.slice(1,-1)];break;default:var kr,qr=+jr;if(qr==0)return sr;if(Sr<qr)return(kr=Ye(qr/10))!==0&&kr<=Sr?or[kr-1]===void 0?jr.charAt(1):or[kr-1]+jr.charAt(1):sr;Nr=or[qr-1]}return Nr===void 0?"":Nr})}(Rt,Dt,Lt,Vt,er,bt);Yt<=Lt&&(Ut+=Dt.slice(Yt,Lt)+ur,Yt=Lt+Rt.length)}return Ut+Dt.slice(Yt)}]})},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/to-integer":137,"../internals/to-length":138,"../internals/to-object":139}],205:[function(t,l,u){var s=t("../internals/fix-regexp-well-known-symbol-logic"),p=t("../internals/an-object"),d=t("../internals/require-object-coercible"),h=t("../internals/same-value"),N=t("../internals/regexp-exec-abstract");s("search",1,function(Be,b,E){return[function(de){var pe=d(this),Ye=de==null?void 0:de[Be];return Ye!==void 0?Ye.call(de,pe):new RegExp(de)[Be](String(pe))},function(de){var pe,Ye=E(b,de,this);return Ye.done?Ye.value:(Ye=p(de),de=String(this),pe=Ye.lastIndex,h(pe,0)||(Ye.lastIndex=0),de=N(Ye,de),h(Ye.lastIndex,pe)||(Ye.lastIndex=pe),de===null?-1:de.index)}]})},{"../internals/an-object":10,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/same-value":116}],206:[function(pe,l,u){var s=pe("../internals/fix-regexp-well-known-symbol-logic"),p=pe("../internals/is-regexp"),d=pe("../internals/an-object"),h=pe("../internals/require-object-coercible"),N=pe("../internals/species-constructor"),Be=pe("../internals/advance-string-index"),b=pe("../internals/to-length"),E=pe("../internals/regexp-exec-abstract"),de=pe("../internals/regexp-exec"),pe=pe("../internals/fails"),Ye=[].push,me=Math.min,Le=4294967295,nt=!pe(function(){return!RegExp(Le,"y")});s("split",2,function(tt,ft,yt){var gt="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||1<".".split(/()()/).length||"".split(/.?/).length?function(mt,wt){var St=String(h(this)),bt=wt===void 0?Le:wt>>>0;if(bt==0)return[];if(mt===void 0)return[St];if(!p(mt))return ft.call(St,mt,bt);for(var Ct,Et,It,Dt=[],wt=(mt.ignoreCase?"i":"")+(mt.multiline?"m":"")+(mt.unicode?"u":"")+(mt.sticky?"y":""),Pt=0,qt=new RegExp(mt.source,wt+"g");(Ct=de.call(qt,St))&&!(Pt<(Et=qt.lastIndex)&&(Dt.push(St.slice(Pt,Ct.index)),1<Ct.length&&Ct.index<St.length&&Ye.apply(Dt,Ct.slice(1)),It=Ct[0].length,Pt=Et,Dt.length>=bt));)qt.lastIndex===Ct.index&&qt.lastIndex++;return Pt===St.length?!It&&qt.test("")||Dt.push(""):Dt.push(St.slice(Pt)),Dt.length>bt?Dt.slice(0,bt):Dt}:"0".split(void 0,0).length?function(mt,wt){return mt===void 0&&wt===0?[]:ft.call(this,mt,wt)}:ft;return[function(mt,wt){var St=h(this),bt=mt==null?void 0:mt[tt];return bt!==void 0?bt.call(mt,St,wt):gt.call(String(St),mt,wt)},function(Ct,wt){var St=yt(gt,Ct,this,wt,gt!==ft);if(St.done)return St.value;var St=d(Ct),bt=String(this),Ct=N(St,RegExp),Et=St.unicode,It=(St.ignoreCase?"i":"")+(St.multiline?"m":"")+(St.unicode?"u":"")+(nt?"y":"g"),Dt=new Ct(nt?St:"^(?:"+St.source+")",It),Pt=wt===void 0?Le:wt>>>0;if(Pt==0)return[];if(bt.length===0)return E(Dt,bt)===null?[bt]:[];for(var qt=0,Ht=0,Gt=[];Ht<bt.length;){Dt.lastIndex=nt?Ht:0;var Ut,Yt=E(Dt,nt?bt:bt.slice(Ht));if(Yt===null||(Ut=me(b(Dt.lastIndex+(nt?0:Ht)),bt.length))===qt)Ht=Be(bt,Ht,Et);else{if(Gt.push(bt.slice(qt,Ht)),Gt.length===Pt)return Gt;for(var Zt=1;Zt<=Yt.length-1;Zt++)if(Gt.push(Yt[Zt]),Gt.length===Pt)return Gt;Ht=qt=Ut}}return Gt.push(bt.slice(qt)),Gt}]},!nt)},{"../internals/advance-string-index":8,"../internals/an-object":10,"../internals/fails":51,"../internals/fix-regexp-well-known-symbol-logic":52,"../internals/is-regexp":77,"../internals/regexp-exec":112,"../internals/regexp-exec-abstract":111,"../internals/require-object-coercible":115,"../internals/species-constructor":123,"../internals/to-length":138}],207:[function(Be,l,u){var s=Be("../internals/export"),p=Be("../internals/object-get-own-property-descriptor").f,d=Be("../internals/to-length"),h=Be("../internals/not-a-regexp"),N=Be("../internals/require-object-coercible"),de=Be("../internals/correct-is-regexp-logic"),Be=Be("../internals/is-pure"),b="".startsWith,E=Math.min,de=de("startsWith");s({target:"String",proto:!0,forced:!!(Be||de||!(s=p(String.prototype,"startsWith"))||s.writable)&&!de},{startsWith:function(Le){var Ye=String(N(this)),me=(h(Le),d(E(1<arguments.length?arguments[1]:void 0,Ye.length))),Le=String(Le);return b?b.call(Ye,Le,me):Ye.slice(me,me+Le.length)===Le}})},{"../internals/correct-is-regexp-logic":34,"../internals/export":50,"../internals/is-pure":76,"../internals/not-a-regexp":88,"../internals/object-get-own-property-descriptor":94,"../internals/require-object-coercible":115,"../internals/to-length":138}],208:[function(t,l,u){var s=t("../internals/export"),p=t("../internals/create-html");s({target:"String",proto:!0,forced:t("../internals/string-html-forced")("sub")},{sub:function(){return p(this,"sub","","")}})},{"../internals/create-html":36,"../internals/export":50,"../internals/string-html-forced":124}],209:[function(t,l,u){var s=t("../internals/export"),p=t("../internals/string-trim").trim;s({target:"String",proto:!0,forced:t("../internals/string-trim-forced")("trim")},{trim:function(){return p(this)}})},{"../internals/export":50,"../internals/string-trim":131,"../internals/string-trim-forced":130}],210:[function(me,l,u){var s,p,d,h,N,Be=me("../internals/export"),b=me("../internals/descriptors"),E=me("../internals/global"),de=me("../internals/has"),pe=me("../internals/is-object"),Ye=me("../internals/object-define-property").f,me=me("../internals/copy-constructor-properties"),Le=E.Symbol;!b||typeof Le!="function"||"description"in Le.prototype&&Le().description===void 0||(s={},me(p=function(){var nt=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),tt=this instanceof p?new Le(nt):nt===void 0?Le():Le(nt);return nt===""&&(s[tt]=!0),tt},Le),(E=p.prototype=Le.prototype).constructor=p,d=E.toString,h=String(Le("test"))=="Symbol(test)",N=/^Symbol\((.*)\)[^)]+$/,Ye(E,"description",{configurable:!0,get:function(){var nt=pe(this)?this.valueOf():this,tt=d.call(nt);return de(s,nt)?"":(nt=h?tt.slice(7,-1):tt.replace(N,"$1"))===""?void 0:nt}}),Be({global:!0,forced:!0},{Symbol:p}))},{"../internals/copy-constructor-properties":33,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/is-object":75,"../internals/object-define-property":93}],211:[function(t,l,u){t("../internals/define-well-known-symbol")("iterator")},{"../internals/define-well-known-symbol":42}],212:[function(Qt,l,u){function s(Kt,cr){var Tr=Nr[Kt]=St(ir[yr]);return nr(Tr,{type:ur,tag:Kt,description:cr}),de||(Tr.description=cr),Tr}function p(Kt,Dr){ft(Kt);var Tr=gt(Dr),Dr=bt(Tr).concat(ar(Tr));return Jt(Dr,function(zr){de&&!tr.call(Tr,zr)||Cr(Kt,zr,Tr[zr])}),Kt}function d(Dr,zr){var Tr,Dr=gt(Dr),zr=mt(zr,!0);if(Dr!==Wt||!Le(Nr,zr)||Le(kr,zr))return!(Tr=Sr(Dr,zr))||!Le(Nr,zr)||Le(Dr,er)&&Dr[er][zr]||(Tr.enumerable=!0),Tr}function h(cr){var cr=sr(gt(cr)),Tr=[];return Jt(cr,function(Dr){Le(Nr,Dr)||Le(Yt,Dr)||Tr.push(Dr)}),Tr}var N=Qt("../internals/export"),Be=Qt("../internals/global"),b=Qt("../internals/get-built-in"),E=Qt("../internals/is-pure"),de=Qt("../internals/descriptors"),pe=Qt("../internals/native-symbol"),Ye=Qt("../internals/use-symbol-as-uid"),me=Qt("../internals/fails"),Le=Qt("../internals/has"),nt=Qt("../internals/is-array"),tt=Qt("../internals/is-object"),ft=Qt("../internals/an-object"),yt=Qt("../internals/to-object"),gt=Qt("../internals/to-indexed-object"),mt=Qt("../internals/to-primitive"),wt=Qt("../internals/create-property-descriptor"),St=Qt("../internals/object-create"),bt=Qt("../internals/object-keys"),Ct=Qt("../internals/object-get-own-property-names"),Et=Qt("../internals/object-get-own-property-names-external"),It=Qt("../internals/object-get-own-property-symbols"),Dt=Qt("../internals/object-get-own-property-descriptor"),Pt=Qt("../internals/object-define-property"),qt=Qt("../internals/object-property-is-enumerable"),Ht=Qt("../internals/create-non-enumerable-property"),Gt=Qt("../internals/redefine"),Ut=Qt("../internals/shared"),Vr=Qt("../internals/shared-key"),Yt=Qt("../internals/hidden-keys"),Zt=Qt("../internals/uid"),vt=Qt("../internals/well-known-symbol"),Rt=Qt("../internals/well-known-symbol-wrapped"),Lt=Qt("../internals/define-well-known-symbol"),Vt=Qt("../internals/set-to-string-tag"),Xr=Qt("../internals/internal-state"),Jt=Qt("../internals/array-iteration").forEach,er=Vr("hidden"),ur="Symbol",yr="prototype",Qt=vt("toPrimitive"),nr=Xr.set,or=Xr.getterFor(ur),Wt=Object[yr],ir=Be.Symbol,br=b("JSON","stringify"),Sr=Dt.f,_r=Pt.f,sr=Et.f,jr=qt.f,Nr=Ut("symbols"),kr=Ut("op-symbols"),qr=Ut("string-to-symbol-registry"),Pr=Ut("symbol-to-string-registry"),Vr=Ut("wks"),Xr=Be.QObject,Gr=!Xr||!Xr[yr]||!Xr[yr].findChild,Er=de&&me(function(){return St(_r({},"a",{get:function(){return _r(this,"a",{value:7}).a}})).a!=7})?function(Kt,cr,Tr){var Dr=Sr(Wt,cr);Dr&&delete Wt[cr],_r(Kt,cr,Tr),Dr&&Kt!==Wt&&_r(Wt,cr,Dr)}:_r,Ir=Ye?function(Kt){return typeof Kt=="symbol"}:function(Kt){return Object(Kt)instanceof ir},Cr=function(Kt,cr,Tr){return Kt===Wt&&Cr(kr,cr,Tr),ft(Kt),cr=mt(cr,!0),ft(Tr),(Le(Nr,cr)?(Tr.enumerable?(Le(Kt,er)&&Kt[er][cr]&&(Kt[er][cr]=!1),Tr=St(Tr,{enumerable:wt(0,!1)})):(Le(Kt,er)||_r(Kt,er,wt(1,{})),Kt[er][cr]=!0),Er):_r)(Kt,cr,Tr)},tr=function(cr){var cr=mt(cr,!0),Tr=jr.call(this,cr);return!(this===Wt&&Le(Nr,cr)&&!Le(kr,cr))&&(!(Tr||!Le(this,cr)||!Le(Nr,cr)||Le(this,er)&&this[er][cr])||Tr)},ar=function(Tr){var cr=Tr===Wt,Tr=sr(cr?kr:gt(Tr)),Dr=[];return Jt(Tr,function(zr){!Le(Nr,zr)||cr&&!Le(Wt,zr)||Dr.push(Nr[zr])}),Dr};pe||(Gt((ir=function(){if(this instanceof ir)throw TypeError("Symbol is not a constructor");var Kt=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,cr=Zt(Kt),Tr=function(Dr){this===Wt&&Tr.call(kr,Dr),Le(this,er)&&Le(this[er],cr)&&(this[er][cr]=!1),Er(this,cr,wt(1,Dr))};return de&&Gr&&Er(Wt,cr,{configurable:!0,set:Tr}),s(cr,Kt)})[yr],"toString",function(){return or(this).tag}),Gt(ir,"withoutSetter",function(Kt){return s(Zt(Kt),Kt)}),qt.f=tr,Pt.f=Cr,Dt.f=d,Ct.f=Et.f=h,It.f=ar,Rt.f=function(Kt){return s(vt(Kt),Kt)},de&&(_r(ir[yr],"description",{configurable:!0,get:function(){return or(this).description}}),E||Gt(Wt,"propertyIsEnumerable",tr,{unsafe:!0}))),N({global:!0,wrap:!0,forced:!pe,sham:!pe},{Symbol:ir}),Jt(bt(Vr),function(Kt){Lt(Kt)}),N({target:ur,stat:!0,forced:!pe},{for:function(Tr){var cr,Tr=String(Tr);return Le(qr,Tr)?qr[Tr]:(cr=ir(Tr),qr[Tr]=cr,Pr[cr]=Tr,cr)},keyFor:function(Kt){if(!Ir(Kt))throw TypeError(Kt+" is not a symbol");if(Le(Pr,Kt))return Pr[Kt]},useSetter:function(){Gr=!0},useSimple:function(){Gr=!1}}),N({target:"Object",stat:!0,forced:!pe,sham:!de},{create:function(Kt,cr){return cr===void 0?St(Kt):p(St(Kt),cr)},defineProperty:Cr,defineProperties:p,getOwnPropertyDescriptor:d}),N({target:"Object",stat:!0,forced:!pe},{getOwnPropertyNames:h,getOwnPropertySymbols:ar}),N({target:"Object",stat:!0,forced:me(function(){It.f(1)})},{getOwnPropertySymbols:function(Kt){return It.f(yt(Kt))}}),br&&N({target:"JSON",stat:!0,forced:!pe||me(function(){var Kt=ir();return br([Kt])!="[null]"||br({a:Kt})!="{}"||br(Object(Kt))!="{}"})},{stringify:function(Kt,cr,Tr){for(var Dr,zr=[Kt],fn=1;fn<arguments.length;)zr.push(arguments[fn++]);if((tt(Dr=cr)||Kt!==void 0)&&!Ir(Kt))return nt(cr)||(cr=function(vn,_n){if(typeof Dr=="function"&&(_n=Dr.call(this,vn,_n)),!Ir(_n))return _n}),zr[1]=cr,br.apply(null,zr)}}),ir[yr][Qt]||Ht(ir[yr],Qt,ir[yr].valueOf),Vt(ir,ur),Yt[er]=!0},{"../internals/an-object":10,"../internals/array-iteration":19,"../internals/create-non-enumerable-property":38,"../internals/create-property-descriptor":39,"../internals/define-well-known-symbol":42,"../internals/descriptors":43,"../internals/export":50,"../internals/fails":51,"../internals/get-built-in":57,"../internals/global":60,"../internals/has":61,"../internals/hidden-keys":62,"../internals/internal-state":71,"../internals/is-array":73,"../internals/is-object":75,"../internals/is-pure":76,"../internals/native-symbol":84,"../internals/object-create":91,"../internals/object-define-property":93,"../internals/object-get-own-property-descriptor":94,"../internals/object-get-own-property-names":96,"../internals/object-get-own-property-names-external":95,"../internals/object-get-own-property-symbols":97,"../internals/object-keys":100,"../internals/object-property-is-enumerable":101,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/shared":122,"../internals/shared-key":120,"../internals/to-indexed-object":136,"../internals/to-object":139,"../internals/to-primitive":142,"../internals/uid":147,"../internals/use-symbol-as-uid":148,"../internals/well-known-symbol":150,"../internals/well-known-symbol-wrapped":149}],213:[function(t,l,u){var s=t("../internals/array-buffer-view-core"),p=t("../internals/array-copy-within"),d=s.aTypedArray;(0,s.exportTypedArrayMethod)("copyWithin",function(h,N){return p.call(d(this),h,N,2<arguments.length?arguments[2]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-copy-within":14}],214:[function(t,l,u){var s=t("../internals/array-buffer-view-core"),p=t("../internals/array-iteration").every,d=s.aTypedArray;(0,s.exportTypedArrayMethod)("every",function(h){return p(d(this),h,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],215:[function(t,l,u){var s=t("../internals/array-buffer-view-core"),p=t("../internals/array-fill"),d=s.aTypedArray;(0,s.exportTypedArrayMethod)("fill",function(h){return p.apply(d(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-fill":15}],216:[function(t,l,u){var s=t("../internals/array-buffer-view-core"),p=t("../internals/array-iteration").filter,d=t("../internals/species-constructor"),h=s.aTypedArray,N=s.aTypedArrayConstructor;(0,s.exportTypedArrayMethod)("filter",function(Be){for(var b=p(h(this),Be,1<arguments.length?arguments[1]:void 0),Be=d(this,this.constructor),E=0,de=b.length,pe=new(N(Be))(de);E<de;)pe[E]=b[E++];return pe})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":123}],217:[function(t,l,u){var s=t("../internals/array-buffer-view-core"),p=t("../internals/array-iteration").findIndex,d=s.aTypedArray;(0,s.exportTypedArrayMethod)("findIndex",function(h){return p(d(this),h,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],218:[function(t,l,u){var s=t("../internals/array-buffer-view-core"),p=t("../internals/array-iteration").find,d=s.aTypedArray;(0,s.exportTypedArrayMethod)("find",function(h){return p(d(this),h,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],219:[function(t,l,u){t("../internals/typed-array-constructor")("Float32",function(s){return function(p,d,h){return s(this,p,d,h)}})},{"../internals/typed-array-constructor":144}],220:[function(t,l,u){t("../internals/typed-array-constructor")("Float64",function(s){return function(p,d,h){return s(this,p,d,h)}})},{"../internals/typed-array-constructor":144}],221:[function(t,l,u){var s=t("../internals/array-buffer-view-core"),p=t("../internals/array-iteration").forEach,d=s.aTypedArray;(0,s.exportTypedArrayMethod)("forEach",function(h){p(d(this),h,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],222:[function(t,l,u){var s=t("../internals/array-buffer-view-core"),p=t("../internals/array-includes").includes,d=s.aTypedArray;(0,s.exportTypedArrayMethod)("includes",function(h){return p(d(this),h,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],223:[function(t,l,u){var s=t("../internals/array-buffer-view-core"),p=t("../internals/array-includes").indexOf,d=s.aTypedArray;(0,s.exportTypedArrayMethod)("indexOf",function(h){return p(d(this),h,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-includes":18}],224:[function(t,l,u){t("../internals/typed-array-constructor")("Int16",function(s){return function(p,d,h){return s(this,p,d,h)}})},{"../internals/typed-array-constructor":144}],225:[function(t,l,u){t("../internals/typed-array-constructor")("Int32",function(s){return function(p,d,h){return s(this,p,d,h)}})},{"../internals/typed-array-constructor":144}],226:[function(p,l,u){function s(){return d.call(Be(this))}var de=p("../internals/global"),E=p("../internals/array-buffer-view-core"),b=p("../modules/es.array.iterator"),p=p("../internals/well-known-symbol")("iterator"),de=de.Uint8Array,d=b.values,h=b.keys,N=b.entries,Be=E.aTypedArray,b=E.exportTypedArrayMethod,E=de&&de.prototype[p],de=!!E&&(E.name=="values"||E.name==null);b("entries",function(){return N.call(Be(this))}),b("keys",function(){return h.call(Be(this))}),b("values",s,!de),b(p,s,!de)},{"../internals/array-buffer-view-core":12,"../internals/global":60,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],227:[function(p,l,u){var p=p("../internals/array-buffer-view-core"),s=p.aTypedArray,p=p.exportTypedArrayMethod,d=[].join;p("join",function(h){return d.apply(s(this),arguments)})},{"../internals/array-buffer-view-core":12}],228:[function(t,l,u){var s=t("../internals/array-buffer-view-core"),p=t("../internals/array-last-index-of"),d=s.aTypedArray;(0,s.exportTypedArrayMethod)("lastIndexOf",function(h){return p.apply(d(this),arguments)})},{"../internals/array-buffer-view-core":12,"../internals/array-last-index-of":20}],229:[function(t,l,u){var s=t("../internals/array-buffer-view-core"),p=t("../internals/array-iteration").map,d=t("../internals/species-constructor"),h=s.aTypedArray,N=s.aTypedArrayConstructor;(0,s.exportTypedArrayMethod)("map",function(Be){return p(h(this),Be,1<arguments.length?arguments[1]:void 0,function(b,E){return new(N(d(b,b.constructor)))(E)})})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19,"../internals/species-constructor":123}],230:[function(t,l,u){var s=t("../internals/array-buffer-view-core"),p=t("../internals/array-reduce").right,d=s.aTypedArray;(0,s.exportTypedArrayMethod)("reduceRight",function(h){return p(d(this),h,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],231:[function(t,l,u){var s=t("../internals/array-buffer-view-core"),p=t("../internals/array-reduce").left,d=s.aTypedArray;(0,s.exportTypedArrayMethod)("reduce",function(h){return p(d(this),h,arguments.length,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-reduce":24}],232:[function(p,l,u){var p=p("../internals/array-buffer-view-core"),s=p.aTypedArray,p=p.exportTypedArrayMethod,d=Math.floor;p("reverse",function(){for(var h,N=s(this).length,Be=d(N/2),b=0;b<Be;)h=this[b],this[b++]=this[--N],this[N]=h;return this})},{"../internals/array-buffer-view-core":12}],233:[function(N,l,u){var s=N("../internals/array-buffer-view-core"),p=N("../internals/to-length"),d=N("../internals/to-offset"),h=N("../internals/to-object"),N=N("../internals/fails"),Be=s.aTypedArray;(0,s.exportTypedArrayMethod)("set",function(b){Be(this);var E=d(1<arguments.length?arguments[1]:void 0,1),de=this.length,pe=h(b),Ye=p(pe.length),me=0;if(de<Ye+E)throw RangeError("Wrong length");for(;me<Ye;)this[E+me]=pe[me++]},N(function(){new Int8Array(1).set({})}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/to-length":138,"../internals/to-object":139,"../internals/to-offset":140}],234:[function(p,l,u){var N=p("../internals/array-buffer-view-core"),s=p("../internals/species-constructor"),p=p("../internals/fails"),d=N.aTypedArray,h=N.aTypedArrayConstructor,N=N.exportTypedArrayMethod,Be=[].slice;N("slice",function(b,E){for(var de=Be.call(d(this),b,E),b=s(this,this.constructor),pe=0,Ye=de.length,me=new(h(b))(Ye);pe<Ye;)me[pe]=de[pe++];return me},p(function(){new Int8Array(1).slice()}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/species-constructor":123}],235:[function(t,l,u){var s=t("../internals/array-buffer-view-core"),p=t("../internals/array-iteration").some,d=s.aTypedArray;(0,s.exportTypedArrayMethod)("some",function(h){return p(d(this),h,1<arguments.length?arguments[1]:void 0)})},{"../internals/array-buffer-view-core":12,"../internals/array-iteration":19}],236:[function(p,l,u){var p=p("../internals/array-buffer-view-core"),s=p.aTypedArray,p=p.exportTypedArrayMethod,d=[].sort;p("sort",function(h){return d.call(s(this),h)})},{"../internals/array-buffer-view-core":12}],237:[function(t,l,u){var s=t("../internals/array-buffer-view-core"),p=t("../internals/to-length"),d=t("../internals/to-absolute-index"),h=t("../internals/species-constructor"),N=s.aTypedArray;(0,s.exportTypedArrayMethod)("subarray",function(pe,b){var E=N(this),de=E.length,pe=d(pe,de);return new(h(E,E.constructor))(E.buffer,E.byteOffset+pe*E.BYTES_PER_ELEMENT,p((b===void 0?de:d(b,de))-pe))})},{"../internals/array-buffer-view-core":12,"../internals/species-constructor":123,"../internals/to-absolute-index":134,"../internals/to-length":138}],238:[function(p,l,u){var N=p("../internals/global"),s=p("../internals/array-buffer-view-core"),p=p("../internals/fails"),d=N.Int8Array,h=s.aTypedArray,N=s.exportTypedArrayMethod,Be=[].toLocaleString,b=[].slice,E=!!d&&p(function(){Be.call(new d(1))});N("toLocaleString",function(){return Be.apply(E?b.call(h(this)):h(this),arguments)},p(function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()})||!p(function(){d.prototype.toLocaleString.call([1,2])}))},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],239:[function(p,l,u){var s=p("../internals/array-buffer-view-core").exportTypedArrayMethod,N=p("../internals/fails"),p=p("../internals/global").Uint8Array,p=p&&p.prototype||{},d=[].toString,h=[].join,N=(N(function(){d.call({})})&&(d=function(){return h.call(this)}),p.toString!=d);s("toString",d,N)},{"../internals/array-buffer-view-core":12,"../internals/fails":51,"../internals/global":60}],240:[function(t,l,u){t("../internals/typed-array-constructor")("Uint16",function(s){return function(p,d,h){return s(this,p,d,h)}})},{"../internals/typed-array-constructor":144}],241:[function(t,l,u){t("../internals/typed-array-constructor")("Uint32",function(s){return function(p,d,h){return s(this,p,d,h)}})},{"../internals/typed-array-constructor":144}],242:[function(t,l,u){t("../internals/typed-array-constructor")("Uint8",function(s){return function(p,d,h){return s(this,p,d,h)}})},{"../internals/typed-array-constructor":144}],243:[function(t,l,u){t("../internals/typed-array-constructor")("Uint8",function(s){return function(p,d,h){return s(this,p,d,h)}},!0)},{"../internals/typed-array-constructor":144}],244:[function(Le,ft,u){function s(yt){return function(){return yt(this,arguments.length?arguments[0]:void 0)}}var p,d,h,N,Be,nt=Le("../internals/global"),b=Le("../internals/redefine-all"),E=Le("../internals/internal-metadata"),de=Le("../internals/collection"),pe=Le("../internals/collection-weak"),Ye=Le("../internals/is-object"),me=Le("../internals/internal-state").enforce,Le=Le("../internals/native-weak-map"),nt=!nt.ActiveXObject&&"ActiveXObject"in nt,tt=Object.isExtensible,ft=ft.exports=de("WeakMap",s,pe);Le&&nt&&(p=pe.getConstructor(s,"WeakMap",!0),E.REQUIRED=!0,de=ft.prototype,d=de.delete,h=de.has,N=de.get,Be=de.set,b(de,{delete:function(yt){var gt;return Ye(yt)&&!tt(yt)?((gt=me(this)).frozen||(gt.frozen=new p),d.call(this,yt)||gt.frozen.delete(yt)):d.call(this,yt)},has:function(yt){var gt;return Ye(yt)&&!tt(yt)?((gt=me(this)).frozen||(gt.frozen=new p),h.call(this,yt)||gt.frozen.has(yt)):h.call(this,yt)},get:function(yt){var gt;return!Ye(yt)||tt(yt)||((gt=me(this)).frozen||(gt.frozen=new p),h.call(this,yt))?N.call(this,yt):gt.frozen.get(yt)},set:function(yt,gt){var mt;return!Ye(yt)||tt(yt)||((mt=me(this)).frozen||(mt.frozen=new p),h.call(this,yt))?Be.call(this,yt,gt):mt.frozen.set(yt,gt),this}}))},{"../internals/collection":32,"../internals/collection-weak":31,"../internals/global":60,"../internals/internal-metadata":70,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-weak-map":86,"../internals/redefine-all":109}],245:[function(t,l,u){var s,p=t("../internals/global"),d=t("../internals/dom-iterables"),h=t("../internals/array-for-each"),N=t("../internals/create-non-enumerable-property");for(s in d){var Be=p[s],Be=Be&&Be.prototype;if(Be&&Be.forEach!==h)try{N(Be,"forEach",h)}catch{Be.forEach=h}}},{"../internals/array-for-each":16,"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60}],246:[function(Be,l,u){var s,p=Be("../internals/global"),d=Be("../internals/dom-iterables"),h=Be("../modules/es.array.iterator"),N=Be("../internals/create-non-enumerable-property"),Be=Be("../internals/well-known-symbol"),b=Be("iterator"),E=Be("toStringTag"),de=h.values;for(s in d){var pe=p[s],Ye=pe&&pe.prototype;if(Ye){if(Ye[b]!==de)try{N(Ye,b,de)}catch{Ye[b]=de}if(Ye[E]||N(Ye,E,s),d[s]){for(var me in h)if(Ye[me]!==h[me])try{N(Ye,me,h[me])}catch{Ye[me]=h[me]}}}}},{"../internals/create-non-enumerable-property":38,"../internals/dom-iterables":45,"../internals/global":60,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],247:[function(er,l,u){er("../modules/es.array.iterator");function s(ur){try{return decodeURIComponent(ur)}catch{return ur}}function p(ur){return Lt[ur]}function d(ur){return encodeURIComponent(ur).replace(Rt,p)}function h(ur){this.entries.length=0,Vt(this.entries,ur)}function N(ur,yr){if(ur<yr)throw TypeError("Not enough arguments")}function Be(){nt(this,Be,Pt);var ur,yr,Qt,nr,or,Wt,ir,br,Sr=0<arguments.length?arguments[0]:void 0,_r=[];if(Ht(this,{type:Pt,entries:_r,updateURL:function(){},updateSearchParams:h}),Sr!==void 0)if(mt(Sr))if(typeof(ur=Ct(Sr))=="function")for(Qt=(yr=ur.call(Sr)).next;!(nr=Qt.call(yr)).done;){if((Wt=(or=(nr=bt(gt(nr.value))).next).call(nr)).done||(ir=or.call(nr)).done||!or.call(nr).done)throw TypeError("Expected sequence with length 2");_r.push({key:Wt.value+"",value:ir.value+""})}else for(br in Sr)tt(Sr,br)&&_r.push({key:br,value:Sr[br]+""});else Vt(_r,typeof Sr=="string"?Sr.charAt(0)==="?"?Sr.slice(1):Sr:Sr+"")}var b=er("../internals/export"),Dt=er("../internals/get-built-in"),E=er("../internals/native-url"),de=er("../internals/redefine"),pe=er("../internals/redefine-all"),Ye=er("../internals/set-to-string-tag"),me=er("../internals/create-iterator-constructor"),Le=er("../internals/internal-state"),nt=er("../internals/an-instance"),tt=er("../internals/has"),ft=er("../internals/function-bind-context"),yt=er("../internals/classof"),gt=er("../internals/an-object"),mt=er("../internals/is-object"),wt=er("../internals/object-create"),St=er("../internals/create-property-descriptor"),bt=er("../internals/get-iterator"),Ct=er("../internals/get-iterator-method"),er=er("../internals/well-known-symbol"),Et=Dt("fetch"),It=Dt("Headers"),Dt=er("iterator"),Pt="URLSearchParams",qt=Pt+"Iterator",Ht=Le.set,Gt=Le.getterFor(Pt),Ut=Le.getterFor(qt),Yt=/\+/g,Zt=Array(4),vt=function(ur){var yr,Qt=ur.replace(Yt," "),nr=4;try{return decodeURIComponent(Qt)}catch{for(;nr;)Qt=Qt.replace((yr=nr--,Zt[yr-1]||(Zt[yr-1]=RegExp("((?:%[\\da-f]{2}){"+yr+"})","gi"))),s);return Qt}},Rt=/[!'()~]|%20/g,Lt={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Vt=function(ur,yr){if(yr)for(var Qt,nr=yr.split("&"),or=0;or<nr.length;)(Qt=nr[or++]).length&&(Qt=Qt.split("="),ur.push({key:vt(Qt.shift()),value:vt(Qt.join("="))}))},Jt=me(function(ur,yr){Ht(this,{type:qt,iterator:bt(Gt(ur).entries),kind:yr})},"Iterator",function(){var yr=Ut(this),ur=yr.kind,yr=yr.iterator.next(),Qt=yr.value;return yr.done||(yr.value=ur==="keys"?Qt.key:ur==="values"?Qt.value:[Qt.key,Qt.value]),yr}),er=Be.prototype;pe(er,{append:function(ur,yr){N(arguments.length,2);var Qt=Gt(this);Qt.entries.push({key:ur+"",value:yr+""}),Qt.updateURL()},delete:function(ur){N(arguments.length,1);for(var yr=Gt(this),Qt=yr.entries,nr=ur+"",or=0;or<Qt.length;)Qt[or].key===nr?Qt.splice(or,1):or++;yr.updateURL()},get:function(ur){N(arguments.length,1);for(var yr=Gt(this).entries,Qt=ur+"",nr=0;nr<yr.length;nr++)if(yr[nr].key===Qt)return yr[nr].value;return null},getAll:function(ur){N(arguments.length,1);for(var yr=Gt(this).entries,Qt=ur+"",nr=[],or=0;or<yr.length;or++)yr[or].key===Qt&&nr.push(yr[or].value);return nr},has:function(ur){N(arguments.length,1);for(var yr=Gt(this).entries,Qt=ur+"",nr=0;nr<yr.length;)if(yr[nr++].key===Qt)return!0;return!1},set:function(ur,yr){N(arguments.length,1);for(var Qt,nr=Gt(this),or=nr.entries,Wt=!1,ir=ur+"",br=yr+"",Sr=0;Sr<or.length;Sr++)(Qt=or[Sr]).key===ir&&(Wt?or.splice(Sr--,1):(Wt=!0,Qt.value=br));Wt||or.push({key:ir,value:br}),nr.updateURL()},sort:function(){for(var ur,yr,Qt=Gt(this),nr=Qt.entries,or=nr.slice(),Wt=nr.length=0;Wt<or.length;Wt++){for(ur=or[Wt],yr=0;yr<Wt;yr++)if(nr[yr].key>ur.key){nr.splice(yr,0,ur);break}yr===Wt&&nr.push(ur)}Qt.updateURL()},forEach:function(ur){for(var yr,Qt=Gt(this).entries,nr=ft(ur,1<arguments.length?arguments[1]:void 0,3),or=0;or<Qt.length;)nr((yr=Qt[or++]).value,yr.key,this)},keys:function(){return new Jt(this,"keys")},values:function(){return new Jt(this,"values")},entries:function(){return new Jt(this,"entries")}},{enumerable:!0}),de(er,Dt,er.entries),de(er,"toString",function(){for(var ur,yr=Gt(this).entries,Qt=[],nr=0;nr<yr.length;)ur=yr[nr++],Qt.push(d(ur.key)+"="+d(ur.value));return Qt.join("&")},{enumerable:!0}),Ye(Be,Pt),b({global:!0,forced:!E},{URLSearchParams:Be}),E||typeof Et!="function"||typeof It!="function"||b({global:!0,enumerable:!0,forced:!0},{fetch:function(or){var yr,Qt,nr,or=[or];return 1<arguments.length&&(mt(yr=arguments[1])&&(Qt=yr.body,yt(Qt)===Pt&&((nr=yr.headers?new It(yr.headers):new It).has("content-type")||nr.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),yr=wt(yr,{body:St(0,String(Qt)),headers:St(0,nr)}))),or.push(yr)),Et.apply(this,or)}}),l.exports={URLSearchParams:Be,getState:Gt}},{"../internals/an-instance":9,"../internals/an-object":10,"../internals/classof":29,"../internals/create-iterator-constructor":37,"../internals/create-property-descriptor":39,"../internals/export":50,"../internals/function-bind-context":55,"../internals/get-built-in":57,"../internals/get-iterator":59,"../internals/get-iterator-method":58,"../internals/has":61,"../internals/internal-state":71,"../internals/is-object":75,"../internals/native-url":85,"../internals/object-create":91,"../internals/redefine":110,"../internals/redefine-all":109,"../internals/set-to-string-tag":119,"../internals/well-known-symbol":150,"../modules/es.array.iterator":165}],248:[function(bt,l,u){bt("../modules/es.string.iterator");function s(mr){var gr,Yr,Hr,Sn;if(typeof mr=="number"){for(gr=[],Yr=0;Yr<4;Yr++)gr.unshift(mr%256),mr=qt(mr/256);return gr.join(".")}if(typeof mr!="object")return mr;for(gr="",Hr=ir(mr),Yr=0;Yr<8;Yr++)Sn&&mr[Yr]===0||(Sn=Sn&&!1,Hr===Yr?(gr+=Yr?":":"::",Sn=!0):(gr+=mr[Yr].toString(16),Yr<7&&(gr+=":")));return"["+gr+"]"}function p(mr){return!mr.host||mr.cannotBeABaseURL||mr.scheme=="file"}function d(mr,gr,Yr,Hr){var Sn,Kr,Dn,ln=Yr||Ir,jn=0,bn="",Lr=!1,cn=!1,xn=!1;for(Yr||(mr.scheme="",mr.username="",mr.password="",mr.host=null,mr.port=null,mr.path=[],mr.query=null,mr.fragment=null,mr.cannotBeABaseURL=!1,gr=gr.replace(nr,"")),gr=gr.replace(or,""),Sn=yt(gr);jn<=Sn.length;){switch(Kr=Sn[jn],ln){case Ir:if(!Kr||!vt.test(Kr)){if(Yr)return Ut;ln=tr;continue}bn+=Kr.toLowerCase(),ln=Cr;break;case Cr:if(Kr&&(Rt.test(Kr)||Kr=="+"||Kr=="-"||Kr=="."))bn+=Kr.toLowerCase();else{if(Kr!=":"){if(Yr)return Ut;bn="",ln=tr,jn=0;continue}if(Yr&&(kr(mr)!=tt(Nr,bn)||bn=="file"&&(qr(mr)||mr.port!==null)||mr.scheme=="file"&&!mr.host))return;if(mr.scheme=bn,Yr)return void(kr(mr)&&Nr[mr.scheme]==mr.port&&(mr.port=null));bn="",mr.scheme=="file"?ln=An:kr(mr)&&Hr&&Hr.scheme==mr.scheme?ln=ar:kr(mr)?ln=Dr:Sn[jn+1]=="/"?(ln=Kt,jn++):(mr.cannotBeABaseURL=!0,mr.path.push(""),ln=Ft)}break;case tr:if(!Hr||Hr.cannotBeABaseURL&&Kr!="#")return Ut;if(Hr.cannotBeABaseURL&&Kr=="#"){mr.scheme=Hr.scheme,mr.path=Hr.path.slice(),mr.query=Hr.query,mr.fragment="",mr.cannotBeABaseURL=!0,ln=jt;break}ln=Hr.scheme=="file"?An:cr;continue;case ar:if(Kr!="/"||Sn[jn+1]!="/"){ln=cr;continue}ln=zr,jn++;break;case Kt:if(Kr=="/"){ln=fn;break}ln=Mn;continue;case cr:if(mr.scheme=Hr.scheme,Kr==Be)mr.username=Hr.username,mr.password=Hr.password,mr.host=Hr.host,mr.port=Hr.port,mr.path=Hr.path.slice(),mr.query=Hr.query;else if(Kr=="/"||Kr=="\\"&&kr(mr))ln=Tr;else if(Kr=="?")mr.username=Hr.username,mr.password=Hr.password,mr.host=Hr.host,mr.port=Hr.port,mr.path=Hr.path.slice(),mr.query="",ln=Tt;else{if(Kr!="#"){mr.username=Hr.username,mr.password=Hr.password,mr.host=Hr.host,mr.port=Hr.port,mr.path=Hr.path.slice(),mr.path.pop(),ln=Mn;continue}mr.username=Hr.username,mr.password=Hr.password,mr.host=Hr.host,mr.port=Hr.port,mr.path=Hr.path.slice(),mr.query=Hr.query,mr.fragment="",ln=jt}break;case Tr:if(!kr(mr)||Kr!="/"&&Kr!="\\"){if(Kr!="/"){mr.username=Hr.username,mr.password=Hr.password,mr.host=Hr.host,mr.port=Hr.port,ln=Mn;continue}ln=fn}else ln=zr;break;case Dr:if(ln=zr,Kr!="/"||bn.charAt(jn+1)!="/")continue;jn++;break;case zr:if(Kr=="/"||Kr=="\\")break;ln=fn;continue;case fn:if(Kr=="@"){Lr&&(bn="%40"+bn);for(var Lr=!0,mn=yt(bn),$n=0;$n<mn.length;$n++){var Bn=mn[$n];Bn!=":"||xn?(Bn=jr(Bn,sr),xn?mr.password+=Bn:mr.username+=Bn):xn=!0}bn=""}else if(Kr==Be||Kr=="/"||Kr=="?"||Kr=="#"||Kr=="\\"&&kr(mr)){if(Lr&&bn=="")return Gt;jn-=yt(bn).length+1,bn="",ln=vn}else bn+=Kr;break;case vn:case _n:if(Yr&&mr.scheme=="file"){ln=En;continue}if(Kr!=":"||cn){if(Kr==Be||Kr=="/"||Kr=="?"||Kr=="#"||Kr=="\\"&&kr(mr)){if(kr(mr)&&bn=="")return Yt;if(Yr&&bn==""&&(qr(mr)||mr.port!==null))return;if(Dn=Wt(mr,bn))return Dn;if(bn="",ln=Tn,Yr)return;continue}Kr=="["?cn=!0:Kr=="]"&&(cn=!1),bn+=Kr}else{if(bn=="")return Yt;if(Dn=Wt(mr,bn))return Dn;if(bn="",ln=wn,Yr==_n)return}break;case wn:if(!Lt.test(Kr)){if(Kr==Be||Kr=="/"||Kr=="?"||Kr=="#"||Kr=="\\"&&kr(mr)||Yr){if(bn!=""){var qn=parseInt(bn,10);if(65535<qn)return Zt;mr.port=kr(mr)&&qn===Nr[mr.scheme]?null:qn,bn=""}if(Yr)return;ln=Tn;continue}return Zt}bn+=Kr;break;case An:if(mr.scheme="file",Kr=="/"||Kr=="\\")ln=Cn;else{if(!Hr||Hr.scheme!="file"){ln=Mn;continue}if(Kr==Be)mr.host=Hr.host,mr.path=Hr.path.slice(),mr.query=Hr.query;else if(Kr=="?")mr.host=Hr.host,mr.path=Hr.path.slice(),mr.query="",ln=Tt;else{if(Kr!="#"){Vr(Sn.slice(jn).join(""))||(mr.host=Hr.host,mr.path=Hr.path.slice(),Xr(mr)),ln=Mn;continue}mr.host=Hr.host,mr.path=Hr.path.slice(),mr.query=Hr.query,mr.fragment="",ln=jt}}break;case Cn:if(Kr=="/"||Kr=="\\"){ln=En;break}Hr&&Hr.scheme=="file"&&!Vr(Sn.slice(jn).join(""))&&(Pr(Hr.path[0],!0)?mr.path.push(Hr.path[0]):mr.host=Hr.host),ln=Mn;continue;case En:if(Kr==Be||Kr=="/"||Kr=="\\"||Kr=="?"||Kr=="#"){if(!Yr&&Pr(bn))ln=Mn;else{if(bn==""){if(mr.host="",Yr)return}else{if(Dn=Wt(mr,bn))return Dn;if(mr.host=="localhost"&&(mr.host=""),Yr)return;bn=""}ln=Tn}continue}bn+=Kr;break;case Tn:if(kr(mr)){if(ln=Mn,Kr!="/"&&Kr!="\\")continue}else if(Yr||Kr!="?")if(Yr||Kr!="#"){if(Kr!=Be&&(ln=Mn,Kr!="/"))continue}else mr.fragment="",ln=jt;else mr.query="",ln=Tt;break;case Mn:if(Kr==Be||Kr=="/"||Kr=="\\"&&kr(mr)||!Yr&&(Kr=="?"||Kr=="#")){if(Er(bn)?(Xr(mr),Kr=="/"||Kr=="\\"&&kr(mr)||mr.path.push("")):Gr(bn)?Kr=="/"||Kr=="\\"&&kr(mr)||mr.path.push(""):(mr.scheme=="file"&&!mr.path.length&&Pr(bn)&&(mr.host&&(mr.host=""),bn=bn.charAt(0)+":"),mr.path.push(bn)),bn="",mr.scheme=="file"&&(Kr==Be||Kr=="?"||Kr=="#"))for(;1<mr.path.length&&mr.path[0]==="";)mr.path.shift();Kr=="?"?(mr.query="",ln=Tt):Kr=="#"&&(mr.fragment="",ln=jt)}else bn+=jr(Kr,_r);break;case Ft:Kr=="?"?(mr.query="",ln=Tt):Kr=="#"?(mr.fragment="",ln=jt):Kr!=Be&&(mr.path[0]+=jr(Kr,br));break;case Tt:Yr||Kr!="#"?Kr!=Be&&(Kr=="'"&&kr(mr)?mr.query+="%27":mr.query+=Kr=="#"?"%23":jr(Kr,br)):(mr.fragment="",ln=jt);break;case jt:Kr!=Be&&(mr.fragment+=jr(Kr,Sr))}jn++}}function h(Kr){var gr,Yr,Hr=nt(this,h,"URL"),Sn=1<arguments.length?arguments[1]:void 0,Kr=String(Kr),Dn=Dt(Hr,{type:"URL"});if(Sn!==void 0){if(Sn instanceof h)gr=Pt(Sn);else if(Yr=d(gr={},String(Sn)))throw TypeError(Yr)}if(Yr=d(Dn,Kr,null,gr))throw TypeError(Yr);var ln=Dn.searchParams=new Et;(Sn=It(ln)).updateSearchParams(Dn.query),Sn.updateURL=function(){Dn.query=String(ln)||null},pe||(Hr.href=At.call(Hr),Hr.origin=Bt.call(Hr),Hr.protocol=lr.call(Hr),Hr.username=hr.call(Hr),Hr.password=dr.call(Hr),Hr.host=vr.call(Hr),Hr.hostname=Ur.call(Hr),Hr.port=Ar.call(Hr),Hr.pathname=an.call(Hr),Hr.search=pn.call(Hr),Hr.searchParams=Jr.call(Hr),Hr.hash=on.call(Hr))}function N(mr,gr){return{get:mr,set:gr,configurable:!0,enumerable:!0}}var Be,b,E,de=bt("../internals/export"),pe=bt("../internals/descriptors"),Ye=bt("../internals/native-url"),xt=bt("../internals/global"),me=bt("../internals/object-define-properties"),Le=bt("../internals/redefine"),nt=bt("../internals/an-instance"),tt=bt("../internals/has"),ft=bt("../internals/object-assign"),yt=bt("../internals/array-from"),gt=bt("../internals/string-multibyte").codeAt,mt=bt("../internals/string-punycode-to-ascii"),wt=bt("../internals/set-to-string-tag"),St=bt("../modules/web.url-search-params"),bt=bt("../internals/internal-state"),Ct=xt.URL,Et=St.URLSearchParams,It=St.getState,Dt=bt.set,Pt=bt.getterFor("URL"),qt=Math.floor,Ht=Math.pow,Gt="Invalid authority",Ut="Invalid scheme",Yt="Invalid host",Zt="Invalid port",vt=/[A-Za-z]/,Rt=/[\d+-.A-Za-z]/,Lt=/\d/,Vt=/^(0x|0X)/,Jt=/^[0-7]+$/,er=/^\d+$/,ur=/^[\dA-Fa-f]+$/,yr=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,Qt=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,nr=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,or=/[\u0009\u000A\u000D]/g,Wt=function(mr,gr){var Yr,Hr,Sn;if(gr.charAt(0)=="[")return gr.charAt(gr.length-1)=="]"&&(Yr=function(Kr){var Dn=[0,0,0,0,0,0,0,0],ln=0,jn=null,bn=0,Lr,cn,xn,mn,$n,Bn,qn,Gn=function(){return Kr.charAt(bn)};if(Gn()==":"){if(Kr.charAt(1)!=":")return;bn+=2,ln++,jn=ln}for(;Gn();){if(ln==8)return;if(Gn()==":"){if(jn!==null)return;bn++,ln++,jn=ln;continue}for(Lr=cn=0;cn<4&&ur.test(Gn());)Lr=Lr*16+parseInt(Gn(),16),bn++,cn++;if(Gn()=="."){if(cn==0||(bn-=cn,ln>6))return;for(xn=0;Gn();){if(mn=null,xn>0)if(Gn()=="."&&xn<4)bn++;else return;if(!Lt.test(Gn()))return;for(;Lt.test(Gn());){if($n=parseInt(Gn(),10),mn===null)mn=$n;else{if(mn==0)return;mn=mn*10+$n}if(mn>255)return;bn++}Dn[ln]=Dn[ln]*256+mn,xn++,(xn==2||xn==4)&&ln++}if(xn!=4)return;break}else if(Gn()==":"){if(bn++,!Gn())return}else if(Gn())return;Dn[ln++]=Lr}if(jn!==null)for(Bn=ln-jn,ln=7;ln!=0&&Bn>0;)qn=Dn[ln],Dn[ln--]=Dn[jn+Bn-1],Dn[jn+--Bn]=qn;else if(ln!=8)return;return Dn}(gr.slice(1,-1)))?void(mr.host=Yr):Yt;if(kr(mr))return gr=mt(gr),yr.test(gr)||(Yr=function(Kr){var Dn=Kr.split("."),ln,jn,bn,Lr,cn,xn,mn;if(Dn.length&&Dn[Dn.length-1]==""&&Dn.pop(),(ln=Dn.length)>4)return Kr;for(jn=[],bn=0;bn<ln;bn++){if(Lr=Dn[bn],Lr=="")return Kr;if(cn=10,Lr.length>1&&Lr.charAt(0)=="0"&&(cn=Vt.test(Lr)?16:8,Lr=Lr.slice(cn==8?1:2)),Lr==="")xn=0;else{if(!(cn==10?er:cn==8?Jt:ur).test(Lr))return Kr;xn=parseInt(Lr,cn)}jn.push(xn)}for(bn=0;bn<ln;bn++)if(xn=jn[bn],bn==ln-1){if(xn>=Ht(256,5-ln))return null}else if(xn>255)return null;for(mn=jn.pop(),bn=0;bn<jn.length;bn++)mn+=jn[bn]*Ht(256,3-bn);return mn}(gr))===null?Yt:void(mr.host=Yr);if(Qt.test(gr))return Yt;for(Yr="",Hr=yt(gr),Sn=0;Sn<Hr.length;Sn++)Yr+=jr(Hr[Sn],br);mr.host=Yr},ir=function(mr){for(var gr=null,Yr=1,Hr=null,Sn=0,Kr=0;Kr<8;Kr++)mr[Kr]!==0?(Yr<Sn&&(gr=Hr,Yr=Sn),Hr=null,Sn=0):(Hr===null&&(Hr=Kr),++Sn);return Yr<Sn&&(gr=Hr,Yr=Sn),gr},br={},Sr=ft({},br,{" ":1,'"':1,"<":1,">":1,"`":1}),_r=ft({},Sr,{"#":1,"?":1,"{":1,"}":1}),sr=ft({},_r,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),jr=function(mr,gr){var Yr=gt(mr,0);return 32<Yr&&Yr<127&&!tt(gr,mr)?mr:encodeURIComponent(mr)},Nr={ftp:21,file:null,http:80,https:443,ws:80,wss:443},kr=function(mr){return tt(Nr,mr.scheme)},qr=function(mr){return mr.username!=""||mr.password!=""},Pr=function(mr,gr){return mr.length==2&&vt.test(mr.charAt(0))&&((mr=mr.charAt(1))==":"||!gr&&mr=="|")},Vr=function(mr){return 1<mr.length&&Pr(mr.slice(0,2))&&(mr.length==2||(mr=mr.charAt(2))==="/"||mr==="\\"||mr==="?"||mr==="#")},Xr=function(mr){var gr=mr.path,Yr=gr.length;!Yr||mr.scheme=="file"&&Yr==1&&Pr(gr[0],!0)||gr.pop()},Gr=function(mr){return mr==="."||mr.toLowerCase()==="%2e"},Er=function(mr){return(mr=mr.toLowerCase())===".."||mr==="%2e."||mr===".%2e"||mr==="%2e%2e"},Ir={},Cr={},tr={},ar={},Kt={},cr={},Tr={},Dr={},zr={},fn={},vn={},_n={},wn={},An={},Cn={},En={},Tn={},Mn={},Ft={},Tt={},jt={},xt=h.prototype,At=function(){var mr=Pt(this),gr=mr.scheme,Yr=mr.username,Hr=mr.password,Sn=mr.host,Kr=mr.port,Dn=mr.path,ln=mr.query,jn=mr.fragment,bn=gr+":";return Sn!==null?(bn+="//",qr(mr)&&(bn+=Yr+(Hr?":"+Hr:"")+"@"),bn+=s(Sn),Kr!==null&&(bn+=":"+Kr)):gr=="file"&&(bn+="//"),bn+=mr.cannotBeABaseURL?Dn[0]:Dn.length?"/"+Dn.join("/"):"",ln!==null&&(bn+="?"+ln),jn!==null&&(bn+="#"+jn),bn},Bt=function(){var mr=Pt(this),gr=mr.scheme,Yr=mr.port;if(gr=="blob")try{return new URL(gr.path[0]).origin}catch{return"null"}return gr!="file"&&kr(mr)?gr+"://"+s(mr.host)+(Yr!==null?":"+Yr:""):"null"},lr=function(){return Pt(this).scheme+":"},hr=function(){return Pt(this).username},dr=function(){return Pt(this).password},vr=function(){var gr=Pt(this),mr=gr.host,gr=gr.port;return mr===null?"":gr===null?s(mr):s(mr)+":"+gr},Ur=function(){var mr=Pt(this).host;return mr===null?"":s(mr)},Ar=function(){var mr=Pt(this).port;return mr===null?"":String(mr)},an=function(){var mr=Pt(this),gr=mr.path;return mr.cannotBeABaseURL?gr[0]:gr.length?"/"+gr.join("/"):""},pn=function(){var mr=Pt(this).query;return mr?"?"+mr:""},Jr=function(){return Pt(this).searchParams},on=function(){var mr=Pt(this).fragment;return mr?"#"+mr:""};pe&&me(xt,{href:N(At,function(Yr){var gr=Pt(this),Yr=String(Yr),Yr=d(gr,Yr);if(Yr)throw TypeError(Yr);It(gr.searchParams).updateSearchParams(gr.query)}),origin:N(Bt),protocol:N(lr,function(mr){var gr=Pt(this);d(gr,String(mr)+":",Ir)}),username:N(hr,function(mr){var gr=Pt(this),Yr=yt(String(mr));if(!p(gr)){gr.username="";for(var Hr=0;Hr<Yr.length;Hr++)gr.username+=jr(Yr[Hr],sr)}}),password:N(dr,function(mr){var gr=Pt(this),Yr=yt(String(mr));if(!p(gr)){gr.password="";for(var Hr=0;Hr<Yr.length;Hr++)gr.password+=jr(Yr[Hr],sr)}}),host:N(vr,function(mr){var gr=Pt(this);gr.cannotBeABaseURL||d(gr,String(mr),vn)}),hostname:N(Ur,function(mr){var gr=Pt(this);gr.cannotBeABaseURL||d(gr,String(mr),_n)}),port:N(Ar,function(mr){var gr=Pt(this);p(gr)||((mr=String(mr))==""?gr.port=null:d(gr,mr,wn))}),pathname:N(an,function(mr){var gr=Pt(this);gr.cannotBeABaseURL||(gr.path=[],d(gr,mr+"",Tn))}),search:N(pn,function(mr){var gr=Pt(this);(mr=String(mr))==""?gr.query=null:(mr.charAt(0)=="?"&&(mr=mr.slice(1)),gr.query="",d(gr,mr,Tt)),It(gr.searchParams).updateSearchParams(gr.query)}),searchParams:N(Jr),hash:N(on,function(mr){var gr=Pt(this);(mr=String(mr))==""?gr.fragment=null:(mr.charAt(0)=="#"&&(mr=mr.slice(1)),gr.fragment="",d(gr,mr,jt))})}),Le(xt,"toJSON",function(){return At.call(this)},{enumerable:!0}),Le(xt,"toString",function(){return At.call(this)},{enumerable:!0}),Ct&&(b=Ct.createObjectURL,E=Ct.revokeObjectURL,b&&Le(h,"createObjectURL",function(mr){return b.apply(Ct,arguments)}),E&&Le(h,"revokeObjectURL",function(mr){return E.apply(Ct,arguments)})),wt(h,"URL"),de({global:!0,forced:!Ye,sham:!pe},{URL:h})},{"../internals/an-instance":9,"../internals/array-from":17,"../internals/descriptors":43,"../internals/export":50,"../internals/global":60,"../internals/has":61,"../internals/internal-state":71,"../internals/native-url":85,"../internals/object-assign":90,"../internals/object-define-properties":92,"../internals/redefine":110,"../internals/set-to-string-tag":119,"../internals/string-multibyte":125,"../internals/string-punycode-to-ascii":128,"../modules/es.string.iterator":200,"../modules/web.url-search-params":247}],249:[function(t,l,u){l.exports=t("./").polyfill()},{"./":250}],250:[function(t,l,u){(function(s,p){var d,h;d=this,h=function(){function N(Wt){return typeof Wt=="function"}var Be=Array.isArray||function(Wt){return Object.prototype.toString.call(Wt)==="[object Array]"},b=0,E=void 0,de=void 0,pe=function(Wt,ir){ft[b]=Wt,ft[b+1]=ir,(b+=2)===2&&(de?de(yt):Et())},Ye=typeof window<"u"?window:void 0,me=Ye||{},me=me.MutationObserver||me.WebKitMutationObserver,Le=typeof self>"u"&&s!==void 0&&{}.toString.call(s)==="[object process]",nt=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function tt(){var Wt=setTimeout;return function(){return Wt(yt,1)}}var ft=new Array(1e3);function yt(){for(var Wt=0;Wt<b;Wt+=2)(0,ft[Wt])(ft[Wt+1]),ft[Wt]=void 0,ft[Wt+1]=void 0;b=0}function gt(){try{var Wt=Function("return this")().require("vertx");return(E=Wt.runOnLoop||Wt.runOnContext)!==void 0?function(){E(yt)}:tt()}catch{return tt()}}var mt,wt,St,Et=void 0;function bt(Wt,ir){var br,Sr=this,_r=new this.constructor(Dt),sr=(_r[It]===void 0&&ur(_r),Sr._state);return sr?(br=arguments[sr-1],pe(function(){return Jt(sr,_r,br,Sr._result)})):Lt(Sr,_r,Wt,ir),_r}function Ct(Wt){var ir;return Wt&&typeof Wt=="object"&&Wt.constructor===this?Wt:(Yt(ir=new this(Dt),Wt),ir)}var Et=Le?function(){return s.nextTick(yt)}:me?(wt=0,Le=new me(yt),St=document.createTextNode(""),Le.observe(St,{characterData:!0}),function(){St.data=wt=++wt%2}):nt?((mt=new MessageChannel).port1.onmessage=yt,function(){return mt.port2.postMessage(0)}):(Ye===void 0&&typeof t=="function"?gt:tt)(),It=Math.random().toString(36).substring(2);function Dt(){}var Pt=void 0,qt=1,Ht=2;function Gt(Wt,ir,br){pe(function(Sr){var _r=!1,sr=function(jr,Nr,kr,qr){try{jr.call(Nr,kr,qr)}catch(Pr){return Pr}}(br,ir,function(jr){_r||(_r=!0,(ir!==jr?Yt:vt)(Sr,jr))},function(jr){_r||(_r=!0,Rt(Sr,jr))},Sr._label);!_r&&sr&&(_r=!0,Rt(Sr,sr))},Wt)}function Ut(Wt,ir,br){var Sr,_r;ir.constructor===Wt.constructor&&br===bt&&ir.constructor.resolve===Ct?(Sr=Wt,(_r=ir)._state===qt?vt(Sr,_r._result):_r._state===Ht?Rt(Sr,_r._result):Lt(_r,void 0,function(sr){return Yt(Sr,sr)},function(sr){return Rt(Sr,sr)})):br!==void 0&&N(br)?Gt(Wt,ir,br):vt(Wt,ir)}function Yt(Wt,ir){if(Wt===ir)Rt(Wt,new TypeError("You cannot resolve a promise with itself"));else if(br=typeof ir,ir===null||br!="object"&&br!="function")vt(Wt,ir);else{br=void 0;try{br=ir.then}catch(Sr){return void Rt(Wt,Sr)}Ut(Wt,ir,br)}var br}function Zt(Wt){Wt._onerror&&Wt._onerror(Wt._result),Vt(Wt)}function vt(Wt,ir){Wt._state===Pt&&(Wt._result=ir,Wt._state=qt,Wt._subscribers.length!==0&&pe(Vt,Wt))}function Rt(Wt,ir){Wt._state===Pt&&(Wt._state=Ht,Wt._result=ir,pe(Zt,Wt))}function Lt(Wt,ir,br,Sr){var _r=Wt._subscribers,sr=_r.length;Wt._onerror=null,_r[sr]=ir,_r[sr+qt]=br,_r[sr+Ht]=Sr,sr===0&&Wt._state&&pe(Vt,Wt)}function Vt(Wt){var ir=Wt._subscribers,br=Wt._state;if(ir.length!==0){for(var Sr,_r=void 0,sr=Wt._result,jr=0;jr<ir.length;jr+=3)Sr=ir[jr],_r=ir[jr+br],Sr?Jt(br,Sr,_r,sr):_r(sr);Wt._subscribers.length=0}}function Jt(Wt,ir,br,Sr){var _r=N(br),sr=void 0,jr=void 0,Nr=!0;if(_r){try{sr=br(Sr)}catch(kr){Nr=!1,jr=kr}if(ir===sr)return void Rt(ir,new TypeError("A promises callback cannot return that same promise."))}else sr=Sr;ir._state===Pt&&(_r&&Nr?Yt(ir,sr):Nr===!1?Rt(ir,jr):Wt===qt?vt(ir,sr):Wt===Ht&&Rt(ir,sr))}var er=0;function ur(Wt){Wt[It]=er++,Wt._state=void 0,Wt._result=void 0,Wt._subscribers=[]}Qt.prototype._enumerate=function(Wt){for(var ir=0;this._state===Pt&&ir<Wt.length;ir++)this._eachEntry(Wt[ir],ir)},Qt.prototype._eachEntry=function(Wt,ir){var br=this._instanceConstructor,Sr=br.resolve;if(Sr===Ct){var _r,sr=void 0,jr=void 0,Nr=!1;try{sr=Wt.then}catch(kr){Nr=!0,jr=kr}sr===bt&&Wt._state!==Pt?this._settledAt(Wt._state,ir,Wt._result):typeof sr!="function"?(this._remaining--,this._result[ir]=Wt):br===nr?(_r=new br(Dt),Nr?Rt(_r,jr):Ut(_r,Wt,sr),this._willSettleAt(_r,ir)):this._willSettleAt(new br(function(kr){return kr(Wt)}),ir)}else this._willSettleAt(Sr(Wt),ir)},Qt.prototype._settledAt=function(Wt,ir,br){var Sr=this.promise;Sr._state===Pt&&(this._remaining--,Wt===Ht?Rt(Sr,br):this._result[ir]=br),this._remaining===0&&vt(Sr,this._result)},Qt.prototype._willSettleAt=function(Wt,ir){var br=this;Lt(Wt,void 0,function(Sr){return br._settledAt(qt,ir,Sr)},function(Sr){return br._settledAt(Ht,ir,Sr)})};var yr=Qt;function Qt(Wt,ir){this._instanceConstructor=Wt,this.promise=new Wt(Dt),this.promise[It]||ur(this.promise),Be(ir)?(this.length=ir.length,this._remaining=ir.length,this._result=new Array(this.length),this.length!==0&&(this.length=this.length||0,this._enumerate(ir),this._remaining!==0)||vt(this.promise,this._result)):Rt(this.promise,new Error("Array Methods must be provided an Array"))}or.prototype.catch=function(Wt){return this.then(null,Wt)},or.prototype.finally=function(Wt){var ir=this.constructor;return N(Wt)?this.then(function(br){return ir.resolve(Wt()).then(function(){return br})},function(br){return ir.resolve(Wt()).then(function(){throw br})}):this.then(Wt,Wt)};var nr=or;function or(Wt){if(this[It]=er++,this._result=this._state=void 0,this._subscribers=[],Dt!==Wt){if(typeof Wt!="function")throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof or))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var ir=this;try{Wt(function(br){Yt(ir,br)},function(br){Rt(ir,br)})}catch(br){Rt(ir,br)}}}return nr.prototype.then=bt,nr.all=function(Wt){return new yr(this,Wt).promise},nr.race=function(Wt){var ir=this;return Be(Wt)?new ir(function(br,Sr){for(var _r=Wt.length,sr=0;sr<_r;sr++)ir.resolve(Wt[sr]).then(br,Sr)}):new ir(function(br,Sr){return Sr(new TypeError("You must pass an array to race."))})},nr.resolve=Ct,nr.reject=function(Wt){var ir=new this(Dt);return Rt(ir,Wt),ir},nr._setScheduler=function(Wt){de=Wt},nr._setAsap=function(Wt){pe=Wt},nr._asap=pe,nr.polyfill=function(){var Wt=void 0;if(p!==void 0)Wt=p;else if(typeof self<"u")Wt=self;else try{Wt=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var ir=Wt.Promise;if(ir){var br=null;try{br=Object.prototype.toString.call(ir.resolve())}catch{}if(br==="[object Promise]"&&!ir.cast)return}Wt.Promise=nr},nr.Promise=nr},typeof u=="object"&&l!==void 0?l.exports=h():d.ES6Promise=h()}).call(this,t("_process"),typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:259}],251:[function(t,l,u){var s,p;s=this,p=function(d,h){var N=5e3,Be="callback";function b(de){try{delete window[de]}catch{window[de]=void 0}}function E(de){de=document.getElementById(de),de&&document.getElementsByTagName("head")[0].removeChild(de)}h.exports=function(de){var pe=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],Ye=de,me=pe.timeout||N,Le=pe.jsonpCallback||Be,nt=void 0;return new Promise(function(tt,ft){var yt=pe.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),gt=Le+"_"+yt,mt=(window[yt]=function(wt){tt({ok:!0,json:function(){return Promise.resolve(wt)}}),nt&&clearTimeout(nt),E(gt),b(yt)},Ye+=Ye.indexOf("?")===-1?"?":"&",document.createElement("script"));mt.setAttribute("src",""+Ye+Le+"="+yt),pe.charset&&mt.setAttribute("charset",pe.charset),mt.id=gt,document.getElementsByTagName("head")[0].appendChild(mt),nt=setTimeout(function(){ft(new Error("JSONP request to "+de+" timed out")),b(yt),E(gt),window[yt]=function(){b(yt)}},me),mt.onerror=function(){ft(new Error("JSONP request to "+de+" failed")),b(yt),E(gt),nt&&clearTimeout(nt)}})}},u!==void 0&&l!==void 0?p(0,l):(p(p={exports:{}},p),s.fetchJsonp=p.exports)},{}],252:[function(t,l,u){var s=function(p){var d,h,N,Be,b,E,de,pe,Ye,me,Le;if(!(p===void 0||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent)))return Le=p.document,d=function(){return p.URL||p.webkitURL||p},h=Le.createElementNS("http://www.w3.org/1999/xhtml","a"),N="download"in h,Be=/constructor/i.test(p.HTMLElement)||p.safari,b=/CriOS\/[\d]+/.test(navigator.userAgent),E=function(nt){(p.setImmediate||p.setTimeout)(function(){throw nt},0)},de=4e4,pe=function(nt){setTimeout(function(){typeof nt=="string"?d().revokeObjectURL(nt):nt.remove()},de)},Ye=function(nt){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(nt.type)?new Blob(["\uFEFF",nt],{type:nt.type}):nt},Le=(me=function(nt,tt,wt){wt||(nt=Ye(nt));var yt,gt,mt=this,wt=nt.type==="application/octet-stream",St=function(){for(var bt=mt,Ct="writestart progress write writeend".split(" "),Et=void 0,It=(Ct=[].concat(Ct)).length;It--;){var Dt=bt["on"+Ct[It]];if(typeof Dt=="function")try{Dt.call(bt,Et||bt)}catch(Pt){E(Pt)}}};mt.readyState=mt.INIT,N?(yt=d().createObjectURL(nt),setTimeout(function(){var bt,Ct;h.href=yt,h.download=tt,bt=h,Ct=new MouseEvent("click"),bt.dispatchEvent(Ct),St(),pe(yt),mt.readyState=mt.DONE})):(b||wt&&Be)&&p.FileReader?((gt=new FileReader).onloadend=function(){var bt=b?gt.result:gt.result.replace(/^data:[^;]*;/,"data:attachment/file;");p.open(bt,"_blank")||(p.location.href=bt),bt=void 0,mt.readyState=mt.DONE,St()},gt.readAsDataURL(nt),mt.readyState=mt.INIT):(yt=yt||d().createObjectURL(nt),!wt&&p.open(yt,"_blank")||(p.location.href=yt),mt.readyState=mt.DONE,St(),pe(yt))}).prototype,typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(nt,tt,ft){return tt=tt||nt.name||"download",ft||(nt=Ye(nt)),navigator.msSaveOrOpenBlob(nt,tt)}:(Le.abort=function(){},Le.readyState=Le.INIT=0,Le.WRITING=1,Le.DONE=2,Le.error=Le.onwritestart=Le.onprogress=Le.onwrite=Le.onabort=Le.onerror=Le.onwriteend=null,function(nt,tt,ft){return new me(nt,tt||nt.name||"download",ft)})}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);l!==void 0&&l.exports?l.exports.saveAs=s:n!=null},{}],253:[function(t,l,u){var s,p=Object.defineProperty,d=(p(u,"__esModule",{value:!0}),u),h={GIFEncoder:()=>St,applyPalette:()=>function(Pt,qt,Ht="rgb565"){if(!Pt||!Pt.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(Pt instanceof Uint8Array||Pt instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(256<qt.length)throw new Error("applyPalette() only works with 256 colors or less");const Gt=new Uint32Array(Pt.buffer),Ut=Gt.length,Yt=Ht==="rgb444"?4096:65536,Zt=new Uint8Array(Ut),vt=new Array(Yt);if(Ht==="rgba4444")for(let or=0;or<Ut;or++){var Jt=Gt[or],Rt=Jt>>24&255,Lt=Jt>>16&255,Vt=Jt>>8&255,Jt=255&Jt,er=pe(Jt,Vt,Lt,Rt),er=er in vt?vt[er]:vt[er]=function(Wt,ir,br,Sr,_r){let sr=0,jr=1e100;for(let Pr=0;Pr<_r.length;Pr++){var Nr,kr=_r[Pr],qr=gt(kr[3]-Sr);qr>jr||(Nr=kr[0],(qr+=gt(Nr-Wt))>jr||(Nr=kr[1],(qr+=gt(Nr-ir))>jr||(Nr=kr[2],(qr+=gt(Nr-br))>jr||(jr=qr,sr=Pr))))}return sr}(Jt,Vt,Lt,Rt,qt);Zt[or]=er}else{const or=Ht==="rgb444"?Ye:de;for(let Wt=0;Wt<Ut;Wt++){var Qt=Gt[Wt],ur=Qt>>16&255,yr=Qt>>8&255,Qt=255&Qt,nr=or(Qt,yr,ur),nr=nr in vt?vt[nr]:vt[nr]=function(ir,br,Sr,_r){let sr=0,jr=1e100;for(let Pr=0;Pr<_r.length;Pr++){var Nr,kr=_r[Pr],qr=gt(kr[0]-ir);qr>jr||(Nr=kr[1],(qr+=gt(Nr-br))>jr||(Nr=kr[2],(qr+=gt(Nr-Sr))>jr||(jr=qr,sr=Pr)))}return sr}(Qt,yr,ur,qt);Zt[Wt]=nr}}return Zt},default:()=>Dt,nearestColor:()=>function(Pt,qt,Ht=ft){return Pt[mt(Pt,qt,Ht)]},nearestColorIndex:()=>mt,nearestColorIndexWithDistance:()=>wt,prequantize:()=>function(Pt,{roundRGB:qt=5,roundAlpha:Ht=10,oneBitAlpha:Gt=null}={}){const Ut=new Uint32Array(Pt.buffer);for(let Lt=0;Lt<Ut.length;Lt++){var Rt=Ut[Lt];let Vt=Rt>>24&255;var Yt,Zt=Rt>>16&255,vt=Rt>>8&255,Rt=255&Rt;Vt=yt(Vt,Ht),Gt&&(Yt=typeof Gt=="number"?Gt:127,Vt=Vt<=Yt?0:255),Rt=yt(Rt,qt),vt=yt(vt,qt),Zt=yt(Zt,qt),Ut[Lt]=Vt<<24|Zt<<16|vt<<8|Rt<<0}},quantize:()=>function(Pt,qt,Ht={}){var{format:Gt="rgb565",clearAlpha:Ut=!0,clearAlphaColor:Yt=0,clearAlphaThreshold:Zt=0,oneBitAlpha:vt=!1}=Ht;if(!Pt||!Pt.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(Pt instanceof Uint8Array||Pt instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");Pt=new Uint32Array(Pt.buffer);let Rt=Ht.useSqrt!==!1;const Lt=Gt==="rgba4444",Vt=function(Vr,Xr){const Gr=Xr==="rgb444"?4096:65536,Er=new Array(Gr),Ir=Vr.length;if(Xr==="rgba4444")for(let Cn=0;Cn<Ir;++Cn){var Kt=Vr[Cn],Cr=Kt>>24&255,tr=Kt>>16&255,ar=Kt>>8&255,Kt=255&Kt,cr=pe(Kt,ar,tr,Cr);let En=cr in Er?Er[cr]:Er[cr]=tt();En.rc+=Kt,En.gc+=ar,En.bc+=tr,En.ac+=Cr,En.cnt++}else if(Xr==="rgb444")for(let Cn=0;Cn<Ir;++Cn){var zr=Vr[Cn],Tr=zr>>16&255,Dr=zr>>8&255,zr=255&zr,fn=Ye(zr,Dr,Tr);let En=fn in Er?Er[fn]:Er[fn]=tt();En.rc+=zr,En.gc+=Dr,En.bc+=Tr,En.cnt++}else for(let Cn=0;Cn<Ir;++Cn){var wn=Vr[Cn],vn=wn>>16&255,_n=wn>>8&255,wn=255&wn,An=de(wn,_n,vn);let En=An in Er?Er[An]:Er[An]=tt();En.rc+=wn,En.gc+=_n,En.bc+=vn,En.cnt++}return Er}(Pt,Gt),Jt=Vt.length,er=Jt-1,ur=new Uint32Array(Jt+1);for(var yr=0,Qt=0;Qt<Jt;++Qt){const Vr=Vt[Qt];Vr!=null&&(kr=1/Vr.cnt,Lt&&(Vr.ac*=kr),Vr.rc*=kr,Vr.gc*=kr,Vr.bc*=kr,Vt[yr++]=Vr)}Le(qt)/yr<.022&&(Rt=!1);for(var nr,or,Wt,Qt=0;Qt<yr-1;++Qt)Vt[Qt].fw=Qt+1,Vt[Qt+1].bk=Qt,Rt&&(Vt[Qt].cnt=Math.sqrt(Vt[Qt].cnt));for(Rt&&(Vt[Qt].cnt=Math.sqrt(Vt[Qt].cnt)),Qt=0;Qt<yr;++Qt){nt(Vt,Qt);var ir=Vt[Qt].err;for(or=++ur[0];1<or&&(Wt=or>>1,!(Vt[nr=ur[Wt]].err<=ir));or=Wt)ur[or]=nr;ur[or]=Qt}var br,Sr=yr-qt;for(Qt=0;Qt<Sr;){for(;;){var _r=ur[1];if((br=Vt[_r]).tm>=br.mtm&&Vt[br.nn].mtm<=br.tm)break;for(br.mtm==er?_r=ur[1]=ur[ur[0]--]:(nt(Vt,_r),br.tm=Qt),ir=Vt[_r].err,or=1;(Wt=or+or)<=ur[0]&&(Wt<ur[0]&&Vt[ur[Wt]].err>Vt[ur[Wt+1]].err&&Wt++,!(ir<=Vt[nr=ur[Wt]].err));or=Wt)ur[or]=nr;ur[or]=_r}var sr=Vt[br.nn],jr=br.cnt,Nr=sr.cnt,kr=1/(jr+Nr);Lt&&(br.ac=kr*(jr*br.ac+Nr*sr.ac)),br.rc=kr*(jr*br.rc+Nr*sr.rc),br.gc=kr*(jr*br.gc+Nr*sr.gc),br.bc=kr*(jr*br.bc+Nr*sr.bc),br.cnt+=sr.cnt,br.mtm=++Qt,Vt[sr.bk].fw=sr.fw,Vt[sr.fw].bk=sr.bk,sr.mtm=er}let qr=[];for(Qt=0;;0){let Vr=me(Math.round(Vt[Qt].rc),0,255),Xr=me(Math.round(Vt[Qt].gc),0,255),Gr=me(Math.round(Vt[Qt].bc),0,255),Er=255;Lt&&(Er=me(Math.round(Vt[Qt].ac),0,255),vt&&(Pr=typeof vt=="number"?vt:127,Er=Er<=Pr?0:255),Ut&&Er<=Zt&&(Vr=Xr=Gr=Yt,Er=0));var Pr=Lt?[Vr,Xr,Gr,Er]:[Vr,Xr,Gr];if(function(Ir,Cr){for(let Kt=0;Kt<Ir.length;Kt++){var ar=Ir[Kt],tr=ar[0]===Cr[0]&&ar[1]===Cr[1]&&ar[2]===Cr[2],ar=!(4<=ar.length&&4<=Cr.length)||ar[3]===Cr[3];if(tr&&ar)return!0}return!1}(qr,Pr)||qr.push(Pr),(Qt=Vt[Qt].fw)==0)break}return qr},snapColorsToPalette:()=>function(Pt,qt,Ht=5){if(Pt.length&&qt.length){var Gt=Pt.map(Rt=>Rt.slice(0,3)),Ut=Ht*Ht,Yt=Pt[0].length;for(let Rt=0;Rt<qt.length;Rt++){let Lt=qt[Rt];Lt=Lt.length<Yt?[Lt[0],Lt[1],Lt[2],255]:Lt.length>Yt?Lt.slice(0,3):Lt.slice();var vt=wt(Gt,Lt.slice(0,3),ft),Zt=vt[0],vt=vt[1];0<vt&&vt<=Ut&&(Pt[Zt]=Lt)}}}};for(s in h)p(d,s,{get:h[s],enumerable:!0});var N={trailer:59};function Be(Pt=256){let qt=0,Ht=new Uint8Array(Pt);return{get buffer(){return Ht.buffer},reset(){qt=0},bytesView(){return Ht.subarray(0,qt)},bytes(){return Ht.slice(0,qt)},writeByte(Ut){Gt(qt+1),Ht[qt]=Ut,qt++},writeBytes(Ut,Yt=0,Zt=Ut.length){Gt(qt+Zt);for(let vt=0;vt<Zt;vt++)Ht[qt++]=Ut[vt+Yt]},writeBytesView(Ut,Yt=0,Zt=Ut.byteLength){Gt(qt+Zt),Ht.set(Ut.subarray(Yt,Yt+Zt),qt),qt+=Zt}};function Gt(Ut){var Yt=Ht.length;if(!(Ut<=Yt)){Ut=Math.max(Ut,Yt*(Yt<1048576?2:1.125)>>>0),Yt!=0&&(Ut=Math.max(Ut,256));const Zt=Ht;Ht=new Uint8Array(Ut),0<qt&&Ht.set(Zt.subarray(0,qt),0)}}}var b=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],E=function(Pt,qt,Ht,Lt,Ut=Be(512),Yt=new Uint8Array(256),Zt=new Int32Array(5003),vt=new Int32Array(5003)){var Rt=Zt.length,Lt=Math.max(2,Lt);Yt.fill(0),vt.fill(0),Zt.fill(-1);let Vt=0,Jt=0;var er=Lt+1;const ur=er;let yr=!1,Qt=ur,nr=(1<<Qt)-1;var or=1<<er-1;const Wt=1+or;let ir=2+or,br=0,Sr=Ht[0],_r=0;for(let Pr=Rt;Pr<65536;Pr*=2)++_r;_r=8-_r,Ut.writeByte(Lt),qr(or);var sr=Ht.length;for(let Pr=1;Pr<sr;Pr++)e:{var jr=Ht[Pr],Nr=(jr<<12)+Sr;let Vr=jr<<_r^Sr;if(Zt[Vr]===Nr)Sr=vt[Vr];else{for(var kr=Vr===0?1:Rt-Vr;0<=Zt[Vr];)if((Vr-=kr)<0&&(Vr+=Rt),Zt[Vr]===Nr){Sr=vt[Vr];break e}qr(Sr),Sr=jr,ir<4096?(vt[Vr]=ir++,Zt[Vr]=Nr):(Zt.fill(-1),ir=2+or,yr=!0,qr(or))}}return qr(Sr),qr(Wt),Ut.writeByte(0),Ut.bytesView();function qr(Pr){for(Vt&=b[Jt],0<Jt?Vt|=Pr<<Jt:Vt=Pr,Jt+=Qt;8<=Jt;)Yt[br++]=255&Vt,254<=br&&(Ut.writeByte(br),Ut.writeBytesView(Yt,0,br),br=0),Vt>>=8,Jt-=8;if((ir>nr||yr)&&(yr?(Qt=ur,nr=(1<<Qt)-1,yr=!1):(++Qt,nr=Qt===12?1<<Qt:(1<<Qt)-1)),Pr==Wt){for(;0<Jt;)Yt[br++]=255&Vt,254<=br&&(Ut.writeByte(br),Ut.writeBytesView(Yt,0,br),br=0),Vt>>=8,Jt-=8;0<br&&(Ut.writeByte(br),Ut.writeBytesView(Yt,0,br),br=0)}}};function de(Pt,qt,Ht){return Pt<<8&63488|qt<<2&992|Ht>>3}function pe(Pt,qt,Ht,Gt){return Pt>>4|240&qt|(240&Ht)<<4|(240&Gt)<<8}function Ye(Pt,qt,Ht){return Pt>>4<<8|240&qt|Ht>>4}function me(Pt,qt,Ht){return Pt<qt?qt:Ht<Pt?Ht:Pt}function Le(Pt){return Pt*Pt}function nt(Pt,qt,Ht){var Gt=0,Ut=1e100;const Yt=Pt[qt];for(var Zt=Yt.cnt,vt=Yt.ac,Rt=Yt.rc,Lt=Yt.gc,Vt=Yt.bc,Jt=Yt.fw;Jt!=0;Jt=Pt[Jt].fw){var er,ur=Pt[Jt],yr=ur.cnt,yr=Zt*yr/(Zt+yr);Ut<=yr||(er=0,Ut<=(er+=yr*Le(ur.rc-Rt))||Ut<=(er+=yr*Le(ur.gc-Lt))||Ut<=(er+=yr*Le(ur.bc-Vt))||(Ut=er,Gt=Jt))}Yt.err=Ut,Yt.nn=Gt}function tt(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function ft(Pt,qt){for(var Ht=0,Gt=0;Gt<Pt.length;Gt++){var Ut=Pt[Gt]-qt[Gt];Ht+=Ut*Ut}return Ht}function yt(Pt,qt){return 1<qt?Math.round(Pt/qt)*qt:Pt}function gt(Pt){return Pt*Pt}function mt(Pt,qt,Ht=ft){let Gt=1/0,Ut=-1;for(let Zt=0;Zt<Pt.length;Zt++){var Yt=Ht(qt,Pt[Zt]);Yt<Gt&&(Gt=Yt,Ut=Zt)}return Ut}function wt(Pt,qt,Ht=ft){let Gt=1/0,Ut=-1;for(let Zt=0;Zt<Pt.length;Zt++){var Yt=Ht(qt,Pt[Zt]);Yt<Gt&&(Gt=Yt,Ut=Zt)}return[Ut,Gt]}function St(Pt={}){const{initialCapacity:qt=4096,auto:Ht=!0}=Pt,Gt=Be(qt),Ut=new Uint8Array(256),Yt=new Int32Array(5003),Zt=new Int32Array(5003);let vt=!1;return{reset(){Gt.reset(),vt=!1},finish(){Gt.writeByte(N.trailer)},bytes(){return Gt.bytes()},bytesView(){return Gt.bytesView()},get buffer(){return Gt.buffer},get stream(){return Gt},writeHeader:Rt,writeFrame(Lt,Vt,Jt,Sr={}){var{transparent:ur=!1,transparentIndex:yr=0,delay:kr=0,palette:Qt=null,repeat:sr=0,colorDepth:nr=8,dispose:or=-1}=Sr;let Wt=!1;if(Ht?vt||(Wt=!0,Rt(),vt=!0):Wt=!!Sr.first,Vt=Math.max(0,Math.floor(Vt)),Jt=Math.max(0,Math.floor(Jt)),Wt){if(!Qt)throw new Error("First frame must include a { palette } option");var[Sr,jr,br,Nr,_r=8]=[Gt,Vt,Jt,Qt,nr];Nr=It(Nr.length)-1,_r=128|_r-1<<4|Nr,Ct(Sr,jr),Ct(Sr,br),Sr.writeBytes([_r,0,0]),bt(Gt,Qt),0<=sr&&(Nr=Gt,jr=sr,Nr.writeByte(33),Nr.writeByte(255),Nr.writeByte(11),Et(Nr,"NETSCAPE2.0"),Nr.writeByte(3),Nr.writeByte(1),Ct(Nr,jr),Nr.writeByte(0))}var ir,br=Math.round(kr/10),Sr=Gt,_r=or,sr=br,jr=ur,Nr=yr,kr=(Sr.writeByte(33),Sr.writeByte(249),Sr.writeByte(4),Nr<0&&(Nr=0,jr=!1),jr=jr?(ir=1,2):ir=0,0<=_r&&(jr=7&_r),jr<<=2,Sr.writeByte(0|jr|ir),Ct(Sr,sr),Sr.writeByte(Nr||0),Sr.writeByte(0),!!Qt&&!Wt);or=Gt,ur=Vt,yr=Jt,ir=kr?Qt:null,or.writeByte(44),Ct(or,0),Ct(or,0),Ct(or,ur),Ct(or,yr),ir?(ur=It(ir.length)-1,or.writeByte(128|ur)):or.writeByte(0),kr&&bt(Gt,Qt),[sr,Sr,yr,ur,or=8,kr,Qt,Lt]=[Gt,Lt,Vt,Jt,nr,Ut,Yt,Zt],E(yr,ur,Sr,or,sr,kr,Qt,Lt)}};function Rt(){Et(Gt,"GIF89a")}}function bt(Pt,qt){var Ht=1<<It(qt.length);for(let Gt=0;Gt<Ht;Gt++){let Ut=[0,0,0];Gt<qt.length&&(Ut=qt[Gt]),Pt.writeByte(Ut[0]),Pt.writeByte(Ut[1]),Pt.writeByte(Ut[2])}}function Ct(Pt,qt){Pt.writeByte(255&qt),Pt.writeByte(qt>>8&255)}function Et(Pt,qt){for(var Ht=0;Ht<qt.length;Ht++)Pt.writeByte(qt.charCodeAt(Ht))}function It(Pt){return Math.max(Math.ceil(Math.log2(Pt)),1)}var Dt=St},{}],254:[function(t,l,u){u.read=function(s,p,d,h,nt){var Be,b,E=8*nt-h-1,de=(1<<E)-1,pe=de>>1,Ye=-7,me=d?nt-1:0,Le=d?-1:1,nt=s[p+me];for(me+=Le,Be=nt&(1<<-Ye)-1,nt>>=-Ye,Ye+=E;0<Ye;Be=256*Be+s[p+me],me+=Le,Ye-=8);for(b=Be&(1<<-Ye)-1,Be>>=-Ye,Ye+=h;0<Ye;b=256*b+s[p+me],me+=Le,Ye-=8);if(Be===0)Be=1-pe;else{if(Be===de)return b?NaN:1/0*(nt?-1:1);b+=Math.pow(2,h),Be-=pe}return(nt?-1:1)*b*Math.pow(2,Be-h)},u.write=function(s,p,d,h,N,tt){var b,E,de=8*tt-N-1,pe=(1<<de)-1,Ye=pe>>1,me=N===23?Math.pow(2,-24)-Math.pow(2,-77):0,Le=h?0:tt-1,nt=h?1:-1,tt=p<0||p===0&&1/p<0?1:0;for(p=Math.abs(p),isNaN(p)||p===1/0?(E=isNaN(p)?1:0,b=pe):(b=Math.floor(Math.log(p)/Math.LN2),p*(h=Math.pow(2,-b))<1&&(b--,h*=2),2<=(p+=1<=b+Ye?me/h:me*Math.pow(2,1-Ye))*h&&(b++,h/=2),pe<=b+Ye?(E=0,b=pe):1<=b+Ye?(E=(p*h-1)*Math.pow(2,N),b+=Ye):(E=p*Math.pow(2,Ye-1)*Math.pow(2,N),b=0));8<=N;s[d+Le]=255&E,Le+=nt,E/=256,N-=8);for(b=b<<N|E,de+=N;0<de;s[d+Le]=255&b,Le+=nt,b/=256,de-=8);s[d+Le-nt]|=128*tt}},{}],255:[function(t,l,u){var s;function p(tr,ar){return tr.b===ar.b&&tr.a===ar.a}function d(tr,ar){return tr.b<ar.b||tr.b===ar.b&&tr.a<=ar.a}function h(tr,ar,Kt){var cr=ar.b-tr.b,Tr=Kt.b-ar.b;return 0<cr+Tr?cr<Tr?ar.a-tr.a+cr/(cr+Tr)*(tr.a-Kt.a):ar.a-Kt.a+Tr/(cr+Tr)*(Kt.a-tr.a):0}function N(tr,ar,Kt){var cr=ar.b-tr.b,Tr=Kt.b-ar.b;return 0<cr+Tr?(ar.a-Kt.a)*cr+(ar.a-tr.a)*Tr:0}function Be(tr,ar){return tr.a<ar.a||tr.a===ar.a&&tr.b<=ar.b}function b(tr,ar,Kt){var cr=ar.a-tr.a,Tr=Kt.a-ar.a;return 0<cr+Tr?cr<Tr?ar.b-tr.b+cr/(cr+Tr)*(tr.b-Kt.b):ar.b-Kt.b+Tr/(cr+Tr)*(Kt.b-tr.b):0}function E(tr,ar,Kt){var cr=ar.a-tr.a,Tr=Kt.a-ar.a;return 0<cr+Tr?(ar.b-Kt.b)*cr+(ar.b-tr.b)*Tr:0}function de(tr,ar,Kt,cr){return(tr=tr<0?0:tr)<=(Kt=Kt<0?0:Kt)?Kt===0?(ar+cr)/2:ar+tr/(tr+Kt)*(cr-ar):cr+Kt/(tr+Kt)*(ar-cr)}function pe(tr){var ar=tt(tr.b);return yt(ar,tr.c),yt(ar.b,tr.c),gt(ar,tr.a),ar}function Ye(tr,ar){var Kt=!1,cr=!1;tr!==ar&&(ar.a!==tr.a&&(cr=!0,wt(ar.a,tr.a)),ar.d!==tr.d&&(Kt=!0,St(ar.d,tr.d)),ft(ar,tr),cr||(yt(ar,tr.a),tr.a.c=tr),Kt||(gt(ar,tr.d),tr.d.a=tr))}function me(tr){var ar=tr.b,Kt=!1;tr.d!==tr.b.d&&(Kt=!0,St(tr.d,tr.b.d)),tr.c===tr?wt(tr.a,null):(tr.b.d.a=tr.b.e,tr.a.c=tr.c,ft(tr,tr.b.e),Kt||gt(tr,tr.d)),ar.c===ar?(wt(ar.a,null),St(ar.d,null)):(tr.d.a=ar.b.e,ar.a.c=ar.c,ft(ar,ar.b.e)),mt(tr)}function Le(tr){var ar=tt(tr),Kt=ar.b;return ft(ar,tr.e),ar.a=tr.b.a,yt(Kt,ar.a),ar.d=Kt.d=tr.d,ar=ar.b,ft(tr.b,tr.b.b.e),ft(tr.b,ar),tr.b.a=ar.a,ar.b.a.c=ar.b,ar.b.d=tr.b.d,ar.f=tr.f,ar.b.f=tr.b.f,ar}function nt(tr,ar){var Kt=!1,cr=tt(tr),Tr=cr.b;return ar.d!==tr.d&&(Kt=!0,St(ar.d,tr.d)),ft(cr,tr.e),ft(Tr,ar),cr.a=tr.b.a,Tr.a=ar.a,cr.d=Tr.d=tr.d,tr.d.a=Tr,Kt||gt(cr,tr.d),cr}function tt(tr){var ar=new br,Kt=new br,cr=tr.b.h;return(((Kt.h=cr).b.h=ar).h=tr).b.h=Kt,ar.b=Kt,((ar.c=ar).e=Kt).b=ar,(Kt.c=Kt).e=ar}function ft(tr,ar){var Kt=tr.c,cr=ar.c;Kt.b.e=ar,(cr.b.e=tr).c=cr,ar.c=Kt}function yt(tr,ar){var Kt=ar.f,cr=new _r(ar,Kt);for(Kt.e=cr,Kt=(ar.f=cr).c=tr;Kt.a=cr,(Kt=Kt.c)!==tr;);}function gt(tr,ar){var Kt=ar.d,cr=new ir(ar,Kt);for(Kt.b=cr,(ar.d=cr).a=tr,cr.c=ar.c,Kt=tr;Kt.d=cr,(Kt=Kt.e)!==tr;);}function mt(tr){var ar=tr.h;tr=tr.b.h,(ar.b.h=tr).b.h=ar}function wt(tr,ar){for(var Kt=tr.c,cr=Kt;cr.a=ar,(cr=cr.c)!==Kt;);Kt=tr.f,((cr=tr.e).f=Kt).e=cr}function St(tr,ar){for(var Kt=tr.a,cr=Kt;cr.d=ar,(cr=cr.e)!==Kt;);Kt=tr.d,((cr=tr.b).d=Kt).b=cr}function bt(tr){var ar=0;return Math.abs(tr[1])>Math.abs(tr[0])&&(ar=1),ar=Math.abs(tr[2])>Math.abs(tr[ar])?2:ar}function Ct(tr,ar){tr.f+=ar.f,tr.b.f+=ar.b.f}function Et(tr,ar,Kt){return tr=tr.a,ar=ar.a,Kt=Kt.a,ar.b.a===tr?Kt.b.a===tr?d(ar.a,Kt.a)?N(Kt.b.a,ar.a,Kt.a)<=0:0<=N(ar.b.a,Kt.a,ar.a):N(Kt.b.a,tr,Kt.a)<=0:Kt.b.a===tr?0<=N(ar.b.a,tr,ar.a):(ar=h(ar.b.a,tr,ar.a),(tr=h(Kt.b.a,tr,Kt.a))<=ar)}function It(tr){tr.a.i=null;var ar=tr.e;ar.a.c=ar.c,ar.c.a=ar.a,tr.e=null}function Dt(tr,ar){me(tr.a),tr.c=!1,(tr.a=ar).i=tr}function Pt(tr){for(var ar=tr.a.a;(tr=Cr(tr)).a.a===ar;);return tr.c&&(Dt(tr,ar=nt(Ir(tr).a.b,tr.a.e)),tr=Cr(tr)),tr}function qt(tr,ar,Kt){var cr=new Er;return cr.a=Kt,cr.e=yr(tr.f,ar.e,cr),Kt.i=cr}function Ht(tr,ar){switch(tr.s){case 100130:return(1&ar)!=0;case 100131:return ar!==0;case 100132:return 0<ar;case 100133:return ar<0;case 100134:return 2<=ar||ar<=-2}return!1}function Gt(tr){var ar=tr.a,Kt=ar.d;Kt.c=tr.d,Kt.a=ar,It(tr)}function Ut(tr,ar,Kt){for(ar=(tr=ar).a;tr!==Kt;){tr.c=!1;var cr=Ir(tr),Tr=cr.a;if(Tr.a!==ar.a){if(!cr.c){Gt(tr);break}Dt(cr,Tr=nt(ar.c.b,Tr.b))}ar.c!==Tr&&(Ye(Tr.b.e,Tr),Ye(ar,Tr)),Gt(tr),ar=cr.a,tr=cr}return ar}function Yt(tr,ar,Kt,cr,Tr,Dr){for(var zr=!0;qt(tr,ar,Kt.b),(Kt=Kt.c)!==cr;);for(Tr===null&&(Tr=Ir(ar).a.b.c);(Kt=(cr=Ir(ar)).a.b).a===Tr.a;)Kt.c!==Tr&&(Ye(Kt.b.e,Kt),Ye(Tr.b.e,Kt)),cr.f=ar.f-Kt.f,cr.d=Ht(tr,cr.f),ar.b=!0,!zr&&Lt(tr,ar)&&(Ct(Kt,Tr),It(ar),me(Tr)),zr=!1,ar=cr,Tr=Kt;ar.b=!0,Dr&&Jt(tr,ar)}function Zt(tr,ar,Kt,cr,Tr){var Dr=[ar.g[0],ar.g[1],ar.g[2]];ar.d=null,ar.d=tr.o&&tr.o(Dr,Kt,cr,tr.c)||null,ar.d===null&&(Tr?tr.n||(Wt(tr,100156),tr.n=!0):ar.d=Kt[0])}function vt(tr,ar,Kt){var cr=[null,null,null,null];cr[0]=ar.a.d,cr[1]=Kt.a.d,Zt(tr,ar.a,cr,[.5,.5,0,0],!1),Ye(ar,Kt)}function Rt(tr,ar,Kt,cr,Tr){var Dr=Math.abs(ar.b-tr.b)+Math.abs(ar.a-tr.a),zr=Math.abs(Kt.b-tr.b)+Math.abs(Kt.a-tr.a),fn=Tr+1;cr[Tr]=.5*zr/(Dr+zr),cr[fn]=.5*Dr/(Dr+zr),tr.g[0]+=cr[Tr]*ar.g[0]+cr[fn]*Kt.g[0],tr.g[1]+=cr[Tr]*ar.g[1]+cr[fn]*Kt.g[1],tr.g[2]+=cr[Tr]*ar.g[2]+cr[fn]*Kt.g[2]}function Lt(tr,ar){var Kt=Ir(ar),cr=ar.a,Tr=Kt.a;if(d(cr.a,Tr.a)){if(0<N(Tr.b.a,cr.a,Tr.a))return;if(p(cr.a,Tr.a)){if(cr.a!==Tr.a){var Kt=tr.e,Dr=cr.a.h;if(0<=Dr){var zr=(Kt=Kt.b).d,fn=Kt.e,vn=Kt.c,_n=vn[Dr];zr[_n]=zr[Kt.a],(vn[zr[_n]]=_n)<=--Kt.a&&(_n<=1||d(fn[zr[_n>>1]],fn[zr[_n]])?Xr:Gr)(Kt,_n),fn[Dr]=null,vn[Dr]=Kt.b,Kt.b=Dr}else for(Kt.c[-(Dr+1)]=null;0<Kt.a&&Kt.c[Kt.d[Kt.a-1]]===null;)--Kt.a;vt(tr,Tr.b.e,cr)}}else Le(Tr.b),Ye(cr,Tr.b.e),ar.b=Kt.b=!0}else{if(N(cr.b.a,Tr.a,cr.a)<0)return;Cr(ar).b=ar.b=!0,Le(cr.b),Ye(Tr.b.e,cr)}return 1}function Vt(tr,ar){var Kt=Ir(ar),cr=ar.a,Tr=Kt.a,Dr=cr.a,zr=Tr.a,fn=cr.b.a,vn=Tr.b.a,_n=new _r;if(N(fn,tr.a,Dr),N(vn,tr.a,zr),!(Dr===zr||Math.min(Dr.a,fn.a)>Math.max(zr.a,vn.a))){if(d(Dr,zr)){if(0<N(vn,Dr,zr))return}else if(N(fn,zr,Dr)<0)return;var wn,An,Cn=fn,En=Dr,Tn=vn,Mn=zr;if(d(Cn,En)||(wn=Cn,Cn=En,En=wn),d(Tn,Mn)||(wn=Tn,Tn=Mn,Mn=wn),d(Cn,Tn)||(wn=Cn,Cn=Tn,Tn=wn,wn=En,En=Mn,Mn=wn),d(Tn,En)?d(En,Mn)?((wn=h(Cn,Tn,En))+(An=h(Tn,En,Mn))<0&&(wn=-wn,An=-An),_n.b=de(wn,Tn.b,An,En.b)):((wn=N(Cn,Tn,En))+(An=-N(Cn,Mn,En))<0&&(wn=-wn,An=-An),_n.b=de(wn,Tn.b,An,Mn.b)):_n.b=(Tn.b+En.b)/2,Be(Cn,En)||(wn=Cn,Cn=En,En=wn),Be(Tn,Mn)||(wn=Tn,Tn=Mn,Mn=wn),Be(Cn,Tn)||(wn=Cn,Cn=Tn,Tn=wn,wn=En,En=Mn,Mn=wn),Be(Tn,En)?Be(En,Mn)?((wn=b(Cn,Tn,En))+(An=b(Tn,En,Mn))<0&&(wn=-wn,An=-An),_n.a=de(wn,Tn.a,An,En.a)):((wn=E(Cn,Tn,En))+(An=-E(Cn,Mn,En))<0&&(wn=-wn,An=-An),_n.a=de(wn,Tn.a,An,Mn.a)):_n.a=(Tn.a+En.a)/2,d(_n,tr.a)&&(_n.b=tr.a.b,_n.a=tr.a.a),Cn=d(Dr,zr)?Dr:zr,d(Cn,_n)&&(_n.b=Cn.b,_n.a=Cn.a),p(_n,Dr)||p(_n,zr))return Lt(tr,ar),0;if(!p(fn,tr.a)&&0<=N(fn,tr.a,_n)||!p(vn,tr.a)&&N(vn,tr.a,_n)<=0){if(vn===tr.a)Le(cr.b),Ye(Tr.b,cr),cr=Ir(ar=Pt(ar)).a,Ut(tr,Ir(ar),Kt),Yt(tr,ar,cr.b.e,cr,cr,!0);else{if(fn!==tr.a)return 0<=N(fn,tr.a,_n)&&(Cr(ar).b=ar.b=!0,Le(cr.b),cr.a.b=tr.a.b,cr.a.a=tr.a.a),void(N(vn,tr.a,_n)<=0&&(ar.b=Kt.b=!0,Le(Tr.b),Tr.a.b=tr.a.b,Tr.a.a=tr.a.a));for(Le(Tr.b),Ye(cr.e,Tr.b.e),zr=(Dr=Kt=ar).a.b.a;(Dr=Cr(Dr)).a.b.a===zr;);Dr=Ir(ar=Dr).a.b.c,Kt.a=Tr.b.e,Yt(tr,ar,(Tr=Ut(tr,Kt,null)).c,cr.b.c,Dr,!0)}return 1}Le(cr.b),Le(Tr.b),Ye(Tr.b.e,cr),cr.a.b=_n.b,cr.a.a=_n.a,cr.a.h=jr(tr.e,cr.a),cr=cr.a,Tr=[0,0,0,0],_n=[Dr.d,fn.d,zr.d,vn.d],cr.g[0]=cr.g[1]=cr.g[2]=0,Rt(cr,Dr,fn,Tr,0),Rt(cr,zr,vn,Tr,2),Zt(tr,cr,_n,Tr,!0),Cr(ar).b=ar.b=Kt.b=!0}}function Jt(tr,ar){for(var Kt=Ir(ar);;){for(;Kt.b;)Kt=Ir(ar=Kt);if(!ar.b&&((ar=Cr(Kt=ar))===null||!ar.b))break;ar.b=!1;var cr=ar.a,Tr=Kt.a;if(Dr=cr.b.a!==Tr.b.a)e:{var Dr,zr=Ir(Dr=ar),fn=Dr.a,vn=zr.a,_n=void 0;if(d(fn.b.a,vn.b.a)){if(N(fn.b.a,vn.b.a,fn.a)<0){Dr=!1;break e}Cr(Dr).b=Dr.b=!0,_n=Le(fn),Ye(vn.b,_n),_n.d.c=Dr.d}else{if(0<N(vn.b.a,fn.b.a,vn.a)){Dr=!1;break e}Dr.b=zr.b=!0,_n=Le(vn),Ye(fn.e,vn.b),_n.b.d.c=Dr.d}Dr=!0}if(Dr&&(Kt.c?(It(Kt),me(Tr),Tr=(Kt=Ir(ar)).a):ar.c&&(It(ar),me(cr),cr=(ar=Cr(Kt)).a)),cr.a!==Tr.a){if(cr.b.a===Tr.b.a||ar.c||Kt.c||cr.b.a!==tr.a&&Tr.b.a!==tr.a)Lt(tr,ar);else if(Vt(tr,ar))break}cr.a===Tr.a&&cr.b.a===Tr.b.a&&(Ct(Tr,cr),It(ar),me(cr),ar=Cr(Kt))}}function er(tr,ar){var Kt=new Er,cr=pe(tr.b);cr.a.b=4e150,cr.a.a=ar,cr.b.a.b=-4e150,cr.b.a.a=ar,tr.a=cr.b.a,Kt.a=cr,Kt.f=0,Kt.d=!1,Kt.c=!1,Kt.h=!0,Kt.b=!1,cr=yr(cr=tr.f,cr.a,Kt),Kt.e=cr}function ur(tr){this.a=new Qt,this.b=tr,this.c=Et}function yr(tr,ar,Kt){for(;(ar=ar.c).b!==null&&!tr.c(tr.b,ar.b,Kt););return tr=new Qt(Kt,ar.a,ar),ar.a.c=tr,ar.a=tr}function Qt(tr,ar,Kt){this.b=tr||null,this.a=ar||this,this.c=Kt||this}function nr(){this.d=0,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function or(tr,ar){if(tr.d!==ar)for(;tr.d!==ar;)if(tr.d<ar)switch(tr.d){case 0:Wt(tr,100151),tr.u(null);break;case 1:Wt(tr,100152),tr.t()}else switch(tr.d){case 2:Wt(tr,100154),tr.v();break;case 1:Wt(tr,100153),tr.w()}}function Wt(tr,ar){tr.p&&tr.p(ar,tr.c)}function ir(tr,ar){this.b=tr||this,this.d=ar||this,this.a=null,this.c=!1}function br(){(this.h=this).i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Sr(){this.c=new _r,this.a=new ir,this.b=new br,this.d=new br,this.b.b=this.d,this.d.b=this.b}function _r(tr,ar){this.e=tr||this,this.f=ar||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function sr(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new kr}function jr(tr,ar){var Kt,cr,Tr;return tr.e?(2*(cr=++(Kt=tr.b).a)>Kt.f&&(Kt.f*=2,Kt.c=qr(Kt.c,Kt.f+1)),Kt.b===0?Tr=cr:(Tr=Kt.b,Kt.b=Kt.c[Kt.b]),Kt.e[Tr]=ar,Kt.c[Tr]=cr,Kt.d[cr]=Tr,Kt.h&&Gr(Kt,cr),Tr):(Kt=tr.a++,tr.c[Kt]=ar,-(Kt+1))}function Nr(tr){if(tr.a===0)return Vr(tr.b);var ar=tr.c[tr.d[tr.a-1]];if(tr.b.a!==0&&d(Pr(tr.b),ar))return Vr(tr.b);for(;--tr.a,0<tr.a&&tr.c[tr.d[tr.a-1]]===null;);return ar}function kr(){this.d=qr([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function qr(tr,ar){for(var Kt=Array(ar),cr=0;cr<tr.length;cr++)Kt[cr]=tr[cr];for(;cr<ar;cr++)Kt[cr]=0;return Kt}function Pr(tr){return tr.e[tr.d[1]]}function Vr(tr){var ar=tr.d,Kt=tr.e,cr=tr.c,Tr=ar[1],Dr=Kt[Tr];return 0<tr.a&&(ar[1]=ar[tr.a],cr[ar[1]]=1,Kt[Tr]=null,cr[Tr]=tr.b,tr.b=Tr,0<--tr.a&&Xr(tr,1)),Dr}function Xr(tr,ar){for(var Kt=tr.d,cr=tr.e,Tr=tr.c,Dr=ar,zr=Kt[Dr];;){var fn=Dr<<1,vn=(fn<tr.a&&d(cr[Kt[fn+1]],cr[Kt[fn]])&&(fn+=1),Kt[fn]);if(fn>tr.a||d(cr[zr],cr[vn])){Tr[Kt[Dr]=zr]=Dr;break}Tr[Kt[Dr]=vn]=Dr,Dr=fn}}function Gr(tr,ar){for(var Kt=tr.d,cr=tr.e,Tr=tr.c,Dr=ar,zr=Kt[Dr];;){var fn=Dr>>1,vn=Kt[fn];if(fn==0||d(cr[vn],cr[zr])){Tr[Kt[Dr]=zr]=Dr;break}Tr[Kt[Dr]=vn]=Dr,Dr=fn}}function Er(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function Ir(tr){return tr.e.c.b}function Cr(tr){return tr.e.a.b}(s=nr.prototype).x=function(){or(this,0)},s.B=function(tr,ar){switch(tr){case 100142:return;case 100140:switch(ar){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=ar)}break;case 100141:return void(this.m=!!ar);default:return void Wt(this,100900)}Wt(this,100901)},s.y=function(tr){switch(tr){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:Wt(this,100900)}return!1},s.A=function(tr,ar,Kt){this.j[0]=tr,this.j[1]=ar,this.j[2]=Kt},s.z=function(tr,ar){var Kt=ar||null;switch(tr){case 100100:case 100106:this.h=Kt;break;case 100104:case 100110:this.l=Kt;break;case 100101:case 100107:this.k=Kt;break;case 100102:case 100108:this.i=Kt;break;case 100103:case 100109:this.p=Kt;break;case 100105:case 100111:this.o=Kt;break;case 100112:this.r=Kt;break;default:Wt(this,100900)}},s.C=function(tr,ar){var Kt=!1,cr=[0,0,0];or(this,2);for(var Tr=0;Tr<3;++Tr){var Dr=tr[Tr];Dr<-1e150&&(Dr=-1e150,Kt=!0),1e150<Dr&&(Dr=1e150,Kt=!0),cr[Tr]=Dr}Kt&&Wt(this,100155),(Kt=this.q)===null?Ye(Kt=pe(this.b),Kt.b):(Le(Kt),Kt=Kt.e),Kt.a.d=ar,Kt.a.g[0]=cr[0],Kt.a.g[1]=cr[1],Kt.a.g[2]=cr[2],Kt.f=1,Kt.b.f=-1,this.q=Kt},s.u=function(tr){or(this,0),this.d=1,this.b=new Sr,this.c=tr},s.t=function(){or(this,1),this.d=2,this.q=null},s.v=function(){or(this,2),this.d=1},s.w=function(){or(this,1),this.d=0;var tr,ar,Kt=this.j[0],cr=this.j[1],Tr=this.j[2],Dr=!1,zr=[Kt,cr,Tr];if(Kt===0&&cr===0&&Tr===0){for(var cr=[-2e150,-2e150,-2e150],fn=[2e150,2e150,2e150],Tr=[],vn=[],Kt=(Dr=this.b.c).e;Kt!==Dr;Kt=Kt.e)for(var _n=0;_n<3;++_n){var wn=Kt.g[_n];wn<fn[_n]&&(fn[_n]=wn,vn[_n]=Kt),wn>cr[_n]&&(cr[_n]=wn,Tr[_n]=Kt)}if(cr[1]-fn[1]>cr[Kt=0]-fn[0]&&(Kt=1),fn[Kt=cr[2]-fn[2]>cr[Kt]-fn[Kt]?2:Kt]>=cr[Kt])zr[0]=0,zr[1]=0,zr[2]=1;else{for(fn=vn[Kt],Tr=Tr[Kt],vn=[cr=0,0,0],fn=[fn.g[0]-Tr.g[0],fn.g[1]-Tr.g[1],fn.g[2]-Tr.g[2]],_n=[0,0,0],Kt=Dr.e;Kt!==Dr;Kt=Kt.e)_n[0]=Kt.g[0]-Tr.g[0],_n[1]=Kt.g[1]-Tr.g[1],_n[2]=Kt.g[2]-Tr.g[2],vn[0]=fn[1]*_n[2]-fn[2]*_n[1],vn[1]=fn[2]*_n[0]-fn[0]*_n[2],vn[2]=fn[0]*_n[1]-fn[1]*_n[0],cr<(wn=vn[0]*vn[0]+vn[1]*vn[1]+vn[2]*vn[2])&&(cr=wn,zr[0]=vn[0],zr[1]=vn[1],zr[2]=vn[2]);cr<=0&&(zr[0]=zr[1]=zr[2]=0,zr[bt(fn)]=1)}Dr=!0}for(vn=bt(zr),Kt=this.b.c,cr=(vn+1)%3,Tr=(vn+2)%3,vn=0<zr[vn]?1:-1,zr=Kt.e;zr!==Kt;zr=zr.e)zr.b=zr.g[cr],zr.a=vn*zr.g[Tr];if(Dr){for(zr=0,Kt=(Dr=this.b.a).b;Kt!==Dr;Kt=Kt.b)if(!((cr=Kt.a).f<=0))for(;zr+=(cr.a.b-cr.b.a.b)*(cr.a.a+cr.b.a.a),(cr=cr.e)!==Kt.a;);if(zr<0)for(Dr=(zr=this.b.c).e;Dr!==zr;Dr=Dr.e)Dr.a=-Dr.a}for(this.n=!1,zr=this.b.b,Kt=zr.h;Kt!==zr;Kt=Dr)Dr=Kt.h,cr=Kt.e,p(Kt.a,Kt.b.a)&&Kt.e.e!==Kt&&(vt(this,cr,Kt),me(Kt),cr=(Kt=cr).e),cr.e===Kt&&(cr!==Kt&&(cr!==Dr&&cr!==Dr.b||(Dr=Dr.h),me(cr)),Kt!==Dr&&Kt!==Dr.b||(Dr=Dr.h),me(Kt));for(this.e=zr=new sr,Dr=this.b.c,Kt=Dr.e;Kt!==Dr;Kt=Kt.e)Kt.h=jr(zr,Kt);var An=zr;An.d=[];for(var Cn=0;Cn<An.a;Cn++)An.d[Cn]=Cn;An.d.sort(function(Mn){return function(Ft,Tt){return d(Mn[Ft],Mn[Tt])?1:-1}}(An.c)),An.e=!0;for(var En=An.b,Tn=En.a;1<=Tn;--Tn)Xr(En,Tn);for(En.h=!0,this.f=new ur(this),er(this,-4e150),er(this,4e150);(zr=Nr(this.e))!==null;){for(;;){e:if((Kt=this.e).a===0)Dr=Pr(Kt.b);else if(Dr=Kt.c[Kt.d[Kt.a-1]],Kt.b.a!==0&&d(Kt=Pr(Kt.b),Dr)){Dr=Kt;break e}if(Dr===null||!p(Dr,zr))break;Dr=Nr(this.e),vt(this,zr.c,Dr.c)}(function Mn(Ft,Tt){for(var jt,xt=(Ft.a=Tt).c;xt.i===null;)if((xt=xt.c)===Tt.c){var xt=Ft,At=Tt;(dr=new Er).a=At.c.b;for(var vr=(Bt=xt.f).a;(vr=vr.a).b!==null&&!Bt.c(Bt.b,dr,vr.b););var Bt,lr,hr=Ir(Bt=vr.b),dr=Bt.a,vr=hr.a;return void(N(dr.b.a,At,dr.a)===0?p((dr=Bt.a).a,At)||p(dr.b.a,At)||(Le(dr.b),Bt.c&&(me(dr.c),Bt.c=!1),Ye(At.c,dr),Mn(xt,At)):(lr=d(vr.b.a,dr.b.a)?Bt:hr,hr=void 0,Bt.d||lr.c?(hr=lr===Bt?nt(At.c.b,dr.e):nt(vr.b.c.b,At.c).b,lr.c?Dt(lr,hr):((Bt=qt(dr=xt,Bt,hr)).f=Cr(Bt).f+Bt.a.f,Bt.d=Ht(dr,Bt.f)),Mn(xt,At)):Yt(xt,Bt,At.c,At.c,null,!0)))}Bt=(dr=Ir(xt=Pt(xt.i))).a,(dr=Ut(Ft,dr,null)).c===Bt?(dr=(Bt=dr).c,vr=Ir(xt),hr=xt.a,lr=vr.a,jt=!1,hr.b.a!==lr.b.a&&Vt(Ft,xt),p(hr.a,Ft.a)&&(Ye(dr.b.e,hr),dr=Ir(xt=Pt(xt)).a,Ut(Ft,Ir(xt),vr),jt=!0),p(lr.a,Ft.a)&&(Ye(Bt,lr.b.e),Bt=Ut(Ft,vr,null),jt=!0),jt?Yt(Ft,xt,Bt.c,dr,dr,!0):(At=d(lr.a,hr.a)?lr.b.e:hr,Yt(Ft,xt,At=nt(Bt.c.b,At),At.c,At.c,!1),At.b.i.c=!0,Jt(Ft,xt))):Yt(Ft,xt,dr.c,Bt,Bt,!0)})(this,zr)}for(this.a=this.f.a.a.b.a.a,zr=0;(Dr=this.f.a.a.b)!==null;)Dr.h||++zr,It(Dr);for(this.f=null,(zr=this.e).b=null,zr.d=null,this.e=zr.c=null,zr=this.b,Kt=zr.a.b;Kt!==zr.a;Kt=Dr)Dr=Kt.b,(Kt=Kt.a).e.e===Kt&&(Ct(Kt.c,Kt),me(Kt));if(!this.n){if(zr=this.b,this.m)for(Kt=zr.b.h;Kt!==zr.b;Kt=Dr)Dr=Kt.h,Kt.b.d.c!==Kt.d.c?Kt.f=Kt.d.c?1:-1:me(Kt);else for(Kt=zr.a.b;Kt!==zr.a;Kt=Dr)if(Dr=Kt.b,Kt.c){for(Kt=Kt.a;d(Kt.b.a,Kt.a);Kt=Kt.c.b);for(;d(Kt.a,Kt.b.a);Kt=Kt.e);for(cr=Kt.c.b,Tr=void 0;Kt.e!==cr;)if(d(Kt.b.a,cr.a)){for(;cr.e!==Kt&&(d((ar=cr.e).b.a,ar.a)||N(cr.a,cr.b.a,cr.e.b.a)<=0);)cr=(Tr=nt(cr.e,cr)).b;cr=cr.c.b}else{for(;cr.e!==Kt&&(d((tr=Kt.c.b).a,tr.b.a)||0<=N(Kt.b.a,Kt.a,Kt.c.b.a));)Kt=(Tr=nt(Kt,Kt.c.b)).b;Kt=Kt.e}for(;cr.e.e!==Kt;)Tr=nt(cr.e,cr),cr=Tr.b}if(this.h||this.i||this.k||this.l)if(this.m){for(Dr=(zr=this.b).a.b;Dr!==zr.a;Dr=Dr.b)if(Dr.c){for(this.h&&this.h(2,this.c),Kt=Dr.a;this.k&&this.k(Kt.a.d,this.c),(Kt=Kt.e)!==Dr.a;);this.i&&this.i(this.c)}}else{for(zr=this.b,Dr=!!this.l,Kt=!1,cr=-1,Tr=zr.a.d;Tr!==zr.a;Tr=Tr.d)if(Tr.c)for(Kt||(this.h&&this.h(4,this.c),Kt=!0),vn=Tr.a;Dr&&(fn=vn.b.d.c?0:1,cr!==fn&&(cr=fn,this.l&&this.l(!!cr,this.c))),this.k&&this.k(vn.a.d,this.c),(vn=vn.e)!==Tr.a;);Kt&&this.i&&this.i(this.c)}if(this.r){for(zr=this.b,Kt=zr.a.b;Kt!==zr.a;Kt=Dr)if(Dr=Kt.b,!Kt.c){for(Tr=(cr=Kt.a).e,vn=void 0;Tr=(vn=Tr).e,(vn.d=null)===vn.b.d&&(vn.c===vn?wt(vn.a,null):(vn.a.c=vn.c,ft(vn,vn.b.e)),(fn=vn.b).c===fn?wt(fn.a,null):(fn.a.c=fn.c,ft(fn,fn.b.e)),mt(vn)),vn!==cr;);cr=Kt.d,((Kt=Kt.b).d=cr).b=Kt}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:nr,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},nr.prototype.gluDeleteTess=nr.prototype.x,nr.prototype.gluTessProperty=nr.prototype.B,nr.prototype.gluGetTessProperty=nr.prototype.y,nr.prototype.gluTessNormal=nr.prototype.A,nr.prototype.gluTessCallback=nr.prototype.z,nr.prototype.gluTessVertex=nr.prototype.C,nr.prototype.gluTessBeginPolygon=nr.prototype.u,nr.prototype.gluTessBeginContour=nr.prototype.t,nr.prototype.gluTessEndContour=nr.prototype.v,nr.prototype.gluTessEndPolygon=nr.prototype.w,l!==void 0&&(l.exports=this.libtess)},{}],256:[function(t,l,u){function s(d,h,N,Be){var b=0,E=(Be=Be===void 0?{}:Be).loop===void 0?null:Be.loop,de=Be.palette===void 0?null:Be.palette;if(h<=0||N<=0||65535<h||65535<N)throw new Error("Width/Height invalid.");function pe(gt){if(gt=gt.length,gt<2||256<gt||gt&gt-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return gt}d[b++]=71,d[b++]=73,d[b++]=70,d[b++]=56,d[b++]=57,d[b++]=97;var Ye=0,me=0;if(de!==null){for(var Le=pe(de);Le>>=1;)++Ye;if(Le=1<<Ye,--Ye,Be.background!==void 0){if(Le<=(me=Be.background))throw new Error("Background index out of range.");if(me===0)throw new Error("Background index explicitly passed as 0.")}}if(d[b++]=255&h,d[b++]=h>>8&255,d[b++]=255&N,d[b++]=N>>8&255,d[b++]=(de!==null?128:0)|Ye,d[b++]=me,d[b++]=0,de!==null)for(var nt=0,tt=de.length;nt<tt;++nt){var ft=de[nt];d[b++]=ft>>16&255,d[b++]=ft>>8&255,d[b++]=255&ft}if(E!==null){if(E<0||65535<E)throw new Error("Loop count invalid.");d[b++]=33,d[b++]=255,d[b++]=11,d[b++]=78,d[b++]=69,d[b++]=84,d[b++]=83,d[b++]=67,d[b++]=65,d[b++]=80,d[b++]=69,d[b++]=50,d[b++]=46,d[b++]=48,d[b++]=3,d[b++]=1,d[b++]=255&E,d[b++]=E>>8&255,d[b++]=0}var yt=!1;this.addFrame=function(gt,mt,wt,St,bt,Ct){if(yt===!0&&(--b,yt=!1),Ct=Ct===void 0?{}:Ct,gt<0||mt<0||65535<gt||65535<mt)throw new Error("x/y invalid.");if(wt<=0||St<=0||65535<wt||65535<St)throw new Error("Width/Height invalid.");if(bt.length<wt*St)throw new Error("Not enough pixels for the frame size.");var Et=!0,It=Ct.palette;if(It==null&&(Et=!1,It=de),It==null)throw new Error("Must supply either a local or global palette.");for(var Pt=pe(It),Dt=0;Pt>>=1;)++Dt;var Pt=1<<Dt,qt=Ct.delay===void 0?0:Ct.delay,Ht=Ct.disposal===void 0?0:Ct.disposal;if(Ht<0||3<Ht)throw new Error("Disposal out of range.");var Gt=!1,Ut=0;if(Ct.transparent!==void 0&&Ct.transparent!==null&&(Gt=!0,(Ut=Ct.transparent)<0||Pt<=Ut))throw new Error("Transparent color index.");if(Ht===0&&!Gt&&qt===0||(d[b++]=33,d[b++]=249,d[b++]=4,d[b++]=Ht<<2|(Gt===!0?1:0),d[b++]=255&qt,d[b++]=qt>>8&255,d[b++]=Ut,d[b++]=0),d[b++]=44,d[b++]=255&gt,d[b++]=gt>>8&255,d[b++]=255&mt,d[b++]=mt>>8&255,d[b++]=255&wt,d[b++]=wt>>8&255,d[b++]=255&St,d[b++]=St>>8&255,d[b++]=Et===!0?128|Dt-1:0,Et===!0)for(var Yt=0,Zt=It.length;Yt<Zt;++Yt){var vt=It[Yt];d[b++]=vt>>16&255,d[b++]=vt>>8&255,d[b++]=255&vt}return b=function(Rt,Lt,Vt,Jt){Rt[Lt++]=Vt;var er=Lt++,ur=1<<Vt,yr=ur-1,Qt=1+ur,nr=1+Qt,or=Vt+1,Wt=0,ir=0;function br(Vr){for(;Vr<=Wt;)Rt[Lt++]=255&ir,ir>>=8,Wt-=8,Lt===er+256&&(Rt[er]=255,er=Lt++)}function Sr(Vr){ir|=Vr<<Wt,Wt+=or,br(8)}var _r=Jt[0]&yr,sr={};Sr(ur);for(var jr=1,Nr=Jt.length;jr<Nr;++jr){var kr=Jt[jr]&yr,qr=_r<<8|kr,Pr=sr[qr];if(Pr===void 0){for(ir|=_r<<Wt,Wt+=or;8<=Wt;)Rt[Lt++]=255&ir,ir>>=8,Wt-=8,Lt===er+256&&(Rt[er]=255,er=Lt++);nr===4096?(Sr(ur),nr=1+Qt,or=Vt+1,sr={}):(1<<or<=nr&&++or,sr[qr]=nr++),_r=kr}else _r=Pr}return Sr(_r),Sr(Qt),br(1),er+1===Lt?Rt[er]=0:(Rt[er]=Lt-er-1,Rt[Lt++]=0),Lt}(d,b,Dt<2?2:Dt,bt)},this.end=function(){return yt===!1&&(d[b++]=59,yt=!0),b},this.getOutputBuffer=function(){return d},this.setOutputBuffer=function(gt){d=gt},this.getOutputBufferPosition=function(){return b},this.setOutputBufferPosition=function(gt){b=gt}}function p(d,h,N,Be){for(var b=d[h++],E=1<<b,de=1+E,pe=1+de,Ye=b+1,me=(1<<Ye)-1,Le=0,nt=0,tt=0,ft=d[h++],yt=new Int32Array(4096),gt=null;;){for(;Le<16&&ft!==0;)nt|=d[h++]<<Le,Le+=8,ft===1?ft=d[h++]:--ft;if(Le<Ye)break;var mt=nt&me;if(nt>>=Ye,Le-=Ye,mt==E)pe=1+de,me=(1<<(Ye=b+1))-1,gt=null;else{if(mt==de)break;for(var wt=mt<pe?mt:gt,St=0,bt=wt;E<bt;)bt=yt[bt]>>8,++St;var Ct=bt;if(Be<tt+St+(wt!==mt?1:0))return void console.log("Warning, gif stream longer than expected.");N[tt++]=Ct;var Et=tt+=St;for(wt!==mt&&(N[tt++]=Ct),bt=wt;St--;)bt=yt[bt],N[--Et]=255&bt,bt>>=8;gt!==null&&pe<4096&&(yt[pe++]=gt<<8|Ct,me+1<=pe&&Ye<12&&(++Ye,me=me<<1|1)),gt=mt}}tt!==Be&&console.log("Warning, gif stream shorter than expected.")}try{u.GifWriter=s,u.GifReader=function(d){var h=0;if(d[h++]!==71||d[h++]!==73||d[h++]!==70||d[h++]!==56||(d[h++]+1&253)!=56||d[h++]!==97)throw new Error("Invalid GIF 87a/89a header.");var N=d[h++]|d[h++]<<8,Be=d[h++]|d[h++]<<8,b=d[h++],E=1<<1+(7&b),de=(d[h++],d[h++],null),pe=null,Ye=(b>>7&&(de=h,h+=3*(pe=E)),!0),me=[],Le=0,nt=null,tt=0,ft=null;for(this.width=N,this.height=Be;Ye&&h<d.length;)switch(d[h++]){case 33:switch(d[h++]){case 255:if(d[h]!==11||d[h+1]==78&&d[h+2]==69&&d[h+3]==84&&d[h+4]==83&&d[h+5]==67&&d[h+6]==65&&d[h+7]==80&&d[h+8]==69&&d[h+9]==50&&d[h+10]==46&&d[h+11]==48&&d[h+12]==3&&d[h+13]==1&&d[h+16]==0)h+=14,ft=d[h++]|d[h++]<<8,h++;else for(h+=12;;){if(!(0<=(gt=d[h++])))throw Error("Invalid block size");if(gt===0)break;h+=gt}break;case 249:if(d[h++]!==4||d[h+4]!==0)throw new Error("Invalid graphics extension block.");var yt=d[h++],Le=d[h++]|d[h++]<<8,nt=d[h++];(1&yt)==0&&(nt=null),tt=yt>>2&7,h++;break;case 254:for(;;){if(!(0<=(gt=d[h++])))throw Error("Invalid block size");if(gt===0)break;h+=gt}break;default:throw new Error("Unknown graphic control label: 0x"+d[h-1].toString(16))}break;case 44:var gt,mt=d[h++]|d[h++]<<8,wt=d[h++]|d[h++]<<8,St=d[h++]|d[h++]<<8,bt=d[h++]|d[h++]<<8,qt=d[h++],Ct=qt>>6&1,Et=1<<1+(7&qt),It=de,Dt=pe,Pt=!1,qt=(qt>>7&&(Pt=!0,It=h,h+=3*(Dt=Et)),h);for(h++;;){if(!(0<=(gt=d[h++])))throw Error("Invalid block size");if(gt===0)break;h+=gt}me.push({x:mt,y:wt,width:St,height:bt,has_local_palette:Pt,palette_offset:It,palette_size:Dt,data_offset:qt,data_length:h-qt,transparent_index:nt,interlaced:!!Ct,delay:Le,disposal:tt});break;case 59:Ye=!1;break;default:throw new Error("Unknown gif block: 0x"+d[h-1].toString(16))}this.numFrames=function(){return me.length},this.loopCount=function(){return ft},this.frameInfo=function(Ht){if(Ht<0||Ht>=me.length)throw new Error("Frame index out of range.");return me[Ht]},this.decodeAndBlitFrameBGRA=function(Ht,Gt){for(var Ht=this.frameInfo(Ht),Ut=Ht.width*Ht.height,Yt=new Uint8Array(Ut),Zt=(p(d,Ht.data_offset,Yt,Ut),Ht.palette_offset),vt=Ht.transparent_index,Rt=(vt===null&&(vt=256),Ht.width),Lt=N-Rt,Vt=Rt,Jt=4*(Ht.y*N+Ht.x),er=4*((Ht.y+Ht.height)*N+Ht.x),ur=Jt,yr=4*Lt,Qt=(Ht.interlaced===!0&&(yr+=4*N*7),8),nr=0,or=Yt.length;nr<or;++nr){var Wt,ir,br=Yt[nr];Vt===0&&(Vt=Rt,er<=(ur+=yr)&&(yr=4*Lt+4*N*(Qt-1),ur=Jt+(Rt+Lt)*(Qt<<1),Qt>>=1)),br===vt?ur+=4:(Wt=d[Zt+3*br],ir=d[Zt+3*br+1],br=d[Zt+3*br+2],Gt[ur++]=br,Gt[ur++]=ir,Gt[ur++]=Wt,Gt[ur++]=255),--Vt}},this.decodeAndBlitFrameRGBA=function(Ht,Gt){for(var Ht=this.frameInfo(Ht),Ut=Ht.width*Ht.height,Yt=new Uint8Array(Ut),Zt=(p(d,Ht.data_offset,Yt,Ut),Ht.palette_offset),vt=Ht.transparent_index,Rt=(vt===null&&(vt=256),Ht.width),Lt=N-Rt,Vt=Rt,Jt=4*(Ht.y*N+Ht.x),er=4*((Ht.y+Ht.height)*N+Ht.x),ur=Jt,yr=4*Lt,Qt=(Ht.interlaced===!0&&(yr+=4*N*7),8),nr=0,or=Yt.length;nr<or;++nr){var Wt,ir,br=Yt[nr];Vt===0&&(Vt=Rt,er<=(ur+=yr)&&(yr=4*Lt+4*N*(Qt-1),ur=Jt+(Rt+Lt)*(Qt<<1),Qt>>=1)),br===vt?ur+=4:(Wt=d[Zt+3*br],ir=d[Zt+3*br+1],br=d[Zt+3*br+2],Gt[ur++]=Wt,Gt[ur++]=ir,Gt[ur++]=br,Gt[ur++]=255),--Vt}}}}catch{}},{}],257:[function(t,l,u){(function(s){var p,d;p=this,d=function(h){function N(zt){if(this==null)throw TypeError();var _t,Mt=String(this),Ot=Mt.length,zt=zt?Number(zt):0;if(!((zt=zt!=zt?0:zt)<0||Ot<=zt))return 55296<=(_t=Mt.charCodeAt(zt))&&_t<=56319&&zt+1<Ot&&56320<=(Ot=Mt.charCodeAt(zt+1))&&Ot<=57343?1024*(_t-55296)+Ot-56320+65536:_t}String.prototype.codePointAt||((Be=function(){try{var st={},_t=Object.defineProperty,Mt=_t(st,st,st)&&_t}catch{}return Mt}())?Be(String.prototype,"codePointAt",{value:N,configurable:!0,writable:!0}):String.prototype.codePointAt=N);var Be,b=0,E=-3;function de(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function pe(st,_t){this.source=st,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=_t,this.destLen=0,this.ltree=new de,this.dtree=new de}var Ye=new de,me=new de,Le=new Uint8Array(30),nt=new Uint16Array(30),tt=new Uint8Array(30),ft=new Uint16Array(30),yt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gt=new de,mt=new Uint8Array(320);function wt(st,_t,Mt,Ot){for(var zt,Xt=0;Xt<Mt;++Xt)st[Xt]=0;for(Xt=0;Xt<30-Mt;++Xt)st[Xt+Mt]=Xt/Mt|0;for(zt=Ot,Xt=0;Xt<30;++Xt)_t[Xt]=zt,zt+=1<<st[Xt]}var St=new Uint16Array(16);function bt(st,_t,Mt,Ot){for(var zt,Xt=0;Xt<16;++Xt)st.table[Xt]=0;for(Xt=0;Xt<Ot;++Xt)st.table[_t[Mt+Xt]]++;for(Xt=zt=st.table[0]=0;Xt<16;++Xt)St[Xt]=zt,zt+=st.table[Xt];for(Xt=0;Xt<Ot;++Xt)_t[Mt+Xt]&&(st.trans[St[_t[Mt+Xt]]++]=Xt)}function Ct(st,_t,Mt){if(!_t)return Mt;for(;st.bitcount<24;)st.tag|=st.source[st.sourceIndex++]<<st.bitcount,st.bitcount+=8;var Ot=st.tag&65535>>>16-_t;return st.tag>>>=_t,st.bitcount-=_t,Ot+Mt}function Et(st,_t){for(;st.bitcount<24;)st.tag|=st.source[st.sourceIndex++]<<st.bitcount,st.bitcount+=8;for(var Mt=0,Ot=0,zt=0,Xt=st.tag;Ot=2*Ot+(1&Xt),Xt>>>=1,Mt+=_t.table[++zt],0<=(Ot-=_t.table[zt]););return st.tag=Xt,st.bitcount-=zt,_t.trans[Mt+Ot]}function It(st,_t,Mt){for(;;){var Ot=Et(st,_t);if(Ot===256)return b;if(Ot<256)st.dest[st.destLen++]=Ot;else for(var zt,Xt=Ct(st,Le[Ot-=257],nt[Ot]),Ot=Et(st,Mt),$t=zt=st.destLen-Ct(st,tt[Ot],ft[Ot]);$t<zt+Xt;++$t)st.dest[st.destLen++]=st.dest[$t]}}for(var Dt=Ye,Pt=me,qt=0;qt<7;++qt)Dt.table[qt]=0;for(Dt.table[7]=24,Dt.table[8]=152,Dt.table[9]=112,qt=0;qt<24;++qt)Dt.trans[qt]=256+qt;for(qt=0;qt<144;++qt)Dt.trans[24+qt]=qt;for(qt=0;qt<8;++qt)Dt.trans[168+qt]=280+qt;for(qt=0;qt<112;++qt)Dt.trans[176+qt]=144+qt;for(qt=0;qt<5;++qt)Pt.table[qt]=0;for(Pt.table[5]=32,qt=0;qt<32;++qt)Pt.trans[qt]=qt;wt(Le,nt,4,3),wt(tt,ft,2,1),Le[28]=0,nt[28]=258;var Ht=function(st,_t){var Mt,Ot,zt,Xt=new pe(st,_t);do{switch(zt=void 0,(Ot=Xt).bitcount--||(Ot.tag=Ot.source[Ot.sourceIndex++],Ot.bitcount=7),zt=1&Ot.tag,Ot.tag>>>=1,Ot=zt,Ct(Xt,2,0)){case 0:Mt=function(Qr){for(var On,Un;8<Qr.bitcount;)Qr.sourceIndex--,Qr.bitcount-=8;if((On=256*Qr.source[Qr.sourceIndex+1]+Qr.source[Qr.sourceIndex])!==(65535&~(256*Qr.source[Qr.sourceIndex+3]+Qr.source[Qr.sourceIndex+2])))return E;for(Qr.sourceIndex+=4,Un=On;Un;--Un)Qr.dest[Qr.destLen++]=Qr.source[Qr.sourceIndex++];return Qr.bitcount=0,b}(Xt);break;case 1:Mt=It(Xt,Ye,me);break;case 2:un=tn=hn=Zr=$t=Mr=Fr=Wr=Rr=xr=wr=fr=void 0;for(var $t,fr=Xt,wr=Xt.ltree,xr=Xt.dtree,Rr=Ct(fr,5,257),Wr=Ct(fr,5,1),Fr=Ct(fr,4,4),Mr=0;Mr<19;++Mr)mt[Mr]=0;for(Mr=0;Mr<Fr;++Mr){var hn=Ct(fr,3,0);mt[yt[Mr]]=hn}for(bt(gt,mt,0,19),$t=0;$t<Rr+Wr;){var tn=Et(fr,gt);switch(tn){case 16:for(var un=mt[$t-1],Zr=Ct(fr,2,3);Zr;--Zr)mt[$t++]=un;break;case 17:for(Zr=Ct(fr,3,3);Zr;--Zr)mt[$t++]=0;break;case 18:for(Zr=Ct(fr,7,11);Zr;--Zr)mt[$t++]=0;break;default:mt[$t++]=tn}}bt(wr,mt,0,Rr),bt(xr,mt,Rr,Wr),Mt=It(Xt,Xt.ltree,Xt.dtree);break;default:Mt=E}if(Mt!==b)throw new Error("Data error")}while(!Ot);return Xt.destLen<Xt.dest.length?typeof Xt.dest.slice=="function"?Xt.dest.slice(0,Xt.destLen):Xt.dest.subarray(0,Xt.destLen):Xt.dest};function Gt(st,_t,Mt,Ot,zt){return Math.pow(1-zt,3)*st+3*Math.pow(1-zt,2)*zt*_t+3*(1-zt)*Math.pow(zt,2)*Mt+Math.pow(zt,3)*Ot}function Ut(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function Yt(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function Zt(st){throw new Error(st)}function vt(st,_t){st||Zt(_t)}Ut.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},Ut.prototype.addPoint=function(st,_t){typeof st=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=st,this.x2=st),st<this.x1&&(this.x1=st),st>this.x2&&(this.x2=st)),typeof _t=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=_t,this.y2=_t),_t<this.y1&&(this.y1=_t),_t>this.y2&&(this.y2=_t))},Ut.prototype.addX=function(st){this.addPoint(st,null)},Ut.prototype.addY=function(st){this.addPoint(null,st)},Ut.prototype.addBezier=function(st,_t,Mt,Ot,zt,Xt,$t,fr){var wr=[st,_t],xr=[Mt,Ot],Rr=[zt,Xt],Wr=[$t,fr];this.addPoint(st,_t),this.addPoint($t,fr);for(var Fr=0;Fr<=1;Fr++){var Mr,hn=6*wr[Fr]-12*xr[Fr]+6*Rr[Fr],tn=-3*wr[Fr]+9*xr[Fr]-9*Rr[Fr]+3*Wr[Fr],un=3*xr[Fr]-3*wr[Fr];tn==0?hn==0||0<(Mr=-un/hn)&&Mr<1&&(Fr===0&&this.addX(Gt(wr[Fr],xr[Fr],Rr[Fr],Wr[Fr],Mr)),Fr===1&&this.addY(Gt(wr[Fr],xr[Fr],Rr[Fr],Wr[Fr],Mr))):(Mr=Math.pow(hn,2)-4*un*tn)<0||(0<(un=(-hn+Math.sqrt(Mr))/(2*tn))&&un<1&&(Fr===0&&this.addX(Gt(wr[Fr],xr[Fr],Rr[Fr],Wr[Fr],un)),Fr===1&&this.addY(Gt(wr[Fr],xr[Fr],Rr[Fr],Wr[Fr],un))),0<(un=(-hn-Math.sqrt(Mr))/(2*tn))&&un<1&&(Fr===0&&this.addX(Gt(wr[Fr],xr[Fr],Rr[Fr],Wr[Fr],un)),Fr===1&&this.addY(Gt(wr[Fr],xr[Fr],Rr[Fr],Wr[Fr],un))))}},Ut.prototype.addQuad=function(st,_t,Mt,Ot,zt,Xt){Mt=st+2/3*(Mt-st),Ot=_t+2/3*(Ot-_t),this.addBezier(st,_t,Mt,Ot,Mt+1/3*(zt-st),Ot+1/3*(Xt-_t),zt,Xt)},Yt.prototype.moveTo=function(st,_t){this.commands.push({type:"M",x:st,y:_t})},Yt.prototype.lineTo=function(st,_t){this.commands.push({type:"L",x:st,y:_t})},Yt.prototype.curveTo=Yt.prototype.bezierCurveTo=function(st,_t,Mt,Ot,zt,Xt){this.commands.push({type:"C",x1:st,y1:_t,x2:Mt,y2:Ot,x:zt,y:Xt})},Yt.prototype.quadTo=Yt.prototype.quadraticCurveTo=function(st,_t,Mt,Ot){this.commands.push({type:"Q",x1:st,y1:_t,x:Mt,y:Ot})},Yt.prototype.close=Yt.prototype.closePath=function(){this.commands.push({type:"Z"})},Yt.prototype.extend=function(st){var _t;if(st.commands)st=st.commands;else if(st instanceof Ut)return _t=st,this.moveTo(_t.x1,_t.y1),this.lineTo(_t.x2,_t.y1),this.lineTo(_t.x2,_t.y2),this.lineTo(_t.x1,_t.y2),void this.close();Array.prototype.push.apply(this.commands,st)},Yt.prototype.getBoundingBox=function(){for(var st=new Ut,_t=0,Mt=0,Ot=0,zt=0,Xt=0;Xt<this.commands.length;Xt++){var $t=this.commands[Xt];switch($t.type){case"M":st.addPoint($t.x,$t.y),_t=Ot=$t.x,Mt=zt=$t.y;break;case"L":st.addPoint($t.x,$t.y),Ot=$t.x,zt=$t.y;break;case"Q":st.addQuad(Ot,zt,$t.x1,$t.y1,$t.x,$t.y),Ot=$t.x,zt=$t.y;break;case"C":st.addBezier(Ot,zt,$t.x1,$t.y1,$t.x2,$t.y2,$t.x,$t.y),Ot=$t.x,zt=$t.y;break;case"Z":Ot=_t,zt=Mt;break;default:throw new Error("Unexpected path command "+$t.type)}}return st.isEmpty()&&st.addPoint(0,0),st},Yt.prototype.draw=function(st){st.beginPath();for(var _t=0;_t<this.commands.length;_t+=1){var Mt=this.commands[_t];Mt.type==="M"?st.moveTo(Mt.x,Mt.y):Mt.type==="L"?st.lineTo(Mt.x,Mt.y):Mt.type==="C"?st.bezierCurveTo(Mt.x1,Mt.y1,Mt.x2,Mt.y2,Mt.x,Mt.y):Mt.type==="Q"?st.quadraticCurveTo(Mt.x1,Mt.y1,Mt.x,Mt.y):Mt.type==="Z"&&st.closePath()}this.fill&&(st.fillStyle=this.fill,st.fill()),this.stroke&&(st.strokeStyle=this.stroke,st.lineWidth=this.strokeWidth,st.stroke())},Yt.prototype.toPathData=function(st){function _t(){for(var Xt=arguments,$t="",fr=0;fr<arguments.length;fr+=1){var wr=Xt[fr];0<=wr&&0<fr&&($t+=" "),$t+=(wr=wr,Math.round(wr)===wr?""+Math.round(wr):wr.toFixed(st))}return $t}st=st!==void 0?st:2;for(var Mt="",Ot=0;Ot<this.commands.length;Ot+=1){var zt=this.commands[Ot];zt.type==="M"?Mt+="M"+_t(zt.x,zt.y):zt.type==="L"?Mt+="L"+_t(zt.x,zt.y):zt.type==="C"?Mt+="C"+_t(zt.x1,zt.y1,zt.x2,zt.y2,zt.x,zt.y):zt.type==="Q"?Mt+="Q"+_t(zt.x1,zt.y1,zt.x,zt.y):zt.type==="Z"&&(Mt+="Z")}return Mt},Yt.prototype.toSVG=function(st){var _t=(_t='<path d="')+this.toPathData(st)+'"';return this.fill&&this.fill!=="black"&&(this.fill===null?_t+=' fill="none"':_t+=' fill="'+this.fill+'"'),this.stroke&&(_t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),_t+="/>"},Yt.prototype.toDOMElement=function(_t){var _t=this.toPathData(_t),Mt=document.createElementNS("http://www.w3.org/2000/svg","path");return Mt.setAttribute("d",_t),Mt};var Rt={fail:Zt,argument:vt,assert:vt},Lt={},Vt={},Jt={};function er(st){return function(){return st}}Vt.BYTE=function(st){return Rt.argument(0<=st&&st<=255,"Byte value should be between 0 and 255."),[st]},Jt.BYTE=er(1),Vt.CHAR=function(st){return[st.charCodeAt(0)]},Jt.CHAR=er(1),Vt.CHARARRAY=function(st){for(var _t=[],Mt=0;Mt<st.length;Mt+=1)_t[Mt]=st.charCodeAt(Mt);return _t},Jt.CHARARRAY=function(st){return st.length},Vt.USHORT=function(st){return[st>>8&255,255&st]},Jt.USHORT=er(2),Vt.SHORT=function(st){return[(st=32768<=st?-(65536-st):st)>>8&255,255&st]},Jt.SHORT=er(2),Vt.UINT24=function(st){return[st>>16&255,st>>8&255,255&st]},Jt.UINT24=er(3),Vt.ULONG=function(st){return[st>>24&255,st>>16&255,st>>8&255,255&st]},Jt.ULONG=er(4),Vt.LONG=function(st){return[(st=2147483648<=st?-(4294967296-st):st)>>24&255,st>>16&255,st>>8&255,255&st]},Jt.LONG=er(4),Vt.FIXED=Vt.ULONG,Jt.FIXED=Jt.ULONG,Vt.FWORD=Vt.SHORT,Jt.FWORD=Jt.SHORT,Vt.UFWORD=Vt.USHORT,Jt.UFWORD=Jt.USHORT,Vt.LONGDATETIME=function(st){return[0,0,0,0,st>>24&255,st>>16&255,st>>8&255,255&st]},Jt.LONGDATETIME=er(8),Vt.TAG=function(st){return Rt.argument(st.length===4,"Tag should be exactly 4 ASCII characters."),[st.charCodeAt(0),st.charCodeAt(1),st.charCodeAt(2),st.charCodeAt(3)]},Jt.TAG=er(4),Vt.Card8=Vt.BYTE,Jt.Card8=Jt.BYTE,Vt.Card16=Vt.USHORT,Jt.Card16=Jt.USHORT,Vt.OffSize=Vt.BYTE,Jt.OffSize=Jt.BYTE,Vt.SID=Vt.USHORT,Jt.SID=Jt.USHORT,Vt.NUMBER=function(st){return-107<=st&&st<=107?[st+139]:108<=st&&st<=1131?[247+((st-=108)>>8),255&st]:-1131<=st&&st<=-108?[251+((st=-st-108)>>8),255&st]:-32768<=st&&st<=32767?Vt.NUMBER16(st):Vt.NUMBER32(st)},Jt.NUMBER=function(st){return Vt.NUMBER(st).length},Vt.NUMBER16=function(st){return[28,st>>8&255,255&st]},Jt.NUMBER16=er(3),Vt.NUMBER32=function(st){return[29,st>>24&255,st>>16&255,st>>8&255,255&st]},Jt.NUMBER32=er(5),Vt.REAL=function(st){for(var _t=st.toString(),Mt=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(_t),Ot=(Mt&&(Mt=parseFloat("1e"+((Mt[2]?+Mt[2]:0)+Mt[1].length)),_t=(Math.round(st*Mt)/Mt).toString()),""),zt=0,Xt=_t.length;zt<Xt;zt+=1){var $t=_t[zt];Ot+=$t==="e"?_t[++zt]==="-"?"c":"b":$t==="."?"a":$t==="-"?"e":$t}for(var fr=[30],wr=0,xr=(Ot+=1&Ot.length?"f":"ff").length;wr<xr;wr+=2)fr.push(parseInt(Ot.substr(wr,2),16));return fr},Jt.REAL=function(st){return Vt.REAL(st).length},Vt.NAME=Vt.CHARARRAY,Jt.NAME=Jt.CHARARRAY,Vt.STRING=Vt.CHARARRAY,Jt.STRING=Jt.CHARARRAY,Lt.UTF8=function(st,_t,Mt){for(var Ot=[],zt=Mt,Xt=0;Xt<zt;Xt++,_t+=1)Ot[Xt]=st.getUint8(_t);return String.fromCharCode.apply(null,Ot)},Lt.UTF16=function(st,_t,Mt){for(var Ot=[],zt=Mt/2,Xt=0;Xt<zt;Xt++,_t+=2)Ot[Xt]=st.getUint16(_t);return String.fromCharCode.apply(null,Ot)},Vt.UTF16=function(st){for(var _t=[],Mt=0;Mt<st.length;Mt+=1){var Ot=st.charCodeAt(Mt);_t[_t.length]=Ot>>8&255,_t[_t.length]=255&Ot}return _t},Jt.UTF16=function(st){return 2*st.length};var ur,yr={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""},Qt=(Lt.MACSTRING=function(st,_t,Mt,Ot){var zt=yr[Ot];if(zt!==void 0){for(var Xt="",$t=0;$t<Mt;$t++){var fr=st.getUint8(_t+$t);Xt+=fr<=127?String.fromCharCode(fr):zt[127&fr]}return Xt}},typeof WeakMap=="function"&&new WeakMap);function nr(st){return-128<=st&&st<=127}Vt.MACSTRING=function(st,_t){var Mt=function($t){if(!ur)for(var fr in ur={},yr)ur[fr]=new String(fr);var wr=ur[$t];if(wr!==void 0){if(Qt){var xr=Qt.get(wr);if(xr!==void 0)return xr}var Rr=yr[$t];if(Rr!==void 0){for(var Wr={},Fr=0;Fr<Rr.length;Fr++)Wr[Rr.charCodeAt(Fr)]=Fr+128;return Qt&&Qt.set(wr,Wr),Wr}}}(_t);if(Mt!==void 0){for(var Ot=[],zt=0;zt<st.length;zt++){var Xt=st.charCodeAt(zt);if(128<=Xt&&(Xt=Mt[Xt])===void 0)return;Ot[zt]=Xt}return Ot}},Jt.MACSTRING=function(st,_t){return st=Vt.MACSTRING(st,_t),st!==void 0?st.length:0},Vt.VARDELTAS=function(st){for(var Ot=0,_t=[];Ot<st.length;)var Mt=st[Ot],Ot=(Mt===0?function(zt,Xt,$t){for(var fr=0,wr=zt.length;Xt<wr&&fr<64&&zt[Xt]===0;)++Xt,++fr;return $t.push(128|fr-1),Xt}:-128<=Mt&&Mt<=127?function(zt,Xt,$t){for(var fr=0,wr=zt.length,xr=Xt;xr<wr&&fr<64;){var Rr=zt[xr];if(!nr(Rr)||Rr===0&&xr+1<wr&&zt[xr+1]===0)break;++xr,++fr}$t.push(fr-1);for(var Wr=Xt;Wr<xr;++Wr)$t.push(zt[Wr]+256&255);return xr}:function(zt,Xt,$t){for(var fr=0,wr=zt.length,xr=Xt;xr<wr&&fr<64;){var Rr=zt[xr];if(Rr===0||nr(Rr)&&xr+1<wr&&nr(zt[xr+1]))break;++xr,++fr}$t.push(64|fr-1);for(var Wr=Xt;Wr<xr;++Wr){var Fr=zt[Wr];$t.push(Fr+65536>>8&255,Fr+256&255)}return xr})(st,Ot,_t);return _t},Vt.INDEX=function(st){for(var _t=1,Mt=[_t],Ot=[],zt=0;zt<st.length;zt+=1){var Xt=Vt.OBJECT(st[zt]);Array.prototype.push.apply(Ot,Xt),_t+=Xt.length,Mt.push(_t)}if(Ot.length===0)return[0,0];for(var $t=[],fr=1+Math.floor(Math.log(_t)/Math.log(2))/8|0,wr=[void 0,Vt.BYTE,Vt.USHORT,Vt.UINT24,Vt.ULONG][fr],xr=0;xr<Mt.length;xr+=1){var Rr=wr(Mt[xr]);Array.prototype.push.apply($t,Rr)}return Array.prototype.concat(Vt.Card16(st.length),Vt.OffSize(fr),$t,Ot)},Jt.INDEX=function(st){return Vt.INDEX(st).length},Vt.DICT=function(st){for(var _t=[],Mt=Object.keys(st),Ot=Mt.length,zt=0;zt<Ot;zt+=1){var Xt=parseInt(Mt[zt],0),$t=st[Xt];_t=(_t=_t.concat(Vt.OPERAND($t.value,$t.type))).concat(Vt.OPERATOR(Xt))}return _t},Jt.DICT=function(st){return Vt.DICT(st).length},Vt.OPERATOR=function(st){return st<1200?[st]:[12,st-1200]},Vt.OPERAND=function(st,_t){var Mt=[];if(Array.isArray(_t))for(var Ot=0;Ot<_t.length;Ot+=1)Rt.argument(st.length===_t.length,"Not enough arguments given for type"+_t),Mt=Mt.concat(Vt.OPERAND(st[Ot],_t[Ot]));else if(_t==="SID")Mt=Mt.concat(Vt.NUMBER(st));else if(_t==="offset")Mt=Mt.concat(Vt.NUMBER32(st));else if(_t==="number")Mt=Mt.concat(Vt.NUMBER(st));else{if(_t!=="real")throw new Error("Unknown operand type "+_t);Mt=Mt.concat(Vt.REAL(st))}return Mt},Vt.OP=Vt.BYTE,Jt.OP=Jt.BYTE;var or=typeof WeakMap=="function"&&new WeakMap;function Wt(st,_t,Mt){for(var Ot=0;Ot<_t.length;Ot+=1){var zt=_t[Ot];this[zt.name]=zt.value}if(this.tableName=st,this.fields=_t,Mt)for(var Xt=Object.keys(Mt),$t=0;$t<Xt.length;$t+=1){var fr=Xt[$t],wr=Mt[fr];this[fr]!==void 0&&(this[fr]=wr)}}function ir(st,_t,Mt){Mt===void 0&&(Mt=_t.length);var Ot=new Array(_t.length+1);Ot[0]={name:st+"Count",type:"USHORT",value:Mt};for(var zt=0;zt<_t.length;zt++)Ot[zt+1]={name:st+zt,type:"USHORT",value:_t[zt]};return Ot}function br(st,_t,Mt){var Ot=_t.length,zt=new Array(Ot+1);zt[0]={name:st+"Count",type:"USHORT",value:Ot};for(var Xt=0;Xt<Ot;Xt++)zt[Xt+1]={name:st+Xt,type:"TABLE",value:Mt(_t[Xt],Xt)};return zt}function Sr(st,_t,Mt){var Ot=_t.length,zt=[];zt[0]={name:st+"Count",type:"USHORT",value:Ot};for(var Xt=0;Xt<Ot;Xt++)zt=zt.concat(Mt(_t[Xt],Xt));return zt}function _r(st){st.format===1?Wt.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(ir("glyph",st.glyphs))):Rt.assert(!1,"Can't create coverage table format 2 yet.")}function sr(st){Wt.call(this,"scriptListTable",Sr("scriptRecord",st,function(_t,Mt){var Ot=_t.script,zt=Ot.defaultLangSys;return Rt.assert(!!zt,"Unable to write GSUB: script "+_t.tag+" has no default language system."),[{name:"scriptTag"+Mt,type:"TAG",value:_t.tag},{name:"script"+Mt,type:"TABLE",value:new Wt("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new Wt("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:zt.reqFeatureIndex}].concat(ir("featureIndex",zt.featureIndexes)))}].concat(Sr("langSys",Ot.langSysRecords,function(Xt,$t){var fr=Xt.langSys;return[{name:"langSysTag"+$t,type:"TAG",value:Xt.tag},{name:"langSys"+$t,type:"TABLE",value:new Wt("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:fr.reqFeatureIndex}].concat(ir("featureIndex",fr.featureIndexes)))}]})))}]}))}function jr(st){Wt.call(this,"featureListTable",Sr("featureRecord",st,function(_t,Mt){var Ot=_t.feature;return[{name:"featureTag"+Mt,type:"TAG",value:_t.tag},{name:"feature"+Mt,type:"TABLE",value:new Wt("featureTable",[{name:"featureParams",type:"USHORT",value:Ot.featureParams}].concat(ir("lookupListIndex",Ot.lookupListIndexes)))}]}))}function Nr(st,_t){Wt.call(this,"lookupListTable",br("lookup",st,function(Mt){var Ot=_t[Mt.lookupType];return Rt.assert(!!Ot,"Unable to write GSUB lookup type "+Mt.lookupType+" tables."),new Wt("lookupTable",[{name:"lookupType",type:"USHORT",value:Mt.lookupType},{name:"lookupFlag",type:"USHORT",value:Mt.lookupFlag}].concat(br("subtable",Mt.subtables,Ot)))}))}Vt.CHARSTRING=function(st){if(or){var _t=or.get(st);if(_t!==void 0)return _t}for(var Xt=[],Mt=st.length,Ot=0;Ot<Mt;Ot+=1)var zt=st[Ot],Xt=Xt.concat(Vt[zt.type](zt.value));return or&&or.set(st,Xt),Xt},Jt.CHARSTRING=function(st){return Vt.CHARSTRING(st).length},Vt.OBJECT=function(st){var _t=Vt[st.type];return Rt.argument(_t!==void 0,"No encoding function for type "+st.type),_t(st.value)},Jt.OBJECT=function(st){var _t=Jt[st.type];return Rt.argument(_t!==void 0,"No sizeOf function for type "+st.type),_t(st.value)},Vt.TABLE=function(st){for(var _t=[],Mt=st.fields.length,Ot=[],zt=[],Xt=0;Xt<Mt;Xt+=1){var $t=st.fields[Xt],wr=Vt[$t.type],fr=(Rt.argument(wr!==void 0,"No encoding function for field type "+$t.type+" ("+$t.name+")"),st[$t.name]),wr=wr(fr=fr===void 0?$t.value:fr);$t.type==="TABLE"?(zt.push(_t.length),_t=_t.concat([0,0]),Ot.push(wr)):_t=_t.concat(wr)}for(var xr=0;xr<Ot.length;xr+=1){var Rr=zt[xr],Wr=_t.length;Rt.argument(Wr<65536,"Table "+st.tableName+" too big."),_t[Rr]=Wr>>8,_t[Rr+1]=255&Wr,_t=_t.concat(Ot[xr])}return _t},Jt.TABLE=function(st){for(var _t=0,Mt=st.fields.length,Ot=0;Ot<Mt;Ot+=1){var zt=st.fields[Ot],Xt=Jt[zt.type],$t=(Rt.argument(Xt!==void 0,"No sizeOf function for field type "+zt.type+" ("+zt.name+")"),st[zt.name]);_t+=Xt($t=$t===void 0?zt.value:$t),zt.type==="TABLE"&&(_t+=2)}return _t},Vt.RECORD=Vt.TABLE,Jt.RECORD=Jt.TABLE,Vt.LITERAL=function(st){return st},Jt.LITERAL=function(st){return st.length},Wt.prototype.encode=function(){return Vt.TABLE(this)},Wt.prototype.sizeOf=function(){return Jt.TABLE(this)};var kr={Table:Wt,Record:Wt,Coverage:(_r.prototype=Object.create(Wt.prototype)).constructor=_r,ScriptList:(sr.prototype=Object.create(Wt.prototype)).constructor=sr,FeatureList:(jr.prototype=Object.create(Wt.prototype)).constructor=jr,LookupList:(Nr.prototype=Object.create(Wt.prototype)).constructor=Nr,ushortList:ir,tableList:br,recordList:Sr};function qr(st,_t){return st.getUint8(_t)}function Pr(st,_t){return st.getUint16(_t,!1)}function Vr(st,_t){return st.getUint32(_t,!1)}function Xr(st,_t){return st.getInt16(_t,!1)+st.getUint16(_t+2,!1)/65535}var Gr={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function Er(st,_t){this.data=st,this.offset=_t,this.relativeOffset=0}Er.prototype.parseByte=function(){var st=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,st},Er.prototype.parseChar=function(){var st=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,st},Er.prototype.parseCard8=Er.prototype.parseByte,Er.prototype.parseCard16=Er.prototype.parseUShort=function(){var st=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,st},Er.prototype.parseSID=Er.prototype.parseUShort,Er.prototype.parseOffset16=Er.prototype.parseUShort,Er.prototype.parseShort=function(){var st=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,st},Er.prototype.parseF2Dot14=function(){var st=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,st},Er.prototype.parseOffset32=Er.prototype.parseULong=function(){var st=Vr(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,st},Er.prototype.parseFixed=function(){var st=Xr(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,st},Er.prototype.parseString=function(st){var _t=this.data,Mt=this.offset+this.relativeOffset,Ot="";this.relativeOffset+=st;for(var zt=0;zt<st;zt++)Ot+=String.fromCharCode(_t.getUint8(Mt+zt));return Ot},Er.prototype.parseTag=function(){return this.parseString(4)},Er.prototype.parseLongDateTime=function(){var st=Vr(this.data,this.offset+this.relativeOffset+4);return st-=2082844800,this.relativeOffset+=8,st},Er.prototype.parseVersion=function(st){var _t=Pr(this.data,this.offset+this.relativeOffset),Mt=Pr(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,_t+Mt/(st=st===void 0?4096:st)/10},Er.prototype.skip=function(st,_t){this.relativeOffset+=Gr[st]*(_t=_t===void 0?1:_t)},Er.prototype.parseULongList=function(st){st===void 0&&(st=this.parseULong());for(var _t=new Array(st),Mt=this.data,Ot=this.offset+this.relativeOffset,zt=0;zt<st;zt++)_t[zt]=Mt.getUint32(Ot),Ot+=4;return this.relativeOffset+=4*st,_t},Er.prototype.parseOffset16List=Er.prototype.parseUShortList=function(st){st===void 0&&(st=this.parseUShort());for(var _t=new Array(st),Mt=this.data,Ot=this.offset+this.relativeOffset,zt=0;zt<st;zt++)_t[zt]=Mt.getUint16(Ot),Ot+=2;return this.relativeOffset+=2*st,_t},Er.prototype.parseShortList=function(st){for(var _t=new Array(st),Mt=this.data,Ot=this.offset+this.relativeOffset,zt=0;zt<st;zt++)_t[zt]=Mt.getInt16(Ot),Ot+=2;return this.relativeOffset+=2*st,_t},Er.prototype.parseByteList=function(st){for(var _t=new Array(st),Mt=this.data,Ot=this.offset+this.relativeOffset,zt=0;zt<st;zt++)_t[zt]=Mt.getUint8(Ot++);return this.relativeOffset+=st,_t},Er.prototype.parseList=function(st,_t){_t||(_t=st,st=this.parseUShort());for(var Mt=new Array(st),Ot=0;Ot<st;Ot++)Mt[Ot]=_t.call(this);return Mt},Er.prototype.parseList32=function(st,_t){_t||(_t=st,st=this.parseULong());for(var Mt=new Array(st),Ot=0;Ot<st;Ot++)Mt[Ot]=_t.call(this);return Mt},Er.prototype.parseRecordList=function(st,_t){_t||(_t=st,st=this.parseUShort());for(var Mt=new Array(st),Ot=Object.keys(_t),zt=0;zt<st;zt++){for(var Xt={},$t=0;$t<Ot.length;$t++){var fr=Ot[$t],wr=_t[fr];Xt[fr]=wr.call(this)}Mt[zt]=Xt}return Mt},Er.prototype.parseRecordList32=function(st,_t){_t||(_t=st,st=this.parseULong());for(var Mt=new Array(st),Ot=Object.keys(_t),zt=0;zt<st;zt++){for(var Xt={},$t=0;$t<Ot.length;$t++){var fr=Ot[$t],wr=_t[fr];Xt[fr]=wr.call(this)}Mt[zt]=Xt}return Mt},Er.prototype.parseStruct=function(st){if(typeof st=="function")return st.call(this);for(var _t=Object.keys(st),Mt={},Ot=0;Ot<_t.length;Ot++){var zt=_t[Ot],Xt=st[zt];Mt[zt]=Xt.call(this)}return Mt},Er.prototype.parseValueRecord=function(st){var _t;if((st=st===void 0?this.parseUShort():st)!==0)return _t={},1&st&&(_t.xPlacement=this.parseShort()),2&st&&(_t.yPlacement=this.parseShort()),4&st&&(_t.xAdvance=this.parseShort()),8&st&&(_t.yAdvance=this.parseShort()),16&st&&(_t.xPlaDevice=void 0,this.parseShort()),32&st&&(_t.yPlaDevice=void 0,this.parseShort()),64&st&&(_t.xAdvDevice=void 0,this.parseShort()),128&st&&(_t.yAdvDevice=void 0,this.parseShort()),_t},Er.prototype.parseValueRecordList=function(){for(var st=this.parseUShort(),_t=this.parseUShort(),Mt=new Array(_t),Ot=0;Ot<_t;Ot++)Mt[Ot]=this.parseValueRecord(st);return Mt},Er.prototype.parsePointer=function(st){var _t=this.parseOffset16();if(0<_t)return new Er(this.data,this.offset+_t).parseStruct(st)},Er.prototype.parsePointer32=function(st){var _t=this.parseOffset32();if(0<_t)return new Er(this.data,this.offset+_t).parseStruct(st)},Er.prototype.parseListOfLists=function(st){for(var _t=this.parseOffset16List(),Mt=_t.length,Ot=this.relativeOffset,zt=new Array(Mt),Xt=0;Xt<Mt;Xt++){var $t=_t[Xt];if($t===0)zt[Xt]=void 0;else if(this.relativeOffset=$t,st){for(var fr=this.parseOffset16List(),wr=new Array(fr.length),xr=0;xr<fr.length;xr++)this.relativeOffset=$t+fr[xr],wr[xr]=st.call(this);zt[Xt]=wr}else zt[Xt]=this.parseUShortList()}return this.relativeOffset=Ot,zt},Er.prototype.parseCoverage=function(){var st=this.offset+this.relativeOffset,_t=this.parseUShort(),Mt=this.parseUShort();if(_t===1)return{format:1,glyphs:this.parseUShortList(Mt)};if(_t!==2)throw new Error("0x"+st.toString(16)+": Coverage format must be 1 or 2.");for(var Ot=new Array(Mt),zt=0;zt<Mt;zt++)Ot[zt]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:Ot}},Er.prototype.parseClassDef=function(){var st=this.offset+this.relativeOffset,_t=this.parseUShort();if(_t===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(_t===2)return{format:2,ranges:this.parseRecordList({start:Er.uShort,end:Er.uShort,classId:Er.uShort})};throw new Error("0x"+st.toString(16)+": ClassDef format must be 1 or 2.")},Er.list=function(st,_t){return function(){return this.parseList(st,_t)}},Er.list32=function(st,_t){return function(){return this.parseList32(st,_t)}},Er.recordList=function(st,_t){return function(){return this.parseRecordList(st,_t)}},Er.recordList32=function(st,_t){return function(){return this.parseRecordList32(st,_t)}},Er.pointer=function(st){return function(){return this.parsePointer(st)}},Er.pointer32=function(st){return function(){return this.parsePointer32(st)}},Er.tag=Er.prototype.parseTag,Er.byte=Er.prototype.parseByte,Er.uShort=Er.offset16=Er.prototype.parseUShort,Er.uShortList=Er.prototype.parseUShortList,Er.uLong=Er.offset32=Er.prototype.parseULong,Er.uLongList=Er.prototype.parseULongList,Er.struct=Er.prototype.parseStruct,Er.coverage=Er.prototype.parseCoverage,Er.classDef=Er.prototype.parseClassDef;var Ir={reserved:Er.uShort,reqFeatureIndex:Er.uShort,featureIndexes:Er.uShortList},Cr=(Er.prototype.parseScriptList=function(){return this.parsePointer(Er.recordList({tag:Er.tag,script:Er.pointer({defaultLangSys:Er.pointer(Ir),langSysRecords:Er.recordList({tag:Er.tag,langSys:Er.pointer(Ir)})})}))||[]},Er.prototype.parseFeatureList=function(){return this.parsePointer(Er.recordList({tag:Er.tag,feature:Er.pointer({featureParams:Er.offset16,lookupListIndexes:Er.uShortList})}))||[]},Er.prototype.parseLookupList=function(st){return this.parsePointer(Er.list(Er.pointer(function(){var _t=this.parseUShort(),Mt=(Rt.argument(1<=_t&&_t<=9,"GPOS/GSUB lookup type "+_t+" unknown."),this.parseUShort()),Ot=16&Mt;return{lookupType:_t,lookupFlag:Mt,subtables:this.parseList(Er.pointer(st[_t])),markFilteringSet:Ot?this.parseUShort():void 0}})))||[]},Er.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var st=this.parseUShort(),_t=this.parseUShort();return Rt.argument(st===1&&_t<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:Er.offset32,featureTableSubstitutionOffset:Er.offset32})})||[]},{getByte:qr,getCard8:qr,getUShort:Pr,getCard16:Pr,getShort:function(st,_t){return st.getInt16(_t,!1)},getULong:Vr,getFixed:Xr,getTag:function(st,_t){for(var Mt="",Ot=_t;Ot<_t+4;Ot+=1)Mt+=String.fromCharCode(st.getInt8(Ot));return Mt},getOffset:function(st,_t,Mt){for(var Ot=0,zt=0;zt<Mt;zt+=1)Ot=(Ot<<=8)+st.getUint8(_t+zt);return Ot},getBytes:function(st,_t,Mt){for(var Ot=[],zt=_t;zt<Mt;zt+=1)Ot.push(st.getUint8(zt));return Ot},bytesToString:function(st){for(var _t="",Mt=0;Mt<st.length;Mt+=1)_t+=String.fromCharCode(st[Mt]);return _t},Parser:Er}),tr={parse:function(st,_t){for(var Mt={},Ot=(Mt.version=Cr.getUShort(st,_t),Rt.argument(Mt.version===0,"cmap table version should be 0."),Mt.numTables=Cr.getUShort(st,_t+2),-1),zt=Mt.numTables-1;0<=zt;--zt){var Xt=Cr.getUShort(st,_t+4+8*zt),$t=Cr.getUShort(st,_t+4+8*zt+2);if(Xt===3&&($t===0||$t===1||$t===10)||Xt===0&&($t===0||$t===1||$t===2||$t===3||$t===4)){Ot=Cr.getULong(st,_t+4+8*zt+4);break}}if(Ot===-1)throw new Error("No valid cmap sub-tables found.");var fr=new Cr.Parser(st,_t+Ot);if(Mt.format=fr.parseUShort(),Mt.format===12){var wr,xr=Mt,Rr=fr;Rr.parseUShort(),xr.length=Rr.parseULong(),xr.language=Rr.parseULong(),xr.groupCount=wr=Rr.parseULong(),xr.glyphIndexMap={};for(var Wr=0;Wr<wr;Wr+=1)for(var Fr=Rr.parseULong(),Mr=Rr.parseULong(),hn=Rr.parseULong(),tn=Fr;tn<=Mr;tn+=1)xr.glyphIndexMap[tn]=hn,hn++}else{if(Mt.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+Mt.format+").");var un=Mt,Zr=st,Qr=_t,On=Ot;un.length=fr.parseUShort(),un.language=fr.parseUShort(),un.segCount=Un=fr.parseUShort()>>1,fr.skip("uShort",3),un.glyphIndexMap={};for(var Un,Ln=new Cr.Parser(Zr,Qr+On+14),In=new Cr.Parser(Zr,Qr+On+16+2*Un),Vn=new Cr.Parser(Zr,Qr+On+16+4*Un),hi=new Cr.Parser(Zr,Qr+On+16+6*Un),Qn=Qr+On+16+8*Un,bi=0;bi<Un-1;bi+=1)for(var Bi=void 0,Fi=Ln.parseUShort(),ta=In.parseUShort(),ai=Vn.parseShort(),si=hi.parseUShort(),ni=ta;ni<=Fi;ni+=1)si!==0?(Qn=(Qn=hi.offset+hi.relativeOffset-2)+si+2*(ni-ta),(Bi=Cr.getUShort(Zr,Qn))!==0&&(Bi=Bi+ai&65535)):Bi=ni+ai&65535,un.glyphIndexMap[ni]=Bi}return Mt},make:function(st){for(var _t=!0,Mt=st.length-1;0<Mt;--Mt)if(65535<st.get(Mt).unicode){console.log("Adding CMAP format 12 (needed!)"),_t=!1;break}var Ot,zt,Xt=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:_t?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:_t?12:20}],$t=(Xt=(Xt=_t?Xt:Xt.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])).concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),new kr.Table("cmap",Xt));for($t.segments=[],Mt=0;Mt<st.length;Mt+=1){for(var fr=st.get(Mt),wr=0;wr<fr.unicodes.length;wr+=1)Ot=fr.unicodes[wr],zt=Mt,$t.segments.push({end:Ot,start:Ot,delta:-(Ot-zt),offset:0,glyphIndex:zt});$t.segments=$t.segments.sort(function(Qr,On){return Qr.start-On.start})}$t.segments.push({end:65535,start:65535,delta:1,offset:0});var xr=$t.segments.length,Rr=0,Wr=[],Fr=[],Mr=[],hn=[],tn=[],un=[];for(Mt=0;Mt<xr;Mt+=1){var Zr=$t.segments[Mt];Zr.end<=65535&&Zr.start<=65535?(Wr=Wr.concat({name:"end_"+Mt,type:"USHORT",value:Zr.end}),Fr=Fr.concat({name:"start_"+Mt,type:"USHORT",value:Zr.start}),Mr=Mr.concat({name:"idDelta_"+Mt,type:"SHORT",value:Zr.delta}),hn=hn.concat({name:"idRangeOffset_"+Mt,type:"USHORT",value:Zr.offset}),Zr.glyphId!==void 0&&(tn=tn.concat({name:"glyph_"+Mt,type:"USHORT",value:Zr.glyphId}))):Rr+=1,_t||Zr.glyphIndex===void 0||(un=(un=(un=un.concat({name:"cmap12Start_"+Mt,type:"ULONG",value:Zr.start})).concat({name:"cmap12End_"+Mt,type:"ULONG",value:Zr.end})).concat({name:"cmap12Glyph_"+Mt,type:"ULONG",value:Zr.glyphIndex}))}return $t.segCountX2=2*(xr-Rr),$t.searchRange=2*Math.pow(2,Math.floor(Math.log(xr-Rr)/Math.log(2))),$t.entrySelector=Math.log($t.searchRange/2)/Math.log(2),$t.rangeShift=$t.segCountX2-$t.searchRange,$t.fields=$t.fields.concat(Wr),$t.fields.push({name:"reservedPad",type:"USHORT",value:0}),$t.fields=$t.fields.concat(Fr),$t.fields=$t.fields.concat(Mr),$t.fields=$t.fields.concat(hn),$t.fields=$t.fields.concat(tn),$t.cmap4Length=14+2*Wr.length+2+2*Fr.length+2*Mr.length+2*hn.length+2*tn.length,_t||(Xt=16+4*un.length,$t.cmap12Offset=20+$t.cmap4Length,$t.fields=$t.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:Xt},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:un.length/3}]),$t.fields=$t.fields.concat(un)),$t}},ar=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],Kt=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],cr=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],Tr=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Dr(st){this.font=st}function zr(st){this.cmap=st}function fn(st,_t){this.encoding=st,this.charset=_t}function vn(st){switch(st.version){case 1:this.names=Tr.slice();break;case 2:this.names=new Array(st.numberOfGlyphs);for(var _t=0;_t<st.numberOfGlyphs;_t++)st.glyphNameIndex[_t]<Tr.length?this.names[_t]=Tr[st.glyphNameIndex[_t]]:this.names[_t]=st.names[st.glyphNameIndex[_t]-Tr.length];break;case 2.5:this.names=new Array(st.numberOfGlyphs);for(var Mt=0;Mt<st.numberOfGlyphs;Mt++)this.names[Mt]=Tr[Mt+st.glyphNameIndex[Mt]];break;default:this.names=[]}}Dr.prototype.charToGlyphIndex=function(st){var _t=st.codePointAt(0),Mt=this.font.glyphs;if(Mt){for(var Ot=0;Ot<Mt.length;Ot+=1)for(var zt=Mt.get(Ot),Xt=0;Xt<zt.unicodes.length;Xt+=1)if(zt.unicodes[Xt]===_t)return Ot}return null},zr.prototype.charToGlyphIndex=function(st){return this.cmap.glyphIndexMap[st.codePointAt(0)]||0},fn.prototype.charToGlyphIndex=function(st){return st=st.codePointAt(0),st=this.encoding[st],this.charset.indexOf(st)},vn.prototype.nameToGlyphIndex=function(st){return this.names.indexOf(st)},vn.prototype.glyphIndexToName=function(st){return this.names[st]};var _n={line:function(st,_t,Mt,Ot,zt){st.beginPath(),st.moveTo(_t,Mt),st.lineTo(Ot,zt),st.stroke()}};function wn(st){this.bindConstructorValues(st)}function An(st,_t,Mt){Object.defineProperty(st,_t,{get:function(){return st.path,st[Mt]},set:function(Ot){st[Mt]=Ot},enumerable:!0,configurable:!0})}function Cn(st,_t){if(this.font=st,this.glyphs={},Array.isArray(_t))for(var Mt=0;Mt<_t.length;Mt++)this.glyphs[Mt]=_t[Mt];this.length=_t&&_t.length||0}wn.prototype.bindConstructorValues=function(st){var _t;this.index=st.index||0,this.name=st.name||null,this.unicode=st.unicode||void 0,this.unicodes=st.unicodes||st.unicode!==void 0?[st.unicode]:[],st.xMin&&(this.xMin=st.xMin),st.yMin&&(this.yMin=st.yMin),st.xMax&&(this.xMax=st.xMax),st.yMax&&(this.yMax=st.yMax),st.advanceWidth&&(this.advanceWidth=st.advanceWidth),Object.defineProperty(this,"path",(st=st.path,_t=st||new Yt,{configurable:!0,get:function(){return _t=typeof _t=="function"?_t():_t},set:function(Mt){_t=Mt}}))},wn.prototype.addUnicode=function(st){this.unicodes.length===0&&(this.unicode=st),this.unicodes.push(st)},wn.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},wn.prototype.getPath=function(st,_t,Mt,Ot,zt){st=st!==void 0?st:0,_t=_t!==void 0?_t:0,Mt=Mt!==void 0?Mt:72;for(var Xt,$t,fr=(Ot=Ot||{}).xScale,wr=Ot.yScale,xr=((Xt=Ot.hinting&&zt&&zt.hinting?this.path&&zt.hinting.exec(this,Mt):Xt)?($t=zt.hinting.getCommands(Xt),st=Math.round(st),_t=Math.round(_t),fr=wr=1):($t=this.path.commands,Ot=1/this.path.unitsPerEm*Mt,fr===void 0&&(fr=Ot),wr===void 0&&(wr=Ot)),new Yt),Rr=0;Rr<$t.length;Rr+=1){var Wr=$t[Rr];Wr.type==="M"?xr.moveTo(st+Wr.x*fr,_t+-Wr.y*wr):Wr.type==="L"?xr.lineTo(st+Wr.x*fr,_t+-Wr.y*wr):Wr.type==="Q"?xr.quadraticCurveTo(st+Wr.x1*fr,_t+-Wr.y1*wr,st+Wr.x*fr,_t+-Wr.y*wr):Wr.type==="C"?xr.curveTo(st+Wr.x1*fr,_t+-Wr.y1*wr,st+Wr.x2*fr,_t+-Wr.y2*wr,st+Wr.x*fr,_t+-Wr.y*wr):Wr.type==="Z"&&xr.closePath()}return xr},wn.prototype.getContours=function(){if(this.points===void 0)return[];for(var st=[],_t=[],Mt=0;Mt<this.points.length;Mt+=1){var Ot=this.points[Mt];_t.push(Ot),Ot.lastPointOfContour&&(st.push(_t),_t=[])}return Rt.argument(_t.length===0,"There are still points left in the current contour."),st},wn.prototype.getMetrics=function(){for(var st=this.path.commands,_t=[],Mt=[],Ot=0;Ot<st.length;Ot+=1){var zt=st[Ot];zt.type!=="Z"&&(_t.push(zt.x),Mt.push(zt.y)),zt.type!=="Q"&&zt.type!=="C"||(_t.push(zt.x1),Mt.push(zt.y1)),zt.type==="C"&&(_t.push(zt.x2),Mt.push(zt.y2))}var Xt={xMin:Math.min.apply(null,_t),yMin:Math.min.apply(null,Mt),xMax:Math.max.apply(null,_t),yMax:Math.max.apply(null,Mt),leftSideBearing:this.leftSideBearing};return isFinite(Xt.xMin)||(Xt.xMin=0),isFinite(Xt.xMax)||(Xt.xMax=this.advanceWidth),isFinite(Xt.yMin)||(Xt.yMin=0),isFinite(Xt.yMax)||(Xt.yMax=0),Xt.rightSideBearing=this.advanceWidth-Xt.leftSideBearing-(Xt.xMax-Xt.xMin),Xt},wn.prototype.draw=function(st,_t,Mt,Ot,zt){this.getPath(_t,Mt,Ot,zt).draw(st)},wn.prototype.drawPoints=function(st,_t,Mt,Ot){function zt(Rr,Wr,Fr,Mr){var hn=2*Math.PI;st.beginPath();for(var tn=0;tn<Rr.length;tn+=1)st.moveTo(Wr+Rr[tn].x*Mr,Fr+Rr[tn].y*Mr),st.arc(Wr+Rr[tn].x*Mr,Fr+Rr[tn].y*Mr,2,0,hn,!1);st.closePath(),st.fill()}_t=_t!==void 0?_t:0,Mt=Mt!==void 0?Mt:0;for(var Ot=1/this.path.unitsPerEm*(Ot=Ot!==void 0?Ot:24),Xt=[],$t=[],fr=this.path,wr=0;wr<fr.commands.length;wr+=1){var xr=fr.commands[wr];xr.x!==void 0&&Xt.push({x:xr.x,y:-xr.y}),xr.x1!==void 0&&$t.push({x:xr.x1,y:-xr.y1}),xr.x2!==void 0&&$t.push({x:xr.x2,y:-xr.y2})}st.fillStyle="blue",zt(Xt,_t,Mt,Ot),st.fillStyle="red",zt($t,_t,Mt,Ot)},wn.prototype.drawMetrics=function(st,_t,Mt,Ot){_t=_t!==void 0?_t:0,Mt=Mt!==void 0?Mt:0,Ot=1/this.path.unitsPerEm*(Ot=Ot!==void 0?Ot:24),st.lineWidth=1,st.strokeStyle="black",_n.line(st,_t,-1e4,_t,1e4),_n.line(st,-1e4,Mt,1e4,Mt);var zt=this.xMin||0,Xt=this.yMin||0,$t=this.xMax||0,fr=this.yMax||0,wr=this.advanceWidth||0;st.strokeStyle="blue",_n.line(st,_t+zt*Ot,-1e4,_t+zt*Ot,1e4),_n.line(st,_t+$t*Ot,-1e4,_t+$t*Ot,1e4),_n.line(st,-1e4,Mt+-Xt*Ot,1e4,Mt+-Xt*Ot),_n.line(st,-1e4,Mt+-fr*Ot,1e4,Mt+-fr*Ot),st.strokeStyle="green",_n.line(st,_t+wr*Ot,-1e4,_t+wr*Ot,1e4)},Cn.prototype.get=function(st){return typeof this.glyphs[st]=="function"&&(this.glyphs[st]=this.glyphs[st]()),this.glyphs[st]},Cn.prototype.push=function(st,_t){this.glyphs[st]=_t,this.length++};var En={GlyphSet:Cn,glyphLoader:function(st,_t){return new wn({index:_t,font:st})},ttfGlyphLoader:function(st,_t,Mt,Ot,zt,Xt){return function(){var $t=new wn({index:_t,font:st});return $t.path=function(){Mt($t,Ot,zt);var fr=Xt(st.glyphs,$t);return fr.unitsPerEm=st.unitsPerEm,fr},An($t,"xMin","_xMin"),An($t,"xMax","_xMax"),An($t,"yMin","_yMin"),An($t,"yMax","_yMax"),$t}},cffGlyphLoader:function(st,_t,Mt,Ot){return function(){var zt=new wn({index:_t,font:st});return zt.path=function(){var Xt=Mt(st,zt,Ot);return Xt.unitsPerEm=st.unitsPerEm,Xt},zt}}};function Tn(st){return st=st.length<1240?107:st.length<33900?1131:32768,st}function Mn(st,_t,Mt){var Ot,zt=[],Xt=[],$t=Cr.getCard16(st,_t);if($t!==0){for(var fr=Cr.getByte(st,_t+2),wr=_t+($t+1)*fr+2,xr=_t+3,Rr=0;Rr<$t+1;Rr+=1)zt.push(Cr.getOffset(st,xr,fr)),xr+=fr;Ot=wr+zt[$t]}else Ot=_t+2;for(var Wr=0;Wr<zt.length-1;Wr+=1){var Fr=Cr.getBytes(st,wr+zt[Wr],wr+zt[Wr+1]);Mt&&(Fr=Mt(Fr)),Xt.push(Fr)}return{objects:Xt,startOffset:_t,endOffset:Ot}}function Ft(st,_t){if(_t===28)return st.parseByte()<<8|st.parseByte();if(_t===29)return st.parseByte()<<24|st.parseByte()<<16|st.parseByte()<<8|st.parseByte();if(_t===30){for(var Mt=st,Ot="",zt=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var $t=Mt.parseByte(),Xt=$t>>4,$t=15&$t;if(Xt==15||(Ot+=zt[Xt],$t==15))break;Ot+=zt[$t]}return parseFloat(Ot)}if(32<=_t&&_t<=246)return _t-139;if(247<=_t&&_t<=250)return 256*(_t-247)+st.parseByte()+108;if(251<=_t&&_t<=254)return 256*-(_t-251)-st.parseByte()-108;throw new Error("Invalid b0 "+_t)}function Tt(st,_t,Mt){var Ot=new Cr.Parser(st,_t=_t!==void 0?_t:0),zt=[],Xt=[];for(Mt=Mt!==void 0?Mt:st.length;Ot.relativeOffset<Mt;){var $t=Ot.parseByte();$t<=21?($t===12&&($t=1200+Ot.parseByte()),zt.push([$t,Xt]),Xt=[]):Xt.push(Ft(Ot,$t))}for(var fr=zt,wr={},xr=0;xr<fr.length;xr+=1){var Rr=fr[xr][0],Wr=fr[xr][1],Fr=void 0,Fr=Wr.length===1?Wr[0]:Wr;if(wr.hasOwnProperty(Rr)&&!isNaN(wr[Rr]))throw new Error("Object "+wr+" already has key "+Rr);wr[Rr]=Fr}return wr}function jt(st,_t){return _t=_t<=390?ar[_t]:st[_t-391]}function xt(st,_t,Mt){for(var Ot,zt={},Xt=0;Xt<_t.length;Xt+=1){var $t=_t[Xt];if(Array.isArray($t.type)){var fr=[];fr.length=$t.type.length;for(var wr=0;wr<$t.type.length;wr++)(Ot=st[$t.op]!==void 0?st[$t.op][wr]:void 0)===void 0&&(Ot=$t.value!==void 0&&$t.value[wr]!==void 0?$t.value[wr]:null),$t.type[wr]==="SID"&&(Ot=jt(Mt,Ot)),fr[wr]=Ot;zt[$t.name]=fr}else(Ot=st[$t.op])===void 0&&(Ot=$t.value!==void 0?$t.value:null),$t.type==="SID"&&(Ot=jt(Mt,Ot)),zt[$t.name]=Ot}return zt}var At=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Bt=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function lr(st,_t,Mt,Ot){return xt(Tt(st,_t,Mt),Bt,Ot)}function hr(st,_t,Mt,Ot){for(var zt=[],Xt=0;Xt<Mt.length;Xt+=1){var $t=new DataView(new Uint8Array(Mt[Xt]).buffer),$t=(fr=Ot,xt(Tt($t,0,$t.byteLength),At,fr)),fr=($t._subrs=[],$t._subrsBias=0,$t.private[0]),wr=$t.private[1];fr!==0&&wr!==0&&(fr=lr(st,wr+_t,fr,Ot),$t._defaultWidthX=fr.defaultWidthX,$t._nominalWidthX=fr.nominalWidthX,fr.subrs!==0&&(wr=Mn(st,wr+fr.subrs+_t),$t._subrs=wr.objects,$t._subrsBias=Tn($t._subrs)),$t._privateDict=fr),zt.push($t)}return zt}function dr(st,_t,Mt){var Ot,zt,Xt,$t,fr,wr,xr,Rr,Wr,Fr=new Yt,Mr=[],hn=0,tn=!1,un=!1,Zr=0,Qr=0,On=(Wr=(st.isCIDFont?(fr=st.tables.cff.topDict._fdSelect[_t.index],fr=st.tables.cff.topDict._fdArray[fr],wr=fr._subrs,xr=fr._subrsBias,Rr=fr._defaultWidthX,fr):(wr=st.tables.cff.topDict._subrs,xr=st.tables.cff.topDict._subrsBias,Rr=st.tables.cff.topDict._defaultWidthX,st.tables.cff.topDict))._nominalWidthX,Rr);function Un(In,Vn){un&&Fr.closePath(),Fr.moveTo(In,Vn),un=!0}function Ln(){Mr.length%2==0||tn||(On=Mr.shift()+Wr),hn+=Mr.length>>1,Mr.length=0,tn=!0}return function In(Vn){for(var hi,Qn,bi,Bi,Fi,ta,ai,si,ni,Ei,gi,Ti,ui=0;ui<Vn.length;){var Ri=Vn[ui];switch(ui+=1,Ri){case 1:case 3:Ln();break;case 4:1<Mr.length&&!tn&&(On=Mr.shift()+Wr,tn=!0),Qr+=Mr.pop(),Un(Zr,Qr);break;case 5:for(;0<Mr.length;)Zr+=Mr.shift(),Qr+=Mr.shift(),Fr.lineTo(Zr,Qr);break;case 6:for(;0<Mr.length&&(Zr+=Mr.shift(),Fr.lineTo(Zr,Qr),Mr.length!==0);)Qr+=Mr.shift(),Fr.lineTo(Zr,Qr);break;case 7:for(;0<Mr.length&&(Qr+=Mr.shift(),Fr.lineTo(Zr,Qr),Mr.length!==0);)Zr+=Mr.shift(),Fr.lineTo(Zr,Qr);break;case 8:for(;0<Mr.length;)Ot=Zr+Mr.shift(),zt=Qr+Mr.shift(),Xt=Ot+Mr.shift(),$t=zt+Mr.shift(),Zr=Xt+Mr.shift(),Qr=$t+Mr.shift(),Fr.curveTo(Ot,zt,Xt,$t,Zr,Qr);break;case 10:Fi=Mr.pop()+xr,(ta=wr[Fi])&&In(ta);break;case 11:return;case 12:switch(Ri=Vn[ui],ui+=1,Ri){case 35:Ot=Zr+Mr.shift(),zt=Qr+Mr.shift(),Xt=Ot+Mr.shift(),$t=zt+Mr.shift(),ai=Xt+Mr.shift(),si=$t+Mr.shift(),ni=ai+Mr.shift(),Ei=si+Mr.shift(),gi=ni+Mr.shift(),Ti=Ei+Mr.shift(),Zr=gi+Mr.shift(),Qr=Ti+Mr.shift(),Mr.shift(),Fr.curveTo(Ot,zt,Xt,$t,ai,si),Fr.curveTo(ni,Ei,gi,Ti,Zr,Qr);break;case 34:Ot=Zr+Mr.shift(),zt=Qr,Xt=Ot+Mr.shift(),$t=zt+Mr.shift(),ai=Xt+Mr.shift(),si=$t,ni=ai+Mr.shift(),Ei=$t,gi=ni+Mr.shift(),Ti=Qr,Zr=gi+Mr.shift(),Fr.curveTo(Ot,zt,Xt,$t,ai,si),Fr.curveTo(ni,Ei,gi,Ti,Zr,Qr);break;case 36:Ot=Zr+Mr.shift(),zt=Qr+Mr.shift(),Xt=Ot+Mr.shift(),$t=zt+Mr.shift(),ai=Xt+Mr.shift(),si=$t,ni=ai+Mr.shift(),Ei=$t,gi=ni+Mr.shift(),Ti=Ei+Mr.shift(),Zr=gi+Mr.shift(),Fr.curveTo(Ot,zt,Xt,$t,ai,si),Fr.curveTo(ni,Ei,gi,Ti,Zr,Qr);break;case 37:Ot=Zr+Mr.shift(),zt=Qr+Mr.shift(),Xt=Ot+Mr.shift(),$t=zt+Mr.shift(),ai=Xt+Mr.shift(),si=$t+Mr.shift(),ni=ai+Mr.shift(),Ei=si+Mr.shift(),gi=ni+Mr.shift(),Ti=Ei+Mr.shift(),Math.abs(gi-Zr)>Math.abs(Ti-Qr)?Zr=gi+Mr.shift():Qr=Ti+Mr.shift(),Fr.curveTo(Ot,zt,Xt,$t,ai,si),Fr.curveTo(ni,Ei,gi,Ti,Zr,Qr);break;default:console.log("Glyph "+_t.index+": unknown operator 1200"+Ri),Mr.length=0}break;case 14:0<Mr.length&&!tn&&(On=Mr.shift()+Wr,tn=!0),un&&(Fr.closePath(),un=!1);break;case 18:Ln();break;case 19:case 20:Ln(),ui+=hn+7>>3;break;case 21:2<Mr.length&&!tn&&(On=Mr.shift()+Wr,tn=!0),Qr+=Mr.pop(),Un(Zr+=Mr.pop(),Qr);break;case 22:1<Mr.length&&!tn&&(On=Mr.shift()+Wr,tn=!0),Un(Zr+=Mr.pop(),Qr);break;case 23:Ln();break;case 24:for(;2<Mr.length;)Ot=Zr+Mr.shift(),zt=Qr+Mr.shift(),Xt=Ot+Mr.shift(),$t=zt+Mr.shift(),Zr=Xt+Mr.shift(),Qr=$t+Mr.shift(),Fr.curveTo(Ot,zt,Xt,$t,Zr,Qr);Zr+=Mr.shift(),Qr+=Mr.shift(),Fr.lineTo(Zr,Qr);break;case 25:for(;6<Mr.length;)Zr+=Mr.shift(),Qr+=Mr.shift(),Fr.lineTo(Zr,Qr);Ot=Zr+Mr.shift(),zt=Qr+Mr.shift(),Xt=Ot+Mr.shift(),$t=zt+Mr.shift(),Zr=Xt+Mr.shift(),Qr=$t+Mr.shift(),Fr.curveTo(Ot,zt,Xt,$t,Zr,Qr);break;case 26:for(Mr.length%2&&(Zr+=Mr.shift());0<Mr.length;)Ot=Zr,zt=Qr+Mr.shift(),Xt=Ot+Mr.shift(),$t=zt+Mr.shift(),Zr=Xt,Qr=$t+Mr.shift(),Fr.curveTo(Ot,zt,Xt,$t,Zr,Qr);break;case 27:for(Mr.length%2&&(Qr+=Mr.shift());0<Mr.length;)Ot=Zr+Mr.shift(),zt=Qr,Xt=Ot+Mr.shift(),$t=zt+Mr.shift(),Zr=Xt+Mr.shift(),Qr=$t,Fr.curveTo(Ot,zt,Xt,$t,Zr,Qr);break;case 28:hi=Vn[ui],Qn=Vn[ui+1],Mr.push((hi<<24|Qn<<16)>>16),ui+=2;break;case 29:Fi=Mr.pop()+st.gsubrsBias,(ta=st.gsubrs[Fi])&&In(ta);break;case 30:for(;0<Mr.length&&(Ot=Zr,zt=Qr+Mr.shift(),Xt=Ot+Mr.shift(),$t=zt+Mr.shift(),Zr=Xt+Mr.shift(),Qr=$t+(Mr.length===1?Mr.shift():0),Fr.curveTo(Ot,zt,Xt,$t,Zr,Qr),Mr.length!==0);)Ot=Zr+Mr.shift(),zt=Qr,Xt=Ot+Mr.shift(),$t=zt+Mr.shift(),Qr=$t+Mr.shift(),Zr=Xt+(Mr.length===1?Mr.shift():0),Fr.curveTo(Ot,zt,Xt,$t,Zr,Qr);break;case 31:for(;0<Mr.length&&(Ot=Zr+Mr.shift(),zt=Qr,Xt=Ot+Mr.shift(),$t=zt+Mr.shift(),Qr=$t+Mr.shift(),Zr=Xt+(Mr.length===1?Mr.shift():0),Fr.curveTo(Ot,zt,Xt,$t,Zr,Qr),Mr.length!==0);)Ot=Zr,zt=Qr+Mr.shift(),Xt=Ot+Mr.shift(),$t=zt+Mr.shift(),Zr=Xt+Mr.shift(),Qr=$t+(Mr.length===1?Mr.shift():0),Fr.curveTo(Ot,zt,Xt,$t,Zr,Qr);break;default:Ri<32?console.log("Glyph "+_t.index+": unknown operator "+Ri):Ri<247?Mr.push(Ri-139):Ri<251?(hi=Vn[ui],ui+=1,Mr.push(256*(Ri-247)+hi+108)):Ri<255?(hi=Vn[ui],ui+=1,Mr.push(256*-(Ri-251)-hi-108)):(hi=Vn[ui],Qn=Vn[ui+1],bi=Vn[ui+2],Bi=Vn[ui+3],ui+=4,Mr.push((hi<<24|Qn<<16|bi<<8|Bi)/65536))}}}(Mt),_t.advanceWidth=On,Fr}function vr(st,_t){var Mt,Ot=ar.indexOf(st);return 0<=Ot&&(Mt=Ot),0<=(Ot=_t.indexOf(st))?Mt=Ot+ar.length:(Mt=ar.length+_t.length,_t.push(st)),Mt}function Ur(st,_t,Mt){for(var Ot={},zt=0;zt<st.length;zt+=1){var Xt=st[zt],$t=_t[Xt.name];$t===void 0||function fr(wr,xr){if(wr===xr)return 1;if(Array.isArray(wr)&&Array.isArray(xr)&&wr.length===xr.length){for(var Rr=0;Rr<wr.length;Rr+=1)if(!fr(wr[Rr],xr[Rr]))return;return 1}}($t,Xt.value)||(Xt.type==="SID"&&($t=vr($t,Mt)),Ot[Xt.op]={name:Xt.name,type:Xt.type,value:$t})}return Ot}function Ar(st,_t){var Mt=new kr.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return Mt.dict=Ur(At,st,_t),Mt}function an(st){var _t=new kr.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return _t.topDicts=[{name:"topDict_0",type:"TABLE",value:st}],_t}function pn(st){for(var _t=new kr.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),Mt=0;Mt<st.length;Mt+=1){var Ot=st.get(Mt),zt=function(Xt){for(var $t=[],fr=Xt.path,wr=($t.push({name:"width",type:"NUMBER",value:Xt.advanceWidth}),0),xr=0,Rr=0;Rr<fr.commands.length;Rr+=1){var Wr,Fr,Mr,hn,tn=void 0,un=void 0,Zr=fr.commands[Rr];(Zr=Zr.type==="Q"?{type:"C",x:Zr.x,y:Zr.y,x1:1/3*wr+2/3*Zr.x1,y1:1/3*xr+2/3*Zr.y1,x2:1/3*Zr.x+2/3*Zr.x1,y2:1/3*Zr.y+2/3*Zr.y1}:Zr).type==="M"?(tn=Math.round(Zr.x-wr),un=Math.round(Zr.y-xr),$t.push({name:"dx",type:"NUMBER",value:tn}),$t.push({name:"dy",type:"NUMBER",value:un}),$t.push({name:"rmoveto",type:"OP",value:21}),wr=Math.round(Zr.x),xr=Math.round(Zr.y)):Zr.type==="L"?(tn=Math.round(Zr.x-wr),un=Math.round(Zr.y-xr),$t.push({name:"dx",type:"NUMBER",value:tn}),$t.push({name:"dy",type:"NUMBER",value:un}),$t.push({name:"rlineto",type:"OP",value:5}),wr=Math.round(Zr.x),xr=Math.round(Zr.y)):Zr.type==="C"&&(Wr=Math.round(Zr.x1-wr),Fr=Math.round(Zr.y1-xr),Mr=Math.round(Zr.x2-Zr.x1),hn=Math.round(Zr.y2-Zr.y1),tn=Math.round(Zr.x-Zr.x2),un=Math.round(Zr.y-Zr.y2),$t.push({name:"dx1",type:"NUMBER",value:Wr}),$t.push({name:"dy1",type:"NUMBER",value:Fr}),$t.push({name:"dx2",type:"NUMBER",value:Mr}),$t.push({name:"dy2",type:"NUMBER",value:hn}),$t.push({name:"dx",type:"NUMBER",value:tn}),$t.push({name:"dy",type:"NUMBER",value:un}),$t.push({name:"rrcurveto",type:"OP",value:8}),wr=Math.round(Zr.x),xr=Math.round(Zr.y))}return $t.push({name:"endchar",type:"OP",value:14}),$t}(Ot);_t.charStrings.push({name:Ot.name,type:"CHARSTRING",value:zt})}return _t}var Jr={parse:function(st,_t,Mt){Mt.tables.cff={},fr=st,Ot=_t,(zt={}).formatMajor=Cr.getCard8(fr,Ot),zt.formatMinor=Cr.getCard8(fr,Ot+1),zt.size=Cr.getCard8(fr,Ot+2),zt.offsetSize=Cr.getCard8(fr,Ot+3),zt.startOffset=Ot,zt.endOffset=Ot+4;var fr=Mn(st,zt.endOffset,Cr.bytesToString),Ot=Mn(st,fr.endOffset),zt=Mn(st,Ot.endOffset,Cr.bytesToString),fr=Mn(st,zt.endOffset);if(Mt.gsubrs=fr.objects,Mt.gsubrsBias=Tn(Mt.gsubrs),(fr=hr(st,_t,Ot.objects,zt.objects)).length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+fr.length);if(Ot=fr[0],(Mt.tables.cff.topDict=Ot)._privateDict&&(Mt.defaultWidthX=Ot._privateDict.defaultWidthX,Mt.nominalWidthX=Ot._privateDict.nominalWidthX),Ot.ros[0]!==void 0&&Ot.ros[1]!==void 0&&(Mt.isCIDFont=!0),Mt.isCIDFont){var fr=Ot.fdArray,Xt=Ot.fdSelect;if(fr===0||Xt===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");fr=hr(st,_t,Mn(st,fr+=_t).objects,zt.objects),Ot._fdArray=fr,Ot._fdSelect=function(Fr,Mr,hn,tn){var un,Zr=[],Qr=new Cr.Parser(Fr,Mr);if((Fr=Qr.parseCard8())===0)for(var On=0;On<hn;On++){if(tn<=(un=Qr.parseCard8()))throw new Error("CFF table CID Font FDSelect has bad FD index value "+un+" (FD count "+tn+")");Zr.push(un)}else{if(Fr!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+Fr);var Un,Ln=Qr.parseCard16(),In=Qr.parseCard16();if(In!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+In);for(var Vn=0;Vn<Ln;Vn++){if(un=Qr.parseCard8(),Un=Qr.parseCard16(),tn<=un)throw new Error("CFF table CID Font FDSelect has bad FD index value "+un+" (FD count "+tn+")");if(hn<Un)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+Un);for(;In<Un;In++)Zr.push(un);In=Un}if(Un!==hn)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+Un)}return Zr}(st,Xt+=_t,Mt.numGlyphs,fr.length)}var Xt=_t+Ot.private[1],fr=lr(st,Xt,Ot.private[0],zt.objects),$t=(Mt.defaultWidthX=fr.defaultWidthX,Mt.nominalWidthX=fr.nominalWidthX,fr.subrs!==0?(Xt=Mn(st,Xt+fr.subrs),Mt.subrs=Xt.objects,Mt.subrsBias=Tn(Mt.subrs)):(Mt.subrs=[],Mt.subrsBias=0),Mn(st,_t+Ot.charStrings)),fr=(Mt.nGlyphs=$t.objects.length,function(Rr,Wr,Fr,Mr){var hn=new Cr.Parser(Rr,Wr),tn=(--Fr,[".notdef"]);if((Rr=hn.parseCard8())===0)for(var un=0;un<Fr;un+=1)Zr=hn.parseSID(),tn.push(jt(Mr,Zr));else if(Rr===1)for(;tn.length<=Fr;)for(var Zr=hn.parseSID(),Qr=hn.parseCard8(),On=0;On<=Qr;On+=1)tn.push(jt(Mr,Zr)),Zr+=1;else{if(Rr!==2)throw new Error("Unknown charset format "+Rr);for(;tn.length<=Fr;){Zr=hn.parseSID(),Qr=hn.parseCard16();for(var Un=0;Un<=Qr;Un+=1)tn.push(jt(Mr,Zr)),Zr+=1}}return tn}(st,_t+Ot.charset,Mt.nGlyphs,zt.objects));Ot.encoding===0?Mt.cffEncoding=new fn(Kt,fr):Ot.encoding===1?Mt.cffEncoding=new fn(cr,fr):Mt.cffEncoding=function(Rr,Wr,Fr){var Mr={},hn=new Cr.Parser(Rr,Wr);if((Rr=hn.parseCard8())===0)for(var tn=hn.parseCard8(),un=0;un<tn;un+=1)Mr[Qr=hn.parseCard8()]=un;else{if(Rr!==1)throw new Error("Unknown encoding format "+Rr);for(var Zr=hn.parseCard8(),Qr=1,On=0;On<Zr;On+=1)for(var Un=hn.parseCard8(),Ln=hn.parseCard8(),In=Un;In<=Un+Ln;In+=1)Mr[In]=Qr,Qr+=1}return new fn(Mr,Fr)}(st,_t+Ot.encoding,fr),Mt.encoding=Mt.encoding||Mt.cffEncoding,Mt.glyphs=new En.GlyphSet(Mt);for(var wr=0;wr<Mt.nGlyphs;wr+=1){var xr=$t.objects[wr];Mt.glyphs.push(wr,En.cffGlyphLoader(Mt,wr,dr,xr))}},make:function(st,Rr){for(var Mt,Ot=new kr.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),zt=1/Rr.unitsPerEm,zt={version:Rr.version,fullName:Rr.fullName,familyName:Rr.familyName,weight:Rr.weightName,fontBBox:Rr.fontBBox||[0,0,0,0],fontMatrix:[zt,0,0,zt,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},Xt=[],$t=1;$t<st.length;$t+=1)Mt=st.get($t),Xt.push(Mt.name);var fr,wr,xr=[],Rr=(Ot.header=new kr.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),Ot.nameIndex=function(Fr){var Mr=new kr.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);Mr.names=[];for(var hn=0;hn<Fr.length;hn+=1)Mr.names.push({name:"name_"+hn,type:"NAME",value:Fr[hn]});return Mr}([Rr.postScriptName]),Ar(zt,xr)),Wr=(Ot.topDictIndex=an(Rr),Ot.globalSubrIndex=new kr.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),Ot.charsets=function(Fr,Mr){for(var hn=new kr.Record("Charsets",[{name:"format",type:"Card8",value:0}]),tn=0;tn<Fr.length;tn+=1){var un=vr(Fr[tn],Mr);hn.fields.push({name:"glyph_"+tn,type:"SID",value:un})}return hn}(Xt,xr),Ot.charStringsIndex=pn(st),Ot.privateDict=(Wr={},fr=xr,(wr=new kr.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}])).dict=Ur(Bt,Wr,fr),wr),Ot.stringIndex=function(Fr){var Mr=new kr.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);Mr.strings=[];for(var hn=0;hn<Fr.length;hn+=1)Mr.strings.push({name:"string_"+hn,type:"STRING",value:Fr[hn]});return Mr}(xr),Ot.header.sizeOf()+Ot.nameIndex.sizeOf()+Ot.topDictIndex.sizeOf()+Ot.stringIndex.sizeOf()+Ot.globalSubrIndex.sizeOf());return zt.charset=Wr,zt.encoding=0,zt.charStrings=zt.charset+Ot.charsets.sizeOf(),zt.private[1]=zt.charStrings+Ot.charStringsIndex.sizeOf(),Rr=Ar(zt,xr),Ot.topDictIndex=an(Rr),Ot}},on={parse:function(Ot,_t){var Mt={},Ot=new Cr.Parser(Ot,_t);return Mt.version=Ot.parseVersion(),Mt.fontRevision=Math.round(1e3*Ot.parseFixed())/1e3,Mt.checkSumAdjustment=Ot.parseULong(),Mt.magicNumber=Ot.parseULong(),Rt.argument(Mt.magicNumber===1594834165,"Font header has wrong magic number."),Mt.flags=Ot.parseUShort(),Mt.unitsPerEm=Ot.parseUShort(),Mt.created=Ot.parseLongDateTime(),Mt.modified=Ot.parseLongDateTime(),Mt.xMin=Ot.parseShort(),Mt.yMin=Ot.parseShort(),Mt.xMax=Ot.parseShort(),Mt.yMax=Ot.parseShort(),Mt.macStyle=Ot.parseUShort(),Mt.lowestRecPPEM=Ot.parseUShort(),Mt.fontDirectionHint=Ot.parseShort(),Mt.indexToLocFormat=Ot.parseShort(),Mt.glyphDataFormat=Ot.parseShort(),Mt},make:function(st){var _t=Math.round(new Date().getTime()/1e3)+2082844800,Mt=_t;return st.createdTimestamp&&(Mt=st.createdTimestamp+2082844800),new kr.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:Mt},{name:"modified",type:"LONGDATETIME",value:_t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],st)}},mr={parse:function(Ot,_t){var Mt={},Ot=new Cr.Parser(Ot,_t);return Mt.version=Ot.parseVersion(),Mt.ascender=Ot.parseShort(),Mt.descender=Ot.parseShort(),Mt.lineGap=Ot.parseShort(),Mt.advanceWidthMax=Ot.parseUShort(),Mt.minLeftSideBearing=Ot.parseShort(),Mt.minRightSideBearing=Ot.parseShort(),Mt.xMaxExtent=Ot.parseShort(),Mt.caretSlopeRise=Ot.parseShort(),Mt.caretSlopeRun=Ot.parseShort(),Mt.caretOffset=Ot.parseShort(),Ot.relativeOffset+=8,Mt.metricDataFormat=Ot.parseShort(),Mt.numberOfHMetrics=Ot.parseUShort(),Mt},make:function(st){return new kr.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],st)}},gr={parse:function(st,_t,Mt,Ot,zt){for(var Xt,$t,fr=new Cr.Parser(st,_t),wr=0;wr<Ot;wr+=1){wr<Mt&&(Xt=fr.parseUShort(),$t=fr.parseShort());var xr=zt.get(wr);xr.advanceWidth=Xt,xr.leftSideBearing=$t}},make:function(st){for(var _t=new kr.Table("hmtx",[]),Mt=0;Mt<st.length;Mt+=1){var zt=st.get(Mt),Ot=zt.advanceWidth||0,zt=zt.leftSideBearing||0;_t.fields.push({name:"advanceWidth_"+Mt,type:"USHORT",value:Ot}),_t.fields.push({name:"leftSideBearing_"+Mt,type:"SHORT",value:zt})}return _t}},Yr={make:function(st){for(var _t=new kr.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:st.length}]),Mt="",Ot=12+4*st.length,zt=0;zt<st.length;++zt){var Xt=Mt.indexOf(st[zt]);Xt<0&&(Xt=Mt.length,Mt+=st[zt]),_t.fields.push({name:"offset "+zt,type:"USHORT",value:Ot+Xt}),_t.fields.push({name:"length "+zt,type:"USHORT",value:st[zt].length})}return _t.fields.push({name:"stringPool",type:"CHARARRAY",value:Mt}),_t},parse:function(st,_t){for(var Mt=new Cr.Parser(st,_t),Ot=Mt.parseULong(),zt=(Rt.argument(Ot===1,"Unsupported ltag table version."),Mt.skip("uLong",1),Mt.parseULong()),Xt=[],$t=0;$t<zt;$t++){for(var fr="",wr=_t+Mt.parseUShort(),xr=Mt.parseUShort(),Rr=wr;Rr<wr+xr;++Rr)fr+=String.fromCharCode(st.getInt8(Rr));Xt.push(fr)}return Xt}},Hr={parse:function(Ot,_t){var Mt={},Ot=new Cr.Parser(Ot,_t);return Mt.version=Ot.parseVersion(),Mt.numGlyphs=Ot.parseUShort(),Mt.version===1&&(Mt.maxPoints=Ot.parseUShort(),Mt.maxContours=Ot.parseUShort(),Mt.maxCompositePoints=Ot.parseUShort(),Mt.maxCompositeContours=Ot.parseUShort(),Mt.maxZones=Ot.parseUShort(),Mt.maxTwilightPoints=Ot.parseUShort(),Mt.maxStorage=Ot.parseUShort(),Mt.maxFunctionDefs=Ot.parseUShort(),Mt.maxInstructionDefs=Ot.parseUShort(),Mt.maxStackElements=Ot.parseUShort(),Mt.maxSizeOfInstructions=Ot.parseUShort(),Mt.maxComponentElements=Ot.parseUShort(),Mt.maxComponentDepth=Ot.parseUShort()),Mt},make:function(st){return new kr.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:st}])}},Sn=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Kr={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Dn={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},ln={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},jn="utf-16",bn={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Lr={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function cn(st,_t,Mt){switch(st){case 0:return jn;case 1:return Lr[Mt]||bn[_t];case 3:if(_t===1||_t===10)return jn}}function xn(st){var _t,Mt={};for(_t in st)Mt[st[_t]]=parseInt(_t);return Mt}function mn(st,_t,Mt,Ot,zt,Xt){return new kr.Record("NameRecord",[{name:"platformID",type:"USHORT",value:st},{name:"encodingID",type:"USHORT",value:_t},{name:"languageID",type:"USHORT",value:Mt},{name:"nameID",type:"USHORT",value:Ot},{name:"length",type:"USHORT",value:zt},{name:"offset",type:"USHORT",value:Xt}])}function $n(st,_t){if((Mt=function(Xt,$t){var fr=Xt.length,wr=$t.length-fr+1;e:for(var xr=0;xr<wr;xr++)for(;xr<wr;xr++){for(var Rr=0;Rr<fr;Rr++)if($t[xr+Rr]!==Xt[Rr])continue e;return xr}return-1}(st,_t))<0)for(var Mt=_t.length,Ot=0,zt=st.length;Ot<zt;++Ot)_t.push(st[Ot]);return Mt}var Bn={parse:function(st,_t,Mt){for(var Ot={},zt=new Cr.Parser(st,_t),_t=zt.parseUShort(),Xt=zt.parseUShort(),$t=zt.offset+zt.parseUShort(),fr=0;fr<Xt;fr++){var hn=zt.parseUShort(),wr=zt.parseUShort(),xr=zt.parseUShort(),Rr=zt.parseUShort(),Rr=Sn[Rr]||Rr,Wr=zt.parseUShort(),Fr=zt.parseUShort(),Mr=function(un,Zr,Qr){switch(un){case 0:if(Zr===65535)return"und";if(Qr)return Qr[Zr];break;case 1:return Kr[Zr];case 3:return ln[Zr]}}(hn,xr,Mt),hn=cn(hn,wr,xr);hn!==void 0&&Mr!==void 0&&(wr=void 0,(wr=hn===jn?Lt.UTF16(st,$t+Fr,Wr):Lt.MACSTRING(st,$t+Fr,Wr,hn))&&((xr=(xr=Ot[Rr])===void 0?Ot[Rr]={}:xr)[Mr]=wr))}return _t===1&&zt.parseUShort(),Ot},make:function(st,_t){var Mt,Ot=[],zt={},Xt=xn(Sn);for(Mt in st){var $t=Xt[Mt];if($t===void 0&&($t=Mt),Fr=parseInt($t),isNaN(Fr))throw new Error('Name table entry "'+Mt+'" does not exist, see nameTableNames for complete list.');zt[Fr]=st[Mt],Ot.push(Fr)}for(var fr=xn(Kr),wr=xn(ln),xr=[],Rr=[],Wr=0;Wr<Ot.length;Wr++){var Fr,Mr,hn=zt[Fr=Ot[Wr]];for(Mr in hn){var tn=hn[Mr],Un=1,un=fr[Mr],Zr=Dn[un],Qr=cn(Un,Zr,un),Qr=Vt.MACSTRING(tn,Qr),On=(Qr===void 0&&(Un=0,(un=_t.indexOf(Mr))<0&&(un=_t.length,_t.push(Mr)),Zr=4,Qr=Vt.UTF16(tn)),$n(Qr,Rr)),Un=(xr.push(mn(Un,Zr,un,Fr,Qr.length,On)),wr[Mr]);Un!==void 0&&(un=$n(Zr=Vt.UTF16(tn),Rr),xr.push(mn(3,1,Un,Fr,Zr.length,un)))}}xr.sort(function(Vn,hi){return Vn.platformID-hi.platformID||Vn.encodingID-hi.encodingID||Vn.languageID-hi.languageID||Vn.nameID-hi.nameID});for(var Ln=new kr.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:xr.length},{name:"stringOffset",type:"USHORT",value:6+12*xr.length}]),In=0;In<xr.length;In++)Ln.fields.push({name:"record_"+In,type:"RECORD",value:xr[In]});return Ln.fields.push({name:"strings",type:"LITERAL",value:Rr}),Ln}},qn=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],Gn={parse:function(st,_t){var Mt={},Ot=new Cr.Parser(st,_t);Mt.version=Ot.parseUShort(),Mt.xAvgCharWidth=Ot.parseShort(),Mt.usWeightClass=Ot.parseUShort(),Mt.usWidthClass=Ot.parseUShort(),Mt.fsType=Ot.parseUShort(),Mt.ySubscriptXSize=Ot.parseShort(),Mt.ySubscriptYSize=Ot.parseShort(),Mt.ySubscriptXOffset=Ot.parseShort(),Mt.ySubscriptYOffset=Ot.parseShort(),Mt.ySuperscriptXSize=Ot.parseShort(),Mt.ySuperscriptYSize=Ot.parseShort(),Mt.ySuperscriptXOffset=Ot.parseShort(),Mt.ySuperscriptYOffset=Ot.parseShort(),Mt.yStrikeoutSize=Ot.parseShort(),Mt.yStrikeoutPosition=Ot.parseShort(),Mt.sFamilyClass=Ot.parseShort(),Mt.panose=[];for(var zt=0;zt<10;zt++)Mt.panose[zt]=Ot.parseByte();return Mt.ulUnicodeRange1=Ot.parseULong(),Mt.ulUnicodeRange2=Ot.parseULong(),Mt.ulUnicodeRange3=Ot.parseULong(),Mt.ulUnicodeRange4=Ot.parseULong(),Mt.achVendID=String.fromCharCode(Ot.parseByte(),Ot.parseByte(),Ot.parseByte(),Ot.parseByte()),Mt.fsSelection=Ot.parseUShort(),Mt.usFirstCharIndex=Ot.parseUShort(),Mt.usLastCharIndex=Ot.parseUShort(),Mt.sTypoAscender=Ot.parseShort(),Mt.sTypoDescender=Ot.parseShort(),Mt.sTypoLineGap=Ot.parseShort(),Mt.usWinAscent=Ot.parseUShort(),Mt.usWinDescent=Ot.parseUShort(),1<=Mt.version&&(Mt.ulCodePageRange1=Ot.parseULong(),Mt.ulCodePageRange2=Ot.parseULong()),2<=Mt.version&&(Mt.sxHeight=Ot.parseShort(),Mt.sCapHeight=Ot.parseShort(),Mt.usDefaultChar=Ot.parseUShort(),Mt.usBreakChar=Ot.parseUShort(),Mt.usMaxContent=Ot.parseUShort()),Mt},make:function(st){return new kr.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],st)},unicodeRanges:qn,getUnicodeRange:function(st){for(var _t=0;_t<qn.length;_t+=1){var Mt=qn[_t];if(st>=Mt.begin&&st<Mt.end)return _t}return-1}},Ai={parse:function(st,_t){var Mt={},Ot=new Cr.Parser(st,_t);switch(Mt.version=Ot.parseVersion(),Mt.italicAngle=Ot.parseFixed(),Mt.underlinePosition=Ot.parseShort(),Mt.underlineThickness=Ot.parseShort(),Mt.isFixedPitch=Ot.parseULong(),Mt.minMemType42=Ot.parseULong(),Mt.maxMemType42=Ot.parseULong(),Mt.minMemType1=Ot.parseULong(),Mt.maxMemType1=Ot.parseULong(),Mt.version){case 1:Mt.names=Tr.slice();break;case 2:Mt.numberOfGlyphs=Ot.parseUShort(),Mt.glyphNameIndex=new Array(Mt.numberOfGlyphs);for(var zt=0;zt<Mt.numberOfGlyphs;zt++)Mt.glyphNameIndex[zt]=Ot.parseUShort();Mt.names=[];for(var Xt,$t=0;$t<Mt.numberOfGlyphs;$t++)Mt.glyphNameIndex[$t]>=Tr.length&&(Xt=Ot.parseChar(),Mt.names.push(Ot.parseString(Xt)));break;case 2.5:Mt.numberOfGlyphs=Ot.parseUShort(),Mt.offset=new Array(Mt.numberOfGlyphs);for(var fr=0;fr<Mt.numberOfGlyphs;fr++)Mt.offset[fr]=Ot.parseChar()}return Mt},make:function(){return new kr.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},vi=new Array(9),Yn=(vi[1]=function(){var st=this.offset+this.relativeOffset,_t=this.parseUShort();return _t===1?{substFormat:1,coverage:this.parsePointer(Er.coverage),deltaGlyphId:this.parseUShort()}:_t===2?{substFormat:2,coverage:this.parsePointer(Er.coverage),substitute:this.parseOffset16List()}:void Rt.assert(!1,"0x"+st.toString(16)+": lookup type 1 format must be 1 or 2.")},vi[2]=function(){var st=this.parseUShort();return Rt.argument(st===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:st,coverage:this.parsePointer(Er.coverage),sequences:this.parseListOfLists()}},vi[3]=function(){var st=this.parseUShort();return Rt.argument(st===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:st,coverage:this.parsePointer(Er.coverage),alternateSets:this.parseListOfLists()}},vi[4]=function(){var st=this.parseUShort();return Rt.argument(st===1,"GSUB ligature table identifier-format must be 1"),{substFormat:st,coverage:this.parsePointer(Er.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}},{sequenceIndex:Er.uShort,lookupListIndex:Er.uShort});vi[5]=function(){var st,_t,Mt=this.offset+this.relativeOffset,Ot=this.parseUShort();return Ot===1?{substFormat:Ot,coverage:this.parsePointer(Er.coverage),ruleSets:this.parseListOfLists(function(){var zt=this.parseUShort(),Xt=this.parseUShort();return{input:this.parseUShortList(zt-1),lookupRecords:this.parseRecordList(Xt,Yn)}})}:Ot===2?{substFormat:Ot,coverage:this.parsePointer(Er.coverage),classDef:this.parsePointer(Er.classDef),classSets:this.parseListOfLists(function(){var zt=this.parseUShort(),Xt=this.parseUShort();return{classes:this.parseUShortList(zt-1),lookupRecords:this.parseRecordList(Xt,Yn)}})}:Ot===3?(st=this.parseUShort(),_t=this.parseUShort(),{substFormat:Ot,coverages:this.parseList(st,Er.pointer(Er.coverage)),lookupRecords:this.parseRecordList(_t,Yn)}):void Rt.assert(!1,"0x"+Mt.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},vi[6]=function(){var st=this.offset+this.relativeOffset,_t=this.parseUShort();return _t===1?{substFormat:1,coverage:this.parsePointer(Er.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Yn)}})}:_t===2?{substFormat:2,coverage:this.parsePointer(Er.coverage),backtrackClassDef:this.parsePointer(Er.classDef),inputClassDef:this.parsePointer(Er.classDef),lookaheadClassDef:this.parsePointer(Er.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Yn)}})}:_t===3?{substFormat:3,backtrackCoverage:this.parseList(Er.pointer(Er.coverage)),inputCoverage:this.parseList(Er.pointer(Er.coverage)),lookaheadCoverage:this.parseList(Er.pointer(Er.coverage)),lookupRecords:this.parseRecordList(Yn)}:void Rt.assert(!1,"0x"+st.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},vi[7]=function(){var st=this.parseUShort(),st=(Rt.argument(st===1,"GSUB Extension Substitution subtable identifier-format must be 1"),this.parseUShort()),_t=new Er(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:st,extension:vi[st].call(_t)}},vi[8]=function(){var st=this.parseUShort();return Rt.argument(st===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:st,coverage:this.parsePointer(Er.coverage),backtrackCoverage:this.parseList(Er.pointer(Er.coverage)),lookaheadCoverage:this.parseList(Er.pointer(Er.coverage)),substitutes:this.parseUShortList()}};var Gi=new Array(9);Gi[1]=function(st){return st.substFormat===1?new kr.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new kr.Coverage(st.coverage)},{name:"deltaGlyphID",type:"USHORT",value:st.deltaGlyphId}]):new kr.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new kr.Coverage(st.coverage)}].concat(kr.ushortList("substitute",st.substitute)))},Gi[3]=function(st){return Rt.assert(st.substFormat===1,"Lookup type 3 substFormat must be 1."),new kr.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new kr.Coverage(st.coverage)}].concat(kr.tableList("altSet",st.alternateSets,function(_t){return new kr.Table("alternateSetTable",kr.ushortList("alternate",_t))})))},Gi[4]=function(st){return Rt.assert(st.substFormat===1,"Lookup type 4 substFormat must be 1."),new kr.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new kr.Coverage(st.coverage)}].concat(kr.tableList("ligSet",st.ligatureSets,function(_t){return new kr.Table("ligatureSetTable",kr.tableList("ligature",_t,function(Mt){return new kr.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:Mt.ligGlyph}].concat(kr.ushortList("component",Mt.components,Mt.components.length+1)))}))})))};var Qi={parse:function(st,_t){return _t=(st=new Er(st,_t=_t||0)).parseVersion(1),Rt.argument(_t===1||_t===1.1,"Unsupported GSUB table version."),_t===1?{version:_t,scripts:st.parseScriptList(),features:st.parseFeatureList(),lookups:st.parseLookupList(vi)}:{version:_t,scripts:st.parseScriptList(),features:st.parseFeatureList(),lookups:st.parseLookupList(vi),variations:st.parseFeatureVariationsList()}},make:function(st){return new kr.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new kr.ScriptList(st.scripts)},{name:"features",type:"TABLE",value:new kr.FeatureList(st.features)},{name:"lookups",type:"TABLE",value:new kr.LookupList(st.lookups,Gi)}])}},Hn={parse:function(st,_t){for(var Mt=new Cr.Parser(st,_t),Ot=Mt.parseULong(),zt=(Rt.argument(Ot===1,"Unsupported META table version."),Mt.parseULong(),Mt.parseULong(),Mt.parseULong()),Xt={},$t=0;$t<zt;$t++){var fr=Mt.parseTag(),xr=Mt.parseULong(),wr=Mt.parseULong(),xr=Lt.UTF8(st,_t+xr,wr);Xt[fr]=xr}return Xt},make:function(st){var _t,Mt=Object.keys(st).length,Ot="",zt=16+12*Mt,Xt=new kr.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:zt},{name:"numTags",type:"ULONG",value:Mt}]);for(_t in st){var $t=Ot.length;Ot+=st[_t],Xt.fields.push({name:"tag "+_t,type:"TAG",value:_t}),Xt.fields.push({name:"offset "+_t,type:"ULONG",value:zt+$t}),Xt.fields.push({name:"length "+_t,type:"ULONG",value:st[_t].length})}return Xt.fields.push({name:"stringPool",type:"CHARARRAY",value:Ot}),Xt}};function wi(st){return Math.log(st)/Math.log(2)|0}function ki(st){for(;st.length%4!=0;)st.push(0);for(var _t=0,Mt=0;Mt<st.length;Mt+=4)_t+=(st[Mt]<<24)+(st[Mt+1]<<16)+(st[Mt+2]<<8)+st[Mt+3];return _t%=Math.pow(2,32)}function Hi(st,_t,Mt,Ot){return new kr.Record("Table Record",[{name:"tag",type:"TAG",value:st!==void 0?st:""},{name:"checkSum",type:"ULONG",value:_t!==void 0?_t:0},{name:"offset",type:"ULONG",value:Mt!==void 0?Mt:0},{name:"length",type:"ULONG",value:Ot!==void 0?Ot:0}])}function Jn(st){for(var _t=new kr.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),Mt=(_t.tables=st,_t.numTables=st.length,Math.pow(2,wi(_t.numTables))),Ot=(_t.searchRange=16*Mt,_t.entrySelector=wi(Mt),_t.rangeShift=16*_t.numTables-_t.searchRange,[]),zt=[],Xt=_t.sizeOf()+Hi().sizeOf()*_t.numTables;Xt%4!=0;)Xt+=1,zt.push({name:"padding",type:"BYTE",value:0});for(var $t=0;$t<st.length;$t+=1){var fr=st[$t],wr=(Rt.argument(fr.tableName.length===4,"Table name"+fr.tableName+" is invalid."),fr.sizeOf()),xr=Hi(fr.tableName,ki(fr.encode()),Xt,wr);for(Ot.push({name:xr.tag+" Table Record",type:"RECORD",value:xr}),zt.push({name:fr.tableName+" table",type:"RECORD",value:fr}),Xt+=wr,Rt.argument(!isNaN(Xt),"Something went wrong calculating the offset.");Xt%4!=0;)Xt+=1,zt.push({name:"padding",type:"BYTE",value:0})}return Ot.sort(function(Rr,Wr){return Rr.value.tag>Wr.value.tag?1:-1}),_t.fields=_t.fields.concat(Ot),_t.fields=_t.fields.concat(zt),_t}function no(st,_t,Mt){for(var Ot=0;Ot<_t.length;Ot+=1){var zt=st.charToGlyphIndex(_t[Ot]);if(0<zt)return st.glyphs.get(zt).getMetrics()}return Mt}var Jo={make:Jn,fontToTable:function(st){for(var _t,Mt=[],Ot=[],zt=[],Xt=[],$t=[],fr=[],wr=[],xr=0,Rr=0,Wr=0,Fr=0,Mr=0,hn=0;hn<st.glyphs.length;hn+=1){var tn=st.glyphs.get(hn),un=0|tn.unicode;if(isNaN(tn.advanceWidth))throw new Error("Glyph "+tn.name+" ("+hn+"): advanceWidth is not a number.");(un<_t||_t===void 0)&&0<un&&(_t=un),xr<un&&(xr=un);var un=Gn.getUnicodeRange(un);if(un<32)Rr|=1<<un;else if(un<64)Wr|=1<<un-32;else if(un<96)Fr|=1<<un-64;else{if(!(un<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");Mr|=1<<un-96}tn.name!==".notdef"&&(un=tn.getMetrics(),Mt.push(un.xMin),Ot.push(un.yMin),zt.push(un.xMax),Xt.push(un.yMax),fr.push(un.leftSideBearing),wr.push(un.rightSideBearing),$t.push(tn.advanceWidth))}var Zr,Qr={xMin:Math.min.apply(null,Mt),yMin:Math.min.apply(null,Ot),xMax:Math.max.apply(null,zt),yMax:Math.max.apply(null,Xt),advanceWidthMax:Math.max.apply(null,$t),advanceWidthAvg:function(Ri){for(var la=0,ua=0;ua<Ri.length;ua+=1)la+=Ri[ua];return la/Ri.length}($t),minLeftSideBearing:Math.min.apply(null,fr),maxLeftSideBearing:Math.max.apply(null,fr),minRightSideBearing:Math.min.apply(null,wr)},On=(Qr.ascender=st.ascender,Qr.descender=st.descender,on.make({flags:3,unitsPerEm:st.unitsPerEm,xMin:Qr.xMin,yMin:Qr.yMin,xMax:Qr.xMax,yMax:Qr.yMax,lowestRecPPEM:3,createdTimestamp:st.createdTimestamp})),Un=mr.make({ascender:Qr.ascender,descender:Qr.descender,advanceWidthMax:Qr.advanceWidthMax,minLeftSideBearing:Qr.minLeftSideBearing,minRightSideBearing:Qr.minRightSideBearing,xMaxExtent:Qr.maxLeftSideBearing+(Qr.xMax-Qr.xMin),numberOfHMetrics:st.glyphs.length}),Ln=Hr.make(st.glyphs.length),In=Gn.make({xAvgCharWidth:Math.round(Qr.advanceWidthAvg),usWeightClass:st.tables.os2.usWeightClass,usWidthClass:st.tables.os2.usWidthClass,usFirstCharIndex:_t,usLastCharIndex:xr,ulUnicodeRange1:Rr,ulUnicodeRange2:Wr,ulUnicodeRange3:Fr,ulUnicodeRange4:Mr,fsSelection:st.tables.os2.fsSelection,sTypoAscender:Qr.ascender,sTypoDescender:Qr.descender,sTypoLineGap:0,usWinAscent:Qr.yMax,usWinDescent:Math.abs(Qr.yMin),ulCodePageRange1:1,sxHeight:no(st,"xyvw",{yMax:Math.round(Qr.ascender/2)}).yMax,sCapHeight:no(st,"HIKLEFJMNTZBDPRAGOQSUVWXY",Qr).yMax,usDefaultChar:st.hasChar(" ")?32:0,usBreakChar:st.hasChar(" ")?32:0}),Vn=gr.make(st.glyphs),hi=tr.make(st.glyphs),si=st.getEnglishName("fontFamily"),ni=st.getEnglishName("fontSubfamily"),ai=si+" "+ni,Qn=(Qn=st.getEnglishName("postScriptName"))||si.replace(/\s/g,"")+"-"+ni,bi={};for(Zr in st.names)bi[Zr]=st.names[Zr];bi.uniqueID||(bi.uniqueID={en:st.getEnglishName("manufacturer")+":"+ai}),bi.postScriptName||(bi.postScriptName={en:Qn}),bi.preferredFamily||(bi.preferredFamily=st.names.fontFamily),bi.preferredSubfamily||(bi.preferredSubfamily=st.names.fontSubfamily);var Fi=[],Bi=Bn.make(bi,Fi),Fi=0<Fi.length?Yr.make(Fi):void 0,ta=Ai.make(),ai=Jr.make(st.glyphs,{version:st.getEnglishName("version"),fullName:ai,familyName:si,weightName:ni,postScriptName:Qn,unitsPerEm:st.unitsPerEm,fontBBox:[0,Qr.yMin,Qr.ascender,Qr.advanceWidthMax]}),si=st.metas&&0<Object.keys(st.metas).length?Hn.make(st.metas):void 0,ni=[On,Un,Ln,In,Bi,hi,ta,ai,Vn];Fi&&ni.push(Fi),st.tables.gsub&&ni.push(Qi.make(st.tables.gsub)),si&&ni.push(si);for(var Ei=ki((Qn=Jn(ni)).encode()),gi=Qn.fields,Ti=!1,ui=0;ui<gi.length;ui+=1)if(gi[ui].name==="head table"){gi[ui].value.checkSumAdjustment=2981146554-Ei,Ti=!0;break}if(Ti)return Qn;throw new Error("Could not find head table with checkSum to adjust.")},computeCheckSum:ki};function Ua(st,_t){for(var Mt=0,Ot=st.length-1;Mt<=Ot;){var zt=Mt+Ot>>>1,Xt=st[zt].tag;if(Xt===_t)return zt;Xt<_t?Mt=1+zt:Ot=zt-1}return-Mt-1}function ja(st,_t){for(var Mt=0,Ot=st.length-1;Mt<=Ot;){var zt=Mt+Ot>>>1,Xt=st[zt];if(Xt===_t)return zt;Xt<_t?Mt=1+zt:Ot=zt-1}return-Mt-1}function Do(st,_t){for(var Mt=0,Ot=st.length-1;Mt<=Ot;){var zt,Xt=Mt+Ot>>>1,$t=(zt=st[Xt]).start;if($t===_t)return zt;$t<_t?Mt=1+Xt:Ot=Xt-1}if(0<Mt)return _t>(zt=st[Mt-1]).end?0:zt}function za(st,_t){this.font=st,this.tableName=_t}function aa(st){za.call(this,st,"gpos")}function Ji(st){za.call(this,st,"gsub")}function Lo(st,_t,Mt){for(var Ot=st.subtables,zt=0;zt<Ot.length;zt++){var Xt=Ot[zt];if(Xt.substFormat===_t)return Xt}if(Mt)return Ot.push(Mt),Mt}function Ls(st){for(var _t=new ArrayBuffer(st.length),Mt=new Uint8Array(_t),Ot=0;Ot<st.length;++Ot)Mt[Ot]=st[Ot];return _t}function Ca(st,_t){if(!st)throw _t}function jl(st,_t,Mt,Ot,zt){var Xt=0<(_t&Ot)?(Xt=st.parseByte(),Mt+(Xt=(_t&zt)==0?-Xt:Xt)):0<(_t&zt)?Mt:Mt+st.parseShort();return Xt}function Gu(st,_t,Mt){var Ot,zt=new Cr.Parser(_t,Mt);if(st.numberOfContours=zt.parseShort(),st._xMin=zt.parseShort(),st._yMin=zt.parseShort(),st._xMax=zt.parseShort(),st._yMax=zt.parseShort(),0<st.numberOfContours){for(var Xt=st.endPointIndices=[],$t=0;$t<st.numberOfContours;$t+=1)Xt.push(zt.parseUShort());st.instructionLength=zt.parseUShort(),st.instructions=[];for(var fr=0;fr<st.instructionLength;fr+=1)st.instructions.push(zt.parseByte());for(var wr=Xt[Xt.length-1]+1,xr=[],Rr=0;Rr<wr;Rr+=1)if(Ot=zt.parseByte(),xr.push(Ot),0<(8&Ot))for(var Wr=zt.parseByte(),Fr=0;Fr<Wr;Fr+=1)xr.push(Ot),Rr+=1;if(Rt.argument(xr.length===wr,"Bad flags."),0<Xt.length){var Mr,hn=[];if(0<wr){for(var tn=0;tn<wr;tn+=1)Ot=xr[tn],(Mr={}).onCurve=!!(1&Ot),Mr.lastPointOfContour=0<=Xt.indexOf(tn),hn.push(Mr);for(var un=0,Zr=0;Zr<wr;Zr+=1)Ot=xr[Zr],(Mr=hn[Zr]).x=jl(zt,Ot,un,2,16),un=Mr.x;for(var Qr=0,On=0;On<wr;On+=1)Ot=xr[On],(Mr=hn[On]).y=jl(zt,Ot,Qr,4,32),Qr=Mr.y}st.points=hn}else st.points=[]}else if(st.numberOfContours===0)st.points=[];else{st.isComposite=!0,st.points=[],st.components=[];for(var Un=!0;Un;){xr=zt.parseUShort();var Ln={glyphIndex:zt.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&xr)?0<(2&xr)?(Ln.dx=zt.parseShort(),Ln.dy=zt.parseShort()):Ln.matchedPoints=[zt.parseUShort(),zt.parseUShort()]:0<(2&xr)?(Ln.dx=zt.parseChar(),Ln.dy=zt.parseChar()):Ln.matchedPoints=[zt.parseByte(),zt.parseByte()],0<(8&xr)?Ln.xScale=Ln.yScale=zt.parseF2Dot14():0<(64&xr)?(Ln.xScale=zt.parseF2Dot14(),Ln.yScale=zt.parseF2Dot14()):0<(128&xr)&&(Ln.xScale=zt.parseF2Dot14(),Ln.scale01=zt.parseF2Dot14(),Ln.scale10=zt.parseF2Dot14(),Ln.yScale=zt.parseF2Dot14()),st.components.push(Ln),Un=!!(32&xr)}if(256&xr){st.instructionLength=zt.parseUShort(),st.instructions=[];for(var In=0;In<st.instructionLength;In+=1)st.instructions.push(zt.parseByte())}}}function io(st,_t){for(var Mt=[],Ot=0;Ot<st.length;Ot+=1){var zt=st[Ot],zt={x:_t.xScale*zt.x+_t.scale01*zt.y+_t.dx,y:_t.scale10*zt.x+_t.yScale*zt.y+_t.dy,onCurve:zt.onCurve,lastPointOfContour:zt.lastPointOfContour};Mt.push(zt)}return Mt}function ts(st){var _t=new Yt;if(st)for(var Mt=function(Wr){for(var Fr=[],Mr=[],hn=0;hn<Wr.length;hn+=1){var tn=Wr[hn];Mr.push(tn),tn.lastPointOfContour&&(Fr.push(Mr),Mr=[])}return Rt.argument(Mr.length===0,"There are still points left in the current contour."),Fr}(st),Ot=0;Ot<Mt.length;++Ot){var zt,Xt=Mt[Ot],$t=Xt[Xt.length-1],fr=Xt[0];$t.onCurve?_t.moveTo($t.x,$t.y):fr.onCurve?_t.moveTo(fr.x,fr.y):(zt={x:.5*($t.x+fr.x),y:.5*($t.y+fr.y)},_t.moveTo(zt.x,zt.y));for(var wr=0;wr<Xt.length;++wr){var xr,Rr=$t,$t=fr,fr=Xt[(wr+1)%Xt.length];$t.onCurve?_t.lineTo($t.x,$t.y):(xr=fr,Rr.onCurve||($t.x,Rr.x,$t.y,Rr.y),fr.onCurve||(xr={x:.5*($t.x+fr.x),y:.5*($t.y+fr.y)}),_t.quadraticCurveTo($t.x,$t.y,xr.x,xr.y))}_t.closePath()}return _t}function Is(st,_t){if(_t.isComposite)for(var Mt=0;Mt<_t.components.length;Mt+=1){var Ot=_t.components[Mt],zt=st.get(Ot.glyphIndex);if(zt.getPath(),zt.points){var Xt=void 0;if(Ot.matchedPoints===void 0)Xt=io(zt.points,Ot);else{if(Ot.matchedPoints[0]>_t.points.length-1||Ot.matchedPoints[1]>zt.points.length-1)throw Error("Matched points out of range in "+_t.name);var $t=_t.points[Ot.matchedPoints[0]],fr=zt.points[Ot.matchedPoints[1]],Ot={xScale:Ot.xScale,scale01:Ot.scale01,scale10:Ot.scale10,yScale:Ot.yScale,dx:0,dy:0},fr=io([fr],Ot)[0];Ot.dx=$t.x-fr.x,Ot.dy=$t.y-fr.y,Xt=io(zt.points,Ot)}_t.points=_t.points.concat(Xt)}}return ts(_t.points)}(aa.prototype=za.prototype={searchTag:Ua,binSearch:ja,getTable:function(st){var _t=this.font.tables[this.tableName];return _t=!_t&&st?this.font.tables[this.tableName]=this.createDefaultTable():_t},getScriptNames:function(){var st=this.getTable();return st?st.scripts.map(function(_t){return _t.tag}):[]},getDefaultScriptName:function(){var st=this.getTable();if(st){for(var _t=!1,Mt=0;Mt<st.scripts.length;Mt++){var Ot=st.scripts[Mt].tag;if(Ot==="DFLT")return Ot;Ot==="latn"&&(_t=!0)}return _t?"latn":void 0}},getScriptTable:function(st,_t){var Mt,Ot=this.getTable(_t);if(Ot)return Mt=Ot.scripts,0<=(Ot=Ua(Ot.scripts,st=st||"DFLT"))?Mt[Ot].script:_t?(Mt.splice(-1-Ot,0,_t={tag:st,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}),_t.script):void 0},getLangSysTable:function(zt,_t,Mt){var Ot,zt=this.getScriptTable(zt,Mt);if(zt)return _t&&_t!=="dflt"&&_t!=="DFLT"?0<=(Ot=Ua(zt.langSysRecords,_t))?zt.langSysRecords[Ot].langSys:Mt?(zt.langSysRecords.splice(-1-Ot,0,Mt={tag:_t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}}),Mt.langSys):void 0:zt.defaultLangSys},getFeatureTable:function(st,_t,Mt,Ot){if(st=this.getLangSysTable(st,_t,Ot),st){for(var zt,Xt=st.featureIndexes,$t=this.font.tables[this.tableName].features,fr=0;fr<Xt.length;fr++)if((zt=$t[Xt[fr]]).tag===Mt)return zt.feature;if(Ot)return _t=$t.length,Rt.assert(_t===0||Mt>=$t[_t-1].tag,"Features must be added in alphabetical order."),$t.push(zt={tag:Mt,feature:{params:0,lookupListIndexes:[]}}),Xt.push(_t),zt.feature}},getLookupTables:function(Xt,_t,Mt,Ot,zt){var Xt=this.getFeatureTable(Xt,_t,Mt,zt),$t=[];if(Xt){for(var fr,wr=Xt.lookupListIndexes,xr=this.font.tables[this.tableName].lookups,Rr=0;Rr<wr.length;Rr++)(fr=xr[wr[Rr]]).lookupType===Ot&&$t.push(fr);if($t.length===0&&zt)return _t=xr.length,xr.push(fr={lookupType:Ot,lookupFlag:0,subtables:[],markFilteringSet:void 0}),wr.push(_t),[fr]}return $t},getGlyphClass:function(st,_t){switch(st.format){case 1:return st.startGlyph<=_t&&_t<st.startGlyph+st.classes.length?st.classes[_t-st.startGlyph]:0;case 2:var Mt=Do(st.ranges,_t);return Mt?Mt.classId:0}},getCoverageIndex:function(st,_t){switch(st.format){case 1:var Mt=ja(st.glyphs,_t);return 0<=Mt?Mt:-1;case 2:return Mt=Do(st.ranges,_t),Mt?Mt.index+_t-Mt.start:-1}},expandCoverage:function(st){if(st.format===1)return st.glyphs;for(var _t=[],Mt=st.ranges,Ot=0;Ot<Mt.length;Ot++)for(var zt=Mt[Ot],Xt=zt.start,$t=zt.end,fr=Xt;fr<=$t;fr++)_t.push(fr);return _t}}).init=function(){var st=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(st)},aa.prototype.getKerningValue=function(st,_t,Mt){for(var Ot=0;Ot<st.length;Ot++)for(var zt=st[Ot].subtables,Xt=0;Xt<zt.length;Xt++){var $t=zt[Xt],fr=this.getCoverageIndex($t.coverage,_t);if(!(fr<0))switch($t.posFormat){case 1:for(var wr=$t.pairSets[fr],xr=0;xr<wr.length;xr++){var Rr=wr[xr];if(Rr.secondGlyph===Mt)return Rr.value1&&Rr.value1.xAdvance||0}break;case 2:var Fr=this.getGlyphClass($t.classDef1,_t),Wr=this.getGlyphClass($t.classDef2,Mt),Fr=$t.classRecords[Fr][Wr];return Fr.value1&&Fr.value1.xAdvance||0}}return 0},aa.prototype.getKerningTables=function(st,_t){if(this.font.tables.gpos)return this.getLookupTables(st,_t,"kern",2)},(Ji.prototype=za.prototype).createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},Ji.prototype.getSingle=function(st,_t,Mt){for(var Ot=[],zt=this.getLookupTables(_t,Mt,st,1),Xt=0;Xt<zt.length;Xt++)for(var $t=zt[Xt].subtables,fr=0;fr<$t.length;fr++){var wr=$t[fr],xr=this.expandCoverage(wr.coverage),Rr=void 0;if(wr.substFormat===1)for(var Wr=wr.deltaGlyphId,Rr=0;Rr<xr.length;Rr++){var Fr=xr[Rr];Ot.push({sub:Fr,by:Fr+Wr})}else{var Mr=wr.substitute;for(Rr=0;Rr<xr.length;Rr++)Ot.push({sub:xr[Rr],by:Mr[Rr]})}}return Ot},Ji.prototype.getAlternates=function(st,_t,Mt){for(var Ot=[],zt=this.getLookupTables(_t,Mt,st,3),Xt=0;Xt<zt.length;Xt++)for(var $t=zt[Xt].subtables,fr=0;fr<$t.length;fr++)for(var wr=$t[fr],xr=this.expandCoverage(wr.coverage),Rr=wr.alternateSets,Wr=0;Wr<xr.length;Wr++)Ot.push({sub:xr[Wr],by:Rr[Wr]});return Ot},Ji.prototype.getLigatures=function(st,_t,Mt){for(var Ot=[],zt=this.getLookupTables(_t,Mt,st,4),Xt=0;Xt<zt.length;Xt++)for(var $t=zt[Xt].subtables,fr=0;fr<$t.length;fr++)for(var wr=$t[fr],xr=this.expandCoverage(wr.coverage),Rr=wr.ligatureSets,Wr=0;Wr<xr.length;Wr++)for(var Fr=xr[Wr],Mr=Rr[Wr],hn=0;hn<Mr.length;hn++){var tn=Mr[hn];Ot.push({sub:[Fr].concat(tn.components),by:tn.ligGlyph})}return Ot},Ji.prototype.addSingle=function(st,_t,Mt,Ot){Mt=Lo(this.getLookupTables(Mt,Ot,st,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]}),Rt.assert(Mt.coverage.format===1,"Ligature: unable to modify coverage table format "+Mt.coverage.format),Ot=_t.sub,st=this.binSearch(Mt.coverage.glyphs,Ot),st<0&&(Mt.coverage.glyphs.splice(st=-1-st,0,Ot),Mt.substitute.splice(st,0,0)),Mt.substitute[st]=_t.by},Ji.prototype.addAlternate=function(st,_t,Mt,Ot){Mt=Lo(this.getLookupTables(Mt,Ot,st,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]}),Rt.assert(Mt.coverage.format===1,"Ligature: unable to modify coverage table format "+Mt.coverage.format),Ot=_t.sub,st=this.binSearch(Mt.coverage.glyphs,Ot),st<0&&(Mt.coverage.glyphs.splice(st=-1-st,0,Ot),Mt.alternateSets.splice(st,0,0)),Mt.alternateSets[st]=_t.by},Ji.prototype.addLigature=function(Xt,wr,fr,zt){var fr=this.getLookupTables(fr,zt,Xt,4,!0)[0],zt=fr.subtables[0],Xt=(zt||(fr.subtables[0]=zt={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]}),Rt.assert(zt.coverage.format===1,"Ligature: unable to modify coverage table format "+zt.coverage.format),wr.sub[0]),$t=wr.sub.slice(1),fr={ligGlyph:wr.by,components:$t},wr=this.binSearch(zt.coverage.glyphs,Xt);if(0<=wr){for(var xr=zt.ligatureSets[wr],Rr=0;Rr<xr.length;Rr++)if(function(Wr,Fr){var Mr=Wr.length;if(Mr===Fr.length){for(var hn=0;hn<Mr;hn++)if(Wr[hn]!==Fr[hn])return;return 1}}(xr[Rr].components,$t))return;xr.push(fr)}else zt.coverage.glyphs.splice(wr=-1-wr,0,Xt),zt.ligatureSets.splice(wr,0,[fr])},Ji.prototype.getFeature=function(st,_t,Mt){if(/ss\d\d/.test(st))return this.getSingle(st,_t,Mt);switch(st){case"aalt":case"salt":return this.getSingle(st,_t,Mt).concat(this.getAlternates(st,_t,Mt));case"dlig":case"liga":case"rlig":return this.getLigatures(st,_t,Mt)}},Ji.prototype.add=function(st,_t,Mt,Ot){if(/ss\d\d/.test(st))return this.addSingle(st,_t,Mt,Ot);switch(st){case"aalt":case"salt":return typeof _t.by=="number"?this.addSingle(st,_t,Mt,Ot):this.addAlternate(st,_t,Mt,Ot);case"dlig":case"liga":case"rlig":return this.addLigature(st,_t,Mt,Ot)}};var Ga={getPath:ts,parse:function(st,_t,Mt,Ot){for(var zt=new En.GlyphSet(Ot),Xt=0;Xt<Mt.length-1;Xt+=1){var $t=Mt[Xt];$t!==Mt[Xt+1]?zt.push(Xt,En.ttfGlyphLoader(Ot,Xt,Gu,st,_t+$t,Is)):zt.push(Xt,En.glyphLoader(Ot,Xt))}return zt}};function Ha(st){this.font=st,this.getCommands=function(_t){return Ga.getPath(_t).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function El(st){return st}function rs(st){return Math.sign(st)*Math.round(Math.abs(st))}function Tl(st){return Math.sign(st)*Math.round(Math.abs(2*st))/2}function Io(st){return Math.sign(st)*(Math.round(Math.abs(st)+.5)-.5)}function Ea(st){return Math.sign(st)*Math.ceil(Math.abs(st))}function Ps(st){return Math.sign(st)*Math.floor(Math.abs(st))}function ao(st){var _t=this.srPeriod,Mt=this.srPhase,Ot=1;return st<0&&(st=-st,Ot=-1),st+=this.srThreshold-Mt,st=Math.trunc(st/_t)*_t,(st+=Mt)<0?Mt*Ot:st*Ot}var Ni={x:1,y:0,axis:"x",distance:function(st,_t,Mt,Ot){return(Mt?st.xo:st.x)-(Ot?_t.xo:_t.x)},interpolate:function(st,_t,Mt,Ot){var zt,Xt,$t,fr,wr,xr,Rr;if(!Ot||Ot===this)return zt=st.xo-_t.xo,Xt=st.xo-Mt.xo,wr=_t.x-_t.xo,xr=Mt.x-Mt.xo,(Rr=($t=Math.abs(zt))+(fr=Math.abs(Xt)))===0?void(st.x=st.xo+(wr+xr)/2):void(st.x=st.xo+(wr*fr+xr*$t)/Rr);zt=Ot.distance(st,_t,!0,!0),Xt=Ot.distance(st,Mt,!0,!0),wr=Ot.distance(_t,_t,!1,!0),xr=Ot.distance(Mt,Mt,!1,!0),(Rr=($t=Math.abs(zt))+(fr=Math.abs(Xt)))===0?Ni.setRelative(st,st,(wr+xr)/2,Ot,!0):Ni.setRelative(st,st,(wr*fr+xr*$t)/Rr,Ot,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(st,_t,Mt,Ot,zt){var Xt,$t;Ot&&Ot!==this?(Xt=zt?_t.xo:_t.x,$t=zt?_t.yo:_t.y,Xt+=Mt*Ot.x,$t+=Mt*Ot.y,st.x=Xt+(st.y-$t)/Ot.normalSlope):st.x=(zt?_t.xo:_t.x)+Mt},slope:0,touch:function(st){st.xTouched=!0},touched:function(st){return st.xTouched},untouch:function(st){st.xTouched=!1}},oa={x:0,y:1,axis:"y",distance:function(st,_t,Mt,Ot){return(Mt?st.yo:st.y)-(Ot?_t.yo:_t.y)},interpolate:function(st,_t,Mt,Ot){var zt,Xt,$t,fr,wr,xr,Rr;if(!Ot||Ot===this)return zt=st.yo-_t.yo,Xt=st.yo-Mt.yo,wr=_t.y-_t.yo,xr=Mt.y-Mt.yo,(Rr=($t=Math.abs(zt))+(fr=Math.abs(Xt)))===0?void(st.y=st.yo+(wr+xr)/2):void(st.y=st.yo+(wr*fr+xr*$t)/Rr);zt=Ot.distance(st,_t,!0,!0),Xt=Ot.distance(st,Mt,!0,!0),wr=Ot.distance(_t,_t,!1,!0),xr=Ot.distance(Mt,Mt,!1,!0),(Rr=($t=Math.abs(zt))+(fr=Math.abs(Xt)))===0?oa.setRelative(st,st,(wr+xr)/2,Ot,!0):oa.setRelative(st,st,(wr*fr+xr*$t)/Rr,Ot,!0)},normalSlope:0,setRelative:function(st,_t,Mt,Ot,zt){var Xt,$t;Ot&&Ot!==this?(Xt=zt?_t.xo:_t.x,$t=zt?_t.yo:_t.y,Xt+=Mt*Ot.x,$t+=Mt*Ot.y,st.y=$t+Ot.normalSlope*(st.x-Xt)):st.y=(zt?_t.yo:_t.y)+Mt},slope:Number.POSITIVE_INFINITY,touch:function(st){st.yTouched=!0},touched:function(st){return st.yTouched},untouch:function(st){st.yTouched=!1}};function Oa(st,_t){this.x=st,this.y=_t,this.axis=void 0,this.slope=_t/st,this.normalSlope=-st/_t,Object.freeze(this)}function oo(st,_t){var Mt=Math.sqrt(st*st+_t*_t);return _t/=Mt,(st/=Mt)===1&&_t===0?Ni:st===0&&_t===1?oa:new Oa(st,_t)}function ea(st,_t,Mt,Ot){this.x=this.xo=Math.round(64*st)/64,this.y=this.yo=Math.round(64*_t)/64,this.lastPointOfContour=Mt,this.onCurve=Ot,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Ni),Object.freeze(oa),Oa.prototype.distance=function(st,_t,Mt,Ot){return this.x*Ni.distance(st,_t,Mt,Ot)+this.y*oa.distance(st,_t,Mt,Ot)},Oa.prototype.interpolate=function(st,zt,Xt,Ot){var $t=Ot.distance(st,zt,!0,!0),fr=Ot.distance(st,Xt,!0,!0),zt=Ot.distance(zt,zt,!1,!0),Xt=Ot.distance(Xt,Xt,!1,!0),$t=Math.abs($t),fr=Math.abs(fr),wr=$t+fr;wr===0?this.setRelative(st,st,(zt+Xt)/2,Ot,!0):this.setRelative(st,st,(zt*fr+Xt*$t)/wr,Ot,!0)},Oa.prototype.setRelative=function(st,Xt,wr,xr,fr){var $t=fr?Xt.xo:Xt.x,fr=fr?Xt.yo:Xt.y,Xt=$t+wr*(xr=xr||this).x,$t=fr+wr*xr.y,fr=xr.normalSlope,wr=this.slope,xr=st.x,Rr=st.y;st.x=(wr*xr-fr*Xt+$t-Rr)/(wr-fr),st.y=wr*(st.x-xr)+Rr},Oa.prototype.touch=function(st){st.xTouched=!0,st.yTouched=!0},ea.prototype.nextTouched=function(st){for(var _t=this.nextPointOnContour;!st.touched(_t)&&_t!==this;)_t=_t.nextPointOnContour;return _t},ea.prototype.prevTouched=function(st){for(var _t=this.prevPointOnContour;!st.touched(_t)&&_t!==this;)_t=_t.prevPointOnContour;return _t};var Ra=Object.freeze(new ea(0,0)),Ml={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Si(st,_t){switch(this.env=st,this.stack=[],this.prog=_t,st){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Ni,this.round=rs}}function ga(st){for(var _t=st.tZone=new Array(st.gZone.length),Mt=0;Mt<_t.length;Mt++)_t[Mt]=new ea(0,0)}function Po(st,_t){var Mt,Ot=st.prog,zt=st.ip,Xt=1;do if((Mt=Ot[++zt])===88)Xt++;else if(Mt===89)Xt--;else if(Mt===64)zt+=Ot[zt+1]+1;else if(Mt===65)zt+=2*Ot[zt+1]+1;else if(176<=Mt&&Mt<=183)zt+=Mt-176+1;else if(184<=Mt&&Mt<=191)zt+=2*(Mt-184+1);else if(_t&&Xt===1&&Mt===27)break;while(0<Xt);st.ip=zt}function so(st,_t){h.DEBUG&&console.log(_t.step,"SVTCA["+st.axis+"]"),_t.fv=_t.pv=_t.dpv=st}function Al(st,_t){h.DEBUG&&console.log(_t.step,"SPVTCA["+st.axis+"]"),_t.pv=_t.dpv=st}function ns(st,_t){h.DEBUG&&console.log(_t.step,"SFVTCA["+st.axis+"]"),_t.fv=st}function is(st,_t){var Mt,zt=_t.stack,Ot=zt.pop(),zt=zt.pop(),Xt=_t.z2[Ot],$t=_t.z1[zt];h.DEBUG&&console.log("SPVTL["+st+"]",Ot,zt),Ot=st?(Mt=Xt.y-$t.y,$t.x-Xt.x):(Mt=$t.x-Xt.x,$t.y-Xt.y),_t.pv=_t.dpv=oo(Mt,Ot)}function lo(st,_t){var Mt,zt=_t.stack,Ot=zt.pop(),zt=zt.pop(),Xt=_t.z2[Ot],$t=_t.z1[zt];h.DEBUG&&console.log("SFVTL["+st+"]",Ot,zt),Ot=st?(Mt=Xt.y-$t.y,$t.x-Xt.x):(Mt=$t.x-Xt.x,$t.y-Xt.y),_t.fv=oo(Mt,Ot)}function uo(st){h.DEBUG&&console.log(st.step,"POP[]"),st.stack.pop()}function Ns(st,_t){var Mt=_t.stack.pop(),Ot=_t.z0[Mt],zt=_t.fv,Xt=_t.pv,$t=(h.DEBUG&&console.log(_t.step,"MDAP["+st+"]",Mt),Xt.distance(Ot,Ra));st&&($t=_t.round($t)),zt.setRelative(Ot,Ra,$t,Xt),zt.touch(Ot),_t.rp0=_t.rp1=Mt}function kl(st,_t){var Mt,Ot,zt,Xt=_t.z2,$t=Xt.length-2;h.DEBUG&&console.log(_t.step,"IUP["+st.axis+"]");for(var fr=0;fr<$t;fr++)Mt=Xt[fr],st.touched(Mt)||(Ot=Mt.prevTouched(st))!==Mt&&(Ot===(zt=Mt.nextTouched(st))&&st.setRelative(Mt,Mt,st.distance(Ot,Ot,!1,!0),st,!0),st.interpolate(Mt,Ot,zt,st))}function Cl(st,_t){for(var Mt=_t.stack,Ot=st?_t.rp1:_t.rp2,zt=(st?_t.z0:_t.z1)[Ot],Xt=_t.fv,$t=_t.pv,fr=_t.loop,wr=_t.z2;fr--;){var xr=Mt.pop(),Rr=wr[xr],Wr=$t.distance(zt,zt,!1,!0);Xt.setRelative(Rr,Rr,Wr,$t),Xt.touch(Rr),h.DEBUG&&console.log(_t.step,(1<_t.loop?"loop "+(_t.loop-fr)+": ":"")+"SHP["+(st?"rp1":"rp2")+"]",xr)}_t.loop=1}function Ol(st,_t){for(var Mt=_t.stack,$t=st?_t.rp1:_t.rp2,Ot=(st?_t.z0:_t.z1)[$t],zt=_t.fv,Xt=_t.pv,$t=Mt.pop(),fr=_t.z2[_t.contours[$t]],wr=fr,xr=(h.DEBUG&&console.log(_t.step,"SHC["+st+"]",$t),Xt.distance(Ot,Ot,!1,!0));wr!==Ot&&zt.setRelative(wr,wr,xr,Xt),(wr=wr.nextPointOnContour)!==fr;);}function as(st,_t){var Mt,Ot,fr=_t.stack,zt=st?_t.rp1:_t.rp2,zt=(st?_t.z0:_t.z1)[zt],Xt=_t.fv,$t=_t.pv,fr=fr.pop();switch(h.DEBUG&&console.log(_t.step,"SHZ["+st+"]",fr),fr){case 0:Mt=_t.tZone;break;case 1:Mt=_t.gZone;break;default:throw new Error("Invalid zone")}for(var wr=$t.distance(zt,zt,!1,!0),xr=Mt.length-2,Rr=0;Rr<xr;Rr++)Ot=Mt[Rr],Xt.setRelative(Ot,Ot,wr,$t)}function Rl(st,_t){var Ot=_t.stack,Mt=Ot.pop()/64,Ot=Ot.pop(),zt=_t.z1[Ot],Xt=_t.z0[_t.rp0],$t=_t.fv,fr=_t.pv;$t.setRelative(zt,Xt,Mt,fr),$t.touch(zt),h.DEBUG&&console.log(_t.step,"MSIRP["+st+"]",Mt,Ot),_t.rp1=_t.rp0,_t.rp2=Ot,st&&(_t.rp0=Ot)}function Dl(st,_t){var Mt=_t.stack,fr=Mt.pop(),Mt=Mt.pop(),Ot=_t.z0[Mt],zt=_t.fv,Xt=_t.pv,$t=_t.cvt[fr],fr=(h.DEBUG&&console.log(_t.step,"MIAP["+st+"]",fr,"(",$t,")",Mt),Xt.distance(Ot,Ra));st&&(Math.abs(fr-$t)<_t.cvCutIn&&(fr=$t),fr=_t.round(fr)),zt.setRelative(Ot,Ra,fr,Xt),_t.zp0===0&&(Ot.xo=Ot.x,Ot.yo=Ot.y),zt.touch(Ot),_t.rp0=_t.rp1=Mt}function Ll(st,_t){var Mt=_t.stack,Ot=Mt.pop(),zt=_t.z2[Ot];h.DEBUG&&console.log(_t.step,"GC["+st+"]",Ot),Mt.push(64*_t.dpv.distance(zt,Ra,st,!1))}function Il(st,_t){var Ot=_t.stack,Mt=Ot.pop(),Ot=Ot.pop(),zt=_t.z1[Mt],Xt=_t.z0[Ot],Xt=_t.dpv.distance(Xt,zt,st,st);h.DEBUG&&console.log(_t.step,"MD["+st+"]",Mt,Ot,"->",Xt),_t.stack.push(Math.round(64*Xt))}function Bs(st,_t){var Mt=_t.stack,Ot=Mt.pop(),zt=_t.fv,Xt=_t.pv,$t=_t.ppem,fr=_t.deltaBase+16*(st-1),wr=_t.deltaShift,xr=_t.z0;h.DEBUG&&console.log(_t.step,"DELTAP["+st+"]",Ot,Mt);for(var Rr=0;Rr<Ot;Rr++){var Wr=Mt.pop(),Fr=Mt.pop();fr+((240&Fr)>>4)===$t&&(0<=(Fr=(15&Fr)-8)&&Fr++,h.DEBUG&&console.log(_t.step,"DELTAPFIX",Wr,"by",Fr*wr),Wr=xr[Wr],zt.setRelative(Wr,Wr,Fr*wr,Xt))}}function No(st,_t){var Mt=_t.stack,Ot=Mt.pop();h.DEBUG&&console.log(_t.step,"ROUND[]"),Mt.push(64*_t.round(Ot/64))}function Fs(st,_t){var Mt=_t.stack,Ot=Mt.pop(),zt=_t.ppem,Xt=_t.deltaBase+16*(st-1),$t=_t.deltaShift;h.DEBUG&&console.log(_t.step,"DELTAC["+st+"]",Ot,Mt);for(var fr=0;fr<Ot;fr++){var wr=Mt.pop(),xr=Mt.pop();Xt+((240&xr)>>4)===zt&&(0<=(xr=(15&xr)-8)&&xr++,xr=xr*$t,h.DEBUG&&console.log(_t.step,"DELTACFIX",wr,"by",xr),_t.cvt[wr]+=xr)}}function Pl(st,_t){var Mt,zt=_t.stack,Ot=zt.pop(),zt=zt.pop(),Xt=_t.z2[Ot],$t=_t.z1[zt];h.DEBUG&&console.log(_t.step,"SDPVTL["+st+"]",Ot,zt),Ot=st?(Mt=Xt.y-$t.y,$t.x-Xt.x):(Mt=$t.x-Xt.x,$t.y-Xt.y),_t.dpv=oo(Mt,Ot)}function Da(st,_t){var Mt=_t.stack,Ot=_t.prog,zt=_t.ip;h.DEBUG&&console.log(_t.step,"PUSHB["+st+"]");for(var Xt=0;Xt<st;Xt++)Mt.push(Ot[++zt]);_t.ip=zt}function La(st,_t){var Mt=_t.ip,Ot=_t.prog,zt=_t.stack;h.DEBUG&&console.log(_t.ip,"PUSHW["+st+"]");for(var Xt=0;Xt<st;Xt++){var $t=Ot[++Mt]<<8|Ot[++Mt];32768&$t&&($t=-(1+(65535^$t))),zt.push($t)}_t.ip=Mt}function kn(st,_t,Mt,Ot,zt,Xt){var $t,fr,xr=Xt.stack,wr=st&&xr.pop(),xr=xr.pop(),Rr=Xt.rp0,Rr=Xt.z0[Rr],Wr=Xt.z1[xr],Fr=Xt.minDis,Mr=Xt.fv,hn=Xt.dpv,tn=$t=hn.distance(Wr,Rr,!0,!0),un=0<=tn?1:-1;tn=Math.abs(tn),st&&(fr=Xt.cvt[wr],Ot&&Math.abs(tn-fr)<Xt.cvCutIn&&(tn=fr)),Mt&&tn<Fr&&(tn=Fr),Ot&&(tn=Xt.round(tn)),Mr.setRelative(Wr,Rr,un*tn,hn),Mr.touch(Wr),h.DEBUG&&console.log(Xt.step,(st?"MIRP[":"MDRP[")+(_t?"M":"m")+(Mt?">":"_")+(Ot?"R":"_")+(zt===0?"Gr":zt===1?"Bl":zt===2?"Wh":"")+"]",st?wr+"("+Xt.cvt[wr]+","+fr+")":"",xr,"(d =",$t,"->",un*tn,")"),Xt.rp1=Xt.rp0,Xt.rp2=xr,_t&&(Xt.rp0=xr)}Ha.prototype.exec=function(st,_t){if(typeof _t!="number")throw new Error("Point size is not a number!");if(!(2<this._errorState)){var Mt=this.font,Ot=this._prepState;if(!Ot||Ot.ppem!==_t){var zt=this._fpgmState;if(!zt){Si.prototype=Ml,(zt=this._fpgmState=new Si("fpgm",Mt.tables.fpgm)).funcs=[],zt.font=Mt,h.DEBUG&&(console.log("---EXEC FPGM---"),zt.step=-1);try{co(zt)}catch(xr){return console.log("Hinting error in FPGM:"+xr),void(this._errorState=3)}}Si.prototype=zt,(Ot=this._prepState=new Si("prep",Mt.tables.prep)).ppem=_t;var Xt=Mt.tables.cvt;if(Xt)for(var $t=Ot.cvt=new Array(Xt.length),fr=_t/Mt.unitsPerEm,wr=0;wr<Xt.length;wr++)$t[wr]=Xt[wr]*fr;else Ot.cvt=[];h.DEBUG&&(console.log("---EXEC PREP---"),Ot.step=-1);try{co(Ot)}catch(xr){this._errorState<2&&console.log("Hinting error in PREP:"+xr),this._errorState=2}}if(!(1<this._errorState))try{return Hu(st,Ot)}catch(xr){this._errorState<1&&(console.log("Hinting error:"+xr),console.log("Note: further hinting errors are silenced")),this._errorState=1}}};var Hu=function(st,_t){var Mt=_t.ppem/_t.font.unitsPerEm,Ot=Mt,zt=st.components;if(Si.prototype=_t,zt){for(var Xt=_t.font,$t=[],fr=[],wr=0;wr<zt.length;wr++){var xr=zt[wr],Rr=Xt.glyphs.get(xr.glyphIndex),Wr=new Si("glyf",Rr.instructions);h.DEBUG&&(console.log("---EXEC COMP "+wr+"---"),Wr.step=-1),Nl(Rr,Wr,Mt,Ot);for(var Fr=Math.round(xr.dx*Mt),Mr=Math.round(xr.dy*Ot),hn=Wr.gZone,tn=Wr.contours,un=0;un<hn.length;un++){var Zr=hn[un];Zr.xTouched=Zr.yTouched=!1,Zr.xo=Zr.x=Zr.x+Fr,Zr.yo=Zr.y=Zr.y+Mr}var Qr=$t.length;$t.push.apply($t,hn);for(var On=0;On<tn.length;On++)fr.push(tn[On]+Qr)}st.instructions&&!Wr.inhibitGridFit&&((Wr=new Si("glyf",st.instructions)).gZone=Wr.z0=Wr.z1=Wr.z2=$t,Wr.contours=fr,$t.push(new ea(0,0),new ea(Math.round(st.advanceWidth*Mt),0)),h.DEBUG&&(console.log("---EXEC COMPOSITE---"),Wr.step=-1),co(Wr),$t.length-=2)}else Wr=new Si("glyf",st.instructions),h.DEBUG&&(console.log("---EXEC GLYPH---"),Wr.step=-1),Nl(st,Wr,Mt,Ot),$t=Wr.gZone;return $t},Nl=function(st,_t,Mt,Ot){for(var zt,Xt,$t,fr=st.points||[],wr=fr.length,xr=_t.gZone=_t.z0=_t.z1=_t.z2=[],Rr=_t.contours=[],Wr=0;Wr<wr;Wr++)zt=fr[Wr],xr[Wr]=new ea(zt.x*Mt,zt.y*Ot,zt.lastPointOfContour,zt.onCurve);for(var Fr=0;Fr<wr;Fr++)zt=xr[Fr],Xt||(Xt=zt,Rr.push(Fr)),zt.lastPointOfContour?((zt.nextPointOnContour=Xt).prevPointOnContour=zt,Xt=void 0):($t=xr[Fr+1],(zt.nextPointOnContour=$t).prevPointOnContour=zt);if(!_t.inhibitGridFit){if(h.DEBUG){console.log("PROCESSING GLYPH",_t.stack);for(var Mr=0;Mr<wr;Mr++)console.log(Mr,xr[Mr].x,xr[Mr].y)}if(xr.push(new ea(0,0),new ea(Math.round(st.advanceWidth*Mt),0)),co(_t),xr.length-=2,h.DEBUG){console.log("FINISHED GLYPH",_t.stack);for(var hn=0;hn<wr;hn++)console.log(hn,xr[hn].x,xr[hn].y)}}},co=function(st){var _t=st.prog;if(_t){var Mt,Ot=_t.length;for(st.ip=0;st.ip<Ot;st.ip++){if(h.DEBUG&&st.step++,!(Mt=Bl[_t[st.ip]]))throw new Error("unknown instruction: 0x"+Number(_t[st.ip]).toString(16));Mt(st)}}},Bl=[so.bind(void 0,oa),so.bind(void 0,Ni),Al.bind(void 0,oa),Al.bind(void 0,Ni),ns.bind(void 0,oa),ns.bind(void 0,Ni),is.bind(void 0,0),is.bind(void 0,1),lo.bind(void 0,0),lo.bind(void 0,1),function(st){var _t=(Mt=st.stack).pop(),Mt=Mt.pop();h.DEBUG&&console.log(st.step,"SPVFS[]",_t,Mt),st.pv=st.dpv=oo(Mt,_t)},function(st){var _t=(Mt=st.stack).pop(),Mt=Mt.pop();h.DEBUG&&console.log(st.step,"SPVFS[]",_t,Mt),st.fv=oo(Mt,_t)},function(st){var _t=st.stack,Mt=st.pv;h.DEBUG&&console.log(st.step,"GPV[]"),_t.push(16384*Mt.x),_t.push(16384*Mt.y)},function(st){var _t=st.stack,Mt=st.fv;h.DEBUG&&console.log(st.step,"GFV[]"),_t.push(16384*Mt.x),_t.push(16384*Mt.y)},function(st){st.fv=st.pv,h.DEBUG&&console.log(st.step,"SFVTPV[]")},function(_t){var Mt=($t=_t.stack).pop(),Ot=$t.pop(),zt=$t.pop(),Xt=$t.pop(),$t=$t.pop(),wr=_t.z0,Rr=_t.z1,fr=wr[Mt],wr=wr[Ot],xr=Rr[zt],Rr=Rr[Xt],_t=_t.z2[$t],Mt=(h.DEBUG&&console.log("ISECT[], ",Mt,Ot,zt,Xt,$t),fr.x),Ot=fr.y,zt=wr.x,Xt=wr.y,$t=xr.x,fr=xr.y,wr=Rr.x,xr=Rr.y,Rr=(Mt-zt)*(fr-xr)-(Ot-Xt)*($t-wr),Wr=Mt*Xt-Ot*zt,Fr=$t*xr-fr*wr;_t.x=(Wr*($t-wr)-Fr*(Mt-zt))/Rr,_t.y=(Wr*(fr-xr)-Fr*(Ot-Xt))/Rr},function(st){st.rp0=st.stack.pop(),h.DEBUG&&console.log(st.step,"SRP0[]",st.rp0)},function(st){st.rp1=st.stack.pop(),h.DEBUG&&console.log(st.step,"SRP1[]",st.rp1)},function(st){st.rp2=st.stack.pop(),h.DEBUG&&console.log(st.step,"SRP2[]",st.rp2)},function(st){var _t=st.stack.pop();switch(h.DEBUG&&console.log(st.step,"SZP0[]",_t),st.zp0=_t){case 0:st.tZone||ga(st),st.z0=st.tZone;break;case 1:st.z0=st.gZone;break;default:throw new Error("Invalid zone pointer")}},function(st){var _t=st.stack.pop();switch(h.DEBUG&&console.log(st.step,"SZP1[]",_t),st.zp1=_t){case 0:st.tZone||ga(st),st.z1=st.tZone;break;case 1:st.z1=st.gZone;break;default:throw new Error("Invalid zone pointer")}},function(st){var _t=st.stack.pop();switch(h.DEBUG&&console.log(st.step,"SZP2[]",_t),st.zp2=_t){case 0:st.tZone||ga(st),st.z2=st.tZone;break;case 1:st.z2=st.gZone;break;default:throw new Error("Invalid zone pointer")}},function(st){var _t=st.stack.pop();switch(h.DEBUG&&console.log(st.step,"SZPS[]",_t),st.zp0=st.zp1=st.zp2=_t){case 0:st.tZone||ga(st),st.z0=st.z1=st.z2=st.tZone;break;case 1:st.z0=st.z1=st.z2=st.gZone;break;default:throw new Error("Invalid zone pointer")}},function(st){st.loop=st.stack.pop(),h.DEBUG&&console.log(st.step,"SLOOP[]",st.loop)},function(st){h.DEBUG&&console.log(st.step,"RTG[]"),st.round=rs},function(st){h.DEBUG&&console.log(st.step,"RTHG[]"),st.round=Io},function(st){var _t=st.stack.pop();h.DEBUG&&console.log(st.step,"SMD[]",_t),st.minDis=_t/64},function(st){h.DEBUG&&console.log(st.step,"ELSE[]"),Po(st,!1)},function(st){var _t=st.stack.pop();h.DEBUG&&console.log(st.step,"JMPR[]",_t),st.ip+=_t-1},function(st){var _t=st.stack.pop();h.DEBUG&&console.log(st.step,"SCVTCI[]",_t),st.cvCutIn=_t/64},void 0,void 0,function(st){var _t=st.stack;h.DEBUG&&console.log(st.step,"DUP[]"),_t.push(_t[_t.length-1])},uo,function(st){h.DEBUG&&console.log(st.step,"CLEAR[]"),st.stack.length=0},function(st){var _t=st.stack,Mt=_t.pop(),Ot=_t.pop();h.DEBUG&&console.log(st.step,"SWAP[]"),_t.push(Mt),_t.push(Ot)},function(st){var _t=st.stack;h.DEBUG&&console.log(st.step,"DEPTH[]"),_t.push(_t.length)},function(st){var _t=st.stack,Mt=_t.pop();h.DEBUG&&console.log(st.step,"CINDEX[]",Mt),_t.push(_t[_t.length-Mt])},function(st){var _t=st.stack,Mt=_t.pop();h.DEBUG&&console.log(st.step,"MINDEX[]",Mt),_t.push(_t.splice(_t.length-Mt,1)[0])},void 0,void 0,void 0,function(st){var _t=(Ot=st.stack).pop(),Mt=Ot.pop(),Ot=(h.DEBUG&&console.log(st.step,"LOOPCALL[]",_t,Mt),st.ip),zt=st.prog;st.prog=st.funcs[_t];for(var Xt=0;Xt<Mt;Xt++)co(st),h.DEBUG&&console.log(++st.step,Xt+1<Mt?"next loopcall":"done loopcall",Xt);st.ip=Ot,st.prog=zt},function(st){var _t=st.stack.pop(),Mt=(h.DEBUG&&console.log(st.step,"CALL[]",_t),st.ip),Ot=st.prog;st.prog=st.funcs[_t],co(st),st.ip=Mt,st.prog=Ot,h.DEBUG&&console.log(++st.step,"returning from",_t)},function(st){if(st.env!=="fpgm")throw new Error("FDEF not allowed here");var Ot=st.stack,_t=st.prog,Mt=st.ip,Ot=Ot.pop(),zt=Mt;for(h.DEBUG&&console.log(st.step,"FDEF[]",Ot);_t[++Mt]!==45;);st.ip=Mt,st.funcs[Ot]=_t.slice(zt+1,Mt)},void 0,Ns.bind(void 0,0),Ns.bind(void 0,1),kl.bind(void 0,oa),kl.bind(void 0,Ni),Cl.bind(void 0,0),Cl.bind(void 0,1),Ol.bind(void 0,0),Ol.bind(void 0,1),as.bind(void 0,0),as.bind(void 0,1),function(st){for(var _t=st.stack,Mt=st.loop,Ot=st.fv,zt=_t.pop()/64,Xt=st.z2;Mt--;){var $t=_t.pop(),fr=Xt[$t];h.DEBUG&&console.log(st.step,(1<st.loop?"loop "+(st.loop-Mt)+": ":"")+"SHPIX[]",$t,zt),Ot.setRelative(fr,fr,zt),Ot.touch(fr)}st.loop=1},function(st){for(var _t=st.stack,Mt=st.rp1,Ot=st.rp2,zt=st.loop,Xt=st.z0[Mt],$t=st.z1[Ot],fr=st.fv,wr=st.dpv,xr=st.z2;zt--;){var Rr=_t.pop(),Wr=xr[Rr];h.DEBUG&&console.log(st.step,(1<st.loop?"loop "+(st.loop-zt)+": ":"")+"IP[]",Rr,Mt,"<->",Ot),fr.interpolate(Wr,Xt,$t,wr),fr.touch(Wr)}st.loop=1},Rl.bind(void 0,0),Rl.bind(void 0,1),function(st){for(var _t=st.stack,Mt=st.rp0,Ot=st.z0[Mt],zt=st.loop,Xt=st.fv,$t=st.pv,fr=st.z1;zt--;){var wr=_t.pop(),xr=fr[wr];h.DEBUG&&console.log(st.step,(1<st.loop?"loop "+(st.loop-zt)+": ":"")+"ALIGNRP[]",wr),Xt.setRelative(xr,Ot,0,$t),Xt.touch(xr)}st.loop=1},function(st){h.DEBUG&&console.log(st.step,"RTDG[]"),st.round=Tl},Dl.bind(void 0,0),Dl.bind(void 0,1),function(st){var _t=st.prog,Mt=st.ip,Ot=st.stack,zt=_t[++Mt];h.DEBUG&&console.log(st.step,"NPUSHB[]",zt);for(var Xt=0;Xt<zt;Xt++)Ot.push(_t[++Mt]);st.ip=Mt},function(st){var _t=st.ip,Mt=st.prog,Ot=st.stack,zt=Mt[++_t];h.DEBUG&&console.log(st.step,"NPUSHW[]",zt);for(var Xt=0;Xt<zt;Xt++){var $t=Mt[++_t]<<8|Mt[++_t];32768&$t&&($t=-(1+(65535^$t))),Ot.push($t)}st.ip=_t},function(st){var Ot=st.stack,_t=(_t=st.store)||(st.store=[]),Mt=Ot.pop(),Ot=Ot.pop();h.DEBUG&&console.log(st.step,"WS",Mt,Ot),_t[Ot]=Mt},function(zt){var _t=zt.stack,Mt=zt.store,Ot=_t.pop(),zt=(h.DEBUG&&console.log(zt.step,"RS",Ot),Mt&&Mt[Ot]||0);_t.push(zt)},function(st){var _t=(Mt=st.stack).pop(),Mt=Mt.pop();h.DEBUG&&console.log(st.step,"WCVTP",_t,Mt),st.cvt[Mt]=_t/64},function(st){var _t=st.stack,Mt=_t.pop();h.DEBUG&&console.log(st.step,"RCVT",Mt),_t.push(64*st.cvt[Mt])},Ll.bind(void 0,0),Ll.bind(void 0,1),void 0,Il.bind(void 0,0),Il.bind(void 0,1),function(st){h.DEBUG&&console.log(st.step,"MPPEM[]"),st.stack.push(st.ppem)},void 0,function(st){h.DEBUG&&console.log(st.step,"FLIPON[]"),st.autoFlip=!0},void 0,void 0,function(st){var _t=st.stack,Mt=_t.pop(),Ot=_t.pop();h.DEBUG&&console.log(st.step,"LT[]",Mt,Ot),_t.push(Ot<Mt?1:0)},function(st){var _t=st.stack,Mt=_t.pop(),Ot=_t.pop();h.DEBUG&&console.log(st.step,"LTEQ[]",Mt,Ot),_t.push(Ot<=Mt?1:0)},function(st){var _t=st.stack,Mt=_t.pop(),Ot=_t.pop();h.DEBUG&&console.log(st.step,"GT[]",Mt,Ot),_t.push(Mt<Ot?1:0)},function(st){var _t=st.stack,Mt=_t.pop(),Ot=_t.pop();h.DEBUG&&console.log(st.step,"GTEQ[]",Mt,Ot),_t.push(Mt<=Ot?1:0)},function(st){var _t=st.stack,Mt=_t.pop(),Ot=_t.pop();h.DEBUG&&console.log(st.step,"EQ[]",Mt,Ot),_t.push(Mt===Ot?1:0)},function(st){var _t=st.stack,Mt=_t.pop(),Ot=_t.pop();h.DEBUG&&console.log(st.step,"NEQ[]",Mt,Ot),_t.push(Mt!==Ot?1:0)},function(st){var _t=st.stack,Mt=_t.pop();h.DEBUG&&console.log(st.step,"ODD[]",Mt),_t.push(Math.trunc(Mt)%2?1:0)},function(st){var _t=st.stack,Mt=_t.pop();h.DEBUG&&console.log(st.step,"EVEN[]",Mt),_t.push(Math.trunc(Mt)%2?0:1)},function(st){var _t=st.stack.pop();h.DEBUG&&console.log(st.step,"IF[]",_t),_t||(Po(st,!0),h.DEBUG&&console.log(st.step,"EIF[]"))},function(st){h.DEBUG&&console.log(st.step,"EIF[]")},function(st){var _t=st.stack,Mt=_t.pop(),Ot=_t.pop();h.DEBUG&&console.log(st.step,"AND[]",Mt,Ot),_t.push(Mt&&Ot?1:0)},function(st){var _t=st.stack,Mt=_t.pop(),Ot=_t.pop();h.DEBUG&&console.log(st.step,"OR[]",Mt,Ot),_t.push(Mt||Ot?1:0)},function(st){var _t=st.stack,Mt=_t.pop();h.DEBUG&&console.log(st.step,"NOT[]",Mt),_t.push(Mt?0:1)},Bs.bind(void 0,1),function(st){var _t=st.stack.pop();h.DEBUG&&console.log(st.step,"SDB[]",_t),st.deltaBase=_t},function(st){var _t=st.stack.pop();h.DEBUG&&console.log(st.step,"SDS[]",_t),st.deltaShift=Math.pow(.5,_t)},function(st){var _t=st.stack,Mt=_t.pop(),Ot=_t.pop();h.DEBUG&&console.log(st.step,"ADD[]",Mt,Ot),_t.push(Ot+Mt)},function(st){var _t=st.stack,Mt=_t.pop(),Ot=_t.pop();h.DEBUG&&console.log(st.step,"SUB[]",Mt,Ot),_t.push(Ot-Mt)},function(st){var _t=st.stack,Mt=_t.pop(),Ot=_t.pop();h.DEBUG&&console.log(st.step,"DIV[]",Mt,Ot),_t.push(64*Ot/Mt)},function(st){var _t=st.stack,Mt=_t.pop(),Ot=_t.pop();h.DEBUG&&console.log(st.step,"MUL[]",Mt,Ot),_t.push(Ot*Mt/64)},function(st){var _t=st.stack,Mt=_t.pop();h.DEBUG&&console.log(st.step,"ABS[]",Mt),_t.push(Math.abs(Mt))},function(st){var _t=st.stack,Mt=_t.pop();h.DEBUG&&console.log(st.step,"NEG[]",Mt),_t.push(-Mt)},function(st){var _t=st.stack,Mt=_t.pop();h.DEBUG&&console.log(st.step,"FLOOR[]",Mt),_t.push(64*Math.floor(Mt/64))},function(st){var _t=st.stack,Mt=_t.pop();h.DEBUG&&console.log(st.step,"CEILING[]",Mt),_t.push(64*Math.ceil(Mt/64))},No.bind(void 0,0),No.bind(void 0,1),No.bind(void 0,2),No.bind(void 0,3),void 0,void 0,void 0,void 0,function(st){var _t=(Mt=st.stack).pop(),Mt=Mt.pop();h.DEBUG&&console.log(st.step,"WCVTF[]",_t,Mt),st.cvt[Mt]=_t*st.ppem/st.font.unitsPerEm},Bs.bind(void 0,2),Bs.bind(void 0,3),Fs.bind(void 0,1),Fs.bind(void 0,2),Fs.bind(void 0,3),function(st){var _t,Mt=st.stack.pop();switch(h.DEBUG&&console.log(st.step,"SROUND[]",Mt),st.round=ao,192&Mt){case 0:_t=.5;break;case 64:_t=1;break;case 128:_t=2;break;default:throw new Error("invalid SROUND value")}switch(st.srPeriod=_t,48&Mt){case 0:st.srPhase=0;break;case 16:st.srPhase=.25*_t;break;case 32:st.srPhase=.5*_t;break;case 48:st.srPhase=.75*_t;break;default:throw new Error("invalid SROUND value")}st.srThreshold=(Mt&=15)===0?0:(Mt/8-.5)*_t},function(st){var _t,Mt=st.stack.pop();switch(h.DEBUG&&console.log(st.step,"S45ROUND[]",Mt),st.round=ao,192&Mt){case 0:_t=Math.sqrt(2)/2;break;case 64:_t=Math.sqrt(2);break;case 128:_t=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(st.srPeriod=_t,48&Mt){case 0:st.srPhase=0;break;case 16:st.srPhase=.25*_t;break;case 32:st.srPhase=.5*_t;break;case 48:st.srPhase=.75*_t;break;default:throw new Error("invalid S45ROUND value")}st.srThreshold=(Mt&=15)===0?0:(Mt/8-.5)*_t},void 0,void 0,function(st){h.DEBUG&&console.log(st.step,"ROFF[]"),st.round=El},void 0,function(st){h.DEBUG&&console.log(st.step,"RUTG[]"),st.round=Ea},function(st){h.DEBUG&&console.log(st.step,"RDTG[]"),st.round=Ps},uo,uo,void 0,void 0,void 0,void 0,void 0,function(st){var _t=st.stack.pop();h.DEBUG&&console.log(st.step,"SCANCTRL[]",_t)},Pl.bind(void 0,0),Pl.bind(void 0,1),function(st){var _t=st.stack,Mt=_t.pop(),Ot=0;h.DEBUG&&console.log(st.step,"GETINFO[]",Mt),1&Mt&&(Ot=35),32&Mt&&(Ot|=4096),_t.push(Ot)},void 0,function(st){var _t=st.stack,Mt=_t.pop(),Ot=_t.pop(),zt=_t.pop();h.DEBUG&&console.log(st.step,"ROLL[]"),_t.push(Ot),_t.push(Mt),_t.push(zt)},function(st){var _t=st.stack,Mt=_t.pop(),Ot=_t.pop();h.DEBUG&&console.log(st.step,"MAX[]",Mt,Ot),_t.push(Math.max(Ot,Mt))},function(st){var _t=st.stack,Mt=_t.pop(),Ot=_t.pop();h.DEBUG&&console.log(st.step,"MIN[]",Mt,Ot),_t.push(Math.min(Ot,Mt))},function(st){var _t=st.stack.pop();h.DEBUG&&console.log(st.step,"SCANTYPE[]",_t)},function(st){var _t=st.stack.pop(),Mt=st.stack.pop();switch(h.DEBUG&&console.log(st.step,"INSTCTRL[]",_t,Mt),_t){case 1:return void(st.inhibitGridFit=!!Mt);case 2:return void(st.ignoreCvt=!!Mt);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Da.bind(void 0,1),Da.bind(void 0,2),Da.bind(void 0,3),Da.bind(void 0,4),Da.bind(void 0,5),Da.bind(void 0,6),Da.bind(void 0,7),Da.bind(void 0,8),La.bind(void 0,1),La.bind(void 0,2),La.bind(void 0,3),La.bind(void 0,4),La.bind(void 0,5),La.bind(void 0,6),La.bind(void 0,7),La.bind(void 0,8),kn.bind(void 0,0,0,0,0,0),kn.bind(void 0,0,0,0,0,1),kn.bind(void 0,0,0,0,0,2),kn.bind(void 0,0,0,0,0,3),kn.bind(void 0,0,0,0,1,0),kn.bind(void 0,0,0,0,1,1),kn.bind(void 0,0,0,0,1,2),kn.bind(void 0,0,0,0,1,3),kn.bind(void 0,0,0,1,0,0),kn.bind(void 0,0,0,1,0,1),kn.bind(void 0,0,0,1,0,2),kn.bind(void 0,0,0,1,0,3),kn.bind(void 0,0,0,1,1,0),kn.bind(void 0,0,0,1,1,1),kn.bind(void 0,0,0,1,1,2),kn.bind(void 0,0,0,1,1,3),kn.bind(void 0,0,1,0,0,0),kn.bind(void 0,0,1,0,0,1),kn.bind(void 0,0,1,0,0,2),kn.bind(void 0,0,1,0,0,3),kn.bind(void 0,0,1,0,1,0),kn.bind(void 0,0,1,0,1,1),kn.bind(void 0,0,1,0,1,2),kn.bind(void 0,0,1,0,1,3),kn.bind(void 0,0,1,1,0,0),kn.bind(void 0,0,1,1,0,1),kn.bind(void 0,0,1,1,0,2),kn.bind(void 0,0,1,1,0,3),kn.bind(void 0,0,1,1,1,0),kn.bind(void 0,0,1,1,1,1),kn.bind(void 0,0,1,1,1,2),kn.bind(void 0,0,1,1,1,3),kn.bind(void 0,1,0,0,0,0),kn.bind(void 0,1,0,0,0,1),kn.bind(void 0,1,0,0,0,2),kn.bind(void 0,1,0,0,0,3),kn.bind(void 0,1,0,0,1,0),kn.bind(void 0,1,0,0,1,1),kn.bind(void 0,1,0,0,1,2),kn.bind(void 0,1,0,0,1,3),kn.bind(void 0,1,0,1,0,0),kn.bind(void 0,1,0,1,0,1),kn.bind(void 0,1,0,1,0,2),kn.bind(void 0,1,0,1,0,3),kn.bind(void 0,1,0,1,1,0),kn.bind(void 0,1,0,1,1,1),kn.bind(void 0,1,0,1,1,2),kn.bind(void 0,1,0,1,1,3),kn.bind(void 0,1,1,0,0,0),kn.bind(void 0,1,1,0,0,1),kn.bind(void 0,1,1,0,0,2),kn.bind(void 0,1,1,0,0,3),kn.bind(void 0,1,1,0,1,0),kn.bind(void 0,1,1,0,1,1),kn.bind(void 0,1,1,0,1,2),kn.bind(void 0,1,1,0,1,3),kn.bind(void 0,1,1,1,0,0),kn.bind(void 0,1,1,1,0,1),kn.bind(void 0,1,1,1,0,2),kn.bind(void 0,1,1,1,0,3),kn.bind(void 0,1,1,1,1,0),kn.bind(void 0,1,1,1,1,1),kn.bind(void 0,1,1,1,1,2),kn.bind(void 0,1,1,1,1,3)],Vu=Array.from||function(st){return st.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};function oi(st){(st=st||{}).empty||(Ca(st.familyName,"When creating a new Font object, familyName is required."),Ca(st.styleName,"When creating a new Font object, styleName is required."),Ca(st.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Ca(st.ascender,"When creating a new Font object, ascender is required."),Ca(st.descender,"When creating a new Font object, descender is required."),Ca(st.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:st.familyName||" "},fontSubfamily:{en:st.styleName||" "},fullName:{en:st.fullName||st.familyName+" "+st.styleName},postScriptName:{en:st.postScriptName||(st.familyName+st.styleName).replace(/\s/g,"")},designer:{en:st.designer||" "},designerURL:{en:st.designerURL||" "},manufacturer:{en:st.manufacturer||" "},manufacturerURL:{en:st.manufacturerURL||" "},license:{en:st.license||" "},licenseURL:{en:st.licenseURL||" "},version:{en:st.version||"Version 0.1"},description:{en:st.description||" "},copyright:{en:st.copyright||" "},trademark:{en:st.trademark||" "}},this.unitsPerEm=st.unitsPerEm||1e3,this.ascender=st.ascender,this.descender=st.descender,this.createdTimestamp=st.createdTimestamp,this.tables={os2:{usWeightClass:st.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:st.widthClass||this.usWidthClasses.MEDIUM,fsSelection:st.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new En.GlyphSet(this,st.glyphs||[]),this.encoding=new Dr(this),this.position=new aa(this),this.substitution=new Ji(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting||(this.outlinesFormat==="truetype"?this._hinting=new Ha(this):void 0)}})}function Fl(st,_t){var Mt,Ot=JSON.stringify(st),zt=256;for(Mt in _t){var Xt=parseInt(Mt);if(Xt&&!(Xt<256)){if(JSON.stringify(_t[Mt])===Ot)return Xt;zt<=Xt&&(zt=Xt+1)}}return _t[zt]=st,zt}oi.prototype.hasChar=function(st){return this.encoding.charToGlyphIndex(st)!==null},oi.prototype.charToGlyphIndex=function(st){return this.encoding.charToGlyphIndex(st)},oi.prototype.charToGlyph=function(st){return st=this.charToGlyphIndex(st),this.glyphs.get(st)||this.glyphs.get(0)},oi.prototype.stringToGlyphs=function(st,_t){_t=_t||this.defaultRenderOptions;for(var Mt=Vu(st),Ot=[],zt=0;zt<Mt.length;zt+=1){var Xt=Mt[zt];Ot.push(this.charToGlyphIndex(Xt))}var $t=Ot.length;if(_t.features){var st=_t.script||this.substitution.getDefaultScriptName(),fr=[];_t.features.liga&&(fr=fr.concat(this.substitution.getFeature("liga",st,_t.language))),_t.features.rlig&&(fr=fr.concat(this.substitution.getFeature("rlig",st,_t.language)));for(var wr=0;wr<$t;wr+=1)for(var xr=0;xr<fr.length;xr++){for(var Rr=fr[xr],Wr=Rr.sub,Fr=Wr.length,Mr=0;Mr<Fr&&Wr[Mr]===Ot[wr+Mr];)Mr++;Mr===Fr&&(Ot.splice(wr,Fr,Rr.by),$t=$t-Fr+1)}}for(var hn=new Array($t),tn=this.glyphs.get(0),un=0;un<$t;un+=1)hn[un]=this.glyphs.get(Ot[un])||tn;return hn},oi.prototype.nameToGlyphIndex=function(st){return this.glyphNames.nameToGlyphIndex(st)},oi.prototype.nameToGlyph=function(st){return st=this.nameToGlyphIndex(st),this.glyphs.get(st)||this.glyphs.get(0)},oi.prototype.glyphIndexToName=function(st){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(st):""},oi.prototype.getKerningValue=function(st,_t){st=st.index||st,_t=_t.index||_t;var Mt=this.position.defaultKerningTables;return Mt?this.position.getKerningValue(Mt,st,_t):this.kerningPairs[st+","+_t]||0},oi.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},oi.prototype.forEachGlyph=function(st,_t,Mt,Ot,zt,Xt){_t=_t!==void 0?_t:0,Mt=Mt!==void 0?Mt:0,zt=zt||this.defaultRenderOptions;var $t,fr=1/this.unitsPerEm*(Ot=Ot!==void 0?Ot:72),wr=this.stringToGlyphs(st,zt);zt.kerning&&(st=zt.script||this.position.getDefaultScriptName(),$t=this.position.getKerningTables(st,zt.language));for(var xr=0;xr<wr.length;xr+=1){var Rr=wr[xr];Xt.call(this,Rr,_t,Mt,Ot,zt),Rr.advanceWidth&&(_t+=Rr.advanceWidth*fr),zt.kerning&&xr<wr.length-1&&(_t+=($t?this.position.getKerningValue($t,Rr.index,wr[xr+1].index):this.getKerningValue(Rr,wr[xr+1]))*fr),zt.letterSpacing?_t+=zt.letterSpacing*Ot:zt.tracking&&(_t+=zt.tracking/1e3*Ot)}return _t},oi.prototype.getPath=function(st,_t,Mt,Ot,zt){var Xt=new Yt;return this.forEachGlyph(st,_t,Mt,Ot,zt,function($t,fr,wr,xr){$t=$t.getPath(fr,wr,xr,zt,this),Xt.extend($t)}),Xt},oi.prototype.getPaths=function(st,_t,Mt,Ot,zt){var Xt=[];return this.forEachGlyph(st,_t,Mt,Ot,zt,function($t,fr,wr,xr){$t=$t.getPath(fr,wr,xr,zt,this),Xt.push($t)}),Xt},oi.prototype.getAdvanceWidth=function(st,_t,Mt){return this.forEachGlyph(st,0,0,_t,Mt,function(){})},oi.prototype.draw=function(st,_t,Mt,Ot,zt,Xt){this.getPath(_t,Mt,Ot,zt,Xt).draw(st)},oi.prototype.drawPoints=function(st,_t,Mt,Ot,zt,Xt){this.forEachGlyph(_t,Mt,Ot,zt,Xt,function($t,fr,wr,xr){$t.drawPoints(st,fr,wr,xr)})},oi.prototype.drawMetrics=function(st,_t,Mt,Ot,zt,Xt){this.forEachGlyph(_t,Mt,Ot,zt,Xt,function($t,fr,wr,xr){$t.drawMetrics(st,fr,wr,xr)})},oi.prototype.getEnglishName=function(st){if(st=this.names[st],st)return st.en},oi.prototype.validate=function(){var st=this;function _t(Mt){Mt=st.getEnglishName(Mt),Mt&&Mt.trim().length}_t("fontFamily"),_t("weightName"),_t("manufacturer"),_t("copyright"),_t("version"),this.unitsPerEm},oi.prototype.toTables=function(){return Jo.fontToTable(this)},oi.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},oi.prototype.toArrayBuffer=function(){for(var st=this.toTables().encode(),_t=new ArrayBuffer(st.length),Mt=new Uint8Array(_t),Ot=0;Ot<st.length;Ot++)Mt[Ot]=st[Ot];return _t},oi.prototype.download=function(st){var _t=this.getEnglishName("fontFamily"),Mt=this.getEnglishName("fontSubfamily"),Ot=(st=st||_t.replace(/\s/g,"")+"-"+Mt+".otf",this.toArrayBuffer());typeof window<"u"?(window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,Ot.byteLength,function(zt){zt.root.getFile(st,{create:!0},function(Xt){Xt.createWriter(function($t){var fr=new DataView(Ot),fr=new Blob([fr],{type:"font/opentype"});$t.write(fr),$t.addEventListener("writeend",function(){location.href=Xt.toURL()},!1)})})},function(zt){throw new Error(zt.name+": "+zt.message)})):(_t=t("fs"),Mt=function(zt){for(var Xt=new s(zt.byteLength),$t=new Uint8Array(zt),fr=0;fr<Xt.length;++fr)Xt[fr]=$t[fr];return Xt}(Ot),_t.writeFileSync(st,Mt))},oi.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},oi.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},oi.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var qu={make:function(st,_t){var Mt=new kr.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:st.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:st.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*st.axes.length}]);Mt.offsetToData=Mt.sizeOf();for(var Ot,zt,Xt,$t=0;$t<st.axes.length;$t++)Mt.fields=Mt.fields.concat((Ot=$t,zt=st.axes[$t],Xt=_t,Xt=Fl(zt.name,_t),[{name:"tag_"+Ot,type:"TAG",value:zt.tag},{name:"minValue_"+Ot,type:"FIXED",value:zt.minValue<<16},{name:"defaultValue_"+Ot,type:"FIXED",value:zt.defaultValue<<16},{name:"maxValue_"+Ot,type:"FIXED",value:zt.maxValue<<16},{name:"flags_"+Ot,type:"USHORT",value:0},{name:"nameID_"+Ot,type:"USHORT",value:Xt}]));for(var fr=0;fr<st.instances.length;fr++)Mt.fields=Mt.fields.concat(function(wr,xr,Rr,Wr){for(var Fr=[{name:"nameID_"+wr,type:"USHORT",value:Fl(xr.name,Wr)},{name:"flags_"+wr,type:"USHORT",value:0}],Mr=0;Mr<Rr.length;++Mr){var hn=Rr[Mr].tag;Fr.push({name:"axis_"+wr+" "+hn,type:"FIXED",value:xr.coordinates[hn]<<16})}return Fr}(fr,st.instances[fr],st.axes,_t));return Mt},parse:function(st,_t,Mt){for(var Ot,zt,Xt,$t,fr=new Cr.Parser(st,_t),wr=fr.parseULong(),xr=(Rt.argument(wr===65536,"Unsupported fvar table version."),fr.parseOffset16()),Rr=(fr.skip("uShort",1),fr.parseUShort()),Wr=fr.parseUShort(),Fr=fr.parseUShort(),Mr=fr.parseUShort(),hn=[],tn=0;tn<Rr;tn++)hn.push((Ot=st,zt=_t+xr+tn*Wr,Xt=Mt,$t={},Ot=new Cr.Parser(Ot,zt),$t.tag=Ot.parseTag(),$t.minValue=Ot.parseFixed(),$t.defaultValue=Ot.parseFixed(),$t.maxValue=Ot.parseFixed(),Ot.skip("uShort",1),$t.name=Xt[Ot.parseUShort()]||{},$t));for(var un=[],Zr=_t+xr+Rr*Wr,Qr=0;Qr<Fr;Qr++)un.push(function(On,Un,Ln,In){var Vn={},hi=new Cr.Parser(On,Un);Vn.name=In[hi.parseUShort()]||{},hi.skip("uShort",1),Vn.coordinates={};for(var Qn=0;Qn<Ln.length;++Qn)Vn.coordinates[Ln[Qn].tag]=hi.parseFixed();return Vn}(st,Zr+Qr*Mr,hn,Mt));return{axes:hn,instances:un}}},sa=new Array(10);sa[1]=function(){var st=this.offset+this.relativeOffset,_t=this.parseUShort();return _t===1?{posFormat:1,coverage:this.parsePointer(Er.coverage),value:this.parseValueRecord()}:_t===2?{posFormat:2,coverage:this.parsePointer(Er.coverage),values:this.parseValueRecordList()}:void Rt.assert(!1,"0x"+st.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},sa[2]=function(){var st,_t,Mt,Ot,Xt=this.offset+this.relativeOffset,zt=this.parseUShort(),Xt=(Rt.assert(zt===1||zt===2,"0x"+Xt.toString(16)+": GPOS lookup type 2 format must be 1 or 2."),this.parsePointer(Er.coverage)),$t=this.parseUShort(),fr=this.parseUShort();return zt===1?{posFormat:zt,coverage:Xt,valueFormat1:$t,valueFormat2:fr,pairSets:this.parseList(Er.pointer(Er.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord($t),value2:this.parseValueRecord(fr)}})))}:zt===2?(st=this.parsePointer(Er.classDef),_t=this.parsePointer(Er.classDef),Mt=this.parseUShort(),Ot=this.parseUShort(),{posFormat:zt,coverage:Xt,valueFormat1:$t,valueFormat2:fr,classDef1:st,classDef2:_t,class1Count:Mt,class2Count:Ot,classRecords:this.parseList(Mt,Er.list(Ot,function(){return{value1:this.parseValueRecord($t),value2:this.parseValueRecord(fr)}}))}):void 0},sa[3]=function(){return{error:"GPOS Lookup 3 not supported"}},sa[4]=function(){return{error:"GPOS Lookup 4 not supported"}},sa[5]=function(){return{error:"GPOS Lookup 5 not supported"}},sa[6]=function(){return{error:"GPOS Lookup 6 not supported"}},sa[7]=function(){return{error:"GPOS Lookup 7 not supported"}},sa[8]=function(){return{error:"GPOS Lookup 8 not supported"}},sa[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var Yu=new Array(10),Xu={parse:function(st,_t){return _t=(st=new Er(st,_t=_t||0)).parseVersion(1),Rt.argument(_t===1||_t===1.1,"Unsupported GPOS table version "+_t),_t===1?{version:_t,scripts:st.parseScriptList(),features:st.parseFeatureList(),lookups:st.parseLookupList(sa)}:{version:_t,scripts:st.parseScriptList(),features:st.parseFeatureList(),lookups:st.parseLookupList(sa),variations:st.parseFeatureVariationsList()}},make:function(st){return new kr.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new kr.ScriptList(st.scripts)},{name:"features",type:"TABLE",value:new kr.FeatureList(st.features)},{name:"lookups",type:"TABLE",value:new kr.LookupList(st.lookups,Yu)}])}},$u={parse:function(st,_t){if(st=new Cr.Parser(st,_t),(_t=st.parseUShort())===0){var Mt=st,Ot={},Wr=(Mt.skip("uShort"),Mt.parseUShort()),zt=(Rt.argument(Wr===0,"Unsupported kern sub-table version."),Mt.skip("uShort",2),Mt.parseUShort());Mt.skip("uShort",3);for(var Xt=0;Xt<zt;Xt+=1){var $t=Mt.parseUShort(),fr=Mt.parseUShort(),wr=Mt.parseShort();Ot[$t+","+fr]=wr}return Ot}if(_t!==1)throw new Error("Unsupported kern table version ("+_t+").");var xr=st,Rr={},Wr=(xr.skip("uShort"),1<xr.parseULong()&&console.warn("Only the first kern subtable is supported."),xr.skip("uLong"),255&xr.parseUShort());if(xr.skip("uShort"),Wr==0){var Fr=xr.parseUShort();xr.skip("uShort",3);for(var Mr=0;Mr<Fr;Mr+=1){var hn=xr.parseUShort(),tn=xr.parseUShort(),un=xr.parseShort();Rr[hn+","+tn]=un}}return Rr}},Wu={parse:function(st,_t,Mt,Ot){for(var zt=new Cr.Parser(st,_t),Xt=Ot?zt.parseUShort:zt.parseULong,$t=[],fr=0;fr<Mt+1;fr+=1){var wr=Xt.call(zt);Ot&&(wr*=2),$t.push(wr)}return $t}};function Us(st,_t){t("fs").readFile(st,function(Mt,Ot){if(Mt)return _t(Mt.message);_t(null,Ls(Ot))})}function Bo(st,_t){var Mt=new XMLHttpRequest;Mt.open("get",st,!0),Mt.responseType="arraybuffer",Mt.onload=function(){return Mt.response?_t(null,Mt.response):_t("Font could not be loaded: "+Mt.statusText)},Mt.onerror=function(){_t("Font could not be loaded")},Mt.send()}function Ul(st,_t){for(var Mt=[],Ot=12,zt=0;zt<_t;zt+=1){var Xt=Cr.getTag(st,Ot),$t=Cr.getULong(st,Ot+4),fr=Cr.getULong(st,Ot+8),wr=Cr.getULong(st,Ot+12);Mt.push({tag:Xt,checksum:$t,offset:fr,length:wr,compression:!1}),Ot+=16}return Mt}function ji(Mt,_t){if(_t.compression!=="WOFF")return{data:Mt,offset:_t.offset};var Mt=new Uint8Array(Mt.buffer,_t.offset+2,_t.compressedLength-2),Ot=new Uint8Array(_t.length);if(Ht(Mt,Ot),Ot.byteLength!==_t.length)throw new Error("Decompression error: "+_t.tag+" decompressed length doesn't match recorded length");return{data:new DataView(Ot.buffer,0),offset:0}}function os(Qr){var _t,Mt,Ot,zt,Xt,$t,fr,wr,xr,Rr,Wr,Fr,Mr,hn,tn=new oi({empty:!0}),un=new DataView(Qr,0),Zr=[],Qr=Cr.getTag(un,0);if(Qr==="\0\0\0"||Qr==="true"||Qr==="typ1")tn.outlinesFormat="truetype",Zr=Ul(un,Ot=Cr.getUShort(un,4));else if(Qr==="OTTO")tn.outlinesFormat="cff",Zr=Ul(un,Ot=Cr.getUShort(un,4));else{if(Qr!=="wOFF")throw new Error("Unsupported OpenType signature "+Qr);var On=Cr.getTag(un,4);if(On==="\0\0\0")tn.outlinesFormat="truetype";else{if(On!=="OTTO")throw new Error("Unsupported OpenType flavor "+Qr);tn.outlinesFormat="cff"}Zr=function(si,ni){for(var Ei=[],gi=44,Ti=0;Ti<ni;Ti+=1){var ui=Cr.getTag(si,gi),Ri=Cr.getULong(si,gi+4),la=Cr.getULong(si,gi+8),ua=Cr.getULong(si,gi+12),ss=void 0,ss=la<ua&&"WOFF";Ei.push({tag:ui,offset:Ri,compression:ss,compressedLength:la,length:ua}),gi+=20}return Ei}(un,Ot=Cr.getUShort(un,12))}for(var Un=0;Un<Ot;Un+=1){var Ln=Zr[Un],In=void 0;switch(Ln.tag){case"cmap":In=ji(un,Ln),tn.tables.cmap=tr.parse(In.data,In.offset),tn.encoding=new zr(tn.tables.cmap);break;case"cvt ":In=ji(un,Ln),hn=new Cr.Parser(In.data,In.offset),tn.tables.cvt=hn.parseShortList(Ln.length/2);break;case"fvar":Xt=Ln;break;case"fpgm":In=ji(un,Ln),hn=new Cr.Parser(In.data,In.offset),tn.tables.fpgm=hn.parseByteList(Ln.length);break;case"head":In=ji(un,Ln),tn.tables.head=on.parse(In.data,In.offset),tn.unitsPerEm=tn.tables.head.unitsPerEm,_t=tn.tables.head.indexToLocFormat;break;case"hhea":In=ji(un,Ln),tn.tables.hhea=mr.parse(In.data,In.offset),tn.ascender=tn.tables.hhea.ascender,tn.descender=tn.tables.hhea.descender,tn.numberOfHMetrics=tn.tables.hhea.numberOfHMetrics;break;case"hmtx":xr=Ln;break;case"ltag":In=ji(un,Ln),Mt=Yr.parse(In.data,In.offset);break;case"maxp":In=ji(un,Ln),tn.tables.maxp=Hr.parse(In.data,In.offset),tn.numGlyphs=tn.tables.maxp.numGlyphs;break;case"name":Fr=Ln;break;case"OS/2":In=ji(un,Ln),tn.tables.os2=Gn.parse(In.data,In.offset);break;case"post":In=ji(un,Ln),tn.tables.post=Ai.parse(In.data,In.offset),tn.glyphNames=new vn(tn.tables.post);break;case"prep":In=ji(un,Ln),hn=new Cr.Parser(In.data,In.offset),tn.tables.prep=hn.parseByteList(Ln.length);break;case"glyf":$t=Ln;break;case"loca":Wr=Ln;break;case"CFF ":zt=Ln;break;case"kern":Rr=Ln;break;case"GPOS":fr=Ln;break;case"GSUB":wr=Ln;break;case"meta":Mr=Ln}}if(On=ji(un,Fr),tn.tables.name=Bn.parse(On.data,On.offset,Mt),tn.names=tn.tables.name,$t&&Wr)Qr=_t===0,On=ji(un,Wr),On=Wu.parse(On.data,On.offset,tn.numGlyphs,Qr),Qr=ji(un,$t),tn.glyphs=Ga.parse(Qr.data,Qr.offset,On,tn);else{if(!zt)throw new Error("Font doesn't contain TrueType or CFF outlines.");Qr=ji(un,zt),Jr.parse(Qr.data,Qr.offset,tn)}for(var On=ji(un,xr),Vn=(gr.parse(On.data,On.offset,tn.numberOfHMetrics,tn.numGlyphs,tn.glyphs),tn),hi=Vn.tables.cmap.glyphIndexMap,Qn=Object.keys(hi),bi=0;bi<Qn.length;bi+=1){var Bi,Fi=Qn[bi],ta=hi[Fi];(Bi=Vn.glyphs.get(ta)).addUnicode(parseInt(Fi))}for(var ai=0;ai<Vn.glyphs.length;ai+=1)Bi=Vn.glyphs.get(ai),Vn.cffEncoding?Vn.isCIDFont?Bi.name="gid"+ai:Bi.name=Vn.cffEncoding.charset[ai]:Vn.glyphNames.names&&(Bi.name=Vn.glyphNames.glyphIndexToName(ai));return Rr?(Qr=ji(un,Rr),tn.kerningPairs=$u.parse(Qr.data,Qr.offset)):tn.kerningPairs={},fr&&(On=ji(un,fr),tn.tables.gpos=Xu.parse(On.data,On.offset),tn.position.init()),wr&&(Qr=ji(un,wr),tn.tables.gsub=Qi.parse(Qr.data,Qr.offset)),Xt&&(On=ji(un,Xt),tn.tables.fvar=qu.parse(On.data,On.offset,tn.names)),Mr&&(Qr=ji(un,Mr),tn.tables.meta=Hn.parse(Qr.data,Qr.offset),tn.metas=tn.tables.meta),tn}h.Font=oi,h.Glyph=wn,h.Path=Yt,h.BoundingBox=Ut,h._parse=Cr,h.parse=os,h.load=function(st,_t){(typeof window>"u"?Us:Bo)(st,function(Mt,Ot){if(Mt)return _t(Mt);var zt;try{zt=os(Ot)}catch(Xt){return _t(Xt,null)}return _t(null,zt)})},h.loadSync=function(st){return os(Ls(t("fs").readFileSync(st)))},Object.defineProperty(h,"__esModule",{value:!0})},d(typeof u=="object"&&l!==void 0?u:p.opentype={})}).call(this,t("buffer").Buffer)},{buffer:4,fs:2}],258:[function(t,l,u){(function(s){function p(N,Be){for(var b=0,E=N.length-1;0<=E;E--){var de=N[E];de==="."?N.splice(E,1):de===".."?(N.splice(E,1),b++):b&&(N.splice(E,1),b--)}if(Be)for(;b--;)N.unshift("..");return N}function d(N,Be){if(N.filter)return N.filter(Be);for(var b=[],E=0;E<N.length;E++)Be(N[E],E,N)&&b.push(N[E]);return b}u.resolve=function(){for(var N="",Be=!1,b=arguments.length-1;-1<=b&&!Be;b--){var E=0<=b?arguments[b]:s.cwd();if(typeof E!="string")throw new TypeError("Arguments to path.resolve must be strings");E&&(N=E+"/"+N,Be=E.charAt(0)==="/")}return(Be?"/":"")+(N=p(d(N.split("/"),function(de){return!!de}),!Be).join("/"))||"."},u.normalize=function(N){var Be=u.isAbsolute(N),b=h(N,-1)==="/";return(N=(N=p(d(N.split("/"),function(E){return!!E}),!Be).join("/"))||Be?N:".")&&b&&(N+="/"),(Be?"/":"")+N},u.isAbsolute=function(N){return N.charAt(0)==="/"},u.join=function(){var N=Array.prototype.slice.call(arguments,0);return u.normalize(d(N,function(Be,b){if(typeof Be!="string")throw new TypeError("Arguments to path.join must be strings");return Be}).join("/"))},u.relative=function(N,Be){function b(nt){for(var tt=0;tt<nt.length&&nt[tt]==="";tt++);for(var ft=nt.length-1;0<=ft&&nt[ft]==="";ft--);return ft<tt?[]:nt.slice(tt,ft-tt+1)}N=u.resolve(N).substr(1),Be=u.resolve(Be).substr(1);for(var E=b(N.split("/")),de=b(Be.split("/")),pe=Math.min(E.length,de.length),Ye=pe,me=0;me<pe;me++)if(E[me]!==de[me]){Ye=me;break}for(var Le=[],me=Ye;me<E.length;me++)Le.push("..");return(Le=Le.concat(de.slice(Ye))).join("/")},u.sep="/",u.delimiter=":",u.dirname=function(N){if(typeof N!="string"&&(N+=""),N.length===0)return".";for(var Be=N.charCodeAt(0)===47,b=-1,E=!0,de=N.length-1;1<=de;--de)if(N.charCodeAt(de)===47){if(!E){b=de;break}}else E=!1;return b===-1?Be?"/":".":Be&&b===1?"/":N.slice(0,b)},u.basename=function(N,Be){return N=function(b){typeof b!="string"&&(b+="");for(var E=0,de=-1,pe=!0,Ye=b.length-1;0<=Ye;--Ye)if(b.charCodeAt(Ye)===47){if(!pe){E=Ye+1;break}}else de===-1&&(pe=!1,de=Ye+1);return de===-1?"":b.slice(E,de)}(N),N=Be&&N.substr(-1*Be.length)===Be?N.substr(0,N.length-Be.length):N},u.extname=function(N){typeof N!="string"&&(N+="");for(var Be=-1,b=0,E=-1,de=!0,pe=0,Ye=N.length-1;0<=Ye;--Ye){var me=N.charCodeAt(Ye);if(me===47){if(de)continue;b=Ye+1;break}E===-1&&(de=!1,E=Ye+1),me===46?Be===-1?Be=Ye:pe!==1&&(pe=1):Be!==-1&&(pe=-1)}return Be===-1||E===-1||pe===0||pe===1&&Be===E-1&&Be===b+1?"":N.slice(Be,E)};var h="ab".substr(-1)==="b"?function(N,Be,b){return N.substr(Be,b)}:function(N,Be,b){return Be<0&&(Be=N.length+Be),N.substr(Be,b)}}).call(this,t("_process"))},{_process:259}],259:[function(t,d,u){var s,p,d=d.exports={};function h(){throw new Error("setTimeout has not been defined")}function N(){throw new Error("clearTimeout has not been defined")}try{s=typeof setTimeout=="function"?setTimeout:h}catch{s=h}try{p=typeof clearTimeout=="function"?clearTimeout:N}catch{p=N}function Be(tt){if(s===setTimeout)return setTimeout(tt,0);if((s===h||!s)&&setTimeout)return(s=setTimeout)(tt,0);try{return s(tt,0)}catch{try{return s.call(null,tt,0)}catch{return s.call(this,tt,0)}}}var b,E=[],de=!1,pe=-1;function Ye(){de&&b&&(de=!1,b.length?E=b.concat(E):pe=-1,E.length&&me())}function me(){if(!de){for(var tt=Be(Ye),ft=(de=!0,E.length);ft;){for(b=E,E=[];++pe<ft;)b&&b[pe].run();pe=-1,ft=E.length}b=null,de=!1,function(yt){if(p===clearTimeout)return clearTimeout(yt);if((p===N||!p)&&clearTimeout)return(p=clearTimeout)(yt);try{p(yt)}catch{try{return p.call(null,yt)}catch{return p.call(this,yt)}}}(tt)}}function Le(tt,ft){this.fun=tt,this.array=ft}function nt(){}d.nextTick=function(tt){var ft=new Array(arguments.length-1);if(1<arguments.length)for(var yt=1;yt<arguments.length;yt++)ft[yt-1]=arguments[yt];E.push(new Le(tt,ft)),E.length!==1||de||Be(me)},Le.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=nt,d.addListener=nt,d.once=nt,d.off=nt,d.removeListener=nt,d.removeAllListeners=nt,d.emit=nt,d.prependListener=nt,d.prependOnceListener=nt,d.listeners=function(tt){return[]},d.binding=function(tt){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(tt){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],260:[function(t,l,u){l=function(s){var p,d=Object.prototype,h=d.hasOwnProperty,gt=typeof Symbol=="function"?Symbol:{},N=gt.iterator||"@@iterator",Be=gt.asyncIterator||"@@asyncIterator",b=gt.toStringTag||"@@toStringTag";function E(qt,Lt,Gt,Vt){var Yt,Zt,vt,Rt,Lt=Lt&&Lt.prototype instanceof tt?Lt:tt,Lt=Object.create(Lt.prototype),Vt=new It(Vt||[]);return Lt._invoke=(Yt=qt,Zt=Gt,vt=Vt,Rt=pe,function(Jt,er){if(Rt===me)throw new Error("Generator is already running");if(Rt===Le){if(Jt==="throw")throw er;return Pt()}for(vt.method=Jt,vt.arg=er;;){var ur=vt.delegate;if(ur&&(ur=function yr(Qt,nr){var or=Qt.iterator[nr.method];if(or===p){if(nr.delegate=null,nr.method==="throw"){if(Qt.iterator.return&&(nr.method="return",nr.arg=p,yr(Qt,nr),nr.method==="throw"))return nt;nr.method="throw",nr.arg=new TypeError("The iterator does not provide a 'throw' method")}return nt}if(or=de(or,Qt.iterator,nr.arg),or.type==="throw")return nr.method="throw",nr.arg=or.arg,nr.delegate=null,nt;if(or=or.arg,!or)return nr.method="throw",nr.arg=new TypeError("iterator result is not an object"),nr.delegate=null,nt;{if(!or.done)return or;nr[Qt.resultName]=or.value,nr.next=Qt.nextLoc,nr.method!=="return"&&(nr.method="next",nr.arg=p)}return nr.delegate=null,nt}(ur,vt),ur)){if(ur===nt)continue;return ur}if(vt.method==="next")vt.sent=vt._sent=vt.arg;else if(vt.method==="throw"){if(Rt===pe)throw Rt=Le,vt.arg;vt.dispatchException(vt.arg)}else vt.method==="return"&&vt.abrupt("return",vt.arg);if(Rt=me,ur=de(Yt,Zt,vt),ur.type==="normal"){if(Rt=vt.done?Le:Ye,ur.arg!==nt)return{value:ur.arg,done:vt.done}}else ur.type==="throw"&&(Rt=Le,vt.method="throw",vt.arg=ur.arg)}}),Lt}function de(qt,Ht,Gt){try{return{type:"normal",arg:qt.call(Ht,Gt)}}catch(Ut){return{type:"throw",arg:Ut}}}s.wrap=E;var pe="suspendedStart",Ye="suspendedYield",me="executing",Le="completed",nt={};function tt(){}function ft(){}function yt(){}var gt={},mt=(gt[N]=function(){return this},Object.getPrototypeOf),mt=mt&&mt(mt(Dt([]))),wt=(mt&&mt!==d&&h.call(mt,N)&&(gt=mt),yt.prototype=tt.prototype=Object.create(gt));function St(qt){["next","throw","return"].forEach(function(Ht){qt[Ht]=function(Gt){return this._invoke(Ht,Gt)}})}function bt(qt){var Ht;this._invoke=function(Gt,Ut){function Yt(){return new Promise(function(Zt,vt){(function Rt(yr,Vt,Jt,er){var ur,yr=de(qt[yr],qt,Vt);if(yr.type!=="throw")return(Vt=(ur=yr.arg).value)&&typeof Vt=="object"&&h.call(Vt,"__await")?Promise.resolve(Vt.__await).then(function(Qt){Rt("next",Qt,Jt,er)},function(Qt){Rt("throw",Qt,Jt,er)}):Promise.resolve(Vt).then(function(Qt){ur.value=Qt,Jt(ur)},function(Qt){return Rt("throw",Qt,Jt,er)});er(yr.arg)})(Gt,Ut,Zt,vt)})}return Ht=Ht?Ht.then(Yt,Yt):Yt()}}function Ct(qt){var Ht={tryLoc:qt[0]};1 in qt&&(Ht.catchLoc=qt[1]),2 in qt&&(Ht.finallyLoc=qt[2],Ht.afterLoc=qt[3]),this.tryEntries.push(Ht)}function Et(qt){var Ht=qt.completion||{};Ht.type="normal",delete Ht.arg,qt.completion=Ht}function It(qt){this.tryEntries=[{tryLoc:"root"}],qt.forEach(Ct,this),this.reset(!0)}function Dt(qt){if(qt){var Ht,Gt=qt[N];if(Gt)return Gt.call(qt);if(typeof qt.next=="function")return qt;if(!isNaN(qt.length))return Ht=-1,(Gt=function Ut(){for(;++Ht<qt.length;)if(h.call(qt,Ht))return Ut.value=qt[Ht],Ut.done=!1,Ut;return Ut.value=p,Ut.done=!0,Ut}).next=Gt}return{next:Pt}}function Pt(){return{value:p,done:!0}}return(ft.prototype=wt.constructor=yt).constructor=ft,yt[b]=ft.displayName="GeneratorFunction",s.isGeneratorFunction=function(qt){return qt=typeof qt=="function"&&qt.constructor,!!qt&&(qt===ft||(qt.displayName||qt.name)==="GeneratorFunction")},s.mark=function(qt){return Object.setPrototypeOf?Object.setPrototypeOf(qt,yt):(qt.__proto__=yt,b in qt||(qt[b]="GeneratorFunction")),qt.prototype=Object.create(wt),qt},s.awrap=function(qt){return{__await:qt}},St(bt.prototype),bt.prototype[Be]=function(){return this},s.AsyncIterator=bt,s.async=function(qt,Ht,Gt,Ut){var Yt=new bt(E(qt,Ht,Gt,Ut));return s.isGeneratorFunction(Ht)?Yt:Yt.next().then(function(Zt){return Zt.done?Zt.value:Yt.next()})},St(wt),wt[b]="Generator",wt[N]=function(){return this},wt.toString=function(){return"[object Generator]"},s.keys=function(qt){var Ht,Gt=[];for(Ht in qt)Gt.push(Ht);return Gt.reverse(),function Ut(){for(;Gt.length;){var Yt=Gt.pop();if(Yt in qt)return Ut.value=Yt,Ut.done=!1,Ut}return Ut.done=!0,Ut}},s.values=Dt,It.prototype={constructor:It,reset:function(qt){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(Et),!qt)for(var Ht in this)Ht.charAt(0)==="t"&&h.call(this,Ht)&&!isNaN(+Ht.slice(1))&&(this[Ht]=p)},stop:function(){this.done=!0;var qt=this.tryEntries[0].completion;if(qt.type==="throw")throw qt.arg;return this.rval},dispatchException:function(qt){if(this.done)throw qt;var Ht=this;function Gt(Lt,Vt){return Zt.type="throw",Zt.arg=qt,Ht.next=Lt,Vt&&(Ht.method="next",Ht.arg=p),!!Vt}for(var Ut=this.tryEntries.length-1;0<=Ut;--Ut){var Yt=this.tryEntries[Ut],Zt=Yt.completion;if(Yt.tryLoc==="root")return Gt("end");if(Yt.tryLoc<=this.prev){var vt=h.call(Yt,"catchLoc"),Rt=h.call(Yt,"finallyLoc");if(vt&&Rt){if(this.prev<Yt.catchLoc)return Gt(Yt.catchLoc,!0);if(this.prev<Yt.finallyLoc)return Gt(Yt.finallyLoc)}else if(vt){if(this.prev<Yt.catchLoc)return Gt(Yt.catchLoc,!0)}else{if(!Rt)throw new Error("try statement without catch or finally");if(this.prev<Yt.finallyLoc)return Gt(Yt.finallyLoc)}}}},abrupt:function(qt,Ht){for(var Gt=this.tryEntries.length-1;0<=Gt;--Gt){var Ut=this.tryEntries[Gt];if(Ut.tryLoc<=this.prev&&h.call(Ut,"finallyLoc")&&this.prev<Ut.finallyLoc){var Yt=Ut;break}}var Zt=(Yt=Yt&&(qt==="break"||qt==="continue")&&Yt.tryLoc<=Ht&&Ht<=Yt.finallyLoc?null:Yt)?Yt.completion:{};return Zt.type=qt,Zt.arg=Ht,Yt?(this.method="next",this.next=Yt.finallyLoc,nt):this.complete(Zt)},complete:function(qt,Ht){if(qt.type==="throw")throw qt.arg;return qt.type==="break"||qt.type==="continue"?this.next=qt.arg:qt.type==="return"?(this.rval=this.arg=qt.arg,this.method="return",this.next="end"):qt.type==="normal"&&Ht&&(this.next=Ht),nt},finish:function(qt){for(var Ht=this.tryEntries.length-1;0<=Ht;--Ht){var Gt=this.tryEntries[Ht];if(Gt.finallyLoc===qt)return this.complete(Gt.completion,Gt.afterLoc),Et(Gt),nt}},catch:function(qt){for(var Ht=this.tryEntries.length-1;0<=Ht;--Ht){var Gt,Ut,Yt=this.tryEntries[Ht];if(Yt.tryLoc===qt)return(Gt=Yt.completion).type==="throw"&&(Ut=Gt.arg,Et(Yt)),Ut}throw new Error("illegal catch attempt")},delegateYield:function(qt,Ht,Gt){return this.delegate={iterator:Dt(qt),resultName:Ht,nextLoc:Gt},this.method==="next"&&(this.arg=p),nt}},s}(typeof l=="object"?l.exports:{});try{regeneratorRuntime=l}catch{Function("r","regeneratorRuntime = r")(l)}},{}],261:[function(t,l,u){(function(s){var p,d,h,N,Be,b,E,de,pe,Ye;function me(Et){if(typeof Et!="string"&&(Et=String(Et)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(Et))throw new TypeError("Invalid character in header field name");return Et.toLowerCase()}function Le(Et){return Et=typeof Et!="string"?String(Et):Et}function nt(Et){var It={next:function(){var Dt=Et.shift();return{done:Dt===void 0,value:Dt}}};return d&&(It[Symbol.iterator]=function(){return It}),It}function tt(Et){this.map={},Et instanceof tt?Et.forEach(function(It,Dt){this.append(Dt,It)},this):Array.isArray(Et)?Et.forEach(function(It){this.append(It[0],It[1])},this):Et&&Object.getOwnPropertyNames(Et).forEach(function(It){this.append(It,Et[It])},this)}function ft(Et){if(Et.bodyUsed)return Promise.reject(new TypeError("Already read"));Et.bodyUsed=!0}function yt(Et){return new Promise(function(It,Dt){Et.onload=function(){It(Et.result)},Et.onerror=function(){Dt(Et.error)}})}function gt(Et){var It=new FileReader,Dt=yt(It);return It.readAsArrayBuffer(Et),Dt}function mt(Et){var It;return Et.slice?Et.slice(0):((It=new Uint8Array(Et.byteLength)).set(new Uint8Array(Et)),It.buffer)}function wt(){return this.bodyUsed=!1,this._initBody=function(Et){if(this._bodyInit=Et)if(typeof Et=="string")this._bodyText=Et;else if(h&&Blob.prototype.isPrototypeOf(Et))this._bodyBlob=Et;else if(N&&FormData.prototype.isPrototypeOf(Et))this._bodyFormData=Et;else if(p&&URLSearchParams.prototype.isPrototypeOf(Et))this._bodyText=Et.toString();else if(Be&&h&&E(Et))this._bodyArrayBuffer=mt(Et.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!Be||!ArrayBuffer.prototype.isPrototypeOf(Et)&&!de(Et))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=mt(Et)}else this._bodyText="";this.headers.get("content-type")||(typeof Et=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):p&&URLSearchParams.prototype.isPrototypeOf(Et)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},h&&(this.blob=function(){var Et=ft(this);if(Et)return Et;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?ft(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(gt)}),this.text=function(){var Et,It,Dt=ft(this);if(Dt)return Dt;if(this._bodyBlob)return Dt=this._bodyBlob,Et=new FileReader,It=yt(Et),Et.readAsText(Dt),It;if(this._bodyArrayBuffer)return Promise.resolve(function(Pt){for(var qt=new Uint8Array(Pt),Ht=new Array(qt.length),Gt=0;Gt<qt.length;Gt++)Ht[Gt]=String.fromCharCode(qt[Gt]);return Ht.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},N&&(this.formData=function(){return this.text().then(bt)}),this.json=function(){return this.text().then(JSON.parse)},this}function St(Et,It){var Dt,Pt=(It=It||{}).body;if(Et instanceof St){if(Et.bodyUsed)throw new TypeError("Already read");this.url=Et.url,this.credentials=Et.credentials,It.headers||(this.headers=new tt(Et.headers)),this.method=Et.method,this.mode=Et.mode,Pt||Et._bodyInit==null||(Pt=Et._bodyInit,Et.bodyUsed=!0)}else this.url=String(Et);if(this.credentials=It.credentials||this.credentials||"omit",!It.headers&&this.headers||(this.headers=new tt(It.headers)),this.method=(Et=It.method||this.method||"GET",Dt=Et.toUpperCase(),-1<pe.indexOf(Dt)?Dt:Et),this.mode=It.mode||this.mode||null,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Pt)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Pt)}function bt(Et){var It=new FormData;return Et.trim().split("&").forEach(function(Dt){var Pt;Dt&&(Pt=(Dt=Dt.split("=")).shift().replace(/\+/g," "),Dt=Dt.join("=").replace(/\+/g," "),It.append(decodeURIComponent(Pt),decodeURIComponent(Dt)))}),It}function Ct(Et,It){It=It||{},this.type="default",this.status=It.status===void 0?200:It.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in It?It.statusText:"OK",this.headers=new tt(It.headers),this.url=It.url||"",this._initBody(Et)}s.fetch||(p="URLSearchParams"in s,d="Symbol"in s&&"iterator"in Symbol,h="FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),N="FormData"in s,(Be="ArrayBuffer"in s)&&(b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],E=function(Et){return Et&&DataView.prototype.isPrototypeOf(Et)},de=ArrayBuffer.isView||function(Et){return Et&&-1<b.indexOf(Object.prototype.toString.call(Et))}),tt.prototype.append=function(Et,It){Et=me(Et),It=Le(It);var Dt=this.map[Et];this.map[Et]=Dt?Dt+","+It:It},tt.prototype.delete=function(Et){delete this.map[me(Et)]},tt.prototype.get=function(Et){return Et=me(Et),this.has(Et)?this.map[Et]:null},tt.prototype.has=function(Et){return this.map.hasOwnProperty(me(Et))},tt.prototype.set=function(Et,It){this.map[me(Et)]=Le(It)},tt.prototype.forEach=function(Et,It){for(var Dt in this.map)this.map.hasOwnProperty(Dt)&&Et.call(It,this.map[Dt],Dt,this)},tt.prototype.keys=function(){var Et=[];return this.forEach(function(It,Dt){Et.push(Dt)}),nt(Et)},tt.prototype.values=function(){var Et=[];return this.forEach(function(It){Et.push(It)}),nt(Et)},tt.prototype.entries=function(){var Et=[];return this.forEach(function(It,Dt){Et.push([Dt,It])}),nt(Et)},d&&(tt.prototype[Symbol.iterator]=tt.prototype.entries),pe=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],St.prototype.clone=function(){return new St(this,{body:this._bodyInit})},wt.call(St.prototype),wt.call(Ct.prototype),Ct.prototype.clone=function(){return new Ct(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new tt(this.headers),url:this.url})},Ct.error=function(){var Et=new Ct(null,{status:0,statusText:""});return Et.type="error",Et},Ye=[301,302,303,307,308],Ct.redirect=function(Et,It){if(Ye.indexOf(It)===-1)throw new RangeError("Invalid status code");return new Ct(null,{status:It,headers:{location:Et}})},s.Headers=tt,s.Request=St,s.Response=Ct,s.fetch=function(Et,It){return new Promise(function(Dt,Pt){var qt=new St(Et,It),Ht=new XMLHttpRequest;Ht.onload=function(){var Gt,Ut={status:Ht.status,statusText:Ht.statusText,headers:(Ut=Ht.getAllResponseHeaders()||"",Gt=new tt,Ut.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(vt){var vt=vt.split(":"),Rt=vt.shift().trim();Rt&&(vt=vt.join(":").trim(),Gt.append(Rt,vt))}),Gt)},Yt=(Ut.url="responseURL"in Ht?Ht.responseURL:Ut.headers.get("X-Request-URL"),"response"in Ht?Ht.response:Ht.responseText);Dt(new Ct(Yt,Ut))},Ht.onerror=function(){Pt(new TypeError("Network request failed"))},Ht.ontimeout=function(){Pt(new TypeError("Network request failed"))},Ht.open(qt.method,qt.url,!0),qt.credentials==="include"?Ht.withCredentials=!0:qt.credentials==="omit"&&(Ht.withCredentials=!1),"responseType"in Ht&&h&&(Ht.responseType="blob"),qt.headers.forEach(function(Gt,Ut){Ht.setRequestHeader(Ut,Gt)}),Ht.send(qt._bodyInit===void 0?null:qt._bodyInit)})},s.fetch.polyfill=!0)})(typeof self<"u"?self:this)},{}],262:[function(t,l,u){t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s,p=h(t("../core/main")),d=h(t("../color/color_conversion"));function h(b){return b&&b.__esModule?b:{default:b}}var N=[{h:0,s:0,b:.8275,name:"gray"},{h:0,s:0,b:.8627,name:"gray"},{h:0,s:0,b:.7529,name:"gray"},{h:.0167,s:.1176,b:1,name:"light pink"}],Be=[{h:0,s:0,b:0,name:"black"},{h:0,s:0,b:.5,name:"gray"},{h:0,s:0,b:1,name:"white"},{h:0,s:.5,b:.5,name:"dark maroon"},{h:0,s:.5,b:1,name:"salmon pink"},{h:0,s:1,b:0,name:"black"},{h:0,s:1,b:.5,name:"dark red"},{h:0,s:1,b:1,name:"red"},{h:5,s:0,b:1,name:"very light peach"},{h:5,s:.5,b:.5,name:"brown"},{h:5,s:.5,b:1,name:"peach"},{h:5,s:1,b:.5,name:"brick red"},{h:5,s:1,b:1,name:"crimson"},{h:10,s:0,b:1,name:"light peach"},{h:10,s:.5,b:.5,name:"brown"},{h:10,s:.5,b:1,name:"light orange"},{h:10,s:1,b:.5,name:"brown"},{h:10,s:1,b:1,name:"orange"},{h:15,s:0,b:1,name:"very light yellow"},{h:15,s:.5,b:.5,name:"olive green"},{h:15,s:.5,b:1,name:"light yellow"},{h:15,s:1,b:0,name:"dark olive green"},{h:15,s:1,b:.5,name:"olive green"},{h:15,s:1,b:1,name:"yellow"},{h:20,s:0,b:1,name:"very light yellow"},{h:20,s:.5,b:.5,name:"olive green"},{h:20,s:.5,b:1,name:"light yellow green"},{h:20,s:1,b:0,name:"dark olive green"},{h:20,s:1,b:.5,name:"dark yellow green"},{h:20,s:1,b:1,name:"yellow green"},{h:25,s:.5,b:.5,name:"dark yellow green"},{h:25,s:.5,b:1,name:"light green"},{h:25,s:1,b:.5,name:"dark green"},{h:25,s:1,b:1,name:"green"},{h:30,s:.5,b:1,name:"light green"},{h:30,s:1,b:.5,name:"dark green"},{h:30,s:1,b:1,name:"green"},{h:35,s:0,b:.5,name:"light green"},{h:35,s:0,b:1,name:"very light green"},{h:35,s:.5,b:.5,name:"dark green"},{h:35,s:.5,b:1,name:"light green"},{h:35,s:1,b:0,name:"very dark green"},{h:35,s:1,b:.5,name:"dark green"},{h:35,s:1,b:1,name:"green"},{h:40,s:0,b:1,name:"very light green"},{h:40,s:.5,b:.5,name:"dark green"},{h:40,s:.5,b:1,name:"light green"},{h:40,s:1,b:.5,name:"dark green"},{h:40,s:1,b:1,name:"green"},{h:45,s:.5,b:1,name:"light turquoise"},{h:45,s:1,b:.5,name:"dark turquoise"},{h:45,s:1,b:1,name:"turquoise"},{h:50,s:0,b:1,name:"light sky blue"},{h:50,s:.5,b:.5,name:"dark cyan"},{h:50,s:.5,b:1,name:"light cyan"},{h:50,s:1,b:.5,name:"dark cyan"},{h:50,s:1,b:1,name:"cyan"},{h:55,s:0,b:1,name:"light sky blue"},{h:55,s:.5,b:1,name:"light sky blue"},{h:55,s:1,b:.5,name:"dark blue"},{h:55,s:1,b:1,name:"sky blue"},{h:60,s:0,b:.5,name:"gray"},{h:60,s:0,b:1,name:"very light blue"},{h:60,s:.5,b:.5,name:"blue"},{h:60,s:.5,b:1,name:"light blue"},{h:60,s:1,b:.5,name:"navy blue"},{h:60,s:1,b:1,name:"blue"},{h:65,s:0,b:1,name:"lavender"},{h:65,s:.5,b:.5,name:"navy blue"},{h:65,s:.5,b:1,name:"light purple"},{h:65,s:1,b:.5,name:"dark navy blue"},{h:65,s:1,b:1,name:"blue"},{h:70,s:0,b:1,name:"lavender"},{h:70,s:.5,b:.5,name:"navy blue"},{h:70,s:.5,b:1,name:"lavender blue"},{h:70,s:1,b:.5,name:"dark navy blue"},{h:70,s:1,b:1,name:"blue"},{h:75,s:.5,b:1,name:"lavender"},{h:75,s:1,b:.5,name:"dark purple"},{h:75,s:1,b:1,name:"purple"},{h:80,s:.5,b:1,name:"pinkish purple"},{h:80,s:1,b:.5,name:"dark purple"},{h:80,s:1,b:1,name:"purple"},{h:85,s:0,b:1,name:"light pink"},{h:85,s:.5,b:.5,name:"purple"},{h:85,s:.5,b:1,name:"light fuchsia"},{h:85,s:1,b:.5,name:"dark fuchsia"},{h:85,s:1,b:1,name:"fuchsia"},{h:90,s:.5,b:.5,name:"dark fuchsia"},{h:90,s:.5,b:1,name:"hot pink"},{h:90,s:1,b:.5,name:"dark fuchsia"},{h:90,s:1,b:1,name:"fuchsia"},{h:95,s:0,b:1,name:"pink"},{h:95,s:.5,b:1,name:"light pink"},{h:95,s:1,b:.5,name:"dark magenta"},{h:95,s:1,b:1,name:"magenta"}];p.default.prototype._rgbColorName=function(pe){var E,de,pe=d.default._rgbaToHSBA(pe),Ye=[(s=pe)[0],pe[1],pe[2]];Ye[0]!==0&&(Ye[0]=Math.round(100*Ye[0]),(pe=Ye[0].toString().split(""))[de=pe.length-1]=parseInt(pe[de]),pe[de]<2.5?pe[de]=0:2.5<=pe[de]&&pe[de]<7.5&&(pe[de]=5),pe.length===2?(pe[0]=parseInt(pe[0]),7.5<=pe[de]&&(pe[de]=0,pe[0]=pe[0]+1),Ye[0]=10*pe[0]+pe[1]):7.5<=pe[de]?Ye[0]=10:Ye[0]=pe[de]),Ye[2]=Ye[2]/255;for(var me=Ye.length-1;1<=me;me--)Ye[me]<=.25?Ye[me]=0:.25<Ye[me]&&Ye[me]<.75?Ye[me]=.5:Ye[me]=1;if(Ye[0]===0&&Ye[1]===0&&Ye[2]===1){for(var Le=2;0<=Le;Le--)s[Le]=Math.round(1e4*s[Le])/1e4;for(var nt=0;nt<N.length;nt++){if(N[nt].h===s[0]&&N[nt].s===s[1]&&N[nt].b===s[2]){E=N[nt].name;break}E="white"}}else for(var tt=0;tt<Be.length;tt++)if(Be[tt].h===Ye[0]&&Be[tt].s===Ye[1]&&Be[tt].b===Ye[2]){E=Be[tt].name;break}return E},t=p.default,u.default=t},{"../color/color_conversion":268,"../core/main":283,"core-js/modules/es.function.name":174,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.split":206}],263:[function(t,l,u){t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.replace"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(t=t("../core/main"))&&t.__esModule?t:{default:t},p="_Description",d="_fallbackDesc",h="_fallbackTable",N="_Label",Be="_labelDesc",b="_labelTable";function E(de){if(de==="label"||de==="fallback")throw new Error("description should not be LABEL or FALLBACK");return de.endsWith(".")||de.endsWith(";")||de.endsWith(",")||de.endsWith("?")||de.endsWith("!")||(de+="."),de}s.default.prototype.describe=function(de,pe){var Ye;s.default._validateParameters("describe",arguments),typeof de=="string"&&(Ye=this.canvas.id,de=E(de),this.dummyDOM||(this.dummyDOM=document.getElementById(Ye).parentNode),this.descriptions||(this.descriptions={}),this.descriptions.fallback?this.descriptions.fallback.innerHTML!==de&&(this.descriptions.fallback.innerHTML=de):this._describeHTML("fallback",de),pe===this.LABEL&&(this.descriptions.label?this.descriptions.label.innerHTML!==de&&(this.descriptions.label.innerHTML=de):this._describeHTML("label",de)))},s.default.prototype.describeElement=function(de,pe,Ye){var me,Le;s.default._validateParameters("describeElement",arguments),typeof pe=="string"&&typeof de=="string"&&(me=this.canvas.id,pe=E(pe),Le=function(nt){if(nt==="label"||nt==="fallback")throw new Error("element name should not be LABEL or FALLBACK");return nt.endsWith(".")||nt.endsWith(";")||nt.endsWith(",")?nt=nt.replace(/.$/,":"):nt.endsWith(":")||(nt+=":"),nt}(de),de=de.replace(/[^a-zA-Z0-9]/g,""),Le='<th scope="row">'.concat(Le,"</th><td>").concat(pe,"</td>"),this.dummyDOM||(this.dummyDOM=document.getElementById(me).parentNode),this.descriptions?this.descriptions.fallbackElements||(this.descriptions.fallbackElements={}):this.descriptions={fallbackElements:{}},this.descriptions.fallbackElements[de]?this.descriptions.fallbackElements[de].innerHTML!==Le&&(this.descriptions.fallbackElements[de].innerHTML=Le):this._describeElementHTML("fallback",de,Le),Ye===this.LABEL&&(this.descriptions.labelElements||(this.descriptions.labelElements={}),this.descriptions.labelElements[de]?this.descriptions.labelElements[de].innerHTML!==Le&&(this.descriptions.labelElements[de].innerHTML=Le):this._describeElementHTML("label",de,Le)))},s.default.prototype._describeHTML=function(de,pe){var Ye,me=this.canvas.id;de==="fallback"?(this.dummyDOM.querySelector("#".concat(me+p))?this.dummyDOM.querySelector("#"+me+h).insertAdjacentHTML("beforebegin",'<p id="'.concat(me+d,'"></p>')):(Ye='<div id="'.concat(me).concat(p,'" role="region" aria-label="Canvas Description"><p id="').concat(me).concat(d,'"></p></div>'),this.dummyDOM.querySelector("#".concat(me,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(me,"accessibleOutput")).insertAdjacentHTML("beforebegin",Ye):this.dummyDOM.querySelector("#".concat(me)).innerHTML=Ye),this.descriptions.fallback=this.dummyDOM.querySelector("#".concat(me).concat(d)),this.descriptions.fallback.innerHTML=pe):de==="label"&&(this.dummyDOM.querySelector("#".concat(me+N))?this.dummyDOM.querySelector("#".concat(me+b))&&this.dummyDOM.querySelector("#".concat(me+b)).insertAdjacentHTML("beforebegin",'<p id="'.concat(me).concat(Be,'"></p>')):(Ye='<div id="'.concat(me).concat(N,'" class="p5Label"><p id="').concat(me).concat(Be,'"></p></div>'),this.dummyDOM.querySelector("#".concat(me,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(me,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",Ye):this.dummyDOM.querySelector("#"+me).insertAdjacentHTML("afterend",Ye)),this.descriptions.label=this.dummyDOM.querySelector("#"+me+Be),this.descriptions.label.innerHTML=pe)},s.default.prototype._describeElementHTML=function(de,pe,Ye){var me,Le=this.canvas.id;de==="fallback"?(this.dummyDOM.querySelector("#".concat(Le+p))?this.dummyDOM.querySelector("#"+Le+h)||this.dummyDOM.querySelector("#"+Le+d).insertAdjacentHTML("afterend",'<table id="'.concat(Le).concat(h,'"><caption>Canvas elements and their descriptions</caption></table>')):(me='<div id="'.concat(Le).concat(p,'" role="region" aria-label="Canvas Description"><table id="').concat(Le).concat(h,'"><caption>Canvas elements and their descriptions</caption></table></div>'),this.dummyDOM.querySelector("#".concat(Le,"accessibleOutput"))?this.dummyDOM.querySelector("#".concat(Le,"accessibleOutput")).insertAdjacentHTML("beforebegin",me):this.dummyDOM.querySelector("#"+Le).innerHTML=me),(me=document.createElement("tr")).id=Le+"_fte_"+pe,this.dummyDOM.querySelector("#"+Le+h).appendChild(me),this.descriptions.fallbackElements[pe]=this.dummyDOM.querySelector("#".concat(Le).concat("_fte_").concat(pe)),this.descriptions.fallbackElements[pe].innerHTML=Ye):de==="label"&&(this.dummyDOM.querySelector("#".concat(Le+N))?this.dummyDOM.querySelector("#".concat(Le+b))||this.dummyDOM.querySelector("#"+Le+Be).insertAdjacentHTML("afterend",'<table id="'.concat(Le+b,'"></table>')):(me='<div id="'.concat(Le).concat(N,'" class="p5Label"><table id="').concat(Le).concat(b,'"></table></div>'),this.dummyDOM.querySelector("#".concat(Le,"accessibleOutputLabel"))?this.dummyDOM.querySelector("#".concat(Le,"accessibleOutputLabel")).insertAdjacentHTML("beforebegin",me):this.dummyDOM.querySelector("#"+Le).insertAdjacentHTML("afterend",me)),(de=document.createElement("tr")).id=Le+"_lte_"+pe,this.dummyDOM.querySelector("#"+Le+b).appendChild(de),this.descriptions.labelElements[pe]=this.dummyDOM.querySelector("#".concat(Le).concat("_lte_").concat(pe)),this.descriptions.labelElements[pe].innerHTML=Ye)},t=s.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.ends-with":198,"core-js/modules/es.string.replace":204}],264:[function(t,l,u){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.map"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.map"),t("core-js/modules/es.string.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype._updateGridOutput=function(s){var p,d,h,N;this.dummyDOM.querySelector("#".concat(s,"_summary"))&&(p=this._accessibleOutputs[s],h=function(Be,b,E,de){return b="".concat(b," canvas, ").concat(E," by ").concat(de," pixels, contains ").concat(Be[0]),b=(Be[0]===1?"".concat(b," shape: "):"".concat(b," shapes: ")).concat(Be[1]),b}((d=function(Be,b){var E,de="",pe="",Ye=0;for(E in b){var me,Le=0;for(me in b[E]){var nt='<li id="'.concat(Be,"shape").concat(Ye,'">').concat(b[E][me].color," ").concat(E,",");E==="line"?nt+=" location = ".concat(b[E][me].pos,", length = ").concat(b[E][me].length," pixels"):(nt+=" location = ".concat(b[E][me].pos),E!=="point"&&(nt+=", area = ".concat(b[E][me].area," %")),nt+="</li>"),de+=nt,Le++,Ye++}pe=1<Le?"".concat(pe," ").concat(Le," ").concat(E,"s"):"".concat(pe," ").concat(Le," ").concat(E)}return{numShapes:[Ye,pe],details:de}}(s,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),N=function(Be,b){var E,de,pe=0,Ye="",me=Array.from(Array(10),function(){return Array(10)});for(E in b)for(var Le in b[E]){var nt=void 0;nt=E!=="line"?'<a href="#'.concat(Be,"shape").concat(pe,'">').concat(b[E][Le].color," ").concat(E,"</a>"):'<a href="#'.concat(Be,"shape").concat(pe,'">').concat(b[E][Le].color," ").concat(E," midpoint</a>"),b[E][Le].loc.locY<me.length&&b[E][Le].loc.locX<me[b[E][Le].loc.locY].length&&(me[b[E][Le].loc.locY][b[E][Le].loc.locX]?me[b[E][Le].loc.locY][b[E][Le].loc.locX]=me[b[E][Le].loc.locY][b[E][Le].loc.locX]+"  "+nt:me[b[E][Le].loc.locY][b[E][Le].loc.locX]=nt,pe++)}for(de in me){var tt,ft="<tr>";for(tt in me[de])ft+="<td>",me[de][tt]!==void 0&&(ft+=me[de][tt]),ft+="</td>";Ye=Ye+ft+"</tr>"}return Ye}(s,this.ingredients.shapes),h!==p.summary.innerHTML&&(p.summary.innerHTML=h),N!==p.map.innerHTML&&(p.map.innerHTML=N),d.details!==p.shapeDetails.innerHTML&&(p.shapeDetails.innerHTML=d.details),this._accessibleOutputs[s]=p)},t=t.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.from":162,"core-js/modules/es.array.map":168,"core-js/modules/es.string.iterator":200}],265:[function(t,l,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.to-fixed"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(t=t("../core/main"))&&t.__esModule?t:{default:t};function p(h){return function(N){if(Array.isArray(N)){for(var Be=0,b=new Array(N.length);Be<N.length;Be++)b[Be]=N[Be];return b}}(h)||function(N){if(Symbol.iterator in Object(N)||Object.prototype.toString.call(N)==="[object Arguments]")return Array.from(N)}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(E,N,Be){var b=E[0],E=E[1];return b<0||N<=b||E<0||Be<=E?null:((b=Math.floor(b/N*10))===10&&(b-=1),(N=Math.floor(E/Be*10))===10&&(N-=1),{locX:b,locY:N})}s.default.prototype.textOutput=function(h){s.default._validateParameters("textOutput",arguments),this._accessibleOutputs.text||(this._accessibleOutputs.text=!0,this._createOutput("textOutput","Fallback"),h===this.LABEL&&(this._accessibleOutputs.textLabel=!0,this._createOutput("textOutput","Label")))},s.default.prototype.gridOutput=function(h){s.default._validateParameters("gridOutput",arguments),this._accessibleOutputs.grid||(this._accessibleOutputs.grid=!0,this._createOutput("gridOutput","Fallback"),h===this.LABEL&&(this._accessibleOutputs.gridLabel=!0,this._createOutput("gridOutput","Label")))},s.default.prototype._addAccsOutput=function(){return this._accessibleOutputs||(this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1}),this._accessibleOutputs.grid||this._accessibleOutputs.text},s.default.prototype._createOutput=function(h,N){var Be,b,E,de=this.canvas.id,pe=(this.ingredients||(this.ingredients={shapes:{},colors:{background:"white",fill:"white",stroke:"black"},pShapes:"",pBackground:""}),this.dummyDOM||(this.dummyDOM=document.getElementById(de).parentNode),"");N==="Fallback"?(Be=de+h,this.dummyDOM.querySelector("#".concat(b=de+"accessibleOutput"))||(this.dummyDOM.querySelector("#".concat(de,"_Description"))?this.dummyDOM.querySelector("#".concat(de,"_Description")).insertAdjacentHTML("afterend",'<div id="'.concat(b,'" role="region" aria-label="Canvas Outputs"></div>')):this.dummyDOM.querySelector("#".concat(de)).innerHTML='<div id="'.concat(b,'" role="region" aria-label="Canvas Outputs"></div>'))):N==="Label"&&(Be=de+h+(pe=N),this.dummyDOM.querySelector("#".concat(b=de+"accessibleOutput"+N))||(this.dummyDOM.querySelector("#".concat(de,"_Label"))?this.dummyDOM.querySelector("#".concat(de,"_Label")):this.dummyDOM.querySelector("#".concat(de))).insertAdjacentHTML("afterend",'<div id="'.concat(b,'"></div>'))),this._accessibleOutputs[Be]={},h==="textOutput"?(pe="#".concat(de,"gridOutput").concat(pe),E='<div id="'.concat(Be,'">Text Output<div id="').concat(Be,'Summary" aria-label="text output summary"><p id="').concat(Be,'_summary"></p><ul id="').concat(Be,'_list"></ul></div><table id="').concat(Be,'_shapeDetails" summary="text output shape details"></table></div>'),this.dummyDOM.querySelector(pe)?this.dummyDOM.querySelector(pe).insertAdjacentHTML("beforebegin",E):this.dummyDOM.querySelector("#".concat(b)).innerHTML=E,this._accessibleOutputs[Be].list=this.dummyDOM.querySelector("#".concat(Be,"_list"))):h==="gridOutput"&&(pe="#".concat(de,"textOutput").concat(pe),E='<div id="'.concat(Be,'">Grid Output<p id="').concat(Be,'_summary" aria-label="grid output summary"><table id="').concat(Be,'_map" summary="grid output content"></table><ul id="').concat(Be,'_shapeDetails" aria-label="grid output shape details"></ul></div>'),this.dummyDOM.querySelector(pe)?this.dummyDOM.querySelector(pe).insertAdjacentHTML("afterend",E):this.dummyDOM.querySelector("#".concat(b)).innerHTML=E,this._accessibleOutputs[Be].map=this.dummyDOM.querySelector("#".concat(Be,"_map"))),this._accessibleOutputs[Be].shapeDetails=this.dummyDOM.querySelector("#".concat(Be,"_shapeDetails")),this._accessibleOutputs[Be].summary=this.dummyDOM.querySelector("#".concat(Be,"_summary"))},s.default.prototype._updateAccsOutput=function(){var h=this.canvas.id;JSON.stringify(this.ingredients.shapes)===this.ingredients.pShapes&&this.ingredients.colors.background===this.ingredients.pBackground||(this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this._accessibleOutputs.text&&this._updateTextOutput(h+"textOutput"),this._accessibleOutputs.grid&&this._updateGridOutput(h+"gridOutput"),this._accessibleOutputs.textLabel&&this._updateTextOutput(h+"textOutputLabel"),this._accessibleOutputs.gridLabel&&this._updateGridOutput(h+"gridOutputLabel"))},s.default.prototype._accsBackground=function(h){this.ingredients.pShapes=JSON.stringify(this.ingredients.shapes),this.ingredients.pBackground=this.ingredients.colors.background,this.ingredients.shapes={},this.ingredients.colors.backgroundRGBA!==h&&(this.ingredients.colors.backgroundRGBA=h,this.ingredients.colors.background=this._rgbColorName(h))},s.default.prototype._accsCanvasColors=function(h,N){h==="fill"?this.ingredients.colors.fillRGBA!==N&&(this.ingredients.colors.fillRGBA=N,this.ingredients.colors.fill=this._rgbColorName(N)):h==="stroke"&&this.ingredients.colors.strokeRGBA!==N&&(this.ingredients.colors.strokeRGBA=N,this.ingredients.colors.stroke=this._rgbColorName(N))},s.default.prototype._accsOutput=function(h,N){h==="ellipse"&&N[2]===N[3]?h="circle":h==="rectangle"&&N[2]===N[3]&&(h="square");var Be,b,E={},de=!0,pe=function(me,Le){var nt;return me=me==="rectangle"||me==="ellipse"||me==="arc"||me==="circle"||me==="square"?(nt=Math.round(Le[0]+Le[2]/2),Math.round(Le[1]+Le[3]/2)):me==="triangle"?(nt=(Le[0]+Le[2]+Le[4])/3,(Le[1]+Le[3]+Le[5])/3):me==="quadrilateral"?(nt=(Le[0]+Le[2]+Le[4]+Le[6])/4,(Le[1]+Le[3]+Le[5]+Le[7])/4):me==="line"?(nt=(Le[0]+Le[2])/2,(Le[1]+Le[3])/2):(nt=Le[0],Le[1]),[nt,me]}(h,N);if(h==="line"?(E.color=this.ingredients.colors.stroke,E.length=Math.round(this.dist(N[0],N[1],N[2],N[3])),Be=this._getPos(N[0],[1]),b=this._getPos(N[2],[3]),E.loc=d(pe,this.width,this.height),E.pos=Be===b?"at ".concat(Be):"from ".concat(Be," to ").concat(b)):(h==="point"?E.color=this.ingredients.colors.stroke:(E.color=this.ingredients.colors.fill,E.area=this._getArea(h,N)),E.pos=this._getPos.apply(this,p(pe)),E.loc=d(pe,this.width,this.height)),this.ingredients.shapes[h]){if(this.ingredients.shapes[h]!==[E]){for(var Ye in this.ingredients.shapes[h])JSON.stringify(this.ingredients.shapes[h][Ye])===JSON.stringify(E)&&(de=!1);de===!0&&this.ingredients.shapes[h].push(E)}}else this.ingredients.shapes[h]=[E]},s.default.prototype._getPos=function(b,Be){var b=new DOMPointReadOnly(b,Be),Be=this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform(),b=b.matrixTransform(Be),Be=b.x,b=b.y,E=this.width*this._pixelDensity,de=this.height*this._pixelDensity;return Be<.4*E?b<.4*de?"top left":.6*de<b?"bottom left":"mid left":.6*E<Be?b<.4*de?"top right":.6*de<b?"bottom right":"mid right":b<.4*de?"top middle":.6*de<b?"bottom middle":"middle"},s.default.prototype._getArea=function(h,N){var Be,b,E=0,de=(h==="arc"?(E=(Be=((N[5]-N[4])%(2*Math.PI)+2*Math.PI)%(2*Math.PI))*N[2]*N[3]/8,N[6]!=="open"&&N[6]!=="chord"||(b=N[0],Le=N[1],de=N[0]+N[2]/2*Math.cos(N[4]).toFixed(2),nt=N[1]+N[3]/2*Math.sin(N[4]).toFixed(2),Ye=N[0]+N[2]/2*Math.cos(N[5]).toFixed(2),pe=N[1]+N[3]/2*Math.sin(N[5]).toFixed(2),b=Math.abs(b*(nt-pe)+de*(pe-Le)+Ye*(Le-nt))/2,Be>Math.PI?E+=b:E-=b)):h==="ellipse"||h==="circle"?E=3.14*N[2]/2*N[3]/2:h==="line"||h==="point"?E=0:h==="quadrilateral"?E=Math.abs((N[6]+N[0])*(N[7]-N[1])+(N[0]+N[2])*(N[1]-N[3])+(N[2]+N[4])*(N[3]-N[5])+(N[4]+N[6])*(N[5]-N[7]))/2:h==="rectangle"||h==="square"?E=N[2]*N[3]:h==="triangle"&&(E=Math.abs(N[0]*(N[3]-N[5])+N[2]*(N[5]-N[1])+N[4]*(N[1]-N[3]))/2),this.width*this._pixelDensity),pe=this.height*this._pixelDensity,Ye=[new DOMPoint(0,0),new DOMPoint(de,0),new DOMPoint(de,pe),new DOMPoint(0,pe)],me=(this._renderer.isP3D?new DOMMatrix(this._renderer.uMVMatrix.mat4):this.drawingContext.getTransform()).inverse(),Le=Ye.map(function(tt){return tt.matrixTransform(me)}),nt=Math.abs((Le[3].x+Le[0].x)*(Le[3].y-Le[0].y)+(Le[0].x+Le[1].x)*(Le[0].y-Le[1].y)+(Le[1].x+Le[2].x)*(Le[1].y-Le[2].y)+(Le[2].x+Le[3].x)*(Le[2].y-Le[3].y))/2;return Math.round(100*E/nt)},t=s.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],266:[function(t,l,u){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.concat"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype._updateTextOutput=function(s){var p,d,h,N;this.dummyDOM.querySelector("#".concat(s,"_summary"))&&(p=this._accessibleOutputs[s],h=function(Be,b,E,de){return E="Your output is a, ".concat(E," by ").concat(de," pixels, ").concat(b," canvas containing the following"),E=Be===1?"".concat(E," shape:"):"".concat(E," ").concat(Be," shapes:"),E}((d=function(Be,b){var E,de="",pe=0;for(E in b)for(var Ye in b[E]){var me='<li><a href="#'.concat(Be,"shape").concat(pe,'">').concat(b[E][Ye].color," ").concat(E,"</a>");E==="line"?me+=", ".concat(b[E][Ye].pos,", ").concat(b[E][Ye].length," pixels long.</li>"):(me+=", at ".concat(b[E][Ye].pos),E!=="point"&&(me+=", covering ".concat(b[E][Ye].area,"% of the canvas")),me+=".</li>"),de+=me,pe++}return{numShapes:pe,listShapes:de}}(s,this.ingredients.shapes)).numShapes,this.ingredients.colors.background,this.width,this.height),N=function(Be,b){var E,de="",pe=0;for(E in b)for(var Ye in b[E]){var me='<tr id="'.concat(Be,"shape").concat(pe,'"><th>').concat(b[E][Ye].color," ").concat(E,"</th>");E==="line"?me+="<td>location = ".concat(b[E][Ye].pos,"</td><td>length = ").concat(b[E][Ye].length," pixels</td></tr>"):(me+="<td>location = ".concat(b[E][Ye].pos,"</td>"),E!=="point"&&(me+="<td> area = ".concat(b[E][Ye].area,"%</td>")),me+="</tr>"),de+=me,pe++}return de}(s,this.ingredients.shapes),h!==p.summary.innerHTML&&(p.summary.innerHTML=h),d.listShapes!==p.list.innerHTML&&(p.list.innerHTML=d.listShapes),N!==p.shapeDetails.innerHTML&&(p.shapeDetails.innerHTML=N),this._accessibleOutputs[s]=p)},t=t.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153}],267:[function(t,l,u){var s=(s=t("./core/main"))&&s.__esModule?s:{default:s};t("./core/constants"),t("./core/environment"),t("./core/friendly_errors/stacktrace"),t("./core/friendly_errors/validate_params"),t("./core/friendly_errors/file_errors"),t("./core/friendly_errors/fes_core"),t("./core/friendly_errors/sketch_reader"),t("./core/helpers"),t("./core/legacy"),t("./core/preload"),t("./core/p5.Element"),t("./core/p5.Graphics"),t("./core/p5.Renderer"),t("./core/p5.Renderer2D"),t("./core/rendering"),t("./core/shim"),t("./core/structure"),t("./core/transform"),t("./core/shape/2d_primitives"),t("./core/shape/attributes"),t("./core/shape/curves"),t("./core/shape/vertex"),t("./accessibility/outputs"),t("./accessibility/textOutput"),t("./accessibility/gridOutput"),t("./accessibility/color_namer"),t("./color/color_conversion"),t("./color/creating_reading"),t("./color/p5.Color"),t("./color/setting"),t("./data/p5.TypedDict"),t("./data/local_storage.js"),t("./dom/dom"),t("./accessibility/describe"),t("./events/acceleration"),t("./events/keyboard"),t("./events/mouse"),t("./events/touch"),t("./image/filters"),t("./image/image"),t("./image/loading_displaying"),t("./image/p5.Image"),t("./image/pixels"),t("./io/files"),t("./io/p5.Table"),t("./io/p5.TableRow"),t("./io/p5.XML"),t("./math/calculation"),t("./math/math"),t("./math/noise"),t("./math/p5.Vector"),t("./math/random"),t("./math/trigonometry"),t("./typography/attributes"),t("./typography/loading_displaying"),t("./typography/p5.Font"),t("./utilities/array_functions"),t("./utilities/conversion"),t("./utilities/string_functions"),t("./utilities/time_date"),t("./webgl/3d_primitives"),t("./webgl/interaction"),t("./webgl/light"),t("./webgl/loading"),t("./webgl/material"),t("./webgl/p5.Camera"),t("./webgl/p5.DataArray"),t("./webgl/p5.Geometry"),t("./webgl/p5.Matrix"),t("./webgl/p5.Quat"),t("./webgl/p5.RendererGL.Immediate"),t("./webgl/p5.RendererGL"),t("./webgl/p5.RendererGL.Retained"),t("./webgl/p5.Framebuffer"),t("./webgl/p5.Shader"),t("./webgl/p5.RenderBuffer"),t("./webgl/p5.Texture"),t("./webgl/text"),t("./core/init"),l.exports=s.default},{"./accessibility/color_namer":262,"./accessibility/describe":263,"./accessibility/gridOutput":264,"./accessibility/outputs":265,"./accessibility/textOutput":266,"./color/color_conversion":268,"./color/creating_reading":269,"./color/p5.Color":270,"./color/setting":271,"./core/constants":272,"./core/environment":273,"./core/friendly_errors/fes_core":274,"./core/friendly_errors/file_errors":275,"./core/friendly_errors/sketch_reader":276,"./core/friendly_errors/stacktrace":277,"./core/friendly_errors/validate_params":278,"./core/helpers":279,"./core/init":280,"./core/legacy":282,"./core/main":283,"./core/p5.Element":284,"./core/p5.Graphics":285,"./core/p5.Renderer":286,"./core/p5.Renderer2D":287,"./core/preload":288,"./core/rendering":289,"./core/shape/2d_primitives":290,"./core/shape/attributes":291,"./core/shape/curves":292,"./core/shape/vertex":293,"./core/shim":294,"./core/structure":295,"./core/transform":296,"./data/local_storage.js":297,"./data/p5.TypedDict":298,"./dom/dom":299,"./events/acceleration":300,"./events/keyboard":301,"./events/mouse":302,"./events/touch":303,"./image/filters":304,"./image/image":305,"./image/loading_displaying":306,"./image/p5.Image":307,"./image/pixels":308,"./io/files":309,"./io/p5.Table":310,"./io/p5.TableRow":311,"./io/p5.XML":312,"./math/calculation":313,"./math/math":314,"./math/noise":315,"./math/p5.Vector":316,"./math/random":317,"./math/trigonometry":318,"./typography/attributes":319,"./typography/loading_displaying":320,"./typography/p5.Font":321,"./utilities/array_functions":322,"./utilities/conversion":323,"./utilities/string_functions":324,"./utilities/time_date":325,"./webgl/3d_primitives":326,"./webgl/interaction":328,"./webgl/light":329,"./webgl/loading":330,"./webgl/material":331,"./webgl/p5.Camera":332,"./webgl/p5.DataArray":333,"./webgl/p5.Framebuffer":334,"./webgl/p5.Geometry":335,"./webgl/p5.Matrix":336,"./webgl/p5.Quat":337,"./webgl/p5.RenderBuffer":338,"./webgl/p5.RendererGL":341,"./webgl/p5.RendererGL.Immediate":339,"./webgl/p5.RendererGL.Retained":340,"./webgl/p5.Shader":342,"./webgl/p5.Texture":343,"./webgl/text":344}],268:[function(t,l,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.ColorConversion={_hsbaToHSLA:function(s){var p=s[0],d=s[1],h=s[2],N=(2-d)*h/2;return N!=0&&(N==1?d=0:N<.5?d/=2-d:d=d*h/(2-2*N)),[p,d,N,s[3]]},_hsbaToRGBA:function(s){var p,d,h,N,Be,b=6*s[0],E=s[1],de=s[2];return E===0?[de,de,de,s[3]]:(d=de*(1-E),h=de*(1-E*(b-(p=Math.floor(b)))),E=de*(1-E*(1+p-b)),b=p===1?(N=h,Be=de,d):p===2?(N=d,Be=de,E):p===3?(N=d,Be=h,de):p===4?(N=E,Be=d,de):p===5?(N=de,Be=d,h):(N=de,Be=E,d),[N,Be,b,s[3]])},_hslaToHSBA:function(s){var p=s[0],d=s[1],h=s[2],N=h<.5?(1+d)*h:h+d-h*d;return[p,d=2*(N-h)/N,N,s[3]]},_hslaToRGBA:function(s){var p,d=6*s[0],h=s[1],N=s[2];return h===0?[N,N,N,s[3]]:[(p=function(Be,b,E){return Be<0?Be+=6:6<=Be&&(Be-=6),Be<1?b+(E-b)*Be:Be<3?E:Be<4?b+(E-b)*(4-Be):b})(2+d,h=2*N-(N=N<.5?(1+h)*N:N+h-N*h),N),p(d,h,N),p(d-2,h,N),s[3]]},_rgbaToHSBA:function(s){var p,d,h=s[0],N=s[1],Be=s[2],b=Math.max(h,N,Be),E=b-Math.min(h,N,Be);return E==0?d=p=0:(d=E/b,h===b?p=(N-Be)/E:N===b?p=2+(Be-h)/E:Be===b&&(p=4+(h-N)/E),p<0?p+=6:6<=p&&(p-=6)),[p/6,d,b,s[3]]},_rgbaToHSLA:function(s){var p,d,h=s[0],N=s[1],Be=s[2],b=Math.max(h,N,Be),de=Math.min(h,N,Be),E=b+de,de=b-de;return de==0?d=p=0:(d=E<1?de/E:de/(2-E),h===b?p=(N-Be)/de:N===b?p=2+(Be-h)/de:Be===b&&(p=4+(h-N)/de),p<0?p+=6:6<=p&&(p-=6)),[p/6,d,E/2,s[3]]}},t=t.default.ColorConversion,u.default=t},{"../core/main":283}],269:[function(t,l,u){function s(b){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(b)}function p(b){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(E){return s(E)}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":s(E)})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.map"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=(Be=t("../core/main"))&&Be.__esModule?Be:{default:Be},h=function(b){if(b&&b.__esModule)return b;if(b===null||p(b)!=="object"&&typeof b!="function")return{default:b};var E=N();if(E&&E.has(b))return E.get(b);var de,pe={},Ye=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(de in b){var me;Object.prototype.hasOwnProperty.call(b,de)&&((me=Ye?Object.getOwnPropertyDescriptor(b,de):null)&&(me.get||me.set)?Object.defineProperty(pe,de,me):pe[de]=b[de])}return pe.default=b,E&&E.set(b,pe),pe}(t("../core/constants"));function N(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,N=function(){return b},b)}t("./p5.Color"),t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),d.default.prototype.alpha=function(b){return d.default._validateParameters("alpha",arguments),this.color(b)._getAlpha()},d.default.prototype.blue=function(b){return d.default._validateParameters("blue",arguments),this.color(b)._getBlue()},d.default.prototype.brightness=function(b){return d.default._validateParameters("brightness",arguments),this.color(b)._getBrightness()},d.default.prototype.color=function(){for(var b,E=arguments.length,de=new Array(E),pe=0;pe<E;pe++)de[pe]=arguments[pe];return d.default._validateParameters("color",de),de[0]instanceof d.default.Color?de[0]:(b=Array.isArray(de[0])?de[0]:de,new d.default.Color(this,b))},d.default.prototype.green=function(b){return d.default._validateParameters("green",arguments),this.color(b)._getGreen()},d.default.prototype.hue=function(b){return d.default._validateParameters("hue",arguments),this.color(b)._getHue()},d.default.prototype.lerpColor=function(b,E,de){d.default._validateParameters("lerpColor",arguments),b instanceof d.default.Color||(b=color(b)),E instanceof d.default.Color||(E=color(E));var pe,Ye,me,Le=this._colorMode,nt=this._colorMaxes;if(Le===h.RGB)Ye=b.levels.map(function(tt){return tt/255}),me=E.levels.map(function(tt){return tt/255});else if(Le===h.HSB)b._getBrightness(),E._getBrightness(),Ye=b.hsba,me=E.hsba;else{if(Le!==h.HSL)throw new Error("".concat(Le," cannot be used for interpolation."));b._getLightness(),E._getLightness(),Ye=b.hsla,me=E.hsla}return de=Math.max(Math.min(de,1),0),this.lerp===void 0&&(this.lerp=function(tt,ft,yt){return yt*(ft-tt)+tt}),Le===h.RGB?pe=this.lerp(Ye[0],me[0],de):(.5<Math.abs(Ye[0]-me[0])&&(Ye[0]>me[0]?me[0]+=1:Ye[0]+=1),1<=(pe=this.lerp(Ye[0],me[0],de))&&--pe),b=this.lerp(Ye[1],me[1],de),E=this.lerp(Ye[2],me[2],de),Ye=this.lerp(Ye[3],me[3],de),pe*=nt[Le][0],b*=nt[Le][1],E*=nt[Le][2],Ye*=nt[Le][3],this.color(pe,b,E,Ye)},d.default.prototype.paletteLerp=function(b,E){var de=b[0];if(E<de[1])return this.color(de[0]);for(var pe=1;pe<b.length;pe++){var Ye,me=b[pe];if(E<me[1])return Ye=b[pe-1],this.lerpColor(this.color(Ye[0]),this.color(me[0]),(E-Ye[1])/(me[1]-Ye[1]))}return this.color(b[b.length-1][0])},d.default.prototype.lightness=function(b){return d.default._validateParameters("lightness",arguments),this.color(b)._getLightness()},d.default.prototype.red=function(b){return d.default._validateParameters("red",arguments),this.color(b)._getRed()},d.default.prototype.saturation=function(b){return d.default._validateParameters("saturation",arguments),this.color(b)._getSaturation()};var Be=d.default;u.default=Be},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"./p5.Color":270,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],270:[function(pe,l,u){function s(tt){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ft){return typeof ft}:function(ft){return ft&&typeof Symbol=="function"&&ft.constructor===Symbol&&ft!==Symbol.prototype?"symbol":typeof ft})(tt)}function p(tt){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(ft){return s(ft)}:function(ft){return ft&&typeof Symbol=="function"&&ft.constructor===Symbol&&ft!==Symbol.prototype?"symbol":s(ft)})(tt)}pe("core-js/modules/es.symbol"),pe("core-js/modules/es.symbol.description"),pe("core-js/modules/es.symbol.iterator"),pe("core-js/modules/es.array.includes"),pe("core-js/modules/es.array.iterator"),pe("core-js/modules/es.array.join"),pe("core-js/modules/es.array.map"),pe("core-js/modules/es.array.slice"),pe("core-js/modules/es.object.get-own-property-descriptor"),pe("core-js/modules/es.object.to-string"),pe("core-js/modules/es.regexp.constructor"),pe("core-js/modules/es.regexp.exec"),pe("core-js/modules/es.regexp.to-string"),pe("core-js/modules/es.string.includes"),pe("core-js/modules/es.string.iterator"),pe("core-js/modules/es.string.trim"),pe("core-js/modules/es.weak-map"),pe("core-js/modules/web.dom-collections.iterator"),pe("core-js/modules/es.array.includes"),pe("core-js/modules/es.array.join"),pe("core-js/modules/es.array.map"),pe("core-js/modules/es.array.slice"),pe("core-js/modules/es.object.to-string"),pe("core-js/modules/es.regexp.constructor"),pe("core-js/modules/es.regexp.exec"),pe("core-js/modules/es.regexp.to-string"),pe("core-js/modules/es.string.includes"),pe("core-js/modules/es.string.trim"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=b(pe("../core/main")),h=function(tt){if(tt&&tt.__esModule)return tt;if(tt===null||p(tt)!=="object"&&typeof tt!="function")return{default:tt};var ft=Be();if(ft&&ft.has(tt))return ft.get(tt);var yt,gt={},mt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(yt in tt){var wt;Object.prototype.hasOwnProperty.call(tt,yt)&&((wt=mt?Object.getOwnPropertyDescriptor(tt,yt):null)&&(wt.get||wt.set)?Object.defineProperty(gt,yt,wt):gt[yt]=tt[yt])}return gt.default=tt,ft&&ft.set(tt,gt),gt}(pe("../core/constants")),N=b(pe("./color_conversion"));function Be(){var tt;return typeof WeakMap!="function"?null:(tt=new WeakMap,Be=function(){return tt},tt)}function b(tt){return tt&&tt.__esModule?tt:{default:tt}}function E(tt,ft){for(var yt=0;yt<ft.length;yt++){var gt=ft[yt];gt.enumerable=gt.enumerable||!1,gt.configurable=!0,"value"in gt&&(gt.writable=!0),Object.defineProperty(tt,gt.key,gt)}}var de={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},pe=/\s*/,nt=/(\d{1,3})/,Ye=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,me=new RegExp("".concat(Ye.source,"%")),Le={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",nt.source,",",nt.source,",",nt.source,"\\)$"].join(pe.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",me.source,",",me.source,",",me.source,"\\)$"].join(pe.source),"i"),RGBA:new RegExp(["^rgba\\(",nt.source,",",nt.source,",",nt.source,",",Ye.source,"\\)$"].join(pe.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",me.source,",",me.source,",",me.source,",",Ye.source,"\\)$"].join(pe.source),"i"),HSL:new RegExp(["^hsl\\(",nt.source,",",me.source,",",me.source,"\\)$"].join(pe.source),"i"),HSLA:new RegExp(["^hsla\\(",nt.source,",",me.source,",",me.source,",",Ye.source,"\\)$"].join(pe.source),"i"),HSB:new RegExp(["^hsb\\(",nt.source,",",me.source,",",me.source,"\\)$"].join(pe.source),"i"),HSBA:new RegExp(["^hsba\\(",nt.source,",",me.source,",",me.source,",",Ye.source,"\\)$"].join(pe.source),"i")},nt=(d.default.Color=function(){function tt(mt,wt){if(!(this instanceof tt))throw new TypeError("Cannot call a class as a function");if(this._storeModeAndMaxes(mt._colorMode,mt._colorMaxes),![h.RGB,h.HSL,h.HSB].includes(this.mode))throw new Error("".concat(this.mode," is an invalid colorMode."));this._array=tt._parseInputs.apply(this,wt),this._calculateLevels()}var ft,yt,gt;return ft=tt,gt=[{key:"_parseInputs",value:function(mt,wt,St,bt){var Ct,Et=arguments.length,It=this.mode,Dt=this.maxes[It],Pt=[];if(3<=Et){for(Pt[0]=mt/Dt[0],Pt[1]=wt/Dt[1],Pt[2]=St/Dt[2],Pt[3]=typeof bt=="number"?bt/Dt[3]:1,Ct=Pt.length-1;0<=Ct;--Ct){var qt=Pt[Ct];qt<0?Pt[Ct]=0:1<qt&&(Pt[Ct]=1)}return It===h.HSL?N.default._hslaToRGBA(Pt):It===h.HSB?N.default._hsbaToRGBA(Pt):Pt}if(Et===1&&typeof mt=="string"){if(St=mt.trim().toLowerCase(),de[St])return tt._parseInputs.call(this,de[St]);if(Le.HEX3.test(St))return(Pt=Le.HEX3.exec(St).slice(1).map(function(Ht){return parseInt(Ht+Ht,16)/255}))[3]=1,Pt;if(Le.HEX6.test(St))return(Pt=Le.HEX6.exec(St).slice(1).map(function(Ht){return parseInt(Ht,16)/255}))[3]=1,Pt;if(Le.HEX4.test(St))return Pt=Le.HEX4.exec(St).slice(1).map(function(Ht){return parseInt(Ht+Ht,16)/255});if(Le.HEX8.test(St))return Pt=Le.HEX8.exec(St).slice(1).map(function(Ht){return parseInt(Ht,16)/255});if(Le.RGB.test(St))return(Pt=Le.RGB.exec(St).slice(1).map(function(Ht){return Ht/255}))[3]=1,Pt;if(Le.RGB_PERCENT.test(St))return(Pt=Le.RGB_PERCENT.exec(St).slice(1).map(function(Ht){return parseFloat(Ht)/100}))[3]=1,Pt;if(Le.RGBA.test(St))return Pt=Le.RGBA.exec(St).slice(1).map(function(Ht,Gt){return Gt===3?parseFloat(Ht):Ht/255});if(Le.RGBA_PERCENT.test(St))return Pt=Le.RGBA_PERCENT.exec(St).slice(1).map(function(Ht,Gt){return Gt===3?parseFloat(Ht):parseFloat(Ht)/100});if(Le.HSL.test(St)?(Pt=Le.HSL.exec(St).slice(1).map(function(Ht,Gt){return Gt===0?parseInt(Ht,10)/360:parseInt(Ht,10)/100}))[3]=1:Le.HSLA.test(St)&&(Pt=Le.HSLA.exec(St).slice(1).map(function(Ht,Gt){return Gt===0?parseInt(Ht,10)/360:Gt===3?parseFloat(Ht):parseInt(Ht,10)/100})),(Pt=Pt.map(function(Ht){return Math.max(Math.min(Ht,1),0)})).length)return N.default._hslaToRGBA(Pt);if(Le.HSB.test(St)?(Pt=Le.HSB.exec(St).slice(1).map(function(Ht,Gt){return Gt===0?parseInt(Ht,10)/360:parseInt(Ht,10)/100}))[3]=1:Le.HSBA.test(St)&&(Pt=Le.HSBA.exec(St).slice(1).map(function(Ht,Gt){return Gt===0?parseInt(Ht,10)/360:Gt===3?parseFloat(Ht):parseInt(Ht,10)/100})),Pt.length){for(Ct=Pt.length-1;0<=Ct;--Ct)Pt[Ct]=Math.max(Math.min(Pt[Ct],1),0);return N.default._hsbaToRGBA(Pt)}Pt=[1,1,1,1]}else{if(Et!==1&&Et!==2||typeof mt!="number")throw new Error("".concat(arguments,"is not a valid color representation."));Pt[0]=mt/Dt[2],Pt[1]=mt/Dt[2],Pt[2]=mt/Dt[2],Pt[3]=typeof wt=="number"?wt/Dt[3]:1,Pt=Pt.map(function(Ht){return Math.max(Math.min(Ht,1),0)})}return Pt}}],(yt=[{key:"toString",value:function(mt){var wt=this.levels,St=this._array,bt=St[3];switch(mt){case"#rrggbb":return"#".concat(wt[0]<16?"0".concat(wt[0].toString(16)):wt[0].toString(16),wt[1]<16?"0".concat(wt[1].toString(16)):wt[1].toString(16),wt[2]<16?"0".concat(wt[2].toString(16)):wt[2].toString(16));case"#rrggbbaa":return"#".concat(wt[0]<16?"0".concat(wt[0].toString(16)):wt[0].toString(16),wt[1]<16?"0".concat(wt[1].toString(16)):wt[1].toString(16),wt[2]<16?"0".concat(wt[2].toString(16)):wt[2].toString(16),wt[3]<16?"0".concat(wt[3].toString(16)):wt[3].toString(16));case"#rgb":return"#".concat(Math.round(15*St[0]).toString(16),Math.round(15*St[1]).toString(16),Math.round(15*St[2]).toString(16));case"#rgba":return"#".concat(Math.round(15*St[0]).toString(16),Math.round(15*St[1]).toString(16),Math.round(15*St[2]).toString(16),Math.round(15*St[3]).toString(16));case"rgb":return"rgb(".concat(wt[0],", ",wt[1],", ",wt[2],")");case"rgb%":return"rgb(".concat((100*St[0]).toPrecision(3),"%, ",(100*St[1]).toPrecision(3),"%, ",(100*St[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*St[0]).toPrecision(3),"%, ",(100*St[1]).toPrecision(3),"%, ",(100*St[2]).toPrecision(3),"%, ",(100*St[3]).toPrecision(3),"%)");case"hsb":case"hsv":return this.hsba||(this.hsba=N.default._rgbaToHSBA(this._array)),"hsb(".concat(this.hsba[0]*this.maxes[h.HSB][0],", ",this.hsba[1]*this.maxes[h.HSB][1],", ",this.hsba[2]*this.maxes[h.HSB][2],")");case"hsb%":case"hsv%":return this.hsba||(this.hsba=N.default._rgbaToHSBA(this._array)),"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return this.hsba||(this.hsba=N.default._rgbaToHSBA(this._array)),"hsba(".concat(this.hsba[0]*this.maxes[h.HSB][0],", ",this.hsba[1]*this.maxes[h.HSB][1],", ",this.hsba[2]*this.maxes[h.HSB][2],", ",bt,")");case"hsba%":case"hsva%":return this.hsba||(this.hsba=N.default._rgbaToHSBA(this._array)),"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*bt).toPrecision(3),"%)");case"hsl":return this.hsla||(this.hsla=N.default._rgbaToHSLA(this._array)),"hsl(".concat(this.hsla[0]*this.maxes[h.HSL][0],", ",this.hsla[1]*this.maxes[h.HSL][1],", ",this.hsla[2]*this.maxes[h.HSL][2],")");case"hsl%":return this.hsla||(this.hsla=N.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return this.hsla||(this.hsla=N.default._rgbaToHSLA(this._array)),"hsla(".concat(this.hsla[0]*this.maxes[h.HSL][0],", ",this.hsla[1]*this.maxes[h.HSL][1],", ",this.hsla[2]*this.maxes[h.HSL][2],", ",bt,")");case"hsla%":return this.hsla||(this.hsla=N.default._rgbaToHSLA(this._array)),"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*bt).toPrecision(3),"%)");default:return"rgba(".concat(wt[0],",",wt[1],",",wt[2],",",bt,")")}}},{key:"setRed",value:function(mt){this._array[0]=mt/this.maxes[h.RGB][0],this._calculateLevels()}},{key:"setGreen",value:function(mt){this._array[1]=mt/this.maxes[h.RGB][1],this._calculateLevels()}},{key:"setBlue",value:function(mt){this._array[2]=mt/this.maxes[h.RGB][2],this._calculateLevels()}},{key:"setAlpha",value:function(mt){this._array[3]=mt/this.maxes[this.mode][3],this._calculateLevels()}},{key:"_calculateLevels",value:function(){for(var mt=this._array,wt=this.levels=new Array(mt.length),St=mt.length-1;0<=St;--St)wt[St]=Math.round(255*mt[St]);this.hsla=null,this.hsba=null}},{key:"_getAlpha",value:function(){return this._array[3]*this.maxes[this.mode][3]}},{key:"_storeModeAndMaxes",value:function(mt,wt){this.mode=mt,this.maxes=wt}},{key:"_getMode",value:function(){return this.mode}},{key:"_getMaxes",value:function(){return this.maxes}},{key:"_getBlue",value:function(){return this._array[2]*this.maxes[h.RGB][2]}},{key:"_getBrightness",value:function(){return this.hsba||(this.hsba=N.default._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[h.HSB][2]}},{key:"_getGreen",value:function(){return this._array[1]*this.maxes[h.RGB][1]}},{key:"_getHue",value:function(){return this.mode===h.HSB?(this.hsba||(this.hsba=N.default._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[h.HSB][0]):(this.hsla||(this.hsla=N.default._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[h.HSL][0])}},{key:"_getLightness",value:function(){return this.hsla||(this.hsla=N.default._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[h.HSL][2]}},{key:"_getRed",value:function(){return this._array[0]*this.maxes[h.RGB][0]}},{key:"_getSaturation",value:function(){return this.mode===h.HSB?(this.hsba||(this.hsba=N.default._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[h.HSB][1]):(this.hsla||(this.hsla=N.default._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[h.HSL][1])}}])&&E(ft.prototype,yt),gt&&E(ft,gt),tt}(),d.default.Color);u.default=nt},{"../core/constants":272,"../core/main":283,"./color_conversion":268,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],271:[function(t,l,u){function s(b){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(b)}function p(b){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(E){return s(E)}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":s(E)})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.fill"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=(Be=t("../core/main"))&&Be.__esModule?Be:{default:Be},h=function(b){if(b&&b.__esModule)return b;if(b===null||p(b)!=="object"&&typeof b!="function")return{default:b};var E=N();if(E&&E.has(b))return E.get(b);var de,pe={},Ye=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(de in b){var me;Object.prototype.hasOwnProperty.call(b,de)&&((me=Ye?Object.getOwnPropertyDescriptor(b,de):null)&&(me.get||me.set)?Object.defineProperty(pe,de,me):pe[de]=b[de])}return pe.default=b,E&&E.set(b,pe),pe}(t("../core/constants"));function N(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,N=function(){return b},b)}t("./p5.Color"),d.default.prototype.beginClip=function(){this._renderer.beginClip(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{})},d.default.prototype.endClip=function(){this._renderer.endClip()},d.default.prototype.clip=function(b,E){this._renderer.beginClip(E),b(),this._renderer.endClip(E)},d.default.prototype.background=function(){var b;return(b=this._renderer).background.apply(b,arguments),this},d.default.prototype.clear=function(){return this._renderer.clear((arguments.length<=0?void 0:arguments[0])||0,(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0,(arguments.length<=3?void 0:arguments[3])||0),this},d.default.prototype.colorMode=function(b,E,de,pe,Ye){return d.default._validateParameters("colorMode",arguments),b!==h.RGB&&b!==h.HSB&&b!==h.HSL||(this._colorMode=b,b=this._colorMaxes[b],arguments.length===2?(b[0]=E,b[1]=E,b[2]=E,b[3]=E):arguments.length===4?(b[0]=E,b[1]=de,b[2]=pe):arguments.length===5&&(b[0]=E,b[1]=de,b[2]=pe,b[3]=Ye)),this},d.default.prototype.fill=function(){var b;return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),(b=this._renderer).fill.apply(b,arguments),this},d.default.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},d.default.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},d.default.prototype.stroke=function(){var b;return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),(b=this._renderer).stroke.apply(b,arguments),this},d.default.prototype.erase=function(){return this._renderer.erase(0<arguments.length&&arguments[0]!==void 0?arguments[0]:255,1<arguments.length&&arguments[1]!==void 0?arguments[1]:255),this},d.default.prototype.noErase=function(){return this._renderer.noErase(),this};var Be=d.default;u.default=Be},{"../core/constants":272,"../core/main":283,"./p5.Color":270,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],272:[function(t,l,u){Object.defineProperty(u,"__esModule",{value:!0}),u.QUADRATIC=u.LINEAR=u._CTX_MIDDLE=u._DEFAULT_LEADMULT=u._DEFAULT_TEXT_FILL=u.WORD=u.CHAR=u.BOLDITALIC=u.BOLD=u.ITALIC=u.NORMAL=u.BLUR=u.ERODE=u.DILATE=u.POSTERIZE=u.INVERT=u.OPAQUE=u.GRAY=u.THRESHOLD=u.BURN=u.DODGE=u.SOFT_LIGHT=u.HARD_LIGHT=u.OVERLAY=u.REPLACE=u.SCREEN=u.MULTIPLY=u.EXCLUSION=u.SUBTRACT=u.DIFFERENCE=u.LIGHTEST=u.DARKEST=u.ADD=u.REMOVE=u.BLEND=u.UP_ARROW=u.TAB=u.SHIFT=u.RIGHT_ARROW=u.RETURN=u.OPTION=u.LEFT_ARROW=u.ESCAPE=u.ENTER=u.DOWN_ARROW=u.DELETE=u.CONTROL=u.BACKSPACE=u.ALT=u.AUTO=u.HSL=u.HSB=u.RGB=u.MITER=u.BEVEL=u.ROUND=u.SQUARE=u.PROJECT=u.PIE=u.CHORD=u.OPEN=u.CLOSE=u.TESS=u.QUAD_STRIP=u.QUADS=u.TRIANGLE_STRIP=u.TRIANGLE_FAN=u.TRIANGLES=u.LINE_LOOP=u.LINE_STRIP=u.LINES=u.POINTS=u.BASELINE=u.BOTTOM=u.TOP=u.CENTER=u.LEFT=u.RIGHT=u.RADIUS=u.CORNERS=u.CORNER=u.RAD_TO_DEG=u.DEG_TO_RAD=u.RADIANS=u.DEGREES=u.TWO_PI=u.TAU=u.QUARTER_PI=u.PI=u.HALF_PI=u.WAIT=u.TEXT=u.MOVE=u.HAND=u.CROSS=u.ARROW=u.WEBGL2=u.WEBGL=u.P2D=u.VERSION=void 0,u.RGBA=u.HALF_FLOAT=u.FLOAT=u.UNSIGNED_INT=u.UNSIGNED_BYTE=u.COVER=u.CONTAIN=u.FALLBACK=u.LABEL=u.AXES=u.GRID=u._DEFAULT_FILL=u._DEFAULT_STROKE=u.PORTRAIT=u.LANDSCAPE=u.SMOOTH=u.FLAT=u.MIRROR=u.CLAMP=u.REPEAT=u.NEAREST=u.IMAGE=u.IMMEDIATE=u.TEXTURE=u.FILL=u.STROKE=u.CURVE=u.BEZIER=void 0;var s=Math.PI,p=(u.VERSION="1.11.8",u.P2D="p2d",u.WEBGL="webgl",u.WEBGL2="webgl2",u.ARROW="default",u.CROSS="crosshair",u.HAND="pointer",u.MOVE="move",u.TEXT="text",u.WAIT="wait",s/2),p=(u.HALF_PI=p,s),p=(u.PI=p,s/4),p=(u.QUARTER_PI=p,2*s),p=(u.TAU=p,2*s),p=(u.TWO_PI=p,u.DEGREES="degrees",u.RADIANS="radians",s/180),p=(u.DEG_TO_RAD=p,180/s);u.RAD_TO_DEG=p,u.CORNER="corner",u.CORNERS="corners",u.RADIUS="radius",u.RIGHT="right",u.LEFT="left",u.CENTER="center",u.TOP="top",u.BOTTOM="bottom",u.BASELINE="alphabetic",u.POINTS=0,u.LINES=1,u.LINE_STRIP=3,u.LINE_LOOP=2,u.TRIANGLES=4,u.TRIANGLE_FAN=6,u.TRIANGLE_STRIP=5,u.QUADS="quads",u.QUAD_STRIP="quad_strip",u.TESS="tess",u.CLOSE="close",u.OPEN="open",u.CHORD="chord",u.PIE="pie",u.PROJECT="square",u.SQUARE="butt",u.ROUND="round",u.BEVEL="bevel",u.MITER="miter",u.RGB="rgb",u.HSB="hsb",u.HSL="hsl",u.AUTO="auto",u.ALT=18,u.BACKSPACE=8,u.CONTROL=17,u.DELETE=46,u.DOWN_ARROW=40,u.ENTER=13,u.ESCAPE=27,u.LEFT_ARROW=37,u.OPTION=18,u.RETURN=13,u.RIGHT_ARROW=39,u.SHIFT=16,u.TAB=9,u.UP_ARROW=38,u.BLEND="source-over",u.REMOVE="destination-out",u.ADD="lighter",u.DARKEST="darken",u.LIGHTEST="lighten",u.DIFFERENCE="difference",u.SUBTRACT="subtract",u.EXCLUSION="exclusion",u.MULTIPLY="multiply",u.SCREEN="screen",u.REPLACE="copy",u.OVERLAY="overlay",u.HARD_LIGHT="hard-light",u.SOFT_LIGHT="soft-light",u.DODGE="color-dodge",u.BURN="color-burn",u.THRESHOLD="threshold",u.GRAY="gray",u.OPAQUE="opaque",u.INVERT="invert",u.POSTERIZE="posterize",u.DILATE="dilate",u.ERODE="erode",u.BLUR="blur",u.NORMAL="normal",u.ITALIC="italic",u.BOLD="bold",u.BOLDITALIC="bold italic",u.CHAR="CHAR",u.WORD="WORD",u._DEFAULT_TEXT_FILL="#000000",u._DEFAULT_LEADMULT=1.25,u._CTX_MIDDLE="middle",u.LINEAR="linear",u.QUADRATIC="quadratic",u.BEZIER="bezier",u.CURVE="curve",u.STROKE="stroke",u.FILL="fill",u.TEXTURE="texture",u.IMMEDIATE="immediate",u.IMAGE="image",u.NEAREST="nearest",u.REPEAT="repeat",u.CLAMP="clamp",u.MIRROR="mirror",u.FLAT="flat",u.SMOOTH="smooth",u.LANDSCAPE="landscape",u.PORTRAIT="portrait",u._DEFAULT_STROKE="#000000",u._DEFAULT_FILL="#FFFFFF",u.GRID="grid",u.AXES="axes",u.LABEL="label",u.FALLBACK="fallback",u.CONTAIN="contain",u.COVER="cover",u.UNSIGNED_BYTE="unsigned-byte",u.UNSIGNED_INT="unsigned-int",u.FLOAT="float",u.HALF_FLOAT="half-float",u.RGBA="rgba"},{}],273:[function(t,l,u){function s(Ye){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(me){return typeof me}:function(me){return me&&typeof Symbol=="function"&&me.constructor===Symbol&&me!==Symbol.prototype?"symbol":typeof me})(Ye)}function p(Ye){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(me){return s(me)}:function(me){return me&&typeof Symbol=="function"&&me.constructor===Symbol&&me!==Symbol.prototype?"symbol":s(me)})(Ye)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.search"),t("core-js/modules/es.string.split"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=(h=t("./main"))&&h.__esModule?h:{default:h},h=function(Ye){if(Ye&&Ye.__esModule)return Ye;if(Ye===null||p(Ye)!=="object"&&typeof Ye!="function")return{default:Ye};var me=N();if(me&&me.has(Ye))return me.get(Ye);var Le,nt={},tt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(Le in Ye){var ft;Object.prototype.hasOwnProperty.call(Ye,Le)&&((ft=tt?Object.getOwnPropertyDescriptor(Ye,Le):null)&&(ft.get||ft.set)?Object.defineProperty(nt,Le,ft):nt[Le]=Ye[Le])}return nt.default=Ye,me&&me.set(Ye,nt),nt}(t("./constants"));function N(){var Ye;return typeof WeakMap!="function"?null:(Ye=new WeakMap,N=function(){return Ye},Ye)}var Be=[h.ARROW,h.CROSS,h.HAND,h.MOVE,h.TEXT,h.WAIT],b=(d.default.prototype._frameRate=0,d.default.prototype._lastFrameTime=window.performance.now(),d.default.prototype._targetFrameRate=60,window.print),E=!1;function de(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function pe(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}d.default.prototype.print=function(){var Ye;arguments.length?(Ye=console).log.apply(Ye,arguments):E||(b(),window.confirm("You just tried to print the webpage. Do you want to prevent this from running again?")&&(E=!0))},d.default.prototype.frameCount=0,d.default.prototype.deltaTime=0,d.default.prototype.focused=document.hasFocus(),d.default.prototype.cursor=function(Ye,me,Le){var nt,tt="auto",ft=this._curElement.elt;Be.includes(Ye)?tt=Ye:typeof Ye=="string"&&(nt="",me&&Le&&typeof me=="number"&&typeof Le=="number"&&(nt="".concat(me," ").concat(Le)),tt=Ye.substring(0,7)==="http://"||Ye.substring(0,8)==="https://"||/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(Ye)?"url(".concat(Ye,") ").concat(nt,", auto"):Ye),ft.style.cursor=tt},d.default.prototype.frameRate=function(Ye){return d.default._validateParameters("frameRate",arguments),typeof Ye!="number"||Ye<0?this._frameRate:(this._setProperty("_targetFrameRate",Ye),Ye===0&&this._setProperty("_frameRate",Ye),this)},d.default.prototype.getFrameRate=function(){return this.frameRate()},d.default.prototype.setFrameRate=function(Ye){return this.frameRate(Ye)},d.default.prototype.getTargetFrameRate=function(){return this._targetFrameRate},d.default.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},d.default.prototype.webglVersion=h.P2D,d.default.prototype.displayWidth=screen.width,d.default.prototype.displayHeight=screen.height,d.default.prototype.windowWidth=0,d.default.prototype.windowHeight=0,d.default.prototype._onresize=function(Ye){this._setProperty("windowWidth",de()),this._setProperty("windowHeight",pe());var me=this._isGlobal?window:this;typeof me.windowResized!="function"||(me=me.windowResized(Ye))===void 0||me||Ye.preventDefault()},d.default.prototype._updateWindowSize=function(){this._setProperty("windowWidth",de()),this._setProperty("windowHeight",pe())},d.default.prototype.width=0,d.default.prototype.height=0,d.default.prototype.fullscreen=function(Ye){if(d.default._validateParameters("fullscreen",arguments),Ye===void 0)return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(Ye){if(Ye=document.documentElement,!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");Ye.requestFullscreen?Ye.requestFullscreen():Ye.mozRequestFullScreen?Ye.mozRequestFullScreen():Ye.webkitRequestFullscreen?Ye.webkitRequestFullscreen():Ye.msRequestFullscreen&&Ye.msRequestFullscreen()}else document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},d.default.prototype.pixelDensity=function(Ye){var me;return d.default._validateParameters("pixelDensity",arguments),typeof Ye=="number"?(Ye!==this._pixelDensity&&(this._pixelDensity=this._maxAllowedPixelDimensions=Ye),(me=this).resizeCanvas(this.width,this.height,!0)):me=this._pixelDensity,me},d.default.prototype.displayDensity=function(){return window.devicePixelRatio},d.default.prototype.getURL=function(){return location.href},d.default.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(Ye){return Ye!==""})},d.default.prototype.getURLParams=function(){for(var Ye,me=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,Le={};(Ye=me.exec(location.search))!=null;)Ye.index===me.lastIndex&&me.lastIndex++,Le[Ye[1]]=Ye[2];return Le},t=d.default,u.default=t},{"./constants":272,"./main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.search":205,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],274:[function(t,l,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.starts-with"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.starts-with"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(Be=t("../main"))&&Be.__esModule?Be:{default:Be};t("../internationalization");function p(b,E){E=E||console.log.bind(console),d||N(),d.some(function(de){var pe;if(b.message&&b.message.match("\\W?".concat(de.name,"\\W"))!==null)return pe=de.type==="function"?"".concat(de.name,"()"):de.name,E("Did you just try to use p5.js's ".concat(pe," ").concat(de.type,`? If so, you may want to move it into your sketch's setup() function.

For more details, see: `).concat(h)),!0})}var d=null,N=null,h=(s.default._friendlyError=s.default._checkForUserDefinedFunctions=s.default._fesErrorMonitor=function(){},d=null,"https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),N=function(){function b(de){return Object.getOwnPropertyNames(de).filter(function(pe){return pe[0]!=="_"&&!(pe in E)&&(E[pe]=!0)}).map(function(pe){var Ye=typeof de[pe]=="function"?"function":pe===pe.toUpperCase()?"constant":"variable";return{name:pe,type:Ye}})}var E={};(d=[].concat(b(s.default.prototype),b(t("../constants")))).sort(function(de,pe){return pe.name.length-de.name.length})},Be=(s.default.prototype._helpForMisusedAtTopLevelCode=p,document.readyState!=="complete"&&(window.addEventListener("error",p,!1),window.addEventListener("load",function(){window.removeEventListener("error",p,!1)})),s.default);u.default=Be},{"../constants":272,"../internationalization":281,"../main":283,"./browser_errors":void 0,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-names":187,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.starts-with":207,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],275:[function(t,l,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(s=t("../main"))&&s.__esModule?s:{default:s};t("../internationalization"),s.default._friendlyFileLoadError=function(){},t=s.default,u.default=t},{"../internationalization":281,"../main":283}],276:[function(t,l,u){function s(E){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(de){return typeof de}:function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de})(E)}function p(E){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(de){return s(de)}:function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":s(de)})(E)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=Be(t("../main"));t("../internationalization"),N(t("../constants"));function h(){var E;return typeof WeakMap!="function"?null:(E=new WeakMap,h=function(){return E},E)}function N(E){if(E&&E.__esModule)return E;if(E===null||p(E)!=="object"&&typeof E!="function")return{default:E};var de=h();if(de&&de.has(E))return de.get(E);var pe,Ye,me={},Le=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(pe in E)Object.prototype.hasOwnProperty.call(E,pe)&&((Ye=Le?Object.getOwnPropertyDescriptor(E,pe):null)&&(Ye.get||Ye.set)?Object.defineProperty(me,pe,Ye):me[pe]=E[pe]);return me.default=E,de&&de.set(E,me),me}function Be(E){return E&&E.__esModule?E:{default:E}}d.default._fesCodeReader=function(){};var b=d.default;u.default=b},{"../constants":272,"../internationalization":281,"../main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],277:[function(t,l,u){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../main"))&&t.__esModule?t:{default:t};function s(){var p=/(^|@)\S+:\d+/,d=/^\s*at .*(\S+:\d+|\(native\))/m,h=/^(eval@)?(\[native code])?$/;return{parse:function(N){return N.stacktrace!==void 0||N["opera#sourceloc"]!==void 0?this.parseOpera(N):N.stack&&N.stack.match(d)?this.parseV8OrIE(N):N.stack?this.parseFFOrSafari(N):void 0},extractLocation:function(N){return N.indexOf(":")===-1?[N]:[(N=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(N.replace(/[()]/g,"")))[1],N[2]||void 0,N[3]||void 0]},parseV8OrIE:function(N){return N.stack.split(`
`).filter(function(Be){return!!Be.match(d)},this).map(function(Be){var b=(Be=-1<Be.indexOf("(eval ")?Be.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""):Be).replace(/^\s+/,"").replace(/\(eval code/g,"("),E=b.match(/ (\((.+):(\d+):(\d+)\)$)/),b=(b=E?b.replace(E[0],""):b).split(/\s+/).slice(1),E=this.extractLocation(E?E[1]:b.pop());return{functionName:b.join(" ")||void 0,fileName:-1<["eval","<anonymous>"].indexOf(E[0])?void 0:E[0],lineNumber:E[1],columnNumber:E[2],source:Be}},this)},parseFFOrSafari:function(N){return N.stack.split(`
`).filter(function(Be){return!Be.match(h)},this).map(function(Be){var b,E;return(Be=-1<Be.indexOf(" > eval")?Be.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):Be).indexOf("@")===-1&&Be.indexOf(":")===-1?{functionName:Be}:{functionName:(E=Be.match(b=/((.*".+"[^@]*)?[^@]*)(?:@)/))&&E[1]?E[1]:void 0,fileName:(E=this.extractLocation(Be.replace(b,"")))[0],lineNumber:E[1],columnNumber:E[2],source:Be}},this)},parseOpera:function(N){return!N.stacktrace||-1<N.message.indexOf(`
`)&&N.message.split(`
`).length>N.stacktrace.split(`
`).length?this.parseOpera9(N):N.stack?this.parseOpera11(N):this.parseOpera10(N)},parseOpera9:function(N){for(var Be=/Line (\d+).*script (?:in )?(\S+)/i,b=N.message.split(`
`),E=[],de=2,pe=b.length;de<pe;de+=2){var Ye=Be.exec(b[de]);Ye&&E.push({fileName:Ye[2],lineNumber:Ye[1],source:b[de]})}return E},parseOpera10:function(N){for(var Be=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,b=N.stacktrace.split(`
`),E=[],de=0,pe=b.length;de<pe;de+=2){var Ye=Be.exec(b[de]);Ye&&E.push({functionName:Ye[3]||void 0,fileName:Ye[2],lineNumber:Ye[1],source:b[de]})}return E},parseOpera11:function(N){return N.stack.split(`
`).filter(function(Be){return!!Be.match(p)&&!Be.match(/^Error created at/)},this).map(function(Be){var b,de=Be.split("@"),E=this.extractLocation(de.pop()),de=de.shift()||"";return{functionName:de.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,args:(b=de.match(/\(([^)]*)\)/)?de.replace(/^[^(]+\(([^)]*)\)$/,"$1"):b)===void 0||b==="[arguments not available]"?void 0:b.split(","),fileName:E[0],lineNumber:E[1],columnNumber:E[2],source:Be}},this)}}}t.default._getErrorStackParser=function(){return new s},t=t.default,u.default=t},{"../main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206}],278:[function(t,l,u){function s(N){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Be){return typeof Be}:function(Be){return Be&&typeof Symbol=="function"&&Be.constructor===Symbol&&Be!==Symbol.prototype?"symbol":typeof Be})(N)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var p=(p=t("../main"))&&p.__esModule?p:{default:p};(function(N){if(!(N&&N.__esModule)&&!(N===null||h(N)!=="object"&&typeof N!="function")){var Be=d();if(Be&&Be.has(N))return Be.get(N);var b,E={},de=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in N){var pe;Object.prototype.hasOwnProperty.call(N,b)&&((pe=de?Object.getOwnPropertyDescriptor(N,b):null)&&(pe.get||pe.set)?Object.defineProperty(E,b,pe):E[b]=N[b])}E.default=N,Be&&Be.set(N,E)}})(t("../constants")),t("../internationalization");function d(){var N;return typeof WeakMap!="function"?null:(N=new WeakMap,d=function(){return N},N)}function h(N){return(h=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(Be){return s(Be)}:function(Be){return Be&&typeof Symbol=="function"&&Be.constructor===Symbol&&Be!==Symbol.prototype?"symbol":s(Be)})(N)}p.default._validateParameters=p.default._clearValidateParamsCache=function(){},t=p.default,u.default=t},{"../../../docs/parameterData.json":void 0,"../constants":272,"../internationalization":281,"../main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.function.name":174,"core-js/modules/es.map":175,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],279:[function(t,l,u){function s(N){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Be){return typeof Be}:function(Be){return Be&&typeof Symbol=="function"&&Be.constructor===Symbol&&Be!==Symbol.prototype?"symbol":typeof Be})(N)}function p(N){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(Be){return s(Be)}:function(Be){return Be&&typeof Symbol=="function"&&Be.constructor===Symbol&&Be!==Symbol.prototype?"symbol":s(Be)})(N)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=function(N){if(N&&N.__esModule)return N;if(N===null||p(N)!=="object"&&typeof N!="function")return{default:N};var Be=h();if(Be&&Be.has(N))return Be.get(N);var b,E={},de=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(b in N){var pe;Object.prototype.hasOwnProperty.call(N,b)&&((pe=de?Object.getOwnPropertyDescriptor(N,b):null)&&(pe.get||pe.set)?Object.defineProperty(E,b,pe):E[b]=N[b])}return E.default=N,Be&&Be.set(N,E),E}(t("./constants"));function h(){var N;return typeof WeakMap!="function"?null:(N=new WeakMap,h=function(){return N},N)}u.default={modeAdjust:function(N,Be,b,E,de){var pe;return de===d.CORNER?pe={x:N,y:Be,w:Math.abs(b),h:Math.abs(E)}:de===d.CORNERS?pe={x:Math.min(N,b),y:Math.min(Be,E),w:Math.abs(b-N),h:Math.abs(E-Be)}:de===d.RADIUS?pe={x:N-(b=Math.abs(b)),y:Be-(E=Math.abs(E)),w:2*b,h:2*E}:de===d.CENTER&&(pe={x:N-.5*(b=Math.abs(b)),y:Be-.5*(E=Math.abs(E)),w:b,h:E}),pe}}},{"./constants":272,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],280:[function(t,l,u){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var s=(p=t("../core/main"))&&p.__esModule?p:{default:p};t("./internationalization");var p=Promise.resolve();Promise.all([new Promise(function(d,h){document.readyState==="complete"?d():window.addEventListener("load",d,!1)}),p]).then(function(){var d;window._setupDone!==void 0?console.warn("p5.js seems to have been imported multiple times. Please remove the duplicate import"):window.mocha||(d=new Event("p5Ready"),window.dispatchEvent(d),(window.setup&&typeof window.setup=="function"||window.draw&&typeof window.draw=="function")&&!s.default.instance&&new s.default)})},{"../core/main":283,"./internationalization":281,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.string.iterator":200,"core-js/modules/web.dom-collections.iterator":246}],281:[function(t,l,u){t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.setTranslatorLanguage=u.currentTranslatorLanguage=u.availableTranslatorLanguages=u.initialize=u.translator=void 0;var s,p,d=N(t("i18next")),h=N(t("i18next-browser-languagedetector"));function N(E){return E&&E.__esModule?E:{default:E}}function Be(E,de){for(var pe=0;pe<de.length;pe++){var Ye=de[pe];Ye.enumerable=Ye.enumerable||!1,Ye.configurable=!0,"value"in Ye&&(Ye.writable=!0),Object.defineProperty(E,Ye.key,Ye)}}var b=function(){function E(Ye,me){if(!(this instanceof E))throw new TypeError("Cannot call a class as a function");this.init(Ye,me)}var de,pe;return de=E,(pe=[{key:"fetchWithTimeout",value:function(Ye,me){var Le=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2e3;return Promise.race([fetch(Ye,me),new Promise(function(nt,tt){return setTimeout(function(){return tt(new Error("timeout"))},Le)})])}},{key:"init",value:function(Ye){var me=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this.services=Ye,this.options=me}},{key:"read",value:function(Ye,me,Le){var nt=this.options.loadPath;Ye===this.options.fallback?Le(null,s[Ye][me]):p.includes(Ye)?(nt=this.services.interpolator.interpolate(nt,{lng:Ye,ns:me}),this.loadUrl(nt,Le)):Le("Not found",!1)}},{key:"loadUrl",value:function(Ye,me){this.fetchWithTimeout(Ye).then(function(Le){if(Le.ok)return Le.json();throw new Error("failed loading ".concat(Ye))},function(){throw new Error("failed loading ".concat(Ye))}).then(function(Le){return me(null,Le)}).catch(me)}}])&&Be(de.prototype,pe),E}();b.type="backend",u.translator=function(E,de){console.debug("p5.js translator called before translations were loaded"),d.default.t(E,de)},u.initialize=function(){return d.default.use(h.default).use(b).init({fallbackLng:"en",nestingPrefix:"$tr(",nestingSuffix:")",defaultNS:"translation",returnEmptyString:!1,interpolation:{escapeValue:!1},detection:{checkWhitelist:!1,order:["querystring","navigator","htmlTag","path","subdomain"],caches:[]},backend:{fallback:"en",loadPath:"https://cdn.jsdelivr.net/npm/p5/translations/{{lng}}/{{ns}}.json"},partialBundledLanguages:!0,resources:s}).then(function(E){u.translator=E},function(E){return console.debug("Translations failed to load (".concat(E,")"))})},u.availableTranslatorLanguages=function(){return d.default.languages},u.currentTranslatorLanguage=function(E){return d.default.language},u.setTranslatorLanguage=function(E){return d.default.changeLanguage(E||void 0,function(de){return console.debug("Translations failed to load (".concat(de,")"))})}},{"../../translations":void 0,"../../translations/dev":void 0,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/web.dom-collections.iterator":246,i18next:3,"i18next-browser-languagedetector":3}],282:[function(t,l,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("./main"))&&t.__esModule?t:{default:t},t.default.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},t.default.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},t.default.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},t.default.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},t=t.default,u.default=t},{"./main":283}],283:[function(t,l,u){function s(E){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(de){return typeof de}:function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de})(E)}function p(E){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(de){return s(de)}:function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":s(de)})(E)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-names"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t("./shim");var d=function(E){if(E&&E.__esModule)return E;if(E===null||p(E)!=="object"&&typeof E!="function")return{default:E};var de=h();if(de&&de.has(E))return de.get(E);var pe,Ye={},me=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(pe in E){var Le;Object.prototype.hasOwnProperty.call(E,pe)&&((Le=me?Object.getOwnPropertyDescriptor(E,pe):null)&&(Le.get||Le.set)?Object.defineProperty(Ye,pe,Le):Ye[pe]=E[pe])}return Ye.default=E,de&&de.set(E,Ye),Ye}(t("./constants"));function h(){var E;return typeof WeakMap!="function"?null:(E=new WeakMap,h=function(){return E},E)}function N(E,de){for(var pe=0;pe<de.length;pe++){var Ye=de[pe];Ye.enumerable=Ye.enumerable||!1,Ye.configurable=!0,"value"in Ye&&(Ye.writable=!0),Object.defineProperty(E,Ye.key,Ye)}}var Be,b=function(){function E(Ye,nt){var Le=this;if(!(this instanceof E))throw new TypeError("Cannot call a class as a function");this._isGlobal=!Ye,this._setupDone=!1,this._preloadDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._maxAllowedPixelDimensions=0,this._userNode=nt,this._curElement=null,this._elements=[],this._glAttributes=null,this._requestAnimId=0,this._preloadCount=0,this._loop=!0,this._startListener=null,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._millisStart=-1,this._recording=!1,this.touchstart=!1,this.touchend=!1,this._lcg_random_state=null,this._gaussian_previous=!1,this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};var nt=Object.getOwnPropertyNames(E.prototype._registeredMethods),tt=!0,ft=!1,yt=void 0;try{for(var gt,mt=nt[Symbol.iterator]();!(tt=(gt=mt.next()).done);tt=!0){var wt=gt.value;this._registeredMethods[wt]=E.prototype._registeredMethods[wt].slice()}}catch(Ht){ft=!0,yt=Ht}finally{try{tt||mt.return==null||mt.return()}finally{if(ft)throw yt}}window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),E.prototype.callRegisteredHooksFor=function(Ht){var Gt=this||E.prototype,Ut=this._isGlobal?window:this;if(Gt._registeredMethods.hasOwnProperty(Ht)){var Gt=Gt._registeredMethods[Ht],Yt=!0,Ht=!1,Zt=void 0;try{for(var vt,Rt=Gt[Symbol.iterator]();!(Yt=(vt=Rt.next()).done);Yt=!0){var Lt=vt.value;typeof Lt=="function"&&Lt.call(Ut)}}catch(er){Ht=!0,Zt=er}finally{try{Yt||Rt.return==null||Rt.return()}finally{if(Ht)throw Zt}}}},this._start=function(){Le._userNode&&typeof Le._userNode=="string"&&(Le._userNode=document.getElementById(Le._userNode));var Ht=Le._isGlobal?window:Le;if(Ht.preload){Le.callRegisteredHooksFor("beforePreload");var Gt,Ut=document.getElementById(Le._loadingScreenId),Yt=(Ut||((Ut=document.createElement("div")).innerHTML="Loading...",Ut.style.position="absolute",Ut.id=Le._loadingScreenId,(Le._userNode||document.body).appendChild(Ut)),Le._preloadMethods);for(Gt in Yt){Yt[Gt]=Yt[Gt]||E;var Zt=Yt[Gt];Zt!==E.prototype&&Zt!==E||(Le._isGlobal&&(window[Gt]=Le._wrapPreload(Le,Gt)),Zt=Le),Le._registeredPreloadMethods[Gt]=Zt[Gt],Zt[Gt]=Le._wrapPreload(Zt,Gt)}Ht.preload(),Le._runIfPreloadsAreDone()}else Le._setup(),Le._recording||Le._draw()},this._runIfPreloadsAreDone=function(){var Ht,Gt=this._isGlobal?window:this;Gt._preloadCount===0&&((Ht=document.getElementById(Gt._loadingScreenId))&&Ht.parentNode.removeChild(Ht),this.callRegisteredHooksFor("afterPreload"),this._setupDone||(this._lastTargetFrameTime=window.performance.now(),this._lastRealFrameTime=window.performance.now(),Gt._setup(),this._recording||Gt._draw()))},this._decrementPreload=function(){var Ht=this._isGlobal?window:this;Ht._preloadDone||typeof Ht.preload!="function"||(Ht._setProperty("_preloadCount",Ht._preloadCount-1),Ht._runIfPreloadsAreDone())},this._wrapPreload=function(Ht,Gt){var Ut=this;return function(){Ut._incrementPreload();for(var Yt=arguments.length,Zt=new Array(Yt),vt=0;vt<Yt;vt++)Zt[vt]=arguments[vt];return Ut._registeredPreloadMethods[Gt].apply(Ht,Zt)}},this._incrementPreload=function(){var Ht=this._isGlobal?window:this;Ht._preloadDone||Ht._setProperty("_preloadCount",Ht._preloadCount+1)},this._setup=function(){Le.callRegisteredHooksFor("beforeSetup"),Le.createCanvas(Le._defaultCanvasSize.width,Le._defaultCanvasSize.height,"p2d");var Ht=Le._isGlobal?window:Le;if(typeof Ht.preload=="function")for(var Gt in Le._preloadMethods)Ht[Gt]=Le._preloadMethods[Gt][Gt],Ht[Gt]&&Le&&(Ht[Gt]=Ht[Gt].bind(Le));Le._millisStart=window.performance.now(),Ht._preloadDone=!0,typeof Ht.setup=="function"&&Ht.setup();var Ut=document.getElementsByTagName("canvas"),Yt=!0,Zt=!1,vt=void 0;try{for(var Rt,Lt=Ut[Symbol.iterator]();!(Yt=(Rt=Lt.next()).done);Yt=!0){var Vt=Rt.value;Vt.dataset.hidden==="true"&&(Vt.style.visibility="",delete Vt.dataset.hidden)}}catch(Jt){Zt=!0,vt=Jt}finally{try{Yt||Lt.return==null||Lt.return()}finally{if(Zt)throw vt}}Le._lastTargetFrameTime=window.performance.now(),Le._lastRealFrameTime=window.performance.now(),Le._setupDone=!0,(Le._accessibleOutputs.grid||Le._accessibleOutputs.text)&&Le._updateAccsOutput(),Le.callRegisteredHooksFor("afterSetup")},this._draw=function(Gt){var Gt=Gt||window.performance.now(),Ut=Gt-Le._lastTargetFrameTime,Yt=1e3/Le._targetFrameRate;(!Le._loop||Yt-5<=Ut)&&(Le.deltaTime=Gt-Le._lastRealFrameTime,Le._setProperty("deltaTime",Le.deltaTime),Le._frameRate=1e3/Le.deltaTime,Le.redraw(),Le._lastTargetFrameTime=Math.max(Le._lastTargetFrameTime+Yt,Gt),Le._lastRealFrameTime=Gt,Le._updateMouseCoords!==void 0&&(Le._updateMouseCoords(),Le._setProperty("movedX",0),Le._setProperty("movedY",0))),Le._loop&&(Le._requestAnimId=window.requestAnimationFrame(Le._draw))},this._setProperty=function(Ht,Gt){Le[Ht]=Gt,Le._isGlobal&&(window[Ht]=Gt)},this.remove=function(){Le._startListener&&window.removeEventListener("load",Le._startListener,!1);var Ht=document.getElementById(Le._loadingScreenId);if(Ht&&(Ht.parentNode.removeChild(Ht),Le._incrementPreload()),Le._curElement){for(var Gt in Le._loop=!1,Le._requestAnimId&&window.cancelAnimationFrame(Le._requestAnimId),Le._events)window.removeEventListener(Gt,Le._events[Gt]);var Ut=!0,Ht=!1,Yt=void 0;try{for(var Zt,vt=Le._elements[Symbol.iterator]();!(Ut=(Zt=vt.next()).done);Ut=!0){var Rt,Lt=Zt.value;for(Rt in Lt.elt&&Lt.elt.parentNode&&Lt.elt.parentNode.removeChild(Lt.elt),Lt._events)Lt.elt.removeEventListener(Rt,Lt._events[Rt])}}catch(yr){Ht=!0,Yt=yr}finally{try{Ut||vt.return==null||vt.return()}finally{if(Ht)throw Yt}}var Vt=Le;Le._registeredMethods.remove.forEach(function(yr){yr!==void 0&&yr.call(Vt)})}if(Le._isGlobal){for(var Jt in E.prototype)try{delete window[Jt]}catch{window[Jt]=void 0}for(var er in Le)if(Le.hasOwnProperty(er))try{delete window[er]}catch{window[er]=void 0}E.instance=null}},this._updateWindowSize();var St,bt,Ct=this._createFriendlyGlobalFunctionBinder();if(this._isGlobal){for(var Et in E.instance=this,E.prototype)typeof E.prototype[Et]=="function"?(St=Et.substring(2),this._events.hasOwnProperty(St)||(Math.hasOwnProperty(Et)&&Math[Et]===E.prototype[Et]?Ct(Et,E.prototype[Et]):Ct(Et,E.prototype[Et].bind(this)))):Ct(Et,E.prototype[Et]);for(var It in this)this.hasOwnProperty(It)&&Ct(It,this[It])}else Ye(this),E._checkForUserDefinedFunctions(this);for(bt in this._updateWindowSize(),this.callRegisteredHooksFor("init"),this._setupPromisePreloads(),this._events){var Dt=this["_on".concat(bt)];Dt&&(Dt=Dt.bind(this),window.addEventListener(bt,Dt,{passive:!1}),this._events[bt]=Dt)}function Pt(){Le._setProperty("focused",!0)}function qt(){Le._setProperty("focused",!1)}window.addEventListener("focus",Pt),window.addEventListener("blur",qt),this.registerMethod("remove",function(){window.removeEventListener("focus",Pt),window.removeEventListener("blur",qt)}),document.readyState==="complete"?this._start():(this._startListener=this._start.bind(this),window.addEventListener("load",this._startListener,!1))}var de,pe;return de=E,(pe=[{key:"_initializeInstanceVariables",value:function(){this._accessibleOutputs={text:!1,grid:!1,textLabel:!1,gridLabel:!1},this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=d.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._downKeys={}}},{key:"registerPreloadMethod",value:function(Ye,me){E.prototype._preloadMethods.hasOwnProperty(Ye)||(E.prototype._preloadMethods[Ye]=me)}},{key:"registerMethod",value:function(Ye,me){var Le=this||E.prototype;Le._registeredMethods.hasOwnProperty(Ye)||(Le._registeredMethods[Ye]=[]),Le._registeredMethods[Ye].push(me)}},{key:"unregisterMethod",value:function(Ye,me){var Le=this||E.prototype;if(Le._registeredMethods.hasOwnProperty(Ye)){for(var nt=Le._registeredMethods[Ye],tt=[],ft=0;ft<nt.length;ft++)nt[ft]===me&&tt.push(ft);for(var yt=tt.length-1;0<=yt;yt--)nt.splice(tt[yt],1)}}},{key:"_createFriendlyGlobalFunctionBinder",value:function(){var Ye=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},me=Ye.globalObject||window;return Ye.log||console.log.bind(console),function(Le,nt){E.disableFriendlyErrors,me[Le]=nt}}}])&&N(de.prototype,pe),E}();for(Be in b.instance=null,b.disableFriendlyErrors=!1,d)b.prototype[Be]=d[Be];b.VERSION=d.VERSION,b.prototype._preloadMethods={loadJSON:b.prototype,loadImage:b.prototype,loadStrings:b.prototype,loadXML:b.prototype,loadBytes:b.prototype,loadTable:b.prototype,loadFont:b.prototype,loadModel:b.prototype,loadShader:b.prototype},b.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},b.prototype._registeredPreloadMethods={},u.default=b},{"./constants":272,"./shim":294,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-own-property-names":187,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],284:[function(t,l,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(t=t("./main"))&&t.__esModule?t:{default:t};function p(d,h){for(var N=0;N<h.length;N++){var Be=h[N];Be.enumerable=Be.enumerable||!1,Be.configurable=!0,"value"in Be&&(Be.writable=!0),Object.defineProperty(d,Be.key,Be)}}s.default.Element=function(){function d(b,E){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.elt=b,this._pInst=this._pixelsState=E,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight}var h,N,Be;return h=d,Be=[{key:"_adjustListener",value:function(b,E,de){return E===!1?s.default.Element._detachListener(b,de):s.default.Element._attachListener(b,E,de),this}},{key:"_attachListener",value:function(b,E,de){de._events[b]&&s.default.Element._detachListener(b,de),E=E.bind(de),de.elt.addEventListener(b,E,!1),de._events[b]=E}},{key:"_detachListener",value:function(b,E){var de=E._events[b];E.elt.removeEventListener(b,de,!1),E._events[b]=null}}],(N=[{key:"parent",value:function(b){return b===void 0?this.elt.parentNode:(typeof b=="string"?(b[0]==="#"&&(b=b.substring(1)),b=document.getElementById(b)):b instanceof s.default.Element&&(b=b.elt),b.appendChild(this.elt),this)}},{key:"id",value:function(b){return b===void 0?this.elt.id:(this.elt.id=b,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)}},{key:"class",value:function(b){return b===void 0?this.elt.className:(this.elt.className=b,this)}},{key:"mousePressed",value:function(b){return s.default.Element._adjustListener("mousedown",function(E){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(E),b.call(this,E)},this),this}},{key:"doubleClicked",value:function(b){return s.default.Element._adjustListener("dblclick",b,this),this}},{key:"mouseWheel",value:function(b){return s.default.Element._adjustListener("wheel",b,this),this}},{key:"mouseReleased",value:function(b){return s.default.Element._adjustListener("mouseup",b,this),this}},{key:"mouseClicked",value:function(b){return s.default.Element._adjustListener("click",b,this),this}},{key:"mouseMoved",value:function(b){return s.default.Element._adjustListener("mousemove",b,this),this}},{key:"mouseOver",value:function(b){return s.default.Element._adjustListener("mouseover",b,this),this}},{key:"mouseOut",value:function(b){return s.default.Element._adjustListener("mouseout",b,this),this}},{key:"touchStarted",value:function(b){return s.default.Element._adjustListener("touchstart",b,this),this}},{key:"touchMoved",value:function(b){return s.default.Element._adjustListener("touchmove",b,this),this}},{key:"touchEnded",value:function(b){return s.default.Element._adjustListener("touchend",b,this),this}},{key:"dragOver",value:function(b){return s.default.Element._adjustListener("dragover",b,this),this}},{key:"dragLeave",value:function(b){return s.default.Element._adjustListener("dragleave",b,this),this}},{key:"_setProperty",value:function(b,E){this[b]=E}}])&&p(h.prototype,N),Be&&p(h,Be),d}(),t=s.default.Element,u.default=t},{"./main":283}],285:[function(t,l,u){function s(Le){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(nt){return typeof nt}:function(nt){return nt&&typeof Symbol=="function"&&nt.constructor===Symbol&&nt!==Symbol.prototype?"symbol":typeof nt})(Le)}function p(Le){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(nt){return s(nt)}:function(nt){return nt&&typeof Symbol=="function"&&nt.constructor===Symbol&&nt!==Symbol.prototype?"symbol":s(nt)})(Le)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.get-prototype-of"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=(me=t("./main"))&&me.__esModule?me:{default:me},h=function(Le){if(Le&&Le.__esModule)return Le;if(Le===null||p(Le)!=="object"&&typeof Le!="function")return{default:Le};var nt=N();if(nt&&nt.has(Le))return nt.get(Le);var tt,ft={},yt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(tt in Le){var gt;Object.prototype.hasOwnProperty.call(Le,tt)&&((gt=yt?Object.getOwnPropertyDescriptor(Le,tt):null)&&(gt.get||gt.set)?Object.defineProperty(ft,tt,gt):ft[tt]=Le[tt])}return ft.default=Le,nt&&nt.set(Le,ft),ft}(t("./constants"));function N(){var Le;return typeof WeakMap!="function"?null:(Le=new WeakMap,N=function(){return Le},Le)}function Be(Le,nt){for(var tt=0;tt<nt.length;tt++){var ft=nt[tt];ft.enumerable=ft.enumerable||!1,ft.configurable=!0,"value"in ft&&(ft.writable=!0),Object.defineProperty(Le,ft.key,ft)}}function b(Le,nt){return(b=Object.setPrototypeOf||function(tt,ft){return tt.__proto__=ft,tt})(Le,nt)}function E(Le){return function(){var nt,tt=Ye(Le);return de(this,function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(nt=Ye(this).constructor,Reflect.construct(tt,arguments,nt)):tt.apply(this,arguments))}}function de(Le,nt){return!nt||p(nt)!=="object"&&typeof nt!="function"?pe(Le):nt}function pe(Le){if(Le===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Le}function Ye(Le){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(nt){return nt.__proto__||Object.getPrototypeOf(nt)})(Le)}d.default.Graphics=function(Le){var nt=ft;if(typeof Le!="function"&&Le!==null)throw new TypeError("Super expression must either be null or a function");nt.prototype=Object.create(Le&&Le.prototype,{constructor:{value:nt,writable:!0,configurable:!0}}),Le&&b(nt,Le);var tt=E(ft);function ft(yt,gt,It,wt,St){var bt;if(!(this instanceof ft))throw new TypeError("Cannot call a class as a function");Et=St||document.createElement("canvas"),(bt=tt.call(this,Et,wt)).canvas=Et;var Ct,Et=It||h.P2D,It=wt._userNode||document.body;for(Ct in St||It.appendChild(bt.canvas),d.default.prototype)bt[Ct]||(typeof d.default.prototype[Ct]=="function"?bt[Ct]=d.default.prototype[Ct].bind(pe(bt)):bt[Ct]=d.default.prototype[Ct]);return d.default.prototype._initializeInstanceVariables.apply(pe(bt)),bt.width=yt,bt.height=gt,bt._pixelDensity=wt._pixelDensity,Et===h.WEBGL?(bt._renderer=new d.default.RendererGL(bt.canvas,pe(bt),!1),yt=(St=bt._renderer._adjustDimensions(yt,gt)).adjustedWidth,gt=St.adjustedHeight):bt._renderer=new d.default.Renderer2D(bt.canvas,pe(bt),!1),wt._elements.push(pe(bt)),Object.defineProperty(pe(bt),"deltaTime",{get:function(){return this._pInst.deltaTime}}),bt._renderer.resize(yt,gt),bt._renderer._applyDefaults(),de(bt,pe(bt))}return nt=ft,(Le=[{key:"reset",value:function(){this._renderer.resetMatrix(),this._renderer.isP3D&&this._renderer._update()}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var yt,gt=this._pInst._elements.indexOf(this);for(yt in gt!==-1&&this._pInst._elements.splice(gt,1),this._events)this.elt.removeEventListener(yt,this._events[yt]);this._renderer=void 0,this.canvas=void 0,this.elt=void 0}},{key:"createFramebuffer",value:function(yt){return new d.default.Framebuffer(this,yt)}}])&&Be(nt.prototype,Le),ft}(d.default.Element);var me=d.default.Graphics;u.default=me},{"./constants":272,"./main":283,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],286:[function(t,l,u){function s(Le){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(nt){return typeof nt}:function(nt){return nt&&typeof Symbol=="function"&&nt.constructor===Symbol&&nt!==Symbol.prototype?"symbol":typeof nt})(Le)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var p=(Ye=t("./main"))&&Ye.__esModule?Ye:{default:Ye},d=function(Le){if(Le&&Le.__esModule)return Le;if(Le===null||N(Le)!=="object"&&typeof Le!="function")return{default:Le};var nt=h();if(nt&&nt.has(Le))return nt.get(Le);var tt,ft={},yt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(tt in Le){var gt;Object.prototype.hasOwnProperty.call(Le,tt)&&((gt=yt?Object.getOwnPropertyDescriptor(Le,tt):null)&&(gt.get||gt.set)?Object.defineProperty(ft,tt,gt):ft[tt]=Le[tt])}return ft.default=Le,nt&&nt.set(Le,ft),ft}(t("../core/constants"));function h(){var Le;return typeof WeakMap!="function"?null:(Le=new WeakMap,h=function(){return Le},Le)}function N(Le){return(N=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(nt){return s(nt)}:function(nt){return nt&&typeof Symbol=="function"&&nt.constructor===Symbol&&nt!==Symbol.prototype?"symbol":s(nt)})(Le)}function Be(Le,nt){for(var tt=0;tt<nt.length;tt++){var ft=nt[tt];ft.enumerable=ft.enumerable||!1,ft.configurable=!0,"value"in ft&&(ft.writable=!0),Object.defineProperty(Le,ft.key,ft)}}function b(Le,nt){return(b=Object.setPrototypeOf||function(tt,ft){return tt.__proto__=ft,tt})(Le,nt)}function E(Le){return function(){var nt,tt,ft=pe(Le);return nt=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(nt=pe(this).constructor,Reflect.construct(ft,arguments,nt)):ft.apply(this,arguments),ft=this,!(tt=nt)||N(tt)!=="object"&&typeof tt!="function"?de(ft):tt}}function de(Le){if(Le===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Le}function pe(Le){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(nt){return nt.__proto__||Object.getPrototypeOf(nt)})(Le)}var Ye=function(Le){var nt=ft;if(typeof Le!="function"&&Le!==null)throw new TypeError("Super expression must either be null or a function");nt.prototype=Object.create(Le&&Le.prototype,{constructor:{value:nt,writable:!0,configurable:!0}}),Le&&b(nt,Le);var tt=E(ft);function ft(yt,gt,mt){var wt;if(this instanceof ft)return(wt=tt.call(this,yt,gt)).canvas=yt,wt._pixelsState=gt,mt?(wt._isMainCanvas=!0,wt._pInst._setProperty("_curElement",de(wt)),wt._pInst._setProperty("canvas",wt.canvas),wt._pInst._setProperty("width",wt.width),wt._pInst._setProperty("height",wt.height)):(wt.canvas.style.display="none",wt._styles=[]),wt._clipping=!1,wt._clipInvert=!1,wt._textSize=12,wt._textLeading=15,wt._textFont="sans-serif",wt._textStyle=d.NORMAL,wt._textAscent=null,wt._textDescent=null,wt._textAlign=d.LEFT,wt._textBaseline=d.BASELINE,wt._textWrap=d.WORD,wt._rectMode=d.CORNER,wt._ellipseMode=d.CENTER,wt._curveTightness=0,wt._imageMode=d.CORNER,wt._tint=null,wt._doStroke=!0,wt._doFill=!0,wt._strokeSet=!1,wt._fillSet=!1,wt._leadingSet=!1,wt._pushPopDepth=0,wt;throw new TypeError("Cannot call a class as a function")}return nt=ft,(Le=[{key:"push",value:function(){return this._pushPopDepth++,{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_leadingSet:this._leadingSet,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle,_textWrap:this._textWrap}}}},{key:"pop",value:function(yt){this._pushPopDepth--,yt.properties&&Object.assign(this,yt.properties)}},{key:"beginClip",value:function(){var yt=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};if(this._clipping)throw new Error("It looks like you're trying to clip while already in the middle of clipping. Did you forget to endClip()?");this._clipping=!0,this._clipInvert=yt.invert}},{key:"endClip",value:function(){if(!this._clipping)throw new Error("It looks like you've called endClip() without beginClip(). Did you forget to call beginClip() first?");this._clipping=!1}},{key:"resize",value:function(yt,gt){this.width=yt,this.height=gt,this.elt.width=yt*this._pInst._pixelDensity,this.elt.height=gt*this._pInst._pixelDensity,this.elt.style.width="".concat(yt,"px"),this.elt.style.height="".concat(gt,"px"),this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))}},{key:"get",value:function(yt,gt,mt,wt){var St=this._pixelsState,bt=St._pixelDensity,Ct=this.canvas;if(yt===void 0&&gt===void 0)yt=gt=0,mt=St.width,wt=St.height;else if(yt*=bt,gt*=bt,mt===void 0&&wt===void 0)return yt<0||gt<0||yt>=Ct.width||gt>=Ct.height?[0,0,0,0]:this._getPixel(yt,gt);return St=new p.default.Image(mt*bt,wt*bt),St.pixelDensity(bt),St.canvas.getContext("2d").drawImage(Ct,yt,gt,mt*bt,wt*bt,0,0,mt*bt,wt*bt),St}},{key:"textLeading",value:function(yt){return typeof yt=="number"?(this._setProperty("_leadingSet",!0),this._setProperty("_textLeading",yt),this._pInst):this._textLeading}},{key:"textStyle",value:function(yt){return yt?(yt!==d.NORMAL&&yt!==d.ITALIC&&yt!==d.BOLD&&yt!==d.BOLDITALIC||this._setProperty("_textStyle",yt),this._applyTextProperties()):this._textStyle}},{key:"textAscent",value:function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent}},{key:"textDescent",value:function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent}},{key:"textAlign",value:function(yt,gt){return yt!==void 0?(this._setProperty("_textAlign",yt),gt!==void 0&&this._setProperty("_textBaseline",gt),this._applyTextProperties()):{horizontal:this._textAlign,vertical:this._textBaseline}}},{key:"textWrap",value:function(yt){return this._setProperty("_textWrap",yt),this._textWrap}},{key:"text",value:function(yt,gt,mt,wt,St){var bt,Ct,Et,It,Dt=this._pInst,Pt=this._textWrap,qt=Number.MAX_VALUE,Ht=mt;if((this._doFill||this._doStroke)&&yt!==void 0){if(bt=(yt=(yt=typeof yt!="string"?yt.toString():yt).replace(/(\t)/g,"  ")).split(`
`),wt!==void 0){switch(this._rectMode===d.CENTER&&(gt-=wt/2),this._textAlign){case d.CENTER:gt+=wt/2;break;case d.RIGHT:gt+=wt}if(St!==void 0){this._rectMode===d.CENTER&&(mt-=St/2,Ht-=St/2);var yt=mt,Gt=Dt.textAscent();switch(this._textBaseline){case d.BOTTOM:It=mt+St,mt=Math.max(It,mt),Ht+=Gt;break;case d.CENTER:It=mt+St/2,mt=Math.max(It,mt),Ht+=Gt/2}qt=mt+St-Gt,this._textBaseline===d.CENTER&&(qt=yt+St-Gt/2)}else this._textBaseline!==d.BOTTOM&&this._textBaseline!==d.CENTER||(Ht=mt-(yt=Dt.textSize()*this._textLeading)/2,qt=mt+yt/2);if(Pt===d.WORD){for(var Ut=[],Yt=0;Yt<bt.length;Yt++){for(var Zt="",vt=bt[Yt].split(" "),Rt=0;Rt<vt.length;Rt++)Ct="".concat(Zt+vt[Rt])+" ",Zt=wt<(Et=this.textWidth(Ct))&&0<Zt.length?(Ut.push(Zt),"".concat(vt[Rt])+" "):Ct;Ut.push(Zt)}var Lt=0;this._textBaseline===d.CENTER?Lt=(Ut.length-1)*Dt.textLeading()/2:this._textBaseline===d.BOTTOM&&(Lt=(Ut.length-1)*Dt.textLeading());for(var Vt=0;Vt<bt.length;Vt++){Zt="",vt=bt[Vt].split(" ");for(var Jt=0;Jt<vt.length;Jt++)Ct="".concat(Zt+vt[Jt])+" ",wt<(Et=this.textWidth(Ct))&&0<Zt.length?(this._renderText(Dt,Zt.trim(),gt,mt-Lt,qt,Ht),Zt="".concat(vt[Jt])+" ",mt+=Dt.textLeading()):Zt=Ct;this._renderText(Dt,Zt.trim(),gt,mt-Lt,qt,Ht),mt+=Dt.textLeading()}}else{for(var er=[],ur=0;ur<bt.length;ur++)for(var yr=bt[ur].split(Zt=""),Qt=0;Qt<yr.length;Qt++)Ct="".concat(Zt+yr[Qt]),(Et=this.textWidth(Ct))<=wt?Zt+=yr[Qt]:wt<Et&&0<Zt.length&&(er.push(Zt),Zt="".concat(yr[Qt]));er.push(Zt);var nr=0;this._textBaseline===d.CENTER?nr=(er.length-1)*Dt.textLeading()/2:this._textBaseline===d.BOTTOM&&(nr=(er.length-1)*Dt.textLeading());for(var or=0;or<bt.length;or++){yr=bt[or].split(Zt="");for(var Wt=0;Wt<yr.length;Wt++)Ct="".concat(Zt+yr[Wt]),(Et=this.textWidth(Ct))<=wt?Zt+=yr[Wt]:wt<Et&&0<Zt.length&&(this._renderText(Dt,Zt.trim(),gt,mt-nr,qt,Ht),mt+=Dt.textLeading(),Zt="".concat(yr[Wt]))}this._renderText(Dt,Zt.trim(),gt,mt-nr,qt,Ht),mt+=Dt.textLeading()}}else{var ir=0;this._textBaseline===d.CENTER?ir=(bt.length-1)*Dt.textLeading()/2:this._textBaseline===d.BOTTOM&&(ir=(bt.length-1)*Dt.textLeading());for(var br=0;br<bt.length;br++)this._renderText(Dt,bt[br],gt,mt-ir,qt,Ht-ir),mt+=Dt.textLeading()}return Dt}}},{key:"_applyDefaults",value:function(){return this}},{key:"_isOpenType",value:function(){var yt=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this._textFont;return N(yt)==="object"&&yt.font&&yt.font.supported}},{key:"_updateTextMetrics",value:function(){var yt,gt,mt,wt,St,bt;return this._isOpenType()?(this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent())):((yt=document.createElement("span")).style.fontFamily=this._textFont,yt.style.fontSize="".concat(this._textSize,"px"),yt.innerHTML="ABCjgq|",(bt=document.createElement("div")).style.display="inline-block",bt.style.width="1px",bt.style.height="0px",wt=((gt=document.createElement("div")).appendChild(yt),gt.appendChild(bt),gt.style.height="0px",gt.style.overflow="hidden",document.body.appendChild(gt),bt.style.verticalAlign="baseline",me(bt)),St=me(yt),mt=wt[1]-St[1],wt=(bt.style.verticalAlign="bottom",me(bt)),St=me(yt),bt=wt[1]-St[1]-mt,document.body.removeChild(gt),this._setProperty("_textAscent",mt),this._setProperty("_textDescent",bt)),this}}])&&Be(nt.prototype,Le),ft}(p.default.Element);function me(Le){var nt=0,tt=0;if(Le.offsetParent)for(;nt+=Le.offsetLeft,tt+=Le.offsetTop,Le=Le.offsetParent;);else nt+=Le.offsetLeft,tt+=Le.offsetTop;return[nt,tt]}Ye.prototype.textSize=function(Le){return typeof Le=="number"?(this._setProperty("_textSize",Le),this._leadingSet||this._setProperty("_textLeading",Le*d._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},p.default.Renderer=Ye,t=p.default.Renderer,u.default=t},{"../core/constants":272,"./main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],287:[function(Le,l,u){function s(nt){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(tt){return typeof tt}:function(tt){return tt&&typeof Symbol=="function"&&tt.constructor===Symbol&&tt!==Symbol.prototype?"symbol":typeof tt})(nt)}function p(nt){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(tt){return s(tt)}:function(tt){return tt&&typeof Symbol=="function"&&tt.constructor===Symbol&&tt!==Symbol.prototype?"symbol":s(tt)})(nt)}Le("core-js/modules/es.symbol"),Le("core-js/modules/es.symbol.description"),Le("core-js/modules/es.symbol.iterator"),Le("core-js/modules/es.array.concat"),Le("core-js/modules/es.array.fill"),Le("core-js/modules/es.array.iterator"),Le("core-js/modules/es.array.join"),Le("core-js/modules/es.array.slice"),Le("core-js/modules/es.function.name"),Le("core-js/modules/es.object.get-own-property-descriptor"),Le("core-js/modules/es.object.get-prototype-of"),Le("core-js/modules/es.object.to-string"),Le("core-js/modules/es.reflect.construct"),Le("core-js/modules/es.reflect.get"),Le("core-js/modules/es.regexp.exec"),Le("core-js/modules/es.regexp.to-string"),Le("core-js/modules/es.string.iterator"),Le("core-js/modules/es.weak-map"),Le("core-js/modules/web.dom-collections.iterator"),Le("core-js/modules/es.array.concat"),Le("core-js/modules/es.array.fill"),Le("core-js/modules/es.array.join"),Le("core-js/modules/es.array.slice"),Le("core-js/modules/es.function.name"),Le("core-js/modules/es.object.get-prototype-of"),Le("core-js/modules/es.object.to-string"),Le("core-js/modules/es.regexp.exec"),Le("core-js/modules/es.regexp.to-string"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=(me=Le("./main"))&&me.__esModule?me:{default:me},h=function(nt){if(nt&&nt.__esModule)return nt;if(nt===null||p(nt)!=="object"&&typeof nt!="function")return{default:nt};var tt=N();if(tt&&tt.has(nt))return tt.get(nt);var ft,yt={},gt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(ft in nt){var mt;Object.prototype.hasOwnProperty.call(nt,ft)&&((mt=gt?Object.getOwnPropertyDescriptor(nt,ft):null)&&(mt.get||mt.set)?Object.defineProperty(yt,ft,mt):yt[ft]=nt[ft])}return yt.default=nt,tt&&tt.set(nt,yt),yt}(Le("./constants"));function N(){var nt;return typeof WeakMap!="function"?null:(nt=new WeakMap,N=function(){return nt},nt)}function Be(nt,tt){for(var ft=0;ft<tt.length;ft++){var yt=tt[ft];yt.enumerable=yt.enumerable||!1,yt.configurable=!0,"value"in yt&&(yt.writable=!0),Object.defineProperty(nt,yt.key,yt)}}function b(nt,tt,ft){return(b=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(wt,gt,mt){var wt=function(St,bt){for(;!Object.prototype.hasOwnProperty.call(St,bt)&&(St=pe(St))!==null;);return St}(wt,gt);if(wt)return(wt=Object.getOwnPropertyDescriptor(wt,gt)).get?wt.get.call(mt):wt.value})(nt,tt,ft||nt)}function E(nt,tt){return(E=Object.setPrototypeOf||function(ft,yt){return ft.__proto__=yt,ft})(nt,tt)}function de(nt){return function(){var tt,ft=pe(nt),ft=(tt=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(tt=pe(this).constructor,Reflect.construct(ft,arguments,tt)):ft.apply(this,arguments),this);if(!tt||p(tt)!=="object"&&typeof tt!="function"){if(ft!==void 0)return ft;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return tt}}function pe(nt){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(tt){return tt.__proto__||Object.getPrototypeOf(tt)})(nt)}Le("./p5.Renderer");var Ye="rgba(0,0,0,0)",me=function(nt){var tt=yt;if(typeof nt!="function"&&nt!==null)throw new TypeError("Super expression must either be null or a function");tt.prototype=Object.create(nt&&nt.prototype,{constructor:{value:tt,writable:!0,configurable:!0}}),nt&&E(tt,nt);var ft=de(yt);function yt(gt,mt,wt){if(this instanceof yt)return(gt=ft.call(this,gt,mt,wt)).drawingContext=gt.canvas.getContext("2d"),gt._pInst._setProperty("drawingContext",gt.drawingContext),gt;throw new TypeError("Cannot call a class as a function")}return tt=yt,(nt=[{key:"getFilterGraphicsLayer",value:function(){var gt;return this.filterGraphicsLayer||(gt=(this._pInst instanceof d.default.Graphics?this._pInst:this)._pInst,this.filterGraphicsLayer=new d.default.Graphics(this.width,this.height,h.WEBGL,gt)),this.filterGraphicsLayer.width===this.width&&this.filterGraphicsLayer.height===this.height||this.filterGraphicsLayer.resizeCanvas(this.width,this.height),this.filterGraphicsLayer.pixelDensity()!==this._pInst.pixelDensity()&&this.filterGraphicsLayer.pixelDensity(this._pInst.pixelDensity()),this.filterGraphicsLayer}},{key:"_applyDefaults",value:function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._cachedBlendMode=h.BLEND,this._setFill(h._DEFAULT_FILL),this._setStroke(h._DEFAULT_STROKE),this.drawingContext.lineCap=h.ROUND,this.drawingContext.font="normal 12px sans-serif"}},{key:"resize",value:function(gt,mt){b(pe(yt.prototype),"resize",this).call(this,gt,mt),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)}},{key:"background",value:function(){var gt,mt;this.drawingContext.save(),this.resetMatrix(),(arguments.length<=0?void 0:arguments[0])instanceof d.default.Image?0<=(arguments.length<=1?void 0:arguments[1])?(gt=arguments.length<=0?void 0:arguments[0],this.drawingContext.globalAlpha=(arguments.length<=1?void 0:arguments[1])/255,this._pInst.image(gt,0,0,this.width,this.height)):this._pInst.image(arguments.length<=0?void 0:arguments[0],0,0,this.width,this.height):(gt=this._getFill(),mt=(mt=this._pInst).color.apply(mt,arguments),this._pInst._addAccsOutput()&&this._pInst._accsBackground(mt.levels),mt=mt.toString(),this._setFill(mt),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(gt),this._isErasing&&this._pInst.erase()),this.drawingContext.restore()}},{key:"clear",value:function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore()}},{key:"fill",value:function(){var gt=(gt=this._pInst).color.apply(gt,arguments);this._setFill(gt.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("fill",gt.levels)}},{key:"stroke",value:function(){var gt=(gt=this._pInst).color.apply(gt,arguments);this._setStroke(gt.toString()),this._pInst._addAccsOutput()&&this._pInst._accsCanvasColors("stroke",gt.levels)}},{key:"erase",value:function(gt,mt){this._isErasing||(this._cachedFillStyle=this.drawingContext.fillStyle,gt=this._pInst.color(255,gt).toString(),this.drawingContext.fillStyle=gt,this._cachedStrokeStyle=this.drawingContext.strokeStyle,gt=this._pInst.color(255,mt).toString(),this.drawingContext.strokeStyle=gt,mt=this._cachedBlendMode,this.blendMode(h.REMOVE),this._cachedBlendMode=mt,this._isErasing=!0)}},{key:"noErase",value:function(){this._isErasing&&(this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode),this._isErasing=!1)}},{key:"beginClip",value:function(){var gt=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},gt=(b(pe(yt.prototype),"beginClip",this).call(this,gt),this._cachedFillStyle=this.drawingContext.fillStyle,this._pInst.color(255,0).toString()),gt=(this.drawingContext.fillStyle=gt,this._cachedStrokeStyle=this.drawingContext.strokeStyle,this._pInst.color(255,0).toString()),gt=(this.drawingContext.strokeStyle=gt,this._cachedBlendMode);this.blendMode(h.BLEND),this._cachedBlendMode=gt,this.drawingContext.beginPath(),this._clipInvert&&(this.drawingContext.moveTo(-2*this.width,-2*this.height),this.drawingContext.lineTo(-2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,2*this.height),this.drawingContext.lineTo(2*this.width,-2*this.height),this.drawingContext.closePath())}},{key:"endClip",value:function(){this._doFillStrokeClose(),this.drawingContext.clip(),b(pe(yt.prototype),"endClip",this).call(this),this.drawingContext.fillStyle=this._cachedFillStyle,this.drawingContext.strokeStyle=this._cachedStrokeStyle,this.blendMode(this._cachedBlendMode)}},{key:"image",value:function(gt,mt,wt,St,bt,Ct,Et,It,Dt){gt.gifProperties&&gt._animateGif(this._pInst);try{d.default.MediaElement&&gt instanceof d.default.MediaElement&&gt._ensureCanvas();var Pt=(Pt=this._tint&&gt.canvas?this._getTintedImageCanvas(gt):Pt)||gt.canvas||gt.elt,qt=1;gt.width&&0<gt.width&&(qt=Pt.width/gt.width),this._isErasing&&this.blendMode(this._cachedBlendMode),this.drawingContext.drawImage(Pt,qt*mt,qt*wt,qt*St,qt*bt,Ct,Et,It,Dt),this._isErasing&&this._pInst.erase()}catch(Ht){if(Ht.name!=="NS_ERROR_NOT_AVAILABLE")throw Ht}}},{key:"_getTintedImageCanvas",value:function(gt){if(!gt.canvas)return gt;gt.tintCanvas||(gt.tintCanvas=document.createElement("canvas")),gt.tintCanvas.width!==gt.canvas.width&&(gt.tintCanvas.width=gt.canvas.width),gt.tintCanvas.height!==gt.canvas.height&&(gt.tintCanvas.height=gt.canvas.height);var mt=gt.tintCanvas.getContext("2d");return mt.save(),mt.clearRect(0,0,gt.canvas.width,gt.canvas.height),(this._tint[0]<255||this._tint[1]<255||this._tint[2]<255)&&(mt.drawImage(gt.canvas,0,0),mt.globalCompositeOperation="luminosity",mt.drawImage(gt.canvas,0,0),mt.globalCompositeOperation="color",mt.drawImage(gt.canvas,0,0),mt.globalCompositeOperation="multiply",mt.fillStyle="rgb(".concat(this._tint.slice(0,3).join(", "),")"),mt.fillRect(0,0,gt.canvas.width,gt.canvas.height),mt.globalCompositeOperation="destination-in"),mt.globalAlpha=this._tint[3]/255,mt.drawImage(gt.canvas,0,0),mt.restore(),gt.tintCanvas}},{key:"blendMode",value:function(gt){if(gt===h.SUBTRACT)console.warn("blendMode(SUBTRACT) only works in WEBGL mode.");else{if(gt!==h.BLEND&&gt!==h.REMOVE&&gt!==h.DARKEST&&gt!==h.LIGHTEST&&gt!==h.DIFFERENCE&&gt!==h.MULTIPLY&&gt!==h.EXCLUSION&&gt!==h.SCREEN&&gt!==h.REPLACE&&gt!==h.OVERLAY&&gt!==h.HARD_LIGHT&&gt!==h.SOFT_LIGHT&&gt!==h.DODGE&&gt!==h.BURN&&gt!==h.ADD)throw new Error("Mode ".concat(gt," not recognized."));this._cachedBlendMode=gt,this.drawingContext.globalCompositeOperation=gt}}},{key:"blend",value:function(){for(var gt=this.drawingContext.globalCompositeOperation,mt=arguments.length,wt=new Array(mt),St=0;St<mt;St++)wt[St]=arguments[St];var bt=wt[wt.length-1],Ct=Array.prototype.slice.call(wt,0,wt.length-1);this.drawingContext.globalCompositeOperation=bt,d.default.prototype.copy.apply(this,Ct),this.drawingContext.globalCompositeOperation=gt}},{key:"_getPixel",value:function(gt,mt){return gt=this.drawingContext.getImageData(gt,mt,1,1).data,[gt[0],gt[1],gt[2],gt[3]]}},{key:"loadPixels",value:function(){var gt=this._pixelsState,mt=gt._pixelDensity,wt=this.width*mt,mt=this.height*mt,wt=this.drawingContext.getImageData(0,0,wt,mt);gt._setProperty("imageData",wt),gt._setProperty("pixels",wt.data)}},{key:"set",value:function(gt,mt,wt){gt=Math.floor(gt),mt=Math.floor(mt);var St=this._pixelsState;if(wt instanceof d.default.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(St._pixelDensity,St._pixelDensity),this.drawingContext.clearRect(gt,mt,wt.width,wt.height),this.drawingContext.drawImage(wt.canvas,gt,mt),this.drawingContext.restore();else{var bt=0,Ct=0,Et=0,It=0,Dt=4*(mt*St._pixelDensity*(this.width*St._pixelDensity)+gt*St._pixelDensity);if(St.imageData||St.loadPixels(),typeof wt=="number")Dt<St.pixels.length&&(Et=Ct=bt=wt,It=255);else if(Array.isArray(wt)){if(wt.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");Dt<St.pixels.length&&(bt=wt[0],Ct=wt[1],Et=wt[2],It=wt[3])}else wt instanceof d.default.Color&&Dt<St.pixels.length&&(bt=wt.levels[0],Ct=wt.levels[1],Et=wt.levels[2],It=wt.levels[3]);for(var Pt=0;Pt<St._pixelDensity;Pt++)for(var qt=0;qt<St._pixelDensity;qt++)Dt=4*((mt*St._pixelDensity+qt)*this.width*St._pixelDensity+(gt*St._pixelDensity+Pt)),St.pixels[Dt]=bt,St.pixels[Dt+1]=Ct,St.pixels[Dt+2]=Et,St.pixels[Dt+3]=It}}},{key:"updatePixels",value:function(gt,mt,wt,St){var bt=this._pixelsState,Ct=bt._pixelDensity;gt===void 0&&mt===void 0&&wt===void 0&&St===void 0&&(mt=gt=0,wt=this.width,St=this.height),gt*=Ct,mt*=Ct,wt*=Ct,St*=Ct,this.gifProperties&&(this.gifProperties.frames[this.gifProperties.displayIndex].image=bt.imageData),this.drawingContext.putImageData(bt.imageData,0,0,gt,mt,wt,St)}},{key:"arc",value:function(Dt,Pt,qt,Ht,bt,Ct,Et){var It=this.drawingContext,Dt=Dt+qt/2,Pt=Pt+Ht/2,qt=qt/2,Ht=Ht/2,Gt=!(Et===h.CHORD||Et===h.OPEN||(Ct-bt)%h.TWO_PI==0);return this._doFill&&(this._clipping||It.beginPath(),It.ellipse(Dt,Pt,qt,Ht,0,bt,Ct),Gt&&It.lineTo(Dt,Pt),It.closePath(),this._clipping||It.fill()),this._doStroke&&(this._clipping||It.beginPath(),It.ellipse(Dt,Pt,qt,Ht,0,bt,Ct),Et===h.PIE&&Gt&&It.lineTo(Dt,Pt),Et!==h.PIE&&Et!==h.CHORD||It.closePath(),this._clipping||It.stroke()),this}},{key:"ellipse",value:function(It){var mt=this.drawingContext,wt=this._doFill,St=this._doStroke,bt=parseFloat(It[0]),Ct=parseFloat(It[1]),Et=parseFloat(It[2]),It=parseFloat(It[3]);if(wt&&!St){if(this._getFill()===Ye)return this}else if(!wt&&St&&this._getStroke()===Ye)return this;bt+=Et/2,Ct+=It/2,Et/=2,It/=2,this._clipping||mt.beginPath(),mt.ellipse(bt,Ct,Et,It,0,0,2*Math.PI),mt.closePath(),!this._clipping&&wt&&mt.fill(),!this._clipping&&St&&mt.stroke()}},{key:"line",value:function(gt,mt,wt,St){var bt=this.drawingContext;return this._doStroke&&this._getStroke()!==Ye&&(this._clipping||bt.beginPath(),bt.moveTo(gt,mt),bt.lineTo(wt,St),bt.stroke()),this}},{key:"point",value:function(gt,mt){var wt,St,bt=this.drawingContext;return!this._doStroke||this._getStroke()===Ye?this:(wt=this._getStroke(),St=this._getFill(),this._clipping||this._setFill(wt),this._clipping||bt.beginPath(),bt.arc(gt,mt,bt.lineWidth/2,0,h.TWO_PI,!1),void(this._clipping||(bt.fill(),this._setFill(St))))}},{key:"quad",value:function(gt,mt,wt,St,bt,Ct,Et,It){var Dt=this.drawingContext,Pt=this._doFill,qt=this._doStroke;if(Pt&&!qt){if(this._getFill()===Ye)return this}else if(!Pt&&qt&&this._getStroke()===Ye)return this;return this._clipping||Dt.beginPath(),Dt.moveTo(gt,mt),Dt.lineTo(wt,St),Dt.lineTo(bt,Ct),Dt.lineTo(Et,It),Dt.closePath(),!this._clipping&&Pt&&Dt.fill(),!this._clipping&&qt&&Dt.stroke(),this}},{key:"rect",value:function(qt){var mt,wt,St=qt[0],bt=qt[1],Ct=qt[2],Et=qt[3],It=qt[4],Dt=qt[5],Pt=qt[6],qt=qt[7],Ht=this.drawingContext,Gt=this._doFill,Ut=this._doStroke;if(Gt&&!Ut){if(this._getFill()===Ye)return this}else if(!Gt&&Ut&&this._getStroke()===Ye)return this;return this._clipping||Ht.beginPath(),It===void 0?Ht.rect(St,bt,Ct,Et):(Dt===void 0&&(Dt=It),Pt===void 0&&(Pt=Dt),qt===void 0&&(qt=Pt),Ut=(Gt=Math.abs(Ct))/2,wt=(mt=Math.abs(Et))/2,Ht.roundRect(St,bt,Ct,Et,[It=mt<2*(It=Gt<2*It?Ut:It)?wt:It,Dt=mt<2*(Dt=Gt<2*Dt?Ut:Dt)?wt:Dt,Pt=mt<2*(Pt=Gt<2*Pt?Ut:Pt)?wt:Pt,qt=mt<2*(qt=Gt<2*qt?Ut:qt)?wt:qt])),!this._clipping&&this._doFill&&Ht.fill(),!this._clipping&&this._doStroke&&Ht.stroke(),this}},{key:"triangle",value:function(Pt){var mt=this.drawingContext,wt=this._doFill,St=this._doStroke,bt=Pt[0],Ct=Pt[1],Et=Pt[2],It=Pt[3],Dt=Pt[4],Pt=Pt[5];if(wt&&!St){if(this._getFill()===Ye)return this}else if(!wt&&St&&this._getStroke()===Ye)return this;this._clipping||mt.beginPath(),mt.moveTo(bt,Ct),mt.lineTo(Et,It),mt.lineTo(Dt,Pt),mt.closePath(),!this._clipping&&wt&&mt.fill(),!this._clipping&&St&&mt.stroke()}},{key:"endShape",value:function(gt,mt,wt,St,bt,Ct,Et){if(mt.length!==0&&(this._doStroke||this._doFill)){var It,Dt,Pt,qt=gt===h.CLOSE,Ht=(qt&&!Ct&&mt.push(mt[0]),mt.length);if(wt&&Et===null){if(3<Ht){var Gt=[],Ut=1-this._curveTightness;for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(mt[1][0],mt[1][1]),Dt=1;Dt+2<Ht;Dt++)It=mt[Dt],Gt[0]=[It[0],It[1]],Gt[1]=[It[0]+(Ut*mt[Dt+1][0]-Ut*mt[Dt-1][0])/6,It[1]+(Ut*mt[Dt+1][1]-Ut*mt[Dt-1][1])/6],Gt[2]=[mt[Dt+1][0]+(Ut*mt[Dt][0]-Ut*mt[Dt+2][0])/6,mt[Dt+1][1]+(Ut*mt[Dt][1]-Ut*mt[Dt+2][1])/6],Gt[3]=[mt[Dt+1][0],mt[Dt+1][1]],this.drawingContext.bezierCurveTo(Gt[1][0],Gt[1][1],Gt[2][0],Gt[2][1],Gt[3][0],Gt[3][1]);qt&&this.drawingContext.lineTo(mt[Dt+1][0],mt[Dt+1][1]),this._doFillStrokeClose(qt)}}else if(St&&Et===null){for(this._clipping||this.drawingContext.beginPath(),Dt=0;Dt<Ht;Dt++)mt[Dt].isVert?mt[Dt].moveTo?this.drawingContext.moveTo(mt[Dt][0],mt[Dt][1]):this.drawingContext.lineTo(mt[Dt][0],mt[Dt][1]):this.drawingContext.bezierCurveTo(mt[Dt][0],mt[Dt][1],mt[Dt][2],mt[Dt][3],mt[Dt][4],mt[Dt][5]);this._doFillStrokeClose(qt)}else if(bt&&Et===null){for(this._clipping||this.drawingContext.beginPath(),Dt=0;Dt<Ht;Dt++)mt[Dt].isVert?mt[Dt].moveTo?this.drawingContext.moveTo(mt[Dt][0],mt[Dt][1]):this.drawingContext.lineTo(mt[Dt][0],mt[Dt][1]):this.drawingContext.quadraticCurveTo(mt[Dt][0],mt[Dt][1],mt[Dt][2],mt[Dt][3]);this._doFillStrokeClose(qt)}else if(Et===h.POINTS)for(Dt=0;Dt<Ht;Dt++)It=mt[Dt],this._doStroke&&this._pInst.stroke(It[6]),this._pInst.point(It[0],It[1]);else if(Et===h.LINES)for(Dt=0;Dt+1<Ht;Dt+=2)It=mt[Dt],this._doStroke&&this._pInst.stroke(mt[Dt+1][6]),this._pInst.line(It[0],It[1],mt[Dt+1][0],mt[Dt+1][1]);else if(Et===h.TRIANGLES)for(Dt=0;Dt+2<Ht;Dt+=3)It=mt[Dt],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(It[0],It[1]),this.drawingContext.lineTo(mt[Dt+1][0],mt[Dt+1][1]),this.drawingContext.lineTo(mt[Dt+2][0],mt[Dt+2][1]),this.drawingContext.closePath(),!this._clipping&&this._doFill&&(this._pInst.fill(mt[Dt+2][5]),this.drawingContext.fill()),!this._clipping&&this._doStroke&&(this._pInst.stroke(mt[Dt+2][6]),this.drawingContext.stroke());else if(Et===h.TRIANGLE_STRIP)for(Dt=0;Dt+1<Ht;Dt++)It=mt[Dt],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(mt[Dt+1][0],mt[Dt+1][1]),this.drawingContext.lineTo(It[0],It[1]),!this._clipping&&this._doStroke&&this._pInst.stroke(mt[Dt+1][6]),!this._clipping&&this._doFill&&this._pInst.fill(mt[Dt+1][5]),Dt+2<Ht&&(this.drawingContext.lineTo(mt[Dt+2][0],mt[Dt+2][1]),!this._clipping&&this._doStroke&&this._pInst.stroke(mt[Dt+2][6]),!this._clipping&&this._doFill&&this._pInst.fill(mt[Dt+2][5])),this._doFillStrokeClose(qt);else if(Et===h.TRIANGLE_FAN){if(2<Ht){for(this._clipping||this.drawingContext.beginPath(),Dt=2;Dt<Ht;Dt++)It=mt[Dt],this.drawingContext.moveTo(mt[0][0],mt[0][1]),this.drawingContext.lineTo(mt[Dt-1][0],mt[Dt-1][1]),this.drawingContext.lineTo(It[0],It[1]),this.drawingContext.lineTo(mt[0][0],mt[0][1]),Dt<Ht-1&&(this._doFill&&It[5]!==mt[Dt+1][5]||this._doStroke&&It[6]!==mt[Dt+1][6])&&(!this._clipping&&this._doFill&&(this._pInst.fill(It[5]),this.drawingContext.fill(),this._pInst.fill(mt[Dt+1][5])),!this._clipping&&this._doStroke&&(this._pInst.stroke(It[6]),this.drawingContext.stroke(),this._pInst.stroke(mt[Dt+1][6])),this.drawingContext.closePath(),this._clipping||this.drawingContext.beginPath());this._doFillStrokeClose(qt)}}else if(Et===h.QUADS)for(Dt=0;Dt+3<Ht;Dt+=4){for(It=mt[Dt],this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(It[0],It[1]),Pt=1;Pt<4;Pt++)this.drawingContext.lineTo(mt[Dt+Pt][0],mt[Dt+Pt][1]);this.drawingContext.lineTo(It[0],It[1]),!this._clipping&&this._doFill&&this._pInst.fill(mt[Dt+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(mt[Dt+3][6]),this._doFillStrokeClose(qt)}else if(Et===h.QUAD_STRIP){if(3<Ht)for(Dt=0;Dt+1<Ht;Dt+=2)It=mt[Dt],this._clipping||this.drawingContext.beginPath(),Dt+3<Ht?(this.drawingContext.moveTo(mt[Dt+2][0],mt[Dt+2][1]),this.drawingContext.lineTo(It[0],It[1]),this.drawingContext.lineTo(mt[Dt+1][0],mt[Dt+1][1]),this.drawingContext.lineTo(mt[Dt+3][0],mt[Dt+3][1]),!this._clipping&&this._doFill&&this._pInst.fill(mt[Dt+3][5]),!this._clipping&&this._doStroke&&this._pInst.stroke(mt[Dt+3][6])):(this.drawingContext.moveTo(It[0],It[1]),this.drawingContext.lineTo(mt[Dt+1][0],mt[Dt+1][1])),this._doFillStrokeClose(qt)}else{for(this._clipping||this.drawingContext.beginPath(),this.drawingContext.moveTo(mt[0][0],mt[0][1]),Dt=1;Dt<Ht;Dt++)(It=mt[Dt]).isVert&&(It.moveTo?(qt&&this.drawingContext.closePath(),this.drawingContext.moveTo(It[0],It[1])):this.drawingContext.lineTo(It[0],It[1]));this._doFillStrokeClose(qt),this.drawingContext.closePath()}Ct=bt=St=wt=!1,qt&&mt.pop()}return this}},{key:"strokeCap",value:function(gt){return gt!==h.ROUND&&gt!==h.SQUARE&&gt!==h.PROJECT||(this.drawingContext.lineCap=gt),this}},{key:"strokeJoin",value:function(gt){return gt!==h.ROUND&&gt!==h.BEVEL&&gt!==h.MITER||(this.drawingContext.lineJoin=gt),this}},{key:"strokeWeight",value:function(gt){return this.drawingContext.lineWidth=gt===void 0||gt===0?1e-4:gt,this}},{key:"_getFill",value:function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle}},{key:"_setFill",value:function(gt){gt!==this._cachedFillStyle&&(this.drawingContext.fillStyle=gt,this._cachedFillStyle=gt)}},{key:"_getStroke",value:function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle}},{key:"_setStroke",value:function(gt){gt!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=gt,this._cachedStrokeStyle=gt)}},{key:"bezier",value:function(gt,mt,wt,St,bt,Ct,Et,It){return this._pInst.beginShape(),this._pInst.vertex(gt,mt),this._pInst.bezierVertex(wt,St,bt,Ct,Et,It),this._pInst.endShape(),this}},{key:"curve",value:function(gt,mt,wt,St,bt,Ct,Et,It){return this._pInst.beginShape(),this._pInst.curveVertex(gt,mt),this._pInst.curveVertex(wt,St),this._pInst.curveVertex(bt,Ct),this._pInst.curveVertex(Et,It),this._pInst.endShape(),this}},{key:"_doFillStrokeClose",value:function(gt){gt&&this.drawingContext.closePath(),!this._clipping&&this._doFill&&this.drawingContext.fill(),!this._clipping&&this._doStroke&&this.drawingContext.stroke()}},{key:"applyMatrix",value:function(gt,mt,wt,St,bt,Ct){this.drawingContext.transform(gt,mt,wt,St,bt,Ct)}},{key:"resetMatrix",value:function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this}},{key:"rotate",value:function(gt){this.drawingContext.rotate(gt)}},{key:"scale",value:function(gt,mt){return this.drawingContext.scale(gt,mt),this}},{key:"translate",value:function(gt,mt){return gt instanceof d.default.Vector&&(mt=gt.y,gt=gt.x),this.drawingContext.translate(gt,mt),this}},{key:"_renderText",value:function(gt,mt,wt,St,bt,Ct){if(!(St<Ct||bt<=St))return gt.push(),this._isOpenType()?this._textFont._renderPath(mt,wt,St,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(mt,wt,St),!this._clipping&&this._doFill&&(this._fillSet||this._setFill(h._DEFAULT_TEXT_FILL),this.drawingContext.fillText(mt,wt,St))),gt.pop(),gt}},{key:"textWidth",value:function(gt){return this._isOpenType()?this._textFont._textWidth(gt,this._textSize):this.drawingContext.measureText(gt).width}},{key:"_applyTextProperties",value:function(){var gt=this._pInst,mt=(this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),mt=this._textFont,this._isOpenType()&&(mt=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),mt||"sans-serif");return/\s/.exec(mt)&&(mt='"'.concat(mt,'"')),this.drawingContext.font="".concat(this._textStyle||"normal"," ").concat(this._textSize||12,"px ").concat(mt),this.drawingContext.textAlign=this._textAlign,this._textBaseline===h.CENTER?this.drawingContext.textBaseline=h._CTX_MIDDLE:this.drawingContext.textBaseline=this._textBaseline,gt}},{key:"push",value:function(){return this.drawingContext.save(),b(pe(yt.prototype),"push",this).call(this)}},{key:"pop",value:function(gt){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,b(pe(yt.prototype),"pop",this).call(this,gt)}}])&&Be(tt.prototype,nt),yt}(d.default.Renderer),Le=(me.prototype.text=function(nt,tt,ft,wt,gt){wt!==void 0&&this.drawingContext.textBaseline===h.BASELINE&&(mt=!0,this.drawingContext.textBaseline=h.TOP);var mt,wt=d.default.Renderer.prototype.text.apply(this,arguments);return mt&&(this.drawingContext.textBaseline=h.BASELINE),wt},d.default.Renderer2D=me,d.default.Renderer2D);u.default=Le},{"./constants":272,"./main":283,"./p5.Renderer":286,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.function.name":174,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],288:[function(t,l,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator");var s=(t=t("./main"))&&t.__esModule?t:{default:t};s.default.prototype._promisePreloads=[];function p(){return{}}var d=!(s.default.prototype.registerPromisePreload=function(h){s.default.prototype._promisePreloads.push(h)});s.default.prototype._setupPromisePreloads=function(){var h=!0,N=!1,Be=void 0;try{for(var b,E=this._promisePreloads[Symbol.iterator]();!(h=(b=E.next()).done);h=!0){var de=b.value,pe=this,Ye=de.method,me=de.addCallbacks,Le=de.legacyPreloadSetup,nt=de.target||this,tt=nt[Ye].bind(nt);if(nt===s.default.prototype){if(d)continue;pe=null,tt=nt[Ye]}nt[Ye]=this._wrapPromisePreload(pe,tt,me),Le&&(nt[Le.method]=this._legacyPreloadGenerator(pe,Le,nt[Ye]))}}catch(ft){N=!0,Be=ft}finally{try{h||E.return==null||E.return()}finally{if(N)throw Be}}d=!0},s.default.prototype._wrapPromisePreload=function(h,N,Be){var b=function(){for(var E=this,de=(this._incrementPreload(),null),pe=null,Ye=arguments.length,me=new Array(Ye),Le=0;Le<Ye;Le++)me[Le]=arguments[Le];if(Be)for(var nt=me.length-1;0<=nt&&!pe&&typeof me[nt]=="function";nt--)pe=de,de=me.pop();var tt=Promise.resolve(N.apply(this,me));return de&&tt.then(de),pe&&tt.catch(pe),tt.then(function(){return E._decrementPreload()}),tt};return b=h?b.bind(h):b},s.default.prototype._legacyPreloadGenerator=function(h,E,Be){var b=E.createBaseObject||p,E=function(){var de=this;this._incrementPreload();for(var pe=arguments.length,Ye=new Array(pe),me=0;me<pe;me++)Ye[me]=arguments[me];var Le=b.apply(this,Ye);return Be.apply(this,Ye).then(function(nt){Object.assign(Le,nt),de._decrementPreload()}),Le};return E=h?E.bind(h):E}},{"./main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],289:[function(t,l,u){function s(E){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(de){return typeof de}:function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de})(E)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var p=(b=t("./main"))&&b.__esModule?b:{default:b},d=function(E){if(E&&E.__esModule)return E;if(E===null||N(E)!=="object"&&typeof E!="function")return{default:E};var de=h();if(de&&de.has(E))return de.get(E);var pe,Ye={},me=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(pe in E){var Le;Object.prototype.hasOwnProperty.call(E,pe)&&((Le=me?Object.getOwnPropertyDescriptor(E,pe):null)&&(Le.get||Le.set)?Object.defineProperty(Ye,pe,Le):Ye[pe]=E[pe])}return Ye.default=E,de&&de.set(E,Ye),Ye}(t("./constants"));function h(){var E;return typeof WeakMap!="function"?null:(E=new WeakMap,h=function(){return E},E)}function N(E){return(N=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(de){return s(de)}:function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":s(de)})(E)}t("./p5.Graphics"),t("./p5.Renderer2D"),t("../webgl/p5.RendererGL");var Be="defaultCanvas0",b=(p.default.prototype.createCanvas=function(E,de,pe,Ye){var me,Le,nt;if(p.default._validateParameters("createCanvas",arguments),arguments[2]instanceof HTMLCanvasElement?(pe=d.P2D,Ye=arguments[2]):me=pe||d.P2D,Ye)(nt=document.getElementById(Be))&&nt.parentNode.removeChild(nt),nt=Ye,this._defaultGraphicsCreated=!1;else{if(me===d.WEBGL)(nt=document.getElementById(Be))&&(nt.parentNode.removeChild(nt),Le=this._renderer,this._elements=this._elements.filter(function(ft){return ft!==Le})),(nt=document.createElement("canvas")).id=Be,nt.classList.add("p5Canvas");else if(this._defaultGraphicsCreated)nt=this.canvas;else{nt=Ye||document.createElement("canvas");for(var tt=0;document.getElementById("defaultCanvas".concat(tt));)tt++;Be="defaultCanvas".concat(tt),nt.id=Be,nt.classList.add("p5Canvas")}this._setupDone||(nt.dataset.hidden=!0,nt.style.visibility="hidden"),(this._userNode||(document.getElementsByTagName("main").length===0&&(pe=document.createElement("main"),document.body.appendChild(pe)),document.getElementsByTagName("main")[0])).appendChild(nt)}return me===d.WEBGL?(this._setProperty("_renderer",new p.default.RendererGL(nt,this,!0)),this._elements.push(this._renderer),E=(Ye=this._renderer._adjustDimensions(E,de)).adjustedWidth,de=Ye.adjustedHeight):this._defaultGraphicsCreated||(this._setProperty("_renderer",new p.default.Renderer2D(nt,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(E,de),this._renderer._applyDefaults(),this._renderer},p.default.prototype.resizeCanvas=function(E,de,pe){if(p.default._validateParameters("resizeCanvas",arguments),this._renderer){var Ye,me,Le,nt={};for(Ye in this.drawingContext){var tt=this.drawingContext[Ye];N(tt)!=="object"&&typeof tt!="function"&&(nt[Ye]=tt)}for(Le in this._renderer instanceof p.default.RendererGL&&(E=(me=this._renderer._adjustDimensions(E,de)).adjustedWidth,de=me.adjustedHeight),this.width=E,this.height=de,this._renderer.resize(E,de),nt)try{this.drawingContext[Le]=nt[Le]}catch{}pe||this.redraw()}this._addAccsOutput()&&this._updateAccsOutput()},p.default.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},p.default.prototype.createGraphics=function(E,de){for(var pe=arguments.length,Ye=new Array(2<pe?pe-2:0),me=2;me<pe;me++)Ye[me-2]=arguments[me];return Ye[0]instanceof HTMLCanvasElement&&(Ye[1]=Ye[0],Ye[0]=d.P2D),p.default._validateParameters("createGraphics",arguments),new p.default.Graphics(E,de,Ye[0],this,Ye[1])},p.default.prototype.createFramebuffer=function(E){return new p.default.Framebuffer(this,E)},p.default.prototype.clearDepth=function(E){this._assert3d("clearDepth"),this._renderer.clearDepth(E)},p.default.prototype.blendMode=function(E){p.default._validateParameters("blendMode",arguments),E===d.NORMAL&&(console.warn("NORMAL has been deprecated for use in blendMode. defaulting to BLEND instead."),E=d.BLEND),this._renderer.blendMode(E)},p.default);u.default=b},{"../webgl/p5.RendererGL":341,"./constants":272,"./main":283,"./p5.Graphics":285,"./p5.Renderer2D":287,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],290:[function(t,l,u){function s(de){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pe){return typeof pe}:function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe})(de)}function p(de){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(pe){return s(pe)}:function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":s(pe)})(de)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.slice"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=b(t("../main")),h=function(de){if(de&&de.__esModule)return de;if(de===null||p(de)!=="object"&&typeof de!="function")return{default:de};var pe=Be();if(pe&&pe.has(de))return pe.get(de);var Ye,me={},Le=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(Ye in de){var nt;Object.prototype.hasOwnProperty.call(de,Ye)&&((nt=Le?Object.getOwnPropertyDescriptor(de,Ye):null)&&(nt.get||nt.set)?Object.defineProperty(me,Ye,nt):me[Ye]=de[Ye])}return me.default=de,pe&&pe.set(de,me),me}(t("../constants")),N=b(t("../helpers"));function Be(){var de;return typeof WeakMap!="function"?null:(de=new WeakMap,Be=function(){return de},de)}function b(de){return de&&de.__esModule?de:{default:de}}function E(de){return function(pe){if(Array.isArray(pe)){for(var Ye=0,me=new Array(pe.length);Ye<pe.length;Ye++)me[Ye]=pe[Ye];return me}}(de)||function(pe){if(Symbol.iterator in Object(pe)||Object.prototype.toString.call(pe)==="[object Arguments]")return Array.from(pe)}(de)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),d.default.prototype._normalizeArcAngles=function(de,pe,Ye,me,Le){var nt;return de-=h.TWO_PI*Math.floor(de/h.TWO_PI),pe-=h.TWO_PI*Math.floor(pe/h.TWO_PI),nt=Math.min(Math.abs(de-pe),h.TWO_PI-Math.abs(de-pe)),Le&&(de=de<=h.HALF_PI?Math.atan(Ye/me*Math.tan(de)):de>h.HALF_PI&&de<=3*h.HALF_PI?Math.atan(Ye/me*Math.tan(de))+h.PI:Math.atan(Ye/me*Math.tan(de))+h.TWO_PI,pe=pe<=h.HALF_PI?Math.atan(Ye/me*Math.tan(pe)):pe>h.HALF_PI&&pe<=3*h.HALF_PI?Math.atan(Ye/me*Math.tan(pe))+h.PI:Math.atan(Ye/me*Math.tan(pe))+h.TWO_PI),pe<de&&(pe+=h.TWO_PI),{start:de,stop:pe,correspondToSamePoint:nt<1e-5}},d.default.prototype.arc=function(de,pe,Ye,me,Le,nt,tt,ft){return d.default._validateParameters("arc",arguments),(this._renderer._doStroke||this._renderer._doFill)&&Le!==nt&&(Le=this._toRadians(Le),nt=this._toRadians(nt),de=N.default.modeAdjust(de,pe,Ye,me,this._renderer._ellipseMode),(pe=this._normalizeArcAngles(Le,nt,de.w,de.h,!0)).correspondToSamePoint?this._renderer.ellipse([de.x,de.y,de.w,de.h,ft]):(this._renderer.arc(de.x,de.y,de.w,de.h,pe.start,pe.stop,tt,ft),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("arc",[de.x,de.y,de.w,de.h,pe.start,pe.stop,tt]))),this},d.default.prototype.ellipse=function(de,pe,Ye,me,Le){return d.default._validateParameters("ellipse",arguments),this._renderEllipse.apply(this,arguments)},d.default.prototype.circle=function(){for(var de=arguments.length,pe=new Array(de),Ye=0;Ye<de;Ye++)pe[Ye]=arguments[Ye];d.default._validateParameters("circle",pe);var me=pe.slice(0,2);return me.push(pe[2],pe[2]),this._renderEllipse.apply(this,E(me))},d.default.prototype._renderEllipse=function(de,pe,Ye,me,Le){return(this._renderer._doStroke||this._renderer._doFill)&&(de=N.default.modeAdjust(de,pe,Ye,me=me===void 0?Ye:me,this._renderer._ellipseMode),this._renderer.ellipse([de.x,de.y,de.w,de.h,Le]),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("ellipse",[de.x,de.y,de.w,de.h])),this},d.default.prototype.line=function(){for(var de,pe=arguments.length,Ye=new Array(pe),me=0;me<pe;me++)Ye[me]=arguments[me];return d.default._validateParameters("line",Ye),this._renderer._doStroke&&(de=this._renderer).line.apply(de,Ye),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("line",Ye),this},d.default.prototype.point=function(){for(var de,pe=arguments.length,Ye=new Array(pe),me=0;me<pe;me++)Ye[me]=arguments[me];return d.default._validateParameters("point",Ye),this._renderer._doStroke&&(Ye.length===1&&Ye[0]instanceof d.default.Vector?this._renderer.point.call(this._renderer,Ye[0].x,Ye[0].y,Ye[0].z):((de=this._renderer).point.apply(de,Ye),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("point",Ye))),this},d.default.prototype.quad=function(){for(var de,pe=arguments.length,Ye=new Array(pe),me=0;me<pe;me++)Ye[me]=arguments[me];return d.default._validateParameters("quad",Ye),(this._renderer._doStroke||this._renderer._doFill)&&(this._renderer.isP3D&&Ye.length<12?this._renderer.quad.call(this._renderer,Ye[0],Ye[1],0,Ye[2],Ye[3],0,Ye[4],Ye[5],0,Ye[6],Ye[7],0,Ye[8],Ye[9]):((de=this._renderer).quad.apply(de,Ye),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("quadrilateral",Ye))),this},d.default.prototype.rect=function(){for(var de=arguments.length,pe=new Array(de),Ye=0;Ye<de;Ye++)pe[Ye]=arguments[Ye];return d.default._validateParameters("rect",pe),this._renderRect.apply(this,pe)},d.default.prototype.square=function(de,pe,Ye,me,Le,nt,tt){return d.default._validateParameters("square",arguments),this._renderRect.call(this,de,pe,Ye,Ye,me,Le,nt,tt)},d.default.prototype._renderRect=function(){if(this._renderer._doStroke||this._renderer._doFill){arguments.length===3&&(arguments[3]=arguments[2]);for(var de=N.default.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),pe=(this._renderer._rectMode===h.CORNER&&(de.w=arguments[2],de.h=arguments[3]),[de.x,de.y,de.w,de.h]),Ye=4;Ye<arguments.length;Ye++)pe[Ye]=arguments[Ye];this._renderer.rect(pe),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("rectangle",[de.x,de.y,de.w,de.h])}return this},d.default.prototype.triangle=function(){for(var de=arguments.length,pe=new Array(de),Ye=0;Ye<de;Ye++)pe[Ye]=arguments[Ye];return d.default._validateParameters("triangle",pe),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(pe),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._accsOutput("triangle",pe),this},t=d.default,u.default=t},{"../constants":272,"../friendly_errors/fes_core":274,"../friendly_errors/file_errors":275,"../friendly_errors/validate_params":278,"../helpers":279,"../main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],291:[function(t,l,u){function s(b){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(b)}function p(b){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(E){return s(E)}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":s(E)})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=(Be=t("../main"))&&Be.__esModule?Be:{default:Be},h=function(b){if(b&&b.__esModule)return b;if(b===null||p(b)!=="object"&&typeof b!="function")return{default:b};var E=N();if(E&&E.has(b))return E.get(b);var de,pe={},Ye=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(de in b){var me;Object.prototype.hasOwnProperty.call(b,de)&&((me=Ye?Object.getOwnPropertyDescriptor(b,de):null)&&(me.get||me.set)?Object.defineProperty(pe,de,me):pe[de]=b[de])}return pe.default=b,E&&E.set(b,pe),pe}(t("../constants"));function N(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,N=function(){return b},b)}d.default.prototype.ellipseMode=function(b){return d.default._validateParameters("ellipseMode",arguments),b!==h.CORNER&&b!==h.CORNERS&&b!==h.RADIUS&&b!==h.CENTER||(this._renderer._ellipseMode=b),this},d.default.prototype.noSmooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!1):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},d.default.prototype.rectMode=function(b){return d.default._validateParameters("rectMode",arguments),b!==h.CORNER&&b!==h.CORNERS&&b!==h.RADIUS&&b!==h.CENTER||(this._renderer._rectMode=b),this},d.default.prototype.smooth=function(){return this._renderer.isP3D?this.setAttributes("antialias",!0):"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},d.default.prototype.strokeCap=function(b){return d.default._validateParameters("strokeCap",arguments),b!==h.ROUND&&b!==h.SQUARE&&b!==h.PROJECT||this._renderer.strokeCap(b),this},d.default.prototype.strokeJoin=function(b){return d.default._validateParameters("strokeJoin",arguments),b!==h.ROUND&&b!==h.BEVEL&&b!==h.MITER||this._renderer.strokeJoin(b),this},d.default.prototype.strokeWeight=function(b){return d.default._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(b),this};var Be=d.default;u.default=Be},{"../constants":272,"../main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],292:[function(t,l,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(p=t("../main"))&&p.__esModule?p:{default:p};t("../friendly_errors/fes_core"),t("../friendly_errors/file_errors"),t("../friendly_errors/validate_params"),s.default.prototype.bezier=function(){for(var d,h=arguments.length,N=new Array(h),Be=0;Be<h;Be++)N[Be]=arguments[Be];return s.default._validateParameters("bezier",N),(this._renderer._doStroke||this._renderer._doFill)&&(d=this._renderer).bezier.apply(d,N),this},s.default.prototype.bezierDetail=function(d){return s.default._validateParameters("bezierDetail",arguments),this._bezierDetail=d,this},s.default.prototype.bezierPoint=function(d,h,N,Be,b){s.default._validateParameters("bezierPoint",arguments);var E=1-b;return Math.pow(E,3)*d+3*Math.pow(E,2)*b*h+3*E*Math.pow(b,2)*N+Math.pow(b,3)*Be},s.default.prototype.bezierTangent=function(d,h,N,Be,b){s.default._validateParameters("bezierTangent",arguments);var E=1-b;return 3*Be*Math.pow(b,2)-3*N*Math.pow(b,2)+6*N*E*b-6*h*E*b+3*h*Math.pow(E,2)-3*d*Math.pow(E,2)},s.default.prototype.curve=function(){for(var d,h=arguments.length,N=new Array(h),Be=0;Be<h;Be++)N[Be]=arguments[Be];return s.default._validateParameters("curve",N),this._renderer._doStroke&&(d=this._renderer).curve.apply(d,N),this},s.default.prototype.curveDetail=function(d){return s.default._validateParameters("curveDetail",arguments),this._curveDetail=d<3?3:d,this},s.default.prototype.curveTightness=function(d){return s.default._validateParameters("curveTightness",arguments),this._renderer._curveTightness=d,this},s.default.prototype.curvePoint=function(d,h,N,Be,b){s.default._validateParameters("curvePoint",arguments);var E=this._renderer._curveTightness,de=b*b*b,pe=b*b;return d*((E-1)/2*de+(1-E)*pe+(E-1)/2*b)+h*((E+3)/2*de+(-5-E)/2*pe+1)+N*((-3-E)/2*de+(E+2)*pe+(1-E)/2*b)+Be*((1-E)/2*de+(E-1)/2*pe)},s.default.prototype.curveTangent=function(d,h,N,Be,pe){s.default._validateParameters("curveTangent",arguments);var E=this._renderer._curveTightness,de=pe*pe*3,pe=2*pe;return d*((E-1)/2*de+(1-E)*pe+(E-1)/2)+h*((E+3)/2*de+(-5-E)/2*pe)+N*((-3-E)/2*de+(E+2)*pe+(1-E)/2)+Be*((1-E)/2*de+(E-1)/2*pe)};var p=s.default;u.default=p},{"../friendly_errors/fes_core":274,"../friendly_errors/file_errors":275,"../friendly_errors/validate_params":278,"../main":283}],293:[function(t,l,u){function s(tt){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ft){return typeof ft}:function(ft){return ft&&typeof Symbol=="function"&&ft.constructor===Symbol&&ft!==Symbol.prototype?"symbol":typeof ft})(tt)}function p(tt){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(ft){return s(ft)}:function(ft){return ft&&typeof Symbol=="function"&&ft.constructor===Symbol&&ft!==Symbol.prototype?"symbol":s(ft)})(tt)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.slice"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=(nt=t("../main"))&&nt.__esModule?nt:{default:nt},h=function(tt){if(tt&&tt.__esModule)return tt;if(tt===null||p(tt)!=="object"&&typeof tt!="function")return{default:tt};var ft=N();if(ft&&ft.has(tt))return ft.get(tt);var yt,gt={},mt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(yt in tt){var wt;Object.prototype.hasOwnProperty.call(tt,yt)&&((wt=mt?Object.getOwnPropertyDescriptor(tt,yt):null)&&(wt.get||wt.set)?Object.defineProperty(gt,yt,wt):gt[yt]=tt[yt])}return gt.default=tt,ft&&ft.set(tt,gt),gt}(t("../constants"));function N(){var tt;return typeof WeakMap!="function"?null:(tt=new WeakMap,N=function(){return tt},tt)}var Be=null,b=[],E=[],de=!1,pe=!1,Ye=!1,me=!1,Le=!0,nt=(d.default.prototype.beginContour=function(){return this._renderer.isP3D?this._renderer.beginContour():(E=[],me=!0),this},d.default.prototype.beginShape=function(tt){var ft;return d.default._validateParameters("beginShape",arguments),this._renderer.isP3D?(ft=this._renderer).beginShape.apply(ft,arguments):(Be=tt===h.POINTS||tt===h.LINES||tt===h.TRIANGLES||tt===h.TRIANGLE_FAN||tt===h.TRIANGLE_STRIP||tt===h.QUADS||tt===h.QUAD_STRIP?tt:null,b=[],E=[]),this},d.default.prototype.bezierVertex=function(){for(var tt,ft=arguments.length,yt=new Array(ft),gt=0;gt<ft;gt++)yt[gt]=arguments[gt];if(d.default._validateParameters("bezierVertex",yt),this._renderer.isP3D)(tt=this._renderer).bezierVertex.apply(tt,yt);else if(b.length===0)d.default._friendlyError("vertex() must be used once before calling bezierVertex()","bezierVertex");else{de=!0;for(var mt=[],wt=0;wt<yt.length;wt++)mt[wt]=yt[wt];mt.isVert=!1,(me?E:b).push(mt)}return this},d.default.prototype.curveVertex=function(){for(var tt,ft=arguments.length,yt=new Array(ft),gt=0;gt<ft;gt++)yt[gt]=arguments[gt];return d.default._validateParameters("curveVertex",yt),this._renderer.isP3D?(tt=this._renderer).curveVertex.apply(tt,yt):(pe=!0,this.vertex(yt[0],yt[1])),this},d.default.prototype.endContour=function(){if(!this._renderer.isP3D){var tt=E[0].slice();tt.isVert=E[0].isVert,tt.moveTo=!1,E.push(tt),Le&&(b.push(b[0]),Le=!1);for(var ft=0;ft<E.length;ft++)b.push(E[ft])}return this},d.default.prototype.endShape=function(tt){var ft=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(d.default._validateParameters("endShape",arguments),ft<1&&(console.log(" p5.js says: You can not have less than one instance"),ft=1),this._renderer.isP3D)this._renderer.endShape(tt,pe,de,Ye,me,Be,ft);else{if(ft!==1&&console.log(" p5.js says: Instancing is only supported in WebGL2 mode"),b.length===0)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;ft=tt===h.CLOSE,ft&&!me&&b.push(b[0]),this._renderer.endShape(tt,b,pe,de,Ye,me,Be),Le=!(me=Ye=de=pe=!1),ft&&b.pop()}return this},d.default.prototype.quadraticVertex=function(){for(var tt,ft=arguments.length,yt=new Array(ft),gt=0;gt<ft;gt++)yt[gt]=arguments[gt];if(d.default._validateParameters("quadraticVertex",yt),this._renderer.isP3D)(tt=this._renderer).quadraticVertex.apply(tt,yt);else{if(this._contourInited)return(tt={}).x=yt[0],tt.y=yt[1],tt.x3=yt[2],tt.y3=yt[3],tt.type=h.QUADRATIC,this._contourVertices.push(tt),this;if(0<b.length){Ye=!0;for(var mt=[],wt=0;wt<yt.length;wt++)mt[wt]=yt[wt];mt.isVert=!1,(me?E:b).push(mt)}else d.default._friendlyError("vertex() must be used once before calling quadraticVertex()","quadraticVertex")}return this},d.default.prototype.vertex=function(tt,ft,yt,gt,mt){var wt;return this._renderer.isP3D?(wt=this._renderer).vertex.apply(wt,arguments):((wt=[]).isVert=!0,wt[0]=tt,wt[1]=ft,wt[2]=0,wt[3]=0,wt[4]=0,wt[5]=this._renderer._getFill(),wt[6]=this._renderer._getStroke(),yt&&(wt.moveTo=yt),(me?(E.length===0&&(wt.moveTo=!0),E):b).push(wt)),this},d.default.prototype.normal=function(tt,ft,yt){var gt;return this._assert3d("normal"),d.default._validateParameters("normal",arguments),(gt=this._renderer).normal.apply(gt,arguments),this},d.default);u.default=nt},{"../constants":272,"../main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],294:[function(t,l,u){},{}],295:[function(t,l,u){t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.assign"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("./main"))&&t.__esModule?t:{default:t},t.default.prototype.noLoop=function(){this._loop=!1},t.default.prototype.loop=function(){this._loop||(this._loop=!0,this._setupDone&&this._draw())},t.default.prototype.isLooping=function(){return this._loop},t.default.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},t.default.prototype.pop=function(){var s=this._styles.pop();s?(this._renderer.pop(s.renderer),Object.assign(this,s.props)):console.warn("pop() was called without matching push()")},t.default.prototype.redraw=function(s){if(!this._inUserDraw&&this._setupDone){var p=parseInt(s),d=((isNaN(p)||p<1)&&(p=1),this._isGlobal?window:this);if(typeof d.draw=="function"){d.setup===void 0&&d.scale(d._pixelDensity,d._pixelDensity);for(var h=0;h<p;h++){d.resetMatrix(),(this._accessibleOutputs.grid||this._accessibleOutputs.text)&&this._updateAccsOutput(),d._renderer.isP3D&&d._renderer._update(),d._setProperty("frameCount",d.frameCount+1),this.callRegisteredHooksFor("pre"),this._inUserDraw=!0;try{d.draw()}finally{this._inUserDraw=!1}this.callRegisteredHooksFor("post")}}}},t=t.default,u.default=t},{"./main":283,"core-js/modules/es.object.assign":183}],296:[function(t,l,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(t=t("./main"))&&t.__esModule?t:{default:t};function p(d){return function(h){if(Array.isArray(h)){for(var N=0,Be=new Array(h.length);N<h.length;N++)Be[N]=h[N];return Be}}(d)||function(h){if(Symbol.iterator in Object(h)||Object.prototype.toString.call(h)==="[object Arguments]")return Array.from(h)}(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}s.default.prototype.applyMatrix=function(){var d=(arguments.length<=0?void 0:arguments[0])instanceof Object.getPrototypeOf(Uint8Array);return Array.isArray(arguments.length<=0?void 0:arguments[0])||d?(d=this._renderer).applyMatrix.apply(d,p(arguments.length<=0?void 0:arguments[0])):(d=this._renderer).applyMatrix.apply(d,arguments),this},s.default.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},s.default.prototype.rotate=function(d,h){return s.default._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(d),h),this},s.default.prototype.rotateX=function(d){return this._assert3d("rotateX"),s.default._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(d)),this},s.default.prototype.rotateY=function(d){return this._assert3d("rotateY"),s.default._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(d)),this},s.default.prototype.rotateZ=function(d){return this._assert3d("rotateZ"),s.default._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(d)),this},s.default.prototype.scale=function(d,h,N){var Be;return s.default._validateParameters("scale",arguments),d instanceof s.default.Vector?(d=(Be=d).x,h=Be.y,N=Be.z):Array.isArray(d)&&(d=(Be=d)[0],h=Be[1],N=Be[2]||1),isNaN(h)?h=N=d:isNaN(N)&&(N=1),this._renderer.scale(d,h,N),this},s.default.prototype.shearX=function(d){return s.default._validateParameters("shearX",arguments),d=this._toRadians(d),this._renderer.applyMatrix(1,0,Math.tan(d),1,0,0),this},s.default.prototype.shearY=function(d){return s.default._validateParameters("shearY",arguments),d=this._toRadians(d),this._renderer.applyMatrix(1,Math.tan(d),0,1,0,0),this},s.default.prototype.translate=function(d,h,N){return s.default._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(d,h,N):this._renderer.translate(d,h),this},t=s.default,u.default=t},{"./main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.iterator":246}],297:[function(t,l,u){function s(N){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Be){return typeof Be}:function(Be){return Be&&typeof Symbol=="function"&&Be.constructor===Symbol&&Be!==Symbol.prototype?"symbol":typeof Be})(N)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.ends-with"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator");var p=(t=t("../core/main"))&&t.__esModule?t:{default:t};function d(N){return function(Be){if(Array.isArray(Be)){for(var b=0,E=new Array(Be.length);b<Be.length;b++)E[b]=Be[b];return E}}(N)||function(Be){if(Symbol.iterator in Object(Be)||Object.prototype.toString.call(Be)==="[object Arguments]")return Array.from(Be)}(N)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(N){return(h=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(Be){return s(Be)}:function(Be){return Be&&typeof Symbol=="function"&&Be.constructor===Symbol&&Be!==Symbol.prototype?"symbol":s(Be)})(N)}p.default.prototype.storeItem=function(N,Be){typeof N!="string"&&console.log("The argument that you passed to storeItem() - ".concat(N," is not a string.")),N.endsWith("p5TypeID")&&console.log("The argument that you passed to storeItem() - ".concat(N," must not end with 'p5TypeID'.")),Be===void 0&&console.log("You cannot store undefined variables using storeItem().");var b=h(Be);switch(b){case"number":case"boolean":Be=Be.toString();break;case"object":Be instanceof p.default.Color?b="p5.Color":Be instanceof p.default.Vector&&(b="p5.Vector",Be=[Be.x,Be.y,Be.z]),Be=JSON.stringify(Be)}localStorage.setItem(N,Be),N="".concat(N,"p5TypeID"),localStorage.setItem(N,b)},p.default.prototype.getItem=function(N){var Be=localStorage.getItem(N),b=localStorage.getItem("".concat(N,"p5TypeID"));if(b===void 0)console.log("Unable to determine type of item stored under ".concat(N,"in local storage. Did you save the item with something other than setItem()?"));else if(Be!==null)switch(b){case"number":Be=parseFloat(Be);break;case"boolean":Be=Be==="true";break;case"object":Be=JSON.parse(Be);break;case"p5.Color":Be=JSON.parse(Be),Be=this.color.apply(this,d(Be.levels));break;case"p5.Vector":Be=JSON.parse(Be),Be=this.createVector.apply(this,d(Be))}return Be},p.default.prototype.clearStorage=function(){var N=this;Object.keys(localStorage).forEach(function(Be){Be.endsWith("p5TypeID")&&N.removeItem(Be.replace("p5TypeID",""))})},p.default.prototype.removeItem=function(N){typeof N!="string"&&console.log("The argument that you passed to removeItem() - ".concat(N," is not a string.")),localStorage.removeItem(N),localStorage.removeItem("".concat(N,"p5TypeID"))}},{"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.ends-with":198,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],298:[function(t,l,u){function s(Ye){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(me){return typeof me}:function(me){return me&&typeof Symbol=="function"&&me.constructor===Symbol&&me!==Symbol.prototype?"symbol":typeof me})(Ye)}function p(Ye){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(me){return s(me)}:function(me){return me&&typeof Symbol=="function"&&me.constructor===Symbol&&me!==Symbol.prototype?"symbol":s(me)})(Ye)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.object.keys"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=(t=t("../core/main"))&&t.__esModule?t:{default:t};function h(Ye,me){if(typeof me!="function"&&me!==null)throw new TypeError("Super expression must either be null or a function");Ye.prototype=Object.create(me&&me.prototype,{constructor:{value:Ye,writable:!0,configurable:!0}}),me&&N(Ye,me)}function N(Ye,me){return(N=Object.setPrototypeOf||function(Le,nt){return Le.__proto__=nt,Le})(Ye,me)}function Be(Ye){return function(){var me,Le=b(Ye),Le=(me=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(me=b(this).constructor,Reflect.construct(Le,arguments,me)):Le.apply(this,arguments),this);if(!me||p(me)!=="object"&&typeof me!="function"){if(Le!==void 0)return Le;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return me}}function b(Ye){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(me){return me.__proto__||Object.getPrototypeOf(me)})(Ye)}function E(Ye,me){if(!(Ye instanceof me))throw new TypeError("Cannot call a class as a function")}function de(Ye,me){for(var Le=0;Le<me.length;Le++){var nt=me[Le];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(Ye,nt.key,nt)}}function pe(Ye,me,Le){me&&de(Ye.prototype,me)}d.default.prototype.createStringDict=function(Ye,me){return d.default._validateParameters("createStringDict",arguments),new d.default.StringDict(Ye,me)},d.default.prototype.createNumberDict=function(Ye,me){return d.default._validateParameters("createNumberDict",arguments),new d.default.NumberDict(Ye,me)},d.default.TypedDict=function(){function Ye(me,Le){return E(this,Ye),me instanceof Object?this.data=me:(this.data={},this.data[me]=Le),this}return pe(Ye,[{key:"size",value:function(){return Object.keys(this.data).length}},{key:"hasKey",value:function(me){return this.data.hasOwnProperty(me)}},{key:"get",value:function(me){if(this.data.hasOwnProperty(me))return this.data[me];console.log("".concat(me," does not exist in this Dictionary"))}},{key:"set",value:function(me,Le){this._validate(Le)?this.data[me]=Le:console.log("Those values dont work for this dictionary type.")}},{key:"_addObj",value:function(me){for(var Le in me)this.set(Le,me[Le])}},{key:"create",value:function(me,Le){me instanceof Object&&Le===void 0?this._addObj(me):me!==void 0?this.set(me,Le):console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair")}},{key:"clear",value:function(){this.data={}}},{key:"remove",value:function(me){if(!this.data.hasOwnProperty(me))throw new Error("".concat(me," does not exist in this Dictionary"));delete this.data[me]}},{key:"print",value:function(){for(var me in this.data)console.log("key:".concat(me," value:").concat(this.data[me]))}},{key:"saveTable",value:function(me){var Le,nt="";for(Le in this.data)nt+="".concat(Le,",").concat(this.data[Le],`
`);var tt=new Blob([nt],{type:"text/csv"});d.default.prototype.downloadFile(tt,me||"mycsv","csv")}},{key:"saveJSON",value:function(me,Le){d.default.prototype.saveJSON(this.data,me,Le)}},{key:"_validate",value:function(me){return!0}}]),Ye}(),d.default.StringDict=function(){h(me,d.default.TypedDict);var Ye=Be(me);function me(){E(this,me);for(var Le=arguments.length,nt=new Array(Le),tt=0;tt<Le;tt++)nt[tt]=arguments[tt];return Ye.call.apply(Ye,[this].concat(nt))}return pe(me,[{key:"_validate",value:function(Le){return typeof Le=="string"}}]),me}(),d.default.NumberDict=function(){h(me,d.default.TypedDict);var Ye=Be(me);function me(){E(this,me);for(var Le=arguments.length,nt=new Array(Le),tt=0;tt<Le;tt++)nt[tt]=arguments[tt];return Ye.call.apply(Ye,[this].concat(nt))}return pe(me,[{key:"_validate",value:function(Le){return typeof Le=="number"}},{key:"add",value:function(Le,nt){this.data.hasOwnProperty(Le)?this.data[Le]+=nt:console.log("The key - ".concat(Le," does not exist in this dictionary."))}},{key:"sub",value:function(Le,nt){this.add(Le,-nt)}},{key:"mult",value:function(Le,nt){this.data.hasOwnProperty(Le)?this.data[Le]*=nt:console.log("The key - ".concat(Le," does not exist in this dictionary."))}},{key:"div",value:function(Le,nt){this.data.hasOwnProperty(Le)?this.data[Le]/=nt:console.log("The key - ".concat(Le," does not exist in this dictionary."))}},{key:"_valueTest",value:function(Le){if(Object.keys(this.data).length===0)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(Object.keys(this.data).length===1)return this.data[Object.keys(this.data)[0]];var nt,tt=this.data[Object.keys(this.data)[0]];for(nt in this.data)this.data[nt]*Le<tt*Le&&(tt=this.data[nt]);return tt}},{key:"minValue",value:function(){return this._valueTest(1)}},{key:"maxValue",value:function(){return this._valueTest(-1)}},{key:"_keyTest",value:function(Le){if(Object.keys(this.data).length===0)throw new Error("Unable to use minValue on an empty NumberDict");if(Object.keys(this.data).length===1)return Object.keys(this.data)[0];for(var nt=Object.keys(this.data)[0],tt=1;tt<Object.keys(this.data).length;tt++)Object.keys(this.data)[tt]*Le<nt*Le&&(nt=Object.keys(this.data)[tt]);return nt}},{key:"minKey",value:function(){return this._keyTest(1)}},{key:"maxKey",value:function(){return this._keyTest(-1)}}]),me}(),t=d.default.TypedDict,u.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],299:[function(t,l,u){function s(tt){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ft){return typeof ft}:function(ft){return ft&&typeof Symbol=="function"&&ft.constructor===Symbol&&ft!==Symbol.prototype?"symbol":typeof ft})(tt)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var p=(t=t("../core/main"))&&t.__esModule?t:{default:t};function d(tt,ft){for(var yt=0;yt<ft.length;yt++){var gt=ft[yt];gt.enumerable=gt.enumerable||!1,gt.configurable=!0,"value"in gt&&(gt.writable=!0),Object.defineProperty(tt,gt.key,gt)}}function h(tt,ft,yt){ft&&d(tt.prototype,ft),yt&&d(tt,yt)}function N(tt,ft){return(N=Object.setPrototypeOf||function(yt,gt){return yt.__proto__=gt,yt})(tt,ft)}function Be(tt){return function(){var ft,yt,gt=E(tt);return ft=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(ft=E(this).constructor,Reflect.construct(gt,arguments,ft)):gt.apply(this,arguments),gt=this,!(yt=ft)||pe(yt)!=="object"&&typeof yt!="function"?b(gt):yt}}function b(tt){if(tt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tt}function E(tt){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(ft){return ft.__proto__||Object.getPrototypeOf(ft)})(tt)}function de(tt,ft){if(!(tt instanceof ft))throw new TypeError("Cannot call a class as a function")}function pe(tt){return(pe=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(ft){return s(ft)}:function(ft){return ft&&typeof Symbol=="function"&&ft.constructor===Symbol&&ft!==Symbol.prototype?"symbol":s(ft)})(tt)}function Ye(tt,ft,yt){return(ft._userNode||document.body).appendChild(tt),yt=new(yt?p.default.MediaElement:p.default.Element)(tt,ft),ft._elements.push(yt),yt}p.default.prototype.select=function(tt,ft){return p.default._validateParameters("select",arguments),ft=this._getContainer(ft).querySelector(tt),ft?this._wrapElement(ft):null},p.default.prototype.selectAll=function(tt,ft){p.default._validateParameters("selectAll",arguments);var yt=[],gt=this._getContainer(ft).querySelectorAll(tt);if(gt)for(var mt=0;mt<gt.length;mt++){var wt=this._wrapElement(gt[mt]);yt.push(wt)}return yt},p.default.prototype._getContainer=function(tt){var ft=document;return typeof tt=="string"?ft=document.querySelector(tt)||document:tt instanceof p.default.Element?ft=tt.elt:tt instanceof HTMLElement&&(ft=tt),ft},p.default.prototype._wrapElement=function(tt){var ft,yt=Array.prototype.slice.call(tt.children);return tt.tagName==="INPUT"&&tt.type==="checkbox"?((ft=new p.default.Element(tt,this)).checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=!(arguments.length<=0||!arguments[0]),this)},ft):tt.tagName==="VIDEO"||tt.tagName==="AUDIO"?new p.default.MediaElement(tt,this):tt.tagName==="SELECT"?this.createSelect(new p.default.Element(tt,this)):0<yt.length&&yt.every(function(gt){return gt.tagName==="INPUT"||gt.tagName==="LABEL"})&&(tt.tagName==="DIV"||tt.tagName==="SPAN")?this.createRadio(new p.default.Element(tt,this)):new p.default.Element(tt,this)},p.default.prototype.removeElements=function(tt){p.default._validateParameters("removeElements",arguments),this._elements.filter(function(ft){return!(ft.elt instanceof HTMLCanvasElement)}).map(function(ft){return ft.remove()})},p.default.Element.prototype.changed=function(tt){return p.default.Element._adjustListener("change",tt,this),this},p.default.Element.prototype.input=function(tt){return p.default.Element._adjustListener("input",tt,this),this},p.default.prototype.createDiv=function(){var tt=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",ft=document.createElement("div");return ft.innerHTML=tt,Ye(ft,this)},p.default.prototype.createP=function(){var tt=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",ft=document.createElement("p");return ft.innerHTML=tt,Ye(ft,this)},p.default.prototype.createSpan=function(){var tt=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",ft=document.createElement("span");return ft.innerHTML=tt,Ye(ft,this)},p.default.prototype.createImg=function(){p.default._validateParameters("createImg",arguments);var tt,ft=document.createElement("img"),yt=arguments;return 1<yt.length&&typeof yt[1]=="string"&&(ft.alt=yt[1]),2<yt.length&&typeof yt[2]=="string"&&(ft.crossOrigin=yt[2]),ft.src=yt[0],tt=Ye(ft,this),ft.addEventListener("load",function(){tt.width=ft.offsetWidth||ft.width,tt.height=ft.offsetHeight||ft.height;var gt=yt[yt.length-1];typeof gt=="function"&&gt(tt)}),tt},p.default.prototype.createA=function(tt,ft,yt){p.default._validateParameters("createA",arguments);var gt=document.createElement("a");return gt.href=tt,gt.innerHTML=ft,yt&&(gt.target=yt),Ye(gt,this)},p.default.prototype.createSlider=function(tt,ft,yt,gt){p.default._validateParameters("createSlider",arguments);var mt=document.createElement("input");return mt.type="range",mt.min=tt,mt.max=ft,gt===0?mt.step=1e-18:gt&&(mt.step=gt),typeof yt=="number"&&(mt.value=yt),Ye(mt,this)},p.default.prototype.createButton=function(tt,ft){p.default._validateParameters("createButton",arguments);var yt=document.createElement("button");return yt.innerHTML=tt,ft&&(yt.value=ft),Ye(yt,this)},p.default.prototype.createCheckbox=function(){for(var tt=arguments.length,ft=new Array(tt),yt=0;yt<tt;yt++)ft[yt]=arguments[yt];p.default._validateParameters("createCheckbox",ft);var gt=document.createElement("div"),mt=document.createElement("input"),wt=(mt.type="checkbox",document.createElement("label")),St=(wt.appendChild(mt),gt.appendChild(wt),Ye(gt,this));return St.checked=function(){var bt=St.elt.firstElementChild.getElementsByTagName("input")[0];if(bt){if(arguments.length===0)return bt.checked;bt.checked=!(arguments.length<=0||!arguments[0])}return St},this.value=function(bt){return St.value=bt,this},ft[0]&&(St.value(ft[0]),(gt=document.createElement("span")).innerHTML=ft[0],wt.appendChild(gt)),ft[1]&&(mt.checked=!0),St},p.default.prototype.createSelect=function(){for(var tt,ft=arguments.length,yt=new Array(ft),gt=0;gt<ft;gt++)yt[gt]=arguments[gt];p.default._validateParameters("createSelect",yt);var mt,wt=yt[0];return wt instanceof p.default.Element&&wt.elt instanceof HTMLSelectElement?this.elt=(tt=wt).elt:wt instanceof HTMLSelectElement?(tt=Ye(wt,this),this.elt=wt):(mt=document.createElement("select"),wt&&typeof wt=="boolean"&&mt.setAttribute("multiple","true"),tt=Ye(mt,this),this.elt=mt),tt.option=function(St,bt){var Ct;if(St!==void 0){for(var Et,It=0;It<this.elt.length;It+=1)if(this.elt[It].textContent===St){Ct=It;break}Ct!==void 0?bt===!1?this.elt.remove(Ct):this.elt[Ct].value=bt:((Et=document.createElement("option")).textContent=St,Et.value=bt===void 0?St:bt,this.elt.appendChild(Et),this._pInst._elements.push(Et))}},tt.selected=function(St){if(St!==void 0){for(var bt=0;bt<this.elt.length;bt+=1)this.elt[bt].value.toString()===St.toString()&&(this.elt.selectedIndex=bt);return this}if(this.elt.getAttribute("multiple")){var Ct=[],Et=!0,It=!1,Dt=void 0;try{for(var Pt,qt=this.elt.selectedOptions[Symbol.iterator]();!(Et=(Pt=qt.next()).done);Et=!0){var Ht=Pt.value;Ct.push(Ht.value)}}catch(Gt){It=!0,Dt=Gt}finally{try{Et||qt.return==null||qt.return()}finally{if(It)throw Dt}}return Ct}return this.elt.value},tt.disable=function(St){if(typeof St=="string")for(var bt=0;bt<this.elt.length;bt++)this.elt[bt].value.toString()===St&&(this.elt[bt].disabled=!0,this.elt[bt].selected=!1);else this.elt.disabled=!0;return this},tt.enable=function(St){if(typeof St=="string")for(var bt=0;bt<this.elt.length;bt++)this.elt[bt].value.toString()===St&&(this.elt[bt].disabled=!1,this.elt[bt].selected=!1);else{this.elt.disabled=!1;for(var Ct=0;Ct<this.elt.length;Ct++)this.elt[Ct].disabled=!1,this.elt[Ct].selected=!1}return this},tt};var me=0;function Le(tt,St,yt,gt){var mt=document.createElement(St),wt=(typeof(yt=yt||"")=="string"&&(yt=[yt]),!0),St=!1,bt=void 0;try{for(var Ct,Et=yt[Symbol.iterator]();!(wt=(Ct=Et.next()).done);wt=!0){var It=Ct.value,Dt=document.createElement("source");Dt.setAttribute("src",It),mt.appendChild(Dt)}}catch(qt){St=!0,bt=qt}finally{try{wt||Et.return==null||Et.return()}finally{if(St)throw bt}}var Pt=Ye(mt,tt,!0);return Pt.loadedmetadata=!1,mt.addEventListener("loadedmetadata",function(){Pt.width=mt.videoWidth,Pt.height=mt.videoHeight,Pt.elt.width===0&&(Pt.elt.width=mt.videoWidth),Pt.elt.height===0&&(Pt.elt.height=mt.videoHeight),Pt.presetPlaybackRate&&(Pt.elt.playbackRate=Pt.presetPlaybackRate,delete Pt.presetPlaybackRate),Pt.loadedmetadata=!0}),typeof gt=="function"&&mt.addEventListener("canplaythrough",function qt(){gt(Pt),mt.removeEventListener("canplaythrough",qt)}),Pt}p.default.prototype.createRadio=function(){function tt(St){return St instanceof HTMLInputElement&&St.type==="radio"}function ft(St){return St instanceof HTMLLabelElement}var yt,gt,mt,wt=arguments.length<=0?void 0:arguments[0];return wt instanceof p.default.Element&&(wt.elt instanceof HTMLDivElement||wt.elt instanceof HTMLSpanElement)?(yt=wt,this.elt=wt.elt):wt instanceof HTMLDivElement||wt instanceof HTMLSpanElement?(yt=Ye(wt,this),gt=this.elt=wt,typeof(arguments.length<=1?void 0:arguments[1])=="string"&&(mt=arguments.length<=1?void 0:arguments[1])):(typeof wt=="string"&&(mt=wt),gt=document.createElement("div"),yt=Ye(gt,this),this.elt=gt),yt._name=mt||"radioOption_".concat(me++),yt._getOptionsArray=function(){return Array.from(this.elt.children).filter(function(St){return tt(St)||ft(St)&&tt(St.firstElementChild)}).map(function(St){return tt(St)?St:St.firstElementChild})},yt.option=function(St,bt){var Ct,Et,It,Dt=!0,Pt=!1,qt=void 0;try{for(var Ht,Gt=yt._getOptionsArray()[Symbol.iterator]();!(Dt=(Ht=Gt.next()).done);Dt=!0){var Ut=Ht.value;if(Ut.value===St){Ct=Ut;break}}}catch(Yt){Pt=!0,qt=Yt}finally{try{Dt||Gt.return==null||Gt.return()}finally{if(Pt)throw qt}}return Ct===void 0&&((Ct=document.createElement("input")).setAttribute("type","radio"),Ct.setAttribute("value",St)),Ct.setAttribute("name",yt._name),ft(Ct.parentElement)?Et=Ct.parentElement:(Et=document.createElement("label")).insertAdjacentElement("afterbegin",Ct),Et.lastElementChild instanceof HTMLSpanElement?It=Et.lastElementChild:(It=document.createElement("span"),Ct.insertAdjacentElement("afterend",It)),It.innerHTML=bt===void 0?St:bt,this.elt.appendChild(Et),Ct},yt.remove=function(St){var bt=!0,Ct=!1,Et=void 0;try{for(var It,Dt=yt._getOptionsArray()[Symbol.iterator]();!(bt=(It=Dt.next()).done);bt=!0){var Pt=It.value;if(Pt.value===St)return void(ft(Pt.parentElement)?Pt.parentElement:Pt).remove()}}catch(qt){Ct=!0,Et=qt}finally{try{bt||Dt.return==null||Dt.return()}finally{if(Ct)throw Et}}},yt.value=function(){var St="",bt=!0,Ct=!1,Et=void 0;try{for(var It,Dt=yt._getOptionsArray()[Symbol.iterator]();!(bt=(It=Dt.next()).done);bt=!0){var Pt=It.value;if(Pt.checked){St=Pt.value;break}}}catch(qt){Ct=!0,Et=qt}finally{try{bt||Dt.return==null||Dt.return()}finally{if(Ct)throw Et}}return St},yt.selected=function(St){var bt=null;if(St===void 0){var Ct=!0,Et=!1,It=void 0;try{for(var Dt,Pt=yt._getOptionsArray()[Symbol.iterator]();!(Ct=(Dt=Pt.next()).done);Ct=!0){var qt=Dt.value;if(qt.checked){bt=qt;break}}}catch(Zt){Et=!0,It=Zt}finally{try{Ct||Pt.return==null||Pt.return()}finally{if(Et)throw It}}}else{yt._getOptionsArray().forEach(function(Rt){Rt.checked=!1,Rt.removeAttribute("checked")});var Ht=!0,Et=!1,It=void 0;try{for(var Gt,Ut=yt._getOptionsArray()[Symbol.iterator]();!(Ht=(Gt=Ut.next()).done);Ht=!0){var Yt=Gt.value;Yt.value===St&&(Yt.setAttribute("checked",!0),Yt.checked=!0,bt=Yt)}}catch(Rt){Et=!0,It=Rt}finally{try{Ht||Ut.return==null||Ut.return()}finally{if(Et)throw It}}}return bt},yt.disable=function(){var St=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],bt=!0,Ct=!1,Et=void 0;try{for(var It,Dt=yt._getOptionsArray()[Symbol.iterator]();!(bt=(It=Dt.next()).done);bt=!0)It.value.setAttribute("disabled",St)}catch(Pt){Ct=!0,Et=Pt}finally{try{bt||Dt.return==null||Dt.return()}finally{if(Ct)throw Et}}},yt},p.default.prototype.createColorPicker=function(tt){p.default._validateParameters("createColorPicker",arguments);var ft=document.createElement("input");return ft.type="color",tt?tt instanceof p.default.Color?ft.value=tt.toString("#rrggbb"):(p.default.prototype._colorMode="rgb",p.default.prototype._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},ft.value=p.default.prototype.color(tt).toString("#rrggbb")):ft.value="#000000",(ft=Ye(ft,this)).color=function(){return tt&&(tt.mode&&(p.default.prototype._colorMode=tt.mode),tt.maxes&&(p.default.prototype._colorMaxes=tt.maxes)),p.default.prototype.color(this.elt.value)},ft},p.default.prototype.createInput=function(){var tt=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",ft=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text",yt=(p.default._validateParameters("createInput",arguments),document.createElement("input"));return yt.setAttribute("value",tt),yt.setAttribute("type",ft),Ye(yt,this)},p.default.prototype.createFileInput=function(tt){var ft,yt=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if(p.default._validateParameters("createFileInput",arguments),window.File&&window.FileReader&&window.FileList&&window.Blob)return(ft=document.createElement("input")).setAttribute("type","file"),yt&&ft.setAttribute("multiple",!0),ft.addEventListener("change",function(gt){var mt=!0,wt=!1,St=void 0;try{for(var bt,Ct=gt.target.files[Symbol.iterator]();!(mt=(bt=Ct.next()).done);mt=!0){var Et=bt.value;p.default.File._load(Et,tt)}}catch(It){wt=!0,St=It}finally{try{mt||Ct.return==null||Ct.return()}finally{if(wt)throw St}}},!1),Ye(ft,this);console.log("The File APIs are not fully supported in this browser. Cannot create element.")},p.default.prototype.createVideo=function(tt,ft){return p.default._validateParameters("createVideo",arguments),Le(this,"video",tt,ft)},p.default.prototype.createAudio=function(tt,ft){return p.default._validateParameters("createAudio",arguments),Le(this,"audio",tt,ft)},p.default.prototype.VIDEO="video",p.default.prototype.AUDIO="audio",navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(tt){var ft=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return ft?new Promise(function(yt,gt){ft.call(navigator,tt,yt,gt)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),p.default.prototype.createCapture=function(){for(var tt=arguments.length,ft=new Array(tt),yt=0;yt<tt;yt++)ft[yt]=arguments[yt];if(p.default._validateParameters("createCapture",ft),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new DOMException("getUserMedia not supported in this browser");for(var gt,mt=!0,wt=!0,St=!1,bt=0,Ct=ft;bt<Ct.length;bt++){var Et=Ct[bt];Et===p.default.prototype.VIDEO?wt=!1:Et===p.default.prototype.AUDIO?mt=!1:pe(Et)==="object"?(Et.flipped!==void 0&&(St=Et.flipped,delete Et.flipped),It=Object.assign({},It,Et)):typeof Et=="function"&&(gt=Et)}var It=Object.assign({},{video:mt,audio:wt},It),Dt=document.createElement("video"),Pt=(Dt.setAttribute("playsinline",""),navigator.mediaDevices.getUserMedia(It).then(function(qt){try{"srcObject"in Dt?Dt.srcObject=qt:Dt.src=window.URL.createObjectURL(qt)}catch{Dt.src=qt}}).catch(function(qt){qt.name==="NotFoundError"&&p.default._friendlyError("No webcam found on this device","createCapture"),qt.name==="NotAllowedError"&&p.default._friendlyError("Access to the camera was denied","createCapture"),console.error(qt)}),Ye(Dt,this,!0));return Pt.loadedmetadata=!1,Dt.addEventListener("loadedmetadata",function(){Dt.play(),Dt.width?(Pt.width=Dt.width,Pt.height=Dt.height,St&&(Pt.elt.style.transform="scaleX(-1)")):(Pt.width=Pt.elt.width=Dt.videoWidth,Pt.height=Pt.elt.height=Dt.videoHeight),Pt.loadedmetadata=!0,gt&&gt(Dt.srcObject)}),Pt.flipped=St,Pt},p.default.prototype.createElement=function(tt,ft){return p.default._validateParameters("createElement",arguments),tt=document.createElement(tt),ft!==void 0&&(tt.innerHTML=ft),Ye(tt,this)},p.default.Element.prototype.addClass=function(tt){return this.elt.className?this.hasClass(tt)||(this.elt.className=this.elt.className+" "+tt):this.elt.className=tt,this},p.default.Element.prototype.removeClass=function(tt){return this.elt.classList.remove(tt),this},p.default.Element.prototype.hasClass=function(tt){return this.elt.classList.contains(tt)},p.default.Element.prototype.toggleClass=function(tt){return this.elt.classList.contains(tt)?this.elt.classList.remove(tt):this.elt.classList.add(tt),this},p.default.Element.prototype.child=function(tt){return tt===void 0?this.elt.childNodes:(typeof tt=="string"?(tt[0]==="#"&&(tt=tt.substring(1)),tt=document.getElementById(tt)):tt instanceof p.default.Element&&(tt=tt.elt),tt instanceof HTMLElement&&this.elt.appendChild(tt),this)},p.default.Element.prototype.center=function(tt){var ft=this.elt.style.display,yt=this.elt.style.display==="none",gt=this.parent().style.display==="none",mt={x:this.elt.offsetLeft,y:this.elt.offsetTop},wt=(yt&&this.show(),gt&&this.parent().show(),this.elt.style.display="block",this.position(0,0),Math.abs(this.parent().offsetWidth-this.elt.offsetWidth)),St=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight);return tt==="both"||tt===void 0?this.position(wt/2+this.parent().offsetLeft,St/2+this.parent().offsetTop):tt==="horizontal"?this.position(wt/2+this.parent().offsetLeft,mt.y):tt==="vertical"&&this.position(mt.x,St/2+this.parent().offsetTop),this.style("display",ft),yt&&this.hide(),gt&&this.parent().hide(),this},p.default.Element.prototype.html=function(){return arguments.length===0?this.elt.innerHTML:(arguments.length<=1||!arguments[1]?this.elt.innerHTML=arguments.length<=0?void 0:arguments[0]:this.elt.insertAdjacentHTML("beforeend",arguments.length<=0?void 0:arguments[0]),this)},p.default.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position=(arguments.length<=2?void 0:arguments[2])!=="static"&&(arguments.length<=2?void 0:arguments[2])!=="fixed"&&(arguments.length<=2?void 0:arguments[2])!=="relative"&&(arguments.length<=2?void 0:arguments[2])!=="sticky"&&(arguments.length<=2?void 0:arguments[2])!=="initial"&&(arguments.length<=2?void 0:arguments[2])!=="inherit"?"absolute":arguments.length<=2?void 0:arguments[2],this.elt.style.left=(arguments.length<=0?void 0:arguments[0])+"px",this.elt.style.top=(arguments.length<=1?void 0:arguments[1])+"px",this.x=arguments.length<=0?void 0:arguments[0],this.y=arguments.length<=1?void 0:arguments[1],this)},p.default.Element.prototype._translate=function(){this.elt.style.position="absolute";var tt="";return this.elt.style.transform&&(tt=(tt=this.elt.style.transform.replace(/translate3d\(.*\)/g,"")).replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+(arguments.length<=0?void 0:arguments[0])+"px, "+(arguments.length<=1?void 0:arguments[1])+"px)":2<arguments.length&&(this.elt.style.transform="translate3d("+(arguments.length<=0?void 0:arguments[0])+"px,"+(arguments.length<=1?void 0:arguments[1])+"px,"+(arguments.length<=2?void 0:arguments[2])+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":(arguments.length<=3?void 0:arguments[3])+"px"),this.elt.style.transform+=tt,this},p.default.Element.prototype._rotate=function(){var tt="";return this.elt.style.transform&&(tt=(tt=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"")).replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg)":arguments.length===2?this.elt.style.transform="rotate("+(arguments.length<=0?void 0:arguments[0])+"deg, "+(arguments.length<=1?void 0:arguments[1])+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+(arguments.length<=0?void 0:arguments[0])+"deg)",this.elt.style.transform+="rotateY("+(arguments.length<=1?void 0:arguments[1])+"deg)",this.elt.style.transform+="rotateZ("+(arguments.length<=2?void 0:arguments[2])+"deg)"),this.elt.style.transform+=tt,this},p.default.Element.prototype.style=function(tt,ft){if((ft=ft instanceof p.default.Color?"rgba("+ft.levels[0]+","+ft.levels[1]+","+ft.levels[2]+","+ft.levels[3]/255+")":ft)===void 0){if(tt.indexOf(":")===-1)return window.getComputedStyle(this.elt).getPropertyValue(tt);for(var yt=tt.split(";"),gt=0;gt<yt.length;gt++){var mt=yt[gt].split(":");mt[0]&&mt[1]&&(this.elt.style[mt[0].trim()]=mt[1].trim())}}else this.elt.style[tt]=ft,tt!=="width"&&tt!=="height"&&tt!=="left"&&tt!=="top"||(ft=window.getComputedStyle(this.elt).getPropertyValue(tt).replace(/[^\d.]/g,""),this[tt]=Math.round(parseFloat(ft,10)));return this},p.default.Element.prototype.attribute=function(tt,ft){if(this.elt.firstChild==null||this.elt.firstChild.type!=="checkbox"&&this.elt.firstChild.type!=="radio")return ft===void 0?this.elt.getAttribute(tt):(this.elt.setAttribute(tt,ft),this);if(ft===void 0)return this.elt.firstChild.getAttribute(tt);for(var yt=0;yt<this.elt.childNodes.length;yt++)this.elt.childNodes[yt].setAttribute(tt,ft)},p.default.Element.prototype.removeAttribute=function(tt){if(this.elt.firstChild!=null&&(this.elt.firstChild.type==="checkbox"||this.elt.firstChild.type==="radio"))for(var ft=0;ft<this.elt.childNodes.length;ft++)this.elt.childNodes[ft].removeAttribute(tt);return this.elt.removeAttribute(tt),this},p.default.Element.prototype.value=function(){return 0<arguments.length?(this.elt.value=arguments.length<=0?void 0:arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value},p.default.Element.prototype.show=function(){return this.elt.style.display="block",this},p.default.Element.prototype.hide=function(){return this.elt.style.display="none",this},p.default.Element.prototype.size=function(tt,ft){if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var yt=tt,gt=ft,mt=p.default.prototype.AUTO;if(yt!==mt||gt!==mt){if(yt===mt?yt=ft*this.width/this.height:gt===mt&&(gt=tt*this.height/this.width),this.elt instanceof HTMLCanvasElement){var wt,St={},bt=this.elt.getContext("2d");for(wt in bt)St[wt]=bt[wt];for(wt in this.elt.setAttribute("width",yt*this._pInst._pixelDensity),this.elt.setAttribute("height",gt*this._pInst._pixelDensity),this.elt.style.width=yt+"px",this.elt.style.height=gt+"px",this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),St)this.elt.getContext("2d")[wt]=St[wt]}else this.elt.style.width=yt+"px",this.elt.style.height=gt+"px",this.elt.width=yt,this.elt.height=gt;this.width=yt,this.height=gt,this._pInst&&this._pInst._curElement&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",yt),this._pInst._setProperty("height",gt))}return this},p.default.Element.prototype.remove=function(){this instanceof p.default.MediaElement&&(this.stop(),(ft=this.elt.srcObject)!==null&&ft.getTracks().forEach(function(yt){yt.stop()}));var tt,ft=this._pInst._elements.indexOf(this);for(tt in ft!==-1&&this._pInst._elements.splice(ft,1),this._events)this.elt.removeEventListener(tt,this._events[tt]);this.elt&&this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt)},p.default.Element.prototype.drop=function(tt,ft){var yt;return window.File&&window.FileReader&&window.FileList&&window.Blob?(this._dragDisabled||(this._dragDisabled=!0,this.elt.addEventListener("dragover",yt=function(gt){gt.preventDefault()}),this.elt.addEventListener("dragleave",yt)),p.default.Element._attachListener("drop",function(mt){mt.preventDefault(),typeof ft=="function"&&ft.call(this,mt);var mt=mt.dataTransfer.files,wt=!0,St=!1,bt=void 0;try{for(var Ct,Et=mt[Symbol.iterator]();!(wt=(Ct=Et.next()).done);wt=!0){var It=Ct.value;p.default.File._load(It,tt)}}catch(Dt){St=!0,bt=Dt}finally{try{wt||Et.return==null||Et.return()}finally{if(St)throw bt}}},this)):console.log("The File APIs are not fully supported in this browser."),this},p.default.Element.prototype.draggable=function(tt){var ft,yt="ontouchstart"in window,gt=0,mt=0,wt=0,St=0,bt=yt?"touchend":"mouseup",Ct=yt?"touchmove":"mousemove";function Et(Dt){var Pt;Dt=Dt||window.event,St=yt?(Pt=Dt.changedTouches,gt=wt-parseInt(Pt[0].clientX),mt=St-parseInt(Pt[0].clientY),wt=parseInt(Pt[0].clientX),parseInt(Pt[0].clientY)):(gt=wt-parseInt(Dt.clientX),mt=St-parseInt(Dt.clientY),wt=parseInt(Dt.clientX),parseInt(Dt.clientY)),tt.style.left=tt.offsetLeft-gt+"px",tt.style.top=tt.offsetTop-mt+"px"}function It(){document.removeEventListener(bt,It,!1),document.removeEventListener(Ct,Et,!1)}return tt===void 0?ft=tt=this.elt:tt!==this.elt&&tt.elt!==this.elt&&(tt=tt.elt,ft=this.elt),ft.addEventListener(yt?"touchstart":"mousedown",function(Dt){{var Pt;Dt=Dt||window.event,St=yt?(Pt=Dt.changedTouches,wt=parseInt(Pt[0].clientX),parseInt(Pt[0].clientY)):(wt=parseInt(Dt.clientX),parseInt(Dt.clientY))}return document.addEventListener(bt,It,!1),document.addEventListener(Ct,Et,!1),!1},!1),ft.style.cursor="move",this};function nt(tt,ft,yt,gt){de(this,nt),this.callback=tt,this.time=ft,this.id=yt,this.val=gt}t=function(tt){var ft=gt;if(typeof tt!="function"&&tt!==null)throw new TypeError("Super expression must either be null or a function");ft.prototype=Object.create(tt&&tt.prototype,{constructor:{value:ft,writable:!0,configurable:!0}}),tt&&N(ft,tt);var yt=Be(gt);function gt(mt,wt){de(this,gt);var St=b(wt=yt.call(this,mt,wt));return wt.elt.crossOrigin="anonymous",wt._prevTime=0,wt._cueIDCounter=0,wt._cues=[],wt.pixels=[],wt._pixelsState=b(wt),wt._pixelDensity=1,wt._modified=!1,wt._frameOnCanvas=-1,Object.defineProperty(St,"src",{get:function(){var bt=St.elt.children[0].src,Ct=St.elt.src===window.location.href?"":St.elt.src;return bt===window.location.href?Ct:bt},set:function(bt){for(var Ct=0;Ct<St.elt.children.length;Ct++)St.elt.removeChild(St.elt.children[Ct]);var Et=document.createElement("source");Et.src=bt,mt.appendChild(Et),St.elt.src=bt,St.modified=!0}}),St._onended=function(){},St.elt.onended=function(){St._onended(St)},wt}return h(gt,[{key:"play",value:function(){var mt;return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),1<this.elt.readyState||this.elt.load(),(mt=this.elt.play())&&mt.catch&&mt.catch(function(wt){wt.name==="NotAllowedError"?console.error(wt):console.error("Media play method encountered an unexpected error",wt)}),this}},{key:"stop",value:function(){return this.elt.pause(),this.elt.currentTime=0,this}},{key:"pause",value:function(){return this.elt.pause(),this}},{key:"loop",value:function(){return this.elt.setAttribute("loop",!0),this.play(),this}},{key:"noLoop",value:function(){return this.elt.removeAttribute("loop"),this}},{key:"_setupAutoplayFailDetection",value:function(){var mt=setTimeout(function(){console.error(e)},500);this.elt.addEventListener("play",function(){return clearTimeout(mt)},{passive:!0,once:!0})}},{key:"autoplay",value:function(mt){var wt=this,St=this.elt.getAttribute("autoplay");return this.elt.setAttribute("autoplay",mt),mt&&!St&&(mt=function(){return wt._setupAutoplayFailDetection()},this.elt.readyState===4?mt():this.elt.addEventListener("canplay",mt,{passive:!0,once:!0})),this}},{key:"volume",value:function(mt){if(mt===void 0)return this.elt.volume;this.elt.volume=mt}},{key:"speed",value:function(mt){if(mt===void 0)return this.presetPlaybackRate||this.elt.playbackRate;this.loadedmetadata?this.elt.playbackRate=mt:this.presetPlaybackRate=mt}},{key:"time",value:function(mt){return mt===void 0?this.elt.currentTime:(this.elt.currentTime=mt,this)}},{key:"duration",value:function(){return this.elt.duration}},{key:"_ensureCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d"),this.setModified(!0));var mt=this._frameOnCanvas!==this._pInst.frameCount;this.loadedmetadata&&mt&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&(this.drawingContext.save(),this.drawingContext.scale(-1,1),this.drawingContext.translate(-this.canvas.width,0)),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),this.flipped===!0&&this.drawingContext.restore(),this.setModified(!0),this._frameOnCanvas=this._pInst.frameCount)}},{key:"loadPixels",value:function(){this._ensureCanvas();for(var mt=arguments.length,wt=new Array(mt),St=0;St<mt;St++)wt[St]=arguments[St];return p.default.Renderer2D.prototype.loadPixels.apply(this,wt)}},{key:"updatePixels",value:function(mt,wt,St,bt){return this.loadedmetadata&&(this._ensureCanvas(),p.default.Renderer2D.prototype.updatePixels.call(this,mt,wt,St,bt)),this.setModified(!0),this}},{key:"get",value:function(){this._ensureCanvas();for(var mt=arguments.length,wt=new Array(mt),St=0;St<mt;St++)wt[St]=arguments[St];return p.default.Renderer2D.prototype.get.apply(this,wt)}},{key:"_getPixel",value:function(){this.loadPixels();for(var mt=arguments.length,wt=new Array(mt),St=0;St<mt;St++)wt[St]=arguments[St];return p.default.Renderer2D.prototype._getPixel.apply(this,wt)}},{key:"set",value:function(mt,wt,St){this.loadedmetadata&&(this._ensureCanvas(),p.default.Renderer2D.prototype.set.call(this,mt,wt,St),this.setModified(!0))}},{key:"copy",value:function(){this._ensureCanvas();for(var mt=arguments.length,wt=new Array(mt),St=0;St<mt;St++)wt[St]=arguments[St];p.default.prototype.copy.apply(this,wt)}},{key:"mask",value:function(){this.loadPixels(),this.setModified(!0);for(var mt=arguments.length,wt=new Array(mt),St=0;St<mt;St++)wt[St]=arguments[St];p.default.Image.prototype.mask.apply(this,wt)}},{key:"isModified",value:function(){return this._modified}},{key:"setModified",value:function(mt){this._modified=mt}},{key:"onended",value:function(mt){return this._onended=mt,this}},{key:"connect",value:function(mt){var wt,St;if(typeof p.default.prototype.getAudioContext=="function")wt=p.default.prototype.getAudioContext(),St=p.default.soundOut.input;else try{St=(wt=mt.context).destination}catch{throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=wt.createMediaElementSource(this.elt),this.audioSourceNode.connect(St)),mt?mt.input?this.audioSourceNode.connect(mt.input):this.audioSourceNode.connect(mt):this.audioSourceNode.connect(St)}},{key:"disconnect",value:function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()}},{key:"showControls",value:function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0}},{key:"hideControls",value:function(){this.elt.controls=!1}},{key:"addCue",value:function(mt,Ct,St){var bt=this._cueIDCounter++,Ct=new nt(Ct,mt,bt,St);return this._cues.push(Ct),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),bt}},{key:"removeCue",value:function(mt){for(var wt=0;wt<this._cues.length;wt++)this._cues[wt].id===mt&&(console.log(mt),this._cues.splice(wt,1));this._cues.length===0&&(this.elt.ontimeupdate=null)}},{key:"clearCues",value:function(){this._cues=[],this.elt.ontimeupdate=null}},{key:"_onTimeUpdate",value:function(){for(var mt=this.time(),wt=0;wt<this._cues.length;wt++){var St=this._cues[wt].time,bt=this._cues[wt].val;this._prevTime<St&&St<=mt&&this._cues[wt].callback(bt)}this._prevTime=mt}}]),gt}(p.default.Element),p.default.MediaElement=t,t=function(){function tt(ft,yt){de(this,tt),this.file=ft,this._pInst=yt,yt=ft.type.split("/"),this.type=yt[0],this.subtype=yt[1],this.name=ft.name,this.size=ft.size,this.data=void 0}return h(tt,null,[{key:"_createLoader",value:function(ft,yt){var gt=new FileReader;return gt.onload=function(mt){var wt,St=new p.default.File(ft);St.file.type==="application/json"?St.data=JSON.parse(mt.target.result):St.file.type==="text/xml"?(wt=new DOMParser().parseFromString(mt.target.result,"text/xml"),St.data=new p.default.XML(wt.documentElement)):St.data=mt.target.result,yt(St)},gt}},{key:"_load",value:function(ft,yt){var gt;/^text\//.test(ft.type)||ft.type==="application/json"?p.default.File._createLoader(ft,yt).readAsText(ft):/^(video|audio)\//.test(ft.type)?((gt=new p.default.File(ft)).data=URL.createObjectURL(ft),yt(gt)):p.default.File._createLoader(ft,yt).readAsDataURL(ft)}}]),tt}(),p.default.File=t,t=p.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.every":155,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246,"core-js/modules/web.url":248}],300:[function(pe,l,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(pe=pe("../core/main"))&&pe.__esModule?pe:{default:pe};s.default.prototype.deviceOrientation=1<window.innerWidth/window.innerHeight?"landscape":"portrait",s.default.prototype.accelerationX=0,s.default.prototype.accelerationY=0,s.default.prototype.accelerationZ=0,s.default.prototype.pAccelerationX=0,s.default.prototype.pAccelerationY=0,s.default.prototype.pAccelerationZ=0,s.default.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},s.default.prototype.rotationX=0,s.default.prototype.rotationY=0,s.default.prototype.rotationZ=0,s.default.prototype.pRotationX=0,s.default.prototype.pRotationY=0;var p=s.default.prototype.pRotationZ=0,d=0,h=0,N="clockwise",Be="clockwise",b="clockwise",E=(s.default.prototype.pRotateDirectionX=void 0,s.default.prototype.pRotateDirectionY=void 0,s.default.prototype.pRotateDirectionZ=void 0,s.default.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},s.default.prototype.turnAxis=void 0,.5),de=30,pe=(s.default.prototype.setMoveThreshold=function(Ye){s.default._validateParameters("setMoveThreshold",arguments),E=Ye},s.default.prototype.setShakeThreshold=function(Ye){s.default._validateParameters("setShakeThreshold",arguments),de=Ye},s.default.prototype._ondeviceorientation=function(Ye){this._updatePRotations(),this._setProperty("rotationX",this._fromDegrees(Ye.beta)),this._setProperty("rotationY",this._fromDegrees(Ye.gamma)),this._setProperty("rotationZ",this._fromDegrees(Ye.alpha)),this._handleMotion()},s.default.prototype._ondevicemotion=function(Ye){this._updatePAccelerations(),this._setProperty("accelerationX",2*Ye.acceleration.x),this._setProperty("accelerationY",2*Ye.acceleration.y),this._setProperty("accelerationZ",2*Ye.acceleration.z),this._handleMotion()},s.default.prototype._handleMotion=function(){window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===void 0&&this._setProperty("deviceOrientation","undefined");var Ye,me,Le,nt,tt,ft=this._isGlobal?window:this;typeof ft.deviceMoved=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>E||Math.abs(this.accelerationY-this.pAccelerationY)>E||Math.abs(this.accelerationZ-this.pAccelerationZ)>E)&&ft.deviceMoved(),typeof ft.deviceTurned=="function"&&(me=this._toDegrees(this.rotationX)+180,Le=this._toDegrees(this.pRotationX)+180,Ye=p+180,0<me-Le&&me-Le<270||me-Le<-270?N="clockwise":(me-Le<0||270<me-Le)&&(N="counter-clockwise"),N!==this.pRotateDirectionX&&(Ye=me),90<Math.abs(me-Ye)&&Math.abs(me-Ye)<270&&(Ye=me,this._setProperty("turnAxis","X"),ft.deviceTurned()),this.pRotateDirectionX=N,p=Ye-180,Le=this._toDegrees(this.rotationY)+180,me=this._toDegrees(this.pRotationY)+180,Ye=d+180,0<Le-me&&Le-me<270||Le-me<-270?Be="clockwise":(Le-me<0||270<Le-this.pRotationY)&&(Be="counter-clockwise"),Be!==this.pRotateDirectionY&&(Ye=Le),90<Math.abs(Le-Ye)&&Math.abs(Le-Ye)<270&&(Ye=Le,this._setProperty("turnAxis","Y"),ft.deviceTurned()),this.pRotateDirectionY=Be,d=Ye-180,0<(me=this._toDegrees(this.rotationZ))-(Le=this._toDegrees(this.pRotationZ))&&me-Le<270||me-Le<-270?b="clockwise":(me-Le<0||270<me-Le)&&(b="counter-clockwise"),b!==this.pRotateDirectionZ&&(h=me),90<Math.abs(me-h)&&Math.abs(me-h)<270&&(h=me,this._setProperty("turnAxis","Z"),ft.deviceTurned()),this.pRotateDirectionZ=b,this._setProperty("turnAxis",void 0)),typeof ft.deviceShaken=="function"&&(this.pAccelerationX!==null&&(nt=Math.abs(this.accelerationX-this.pAccelerationX),tt=Math.abs(this.accelerationY-this.pAccelerationY)),de<nt+tt&&ft.deviceShaken())},s.default);u.default=pe},{"../core/main":283}],301:[function(t,l,u){t("core-js/modules/es.array.for-each"),t("core-js/modules/es.string.repeat"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.string.repeat"),t("core-js/modules/web.dom-collections.for-each"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(t=t("../core/main"))&&t.__esModule?t:{default:t};s.default.prototype.isKeyPressed=!1,s.default.prototype.keyIsPressed=!1,s.default.prototype.key="",s.default.prototype.keyCode=0,s.default.prototype._onkeydown=function(p){var d;p.repeat?this._setProperty("isKeyRepeated",!0):(this._setProperty("isKeyRepeated",!1),this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",p.which),this._downKeys[p.which]=!0,this._setProperty("key",p.key||String.fromCharCode(p.which)||p.which),p.metaKey&&(this._metaKeys||(this._metaKeys=[]),this._metaKeys.push(p.which)),typeof(d=this._isGlobal?window:this).keyPressed!="function"||p.charCode||d.keyPressed(p)===!1&&p.preventDefault())},s.default.prototype._onkeyup=function(p){var d=this,h=(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1),this._setProperty("_lastKeyCodePressed",this._keyCode),this._downKeys[p.which]=!1,p.key==="Meta"&&this._metaKeys&&(this._metaKeys.forEach(function(N){d._downKeys[N]=!1}),this._metaKeys=[]),this._isGlobal?window:this);typeof h.keyReleased=="function"&&h.keyReleased(p)===!1&&p.preventDefault()},s.default.prototype._onkeypress=function(p){var d;p.which===this._lastKeyCodeTyped&&this.isKeyRepeated||(this._setProperty("_lastKeyCodeTyped",p.which),this._setProperty("key",p.key||String.fromCharCode(p.which)||p.which),typeof(d=this._isGlobal?window:this).keyTyped=="function"&&d.keyTyped(p)===!1&&p.preventDefault())},s.default.prototype._onblur=function(p){this._downKeys={}},s.default.prototype.keyIsDown=function(p){return s.default._validateParameters("keyIsDown",arguments),this._downKeys[p]||!1},s.default.prototype._areDownKeys=function(){for(var p in this._downKeys)if(this._downKeys.hasOwnProperty(p)&&this._downKeys[p]===!0)return!0;return!1},t=s.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.string.repeat":203,"core-js/modules/web.dom-collections.for-each":245}],302:[function(t,l,u){function s(Be){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(Be)}function p(Be){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(b){return s(b)}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":s(b)})(Be)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=(d=t("../core/main"))&&d.__esModule?d:{default:d},h=function(Be){if(Be&&Be.__esModule)return Be;if(Be===null||p(Be)!=="object"&&typeof Be!="function")return{default:Be};var b=N();if(b&&b.has(Be))return b.get(Be);var E,de={},pe=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(E in Be){var Ye;Object.prototype.hasOwnProperty.call(Be,E)&&((Ye=pe?Object.getOwnPropertyDescriptor(Be,E):null)&&(Ye.get||Ye.set)?Object.defineProperty(de,E,Ye):de[E]=Be[E])}return de.default=Be,b&&b.set(Be,de),de}(t("../core/constants"));function N(){var Be;return typeof WeakMap!="function"?null:(Be=new WeakMap,N=function(){return Be},Be)}d.default.prototype.movedX=0,d.default.prototype.movedY=0,d.default.prototype._hasMouseInteracted=!1,d.default.prototype.mouseX=0,d.default.prototype.mouseY=0,d.default.prototype.pmouseX=0,d.default.prototype.pmouseY=0,d.default.prototype.winMouseX=0,d.default.prototype.winMouseY=0,d.default.prototype.pwinMouseX=0,d.default.prototype.pwinMouseY=0,d.default.prototype.mouseButton=0,d.default.prototype.mouseIsPressed=!1,d.default.prototype._updateNextMouseCoords=function(Be){var b,E,de,pe;this._curElement!==null&&(!Be.touches||0<Be.touches.length)&&(b=this._curElement.elt,E=this.width,de=this.height,(Be=Be)&&!Be.clientX&&(Be.touches?Be=Be.touches[0]:Be.changedTouches&&(Be=Be.changedTouches[0])),pe=b.getBoundingClientRect(),E=b.scrollWidth/E||1,b=b.scrollHeight/de||1,de={x:(Be.clientX-pe.left)/E,y:(Be.clientY-pe.top)/b,winX:Be.clientX,winY:Be.clientY,id:Be.identifier},this._setProperty("mouseX",de.x),this._setProperty("mouseY",de.y),this._setProperty("winMouseX",de.winX),this._setProperty("winMouseY",de.winY),E=this.mouseX-this.pmouseX,pe=this.mouseY-this.pmouseY,this._setProperty("movedX",E),this._setProperty("movedY",pe)),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},d.default.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},d.default.prototype._setMouseButton=function(Be){Be.button===1?this._setProperty("mouseButton",h.CENTER):Be.button===2?this._setProperty("mouseButton",h.RIGHT):this._setProperty("mouseButton",h.LEFT)},d.default.prototype._onmousemove=function(Be){var b=this._isGlobal?window:this;this._updateNextMouseCoords(Be),this.mouseIsPressed?typeof b.mouseDragged=="function"?b.mouseDragged(Be)===!1&&Be.preventDefault():typeof b.touchMoved=="function"&&b.touchMoved(Be)===!1&&Be.preventDefault():typeof b.mouseMoved=="function"&&b.mouseMoved(Be)===!1&&Be.preventDefault()},d.default.prototype._onmousedown=function(Be){var b=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(Be),this._updateNextMouseCoords(Be),this.touchstart||(typeof b.mousePressed=="function"?b.mousePressed(Be)===!1&&Be.preventDefault():typeof b.touchStarted=="function"&&b.touchStarted(Be)===!1&&Be.preventDefault(),this.touchstart=!1)},d.default.prototype._onmouseup=function(Be){var b=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),this.touchend||(typeof b.mouseReleased=="function"?b.mouseReleased(Be)===!1&&Be.preventDefault():typeof b.touchEnded=="function"&&b.touchEnded(Be)===!1&&Be.preventDefault(),this.touchend=!1)},d.default.prototype._ondragend=d.default.prototype._onmouseup,d.default.prototype._ondragover=d.default.prototype._onmousemove,d.default.prototype._onclick=function(Be){var b=this._isGlobal?window:this;typeof b.mouseClicked=="function"&&b.mouseClicked(Be)===!1&&Be.preventDefault()},d.default.prototype._ondblclick=function(Be){var b=this._isGlobal?window:this;typeof b.doubleClicked=="function"&&b.doubleClicked(Be)===!1&&Be.preventDefault()},d.default.prototype._mouseWheelDeltaY=0,d.default.prototype._pmouseWheelDeltaY=0,d.default.prototype._onwheel=function(Be){var b=this._isGlobal?window:this;this._setProperty("_mouseWheelDeltaY",Be.deltaY),typeof b.mouseWheel=="function"&&(Be.delta=Be.deltaY,b.mouseWheel(Be)===!1&&Be.preventDefault())},d.default.prototype.requestPointerLock=function(){var Be=this._curElement.elt;return Be.requestPointerLock=Be.requestPointerLock||Be.mozRequestPointerLock,Be.requestPointerLock?(Be.requestPointerLock(),!0):(console.log("requestPointerLock is not implemented in this browser"),!1)},d.default.prototype.exitPointerLock=function(){document.exitPointerLock()},t=d.default,u.default=t},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],303:[function(t,l,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.touches=[],t.default.prototype._updateTouchCoords=function(s){if(this._curElement!==null){for(var p=[],d=0;d<s.touches.length;d++)p[d]=function(Ye,pe,me,b){var E=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,de=Ye.getBoundingClientRect(),pe=Ye.scrollWidth/pe||1,Ye=Ye.scrollHeight/me||1,me=b.touches[E]||b.changedTouches[E];return{x:(me.clientX-de.left)/pe,y:(me.clientY-de.top)/Ye,winX:me.clientX,winY:me.clientY,id:me.identifier}}(this._curElement.elt,this.width,this.height,s,d);this._setProperty("touches",p)}},t.default.prototype._ontouchstart=function(s){var p=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(s),this._updateNextMouseCoords(s),this._updateMouseCoords(),typeof p.touchStarted=="function"&&(p.touchStarted(s)===!1&&s.preventDefault(),this.touchstart=!0)},t.default.prototype._ontouchmove=function(s){var p=this._isGlobal?window:this;this._updateTouchCoords(s),this._updateNextMouseCoords(s),typeof p.touchMoved=="function"?p.touchMoved(s)===!1&&s.preventDefault():typeof p.mouseDragged=="function"&&p.mouseDragged(s)===!1&&s.preventDefault()},t.default.prototype._ontouchend=function(s){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(s),this._updateNextMouseCoords(s);var p=this._isGlobal?window:this;typeof p.touchEnded=="function"&&(p.touchEnded(s)===!1&&s.preventDefault(),this.touchend=!0)},t=t.default,u.default=t},{"../core/main":283}],304:[function(t,l,u){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.int32-array"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s,p,d,h,N={_toPixels:function(Be){var b,E;return Be instanceof ImageData?Be.data:Be.getContext("2d")?Be.getContext("2d").getImageData(0,0,Be.width,Be.height).data:Be.getContext("webgl")?(E=(b=Be.getContext("webgl")).drawingBufferWidth*b.drawingBufferHeight*4,E=new Uint8Array(E),b.readPixels(0,0,Be.width,Be.height,b.RGBA,b.UNSIGNED_BYTE,E),E):void 0},_getARGB:function(Be,b){return b*=4,Be[3+b]<<24&4278190080|Be[b]<<16&16711680|Be[1+b]<<8&65280|255&Be[2+b]},_setPixels:function(Be,b){for(var E,de=0,pe=Be.length;de<pe;de++)Be[0+(E=4*de)]=(16711680&b[de])>>>16,Be[1+E]=(65280&b[de])>>>8,Be[2+E]=255&b[de],Be[3+E]=(4278190080&b[de])>>>24},_toImageData:function(Be){return Be instanceof ImageData?Be:Be.getContext("2d").getImageData(0,0,Be.width,Be.height)},_createImageData:function(Be,b){return N._tmpCanvas=document.createElement("canvas"),N._tmpCtx=N._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(Be,b)},apply:function(Be,Ye,E){var de=Be.getContext("2d"),pe=de.getImageData(0,0,Be.width,Be.height),Ye=Ye(pe,E);Ye instanceof ImageData?de.putImageData(Ye,0,0,0,0,Be.width,Be.height):de.putImageData(pe,0,0,0,0,Be.width,Be.height)},threshold:function(Be){for(var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:.5,E=N._toPixels(Be),de=Math.floor(255*b),pe=0;pe<E.length;pe+=4){var Ye=void 0,Ye=de<=.2126*E[pe]+.7152*E[pe+1]+.0722*E[pe+2]?255:0;E[pe]=E[pe+1]=E[pe+2]=Ye}},gray:function(Be){for(var b=N._toPixels(Be),E=0;E<b.length;E+=4){var de=b[E],pe=b[E+1],Ye=b[E+2];b[E]=b[E+1]=b[E+2]=.2126*de+.7152*pe+.0722*Ye}},opaque:function(Be){for(var b=N._toPixels(Be),E=0;E<b.length;E+=4)b[E+3]=255;return b},invert:function(Be){for(var b=N._toPixels(Be),E=0;E<b.length;E+=4)b[E]=255-b[E],b[E+1]=255-b[E+1],b[E+2]=255-b[E+2]},posterize:function(Be){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:4,E=N._toPixels(Be);if(b<2||255<b)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var de=b-1,pe=0;pe<E.length;pe+=4){var Ye=E[pe],me=E[pe+1],Le=E[pe+2];E[pe]=255*(Ye*b>>8)/de,E[pe+1]=255*(me*b>>8)/de,E[pe+2]=255*(Le*b>>8)/de}},dilate:function(Be){for(var b,E,de,pe,Ye,me,Le,nt,tt,ft=N._toPixels(Be),yt=0,gt=ft.length?ft.length/4:0,mt=new Int32Array(gt);yt<gt;)for(E=(b=yt)+Be.width;yt<E;)pe=de=N._getARGB(ft,yt),(tt=yt-1)<b&&(tt=yt),E<=(nt=yt+1)&&(nt=yt),(Ye=yt-Be.width)<0&&(Ye=0),gt<=(me=yt+Be.width)&&(me=yt),Ye=N._getARGB(ft,Ye),tt=N._getARGB(ft,tt),me=N._getARGB(ft,me),(pe=77*(pe>>16&255)+151*(pe>>8&255)+28*(255&pe))<(Le=77*(tt>>16&255)+151*(tt>>8&255)+28*(255&tt))&&(de=tt,pe=Le),pe<(Le=77*((tt=N._getARGB(ft,nt))>>16&255)+151*(tt>>8&255)+28*(255&tt))&&(de=tt,pe=Le),pe<(nt=77*(Ye>>16&255)+151*(Ye>>8&255)+28*(255&Ye))&&(de=Ye,pe=nt),pe<(tt=77*(me>>16&255)+151*(me>>8&255)+28*(255&me))&&(de=me,pe=tt),mt[yt++]=de;N._setPixels(ft,mt)},erode:function(Be){for(var b,E,de,pe,Ye,me,Le,nt,tt,ft=N._toPixels(Be),yt=0,gt=ft.length?ft.length/4:0,mt=new Int32Array(gt);yt<gt;)for(E=(b=yt)+Be.width;yt<E;)pe=de=N._getARGB(ft,yt),(tt=yt-1)<b&&(tt=yt),E<=(nt=yt+1)&&(nt=yt),(Ye=yt-Be.width)<0&&(Ye=0),gt<=(me=yt+Be.width)&&(me=yt),Ye=N._getARGB(ft,Ye),tt=N._getARGB(ft,tt),me=N._getARGB(ft,me),(Le=77*(tt>>16&255)+151*(tt>>8&255)+28*(255&tt))<(pe=77*(pe>>16&255)+151*(pe>>8&255)+28*(255&pe))&&(de=tt,pe=Le),(Le=77*((tt=N._getARGB(ft,nt))>>16&255)+151*(tt>>8&255)+28*(255&tt))<pe&&(de=tt,pe=Le),(nt=77*(Ye>>16&255)+151*(Ye>>8&255)+28*(255&Ye))<pe&&(de=Ye,pe=nt),(tt=77*(me>>16&255)+151*(me>>8&255)+28*(255&me))<pe&&(de=me,pe=tt),mt[yt++]=de;N._setPixels(ft,mt)},blur:function(Be,b){for(var E,de,pe,Ye,me,Le,nt,tt,ft,yt,gt=N._toPixels(Be),mt=Be.width,wt=Be.height,St=mt*wt,bt=new Int32Array(St),Ct=0;Ct<St;Ct++)bt[Ct]=N._getARGB(gt,Ct);var Et,It,Dt,Pt,qt,Ht,Gt,Ut,Yt=new Int32Array(St),Zt=new Int32Array(St),vt=new Int32Array(St),Rt=new Int32Array(St),Lt=0,Vt=3.5*b|0;if(s!==(Vt=Vt<1?1:Vt<248?Vt:248)){p=1+(s=Vt)<<1,d=new Int32Array(p),h=new Array(p);for(var Jt=0;Jt<p;Jt++)h[Jt]=new Int32Array(256);for(var er=1,ur=Vt-1;er<Vt;er++){d[Vt+er]=d[ur]=Ht=ur*ur,Gt=h[Vt+er],Ut=h[ur--];for(var yr=0;yr<256;yr++)Gt[yr]=Ut[yr]=Ht*yr}qt=d[Vt]=Vt*Vt,Gt=h[Vt];for(var Qt=0;Qt<256;Qt++)Gt[Qt]=qt*Qt}for(It=0;It<wt;It++){for(Et=0;Et<mt;Et++){if(Ye=pe=de=me=E=0,(Le=Et-s)<0)yt=-Le,Le=0;else{if(mt<=Le)break;yt=0}for(Dt=yt;Dt<p&&!(mt<=Le);Dt++){var nr=bt[Le+Lt];Pt=h[Dt],me+=Pt[(-16777216&nr)>>>24],de+=Pt[(16711680&nr)>>16],pe+=Pt[(65280&nr)>>8],Ye+=Pt[255&nr],E+=d[Dt],Le++}Yt[nt=Lt+Et]=me/E,Zt[nt]=de/E,vt[nt]=pe/E,Rt[nt]=Ye/E}Lt+=mt}for(ft=(tt=-s)*mt,It=Lt=0;It<wt;It++){for(Et=0;Et<mt;Et++){if(Ye=pe=de=me=E=0,tt<0)yt=nt=-tt,Le=Et;else{if(wt<=tt)break;yt=0,nt=tt,Le=Et+ft}for(Dt=yt;Dt<p&&!(wt<=nt);Dt++)Pt=h[Dt],me+=Pt[Yt[Le]],de+=Pt[Zt[Le]],pe+=Pt[vt[Le]],Ye+=Pt[Rt[Le]],E+=d[Dt],nt++,Le+=mt;bt[Et+Lt]=me/E<<24|de/E<<16|pe/E<<8|Ye/E}Lt+=mt,ft+=mt,tt++}N._setPixels(gt,bt)}};u.default=N},{"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.int32-array":225,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242}],305:[function(t,l,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=d(t("../core/main")),p=d(t("omggif"));function d(N){return N&&N.__esModule?N:{default:N}}function h(N){return function(Be){if(Array.isArray(Be)){for(var b=0,E=new Array(Be.length);b<Be.length;b++)E[b]=Be[b];return E}}(N)||function(Be){if(Symbol.iterator in Object(Be)||Object.prototype.toString.call(Be)==="[object Arguments]")return Array.from(Be)}(N)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}s.default.prototype.createImage=function(N,Be){return s.default._validateParameters("createImage",arguments),new s.default.Image(N,Be)},s.default.prototype.saveCanvas=function(){for(var N,Be,b,E,de,pe,Ye=arguments.length,me=new Array(Ye),Le=0;Le<Ye;Le++)me[Le]=arguments[Le];switch(s.default._validateParameters("saveCanvas",me),me[0]instanceof HTMLCanvasElement?(N=me[0],me.shift()):me[0]instanceof s.default.Element?(N=me[0].elt,me.shift()):me[0]instanceof s.default.Framebuffer?(E=me[0],(de=this.createGraphics(E.width,E.height)).pixelDensity(pixelDensity()),E.loadPixels(),de.loadPixels(),de.pixels.set(E.pixels),de.updatePixels(),N=de.elt,me.shift()):N=this._curElement&&this._curElement.elt,1<=me.length&&(Be=me[0]),b=(b=2<=me.length?me[1]:b)||s.default.prototype._checkFileExtension(Be,b)[1]||"png"){default:pe="image/png";break;case"webp":pe="image/webp";break;case"jpeg":case"jpg":pe="image/jpeg"}N.toBlob(function(nt){s.default.prototype.downloadFile(nt,Be,b),de&&de.remove()},pe)},s.default.prototype.encodeAndDownloadGif=function(N,Be){for(var b=N.gifProperties,E=b.loopLimit,de=(E===1?E=null:E===null&&(E=0),new Uint8Array(N.width*N.height*b.numFrames)),pe=[],Ye={},me=0;me<b.numFrames;me++){for(var Le=new Set,nt=b.frames[me].image.data,tt=nt.length,ft=new Uint32Array(N.width*N.height),yt=0,gt=0;yt<tt;yt+=4,gt++){var mt=nt[yt+0]<<16|nt[yt+1]<<8|nt[yt+2]<<0;Le.add(mt),ft[gt]=mt}var wt=h(Le).sort().toString();Ye[wt]===void 0?Ye[wt]={freq:1,frames:[me]}:(Ye[wt].freq+=1,Ye[wt].frames.push(me)),pe.push(ft)}for(var Ct=[],St=Object.keys(Ye).sort(function(vt,Rt){return Ye[Rt].freq-Ye[vt].freq}),bt=St[0].split(",").map(function(vt){return parseInt(vt)}),Ct=Ct.concat(Ye[bt].frames),Et=new Set(bt),It=1;It<St.length;It++){var Dt=St[It].split(",").map(function(vt){return parseInt(vt)}).filter(function(vt){return!Et.has(vt)});if(bt.length+Dt.length<=256){for(var Pt=0;Pt<Dt.length;Pt++)bt.push(Dt[Pt]),Et.add(Dt[Pt]);Ct=Ct.concat(Ye[St[It]].frames)}}Ct=new Set(Ct);for(var qt={},Ht=0;Ht<bt.length;Ht++)qt[bt[Ht]]||(qt[bt[Ht]]=Ht);for(var Gt=1;Gt<bt.length;)Gt<<=1;bt.length=Gt;for(var E={loop:E,palette:new Uint32Array(bt)},Ut=new p.default.GifWriter(de,N.width,N.height,E),Yt={},Zt=0;Zt<b.numFrames;Zt++)(function(Rt){var Lt=!Ct.has(Rt),Vt=Lt?[]:bt,Jt=new Uint8Array(N.width*N.height),er={},ur=new Set,yr=(pe[Rt].forEach(function(ir,br){Lt?(er[ir]===void 0&&(er[ir]=Vt.length,Vt.push(ir)),Jt[br]=er[ir]):Jt[br]=qt[ir],0<Rt&&pe[Rt-1][br]!==ir&&ur.add(ir)}),{}),Qt=Vt.filter(function(ir){return!ur.has(ir)});if(0<Qt.length){var Qt=Qt[0],nr=(Lt?er:qt)[Qt];if(0<Rt){for(var or=0;or<pe[Rt].length;or++)pe[Rt-1][or]===pe[Rt][or]&&(Jt[or]=nr);yr.transparent=nr,Yt.frameOpts.disposal=1}}if(yr.delay=b.frames[Rt].delay/10,Lt){for(var Wt=1;Wt<Vt.length;)Wt<<=1;Vt.length=Wt,yr.palette=new Uint32Array(Vt)}0<Rt&&Ut.addFrame(0,0,N.width,N.height,Yt.pixelPaletteIndex,Yt.frameOpts),Yt={pixelPaletteIndex:Jt,frameOpts:yr}})(Zt);Yt.frameOpts.disposal=1,Ut.addFrame(0,0,N.width,N.height,Yt.pixelPaletteIndex,Yt.frameOpts),E=new Blob([de.slice(0,Ut.end())],{type:"image/gif"}),s.default.prototype.downloadFile(E,Be,"gif")},s.default.prototype.saveFrames=function(N,Be,b,pe,de){s.default._validateParameters("saveFrames",arguments),b=s.default.prototype.constrain(b=b||3,0,15),b*=1e3;var pe=s.default.prototype.constrain(pe||15,0,22),Ye=0,me=s.default.prototype._makeFrame,Le=this._curElement.elt,nt=[],tt=setInterval(function(){nt.push(me(N+Ye,Be,Le)),Ye++},1e3/pe);setTimeout(function(){if(clearInterval(tt),de)de(nt);else for(var ft=0,yt=nt;ft<yt.length;ft++){var gt=yt[ft];s.default.prototype.downloadFile(gt.imageData,gt.filename,gt.ext)}nt=[]},.01+b)},s.default.prototype._makeFrame=function(N,Be,de){var E,de=this?this._curElement.elt:de;if(Be)switch(Be.toLowerCase()){case"png":E="image/png";break;case"jpeg":case"jpg":E="image/jpeg";break;default:E="image/png"}else Be="png",E="image/png";var de=(de=de.toDataURL(E)).replace(E,"image/octet-stream"),pe={};return pe.imageData=de,pe.filename=N,pe.ext=Be,pe},t=s.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246,omggif:256}],306:[function(t,l,u){function s(Le){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(nt){return typeof nt}:function(nt){return nt&&typeof Symbol=="function"&&nt.constructor===Symbol&&nt!==Symbol.prototype?"symbol":typeof nt})(Le)}function p(Le){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(nt){return s(nt)}:function(nt){return nt&&typeof Symbol=="function"&&nt.constructor===Symbol&&nt!==Symbol.prototype?"symbol":s(nt)})(Le)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.copy-within"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.uint8-clamped-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t("regenerator-runtime/runtime");var d=de(t("../core/main")),h=de(t("../core/helpers")),N=function(Le){if(Le&&Le.__esModule)return Le;if(Le===null||p(Le)!=="object"&&typeof Le!="function")return{default:Le};var nt=E();if(nt&&nt.has(Le))return nt.get(Le);var tt,ft={},yt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(tt in Le){var gt;Object.prototype.hasOwnProperty.call(Le,tt)&&((gt=yt?Object.getOwnPropertyDescriptor(Le,tt):null)&&(gt.get||gt.set)?Object.defineProperty(ft,tt,gt):ft[tt]=Le[tt])}return ft.default=Le,nt&&nt.set(Le,ft),ft}(t("../core/constants")),Be=de(t("omggif")),b=t("gifenc");function E(){var Le;return typeof WeakMap!="function"?null:(Le=new WeakMap,E=function(){return Le},Le)}function de(Le){return Le&&Le.__esModule?Le:{default:Le}}function pe(Le,nt,tt,ft,yt,gt,mt){try{var wt=Le[gt](mt),St=wt.value}catch(bt){return void tt(bt)}wt.done?nt(St):Promise.resolve(St).then(ft,yt)}function Ye(Le,nt,tt,ft,yt,gt,mt,wt,St,bt,Ct){var Et,It,Dt,Pt,qt,Ht,Gt,Ut,Yt;return Le===N.COVER&&(Et=nt,Dt=tt,Gt=gt,Ut=mt,Ht=wt,Yt=St,It=bt,Pt=Ct,qt=Math.max(Gt/It,Ut/Pt),Gt/=qt,Ut/=qt,qt=Ht,Ht=Yt,Et===N.CENTER?qt+=(It-Gt)/2:Et===N.RIGHT&&(qt+=It-Gt),Dt===N.CENTER?Ht+=(Pt-Ut)/2:Dt===N.BOTTOM&&(Ht+=Pt-Ut),wt=(Yt={x:qt,y:Ht,w:Gt,h:Ut}).x,St=Yt.y,bt=Yt.w,Ct=Yt.h),Le===N.CONTAIN&&(Et=nt,It=tt,Dt=ft,Pt=yt,qt=gt,Ht=mt,Gt=bt,Ut=Ct,Yt=Math.max(Gt/qt,Ut/Ht),Gt/=Yt,Ut/=Yt,Yt=Dt,Dt=Pt,Et===N.CENTER?Yt+=(qt-Gt)/2:Et===N.RIGHT&&(Yt+=qt-Gt),It===N.CENTER?Dt+=(Ht-Ut)/2:It===N.BOTTOM&&(Dt+=Ht-Ut),ft=(Le={x:Yt,y:Dt,w:Gt,h:Ut}).x,yt=Le.y,gt=Le.w,mt=Le.h),{sx:wt,sy:St,sw:bt,sh:Ct,dx:ft,dy:yt,dw:gt,dh:mt}}function me(Le,nt){return 0<Le&&Le<nt?Le:nt}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),d.default.prototype.loadImage=function(Le,nt,tt){d.default._validateParameters("loadImage",arguments);var ft=new d.default.Image(1,1,this),yt=this,gt=new Request(Le,{method:"GET",mode:"cors"});return fetch(Le,gt).then(function(mt){var wt,St=mt.headers.get("content-type");St===null&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),St&&St.includes("image/gif")?mt.arrayBuffer().then(function(bt){if(bt){for(var bt=new Uint8Array(bt),Ct=ft,Et=nt,It=tt,Dt=(function(Lt){yt._decrementPreload()}).bind(yt),Pt=new Be.default.GifReader(bt),qt=(Ct.width=Ct.canvas.width=Pt.width,Ct.height=Ct.canvas.height=Pt.height,[]),Ht=Pt.numFrames(),Gt=new Uint8ClampedArray(Ct.width*Ct.height*4),Ut=0;Ut<Ht;Ut++){var Yt=Pt.frameInfo(Ut),Zt=Ct.drawingContext.getImageData(0,0,Ct.width,Ct.height),vt=(Gt=Zt.data.slice(),function(Lt,Vt){try{Vt.decodeAndBlitFrameRGBA(Lt,Gt)}catch(Jt){d.default._friendlyFileLoadError(8,Ct.src),typeof It=="function"?It(Jt):console.error(Jt)}}(Ut,Pt),new ImageData(Gt,Ct.width,Ct.height)),vt=(Ct.drawingContext.putImageData(vt,0,0),Yt.delay);vt===0&&(vt=10),qt.push({image:Ct.drawingContext.getImageData(0,0,Ct.width,Ct.height),delay:10*vt}),Yt.disposal===2?Ct.drawingContext.clearRect(Yt.x,Yt.y,Yt.width,Yt.height):Yt.disposal===3&&Ct.drawingContext.putImageData(Zt,0,0,Yt.x,Yt.y,Yt.width,Yt.height)}(bt=Pt.loopCount())===null?bt=1:bt===0&&(bt=null),Ct.drawingContext.putImageData(qt[0].image,0,0),1<qt.length&&(Ct.gifProperties={displayIndex:0,loopLimit:bt,loopCount:0,frames:qt,numFrames:Ht,playing:!0,timeDisplayed:0,lastChangeTime:0}),typeof Et=="function"&&Et(Ct),Dt()}},function(bt){typeof tt=="function"?(tt(bt),yt._decrementPreload()):console.error(bt)}):((wt=new Image).onload=function(){ft.width=ft.canvas.width=wt.width,ft.height=ft.canvas.height=wt.height,ft.drawingContext.drawImage(wt,0,0),ft.modified=!0,typeof nt=="function"&&nt(ft),yt._decrementPreload()},wt.onerror=function(bt){d.default._friendlyFileLoadError(0,wt.src),typeof tt=="function"?(tt(bt),yt._decrementPreload()):console.error(bt)},Le.indexOf("data:image/")!==0&&(wt.crossOrigin="Anonymous"),wt.src=Le),ft.modified=!0}).catch(function(mt){d.default._friendlyFileLoadError(0,Le),typeof tt=="function"?(tt(mt),yt._decrementPreload()):console.error(mt)}),ft},d.default.prototype.saveGif=function(){Le=regeneratorRuntime.mark(function tt(ft,yt){var gt,mt,wt,St,bt,Ct,Et,It,Dt,Pt,qt,Ht,Gt,Ut,Yt,Zt,vt,Rt,Lt,Vt,Jt,er,ur,yr,Qt,nr,or=arguments;return regeneratorRuntime.wrap(function(Wt){for(;;)switch(Wt.prev=Wt.next){case 0:if(gt=2<or.length&&or[2]!==void 0?or[2]:{delay:0,units:"seconds",silent:!1,notificationDuration:0,notificationID:"progressBar"},typeof ft!="string")throw TypeError("fileName parameter must be a string");Wt.next=3;break;case 3:if(typeof yt!="number")throw TypeError("Duration parameter must be a number");Wt.next=5;break;case 5:if(mt=gt&&gt.delay||0,wt=gt&&gt.units||"seconds",St=gt&&gt.silent||!1,bt=gt&&gt.notificationDuration||0,Ct=gt&&gt.notificationID||"progressBar",typeof mt!="number")throw TypeError("Delay parameter must be a number");Wt.next=12;break;case 12:if(wt!=="seconds"&&wt!=="frames")throw TypeError('Units parameter must be either "frames" or "seconds"');Wt.next=14;break;case 14:if(typeof St!="boolean")throw TypeError("Silent parameter must be a boolean");Wt.next=16;break;case 16:if(typeof bt!="number")throw TypeError("Notification duration parameter must be a number");Wt.next=18;break;case 18:if(typeof Ct!="string")throw TypeError("Notification ID parameter must be a string");Wt.next=20;break;case 20:return this._recording=!0,Pt=this._targetFrameRate,Et=(Et=1/(Pt=Pt!==1/0&&Pt!==void 0&&Pt!==0?Pt:60)*1e3)<20?20:Et,Dt=(It=wt==="seconds"?yt*Pt:yt)+(Pt=wt==="seconds"?mt*Pt:mt),Pt=Pt,this.frameCount=Pt,qt=this._pixelDensity,this.pixelDensity(1),Ht=[],document.getElementById(Ct)!==null&&document.getElementById(Ct).remove(),St||((Gt=this.createP("")).id(Ct),Gt.style("font-size","16px"),Gt.style("font-family","Montserrat"),Gt.style("background-color","#ffffffa0"),Gt.style("padding","8px"),Gt.style("border-radius","10px"),Gt.position(0,0)),this._renderer instanceof d.default.RendererGL&&(Yt=this.drawingContext,Ut=new Uint8Array(Yt.drawingBufferWidth*Yt.drawingBufferHeight*4)),this.noLoop(),Wt.next=39,Promise.resolve();case 39:if(Pt<Dt)return this.redraw(),yr=void 0,yr=this._renderer instanceof d.default.RendererGL?(Ut=new Uint8Array(Yt.drawingBufferWidth*Yt.drawingBufferHeight*4),Yt.readPixels(0,0,Yt.drawingBufferWidth,Yt.drawingBufferHeight,Yt.RGBA,Yt.UNSIGNED_BYTE,Ut),function(ir,br,Sr){for(var _r=parseInt(Sr/2),sr=4*br,jr=new Uint8Array(4*br),Nr=0;Nr<_r;++Nr){var kr=Nr*sr,qr=(Sr-Nr-1)*sr;jr.set(ir.subarray(kr,kr+sr)),ir.copyWithin(kr,qr,qr+sr),ir.set(jr,qr)}return ir}(Ut,this.width,this.height)):this.drawingContext.getImageData(0,0,this.width,this.height).data,Ht.push(yr),Pt++,St||Gt.html("Saved frame <b>"+Ht.length.toString()+"</b> out of "+It.toString()),Wt.next=48,new Promise(function(ir){return setTimeout(ir,0)});Wt.next=50;break;case 48:Wt.next=39;break;case 50:St||Gt.html("Frames processed, generating color palette..."),this.loop(),this.pixelDensity(qt),Zt=(0,b.GIFEncoder)(),vt=function(ir){for(var br=new Uint8Array(ir.length*ir[0].length),Sr=0;Sr<ir.length;Sr++)br.set(ir[Sr],Sr*ir[0].length);var _r=(0,b.quantize)(br,256,{format:"rgba4444",oneBitAlpha:!0});return _r.length===256?_r[_r.length-1]=[255*Math.random(),255*Math.random(),255*Math.random(),0]:_r.push([255*Math.random(),255*Math.random(),255*Math.random(),0]),_r}(Ht),Rt={},Lt=function(ir){for(var br=ir.length/4,Sr=new Uint8Array(br),_r=0;_r<br;_r++){var sr=ir[4*_r]<<24|ir[4*_r+1]<<16|ir[4*_r+2]<<8|ir[4*_r+3];Rt[sr]===void 0&&(Rt[sr]=(0,b.nearestColorIndex)(vt,ir.slice(4*_r,4*(_r+1)))),Sr[_r]=Rt[sr]}return Sr},Vt=vt.length-1,Jt=[],er=0;case 60:if(!(er<Ht.length)){Wt.next=71;break}if(ur=Lt(Ht[er]),yr=ur.slice(),er===0)Zt.writeFrame(ur,this.width,this.height,{palette:vt,delay:Et,dispose:1});else{for(Qt=0;Qt<ur.length;Qt++)ur[Qt]===Jt[Qt]&&(ur[Qt]=Vt);Zt.writeFrame(ur,this.width,this.height,{delay:Et,transparent:!0,transparentIndex:Vt,dispose:1})}return Jt=yr,St||Gt.html("Rendered frame <b>"+er.toString()+"</b> out of "+It.toString()),Wt.next=68,new Promise(function(ir){return setTimeout(ir,0)});case 68:er++,Wt.next=60;break;case 71:Zt.finish(),nr=Zt.bytesView(),nr=new Blob([nr],{type:"image/gif"}),Ht=[],this._recording=!1,this.loop(),St||(Gt.html("Done. Downloading your gif!"),0<bt&&setTimeout(function(){return Gt.remove()},1e3*bt)),d.default.prototype.downloadFile(nr,ft,"gif");case 80:case"end":return Wt.stop()}},tt,this)});var Le,nt=function(){var tt=this,ft=arguments;return new Promise(function(yt,gt){var mt=Le.apply(tt,ft);function wt(bt){pe(mt,yt,gt,wt,St,"next",bt)}function St(bt){pe(mt,yt,gt,wt,St,"throw",bt)}wt(void 0)})};return function(tt,ft){return nt.apply(this,arguments)}}(),d.default.prototype.image=function(Le,nt,tt,ft,Pt,qt,Ht,Gt,Yt,bt,Ct,Et){d.default._validateParameters("image",arguments);var Ut=Le.width,It=Le.height,Dt=(Et=Et||N.CENTER,Ct=Ct||N.CENTER,Le.elt&&(Ut=Ut!==void 0?Ut:Le.elt.width,It=It!==void 0?It:Le.elt.height),Le.elt&&Le.elt.videoWidth&&!Le.canvas&&(Ut=Ut!==void 0?Ut:Le.elt.videoWidth,It=It!==void 0?It:Le.elt.videoHeight),ft||Ut),Pt=Pt||It,qt=qt||0,Ht=Ht||0,Gt=me(Gt!==void 0?Gt:Ut,Ut),Ut=me(Yt!==void 0?Yt:It,It),Yt=1;Le.elt&&!Le.canvas&&Le.elt.style.width&&(Yt=Le.elt.videoWidth&&!ft?Le.elt.videoWidth:Le.elt.width,Yt/=parseInt(Le.elt.style.width,10)),qt*=Yt,Ht*=Yt,Ut*=Yt,Gt*=Yt,It=Ye(bt,Ct,Et,(It=h.default.modeAdjust(nt,tt,Dt,Pt,this._renderer._imageMode)).x,It.y,It.w,It.h,qt,Ht,Gt,Ut),this._renderer.image(Le,It.sx,It.sy,It.sw,It.sh,It.dx,It.dy,It.dw,It.dh)},d.default.prototype.tint=function(){for(var Le=arguments.length,nt=new Array(Le),tt=0;tt<Le;tt++)nt[tt]=arguments[tt];d.default._validateParameters("tint",nt);var ft=this.color.apply(this,nt);this._renderer._tint=ft.levels},d.default.prototype.noTint=function(){this._renderer._tint=null},d.default.prototype._getTintedImageCanvas=d.default.Renderer2D.prototype._getTintedImageCanvas,d.default.prototype.imageMode=function(Le){d.default._validateParameters("imageMode",arguments),Le!==N.CORNER&&Le!==N.CORNERS&&Le!==N.CENTER||(this._renderer._imageMode=Le)},t=d.default,u.default=t},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/helpers":279,"../core/main":283,"core-js/modules/es.array.copy-within":154,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.typed-array.uint8-clamped-array":243,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,gifenc:253,omggif:256,"regenerator-runtime/runtime":260}],307:[function(t,l,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=d(t("../core/main")),p=d(t("./filters"));function d(N){return N&&N.__esModule?N:{default:N}}function h(N,Be){for(var b=0;b<Be.length;b++){var E=Be[b];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(N,E.key,E)}}s.default.Image=function(){function N(E,de){if(!(this instanceof N))throw new TypeError("Cannot call a class as a function");this.width=E,this.height=de,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),(this._pixelsState=this)._pixelDensity=1,this.gifProperties=null,this._modified=!1,this.pixels=[]}var Be,b;return Be=N,(b=[{key:"pixelDensity",value:function(E){return E!==void 0?(E<=0&&(s.default._friendlyParamError({type:"INVALID_VALUE",format:{types:["Number"]},position:1},"pixelDensity"),E=1),this._pixelDensity=E,this.width/=E,this.height/=E,this):this._pixelDensity}},{key:"_animateGif",value:function(Ye){var de,pe=this.gifProperties,Ye=Ye._lastRealFrameTime||window.performance.now();pe.lastChangeTime===0&&(pe.lastChangeTime=Ye),pe.playing&&(pe.timeDisplayed=Ye-pe.lastChangeTime,de=pe.frames[pe.displayIndex].delay,pe.timeDisplayed>=de&&(de=Math.floor(pe.timeDisplayed/de),pe.timeDisplayed=0,pe.lastChangeTime=Ye,pe.displayIndex+=de,pe.loopCount=Math.floor(pe.displayIndex/pe.numFrames),pe.loopLimit!==null&&pe.loopCount>=pe.loopLimit?pe.playing=!1:(Ye=pe.displayIndex%pe.numFrames,this.drawingContext.putImageData(pe.frames[Ye].image,0,0),pe.displayIndex=Ye,this.setModified(!0))))}},{key:"_setProperty",value:function(E,de){this[E]=de,this.setModified(!0)}},{key:"loadPixels",value:function(){s.default.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)}},{key:"updatePixels",value:function(E,de,pe,Ye){s.default.Renderer2D.prototype.updatePixels.call(this,E,de,pe,Ye),this.setModified(!0)}},{key:"get",value:function(E,de,pe,Ye){return s.default._validateParameters("p5.Image.get",arguments),s.default.Renderer2D.prototype.get.apply(this,arguments)}},{key:"_getPixel",value:function(){for(var E=arguments.length,de=new Array(E),pe=0;pe<E;pe++)de[pe]=arguments[pe];return s.default.Renderer2D.prototype._getPixel.apply(this,de)}},{key:"set",value:function(E,de,pe){s.default.Renderer2D.prototype.set.call(this,E,de,pe),this.setModified(!0)}},{key:"resize",value:function(E,de){E===0&&de===0?(E=this.canvas.width,de=this.canvas.height):E===0?E=this.canvas.width*de/this.canvas.height:de===0&&(de=this.canvas.height*E/this.canvas.width),E=Math.floor(E),de=Math.floor(de);var pe=document.createElement("canvas");if(pe.width=E,pe.height=de,this.gifProperties)for(var Ye=this.gifProperties,me=0;me<Ye.numFrames;me++){for(var Le=this.drawingContext.createImageData(E,de),nt=(mt=mt=gt=yt=ft=void 0,Ye.frames[me].image),tt=Le,ft=0,yt=0;yt<tt.height;yt++)for(var gt=0;gt<tt.width;gt++){var mt=Math.floor(gt*nt.width/tt.width),mt=4*(Math.floor(yt*nt.height/tt.height)*nt.width+mt);tt.data[ft++]=nt.data[mt++],tt.data[ft++]=nt.data[mt++],tt.data[ft++]=nt.data[mt++],tt.data[ft++]=nt.data[+mt]}Ye.frames[me].image=Le}pe.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,pe.width,pe.height),this.canvas.width=this.width=E,this.canvas.height=this.height=de,this.drawingContext.drawImage(pe,0,0,E,de,0,0,E,de),0<this.pixels.length&&this.loadPixels(),this.setModified(!0)}},{key:"copy",value:function(){for(var E=arguments.length,de=new Array(E),pe=0;pe<E;pe++)de[pe]=arguments[pe];s.default.prototype.copy.apply(this,de)}},{key:"mask",value:function(E){var de=this.drawingContext.globalCompositeOperation,pe=this._pixelDensity,Ye=1,me=[E=E===void 0?this:E,0,0,(Ye=E instanceof s.default.Renderer?E._pInst._pixelDensity:Ye)*E.width,Ye*E.height,0,0,pe*this.width,pe*this.height];if(this.drawingContext.globalCompositeOperation="destination-in",this.gifProperties){for(var Le=0;Le<this.gifProperties.frames.length;Le++)this.drawingContext.putImageData(this.gifProperties.frames[Le].image,0,0),this.copy.apply(this,me),this.gifProperties.frames[Le].image=this.drawingContext.getImageData(0,0,pe*this.width,pe*this.height);this.drawingContext.putImageData(this.gifProperties.frames[this.gifProperties.displayIndex].image,0,0)}else this.copy.apply(this,me);this.drawingContext.globalCompositeOperation=de,this.setModified(!0)}},{key:"filter",value:function(E,de){p.default.apply(this.canvas,p.default[E],de),this.setModified(!0)}},{key:"blend",value:function(){for(var E=arguments.length,de=new Array(E),pe=0;pe<E;pe++)de[pe]=arguments[pe];s.default._validateParameters("p5.Image.blend",arguments),s.default.prototype.blend.apply(this,de),this.setModified(!0)}},{key:"setModified",value:function(E){this._modified=E}},{key:"isModified",value:function(){return this._modified}},{key:"save",value:function(E,de){this.gifProperties?s.default.prototype.encodeAndDownloadGif(this,E):s.default.prototype.saveCanvas(this.canvas,E,de)}},{key:"reset",value:function(){var E;this.gifProperties&&((E=this.gifProperties).playing=!0,E.timeSinceStart=0,E.timeDisplayed=0,E.lastChangeTime=0,E.loopCount=0,E.displayIndex=0,this.drawingContext.putImageData(E.frames[0].image,0,0))}},{key:"getCurrentFrame",value:function(){var E;if(this.gifProperties)return(E=this.gifProperties).displayIndex%E.numFrames}},{key:"setFrame",value:function(E){var de;this.gifProperties&&(E<(de=this.gifProperties).numFrames&&0<=E?(de.timeDisplayed=0,de.lastChangeTime=0,de.displayIndex=E,this.drawingContext.putImageData(de.frames[E].image,0,0)):console.log("Cannot set GIF to a frame number that is higher than total number of frames or below zero."))}},{key:"numFrames",value:function(){if(this.gifProperties)return this.gifProperties.numFrames}},{key:"play",value:function(){this.gifProperties&&(this.gifProperties.playing=!0)}},{key:"pause",value:function(){this.gifProperties&&(this.gifProperties.playing=!1)}},{key:"delay",value:function(E,de){if(this.gifProperties){var pe=this.gifProperties;if(de<pe.numFrames&&0<=de)pe.frames[de].delay=E;else{var Ye=!0,de=!1,me=void 0;try{for(var Le,nt=pe.frames[Symbol.iterator]();!(Ye=(Le=nt.next()).done);Ye=!0)Le.value.delay=E}catch(ft){de=!0,me=ft}finally{try{Ye||nt.return==null||nt.return()}finally{if(de)throw me}}}}}}])&&h(Be.prototype,b),N}(),t=s.default.Image,u.default=t},{"../core/main":283,"./filters":304,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],308:[function(t,l,u){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.filter"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=d(t("../core/main")),p=d(t("./filters"));function d(h){return h&&h.__esModule?h:{default:h}}t("../color/p5.Color"),s.default.prototype.pixels=[],s.default.prototype.blend=function(){for(var h,N=arguments.length,Be=new Array(N),b=0;b<N;b++)Be[b]=arguments[b];s.default._validateParameters("blend",Be),this._renderer?(h=this._renderer).blend.apply(h,Be):s.default.Renderer2D.prototype.blend.apply(this,Be)},s.default.prototype.copy=function(){for(var h,N,Be,b,E,de,pe,Ye,me,Le=arguments.length,nt=new Array(Le),tt=0;tt<Le;tt++)nt[tt]=arguments[tt];if(s.default._validateParameters("copy",nt),nt.length===9)h=nt[0],N=nt[1],Be=nt[2],b=nt[3],E=nt[4],de=nt[5],pe=nt[6],Ye=nt[7],me=nt[8];else{if(nt.length!==8)throw new Error("Signature not supported");h=this,N=nt[0],Be=nt[1],b=nt[2],E=nt[3],de=nt[4],pe=nt[5],Ye=nt[6],me=nt[7]}s.default.prototype._copyHelper(this,h,N,Be,b,E,de,pe,Ye,me)},s.default.prototype._copyHelper=function(h,N,Be,b,E,de,pe,Ye,me,Le){var nt=N.canvas.width/N.width,tt=0,ft=0;N._renderer&&N._renderer.isP3D&&(tt=N.width/2,ft=N.height/2),h._renderer&&h._renderer.isP3D?(h.push(),h.resetMatrix(),h.noLights(),h.blendMode(h.BLEND),h.imageMode(h.CORNER),s.default.RendererGL.prototype.image.call(h._renderer,N,Be+tt,b+ft,E,de,pe,Ye,me,Le),h.pop()):h.drawingContext.drawImage(N.canvas,nt*(Be+tt),nt*(b+ft),nt*E,nt*de,pe,Ye,me,Le)},s.default.prototype.getFilterGraphicsLayer=function(){return this._renderer.getFilterGraphicsLayer()},s.default.prototype.filter=function(){for(var h=arguments.length,N=new Array(h),Be=0;Be<h;Be++)N[Be]=arguments[Be];s.default._validateParameters("filter",N);var pe=(function(){var Ye,me={shader:void 0,operation:void 0,value:void 0,useWebGL:!0};return(arguments.length<=0?void 0:arguments[0])instanceof s.default.Shader?me.shader=arguments.length<=0?void 0:arguments[0]:(me.operation=arguments.length<=0?void 0:arguments[0],1<arguments.length&&typeof(arguments.length<=1?void 0:arguments[1])=="number"&&(me.value=arguments.length<=1?void 0:arguments[1]),((Ye=arguments.length-1)<0||arguments.length<=Ye?void 0:arguments[Ye])===!1&&(me.useWebGL=!1)),me}).apply(void 0,N),b=pe.shader,E=pe.operation,de=pe.value,pe=pe.useWebGL;this._renderer.isP3D&&b?s.default.RendererGL.prototype.filter.call(this._renderer,b):pe||this._renderer.isP3D?(!pe&&this._renderer.isP3D&&console.warn("filter() with useWebGL=false is not supported in WEBGL"),this._renderer.isP3D?s.default.RendererGL.prototype.filter.call(this._renderer,E,de):((b=this.getFilterGraphicsLayer()).copy(this._renderer,0,0,this.width,this.height,-this.width/2,-this.height/2,this.width,this.height),this._renderer.clear(),this._renderer.resetMatrix(),b.filter.apply(b,N),this.copy(b._renderer,0,0,this.width,this.height,0,0,this.width,this.height),b.clear())):this.canvas!==void 0?p.default.apply(this.canvas,p.default[E],de):p.default.apply(this.elt,p.default[E],de)},s.default.prototype.get=function(h,N,Be,b){var E;return s.default._validateParameters("get",arguments),(E=this._renderer).get.apply(E,arguments)},s.default.prototype.loadPixels=function(){for(var h=arguments.length,N=new Array(h),Be=0;Be<h;Be++)N[Be]=arguments[Be];s.default._validateParameters("loadPixels",N),this._renderer.loadPixels()},s.default.prototype.set=function(h,N,Be){this._renderer.set(h,N,Be)},s.default.prototype.updatePixels=function(h,N,Be,b){s.default._validateParameters("updatePixels",arguments),this.pixels.length!==0&&this._renderer.updatePixels(h,N,Be,b)},t=s.default,u.default=t},{"../color/p5.Color":270,"../core/main":283,"./filters":304,"core-js/modules/es.array.filter":157}],309:[function(t,l,u){function s(de){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pe){return typeof pe}:function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe})(de)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/web.url"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var p=N(t("../core/main")),d=(t("whatwg-fetch"),t("es6-promise/auto"),N(t("fetch-jsonp"))),h=N(t("file-saver"));function N(de){return de&&de.__esModule?de:{default:de}}function Be(de){return(Be=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(pe){return s(pe)}:function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":s(pe)})(de)}function b(de){return de.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function E(de,pe){pe&&pe!==!0&&pe!=="true"||(pe="");var Ye="";return(de=de||"untitled")&&de.includes(".")&&(Ye=de.split(".").pop()),pe&&Ye!==pe&&(Ye=pe,de="".concat(de,".").concat(Ye)),[de,Ye]}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),p.default.prototype.loadJSON=function(){for(var de=arguments.length,pe=new Array(de),Ye=0;Ye<de;Ye++)pe[Ye]=arguments[Ye];p.default._validateParameters("loadJSON",pe);for(var me,Le,nt,tt=pe[0],ft={},yt="json",gt=1;gt<pe.length;gt++){var mt=pe[gt];typeof mt=="string"?mt!=="jsonp"&&mt!=="json"||(yt=mt):typeof mt=="function"?me?Le=mt:me=mt:Be(mt)==="object"&&(mt.hasOwnProperty("jsonpCallback")||mt.hasOwnProperty("jsonpCallbackFunction"))&&(yt="jsonp",nt=mt)}var wt=this;return this.httpDo(tt,"GET",nt,yt,function(St){for(var bt in St)ft[bt]=St[bt];me!==void 0&&me(St),wt._decrementPreload()},function(St){if(p.default._friendlyFileLoadError(5,tt),!Le)throw St;Le(St)}),ft},p.default.prototype.loadStrings=function(){for(var de=arguments.length,pe=new Array(de),Ye=0;Ye<de;Ye++)pe[Ye]=arguments[Ye];p.default._validateParameters("loadStrings",pe);for(var me,Le,nt=[],tt=1;tt<pe.length;tt++){var ft=pe[tt];typeof ft=="function"&&(me===void 0?me=ft:Le===void 0&&(Le=ft))}var yt=this;return p.default.prototype.httpDo.call(this,pe[0],"GET","text",function(gt){for(var mt=gt.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/),wt=0,St=mt.length;wt<St;wt+=32768)Array.prototype.push.apply(nt,mt.slice(wt,Math.min(wt+32768,St)));me!==void 0&&me(nt),yt._decrementPreload()},function(gt){if(p.default._friendlyFileLoadError(3,gt),!Le)throw gt;Le(gt)}),nt},p.default.prototype.loadTable=function(de){var pe,Ye,me,Le=!1,nt=de.substring(de.lastIndexOf(".")+1,de.length);nt==="csv"?me=",":nt==="ssv"?me=";":nt==="tsv"&&(me="	");for(var tt=1;tt<arguments.length;tt++)typeof arguments[tt]=="function"?pe===void 0?pe=arguments[tt]:Ye===void 0&&(Ye=arguments[tt]):typeof arguments[tt]=="string"&&(arguments[tt]==="header"&&(Le=!0),arguments[tt]==="csv"?me=",":arguments[tt]==="ssv"?me=";":arguments[tt]==="tsv"&&(me="	"));var ft=new p.default.Table,yt=this;return this.httpDo(de,"GET","table",function(gt){for(var mt,wt,St={},bt=0,Ct=[],Et=0,It=null,Dt=function(){St.currentState=bt,St.token=""},Pt=function(){It.push(St.token),Dt()},qt=function(){St.currentState=4,Ct.push(It),It=null};;){if((mt=gt[Et++])==null){if(St.escaped)throw new Error("Unclosed quote in file.");if(It){Pt(),qt();break}}if(It===null&&(St.escaped=!1,It=[],Dt()),St.currentState===bt){if(mt==='"'){St.escaped=!0,St.currentState=1;continue}St.currentState=1}if(St.currentState===1&&St.escaped)if(mt==='"')gt[Et]==='"'?(St.token+='"',Et++):(St.escaped=!1,St.currentState=2);else{if(mt==="\r")continue;St.token+=mt}else mt==="\r"?(gt[Et]===`
`&&Et++,Pt(),qt()):mt===`
`?(Pt(),qt()):mt===me?Pt():St.currentState===1&&(St.token+=mt)}if(Le)ft.columns=Ct.shift();else for(var Ht=0;Ht<Ct[0].length;Ht++)ft.columns[Ht]="null";for(var Gt=0;Gt<Ct.length;Gt++)(Ct[Gt].length!==1||Ct[Gt][0]!=="undefined"&&Ct[Gt][0]!=="")&&((wt=new p.default.TableRow).arr=Ct[Gt],wt.obj=function(Ut,Yt){if((Yt=Yt||[])===void 0)for(var Zt=0;Zt<Ut.length;Zt++)Yt[Zt.toString()]=Zt;return Object.fromEntries(Yt.map(function(vt,Rt){return[vt,Ut[Rt]]}))}(Ct[Gt],ft.columns),ft.addRow(wt));typeof pe=="function"&&pe(ft),yt._decrementPreload()},function(gt){p.default._friendlyFileLoadError(2,de),Ye?Ye(gt):console.error(gt)}),ft},p.default.prototype.loadXML=function(){for(var de=arguments.length,pe=new Array(de),Ye=0;Ye<de;Ye++)pe[Ye]=arguments[Ye];for(var me,Le,nt=new p.default.XML,tt=1;tt<pe.length;tt++){var ft=pe[tt];typeof ft=="function"&&(me===void 0?me=ft:Le===void 0&&(Le=ft))}var yt=this;return this.httpDo(pe[0],"GET","xml",function(gt){for(var mt in gt)nt[mt]=gt[mt];me!==void 0&&me(nt),yt._decrementPreload()},function(gt){if(p.default._friendlyFileLoadError(1,gt),!Le)throw gt;Le(gt)}),nt},p.default.prototype.loadBytes=function(de,pe,Ye){var me={},Le=this;return this.httpDo(de,"GET","arrayBuffer",function(nt){me.bytes=new Uint8Array(nt),typeof pe=="function"&&pe(me),Le._decrementPreload()},function(nt){if(p.default._friendlyFileLoadError(6,de),!Ye)throw nt;Ye(nt)}),me},p.default.prototype.httpGet=function(){for(var de=arguments.length,pe=new Array(de),Ye=0;Ye<de;Ye++)pe[Ye]=arguments[Ye];return p.default._validateParameters("httpGet",pe),pe.splice(1,0,"GET"),p.default.prototype.httpDo.apply(this,pe)},p.default.prototype.httpPost=function(){for(var de=arguments.length,pe=new Array(de),Ye=0;Ye<de;Ye++)pe[Ye]=arguments[Ye];return p.default._validateParameters("httpPost",pe),pe.splice(1,0,"POST"),p.default.prototype.httpDo.apply(this,pe)},p.default.prototype.httpDo=function(){for(var de,pe,Ye,me={},Le=0,nt="text/plain",tt=arguments.length-1;0<tt&&typeof(tt<0||arguments.length<=tt?void 0:arguments[tt])=="function";tt--)Le++;var ft=arguments.length-Le,yt=arguments.length<=0?void 0:arguments[0];if(ft==2&&typeof yt=="string"&&Be(arguments.length<=1?void 0:arguments[1])==="object")Ct=new Request(yt,arguments.length<=1?void 0:arguments[1]),pe=arguments.length<=2?void 0:arguments[2],Ye=arguments.length<=3?void 0:arguments[3];else{for(var gt,mt="GET",wt=1;wt<arguments.length;wt++){var St=wt<0||arguments.length<=wt?void 0:arguments[wt];if(typeof St=="string")St==="GET"||St==="POST"||St==="PUT"||St==="DELETE"?mt=St:St==="json"||St==="jsonp"||St==="binary"||St==="arrayBuffer"||St==="xml"||St==="text"||St==="table"?de=St:gt=St;else if(typeof St=="number")gt=St.toString();else if(Be(St)==="object")if(St.hasOwnProperty("jsonpCallback")||St.hasOwnProperty("jsonpCallbackFunction"))for(var bt in St)me[bt]=St[bt];else nt=St instanceof p.default.XML?(gt=St.serialize(),"application/xml"):(gt=JSON.stringify(St),"application/json");else typeof St=="function"&&(pe?Ye=St:pe=St)}var ft=mt==="GET"?new Headers:new Headers({"Content-Type":nt}),Ct=new Request(yt,{method:mt,mode:"cors",body:gt,headers:ft})}return(ft=(ft=(de=de||(yt.includes("json")?"json":yt.includes("xml")?"xml":"text"))==="jsonp"?(0,d.default)(yt,me):fetch(Ct)).then(function(Et){if(!Et.ok)throw(It=new Error(Et.body)).status=Et.status,It.ok=!1,It;var It=0;switch((It=de!=="jsonp"?Et.headers.get("content-length"):It)&&64e6<It&&p.default._friendlyFileLoadError(7,yt),de){case"json":case"jsonp":return Et.json();case"binary":return Et.blob();case"arrayBuffer":return Et.arrayBuffer();case"xml":return Et.text().then(function(Dt){return Dt=new DOMParser().parseFromString(Dt,"text/xml"),new p.default.XML(Dt.documentElement)});default:return Et.text()}})).then(pe||function(){}),ft.catch(Ye||console.error),ft},window.URL=window.URL||window.webkitURL,p.default.prototype._pWriters=[],p.default.prototype.createWriter=function(de,pe){var Ye,me;for(me in p.default.prototype._pWriters)if(p.default.prototype._pWriters[me].name===de)return Ye=new p.default.PrintWriter(de+this.millis(),pe),p.default.prototype._pWriters.push(Ye),Ye;return Ye=new p.default.PrintWriter(de,pe),p.default.prototype._pWriters.push(Ye),Ye},p.default.PrintWriter=function(de,pe){var Ye=this;this.name=de,this.content="",this.write=function(me){this.content+=me},this.print=function(me){this.content+="".concat(me,`
`)},this.clear=function(){this.content=""},this.close=function(){var me,Le=[];for(me in Le.push(this.content),p.default.prototype.writeFile(Le,de,pe),p.default.prototype._pWriters)p.default.prototype._pWriters[me].name===this.name&&p.default.prototype._pWriters.splice(me,1);Ye.clear(),Ye={}}},p.default.prototype.save=function(de,pe,Ye){var me=arguments,Le=(this._curElement||this).elt;if(me.length===0)p.default.prototype.saveCanvas(Le);else if(me[0]instanceof p.default.Renderer||me[0]instanceof p.default.Graphics)p.default.prototype.saveCanvas(me[0].elt,me[1],me[2]);else if(me.length===1&&typeof me[0]=="string")p.default.prototype.saveCanvas(Le,me[0]);else switch(E(me[1],me[2])[1]){case"json":return void p.default.prototype.saveJSON(me[0],me[1],me[2]);case"txt":return void p.default.prototype.saveStrings(me[0],me[1],me[2]);default:me[0]instanceof Array?p.default.prototype.saveStrings(me[0],me[1],me[2]):me[0]instanceof p.default.Table?p.default.prototype.saveTable(me[0],me[1],me[2]):me[0]instanceof p.default.Image?p.default.prototype.saveCanvas(me[0].canvas,me[1]):me[0]instanceof p.default.SoundFile&&p.default.prototype.saveSound(me[0],me[1],me[2],me[3])}},p.default.prototype.saveJSON=function(de,pe,Ye){p.default._validateParameters("saveJSON",arguments),Ye=Ye?JSON.stringify(de):JSON.stringify(de,void 0,2),this.saveStrings(Ye.split(`
`),pe,"json")},p.default.prototype.saveJSONObject=p.default.prototype.saveJSON,p.default.prototype.saveJSONArray=p.default.prototype.saveJSON,p.default.prototype.saveStrings=function(de,pe,Ye,me){p.default._validateParameters("saveStrings",arguments);for(var Le=this.createWriter(pe,Ye||"txt"),nt=0;nt<de.length;nt++)me?Le.write(de[nt]+`\r
`):Le.write(de[nt]+`
`);Le.close(),Le.clear()},p.default.prototype.saveTable=function(de,pe,Ye){p.default._validateParameters("saveTable",arguments),me=Ye===void 0?pe.substring(pe.lastIndexOf(".")+1,pe.length):Ye;var me,Le=this.createWriter(pe,me),nt=de.columns,tt=me==="tsv"?"	":",";if(me!=="html"){if(nt[0]!=="0"){for(var ft=0;ft<nt.length;ft++)ft<nt.length-1?Le.write(nt[ft]+tt):Le.write(nt[ft]);Le.write(`
`)}for(var yt=0;yt<de.rows.length;yt++){for(var gt=void 0,gt=0;gt<de.rows[yt].arr.length;gt++)gt<de.rows[yt].arr.length-1?me==="csv"&&String(de.rows[yt].arr[gt]).includes(",")?Le.write('"'+de.rows[yt].arr[gt]+'"'+tt):Le.write(de.rows[yt].arr[gt]+tt):me==="csv"&&String(de.rows[yt].arr[gt]).includes(",")?Le.write('"'+de.rows[yt].arr[gt]+'"'):Le.write(de.rows[yt].arr[gt]);Le.write(`
`)}}else{if(Le.print("<html>"),Le.print("<head>"),Le.print('  <meta http-equiv="content-type" content="text/html;charset=utf-8" />'),Le.print("</head>"),Le.print("<body>"),Le.print("  <table>"),nt[0]!=="0"){Le.print("    <tr>");for(var mt=0;mt<nt.length;mt++){var wt=b(nt[mt]);Le.print("      <td>".concat(wt)),Le.print("      </td>")}Le.print("    </tr>")}for(var St=0;St<de.rows.length;St++){Le.print("    <tr>");for(var bt=0;bt<de.columns.length;bt++){var Ct=b(de.rows[St].getString(bt));Le.print("      <td>".concat(Ct)),Le.print("      </td>")}Le.print("    </tr>")}Le.print("  </table>"),Le.print("</body>"),Le.print("</html>")}Le.close(),Le.clear()},p.default.prototype.writeFile=function(Le,pe,Ye){var me="application/octet-stream",Le=(p.default.prototype._isSafari()&&(me="text/plain"),new Blob(Le,{type:me}));p.default.prototype.downloadFile(Le,pe,Ye)},p.default.prototype.downloadFile=function(de,Le,nt){var me,Le=E(Le,nt),nt=Le[0];de instanceof Blob?h.default.saveAs(de,nt):((me=document.createElement("a")).href=de,me.download=nt,me.onclick=function(tt){document.body.removeChild(tt.target),tt.stopPropagation()},me.style.display="none",document.body.appendChild(me),p.default.prototype._isSafari()&&(de=(de=`Hello, Safari user! To download this file...
1. Go to File --> Save As.
2. Choose "Page Source" as the Format.
`)+'3. Name it with this extension: ."'.concat(Le[1],'"'),alert(de)),me.click())},p.default.prototype._checkFileExtension=E,p.default.prototype._isSafari=function(){return window.HTMLElement.toString().includes("Constructor")},t=p.default,u.default=t},{"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.object.from-entries":185,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/web.dom-collections.iterator":246,"core-js/modules/web.url":248,"es6-promise/auto":249,"fetch-jsonp":251,"file-saver":252,"whatwg-fetch":261}],310:[function(t,l,u){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.replace"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(t=t("../core/main"))&&t.__esModule?t:{default:t};function p(d,h){for(var N=0;N<h.length;N++){var Be=h[N];Be.enumerable=Be.enumerable||!1,Be.configurable=!0,"value"in Be&&(Be.writable=!0),Object.defineProperty(d,Be.key,Be)}}s.default.Table=function(){function d(){var Be=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],b=this,E=d;if(!(b instanceof E))throw new TypeError("Cannot call a class as a function");this.columns=[],this.rows=Be}var h,N;return h=d,(N=[{key:"addRow",value:function(Be){if(Be=Be||new s.default.TableRow,Be.arr===void 0||Be.obj===void 0)throw new Error("invalid TableRow: ".concat(Be));return(Be.table=this).rows.push(Be),Be}},{key:"removeRow",value:function(Be){this.rows[Be].table=null,Be=this.rows.splice(Be+1,this.rows.length),this.rows.pop(),this.rows=this.rows.concat(Be)}},{key:"getRow",value:function(Be){return this.rows[Be]}},{key:"getRows",value:function(){return this.rows}},{key:"findRow",value:function(Be,b){if(typeof b=="string"){for(var E=0;E<this.rows.length;E++)if(this.rows[E].obj[b]===Be)return this.rows[E]}else for(var de=0;de<this.rows.length;de++)if(this.rows[de].arr[b]===Be)return this.rows[de];return null}},{key:"findRows",value:function(Be,b){var E=[];if(typeof b=="string")for(var de=0;de<this.rows.length;de++)this.rows[de].obj[b]===Be&&E.push(this.rows[de]);else for(var pe=0;pe<this.rows.length;pe++)this.rows[pe].arr[b]===Be&&E.push(this.rows[pe]);return E}},{key:"matchRow",value:function(Be,b){if(typeof b=="number"){for(var E=0;E<this.rows.length;E++)if(this.rows[E].arr[b].match(Be))return this.rows[E]}else for(var de=0;de<this.rows.length;de++)if(this.rows[de].obj[b].match(Be))return this.rows[de];return null}},{key:"matchRows",value:function(Be,b){var E=[];if(typeof b=="number")for(var de=0;de<this.rows.length;de++)this.rows[de].arr[b].match(Be)&&E.push(this.rows[de]);else for(var pe=0;pe<this.rows.length;pe++)this.rows[pe].obj[b].match(Be)&&E.push(this.rows[pe]);return E}},{key:"getColumn",value:function(Be){var b=[];if(typeof Be=="string")for(var E=0;E<this.rows.length;E++)b.push(this.rows[E].obj[Be]);else for(var de=0;de<this.rows.length;de++)b.push(this.rows[de].arr[Be]);return b}},{key:"clearRows",value:function(){delete this.rows,this.rows=[]}},{key:"addColumn",value:function(Be){this.columns.push(Be||null)}},{key:"getColumnCount",value:function(){return this.columns.length}},{key:"getRowCount",value:function(){return this.rows.length}},{key:"removeTokens",value:function(Be,b){for(var E=[],de=0;de<Be.length;de++)E.push(Be.charAt(de).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"));var pe=new RegExp(E.join("|"),"g");if(b===void 0)for(var Ye=0;Ye<this.columns.length;Ye++)for(var me=0;me<this.rows.length;me++){var Le=(Le=this.rows[me].arr[Ye]).replace(pe,"");this.rows[me].arr[Ye]=Le,this.rows[me].obj[this.columns[Ye]]=Le}else if(typeof b=="string")for(var nt=0;nt<this.rows.length;nt++){var tt=(tt=this.rows[nt].obj[b]).replace(pe,""),ft=(this.rows[nt].obj[b]=tt,this.columns.indexOf(b));this.rows[nt].arr[ft]=tt}else for(var yt=0;yt<this.rows.length;yt++){var gt=(gt=this.rows[yt].arr[b]).replace(pe,"");this.rows[yt].arr[b]=gt,this.rows[yt].obj[this.columns[b]]=gt}}},{key:"trim",value:function(Be){var b=new RegExp(" ","g");if(Be===void 0)for(var E=0;E<this.columns.length;E++)for(var de=0;de<this.rows.length;de++){var pe=(pe=this.rows[de].arr[E]).replace(b,"");this.rows[de].arr[E]=pe,this.rows[de].obj[this.columns[E]]=pe}else if(typeof Be=="string")for(var Ye=0;Ye<this.rows.length;Ye++){var me=(me=this.rows[Ye].obj[Be]).replace(b,""),Le=(this.rows[Ye].obj[Be]=me,this.columns.indexOf(Be));this.rows[Ye].arr[Le]=me}else for(var nt=0;nt<this.rows.length;nt++){var tt=(tt=this.rows[nt].arr[Be]).replace(b,"");this.rows[nt].arr[Be]=tt,this.rows[nt].obj[this.columns[Be]]=tt}}},{key:"removeColumn",value:function(de){typeof de=="string"?E=this.columns.indexOf(b=de):b=this.columns[E=de];var b,E,de=this.columns.splice(E+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(de);for(var pe=0;pe<this.rows.length;pe++){var Ye=this.rows[pe].arr,me=Ye.splice(E+1,Ye.length);Ye.pop(),this.rows[pe].arr=Ye.concat(me),delete this.rows[pe].obj[b]}}},{key:"set",value:function(Be,b,E){this.rows[Be].set(b,E)}},{key:"setNum",value:function(Be,b,E){this.rows[Be].setNum(b,E)}},{key:"setString",value:function(Be,b,E){this.rows[Be].setString(b,E)}},{key:"get",value:function(Be,b){return this.rows[Be].get(b)}},{key:"getNum",value:function(Be,b){return this.rows[Be].getNum(b)}},{key:"getString",value:function(Be,b){return this.rows[Be].getString(b)}},{key:"getObject",value:function(Be){for(var b,E={},de=0;de<this.rows.length;de++)if(b=this.rows[de].obj,typeof Be=="string"){if(!(0<=this.columns.indexOf(Be)))throw new Error('This table has no column named "'.concat(Be,'"'));E[b[Be]]=b}else E[de]=this.rows[de].obj;return E}},{key:"getArray",value:function(){for(var Be=[],b=0;b<this.rows.length;b++)Be.push(this.rows[b].arr);return Be}}])&&p(h.prototype,N),d}(),t=s.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.join":166,"core-js/modules/es.array.splice":171,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.match":201,"core-js/modules/es.string.replace":204}],311:[function(t,l,u){t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.from-entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function s(p,d){for(var h=0;h<d.length;h++){var N=d[h];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(p,N.key,N)}}t.default.TableRow=function(){function p(N,Be){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");var b=[];N&&(b=N.split(Be=Be||",")),this.arr=b,this.obj=Object.fromEntries(b.entries()),this.table=null}var d,h;return d=p,(h=[{key:"set",value:function(N,Be){if(typeof N=="string"){var b=this.table.columns.indexOf(N);if(!(0<=b))throw new Error('This table has no column named "'.concat(N,'"'));this.obj[N]=Be,this.arr[b]=Be}else{if(!(N<this.table.columns.length))throw new Error("Column #".concat(N," is out of the range of this table"));this.arr[N]=Be,b=this.table.columns[N],this.obj[b]=Be}}},{key:"setNum",value:function(N,Be){Be=parseFloat(Be),this.set(N,Be)}},{key:"setString",value:function(N,Be){Be=Be.toString(),this.set(N,Be)}},{key:"get",value:function(N){return(typeof N=="string"?this.obj:this.arr)[N]}},{key:"getNum",value:function(N){var Be=parseFloat(typeof N=="string"?this.obj[N]:this.arr[N]);if(Be.toString()==="NaN")throw"Error: ".concat(this.obj[N]," is NaN (Not a Number)");return Be}},{key:"getString",value:function(N){return(typeof N=="string"?this.obj:this.arr)[N].toString()}}])&&s(d.prototype,h),p}(),t=t.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.from-entries":185,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.split":206,"core-js/modules/web.dom-collections.iterator":246}],312:[function(t,l,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(t=t("../core/main"))&&t.__esModule?t:{default:t};function p(h,N){for(var Be=0;Be<N.length;Be++){var b=N[Be];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}function d(h){for(var N=[],Be=0;Be<h.length;Be++)N.push(new s.default.XML(h[Be]));return N}s.default.XML=function(){function h(b){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");b?this.DOM=b:(b=document.implementation.createDocument(null,"doc"),this.DOM=b.createElement("root"))}var N,Be;return N=h,(Be=[{key:"getParent",value:function(){return new s.default.XML(this.DOM.parentElement)}},{key:"getName",value:function(){return this.DOM.tagName}},{key:"setName",value:function(b){var E=this.DOM.innerHTML,de=this.DOM.attributes,pe=document.implementation.createDocument(null,"default").createElement(b);pe.innerHTML=E;for(var Ye=0;Ye<de.length;Ye++)pe.setAttribute(de[Ye].nodeName,de[Ye].nodeValue);this.DOM=pe}},{key:"hasChildren",value:function(){return 0<this.DOM.children.length}},{key:"listChildren",value:function(){for(var b=[],E=0;E<this.DOM.childNodes.length;E++)b.push(this.DOM.childNodes[E].nodeName);return b}},{key:"getChildren",value:function(b){return d(b?this.DOM.getElementsByTagName(b):this.DOM.children)}},{key:"getChild",value:function(b){if(typeof b!="string")return new s.default.XML(this.DOM.children[b]);var E=!0,de=!1,pe=void 0;try{for(var Ye,me=this.DOM.children[Symbol.iterator]();!(E=(Ye=me.next()).done);E=!0){var Le=Ye.value;if(Le.tagName===b)return new s.default.XML(Le)}}catch(nt){de=!0,pe=nt}finally{try{E||me.return==null||me.return()}finally{if(de)throw pe}}}},{key:"addChild",value:function(b){b instanceof s.default.XML&&this.DOM.appendChild(b.DOM)}},{key:"removeChild",value:function(b){var E=-1;if(typeof b=="string"){for(var de=0;de<this.DOM.children.length;de++)if(this.DOM.children[de].tagName===b){E=de;break}}else E=b;E!==-1&&this.DOM.removeChild(this.DOM.children[E])}},{key:"getAttributeCount",value:function(){return this.DOM.attributes.length}},{key:"listAttributes",value:function(){var b=[],E=!0,de=!1,pe=void 0;try{for(var Ye,me=this.DOM.attributes[Symbol.iterator]();!(E=(Ye=me.next()).done);E=!0){var Le=Ye.value;b.push(Le.nodeName)}}catch(nt){de=!0,pe=nt}finally{try{E||me.return==null||me.return()}finally{if(de)throw pe}}return b}},{key:"hasAttribute",value:function(b){var E={},de=!0,pe=!1,Ye=void 0;try{for(var me,Le=this.DOM.attributes[Symbol.iterator]();!(de=(me=Le.next()).done);de=!0){var nt=me.value;E[nt.nodeName]=nt.nodeValue}}catch(tt){pe=!0,Ye=tt}finally{try{de||Le.return==null||Le.return()}finally{if(pe)throw Ye}}return!!E[b]}},{key:"getNum",value:function(b,E){var de={},pe=!0,Ye=!1,me=void 0;try{for(var Le,nt=this.DOM.attributes[Symbol.iterator]();!(pe=(Le=nt.next()).done);pe=!0){var tt=Le.value;de[tt.nodeName]=tt.nodeValue}}catch(ft){Ye=!0,me=ft}finally{try{pe||nt.return==null||nt.return()}finally{if(Ye)throw me}}return Number(de[b])||E||0}},{key:"getString",value:function(b,E){var de={},pe=!0,Ye=!1,me=void 0;try{for(var Le,nt=this.DOM.attributes[Symbol.iterator]();!(pe=(Le=nt.next()).done);pe=!0){var tt=Le.value;de[tt.nodeName]=tt.nodeValue}}catch(ft){Ye=!0,me=ft}finally{try{pe||nt.return==null||nt.return()}finally{if(Ye)throw me}}return de[b]?String(de[b]):E||null}},{key:"setAttribute",value:function(b,E){this.DOM.setAttribute(b,E)}},{key:"getContent",value:function(b){var E=this.DOM.textContent;return(E=E.replace(/\s\s+/g,","))||b||null}},{key:"setContent",value:function(b){this.DOM.children.length||(this.DOM.textContent=b)}},{key:"serialize",value:function(){return new XMLSerializer().serializeToString(this.DOM)}}])&&p(N.prototype,Be),h}(),t=s.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],313:[function(t,l,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.string.includes"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(t=t("../core/main"))&&t.__esModule?t:{default:t};function p(d){return function(h){if(Array.isArray(h)){for(var N=0,Be=new Array(h.length);N<h.length;N++)Be[N]=h[N];return Be}}(d)||function(h){if(Symbol.iterator in Object(h)||Object.prototype.toString.call(h)==="[object Arguments]")return Array.from(h)}(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}s.default.prototype.abs=Math.abs,s.default.prototype.ceil=Math.ceil,s.default.prototype.constrain=function(d,h,N){return s.default._validateParameters("constrain",arguments),Math.max(Math.min(d,N),h)},s.default.prototype.dist=function(){for(var d=arguments.length,h=new Array(d),N=0;N<d;N++)h[N]=arguments[N];return s.default._validateParameters("dist",h),h.length===4?Math.hypot(h[2]-h[0],h[3]-h[1]):h.length===6?Math.hypot(h[3]-h[0],h[4]-h[1],h[5]-h[2]):void 0},s.default.prototype.exp=Math.exp,s.default.prototype.floor=Math.floor,s.default.prototype.lerp=function(d,h,N){return s.default._validateParameters("lerp",arguments),N*(h-d)+d},s.default.prototype.log=Math.log,s.default.prototype.mag=function(d,h){return s.default._validateParameters("mag",arguments),Math.hypot(d,h)},s.default.prototype.map=function(d,h,N,Be,b,E){return s.default._validateParameters("map",arguments),d=(d-h)/(N-h)*(b-Be)+Be,E?Be<b?this.constrain(d,Be,b):this.constrain(d,b,Be):d},s.default.prototype.max=function(){for(var d=function(b){return Math.max.apply(Math,p(b))},h=arguments.length,N=new Array(h),Be=0;Be<h;Be++)N[Be]=arguments[Be];return Array.isArray(N[0])?d(N[0]):d(N)},s.default.prototype.min=function(){for(var d=function(b){return Math.min.apply(Math,p(b))},h=arguments.length,N=new Array(h),Be=0;Be<h;Be++)N[Be]=arguments[Be];return Array.isArray(N[0])?d(N[0]):d(N)},s.default.prototype.norm=function(d,h,N){return s.default._validateParameters("norm",arguments),this.map(d,h,N,0,1)},s.default.prototype.pow=Math.pow,s.default.prototype.round=function(d,h){return h?(h=Math.pow(10,h),Math.round(d*h)/h):Math.round(d)},s.default.prototype.sq=function(d){return d*d},s.default.prototype.sqrt=Math.sqrt,s.default.prototype.fract=function(Be){s.default._validateParameters("fract",arguments);var h,N=0,Be=Number(Be);return isNaN(Be)||Math.abs(Be)===1/0?Be:(Be<0&&(Be=-Be,N=1),String(Be).includes(".")&&!String(Be).includes("e")?(h=String(Be),h=+("0"+h.slice(h.indexOf("."))),Math.abs(N-h)):Be<1?Math.abs(N-Be):0)},t=s.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],314:[function(t,l,u){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(t=t("../core/main"))&&t.__esModule?t:{default:t};function p(h,N,Be){return(p=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?Reflect.construct:function(b,E,de){var pe=[null];return pe.push.apply(pe,E),E=new(Function.bind.apply(b,pe)),de&&d(E,de.prototype),E}).apply(null,arguments)}function d(h,N){return(d=Object.setPrototypeOf||function(Be,b){return Be.__proto__=b,Be})(h,N)}s.default.prototype.createVector=function(h,N,Be){return this instanceof s.default?p(s.default.Vector,[this._fromRadians.bind(this),this._toRadians.bind(this)].concat(Array.prototype.slice.call(arguments))):new s.default.Vector(h,N,Be)},t=s.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196}],315:[function(Be,l,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,Be=(Be=Be("../core/main"))&&Be.__esModule?Be:{default:Be};function s(b){return .5*(1-Math.cos(b*Math.PI))}var p,d=4095,h=4,N=.5,Be=(Be.default.prototype.noise=function(b){var E=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,de=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;if(p==null){p=new Array(4096);for(var pe=0;pe<4096;pe++)p[pe]=Math.random()}b<0&&(b=-b),E<0&&(E=-E),de<0&&(de=-de);for(var Ye,me,Le=Math.floor(b),nt=Math.floor(E),tt=Math.floor(de),ft=b-Le,yt=E-nt,gt=de-tt,mt=0,wt=.5,St=0;St<h;St++){var bt=Le+(nt<<4)+(tt<<8),Ct=s(ft),Et=s(yt),It=p[bt&d];It+=Ct*(p[bt+1&d]-It),Ye=p[bt+16&d],It+=Et*((Ye+=Ct*(p[bt+16+1&d]-Ye))-It),Ye=p[(bt+=256)&d],Ye+=Ct*(p[bt+1&d]-Ye),me=p[bt+16&d],Ye+=Et*((me+=Ct*(p[bt+16+1&d]-me))-Ye),mt+=(It+=s(gt)*(Ye-It))*wt,wt*=N,Le<<=1,nt<<=1,tt<<=1,1<=(ft*=2)&&(Le++,ft--),1<=(yt*=2)&&(nt++,yt--),1<=(gt*=2)&&(tt++,gt--)}return mt},Be.default.prototype.noiseDetail=function(b,E){0<b&&(h=b),0<E&&(N=E)},Be.default.prototype.noiseSeed=function(b){pe=4294967296;var E,de,pe,Ye={setSeed:function(Le){de=E=(Le??Math.random()*pe)>>>0},getSeed:function(){return E},rand:function(){return(de=(1664525*de+1013904223)%pe)/pe}};Ye.setSeed(b),p=new Array(4096);for(var me=0;me<4096;me++)p[me]=Ye.rand()},Be.default);u.default=Be},{"../core/main":283}],316:[function(t,l,u){function s(E){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(de){return typeof de}:function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de})(E)}function p(E){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(de){return s(de)}:function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":s(de)})(E)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.epsilon"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.some"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.number.epsilon"),t("core-js/modules/es.number.is-finite"),t("core-js/modules/es.string.sub"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=(b=t("../core/main"))&&b.__esModule?b:{default:b},h=function(E){if(E&&E.__esModule)return E;if(E===null||p(E)!=="object"&&typeof E!="function")return{default:E};var de=N();if(de&&de.has(E))return de.get(E);var pe,Ye={},me=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(pe in E){var Le;Object.prototype.hasOwnProperty.call(E,pe)&&((Le=me?Object.getOwnPropertyDescriptor(E,pe):null)&&(Le.get||Le.set)?Object.defineProperty(Ye,pe,Le):Ye[pe]=E[pe])}return Ye.default=E,de&&de.set(E,Ye),Ye}(t("../core/constants"));function N(){var E;return typeof WeakMap!="function"?null:(E=new WeakMap,N=function(){return E},E)}function Be(E,de){for(var pe=0;pe<de.length;pe++){var Ye=de[pe];Ye.enumerable=Ye.enumerable||!1,Ye.configurable=!0,"value"in Ye&&(Ye.writable=!0),Object.defineProperty(E,Ye.key,Ye)}}d.default.Vector=function(){function E(){var tt=this,me=E;if(!(tt instanceof me))throw new TypeError("Cannot call a class as a function");var Le,nt,tt=typeof(arguments.length<=0?void 0:arguments[0])=="function"?(this.isPInst=!0,this._fromRadians=arguments.length<=0?void 0:arguments[0],this._toRadians=arguments.length<=1?void 0:arguments[1],Le=(arguments.length<=2?void 0:arguments[2])||0,nt=(arguments.length<=3?void 0:arguments[3])||0,(arguments.length<=4?void 0:arguments[4])||0):(Le=(arguments.length<=0?void 0:arguments[0])||0,nt=(arguments.length<=1?void 0:arguments[1])||0,(arguments.length<=2?void 0:arguments[2])||0);this.x=Le,this.y=nt,this.z=tt}var de,pe,Ye;return de=E,Ye=[{key:"fromAngle",value:function(me){var Le=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;return new d.default.Vector(Le*Math.cos(me),Le*Math.sin(me),0)}},{key:"fromAngles",value:function(gt,ft){var nt=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,tt=Math.cos(ft),ft=Math.sin(ft),yt=Math.cos(gt),gt=Math.sin(gt);return new d.default.Vector(nt*gt*ft,-nt*yt,nt*gt*tt)}},{key:"random2D",value:function(){return this.fromAngle(Math.random()*h.TWO_PI)}},{key:"random3D",value:function(){var me=Math.random()*h.TWO_PI,Le=2*Math.random()-1,tt=Math.sqrt(1-Le*Le),nt=tt*Math.cos(me),tt=tt*Math.sin(me);return new d.default.Vector(nt,tt,Le)}},{key:"copy",value:function(me){return me.copy(me)}},{key:"add",value:function(){for(var me=arguments.length,Le=new Array(me),nt=0;nt<me;nt++)Le[nt]=arguments[nt];var tt=Le[0],ft=Le[1],yt=Le[2];return yt?yt.set(tt):(yt=tt.copy(),Le.length===3&&d.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.add")),yt.add(ft),yt}},{key:"rem",value:function(me,Le){if(me instanceof d.default.Vector&&Le instanceof d.default.Vector)return(me=me.copy()).rem(Le),me}},{key:"sub",value:function(){for(var me=arguments.length,Le=new Array(me),nt=0;nt<me;nt++)Le[nt]=arguments[nt];var tt=Le[0],ft=Le[1],yt=Le[2];return yt?yt.set(tt):(yt=tt.copy(),Le.length===3&&d.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.sub")),yt.sub(ft),yt}},{key:"mult",value:function(){for(var me=arguments.length,Le=new Array(me),nt=0;nt<me;nt++)Le[nt]=arguments[nt];var tt=Le[0],ft=Le[1],yt=Le[2];return yt?yt.set(tt):(yt=tt.copy(),Le.length===3&&d.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.mult")),yt.mult(ft),yt}},{key:"rotate",value:function(){for(var me=arguments.length,Le=new Array(me),nt=0;nt<me;nt++)Le[nt]=arguments[nt];var tt=Le[0],ft=Le[1],yt=Le[2];return Le.length===2?yt=tt.copy():(yt instanceof d.default.Vector||d.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.rotate"),yt.set(tt)),yt.rotate(ft),yt}},{key:"div",value:function(){for(var me=arguments.length,Le=new Array(me),nt=0;nt<me;nt++)Le[nt]=arguments[nt];var tt=Le[0],ft=Le[1],yt=Le[2];return yt?yt.set(tt):(yt=tt.copy(),Le.length===3&&d.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.div")),yt.div(ft),yt}},{key:"dot",value:function(me,Le){return me.dot(Le)}},{key:"cross",value:function(me,Le){return me.cross(Le)}},{key:"dist",value:function(me,Le){return me.dist(Le)}},{key:"lerp",value:function(){for(var me=arguments.length,Le=new Array(me),nt=0;nt<me;nt++)Le[nt]=arguments[nt];var tt=Le[0],ft=Le[1],yt=Le[2],gt=Le[3];return gt?gt.set(tt):(gt=tt.copy(),Le.length===4&&d.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.lerp")),gt.lerp(ft,yt),gt}},{key:"slerp",value:function(){for(var me=arguments.length,Le=new Array(me),nt=0;nt<me;nt++)Le[nt]=arguments[nt];var tt=Le[0],ft=Le[1],yt=Le[2],gt=Le[3];return gt?gt.set(tt):(gt=tt.copy(),Le.length===4&&d.default._friendlyError("The target parameter is undefined, it should be of type p5.Vector","p5.Vector.slerp")),gt.slerp(ft,yt),gt}},{key:"mag",value:function(me){return me.mag()}},{key:"magSq",value:function(me){return me.magSq()}},{key:"normalize",value:function(){for(var me=arguments.length,Le=new Array(me),nt=0;nt<me;nt++)Le[nt]=arguments[nt];var tt=Le[0],ft=Le[1];return Le.length<2?ft=tt.copy():(ft instanceof d.default.Vector||d.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.normalize"),ft.set(tt)),ft.normalize()}},{key:"limit",value:function(){for(var me=arguments.length,Le=new Array(me),nt=0;nt<me;nt++)Le[nt]=arguments[nt];var tt=Le[0],ft=Le[1],yt=Le[2];return Le.length<3?yt=tt.copy():(yt instanceof d.default.Vector||d.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.limit"),yt.set(tt)),yt.limit(ft)}},{key:"setMag",value:function(){for(var me=arguments.length,Le=new Array(me),nt=0;nt<me;nt++)Le[nt]=arguments[nt];var tt=Le[0],ft=Le[1],yt=Le[2];return Le.length<3?yt=tt.copy():(yt instanceof d.default.Vector||d.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.setMag"),yt.set(tt)),yt.setMag(ft)}},{key:"heading",value:function(me){return me.heading()}},{key:"angleBetween",value:function(me,Le){return me.angleBetween(Le)}},{key:"reflect",value:function(){for(var me=arguments.length,Le=new Array(me),nt=0;nt<me;nt++)Le[nt]=arguments[nt];var tt=Le[0],ft=Le[1],yt=Le[2];return Le.length<3?yt=tt.copy():(yt instanceof d.default.Vector||d.default._friendlyError("The target parameter should be of type p5.Vector","p5.Vector.reflect"),yt.set(tt)),yt.reflect(ft)}},{key:"array",value:function(me){return me.array()}},{key:"equals",value:function(me,Le){var nt;return me instanceof d.default.Vector?nt=me:Array.isArray(me)?nt=new d.default.Vector().set(me):d.default._friendlyError("The v1 parameter should be of type Array or p5.Vector","p5.Vector.equals"),nt.equals(Le)}}],(pe=[{key:"toString",value:function(){return"p5.Vector Object : [".concat(this.x,", ").concat(this.y,", ").concat(this.z,"]")}},{key:"set",value:function(me,Le,nt){return me instanceof d.default.Vector?(this.x=me.x||0,this.y=me.y||0,this.z=me.z||0):Array.isArray(me)?(this.x=me[0]||0,this.y=me[1]||0,this.z=me[2]||0):(this.x=me||0,this.y=Le||0,this.z=nt||0),this}},{key:"copy",value:function(){return this.isPInst?new d.default.Vector(this._fromRadians,this._toRadians,this.x,this.y,this.z):new d.default.Vector(this.x,this.y,this.z)}},{key:"add",value:function(me,Le,nt){return me instanceof d.default.Vector?(this.x+=me.x||0,this.y+=me.y||0,this.z+=me.z||0):Array.isArray(me)?(this.x+=me[0]||0,this.y+=me[1]||0,this.z+=me[2]||0):(this.x+=me||0,this.y+=Le||0,this.z+=nt||0),this}},{key:"calculateRemainder2D",value:function(me,Le){return me!==0&&(this.x=this.x%me),Le!==0&&(this.y=this.y%Le),this}},{key:"calculateRemainder3D",value:function(me,Le,nt){return me!==0&&(this.x=this.x%me),Le!==0&&(this.y=this.y%Le),nt!==0&&(this.z=this.z%nt),this}},{key:"rem",value:function(){for(var me=arguments.length,Le=new Array(me),nt=0;nt<me;nt++)Le[nt]=arguments[nt];var tt,ft,yt,gt=Le[0],mt=Le[1],wt=Le[2];if(gt instanceof d.default.Vector){if([gt.x,gt.y,gt.z].every(Number.isFinite))return tt=parseFloat(gt.x),ft=parseFloat(gt.y),yt=parseFloat(gt.z),this.calculateRemainder3D(tt,ft,yt)}else if(Array.isArray(gt)){if(gt.every(Number.isFinite))return gt.length===2?this.calculateRemainder2D(gt[0],gt[1]):gt.length===3?this.calculateRemainder3D(gt[0],gt[1],gt[2]):void 0}else if(Le.length===1){if(Number.isFinite(gt)&&gt!==0)return this.x=this.x%gt,this.y=this.y%gt,this.z=this.z%gt,this}else if(Le.length===2){if(Le.every(Number.isFinite))return this.calculateRemainder2D(gt,mt)}else if(Le.length===3&&Le.every(Number.isFinite))return this.calculateRemainder3D(gt,mt,wt)}},{key:"sub",value:function(me,Le,nt){return me instanceof d.default.Vector?(this.x-=me.x||0,this.y-=me.y||0,this.z-=me.z||0):Array.isArray(me)?(this.x-=me[0]||0,this.y-=me[1]||0,this.z-=me[2]||0):(this.x-=me||0,this.y-=Le||0,this.z-=nt||0),this}},{key:"mult",value:function(){for(var me=arguments.length,Le=new Array(me),nt=0;nt<me;nt++)Le[nt]=arguments[nt];var tt,ft=Le[0],yt=Le[1],gt=Le[2];return ft instanceof d.default.Vector?Number.isFinite(ft.x)&&Number.isFinite(ft.y)&&Number.isFinite(ft.z)&&typeof ft.x=="number"&&typeof ft.y=="number"&&typeof ft.z=="number"?(this.x*=ft.x,this.y*=ft.y,this.z*=ft.z):console.warn("p5.Vector.prototype.mult:","x contains components that are either undefined or not finite numbers"):Array.isArray(ft)?ft.every(function(mt){return Number.isFinite(mt)})&&ft.every(function(mt){return typeof mt=="number"})?ft.length===1?(this.x*=ft[0],this.y*=ft[0],this.z*=ft[0]):ft.length===2?(this.x*=ft[0],this.y*=ft[1]):ft.length===3&&(this.x*=ft[0],this.y*=ft[1],this.z*=ft[2]):console.warn("p5.Vector.prototype.mult:","x contains elements that are either undefined or not finite numbers"):(tt=Le).every(function(mt){return Number.isFinite(mt)})&&tt.every(function(mt){return typeof mt=="number"})?(Le.length===1&&(this.x*=ft,this.y*=ft,this.z*=ft),Le.length===2&&(this.x*=ft,this.y*=yt),Le.length===3&&(this.x*=ft,this.y*=yt,this.z*=gt)):console.warn("p5.Vector.prototype.mult:","x, y, or z arguments are either undefined or not a finite number"),this}},{key:"div",value:function(){for(var me=arguments.length,Le=new Array(me),nt=0;nt<me;nt++)Le[nt]=arguments[nt];var tt=Le[0],ft=Le[1],yt=Le[2];if(tt instanceof d.default.Vector)if(Number.isFinite(tt.x)&&Number.isFinite(tt.y)&&Number.isFinite(tt.z)&&typeof tt.x=="number"&&typeof tt.y=="number"&&typeof tt.z=="number"){var gt=tt.z===0&&this.z===0;if(tt.x===0||tt.y===0||!gt&&tt.z===0)return console.warn("p5.Vector.prototype.div:","divide by 0"),this;this.x/=tt.x,this.y/=tt.y,gt||(this.z/=tt.z)}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Array.isArray(tt))if(tt.every(Number.isFinite)&&tt.every(function(mt){return typeof mt=="number"})){if(tt.some(function(mt){return mt===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;tt.length===1?(this.x/=tt[0],this.y/=tt[0],this.z/=tt[0]):tt.length===2?(this.x/=tt[0],this.y/=tt[1]):tt.length===3&&(this.x/=tt[0],this.y/=tt[1],this.z/=tt[2])}else console.warn("p5.Vector.prototype.div:","x contains components that are either undefined or not finite numbers");else if(Le.every(Number.isFinite)&&Le.every(function(mt){return typeof mt=="number"})){if(Le.some(function(mt){return mt===0}))return console.warn("p5.Vector.prototype.div:","divide by 0"),this;Le.length===1&&(this.x/=tt,this.y/=tt,this.z/=tt),Le.length===2&&(this.x/=tt,this.y/=ft),Le.length===3&&(this.x/=tt,this.y/=ft,this.z/=yt)}else console.warn("p5.Vector.prototype.div:","x, y, or z arguments are either undefined or not a finite number");return this}},{key:"mag",value:function(){return Math.sqrt(this.magSq())}},{key:"magSq",value:function(){var me=this.x,Le=this.y,nt=this.z;return me*me+Le*Le+nt*nt}},{key:"dot",value:function(me,Le,nt){return me instanceof d.default.Vector?this.dot(me.x,me.y,me.z):this.x*(me||0)+this.y*(Le||0)+this.z*(nt||0)}},{key:"cross",value:function(tt){var Le=this.y*tt.z-this.z*tt.y,nt=this.z*tt.x-this.x*tt.z,tt=this.x*tt.y-this.y*tt.x;return this.isPInst?new d.default.Vector(this._fromRadians,this._toRadians,Le,nt,tt):new d.default.Vector(Le,nt,tt)}},{key:"dist",value:function(me){return me.copy().sub(this).mag()}},{key:"normalize",value:function(){var me=this.mag();return me!==0&&this.mult(1/me),this}},{key:"limit",value:function(me){var Le=this.magSq();return me*me<Le&&this.div(Math.sqrt(Le)).mult(me),this}},{key:"setMag",value:function(me){return this.normalize().mult(me)}},{key:"heading",value:function(){var me=Math.atan2(this.y,this.x);return this.isPInst?this._fromRadians(me):me}},{key:"setHeading",value:function(me){this.isPInst&&(me=this._toRadians(me));var Le=this.mag();return this.x=Le*Math.cos(me),this.y=Le*Math.sin(me),this}},{key:"rotate",value:function(Le){var Le=this.heading()+Le,nt=(this.isPInst&&(Le=this._toRadians(Le)),this.mag());return this.x=Math.cos(Le)*nt,this.y=Math.sin(Le)*nt,this}},{key:"angleBetween",value:function(me){var Le;return this.magSq()*me.magSq()==0?NaN:(Le=this.cross(me),me=Math.atan2(Le.mag(),this.dot(me))*Math.sign(Le.z||1),this.isPInst?this._fromRadians(me):me)}},{key:"lerp",value:function(me,Le,nt,tt){return me instanceof d.default.Vector?this.lerp(me.x,me.y,me.z,Le):(this.x+=(me-this.x)*tt||0,this.y+=(Le-this.y)*tt||0,this.z+=(nt-this.z)*tt||0,this)}},{key:"slerp",value:function(me,Le){if(Le!==0){if(Le===1)return this.set(me);var nt=this.mag(),tt=me.mag();if(nt*tt==0)this.mult(1-Le).add(me.x*Le,me.y*Le,me.z*Le);else{var ft=this.cross(me),yt=ft.mag(),gt=Math.atan2(yt,this.dot(me));if(0<yt)ft.x/=yt,ft.y/=yt,ft.z/=yt;else{if(gt<.5*Math.PI)return this.mult(1-Le).add(me.x*Le,me.y*Le,me.z*Le),this;this.z===0&&me.z===0?ft.set(0,0,1):this.x!==0?ft.set(this.y,-this.x,0).normalize():ft.set(1,0,0)}yt=ft.cross(this),me=1-Le+Le*tt/nt,ft=me*Math.cos(Le*gt),tt=me*Math.sin(Le*gt),this.x=this.x*ft+yt.x*tt,this.y=this.y*ft+yt.y*tt,this.z=this.z*ft+yt.z*tt}}return this}},{key:"reflect",value:function(me){return me=d.default.Vector.normalize(me),this.sub(me.mult(2*this.dot(me)))}},{key:"array",value:function(){return[this.x||0,this.y||0,this.z||0]}},{key:"equals",value:function(yt,Le,nt){var tt,ft,yt=yt instanceof d.default.Vector?(tt=yt.x||0,ft=yt.y||0,yt.z||0):Array.isArray(yt)?(tt=yt[0]||0,ft=yt[1]||0,yt[2]||0):(tt=yt||0,ft=Le||0,nt||0);return this.x===tt&&this.y===ft&&this.z===yt}},{key:"clampToZero",value:function(){return this.x=this._clampToZero(this.x),this.y=this._clampToZero(this.y),this.z=this._clampToZero(this.z),this}},{key:"_clampToZero",value:function(me){return Math.abs(+(me||0))<=Number.EPSILON?0:me}}])&&Be(de.prototype,pe),Ye&&Be(de,Ye),E}();var b=d.default.Vector;u.default=b},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.every":155,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.some":170,"core-js/modules/es.math.sign":178,"core-js/modules/es.number.constructor":179,"core-js/modules/es.number.epsilon":180,"core-js/modules/es.number.is-finite":181,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],317:[function(N,l,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(N=N("../core/main"))&&N.__esModule?N:{default:N},p="_lcg_random_state",d=4294967296,h=0,N=(s.default.prototype._lcg=function(Be){return this[Be]=(1664525*this[Be]+1013904223)%d,this[Be]/d},s.default.prototype._lcgSetSeed=function(Be,b){this[Be]=(b??Math.random()*d)>>>0},s.default.prototype.randomSeed=function(Be){this._lcgSetSeed(p,Be),this._gaussian_previous=!1},s.default.prototype.random=function(Be,b){var E,de;return s.default._validateParameters("random",arguments),E=this[p]!=null?this._lcg(p):Math.random(),Be===void 0?E:b===void 0?Array.isArray(Be)?Be[Math.floor(E*Be.length)]:E*Be:(b<Be&&(de=Be,Be=b,b=de),E*(b-Be)+Be)},s.default.prototype.randomGaussian=function(Be){var b,E,de,pe,Ye=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;if(this._gaussian_previous)b=h,this._gaussian_previous=!1;else{for(;1<=(pe=(E=this.random(2)-1)*E+(de=this.random(2)-1)*de););b=E*(pe=Math.sqrt(-2*Math.log(pe)/pe)),h=de*pe,this._gaussian_previous=!0}return b*Ye+(Be||0)},s.default);u.default=N},{"../core/main":283}],318:[function(t,l,u){function s(b){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(b)}function p(b){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(E){return s(E)}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":s(E)})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=(Be=t("../core/main"))&&Be.__esModule?Be:{default:Be},h=function(b){if(b&&b.__esModule)return b;if(b===null||p(b)!=="object"&&typeof b!="function")return{default:b};var E=N();if(E&&E.has(b))return E.get(b);var de,pe={},Ye=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(de in b){var me;Object.prototype.hasOwnProperty.call(b,de)&&((me=Ye?Object.getOwnPropertyDescriptor(b,de):null)&&(me.get||me.set)?Object.defineProperty(pe,de,me):pe[de]=b[de])}return pe.default=b,E&&E.set(b,pe),pe}(t("../core/constants"));function N(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,N=function(){return b},b)}d.default.prototype._angleMode=h.RADIANS,d.default.prototype.acos=function(b){return this._fromRadians(Math.acos(b))},d.default.prototype.asin=function(b){return this._fromRadians(Math.asin(b))},d.default.prototype.atan=function(b){return this._fromRadians(Math.atan(b))},d.default.prototype.atan2=function(b,E){return this._fromRadians(Math.atan2(b,E))},d.default.prototype.cos=function(b){return Math.cos(this._toRadians(b))},d.default.prototype.sin=function(b){return Math.sin(this._toRadians(b))},d.default.prototype.tan=function(b){return Math.tan(this._toRadians(b))},d.default.prototype.degrees=function(b){return b*h.RAD_TO_DEG},d.default.prototype.radians=function(b){return b*h.DEG_TO_RAD},d.default.prototype.angleMode=function(b){if(d.default._validateParameters("angleMode",arguments),b===void 0)return this._angleMode;b!==h.DEGREES&&b!==h.RADIANS||b!==this._angleMode&&(b===h.RADIANS?(this._setProperty("pRotationX",this.pRotationX*h.DEG_TO_RAD),this._setProperty("pRotationY",this.pRotationY*h.DEG_TO_RAD),this._setProperty("pRotationZ",this.pRotationZ*h.DEG_TO_RAD)):(this._setProperty("pRotationX",this.pRotationX*h.RAD_TO_DEG),this._setProperty("pRotationY",this.pRotationY*h.RAD_TO_DEG),this._setProperty("pRotationZ",this.pRotationZ*h.RAD_TO_DEG)),this._angleMode=b)},d.default.prototype._toRadians=function(b){return this._angleMode===h.DEGREES?b*h.DEG_TO_RAD:b},d.default.prototype._toDegrees=function(b){return this._angleMode===h.RADIANS?b*h.RAD_TO_DEG:b},d.default.prototype._fromRadians=function(b){return this._angleMode===h.DEGREES?b*h.RAD_TO_DEG:b},d.default.prototype._fromDegrees=function(b){return this._angleMode===h.RADIANS?b*h.DEG_TO_RAD:b};var Be=d.default;u.default=Be},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],319:[function(t,l,u){t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(t=t("../core/main"))&&t.__esModule?t:{default:t};s.default.prototype.textAlign=function(p,d){var h;return s.default._validateParameters("textAlign",arguments),(h=this._renderer).textAlign.apply(h,arguments)},s.default.prototype.textLeading=function(p){var d;return s.default._validateParameters("textLeading",arguments),(d=this._renderer).textLeading.apply(d,arguments)},s.default.prototype.textSize=function(p){var d;return s.default._validateParameters("textSize",arguments),(d=this._renderer).textSize.apply(d,arguments)},s.default.prototype.textStyle=function(p){var d;return s.default._validateParameters("textStyle",arguments),(d=this._renderer).textStyle.apply(d,arguments)},s.default.prototype.textWidth=function(){for(var p=arguments.length,d=new Array(p),h=0;h<p;h++)d[h]=arguments[h];if(d[0]+="",s.default._validateParameters("textWidth",d),d[0].length===0)return 0;for(var N=d[0].replace(/\t/g,"  ").split(/\r?\n|\r|\n/g),Be=[],b=0;b<N.length;b++)Be.push(this._renderer.textWidth(N[b]));return Math.max.apply(Math,Be)},s.default.prototype.textAscent=function(){for(var p=arguments.length,d=new Array(p),h=0;h<p;h++)d[h]=arguments[h];return s.default._validateParameters("textAscent",d),this._renderer.textAscent()},s.default.prototype.textDescent=function(){for(var p=arguments.length,d=new Array(p),h=0;h<p;h++)d[h]=arguments[h];return s.default._validateParameters("textDescent",d),this._renderer.textDescent()},s.default.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},s.default.prototype.textWrap=function(p){return s.default._validateParameters("textWrap",[p]),this._renderer.textWrap(p)},t=s.default,u.default=t},{"../core/main":283,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206}],320:[function(t,l,u){function s(de){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pe){return typeof pe}:function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe})(de)}function p(de){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(pe){return s(pe)}:function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":s(pe)})(de)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.split"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=(E=t("../core/main"))&&E.__esModule?E:{default:E},h=b(t("../core/constants")),N=b(t("opentype.js"));function Be(){var de;return typeof WeakMap!="function"?null:(de=new WeakMap,Be=function(){return de},de)}function b(de){if(de&&de.__esModule)return de;if(de===null||p(de)!=="object"&&typeof de!="function")return{default:de};var pe=Be();if(pe&&pe.has(de))return pe.get(de);var Ye,me,Le={},nt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(Ye in de)Object.prototype.hasOwnProperty.call(de,Ye)&&((me=nt?Object.getOwnPropertyDescriptor(de,Ye):null)&&(me.get||me.set)?Object.defineProperty(Le,Ye,me):Le[Ye]=de[Ye]);return Le.default=de,pe&&pe.set(de,Le),Le}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),d.default.prototype.loadFont=function(de,pe,Ye){d.default._validateParameters("loadFont",arguments);var me=new d.default.Font(this),Le=this;return N.load(de,function(ft,yt){if(ft)return d.default._friendlyFileLoadError(4,de),Ye!==void 0?Ye(ft):void console.error(ft,de);me.font=yt,pe!==void 0&&pe(me),Le._decrementPreload();var ft=de.split("\\").pop().split("/").pop(),yt=ft.lastIndexOf("."),gt=yt<1?null:ft.slice(yt+1);["ttf","otf","woff","woff2"].includes(gt)&&(gt=ft.slice(0,yt!==-1?yt:0),(ft=document.createElement("style")).appendChild(document.createTextNode(`
@font-face {
font-family: `.concat(gt,`;
src: url(`).concat(de,`);
}
`))),document.head.appendChild(ft))}),me},d.default.prototype.text=function(de,pe,Ye,me,Le){var nt;return d.default._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?(nt=this._renderer).text.apply(nt,arguments):this},d.default.prototype.textFont=function(de,pe){if(d.default._validateParameters("textFont",arguments),arguments.length){if(de)return this._renderer._setProperty("_textFont",de),pe&&(this._renderer._setProperty("_textSize",pe),this._renderer._leadingSet||this._renderer._setProperty("_textLeading",pe*h._DEFAULT_LEADMULT)),this._renderer._applyTextProperties();throw new Error("null font passed to textFont")}return this._renderer._textFont};var E=d.default;u.default=E},{"../core/constants":272,"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.slice":169,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,"opentype.js":257}],321:[function(t,l,u){function s(mt){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(wt){return typeof wt}:function(wt){return wt&&typeof Symbol=="function"&&wt.constructor===Symbol&&wt!==Symbol.prototype?"symbol":typeof wt})(mt)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.function.name"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var p=(p=t("../core/main"))&&p.__esModule?p:{default:p},d=function(mt){if(mt&&mt.__esModule)return mt;if(mt===null||N(mt)!=="object"&&typeof mt!="function")return{default:mt};var wt=h();if(wt&&wt.has(mt))return wt.get(mt);var St,bt={},Ct=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(St in mt){var Et;Object.prototype.hasOwnProperty.call(mt,St)&&((Et=Ct?Object.getOwnPropertyDescriptor(mt,St):null)&&(Et.get||Et.set)?Object.defineProperty(bt,St,Et):bt[St]=mt[St])}return bt.default=mt,wt&&wt.set(mt,bt),bt}(t("../core/constants"));function h(){var mt;return typeof WeakMap!="function"?null:(mt=new WeakMap,h=function(){return mt},mt)}function N(mt){return(N=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(wt){return s(wt)}:function(wt){return wt&&typeof Symbol=="function"&&wt.constructor===Symbol&&wt!==Symbol.prototype?"symbol":s(wt)})(mt)}function Be(mt,wt){for(var St=0;St<wt.length;St++){var bt=wt[St];bt.enumerable=bt.enumerable||!1,bt.configurable=!0,"value"in bt&&(bt.writable=!0),Object.defineProperty(mt,bt.key,bt)}}function b(mt,wt){var St=mt.length;return mt[wt<0?wt%St+St:wt%St]}function E(mt,wt,St,bt){var Ct,Et,It;return bt?(E.tmpPoint1===void 0&&(E.tmpPoint1=[],E.tmpPoint2=[]),Et=E.tmpPoint1,It=E.tmpPoint2,Et.x=wt.x-mt.x,Et.y=wt.y-mt.y,It.x=St.x-wt.x,It.y=St.y-wt.y,Ct=Et.x*It.x+Et.y*It.y,Et=Math.sqrt(Et.x*Et.x+Et.y*Et.y),It=Math.sqrt(It.x*It.x+It.y*It.y),Math.acos(Ct/(Et*It))<bt):(wt[0]-mt[0])*(St[1]-mt[1])-(St[0]-mt[0])*(wt[1]-mt[1])==0}function de(Rt,Vt,Lt,Jt,er,Et,It,Dt,Pt){var qt=1-Pt,Gt=Math.pow(qt,3),Ut=Math.pow(qt,2),vt=Pt*Pt,Yt=vt*Pt,Ht=Gt*Rt+3*Ut*Pt*Lt+3*qt*Pt*Pt*er+Yt*It,Gt=Gt*Vt+3*Ut*Pt*Jt+3*qt*Pt*Pt*Et+Yt*Dt,Ut=Rt+2*Pt*(Lt-Rt)+vt*(er-2*Lt+Rt),Yt=Vt+2*Pt*(Jt-Vt)+vt*(Et-2*Jt+Vt),Zt=Lt+2*Pt*(er-Lt)+vt*(It-2*er+Lt),vt=Jt+2*Pt*(Et-Jt)+vt*(Dt-2*Et+Jt),Rt=qt*Rt+Pt*Lt,Lt=qt*Vt+Pt*Jt,Vt=qt*er+Pt*It,Jt=qt*Et+Pt*Dt,er=90-180*Math.atan2(Ut-Zt,Yt-vt)/Math.PI;return(Zt<Ut||Yt<vt)&&(er+=180),{x:Ht,y:Gt,m:{x:Ut,y:Yt},n:{x:Zt,y:vt},start:{x:Rt,y:Lt},end:{x:Vt,y:Jt},alpha:er}}function pe(mt,wt,St,bt,Ct,Et,It,Dt,Pt){return Pt==null?yt(mt,wt,St,bt,Ct,Et,It,Dt):de(mt,wt,St,bt,Ct,Et,It,Dt,function(qt,Ht,Gt,Ut,Yt,Zt,vt,Rt,Lt){if(!(Lt<0||yt(qt,Ht,Gt,Ut,Yt,Zt,vt,Rt)<Lt)){var Vt,Jt=.5,er=1-Jt;for(Vt=yt(qt,Ht,Gt,Ut,Yt,Zt,vt,Rt,er);.01<Math.abs(Vt-Lt);)Vt=yt(qt,Ht,Gt,Ut,Yt,Zt,vt,Rt,er+=(Vt<Lt?1:-1)*(Jt/=2));return er}}(mt,wt,St,bt,Ct,Et,It,Dt,Pt))}function Ye(mt,wt,St){for(var bt,Ct,Et,It,Dt,Pt=0,qt=0,Ht=(mt=function(Gt,Ut){function Yt(_r,sr,jr){var Nr,kr;if(!_r)return["C",sr.x,sr.y,sr.x,sr.y,sr.x,sr.y];switch(_r[0]in{T:1,Q:1}||(sr.qx=sr.qy=null),_r[0]){case"M":sr.X=_r[1],sr.Y=_r[2];break;case"A":_r=["C"].concat(Le.apply(0,[sr.x,sr.y].concat(_r.slice(1))));break;case"S":kr=jr==="C"||jr==="S"?(Nr=2*sr.x-sr.bx,2*sr.y-sr.by):(Nr=sr.x,sr.y),_r=["C",Nr,kr].concat(_r.slice(1));break;case"T":jr==="Q"||jr==="T"?(sr.qx=2*sr.x-sr.qx,sr.qy=2*sr.y-sr.qy):(sr.qx=sr.x,sr.qy=sr.y),_r=["C"].concat(ft(sr.x,sr.y,sr.qx,sr.qy,_r[1],_r[2]));break;case"Q":sr.qx=_r[1],sr.qy=_r[2],_r=["C"].concat(ft(sr.x,sr.y,_r[1],_r[2],_r[3],_r[4]));break;case"L":_r=["C"].concat(tt(sr.x,sr.y,_r[1],_r[2]));break;case"H":_r=["C"].concat(tt(sr.x,sr.y,_r[1],sr.y));break;case"V":_r=["C"].concat(tt(sr.x,sr.y,sr.x,_r[1]));break;case"Z":_r=["C"].concat(tt(sr.x,sr.y,sr.X,sr.Y))}return _r}function Zt(_r,sr){if(7<_r[sr].length){_r[sr].shift();for(var jr=_r[sr];jr.length;)ur[sr]="A",Vt&&(yr[sr]="A"),_r.splice(sr++,0,["C"].concat(jr.splice(0,6)));_r.splice(sr,1),Rt=Math.max(Lt.length,Vt&&Vt.length||0)}}function vt(_r,sr,jr,Nr,kr){_r&&sr&&_r[kr][0]==="M"&&sr[kr][0]!=="M"&&(sr.splice(kr,0,["M",Nr.x,Nr.y]),jr.bx=0,jr.by=0,jr.x=_r[kr][1],jr.y=_r[kr][2],Rt=Math.max(Lt.length,Vt&&Vt.length||0))}var Rt,Lt=me(Gt),Vt=Ut&&me(Ut),Jt={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},er={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},ur=[],yr=[],Qt="",nr="";Rt=Math.max(Lt.length,Vt&&Vt.length||0);for(var or=0;or<Rt;or++){(Qt=Lt[or]?Lt[or][0]:Qt)!=="C"&&(ur[or]=Qt,or&&(nr=ur[or-1])),Lt[or]=Yt(Lt[or],Jt,nr),ur[or]!=="A"&&Qt==="C"&&(ur[or]="C"),Zt(Lt,or),Vt&&((Qt=Vt[or]?Vt[or][0]:Qt)!=="C"&&(yr[or]=Qt,or&&(nr=yr[or-1])),Vt[or]=Yt(Vt[or],er,nr),yr[or]!=="A"&&Qt==="C"&&(yr[or]="C"),Zt(Vt,or)),vt(Lt,Vt,Jt,er,or),vt(Vt,Lt,er,Jt,or);var Wt=Lt[or],ir=Vt&&Vt[or],br=Wt.length,Sr=Vt&&ir.length;Jt.x=Wt[br-2],Jt.y=Wt[br-1],Jt.bx=parseFloat(Wt[br-4])||Jt.x,Jt.by=parseFloat(Wt[br-3])||Jt.y,er.bx=Vt&&(parseFloat(ir[Sr-4])||er.x),er.by=Vt&&(parseFloat(ir[Sr-3])||er.y),er.x=Vt&&ir[Sr-2],er.y=Vt&&ir[Sr-1]}return Vt?[Lt,Vt]:Lt}(mt)).length;qt<Ht;qt++){if((Et=mt[qt])[0]==="M")bt=+Et[1],Ct=+Et[2];else{if(wt<Pt+(It=pe(bt,Ct,Et[1],Et[2],Et[3],Et[4],Et[5],Et[6]))&&!St)return{x:(Dt=pe(bt,Ct,Et[1],Et[2],Et[3],Et[4],Et[5],Et[6],wt-Pt)).x,y:Dt.y,alpha:Dt.alpha};Pt+=It,bt=+Et[5],Ct=+Et[6]}Et.shift()}return Dt=(Dt=St?Pt:de(bt,Ct,Et[0],Et[1],Et[2],Et[3],Et[4],Et[5],1)).alpha?{x:Dt.x,y:Dt.y,alpha:Dt.alpha}:Dt}function me(mt){var wt=[],St=0,bt=0,Ct=0,Et=0,It=0;if(mt){mt[0][0]==="M"&&(Ct=St=+mt[0][1],Et=bt=+mt[0][2],It++,wt[0]=["M",St,bt]);for(var Dt,Pt,qt=mt.length===3&&mt[0][0]==="M"&&mt[1][0].toUpperCase()==="R"&&mt[2][0].toUpperCase()==="Z",Ht=It,Gt=mt.length;Ht<Gt;Ht++){if(wt.push(Dt=[]),(Pt=mt[Ht])[0]!==Pt[0].toUpperCase())switch(Dt[0]=Pt[0].toUpperCase(),Dt[0]){case"A":Dt[1]=Pt[1],Dt[2]=Pt[2],Dt[3]=Pt[3],Dt[4]=Pt[4],Dt[5]=Pt[5],Dt[6]=+(Pt[6]+St),Dt[7]=+(Pt[7]+bt);break;case"V":Dt[1]=+Pt[1]+bt;break;case"H":Dt[1]=+Pt[1]+St;break;case"R":for(var Ut,Yt=2,Zt=(Ut=[St,bt].concat(Pt.slice(1))).length;Yt<Zt;Yt++)Ut[Yt]=+Ut[Yt]+St,Ut[++Yt]=+Ut[Yt]+bt;wt.pop(),wt=wt.concat(nt(Ut,qt));break;case"M":Ct=+Pt[1]+St,Et=+Pt[2]+bt;break;default:for(var vt=1,Rt=Pt.length;vt<Rt;vt++)Dt[vt]=+Pt[vt]+(vt%2?St:bt)}else if(Pt[0]==="R")Ut=[St,bt].concat(Pt.slice(1)),wt.pop(),wt=wt.concat(nt(Ut,qt)),Dt=["R"].concat(Pt.slice(-2));else for(var Lt=0,Vt=Pt.length;Lt<Vt;Lt++)Dt[Lt]=Pt[Lt];switch(Dt[0]){case"Z":St=Ct,bt=Et;break;case"H":St=Dt[1];break;case"V":bt=Dt[1];break;case"M":Ct=Dt[Dt.length-2],Et=Dt[Dt.length-1];break;default:St=Dt[Dt.length-2],bt=Dt[Dt.length-1]}}}return wt}function Le(mt,wt,St,bt,Vt,ur,Jt,Dt,Pt,qt){function Ht(Sr,_r,sr){return{x:Sr*Math.cos(sr)-_r*Math.sin(sr),y:Sr*Math.sin(sr)+_r*Math.cos(sr)}}var Gt,Rt=Math.PI,Lt=120*Rt/180,Ut=Rt/180*(+Vt||0),Yt=[],Zt=(qt?(or=qt[0],Gt=qt[1],Qt=qt[2],nr=qt[3]):(mt=(er=Ht(mt,wt,-Ut)).x,wt=er.y,1<(Zt=(vt=(mt-(Dt=(er=Ht(Dt,Pt,-Ut)).x))/2)*vt/(St*St)+(er=(wt-(Pt=er.y))/2)*er/(bt*bt))&&(St*=Zt=Math.sqrt(Zt),bt*=Zt),Zt=St*St,yr=bt*bt,Qt=(ur=(ur===Jt?-1:1)*Math.sqrt(Math.abs((Zt*yr-Zt*er*er-yr*vt*vt)/(Zt*er*er+yr*vt*vt))))*St*er/bt+(mt+Dt)/2,nr=ur*-bt*vt/St+(wt+Pt)/2,or=Math.asin(((wt-nr)/bt).toFixed(9)),Gt=Math.asin(((Pt-nr)/bt).toFixed(9)),(or=mt<Qt?Rt-or:or)<0&&(or=2*Rt+or),(Gt=Dt<Qt?Rt-Gt:Gt)<0&&(Gt=2*Rt+Gt),Jt&&Gt<or&&(or-=2*Rt),!Jt&&or<Gt&&(Gt-=2*Rt)),Gt-or),vt=(Math.abs(Zt)>Lt&&(yr=Gt,er=Dt,ur=Pt,Gt=or+Lt*(Jt&&or<Gt?1:-1),Yt=Le(Dt=Qt+St*Math.cos(Gt),Pt=nr+bt*Math.sin(Gt),St,bt,Vt,0,Jt,er,ur,[Gt,yr,Qt,nr])),Zt=Gt-or,Math.cos(or)),Rt=Math.sin(or),Lt=Math.cos(Gt),Vt=Math.sin(Gt),Jt=Math.tan(Zt/4),er=4/3*St*Jt,ur=4/3*bt*Jt,yr=[mt,wt],Qt=[mt+er*Rt,wt-ur*vt],nr=[Dt+er*Vt,Pt-ur*Lt],or=[Dt,Pt];if(Qt[0]=2*yr[0]-Qt[0],Qt[1]=2*yr[1]-Qt[1],qt)return[Qt,nr,or].concat(Yt);for(var Wt=[],ir=0,br=(Yt=[Qt,nr,or].concat(Yt).join().split(",")).length;ir<br;ir++)Wt[ir]=ir%2?Ht(Yt[ir-1],Yt[ir],Ut).y:Ht(Yt[ir],Yt[ir+1],Ut).x;return Wt}function nt(mt,wt){for(var St=[],bt=0,Ct=mt.length;bt<Ct-2*!wt;bt+=2){var Et=[{x:+mt[bt-2],y:+mt[bt-1]},{x:+mt[bt],y:+mt[bt+1]},{x:+mt[bt+2],y:+mt[bt+3]},{x:+mt[bt+4],y:+mt[bt+5]}];wt?bt?Ct-4===bt?Et[3]={x:+mt[0],y:+mt[1]}:Ct-2===bt&&(Et[2]={x:+mt[0],y:+mt[1]},Et[3]={x:+mt[2],y:+mt[3]}):Et[0]={x:+mt[Ct-2],y:+mt[Ct-1]}:Ct-4===bt?Et[3]=Et[2]:bt||(Et[0]={x:+mt[bt],y:+mt[bt+1]}),St.push(["C",(-Et[0].x+6*Et[1].x+Et[2].x)/6,(-Et[0].y+6*Et[1].y+Et[2].y)/6,(Et[1].x+6*Et[2].x-Et[3].x)/6,(Et[1].y+6*Et[2].y-Et[3].y)/6,Et[2].x,Et[2].y])}return St}function tt(mt,wt,St,bt){return[mt,wt,St,bt,St,bt]}function ft(mt,wt,St,bt,Ct,Et){return[1/3*mt+2/3*St,1/3*wt+2/3*bt,1/3*Ct+2/3*St,1/3*Et+2/3*bt,Ct,Et]}function yt(mt,wt,St,bt,Ct,Et,It,Dt,Pt){for(var qt=(Pt=1<(Pt=Pt??1)?1:Pt<0?0:Pt)/2,Ht=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Gt=0,Ut=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],Yt=0;Yt<12;Yt++){var vt=qt*Ht[Yt]+qt,Zt=gt(vt,mt,St,Ct,It),vt=gt(vt,wt,bt,Et,Dt);Gt+=Ut[Yt]*Math.sqrt(Zt*Zt+vt*vt)}return qt*Gt}function gt(mt,wt,St,bt,Ct){return mt*(mt*(-3*wt+9*St-9*bt+3*Ct)+6*wt-12*St+6*bt)-3*wt+3*St}p.default.Font=function(){function mt(bt){if(!(this instanceof mt))throw new TypeError("Cannot call a class as a function");this.parent=bt,this.cache={},this.font=void 0}var wt,St;return wt=mt,(St=[{key:"textBounds",value:function(bt){var Ct=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,Et=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,qt=3<arguments.length?arguments[3]:void 0,It=4<arguments.length?arguments[4]:void 0,Dt=It&&It.renderer&&It.renderer._pInst||this.parent,Pt=Dt._renderer.drawingContext,qt=(Pt.textAlign||d.LEFT,Pt.textBaseline||d.BASELINE,qt||Dt._renderer._textSize);if(!er){for(var Ht=[],Gt=[],Ut=[],Yt=(Ut[0]=[],[]),Zt=this._scale(qt),vt=Dt._renderer.textLeading(),Rt=0,Lt=(this.font.forEachGlyph(bt,Ct,Et,qt,It,function(Qt,nr,or,Wt){var ir=Qt.getMetrics();Qt.index===0?Ut[Rt+=1]=[]:(Ut[Rt].push(nr+ir.xMin*Zt),Ut[Rt].push(nr+ir.xMax*Zt),Yt.push(or+Rt*vt+-ir.yMin*Zt),Yt.push(or+Rt*vt+-ir.yMax*Zt))}),0<Ut[Rt].length&&(Ht[Rt]=Math.min.apply(null,Ut[Rt]),Gt[Rt]=Math.max.apply(null,Ut[Rt])),0),Vt=0;Vt<=Rt;Vt++){Ht[Vt]=Math.min.apply(null,Ut[Vt]),Gt[Vt]=Math.max.apply(null,Ut[Vt]);var Jt=Gt[Vt]-Ht[Vt];Lt<Jt&&(Lt=Jt)}var Pt=Math.min.apply(null,Ht),er={x:Pt,y:Et=Math.min.apply(null,Yt),h:Math.max.apply(null,Yt)-Et,w:Lt,advance:Pt-Ct},qt=this._handleAlignment(Dt._renderer,bt,er.x,er.y,er.w+er.advance);er.x=qt.x,er.y=qt.y}return er}},{key:"textToPoints",value:function(bt,Ct,Et,It,Dt){var Pt,qt=Ct,Ht=[],Gt=this.parent,Ut=bt.split(/\r?\n|\r|\n/g);It=It||this.parent._renderer._textSize;for(var Yt,Zt,vt,Rt=0;Rt<Ut.length;Rt++){var Lt=0;Ct=qt;for(var Vt=(Vt=Ut[Rt]).replace("	","  "),Jt=this._getGlyphs(Vt),er=0;er<Jt.length;er++){if(Zt=Vt,!((vt=Jt)[Yt=er].name&&vt[Yt].name==="space"||Zt.length===vt.length&&Zt[Yt]===" "))for(var ur=function(or){for(var Wt,ir=[],br=0;br<or.length;br++)or[br].type==="M"&&(Wt&&ir.push(Wt),Wt=[]),Wt.push(function(Sr){var _r=[Sr.type];return Sr.type==="M"||Sr.type==="L"?_r.push(Sr.x,Sr.y):Sr.type==="C"?_r.push(Sr.x1,Sr.y1,Sr.x2,Sr.y2,Sr.x,Sr.y):Sr.type==="Q"&&_r.push(Sr.x1,Sr.y1,Sr.x,Sr.y),_r}(or[br]));return ir.push(Wt),ir}(Jt[er].getPath(Ct,Et,It).commands),yr=0;yr<ur.length;yr++)for(var Qt=function(or,Wt){for(var Wt=function(jr,Nr){if(N(jr)!=="object")jr=Nr;else for(var kr in Nr)jr[kr]===void 0&&(jr[kr]=Nr[kr]);return jr}(Wt,{sampleFactor:.1,simplifyThreshold:0}),ir=Ye(or,0,1),br=ir/(ir*Wt.sampleFactor),Sr=[],_r=0;_r<ir;_r+=br)Sr.push(Ye(or,_r));return Wt.simplifyThreshold&&function(sr){for(var jr=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,Nr=0,kr=sr.length-1;3<sr.length&&0<=kr;--kr)E(b(sr,kr-1),b(sr,kr),b(sr,kr+1),jr)&&(sr.splice(kr%sr.length,1),Nr++)}(Sr,Wt.simplifyThreshold),Sr}(ur[yr],Dt),nr=0;nr<Qt.length;nr++)Qt[nr].x+=Lt,Pt=this._handleAlignment(Gt._renderer,Vt,Qt[nr].x,Qt[nr].y),Qt[nr].x=Pt.x,Qt[nr].y=Pt.y,Ht.push(Qt[nr]);Lt+=Jt[er].advanceWidth*this._scale(It)}Et+=this.parent._renderer._textLeading}return Ht}},{key:"_getGlyphs",value:function(bt){return this.font.stringToGlyphs(bt)}},{key:"_getPath",value:function(bt,Pt,Et,It){var Dt=(It&&It.renderer&&It.renderer._pInst||this.parent)._renderer,Pt=this._handleAlignment(Dt,bt,Pt,Et);return this.font.getPath(bt,Pt.x,Pt.y,Dt._textSize,It)}},{key:"_getPathData",value:function(bt,Ct,Et,It){var Dt=3;return typeof bt=="string"&&2<arguments.length?bt=this._getPath(bt,Ct,Et,It):N(Ct)==="object"&&(It=Ct),It&&typeof It.decimals=="number"&&(Dt=It.decimals),bt.toPathData(Dt)}},{key:"_getSVG",value:function(bt,Ct,Et,It){var Dt=3;return typeof bt=="string"&&2<arguments.length?bt=this._getPath(bt,Ct,Et,It):N(Ct)==="object"&&(It=Ct),It&&(typeof It.decimals=="number"&&(Dt=It.decimals),typeof It.strokeWidth=="number"&&(bt.strokeWidth=It.strokeWidth),It.fill!==void 0&&(bt.fill=It.fill),It.stroke!==void 0&&(bt.stroke=It.stroke)),bt.toSVG(Dt)}},{key:"_renderPath",value:function(qt,Gt,Ut,It){var Dt=It&&It.renderer||this.parent._renderer,Pt=Dt.drawingContext,qt=(N(qt)==="object"&&qt.commands?qt:this._getPath(qt,Gt,Ut,It)).commands,Ht=(Dt._clipping||Pt.beginPath(),!0),Gt=!1,Ut=void 0;try{for(var Yt,Zt=qt[Symbol.iterator]();!(Ht=(Yt=Zt.next()).done);Ht=!0){var vt=Yt.value;vt.type==="M"?Pt.moveTo(vt.x,vt.y):vt.type==="L"?Pt.lineTo(vt.x,vt.y):vt.type==="C"?Pt.bezierCurveTo(vt.x1,vt.y1,vt.x2,vt.y2,vt.x,vt.y):vt.type==="Q"?Pt.quadraticCurveTo(vt.x1,vt.y1,vt.x,vt.y):vt.type==="Z"&&Pt.closePath()}}catch(Rt){Gt=!0,Ut=Rt}finally{try{Ht||Zt.return==null||Zt.return()}finally{if(Gt)throw Ut}}return Dt._doStroke&&Dt._strokeSet&&!Dt._clipping&&Pt.stroke(),Dt._doFill&&!Dt._clipping&&(Dt._fillSet||Dt._setFill(d._DEFAULT_TEXT_FILL),Pt.fill()),this}},{key:"_textWidth",value:function(bt,Ct){return this.font.getAdvanceWidth(bt,Ct)}},{key:"_textAscent",value:function(bt){return this.font.ascender*this._scale(bt)}},{key:"_textDescent",value:function(bt){return-this.font.descender*this._scale(bt)}},{key:"_scale",value:function(bt){return 1/this.font.unitsPerEm*(bt||this.parent._renderer._textSize)}},{key:"_handleAlignment",value:function(bt,Ct,Et,It,Dt){var Pt=bt._textSize;switch(Dt===void 0&&(Dt=this._textWidth(Ct,Pt)),bt._textAlign){case d.CENTER:Et-=Dt/2;break;case d.RIGHT:Et-=Dt}switch(bt._textBaseline){case d.TOP:It+=this._textAscent(Pt);break;case d.CENTER:It+=this._textAscent(Pt)/2;break;case d.BOTTOM:It-=this._textDescent(Pt)}return{x:Et,y:It}}}])&&Be(wt.prototype,St),mt}(),t=p.default,u.default=t},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.function.name":174,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],322:[function(t,l,u){t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.object.to-string"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.append=function(s,p){return s.push(p),s},t.default.prototype.arrayCopy=function(s,p,d,h,N){var Be,b;s=N!==void 0?(b=Math.min(N,s.length),Be=h,s.slice(p,b+p)):(b=d!==void 0?(b=d,Math.min(b,s.length)):s.length,d=p,s.slice(Be=0,b)),Array.prototype.splice.apply(d,[Be,b].concat(s))},t.default.prototype.concat=function(s,p){return s.concat(p)},t.default.prototype.reverse=function(s){return s.reverse()},t.default.prototype.shorten=function(s){return s.pop(),s},t.default.prototype.shuffle=function(s,p){for(var d,h,N=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(s),Be=(s=p||N?s:s.slice()).length;1<Be;)d=this.random(0,1)*Be|0,h=s[--Be],s[Be]=s[d],s[d]=h;return s},t.default.prototype.sort=function(s,h){var d=h?s.slice(0,Math.min(h,s.length)):s,h=h?s.slice(Math.min(h,s.length)):[];return(d=typeof d[0]=="string"?d.sort():d.sort(function(N,Be){return N-Be})).concat(h)},t.default.prototype.splice=function(s,p,d){return Array.prototype.splice.apply(s,[d,0].concat(p)),s},t.default.prototype.subset=function(s,p,d){return d!==void 0?s.slice(p,p+d):s.slice(p,s.length)},t=t.default,u.default=t},{"../core/main":283,"core-js/modules/es.array-buffer.constructor":152,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.to-string":190}],323:[function(t,l,u){t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),t("core-js/modules/es.array.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.repeat"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(t=t("../core/main"))&&t.__esModule?t:{default:t};s.default.prototype.float=function(p){return p instanceof Array?p.map(parseFloat):parseFloat(p)},s.default.prototype.int=function(p){var d=1<arguments.length&&arguments[1]!==void 0?arguments[1]:10;return p===1/0||p==="Infinity"?1/0:p===-1/0||p==="-Infinity"?-1/0:typeof p=="string"?parseInt(p,d):typeof p=="number"?0|p:typeof p=="boolean"?p?1:0:p instanceof Array?p.map(function(h){return s.default.prototype.int(h,d)}):void 0},s.default.prototype.str=function(p){return p instanceof Array?p.map(s.default.prototype.str):String(p)},s.default.prototype.boolean=function(p){return typeof p=="number"?p!==0:typeof p=="string"?p.toLowerCase()==="true":typeof p=="boolean"?p:p instanceof Array?p.map(s.default.prototype.boolean):void 0},s.default.prototype.byte=function(p){return p=s.default.prototype.int(p,10),typeof p=="number"?(p+128)%256-128:p instanceof Array?p.map(s.default.prototype.byte):void 0},s.default.prototype.char=function(p){return typeof p!="number"||isNaN(p)?p instanceof Array?p.map(s.default.prototype.char):typeof p=="string"?s.default.prototype.char(parseInt(p,10)):void 0:String.fromCharCode(p)},s.default.prototype.unchar=function(p){return typeof p=="string"&&p.length===1?p.charCodeAt(0):p instanceof Array?p.map(s.default.prototype.unchar):void 0},s.default.prototype.hex=function(p,d){if(d=d??8,p instanceof Array)return p.map(function(N){return s.default.prototype.hex(N,d)});if(p===1/0||p===-1/0)return(p===1/0?"F":"0").repeat(d);if(typeof p=="number"){p<0&&(p=4294967295+p+1);for(var h=Number(p).toString(16).toUpperCase();h.length<d;)h="0".concat(h);return h=h.length>=d?h.substring(h.length-d,h.length):h}},s.default.prototype.unhex=function(p){return p instanceof Array?p.map(s.default.prototype.unhex):parseInt("0x".concat(p),16)},t=s.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.map":168,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.repeat":203}],324:[function(t,l,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.pad-start"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.constructor"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.pad-start"),t("core-js/modules/es.string.replace"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(b=t("../core/main"))&&b.__esModule?b:{default:b};function p(E,de){return function(pe){if(Array.isArray(pe))return pe}(E)||function(pe,Ye){if(Symbol.iterator in Object(pe)||Object.prototype.toString.call(pe)==="[object Arguments]"){var me=[],Le=!0,nt=!1,tt=void 0;try{for(var ft,yt=pe[Symbol.iterator]();!(Le=(ft=yt.next()).done)&&(me.push(ft.value),!Ye||me.length!==Ye);Le=!0);}catch(gt){nt=!0,tt=gt}finally{try{Le||yt.return==null||yt.return()}finally{if(nt)throw tt}}return me}}(E,de)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(E,de,pe){var Ye,me=E<0,nt=p((E=Math.abs(E)).toString().split("."),2),Le=nt[0],nt=nt[1];return pe===void 0?(Le=Le.padStart(de,"0"),Ye=nt?Le+"."+nt:Le,me?"-"+Ye:Ye):(Le=(Ye=p(E.toFixed(pe).toString().split("."),2))[0],nt=Ye[1],Le=Le.padStart(de,"0"),E=nt===void 0?Le:Le+"."+nt,me?"-"+E:E)}function h(me,de){var pe=(me=me.toString()).indexOf("."),Ye=pe!==-1?me.substring(pe):"",me=(me=pe!==-1?me.substring(0,pe):me).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(de===0)Ye="";else if(de!==void 0)if(de>Ye.length)for(var Le=de-(Ye+=pe===-1?".":"").length+1,nt=0;nt<Le;nt++)Ye+="0";else Ye=Ye.substring(0,de+1);return me+Ye}function N(E){return 0<parseFloat(E)?"+".concat(E.toString()):E.toString()}function Be(E){return 0<=parseFloat(E)?" ".concat(E.toString()):E.toString()}t("../core/friendly_errors/validate_params"),t("../core/friendly_errors/file_errors"),t("../core/friendly_errors/fes_core"),s.default.prototype.join=function(E,de){return s.default._validateParameters("join",arguments),E.join(de)},s.default.prototype.match=function(E,de){return s.default._validateParameters("match",arguments),E.match(de)},s.default.prototype.matchAll=function(E,de){s.default._validateParameters("matchAll",arguments);for(var pe=new RegExp(de,"g"),Ye=pe.exec(E),me=[];Ye!==null;)me.push(Ye),Ye=pe.exec(E);return me},s.default.prototype.nf=function(E,de,pe){return s.default._validateParameters("nf",arguments),E instanceof Array?E.map(function(Ye){return d(Ye,de,pe)}):Object.prototype.toString.call(E)==="[object Arguments]"?E.length===3?this.nf(E[0],E[1],E[2]):E.length===2?this.nf(E[0],E[1]):this.nf(E[0]):d(E,de,pe)},s.default.prototype.nfc=function(E,de){return s.default._validateParameters("nfc",arguments),E instanceof Array?E.map(function(pe){return h(pe,de)}):h(E,de)},s.default.prototype.nfp=function(){for(var E=arguments.length,de=new Array(E),pe=0;pe<E;pe++)de[pe]=arguments[pe];s.default._validateParameters("nfp",de);var Ye=s.default.prototype.nf.apply(this,de);return Ye instanceof Array?Ye.map(N):N(Ye)},s.default.prototype.nfs=function(){for(var E=arguments.length,de=new Array(E),pe=0;pe<E;pe++)de[pe]=arguments[pe];s.default._validateParameters("nfs",de);var Ye=s.default.prototype.nf.apply(this,de);return Ye instanceof Array?Ye.map(Be):Be(Ye)},s.default.prototype.split=function(E,de){return s.default._validateParameters("split",arguments),E.split(de)},s.default.prototype.splitTokens=function(E,de){var pe,Ye;return s.default._validateParameters("splitTokens",arguments),Ye=de!==void 0?(Ye=/\]/g.exec(de=de),(pe=/\[/g.exec(de))&&Ye?(de=de.slice(0,Ye.index)+de.slice(Ye.index+1),pe=/\[/g.exec(de),de=de.slice(0,pe.index)+de.slice(pe.index+1),new RegExp("[\\[".concat(de,"\\]]"),"g")):Ye?(de=de.slice(0,Ye.index)+de.slice(Ye.index+1),new RegExp("[".concat(de,"\\]]"),"g")):pe?(de=de.slice(0,pe.index)+de.slice(pe.index+1),new RegExp("[".concat(de,"\\[]"),"g")):new RegExp("[".concat(de,"]"),"g")):/\s/g,E.split(Ye).filter(function(me){return me})},s.default.prototype.trim=function(E){return s.default._validateParameters("trim",arguments),E instanceof Array?E.map(this.trim):E.trim()};var b=s.default;u.default=b},{"../core/friendly_errors/fes_core":274,"../core/friendly_errors/file_errors":275,"../core/friendly_errors/validate_params":278,"../core/main":283,"core-js/modules/es.array.filter":157,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.constructor":194,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.pad-start":202,"core-js/modules/es.string.replace":204,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],325:[function(t,l,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t},t.default.prototype.day=function(){return new Date().getDate()},t.default.prototype.hour=function(){return new Date().getHours()},t.default.prototype.minute=function(){return new Date().getMinutes()},t.default.prototype.millis=function(){return this._millisStart===-1?0:window.performance.now()-this._millisStart},t.default.prototype.month=function(){return new Date().getMonth()+1},t.default.prototype.second=function(){return new Date().getSeconds()},t.default.prototype.year=function(){return new Date().getFullYear()},t=t.default,u.default=t},{"../core/main":283}],326:[function(t,l,u){function s(E){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(de){return typeof de}:function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de})(E)}function p(E){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(de){return s(de)}:function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":s(de)})(E)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.number.to-fixed"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=(b=t("../core/main"))&&b.__esModule?b:{default:b},h=(t("./p5.Geometry"),function(E){if(E&&E.__esModule)return E;if(E===null||p(E)!=="object"&&typeof E!="function")return{default:E};var de=N();if(de&&de.has(E))return de.get(E);var pe,Ye={},me=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(pe in E){var Le;Object.prototype.hasOwnProperty.call(E,pe)&&((Le=me?Object.getOwnPropertyDescriptor(E,pe):null)&&(Le.get||Le.set)?Object.defineProperty(Ye,pe,Le):Ye[pe]=E[pe])}return Ye.default=E,de&&de.set(E,Ye),Ye}(t("../core/constants")));function N(){var E;return typeof WeakMap!="function"?null:(E=new WeakMap,N=function(){return E},E)}d.default.prototype.beginGeometry=function(){return this._renderer.beginGeometry()},d.default.prototype.endGeometry=function(){return this._renderer.endGeometry()},d.default.prototype.buildGeometry=function(E){return this._renderer.buildGeometry(E)},d.default.prototype.freeGeometry=function(E){this._renderer._freeBuffers(E.gid)},d.default.prototype.plane=function(){var E,de=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,pe=1<arguments.length&&arguments[1]!==void 0?arguments[1]:de,Ye=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,me=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,Le=(this._assert3d("plane"),d.default._validateParameters("plane",arguments),"plane|".concat(Ye,"|").concat(me));return this._renderer.geometryInHash(Le)||((E=new d.default.Geometry(Ye,me,function(){for(var nt,tt,ft=0;ft<=this.detailY;ft++)for(var yt=ft/this.detailY,gt=0;gt<=this.detailX;gt++)nt=gt/this.detailX,tt=new d.default.Vector(nt-.5,yt-.5,0),this.vertices.push(tt),this.uvs.push(nt,yt)})).computeFaces().computeNormals(),Ye<=1&&me<=1?E._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(Le,E)),this._renderer.drawBuffersScaled(Le,de,pe,1),this},d.default.prototype.box=function(E,de,pe,Ye,me){this._assert3d("box"),d.default._validateParameters("box",arguments),E===void 0&&(E=50),de===void 0&&(de=E),pe===void 0&&(pe=de);var Le,nt=this._renderer.attributes&&this._renderer.attributes.perPixelLighting,nt=(me===void 0&&(me=nt?1:4),"box|".concat(Ye=Ye===void 0?nt?1:4:Ye,"|").concat(me));return this._renderer.geometryInHash(nt)||((Le=new d.default.Geometry(Ye,me,function(){var tt=this;this.edges=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]],[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]].forEach(function(ft,yt){for(var yt=4*yt,gt=0;gt<4;gt++){var mt=ft[gt],mt=new d.default.Vector((2*(1&mt)-1)/2,((2&mt)-1)/2,((4&mt)/2-1)/2);tt.vertices.push(mt),tt.uvs.push(1&gt,(2&gt)/2)}tt.faces.push([yt,1+yt,2+yt]),tt.faces.push([2+yt,1+yt,3+yt])})})).computeNormals(),Ye<=4&&me<=4?Le._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(nt,Le)),this._renderer.drawBuffersScaled(nt,E,de,pe),this},d.default.prototype.sphere=function(){var E=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,de=1<arguments.length&&arguments[1]!==void 0?arguments[1]:24,pe=2<arguments.length&&arguments[2]!==void 0?arguments[2]:16;return this._assert3d("sphere"),d.default._validateParameters("sphere",arguments),this.ellipsoid(E,E,E,de,pe),this};function Be(E,de,pe,Ye,me,Le,nt){E=E<=0?1:E,de=de<0?0:de,pe=pe<=0?E:pe,Ye=Ye<3?3:Ye;for(var tt,ft,yt=(Le=Le===void 0||Le)?-2:0,gt=(me=me<1?1:me)+((nt=nt===void 0?de!==0:nt)?2:0),mt=Math.atan2(E-de,pe),wt=Math.sin(mt),St=Math.cos(mt),bt=yt;bt<=gt;++bt){var Ct=bt/me,Et=pe*Ct,It=void 0,It=bt<0?(Ct=Et=0,E):me<bt?(Et=pe,Ct=1,de):E+(de-E)*Ct;for(bt!==-2&&bt!==me+2||(It=0),Et-=pe/2,tt=0;tt<Ye;++tt){var Dt=tt/(Ye-1),qt=2*Math.PI*Dt,Pt=Math.sin(qt),qt=Math.cos(qt),Ht=(this.vertices.push(new d.default.Vector(Pt*It,Et,qt*It)),void 0),Ht=bt<0?new d.default.Vector(0,-1,0):me<bt&&de?new d.default.Vector(0,1,0):new d.default.Vector(Pt*St,wt,qt*St);this.vertexNormals.push(Ht),this.uvs.push(Dt,Ct)}}var Gt=0;if(Le){for(ft=0;ft<Ye;++ft)this.faces.push([Gt+ft,Gt+Ye+(ft+1)%Ye,Gt+Ye+ft]);Gt+=2*Ye}for(bt=0;bt<me;++bt){for(tt=0;tt<Ye;++tt){var Ut=(tt+1)%Ye;this.faces.push([Gt+tt,Gt+Ut,Gt+Ye+Ut]),this.faces.push([Gt+tt,Gt+Ye+Ut,Gt+Ye+tt])}Gt+=Ye}if(nt)for(Gt+=Ye,tt=0;tt<Ye;++tt)this.faces.push([Gt+tt,Gt+(tt+1)%Ye,Gt+Ye])}d.default.prototype.cylinder=function(){var E,de=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,pe=1<arguments.length&&arguments[1]!==void 0?arguments[1]:de,Ye=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,me=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,Le=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],nt=!(5<arguments.length&&arguments[5]!==void 0)||arguments[5],tt=(this._assert3d("cylinder"),d.default._validateParameters("cylinder",arguments),"cylinder|".concat(Ye,"|").concat(me,"|").concat(Le,"|").concat(nt));return this._renderer.geometryInHash(tt)||(E=new d.default.Geometry(Ye,me),Be.call(E,1,1,1,Ye,me,Le,nt),Ye<=24&&me<=16?E._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(tt,E)),this._renderer.drawBuffersScaled(tt,de,pe,de),this},d.default.prototype.cone=function(){var E,de=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,pe=1<arguments.length&&arguments[1]!==void 0?arguments[1]:de,Ye=2<arguments.length&&arguments[2]!==void 0?arguments[2]:24,me=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,Le=!(4<arguments.length&&arguments[4]!==void 0)||arguments[4],nt=(this._assert3d("cone"),d.default._validateParameters("cone",arguments),"cone|".concat(Ye,"|").concat(me,"|").concat(Le));return this._renderer.geometryInHash(nt)||(E=new d.default.Geometry(Ye,me),Be.call(E,1,0,1,Ye,me,Le,!1),Ye<=24&&me<=16?E._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(nt,E)),this._renderer.drawBuffersScaled(nt,de,pe,de),this},d.default.prototype.ellipsoid=function(){var E,de=0<arguments.length&&arguments[0]!==void 0?arguments[0]:50,pe=1<arguments.length&&arguments[1]!==void 0?arguments[1]:de,Ye=2<arguments.length&&arguments[2]!==void 0?arguments[2]:de,me=3<arguments.length&&arguments[3]!==void 0?arguments[3]:24,Le=4<arguments.length&&arguments[4]!==void 0?arguments[4]:16,nt=(this._assert3d("ellipsoid"),d.default._validateParameters("ellipsoid",arguments),"ellipsoid|".concat(me,"|").concat(Le));return this._renderer.geometryInHash(nt)||((E=new d.default.Geometry(me,Le,function(){for(var tt=0;tt<=this.detailY;tt++)for(var ft=tt/this.detailY,yt=Math.PI*ft-Math.PI/2,gt=Math.cos(yt),mt=Math.sin(yt),wt=0;wt<=this.detailX;wt++){var St=wt/this.detailX,Ct=2*Math.PI*St,bt=Math.cos(Ct),Ct=Math.sin(Ct),Ct=new d.default.Vector(gt*Ct,mt,gt*bt);this.vertices.push(Ct),this.vertexNormals.push(Ct),this.uvs.push(St,ft)}})).computeFaces(),me<=24&&Le<=24?E._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(nt,E)),this._renderer.drawBuffersScaled(nt,de,pe,Ye),this},d.default.prototype.torus=function(E,nt,pe,Ye){if(this._assert3d("torus"),d.default._validateParameters("torus",arguments),E===void 0)E=50;else if(!E)return;if(nt===void 0)nt=10;else if(!nt)return;pe===void 0&&(pe=24),Ye===void 0&&(Ye=16);var me,Le=(nt/E).toPrecision(4),nt="torus|".concat(Le,"|").concat(pe,"|").concat(Ye);return this._renderer.geometryInHash(nt)||((me=new d.default.Geometry(pe,Ye,function(){for(var tt=0;tt<=this.detailY;tt++)for(var ft=tt/this.detailY,yt=2*Math.PI*ft,gt=Math.cos(yt),mt=Math.sin(yt),wt=1+Le*gt,St=0;St<=this.detailX;St++){var bt=St/this.detailX,Ct=2*Math.PI*bt,It=Math.cos(Ct),Ct=Math.sin(Ct),Et=new d.default.Vector(wt*It,wt*Ct,Le*mt),It=new d.default.Vector(gt*It,gt*Ct,mt);this.vertices.push(Et),this.vertexNormals.push(It),this.uvs.push(bt,ft)}})).computeFaces(),pe<=24&&Ye<=16?me._makeTriangleEdges()._edgesToVertices():this._renderer._doStroke&&console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(nt,me)),this._renderer.drawBuffersScaled(nt,E,E,E),this},d.default.RendererGL.prototype.point=function(E,de){var pe=[];return pe.push(new d.default.Vector(E,de,2<arguments.length&&arguments[2]!==void 0?arguments[2]:0)),this._drawPoints(pe,this.immediateMode.buffers.point),this},d.default.RendererGL.prototype.triangle=function(nt){var de=nt[0],pe=nt[1],Ye=nt[2],me=nt[3],Le=nt[4],nt=nt[5],tt=(this.geometryInHash("tri")||((tt=new d.default.Geometry(1,1,function(){var gt=[];gt.push(new d.default.Vector(0,0,0)),gt.push(new d.default.Vector(1,0,0)),gt.push(new d.default.Vector(0,1,0)),this.edges=[[0,1],[1,2],[2,0]],this.vertices=gt,this.faces=[[0,1,2]],this.uvs=[0,0,1,0,1,1]}))._edgesToVertices(),tt.computeNormals(),this.createBuffers("tri",tt)),this.uModelMatrix.copy());try{var ft=Math.sign(de*me-Ye*pe+Ye*nt-Le*me+Le*pe-de*nt),yt=new d.default.Matrix([Ye-de,me-pe,0,0,Le-de,nt-pe,0,0,0,0,ft,0,de,pe,0,1]).mult(this.uModelMatrix);this.uModelMatrix=yt,this.drawBuffers("tri")}finally{this.uModelMatrix=tt}return this},d.default.RendererGL.prototype.ellipse=function(E){this.arc(E[0],E[1],E[2],E[3],0,h.TWO_PI,h.OPEN,E[4])},d.default.RendererGL.prototype.arc=function(){var E,de=arguments.length<=0?void 0:arguments[0],pe=arguments.length<=1?void 0:arguments[1],Ye=arguments.length<=2?void 0:arguments[2],me=arguments.length<=3?void 0:arguments[3],Le=arguments.length<=4?void 0:arguments[4],nt=arguments.length<=5?void 0:arguments[5],tt=arguments.length<=6?void 0:arguments[6],ft=(arguments.length<=7?void 0:arguments[7])||25,yt=(Math.abs(nt-Le)>=h.TWO_PI?"".concat(gt="ellipse","|"):"".concat(gt="arc","|").concat(Le,"|").concat(nt,"|").concat(tt,"|")).concat(ft,"|"),gt=(this.geometryInHash(yt)||((E=new d.default.Geometry(ft,1,function(){if(Le.toFixed(10)!==nt.toFixed(10)){tt!==h.PIE&&tt!==void 0||(this.vertices.push(new d.default.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var mt=0;mt<=ft;mt++){var St=(nt-Le)*(mt/ft)+Le,wt=.5+Math.cos(St)/2,St=.5+Math.sin(St)/2;this.vertices.push(new d.default.Vector(wt,St,0)),this.uvs.push([wt,St]),mt<ft-1&&(this.faces.push([0,mt+1,mt+2]),this.edges.push([mt+1,mt+2]))}switch(tt){case h.PIE:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,1]),this.edges.push([this.vertices.length-2,this.vertices.length-1]),this.edges.push([0,this.vertices.length-1]);break;case h.CHORD:this.edges.push([0,1]),this.edges.push([0,this.vertices.length-1]);break;case h.OPEN:this.edges.push([0,1]);break;default:this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.edges.push([this.vertices.length-2,this.vertices.length-1])}}})).computeNormals(),ft<=50?E._edgesToVertices(E):this._doStroke&&console.log("Cannot apply a stroke to an ".concat(gt," with more than 50 detail")),this.createBuffers(yt,E)),this.uModelMatrix.copy());try{this.uModelMatrix.translate([de,pe,0]),this.uModelMatrix.scale(Ye,me,1),this.drawBuffers(yt)}finally{this.uModelMatrix=gt}return this},d.default.RendererGL.prototype.rect=function(E){var de=E[0],pe=E[1],Ye=E[2],me=E[3];if(E[4]===void 0){var tt=this._pInst._glAttributes.perPixelLighting,Le=E[4]||(tt?1:24),nt=E[5]||(tt?1:16),tt="rect|".concat(Le,"|").concat(nt),ft=(this.geometryInHash(tt)||((ft=new d.default.Geometry(Le,nt,function(){for(var Ht=0;Ht<=this.detailY;Ht++)for(var Gt=Ht/this.detailY,Ut=0;Ut<=this.detailX;Ut++){var Yt=Ut/this.detailX,Zt=new d.default.Vector(Yt,Gt,0);this.vertices.push(Zt),this.uvs.push(Yt,Gt)}0<Le&&0<nt&&(this.edges=[[0,Le],[Le,(Le+1)*(nt+1)-1],[(Le+1)*(nt+1)-1,(Le+1)*nt],[(Le+1)*nt,0]])})).computeFaces().computeNormals()._edgesToVertices(),this.createBuffers(tt,ft)),this.uModelMatrix.copy());try{this.uModelMatrix.translate([de,pe,0]),this.uModelMatrix.scale(Ye,me,1),this.drawBuffers(tt)}finally{this.uModelMatrix=ft}}else{var tt=E[4],ft=E[5]===void 0?tt:E[5],yt=E[6]===void 0?ft:E[6],E=E[7]===void 0?yt:E[7],Ct=Ye,gt=me,St=((Ct+=de)<de&&(St=de,de=Ct,Ct=St),(gt+=pe)<pe&&(St=pe,pe=gt,gt=St),Math.min((Ct-de)/2,(gt-pe)/2)),mt=(St<tt&&(tt=St),St<ft&&(ft=St),St<yt&&(yt=St),St<E&&(E=St),de),wt=pe,St=Ct,de=gt,bt=(this.beginShape(),ft!==0?(this.vertex(St-ft,wt),this.quadraticVertex(St,wt,St,wt+ft)):this.vertex(St,wt),yt!==0?(this.vertex(St,de-yt),this.quadraticVertex(St,de,St-yt,de)):this.vertex(St,de),E!==0?(this.vertex(mt+E,de),this.quadraticVertex(mt,de,mt,de-E)):this.vertex(mt,de),tt!==0?(this.vertex(mt,wt+tt),this.quadraticVertex(mt,wt,mt+tt,wt)):this.vertex(mt,wt),!(this.immediateMode.geometry.uvs.length=0)),pe=!1,Ct=void 0;try{for(var Et,It=this.immediateMode.geometry.vertices[Symbol.iterator]();!(bt=(Et=It.next()).done);bt=!0){var Dt=Et.value,Pt=(Dt.x-mt)/Ye,qt=(Dt.y-wt)/me;this.immediateMode.geometry.uvs.push(Pt,qt)}}catch(vt){pe=!0,Ct=vt}finally{try{bt||It.return==null||It.return()}finally{if(pe)throw Ct}}this.endShape(h.CLOSE)}return this},d.default.RendererGL.prototype.quad=function(E,de,pe,Ye,me,Le,nt,tt,ft,yt,gt,mt){var wt=12<arguments.length&&arguments[12]!==void 0?arguments[12]:2,St=13<arguments.length&&arguments[13]!==void 0?arguments[13]:2,bt="quad|".concat(E,"|").concat(de,"|").concat(pe,"|").concat(Ye,"|").concat(me,"|").concat(Le,"|").concat(nt,"|").concat(tt,"|").concat(ft,"|").concat(yt,"|").concat(gt,"|").concat(mt,"|").concat(wt,"|").concat(St);if(!this.geometryInHash(bt)){var Ct=new d.default.Geometry(wt,St,function(){for(var Ut=1/(this.detailX-1),Yt=1/(this.detailY-1),Zt=0;Zt<this.detailY;Zt++)for(var vt=0;vt<this.detailX;vt++){var Rt=vt*Ut,Lt=Zt*Yt;this.vertices.push(new d.default.Vector((1-Rt)*((1-Lt)*E+Lt*yt)+Rt*((1-Lt)*Ye+Lt*nt),(1-Rt)*((1-Lt)*de+Lt*gt)+Rt*((1-Lt)*me+Lt*tt),(1-Rt)*((1-Lt)*pe+Lt*mt)+Rt*((1-Lt)*Le+Lt*ft))),this.uvs.push([Rt,Lt])}});Ct.faces=[];for(var Et=0;Et<St-1;Et++)for(var It=0;It<wt-1;It++){var Dt=It+Et*wt,Pt=It+1+(Et+1)*wt,qt=It+(Et+1)*wt;Ct.faces.push([Dt,It+1+Et*wt,Pt]),Ct.faces.push([Dt,Pt,qt])}Ct.computeNormals();for(var Ht=[Ct.edges.length=0,2,3,1],Gt=0;Gt<Ht.length;Gt++)Ct.edges.push([Ht[Gt],Ht[(Gt+1)%Ht.length]]);Ct._edgesToVertices(),this.createBuffers(bt,Ct)}return this.drawBuffers(bt),this},d.default.RendererGL.prototype.bezier=function(E,de,pe,Ye,me,Le,nt,tt,ft,yt,gt,mt){arguments.length===8&&(gt=tt,yt=nt,tt=Le,nt=me,me=Ye,Ye=pe,pe=Le=ft=mt=0);var wt=this._pInst._bezierDetail||20;this.beginShape();for(var St=0;St<=wt;St++){var bt=Math.pow(1-St/wt,3),Ct=St/wt*3*Math.pow(1-St/wt,2),Et=3*Math.pow(St/wt,2)*(1-St/wt),It=Math.pow(St/wt,3);this.vertex(E*bt+Ye*Ct+nt*Et+yt*It,de*bt+me*Ct+tt*Et+gt*It,pe*bt+Le*Ct+ft*Et+mt*It)}return this.endShape(),this},d.default.RendererGL.prototype.curve=function(E,de,pe,Ye,me,Le,nt,tt,ft,yt,gt,mt){arguments.length===8&&(yt=nt,gt=tt,nt=me,tt=Ye,me=Ye=pe,pe=Le=ft=mt=0);var wt=this._pInst._curveDetail;this.beginShape();for(var St=0;St<=wt;St++){var bt=.5*Math.pow(St/wt,3),Ct=.5*Math.pow(St/wt,2),Et=St/wt*.5;this.vertex(bt*(3*Ye-E-3*nt+yt)+Ct*(2*E-5*Ye+4*nt-yt)+Et*(-E+nt)+2*Ye*.5,bt*(3*me-de-3*tt+gt)+Ct*(2*de-5*me+4*tt-gt)+Et*(-de+tt)+2*me*.5,bt*(3*Le-pe-3*ft+mt)+Ct*(2*pe-5*Le+4*ft-mt)+Et*(-pe+ft)+2*Le*.5)}return this.endShape(),this},d.default.RendererGL.prototype.line=function(){return arguments.length===6?(this.beginShape(h.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]),this.vertex(arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]),this.endShape()):arguments.length===4&&(this.beginShape(h.LINES),this.vertex(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],0),this.vertex(arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],0),this.endShape()),this},d.default.RendererGL.prototype.bezierVertex=function(){if(this.immediateMode._bezierVertex.length===0)throw Error("vertex() must be used once before calling bezierVertex()");var E,de,pe,Ye,me,Le,nt=[],tt=[],ft=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var yt=1/this._lutBezierDetail,gt=yt,mt=1,wt=0;gt<1;){if(Le=parseFloat(gt.toFixed(6)),this._lookUpTableBezier[wt]=this._bezierCoefficients(Le),mt.toFixed(6)===yt.toFixed(6)){Le=parseFloat(mt.toFixed(6))+parseFloat(gt.toFixed(6)),++wt,this._lookUpTableBezier[wt]=this._bezierCoefficients(Le);break}gt+=yt,mt-=yt,++wt}}for(var St=this._lookUpTableBezier.length,bt=[],Ct=0;Ct<4;Ct++)bt.push([]);bt[0]=this.immediateMode.geometry.vertexColors.slice(-4),bt[3]=this.curFillColor.slice();var Et=[];for(Ct=0;Ct<4;Ct++)Et.push([]);if(Et[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),Et[3]=this.curStrokeColor.slice(),ft===6){this.isBezier=!0;var nt=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2],arguments.length<=4?void 0:arguments[4]],tt=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3],arguments.length<=5?void 0:arguments[5]],It=Math.hypot(nt[0]-nt[1],tt[0]-tt[1]),Pt=Math.hypot(nt[1]-nt[2],tt[1]-tt[2]),Dt=Math.hypot(nt[2]-nt[3],tt[2]-tt[3]),Pt=It+Pt+Dt;for(It/=Pt,Dt/=Pt,me=0;me<4;me++)bt[1].push(bt[0][me]*(1-It)+bt[3][me]*It),bt[2].push(bt[0][me]*Dt+bt[3][me]*(1-Dt)),Et[1].push(Et[0][me]*(1-It)+Et[3][me]*It),Et[2].push(Et[0][me]*Dt+Et[3][me]*(1-Dt));for(Ye=0;Ye<St;Ye++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],Ct=E=de=0;Ct<4;Ct++){for(me=0;me<4;me++)this.curFillColor[me]+=this._lookUpTableBezier[Ye][Ct]*bt[Ct][me],this.curStrokeColor[me]+=this._lookUpTableBezier[Ye][Ct]*Et[Ct][me];E+=nt[Ct]*this._lookUpTableBezier[Ye][Ct],de+=tt[Ct]*this._lookUpTableBezier[Ye][Ct]}this.vertex(E,de)}this.curFillColor=bt[3],this.curStrokeColor=Et[3],this.immediateMode._bezierVertex[0]=arguments.length<=4?void 0:arguments[4],this.immediateMode._bezierVertex[1]=arguments.length<=5?void 0:arguments[5]}else if(ft===9){this.isBezier=!0,nt=[this.immediateMode._bezierVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3],arguments.length<=6?void 0:arguments[6]],tt=[this.immediateMode._bezierVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4],arguments.length<=7?void 0:arguments[7]];var qt=[this.immediateMode._bezierVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5],arguments.length<=8?void 0:arguments[8]],Ht=Math.hypot(nt[0]-nt[1],tt[0]-tt[1],qt[0]-qt[1]),Pt=Math.hypot(nt[1]-nt[2],tt[1]-tt[2],qt[1]-qt[2]),Gt=Math.hypot(nt[2]-nt[3],tt[2]-tt[3],qt[2]-qt[3]),ft=Ht+Pt+Gt;for(Ht/=ft,Gt/=ft,me=0;me<4;me++)bt[1].push(bt[0][me]*(1-Ht)+bt[3][me]*Ht),bt[2].push(bt[0][me]*Gt+bt[3][me]*(1-Gt)),Et[1].push(Et[0][me]*(1-Ht)+Et[3][me]*Ht),Et[2].push(Et[0][me]*Gt+Et[3][me]*(1-Gt));for(Ye=0;Ye<St;Ye++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],Ct=E=de=pe=0;Ct<4;Ct++){for(me=0;me<4;me++)this.curFillColor[me]+=this._lookUpTableBezier[Ye][Ct]*bt[Ct][me],this.curStrokeColor[me]+=this._lookUpTableBezier[Ye][Ct]*Et[Ct][me];E+=nt[Ct]*this._lookUpTableBezier[Ye][Ct],de+=tt[Ct]*this._lookUpTableBezier[Ye][Ct],pe+=qt[Ct]*this._lookUpTableBezier[Ye][Ct]}this.vertex(E,de,pe)}this.curFillColor=bt[3],this.curStrokeColor=Et[3],this.immediateMode._bezierVertex[0]=arguments.length<=6?void 0:arguments[6],this.immediateMode._bezierVertex[1]=arguments.length<=7?void 0:arguments[7],this.immediateMode._bezierVertex[2]=arguments.length<=8?void 0:arguments[8]}},d.default.RendererGL.prototype.quadraticVertex=function(){if(this.immediateMode._quadraticVertex.length===0)throw Error("vertex() must be used once before calling quadraticVertex()");var E,de,pe,Ye,me,Le,nt=[],tt=[],ft=arguments.length;if(this._lookUpTableQuadratic.length===0||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var yt=1/this._lutQuadraticDetail,gt=yt,mt=1,wt=0;gt<1;){if(Le=parseFloat(gt.toFixed(6)),this._lookUpTableQuadratic[wt]=this._quadraticCoefficients(Le),mt.toFixed(6)===yt.toFixed(6)){Le=parseFloat(mt.toFixed(6))+parseFloat(gt.toFixed(6)),++wt,this._lookUpTableQuadratic[wt]=this._quadraticCoefficients(Le);break}gt+=yt,mt-=yt,++wt}}for(var St=this._lookUpTableQuadratic.length,bt=[],Ct=0;Ct<3;Ct++)bt.push([]);bt[0]=this.immediateMode.geometry.vertexColors.slice(-4),bt[2]=this.curFillColor.slice();var Et=[];for(Ct=0;Ct<3;Ct++)Et.push([]);if(Et[0]=this.immediateMode.geometry.vertexStrokeColors.slice(-4),Et[2]=this.curStrokeColor.slice(),ft===4){this.isQuadratic=!0;var nt=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=2?void 0:arguments[2]],tt=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=3?void 0:arguments[3]],It=Math.hypot(nt[0]-nt[1],tt[0]-tt[1]);for(It/=It+Math.hypot(nt[1]-nt[2],tt[1]-tt[2]),me=0;me<4;me++)bt[1].push(bt[0][me]*(1-It)+bt[2][me]*It),Et[1].push(Et[0][me]*(1-It)+Et[2][me]*It);for(Ye=0;Ye<St;Ye++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],Ct=E=de=0;Ct<3;Ct++){for(me=0;me<4;me++)this.curFillColor[me]+=this._lookUpTableQuadratic[Ye][Ct]*bt[Ct][me],this.curStrokeColor[me]+=this._lookUpTableQuadratic[Ye][Ct]*Et[Ct][me];E+=nt[Ct]*this._lookUpTableQuadratic[Ye][Ct],de+=tt[Ct]*this._lookUpTableQuadratic[Ye][Ct]}this.vertex(E,de)}this.curFillColor=bt[2],this.curStrokeColor=Et[2],this.immediateMode._quadraticVertex[0]=arguments.length<=2?void 0:arguments[2],this.immediateMode._quadraticVertex[1]=arguments.length<=3?void 0:arguments[3]}else if(ft===6){this.isQuadratic=!0,nt=[this.immediateMode._quadraticVertex[0],arguments.length<=0?void 0:arguments[0],arguments.length<=3?void 0:arguments[3]],tt=[this.immediateMode._quadraticVertex[1],arguments.length<=1?void 0:arguments[1],arguments.length<=4?void 0:arguments[4]];var Dt=[this.immediateMode._quadraticVertex[2],arguments.length<=2?void 0:arguments[2],arguments.length<=5?void 0:arguments[5]],Pt=Math.hypot(nt[0]-nt[1],tt[0]-tt[1],Dt[0]-Dt[1]);for(Pt/=Pt+Math.hypot(nt[1]-nt[2],tt[1]-tt[2],Dt[1]-Dt[2]),me=0;me<4;me++)bt[1].push(bt[0][me]*(1-Pt)+bt[2][me]*Pt),Et[1].push(Et[0][me]*(1-Pt)+Et[2][me]*Pt);for(Ye=0;Ye<St;Ye++){for(this.curFillColor=[0,0,0,0],this.curStrokeColor=[0,0,0,0],Ct=E=de=pe=0;Ct<3;Ct++){for(me=0;me<4;me++)this.curFillColor[me]+=this._lookUpTableQuadratic[Ye][Ct]*bt[Ct][me],this.curStrokeColor[me]+=this._lookUpTableQuadratic[Ye][Ct]*Et[Ct][me];E+=nt[Ct]*this._lookUpTableQuadratic[Ye][Ct],de+=tt[Ct]*this._lookUpTableQuadratic[Ye][Ct],pe+=Dt[Ct]*this._lookUpTableQuadratic[Ye][Ct]}this.vertex(E,de,pe)}this.curFillColor=bt[2],this.curStrokeColor=Et[2],this.immediateMode._quadraticVertex[0]=arguments.length<=3?void 0:arguments[3],this.immediateMode._quadraticVertex[1]=arguments.length<=4?void 0:arguments[4],this.immediateMode._quadraticVertex[2]=arguments.length<=5?void 0:arguments[5]}},d.default.RendererGL.prototype.curveVertex=function(){var E,de,pe,Ye,me,Le,nt=[],tt=[],ft=arguments.length;if(this._lookUpTableBezier.length===0||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var yt=1/this._lutBezierDetail,gt=yt,mt=1,wt=0;gt<1;){if(Le=parseFloat(gt.toFixed(6)),this._lookUpTableBezier[wt]=this._bezierCoefficients(Le),mt.toFixed(6)===yt.toFixed(6)){Le=parseFloat(mt.toFixed(6))+parseFloat(gt.toFixed(6)),++wt,this._lookUpTableBezier[wt]=this._bezierCoefficients(Le);break}gt+=yt,mt-=yt,++wt}}var St=this._lookUpTableBezier.length;if(ft===2){if(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.length===8){for(this.isCurve=!0,nt=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),tt=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),me=0;me<St;me++)de=nt[0]*this._lookUpTableBezier[me][0]+nt[1]*this._lookUpTableBezier[me][1]+nt[2]*this._lookUpTableBezier[me][2]+nt[3]*this._lookUpTableBezier[me][3],pe=tt[0]*this._lookUpTableBezier[me][0]+tt[1]*this._lookUpTableBezier[me][1]+tt[2]*this._lookUpTableBezier[me][2]+tt[3]*this._lookUpTableBezier[me][3],this.vertex(de,pe);for(me=0;me<ft;me++)this.immediateMode._curveVertex.shift()}}else if(ft===3&&(this.immediateMode._curveVertex.push(arguments.length<=0?void 0:arguments[0]),this.immediateMode._curveVertex.push(arguments.length<=1?void 0:arguments[1]),this.immediateMode._curveVertex.push(arguments.length<=2?void 0:arguments[2]),this.immediateMode._curveVertex.length===12)){for(this.isCurve=!0,nt=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),tt=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),E=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),me=0;me<St;me++)de=nt[0]*this._lookUpTableBezier[me][0]+nt[1]*this._lookUpTableBezier[me][1]+nt[2]*this._lookUpTableBezier[me][2]+nt[3]*this._lookUpTableBezier[me][3],pe=tt[0]*this._lookUpTableBezier[me][0]+tt[1]*this._lookUpTableBezier[me][1]+tt[2]*this._lookUpTableBezier[me][2]+tt[3]*this._lookUpTableBezier[me][3],Ye=E[0]*this._lookUpTableBezier[me][0]+E[1]*this._lookUpTableBezier[me][1]+E[2]*this._lookUpTableBezier[me][2]+E[3]*this._lookUpTableBezier[me][3],this.vertex(de,pe,Ye);for(me=0;me<ft;me++)this.immediateMode._curveVertex.shift()}},d.default.RendererGL.prototype.image=function(E,mt,pe,wt,me,Le,nt,tt,ft){this._isErasing&&this.blendMode(this._cachedBlendMode),this._pInst.push(),this._pInst.noLights(),this._pInst.noStroke(),this._pInst.texture(E),this._pInst.textureMode(h.NORMAL);var yt=0,gt=(mt<=E.width&&(yt=mt/E.width),1),mt=(mt+wt<=E.width&&(gt=(mt+wt)/E.width),0),wt=(pe<=E.height&&(mt=pe/E.height),1);pe+me<=E.height&&(wt=(pe+me)/E.height),this.beginShape(),this.vertex(Le,nt,0,yt,mt),this.vertex(Le+tt,nt,0,gt,mt),this.vertex(Le+tt,nt+ft,0,gt,wt),this.vertex(Le,nt+ft,0,yt,wt),this.endShape(h.CLOSE),this._pInst.pop(),this._isErasing&&this.blendMode(h.REMOVE)};var b=d.default;u.default=b},{"../core/constants":272,"../core/main":283,"./p5.Geometry":335,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.math.sign":178,"core-js/modules/es.number.to-fixed":182,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],327:[function(t,l,u){function s(de){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pe){return typeof pe}:function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe})(de)}function p(de){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(pe){return s(pe)}:function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":s(pe)})(de)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.every"),t("core-js/modules/es.array.map"),t("core-js/modules/es.object.assign"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=(E=t("../core/main"))&&E.__esModule?E:{default:E},h=function(de){if(de&&de.__esModule)return de;if(de===null||p(de)!=="object"&&typeof de!="function")return{default:de};var pe=N();if(pe&&pe.has(de))return pe.get(de);var Ye,me={},Le=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(Ye in de){var nt;Object.prototype.hasOwnProperty.call(de,Ye)&&((nt=Le?Object.getOwnPropertyDescriptor(de,Ye):null)&&(nt.get||nt.set)?Object.defineProperty(me,Ye,nt):me[Ye]=de[Ye])}return me.default=de,pe&&pe.set(de,me),me}(t("../core/constants"));function N(){var de;return typeof WeakMap!="function"?null:(de=new WeakMap,N=function(){return de},de)}function Be(de){return function(pe){if(Array.isArray(pe)){for(var Ye=0,me=new Array(pe.length);Ye<pe.length;Ye++)me[Ye]=pe[Ye];return me}}(de)||function(pe){if(Symbol.iterator in Object(pe)||Object.prototype.toString.call(pe)==="[object Arguments]")return Array.from(pe)}(de)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function b(de,pe){for(var Ye=0;Ye<pe.length;Ye++){var me=pe[Ye];me.enumerable=me.enumerable||!1,me.configurable=!0,"value"in me&&(me.writable=!0),Object.defineProperty(de,me.key,me)}}var E=function(){function de(me){if(!(this instanceof de))throw new TypeError("Cannot call a class as a function");(this.renderer=me)._pInst.push(),this.identityMatrix=new d.default.Matrix,me.uModelMatrix=new d.default.Matrix,this.geometry=new d.default.Geometry,this.geometry.gid="_p5_GeometryBuilder_".concat(de.nextGeometryId),de.nextGeometryId++,this.hasTransform=!1}var pe,Ye;return pe=de,(Ye=[{key:"transformVertices",value:function(me){var Le=this;return this.hasTransform?me.map(function(nt){return Le.renderer.uModelMatrix.multiplyPoint(nt)}):me}},{key:"transformNormals",value:function(me){var Le=this;return this.hasTransform?me.map(function(nt){return Le.renderer.uNMatrix.multiplyVec3(nt)}):me}},{key:"addGeometry",value:function(me){for(var Le,nt=this,tt=(this.hasTransform=!this.renderer.uModelMatrix.mat4.every(function(yt,gt){return yt===nt.identityMatrix.mat4[gt]}),this.hasTransform&&this.renderer.uNMatrix.inverseTranspose(this.renderer.uModelMatrix),this.geometry.vertices.length),ft=((Le=this.geometry.vertices).push.apply(Le,Be(this.transformVertices(me.vertices))),(Le=this.geometry.vertexNormals).push.apply(Le,Be(this.transformNormals(me.vertexNormals))),(Le=this.geometry.uvs).push.apply(Le,Be(me.uvs)),this.renderer._doFill&&(Le=this.geometry.faces).push.apply(Le,Be(me.faces.map(function(yt){return yt.map(function(gt){return gt+tt})}))),this.renderer._doStroke&&(Le=this.geometry.edges).push.apply(Le,Be(me.edges.map(function(yt){return yt.map(function(gt){return gt+tt})}))),Be(me.vertexColors));ft.length<4*me.vertices.length;)ft.push.apply(ft,Be(this.renderer.curFillColor));(Le=this.geometry.vertexColors).push.apply(Le,Be(ft))}},{key:"addImmediate",value:function(){var me=this.renderer.immediateMode.geometry,Le=this.renderer.immediateMode.shapeMode,nt=[];if(this.renderer._doFill)if(Le===h.TRIANGLE_STRIP||Le===h.QUAD_STRIP)for(var tt=2;tt<me.vertices.length;tt++)tt%2==0?nt.push([tt,tt-1,tt-2]):nt.push([tt,tt-2,tt-1]);else if(Le===h.TRIANGLE_FAN)for(var ft=2;ft<me.vertices.length;ft++)nt.push([0,ft-1,ft]);else for(var yt=0;yt<me.vertices.length;yt+=3)nt.push([yt,yt+1,yt+2]);this.addGeometry(Object.assign({},me,{faces:nt}))}},{key:"addRetained",value:function(me){this.addGeometry(me.model)}},{key:"finish",value:function(){return this.renderer._pInst.pop(),this.geometry}}])&&b(pe.prototype,Ye),de}();E.nextGeometryId=0,u.default=E},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.every":155,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],328:[function(t,l,u){function s(b){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.math.sign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var p=(Be=t("../core/main"))&&Be.__esModule?Be:{default:Be},d=function(b){if(b&&b.__esModule)return b;if(b===null||N(b)!=="object"&&typeof b!="function")return{default:b};var E=h();if(E&&E.has(b))return E.get(b);var de,pe={},Ye=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(de in b){var me;Object.prototype.hasOwnProperty.call(b,de)&&((me=Ye?Object.getOwnPropertyDescriptor(b,de):null)&&(me.get||me.set)?Object.defineProperty(pe,de,me):pe[de]=b[de])}return pe.default=b,E&&E.set(b,pe),pe}(t("../core/constants"));function h(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,h=function(){return b},b)}function N(b){return(N=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(E){return s(E)}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":s(E)})(b)}p.default.prototype.orbitControl=function(b,E,de,ft){var Ye=this,me=(this._assert3d("orbitControl"),p.default._validateParameters("orbitControl",arguments),this._renderer._curCamera);b===void 0&&(b=1),E===void 0&&(E=b),de===void 0&&(de=1),N(ft)!=="object"&&(ft={}),this.contextMenuDisabled!==!0&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),this.wheelDefaultDisabled!==!0&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var gt=ft.disableTouchActions;this.touchActionsDisabled===!0||gt!==void 0&&!gt||(this.canvas.style["touch-action"]="none",this._setProperty("touchActionsDisabled",!0));var Le,nt,tt,gt=ft.freeRotation,ft=gt!==void 0&&gt,yt=[],gt=(this.touches.forEach(function(It){Ye._renderer.prevTouches.forEach(function(Dt){It.id===Dt.id&&(Dt={x:It.x,y:It.y,px:Dt.x,py:Dt.y},yt.push(Dt))})}),this._renderer.prevTouches=this.touches,0),mt=0,wt=0,St=0,bt=0,Ct=this.height<this.width?this.height:this.width,Et=!1;return 0<yt.length?(Et=0<yt[0].x&&yt[0].x<this.width&&0<yt[0].y&&yt[0].y<this.height,yt.length===1?(mt=-b*((Le=yt[0]).x-Le.px)/Ct,wt=E*(Le.y-Le.py)/Ct):(Le=yt[0],nt=yt[1],gt=-(Math.hypot(Le.x-nt.x,Le.y-nt.y)-Math.hypot(Le.px-nt.px,Le.py-nt.py))*de*4e-4,St=.5*(Le.x+nt.x)-.5*(Le.px+nt.px),bt=.5*(Le.y+nt.y)-.5*(Le.py+nt.py)),0<this.touches.length?Et&&(this._renderer.executeRotateAndMove=!0,this._renderer.executeZoom=!0):(this._renderer.executeRotateAndMove=!1,this._renderer.executeZoom=!1)):(Et=0<this.mouseX&&this.mouseX<this.width&&0<this.mouseY&&this.mouseY<this.height,this._mouseWheelDeltaY!==0?(gt=Math.sign(this._mouseWheelDeltaY)*de,gt*=.01,this._mouseWheelDeltaY=0,Et&&(this._renderer.executeZoom=!0)):this._renderer.executeZoom=!1,this.mouseIsPressed?(this.mouseButton===this.LEFT?(mt=-b*this.movedX/Ct,wt=E*this.movedY/Ct):this.mouseButton===this.RIGHT&&(St=this.movedX,bt=this.movedY*me.yScale),Et&&(this._renderer.executeRotateAndMove=!0)):this._renderer.executeRotateAndMove=!1),gt!==0&&this._renderer.executeZoom&&(this._renderer.zoomVelocity+=gt),.001<Math.abs(this._renderer.zoomVelocity)?(ft?me._orbitFree(0,0,this._renderer.zoomVelocity):me._orbit(0,0,this._renderer.zoomVelocity),me.projMatrix.mat4[15]!==0&&(me.projMatrix.mat4[0]*=Math.pow(10,-this._renderer.zoomVelocity),me.projMatrix.mat4[5]*=Math.pow(10,-this._renderer.zoomVelocity),this._renderer.uPMatrix.mat4[0]=me.projMatrix.mat4[0],this._renderer.uPMatrix.mat4[5]=me.projMatrix.mat4[5]),this._renderer.zoomVelocity*=.85):this._renderer.zoomVelocity=0,mt===0&&wt===0||!this._renderer.executeRotateAndMove||this._renderer.rotateVelocity.add(.6*mt,.6*wt),1e-6<this._renderer.rotateVelocity.magSq()?(ft?me._orbitFree(-this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0):me._orbit(this._renderer.rotateVelocity.x,this._renderer.rotateVelocity.y,0),this._renderer.rotateVelocity.mult(.85)):this._renderer.rotateVelocity.set(0,0),St===0&&bt===0||!this._renderer.executeRotateAndMove||(Le=2*St/this.width,nt=2*-bt/this.height,this._renderer.moveVelocity.add(.15*Le,.15*nt)),1e-6<this._renderer.moveVelocity.magSq()?(de=me._getLocalAxes(),b=me.eyeX-me.centerX,E=me.eyeY-me.centerY,Ct=me.eyeZ-me.centerZ,Et=Math.sqrt(b*b+E*E+Ct*Ct),gt=new p.default.Vector(me.centerX,me.centerY,me.centerZ),gt=me.cameraMatrix.multiplyPoint(gt),(gt=this._renderer.uPMatrix.multiplyAndNormalizePoint(gt)).x-=this._renderer.moveVelocity.x,gt.y-=this._renderer.moveVelocity.y,wt=(mt=this._renderer.uPMatrix.mat4)[15]===0?(tt=(mt[8]+gt.x)/mt[0]*Et,(mt[9]+gt.y)/mt[5]*Et):(tt=(gt.x-mt[12])/mt[0],(gt.y-mt[13])/mt[5]),me.setPosition(me.eyeX+tt*de.x[0]+wt*de.y[0],me.eyeY+tt*de.x[1]+wt*de.y[1],me.eyeZ+tt*de.x[2]+wt*de.y[2]),this._renderer.moveVelocity.mult(.85)):this._renderer.moveVelocity.set(0,0),this},p.default.prototype.debugMode=function(){this._assert3d("debugMode");for(var b=arguments.length,E=new Array(b),de=0;de<b;de++)E[de]=arguments[de];p.default._validateParameters("debugMode",E);for(var pe=this._registeredMethods.post.length-1;0<=pe;pe--)this._registeredMethods.post[pe].toString()!==this._grid().toString()&&this._registeredMethods.post[pe].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(pe,1);E[0]===d.GRID?this.registerMethod("post",this._grid(E[1],E[2],E[3],E[4],E[5])):E[0]===d.AXES?this.registerMethod("post",this._axesIcon(E[1],E[2],E[3],E[4])):(this.registerMethod("post",this._grid(E[0],E[1],E[2],E[3],E[4])),this.registerMethod("post",this._axesIcon(E[5],E[6],E[7],E[8])))},p.default.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var b=this._registeredMethods.post.length-1;0<=b;b--)this._registeredMethods.post[b].toString()!==this._grid().toString()&&this._registeredMethods.post[b].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(b,1)},p.default.prototype._grid=function(b,E,de,pe,Ye){b===void 0&&(b=this.width/2),E===void 0&&(E=Math.round(b/30)<4?4:Math.round(b/30)),de===void 0&&(de=0),pe===void 0&&(pe=0),Ye===void 0&&(Ye=0);var me=b/E,Le=b/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uModelMatrix.reset();for(var nt=0;nt<=E;nt++)this.beginShape(this.LINES),this.vertex(-Le+de,pe,nt*me-Le+Ye),this.vertex(Le+de,pe,nt*me-Le+Ye),this.endShape();for(var tt=0;tt<=E;tt++)this.beginShape(this.LINES),this.vertex(tt*me-Le+de,pe,-Le+Ye),this.vertex(tt*me-Le+de,pe,Le+Ye),this.endShape();this.pop()}},p.default.prototype._axesIcon=function(b,E,de,pe){return b===void 0&&(b=40<this.width/20?this.width/20:40),E===void 0&&(E=-this.width/4),de===void 0&&(de=E),pe===void 0&&(pe=E),function(){this.push(),this._renderer.uModelMatrix.reset(),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(E,de,pe),this.vertex(E+b,de,pe),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(E,de,pe),this.vertex(E,de+b,pe),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(E,de,pe),this.vertex(E,de,pe+b),this.endShape(),this.pop()}};var Be=p.default;u.default=Be},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.splice":171,"core-js/modules/es.math.hypot":176,"core-js/modules/es.math.sign":178,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],329:[function(t,l,u){t("core-js/modules/es.array.filter"),t("core-js/modules/es.array.filter"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(t=t("../core/main"))&&t.__esModule?t:{default:t};s.default.prototype.ambientLight=function(p,d,h,N){this._assert3d("ambientLight"),s.default._validateParameters("ambientLight",arguments);var Be=this.color.apply(this,arguments);return this._renderer.ambientLightColors.push(Be._array[0],Be._array[1],Be._array[2]),this._renderer._enableLighting=!0,this},s.default.prototype.specularColor=function(p,d,h){this._assert3d("specularColor"),s.default._validateParameters("specularColor",arguments);var N=this.color.apply(this,arguments);return this._renderer.specularColors=[N._array[0],N._array[1],N._array[2]],this},s.default.prototype.directionalLight=function(p,Ye,pe,N,Be,b){this._assert3d("directionalLight"),s.default._validateParameters("directionalLight",arguments),p=p instanceof s.default.Color?p:this.color(p,Ye,pe);var E,de,Ye=arguments[arguments.length-1],pe=typeof Ye=="number"?(E=arguments[arguments.length-3],de=arguments[arguments.length-2],arguments[arguments.length-1]):(E=Ye.x,de=Ye.y,Ye.z),Ye=Math.sqrt(E*E+de*de+pe*pe);return this._renderer.directionalLightDirections.push(E/Ye,de/Ye,pe/Ye),this._renderer.directionalLightDiffuseColors.push(p._array[0],p._array[1],p._array[2]),Array.prototype.push.apply(this._renderer.directionalLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},s.default.prototype.pointLight=function(p,pe,Ye,N,Be,b){this._assert3d("pointLight"),s.default._validateParameters("pointLight",arguments),p=p instanceof s.default.Color?p:this.color(p,pe,Ye);var E,de,pe=arguments[arguments.length-1],Ye=typeof pe=="number"?(E=arguments[arguments.length-3],de=arguments[arguments.length-2],arguments[arguments.length-1]):(E=pe.x,de=pe.y,pe.z);return this._renderer.pointLightPositions.push(E,de,Ye),this._renderer.pointLightDiffuseColors.push(p._array[0],p._array[1],p._array[2]),Array.prototype.push.apply(this._renderer.pointLightSpecularColors,this._renderer.specularColors),this._renderer._enableLighting=!0,this},s.default.prototype.imageLight=function(p){this._renderer.activeImageLight=p,this._renderer._enableLighting=!0},s.default.prototype.panorama=function(p){this.filter(this._renderer._getSphereMapping(p))},s.default.prototype.lights=function(){this._assert3d("lights");var p=this.color("rgb(128,128,128)");return this.ambientLight(p),this.directionalLight(p,0,0,-1),this},s.default.prototype.lightFalloff=function(p,d,h){return this._assert3d("lightFalloff"),s.default._validateParameters("lightFalloff",arguments),p<0&&(p=0,console.warn("Value of constant argument in lightFalloff() should be never be negative. Set to 0.")),d<0&&(d=0,console.warn("Value of linear argument in lightFalloff() should be never be negative. Set to 0.")),h<0&&(h=0,console.warn("Value of quadratic argument in lightFalloff() should be never be negative. Set to 0.")),p===0&&d===0&&h===0&&(p=1,console.warn("Either one of the three arguments in lightFalloff() should be greater than zero. Set constant argument to 1.")),this._renderer.constantAttenuation=p,this._renderer.linearAttenuation=d,this._renderer.quadraticAttenuation=h,this},s.default.prototype.spotLight=function(p,d,h,N,Be,b,E,de,pe,Ye,me){this._assert3d("spotLight"),s.default._validateParameters("spotLight",arguments);var Le,nt,tt,ft=arguments.length;switch(ft){case 11:case 10:Le=this.color(p,d,h),nt=new s.default.Vector(N,Be,b),tt=new s.default.Vector(E,de,pe);break;case 9:p instanceof s.default.Color?(Le=p,nt=new s.default.Vector(d,h,N),tt=new s.default.Vector(Be,b,E),Ye=de,me=pe):N instanceof s.default.Vector?(Le=this.color(p,d,h),nt=N,tt=new s.default.Vector(Be,b,E),Ye=de,me=pe):E instanceof s.default.Vector?(Le=this.color(p,d,h),nt=new s.default.Vector(N,Be,b),tt=E,Ye=de,me=pe):(Le=this.color(p,d,h),nt=new s.default.Vector(N,Be,b),tt=new s.default.Vector(E,de,pe));break;case 8:Ye=(tt=p instanceof s.default.Color?(Le=p,nt=new s.default.Vector(d,h,N),new s.default.Vector(Be,b,E)):N instanceof s.default.Vector?(Le=this.color(p,d,h),nt=N,new s.default.Vector(Be,b,E)):(Le=this.color(p,d,h),nt=new s.default.Vector(N,Be,b),E),de);break;case 7:p instanceof s.default.Color&&d instanceof s.default.Vector?(Le=p,nt=d,tt=new s.default.Vector(h,N,Be),Ye=b,me=E):p instanceof s.default.Color&&Be instanceof s.default.Vector?(Le=p,nt=new s.default.Vector(d,h,N),tt=Be,Ye=b,me=E):N instanceof s.default.Vector&&Be instanceof s.default.Vector?(Le=this.color(p,d,h),nt=N,tt=Be,Ye=b,me=E):tt=p instanceof s.default.Color?(Le=p,nt=new s.default.Vector(d,h,N),new s.default.Vector(Be,b,E)):N instanceof s.default.Vector?(Le=this.color(p,d,h),nt=N,new s.default.Vector(Be,b,E)):(Le=this.color(p,d,h),nt=new s.default.Vector(N,Be,b),E);break;case 6:N instanceof s.default.Vector&&Be instanceof s.default.Vector?(Le=this.color(p,d,h),nt=N,tt=Be,Ye=b):p instanceof s.default.Color&&Be instanceof s.default.Vector?(Le=p,nt=new s.default.Vector(d,h,N),tt=Be,Ye=b):p instanceof s.default.Color&&d instanceof s.default.Vector&&(Le=p,nt=d,tt=new s.default.Vector(h,N,Be),Ye=b);break;case 5:p instanceof s.default.Color&&d instanceof s.default.Vector&&h instanceof s.default.Vector?(Le=p,nt=d,tt=h,Ye=N,me=Be):N instanceof s.default.Vector&&Be instanceof s.default.Vector?(Le=this.color(p,d,h),nt=N,tt=Be):p instanceof s.default.Color&&Be instanceof s.default.Vector?(Le=p,nt=new s.default.Vector(d,h,N),tt=Be):p instanceof s.default.Color&&d instanceof s.default.Vector&&(Le=p,nt=d,tt=new s.default.Vector(h,N,Be));break;case 4:Le=p,nt=d,tt=h,Ye=N;break;case 3:Le=p,nt=d,tt=h;break;default:return console.warn("Sorry, input for spotlight() is not in prescribed format. Too ".concat(ft<3?"few":"many"," arguments were provided")),this}return this._renderer.spotLightDiffuseColors.push(Le._array[0],Le._array[1],Le._array[2]),Array.prototype.push.apply(this._renderer.spotLightSpecularColors,this._renderer.specularColors),this._renderer.spotLightPositions.push(nt.x,nt.y,nt.z),tt.normalize(),this._renderer.spotLightDirections.push(tt.x,tt.y,tt.z),Ye===void 0&&(Ye=Math.PI/3),me!==void 0&&me<1?(me=1,console.warn("Value of concentration needs to be greater than 1. Setting it to 1")):me===void 0&&(me=100),Ye=this._renderer._pInst._toRadians(Ye),this._renderer.spotLightAngle.push(Math.cos(Ye)),this._renderer.spotLightConc.push(me),this._renderer._enableLighting=!0,this},s.default.prototype.noLights=function(){this._assert3d("noLights");for(var p=arguments.length,d=new Array(p),h=0;h<p;h++)d[h]=arguments[h];return s.default._validateParameters("noLights",d),this._renderer.activeImageLight=null,this._renderer._enableLighting=!1,this._renderer.ambientLightColors.length=0,this._renderer.specularColors=[1,1,1],this._renderer.directionalLightDirections.length=0,this._renderer.directionalLightDiffuseColors.length=0,this._renderer.directionalLightSpecularColors.length=0,this._renderer.pointLightPositions.length=0,this._renderer.pointLightDiffuseColors.length=0,this._renderer.pointLightSpecularColors.length=0,this._renderer.spotLightPositions.length=0,this._renderer.spotLightDirections.length=0,this._renderer.spotLightDiffuseColors.length=0,this._renderer.spotLightSpecularColors.length=0,this._renderer.spotLightAngle.length=0,this._renderer.spotLightConc.length=0,this._renderer.constantAttenuation=1,this._renderer.linearAttenuation=0,this._renderer.quadraticAttenuation=0,this._renderer._useShininess=1,this._renderer._useMetalness=0,this},t=s.default,u.default=t},{"../core/main":283,"core-js/modules/es.array.filter":157}],330:[function(t,l,u){function s(Ye){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(me){return typeof me}:function(me){return me&&typeof Symbol=="function"&&me.constructor===Symbol&&me!==Symbol.prototype?"symbol":typeof me})(Ye)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.splice"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.promise"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.match"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.trim"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t("regenerator-runtime/runtime");var p=(pe=t("../core/main"))&&pe.__esModule?pe:{default:pe};function d(Ye){return function(me){if(Array.isArray(me)){for(var Le=0,nt=new Array(me.length);Le<me.length;Le++)nt[Le]=me[Le];return nt}}(Ye)||function(me){if(Symbol.iterator in Object(me)||Object.prototype.toString.call(me)==="[object Arguments]")return Array.from(me)}(Ye)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(Ye,me,Le,nt,tt,ft,yt){try{var gt=Ye[ft](yt),mt=gt.value}catch(wt){return void Le(wt)}gt.done?me(mt):Promise.resolve(mt).then(nt,tt)}function N(Ye){return function(){var me=this,Le=arguments;return new Promise(function(nt,tt){var ft=Ye.apply(me,Le);function yt(mt){h(ft,nt,tt,yt,gt,"next",mt)}function gt(mt){h(ft,nt,tt,yt,gt,"throw",mt)}yt(void 0)})}}function Be(Ye){return(Be=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(me){return s(me)}:function(me){return me&&typeof Symbol=="function"&&me.constructor===Symbol&&me!==Symbol.prototype?"symbol":s(me)})(Ye)}function b(Ye,me,Le){for(var nt=2<arguments.length&&Le!==void 0?Le:{},tt={v:[],vt:[],vn:[]},ft={},yt=null,gt=new Set,mt=!1,wt=!1,St=0;St<me.length;++St){var bt=me[St].trim().split(/\b\s+/);if(0<bt.length){if(bt[0]==="usemtl")yt=bt[1];else if(bt[0]==="v"||bt[0]==="vn"){var Ct=new p.default.Vector(parseFloat(bt[1]),parseFloat(bt[2]),parseFloat(bt[3]));tt[bt[0]].push(Ct)}else if(bt[0]==="vt")Ct=[parseFloat(bt[1]),1-parseFloat(bt[2])],tt[bt[0]].push(Ct);else if(bt[0]==="f")for(var Et=3;Et<bt.length;++Et){for(var It=[],Dt=[1,Et-1,Et],Pt=0;Pt<Dt.length;++Pt){for(var qt,Ht=bt[Dt[Pt]],Gt=Ht.split("/"),Ut=0;Ut<Gt.length;Ut++)Gt[Ut]=parseInt(Gt[Ut])-1;ft[Ht]||(ft[Ht]={}),ft[Ht][yt]===void 0?(qt=Ye.vertices.length,Ye.vertices.push(tt.v[Gt[0]].copy()),Ye.uvs.push(tt.vt[Gt[1]]?tt.vt[Gt[1]].slice():[0,0]),Ye.vertexNormals.push(tt.vn[Gt[2]]?tt.vn[Gt[2]].copy():new p.default.Vector),ft[Ht][yt]=qt,It.push(qt),yt&&nt[yt]&&nt[yt].diffuseColor&&gt.add(tt.v[Gt[0]])):It.push(ft[Ht][yt])}if(It[0]!==It[1]&&It[0]!==It[2]&&It[1]!==It[2])if(Ye.faces.push(It),yt&&nt[yt]&&nt[yt].diffuseColor)for(var mt=mt=!0,Yt=nt[yt].diffuseColor,Zt=0;Zt<It.length;Zt++)Ye.vertexColors.push(Yt[0]),Ye.vertexColors.push(Yt[1]),Ye.vertexColors.push(Yt[2]);else wt=!0}}}if(Ye.vertexNormals.length===0&&Ye.computeNormals(),mt===wt)throw new Error("Model coloring is inconsistent. Either all vertices should have colors or none should.")}function E(Ye,me){if(function(or){for(var Wt=new DataView(or),ir=[115,111,108,105,100],br=0;br<5;br++)if(function(Sr,_r,sr){for(var jr=0,Nr=Sr.length;jr<Nr;jr++)if(Sr[jr]!==_r.getUint8(sr+jr,!1))return;return 1}(ir,Wt,br))return;return 1}(me)){for(var Le,nt,tt,ft,yt,gt,mt,wt=Ye,St=new DataView(me),bt=St.getUint32(80,!0),Ct=!1,Et=0;Et<70;Et++)St.getUint32(Et,!1)===1129270351&&St.getUint8(Et+4)===82&&St.getUint8(Et+5)===61&&(Ct=!0,ft=[],yt=St.getUint8(Et+6)/255,gt=St.getUint8(Et+7)/255,mt=St.getUint8(Et+8)/255);for(var It=0;It<bt;It++){for(var Dt,Pt=84+50*It,qt=St.getFloat32(Pt,!0),Ht=St.getFloat32(4+Pt,!0),Gt=St.getFloat32(8+Pt,!0),Ut=(Ct&&(Dt=St.getUint16(48+Pt,!0),tt=(32768&Dt)==0?(Le=(31&Dt)/31,nt=(Dt>>5&31)/31,(Dt>>10&31)/31):(Le=yt,nt=gt,mt)),new p.default.Vector(qt,Ht,Gt)),Yt=1;Yt<=3;Yt++){var Zt=Pt+12*Yt,Zt=new p.default.Vector(St.getFloat32(Zt,!0),St.getFloat32(4+Zt,!0),St.getFloat32(8+Zt,!0));wt.vertices.push(Zt),wt.vertexNormals.push(Ut),Ct&&ft.push(Le,nt,tt)}wt.faces.push([3*It,3*It+1,3*It+2]),wt.uvs.push([0,0],[0,0],[0,0])}}else if(me=new DataView(me),"TextDecoder"in window)for(var vt,Rt,Lt=Ye,Vt=new TextDecoder("utf-8").decode(me).split(`
`),Jt="",er=[],ur=0;ur<Vt.length;++ur){for(var yr=Vt[ur].trim(),Qt=yr.split(" "),nr=0;nr<Qt.length;++nr)Qt[nr]===""&&Qt.splice(nr,1);if(Qt.length!==0)switch(Jt){case"":if(Qt[0]!=="solid")return console.error(yr),void console.error('Invalid state "'.concat(Qt[0],'", should be "solid"'));Jt="solid";break;case"solid":if(Qt[0]!=="facet"||Qt[1]!=="normal")return console.error(yr),void console.error('Invalid state "'.concat(Qt[0],'", should be "facet normal"'));vt=new p.default.Vector(parseFloat(Qt[2]),parseFloat(Qt[3]),parseFloat(Qt[4])),Lt.vertexNormals.push(vt,vt,vt),Jt="facet normal";break;case"facet normal":if(Qt[0]!=="outer"||Qt[1]!=="loop")return console.error(yr),void console.error('Invalid state "'.concat(Qt[0],'", should be "outer loop"'));Jt="vertex";break;case"vertex":if(Qt[0]==="vertex")Rt=new p.default.Vector(parseFloat(Qt[1]),parseFloat(Qt[2]),parseFloat(Qt[3])),Lt.vertices.push(Rt),Lt.uvs.push([0,0]),er.push(Lt.vertices.indexOf(Rt));else{if(Qt[0]!=="endloop")return console.error(yr),void console.error('Invalid state "'.concat(Qt[0],'", should be "vertex" or "endloop"'));Lt.faces.push(er),er=[],Jt="endloop"}break;case"endloop":if(Qt[0]!=="endfacet")return console.error(yr),void console.error('Invalid state "'.concat(Qt[0],'", should be "endfacet"'));Jt="endfacet";break;case"endfacet":if(Qt[0]!=="endsolid"){if(Qt[0]!=="facet"||Qt[1]!=="normal")return console.error(yr),void console.error('Invalid state "'.concat(Qt[0],'", should be "endsolid" or "facet normal"'));vt=new p.default.Vector(parseFloat(Qt[2]),parseFloat(Qt[3]),parseFloat(Qt[4])),Lt.vertexNormals.push(vt,vt,vt),Jt="facet normal"}break;default:console.error('Invalid state "'.concat(Jt,'"'))}}else console.warn("Sorry, ASCII STL loading only works in browsers that support TextDecoder (https://caniuse.com/#feat=textencoder)")}t("./p5.Geometry"),p.default.prototype.loadModel=function(Ye,me){p.default._validateParameters("loadModel",arguments);var Le,nt,tt=!1,ft=!1,yt=!1,gt=Ye.slice(-4),mt=(me&&Be(me)==="object"?(tt=me.normalize||!1,Le=me.successCallback,nt=me.failureCallback,gt=me.fileType||gt,ft=me.flipU||!1,yt=me.flipV||!1):typeof me=="boolean"?(tt=me,Le=arguments[2],nt=arguments[3],arguments[4]!==void 0&&(gt=arguments[4])):(Le=typeof me=="function"?me:void 0,nt=arguments[2],arguments[3]!==void 0&&(gt=arguments[3])),new p.default.Geometry),wt=(mt.gid="".concat(Ye,"|").concat(tt),this);function St(){return(St=N(regeneratorRuntime.mark(function Ct(Et){var It,Dt,Pt,qt;return regeneratorRuntime.wrap(function(Ht){for(;;)switch(Ht.prev=Ht.next){case 0:for(It=[],Dt=0;Dt<Et.length;Dt++)(Pt=Et[Dt].match(/^mtllib (.+)/))&&function(){var Gt="",Ut=Pt[1],Yt=Ye.split("/");Gt=1<Yt.length?(Yt.pop(),Yt.join("/")+"/"+Ut):Ut,It.push(function(){return bt.apply(this,arguments)}(Gt).then(function(Zt){return Zt?(vt=wt,Rt=Gt,new Promise(function(Lt,Vt){var Jt=null,er={};vt.loadStrings(Rt,function(ur){for(var yr=0;yr<ur.length;++yr){var Qt,nr=ur[yr].trim().split(/\s+/);nr[0]==="newmtl"?(Qt=nr[1],er[Jt=Qt]={}):nr[0]==="Kd"?er[Jt].diffuseColor=[parseFloat(nr[1]),parseFloat(nr[2]),parseFloat(nr[3])]:nr[0]==="Ka"?er[Jt].ambientColor=[parseFloat(nr[1]),parseFloat(nr[2]),parseFloat(nr[3])]:nr[0]==="Ks"?er[Jt].specularColor=[parseFloat(nr[1]),parseFloat(nr[2]),parseFloat(nr[3])]:nr[0]==="map_Kd"&&(er[Jt].texturePath=nr[1])}Lt(er)},Vt)})):(console.warn("MTL file not found or error in parsing; proceeding without materials: ".concat(Gt)),{});var vt,Rt}).catch(function(Zt){return console.warn("Error loading MTL file: ".concat(Gt),Zt),{}}))}();return Ht.prev=2,Ht.next=5,Promise.all(It);case 5:return qt=Ht.sent,qt=Object.assign.apply(Object,[{}].concat(d(qt))),Ht.abrupt("return",qt);case 10:return Ht.prev=10,Ht.t0=Ht.catch(2),Ht.abrupt("return",{});case 13:case"end":return Ht.stop()}},Ct,null,[[2,10]])}))).apply(this,arguments)}function bt(){return(bt=N(regeneratorRuntime.mark(function Ct(Et){var It;return regeneratorRuntime.wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return Dt.prev=0,Dt.next=3,fetch(Et,{method:"HEAD"});case 3:return It=Dt.sent,Dt.abrupt("return",It.ok);case 7:return Dt.prev=7,Dt.t0=Dt.catch(0),Dt.abrupt("return",!1);case 10:case"end":return Dt.stop()}},Ct,null,[[0,7]])}))).apply(this,arguments)}return gt.match(/\.stl$/i)?this.httpDo(Ye,"GET","arrayBuffer",function(Ct){E(mt,Ct),tt&&mt.normalize(),ft&&mt.flipU(),yt&&mt.flipV(),wt._decrementPreload(),typeof Le=="function"&&Le(mt)},nt):gt.match(/\.obj$/i)?this.loadStrings(Ye,function(){var Ct=N(regeneratorRuntime.mark(function Et(It){var Dt;return regeneratorRuntime.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.prev=0,Pt.next=3,function(){return St.apply(this,arguments)}(It);case 3:Dt=Pt.sent,b(mt,It,Dt),Pt.next=11;break;case 7:return Pt.prev=7,Pt.t0=Pt.catch(0),nt?nt(Pt.t0):p.default._friendlyError("Error during parsing: "+Pt.t0.message),Pt.abrupt("return");case 11:return Pt.prev=11,tt&&mt.normalize(),ft&&mt.flipU(),yt&&mt.flipV(),mt._makeTriangleEdges(),wt._decrementPreload(),typeof Le=="function"&&Le(mt),Pt.finish(11);case 19:case"end":return Pt.stop()}},Et,null,[[0,7,11,19]])}));return function(Et){return Ct.apply(this,arguments)}}(),nt):(p.default._friendlyFileLoadError(3,Ye),nt?nt():p.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.")),mt},p.default.prototype.model=function(Ye){this._assert3d("model"),p.default._validateParameters("model",arguments),0<Ye.vertices.length&&(this._renderer.geometryInHash(Ye.gid)||(Ye._edgesToVertices(),this._renderer.createBuffers(Ye.gid,Ye)),this._renderer.drawBuffers(Ye.gid))};var de=0,pe=(p.default.prototype.createModel=function(Ye){var me,Le,nt=1<arguments.length&&arguments[1]!==void 0?arguments[1]:" ",gt=2<arguments.length?arguments[2]:void 0,tt=(p.default._validateParameters("createModel",arguments),!1),ft=!1,yt=!1,gt=(gt&&Be(gt)==="object"?(tt=gt.normalize||!1,me=gt.successCallback,Le=gt.failureCallback,ft=gt.flipU||!1,yt=gt.flipV||!1):Le=typeof gt=="boolean"?(tt=gt,me=arguments[3],arguments[4]):(me=typeof arguments[2]=="function"?arguments[2]:void 0,arguments[3]),new p.default.Geometry);if(gt.gid="".concat(nt,"|").concat(tt,"|").concat(de++),nt.match(/\.stl$/i))try{E(gt,new TextEncoder().encode(Ye).buffer)}catch(mt){return void(Le?Le(mt):p.default._friendlyError("Error during parsing: "+mt.message))}else if(nt.match(/\.obj$/i))try{b(gt,Ye.split(`
`))}catch(mt){return void(Le?Le(mt):p.default._friendlyError("Error during parsing: "+mt.message))}else p.default._friendlyFileLoadError(3,Ye),Le?Le():p.default._friendlyError("Sorry, the file type is invalid. Only OBJ and STL files are supported.");return tt&&gt.normalize(),ft&&gt.flipU(),yt&&gt.flipV(),gt._makeTriangleEdges(),typeof me=="function"&&me(gt),gt},p.default);u.default=pe},{"../core/main":283,"./p5.Geometry":335,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.from":162,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.splice":171,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.to-string":190,"core-js/modules/es.promise":191,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.match":201,"core-js/modules/es.string.split":206,"core-js/modules/es.string.trim":209,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246,"regenerator-runtime/runtime":260}],331:[function(t,l,u){function s(b){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(b)}function p(b){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(E){return s(E)}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":s(E)})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.join"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=(Be=t("../core/main"))&&Be.__esModule?Be:{default:Be},h=function(b){if(b&&b.__esModule)return b;if(b===null||p(b)!=="object"&&typeof b!="function")return{default:b};var E=N();if(E&&E.has(b))return E.get(b);var de,pe={},Ye=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(de in b){var me;Object.prototype.hasOwnProperty.call(b,de)&&((me=Ye?Object.getOwnPropertyDescriptor(b,de):null)&&(me.get||me.set)?Object.defineProperty(pe,de,me):pe[de]=b[de])}return pe.default=b,E&&E.set(b,pe),pe}(t("../core/constants"));function N(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,N=function(){return b},b)}t("./p5.Texture"),d.default.prototype.loadShader=function(b,E,de,pe){d.default._validateParameters("loadShader",arguments),pe=pe||console.error;function Ye(){Le._decrementPreload(),de&&de(me)}var me=new d.default.Shader,Le=this,nt=!1,tt=!1;return this.loadStrings(b,function(ft){me._vertSrc=ft.join(`
`),tt=!0,nt&&Ye()},pe),this.loadStrings(E,function(ft){me._fragSrc=ft.join(`
`),nt=!0,tt&&Ye()},pe),me},d.default.prototype.createShader=function(b,E,de){return d.default._validateParameters("createShader",arguments),new d.default.Shader(this._renderer,b,E,de)},d.default.prototype.createFilterShader=function(b){d.default._validateParameters("createFilterShader",arguments);var E=b.includes("#version 300 es")?`#version 300 es
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    in vec3 aPosition;
    in vec2 aTexCoord;
    out vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `:`
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;

    attribute vec3 aPosition;
    // texcoords only come from p5 to vertex shader
    // so pass texcoords on to the fragment shader in a varying variable
    attribute vec2 aTexCoord;
    varying vec2 vTexCoord;

    void main() {
      // transferring texcoords for the frag shader
      vTexCoord = aTexCoord;

      // copy position with a fourth coordinate for projection (1.0 is normal)
      vec4 positionVec4 = vec4(aPosition, 1.0);

      // project to 3D space
      gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
    }
  `,E=new d.default.Shader(this._renderer,E,b);return this._renderer.GL?E.ensureCompiledOnContext(this):E.ensureCompiledOnContext(this._renderer.getFilterGraphicsLayer()),E},d.default.prototype.shader=function(b){return this._assert3d("shader"),d.default._validateParameters("shader",arguments),b.ensureCompiledOnContext(this),b.isStrokeShader()?this._renderer.userStrokeShader=b:(this._renderer.userFillShader=b,this._renderer._useNormalMaterial=!1),b.setDefaultUniforms(),this},d.default.prototype.baseMaterialShader=function(){return this._assert3d("baseMaterialShader"),this._renderer.baseMaterialShader()},d.default.prototype.baseNormalShader=function(){return this._assert3d("baseNormalShader"),this._renderer.baseNormalShader()},d.default.prototype.baseColorShader=function(){return this._assert3d("baseColorShader"),this._renderer.baseColorShader()},d.default.prototype.baseStrokeShader=function(){return this._assert3d("baseStrokeShader"),this._renderer.baseStrokeShader()},d.default.prototype.resetShader=function(){return this._renderer.userFillShader=this._renderer.userStrokeShader=null,this},d.default.prototype.texture=function(b){return this._assert3d("texture"),d.default._validateParameters("texture",arguments),b.gifProperties&&b._animateGif(this),this._renderer.drawMode=h.TEXTURE,this._renderer._useNormalMaterial=!1,this._renderer._tex=b,this._renderer._setProperty("_doFill",!0),this},d.default.prototype.textureMode=function(b){b!==h.IMAGE&&b!==h.NORMAL?console.warn("You tried to set ".concat(b," textureMode only supports IMAGE & NORMAL ")):this._renderer.textureMode=b},d.default.prototype.textureWrap=function(b){var E=1<arguments.length&&arguments[1]!==void 0?arguments[1]:b,de=(this._renderer.textureWrapX=b,this._renderer.textureWrapY=E,!0),pe=!1,Ye=void 0;try{for(var me,Le=this._renderer.textures.values()[Symbol.iterator]();!(de=(me=Le.next()).done);de=!0)me.value.setWrapMode(b,E)}catch(nt){pe=!0,Ye=nt}finally{try{de||Le.return==null||Le.return()}finally{if(pe)throw Ye}}},d.default.prototype.normalMaterial=function(){this._assert3d("normalMaterial");for(var b=arguments.length,E=new Array(b),de=0;de<b;de++)E[de]=arguments[de];return d.default._validateParameters("normalMaterial",E),this._renderer.drawMode=h.FILL,this._renderer._useSpecularMaterial=!1,this._renderer._useEmissiveMaterial=!1,this._renderer._useNormalMaterial=!0,this._renderer.curFillColor=[1,1,1,1],this._renderer._setProperty("_doFill",!0),this.noStroke(),this},d.default.prototype.ambientMaterial=function(b,E,de){this._assert3d("ambientMaterial"),d.default._validateParameters("ambientMaterial",arguments);var pe=d.default.prototype.color.apply(this,arguments);return this._renderer._hasSetAmbient=!0,this._renderer.curAmbientColor=pe._array,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this._renderer._setProperty("_doFill",!0),this},d.default.prototype.emissiveMaterial=function(b,E,de,pe){this._assert3d("emissiveMaterial"),d.default._validateParameters("emissiveMaterial",arguments);var Ye=d.default.prototype.color.apply(this,arguments);return this._renderer.curEmissiveColor=Ye._array,this._renderer._useEmissiveMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},d.default.prototype.specularMaterial=function(b,E,de,pe){this._assert3d("specularMaterial"),d.default._validateParameters("specularMaterial",arguments);var Ye=d.default.prototype.color.apply(this,arguments);return this._renderer.curSpecularColor=Ye._array,this._renderer._useSpecularMaterial=!0,this._renderer._useNormalMaterial=!1,this._renderer._enableLighting=!0,this},d.default.prototype.shininess=function(b){return this._assert3d("shininess"),d.default._validateParameters("shininess",arguments),this._renderer._useShininess=b=b<1?1:b,this},d.default.prototype.metalness=function(b){return this._assert3d("metalness"),b=1-Math.exp(-b/100),this._renderer._useMetalness=b,this},d.default.RendererGL.prototype._applyColorBlend=function(b,Ye){var de=this.GL,pe=this.drawMode===h.TEXTURE,Ye=Ye||this.userFillShader||this.userStrokeShader||this.userPointShader||pe||this.curBlendMode!==h.BLEND||b[b.length-1]<1||this._isErasing;return Ye!==this._isBlending&&(Ye||this.curBlendMode!==h.BLEND&&this.curBlendMode!==h.ADD?de.enable(de.BLEND):de.disable(de.BLEND),de.depthMask(!0),this._isBlending=Ye),this._applyBlendMode(),b},d.default.RendererGL.prototype._applyBlendMode=function(){if(this._cachedBlendMode!==this.curBlendMode){var b=this.GL;switch(this.curBlendMode){case h.BLEND:b.blendEquation(b.FUNC_ADD),b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA);break;case h.ADD:b.blendEquation(b.FUNC_ADD),b.blendFunc(b.ONE,b.ONE);break;case h.REMOVE:b.blendEquation(b.FUNC_ADD),b.blendFunc(b.ZERO,b.ONE_MINUS_SRC_ALPHA);break;case h.MULTIPLY:b.blendEquation(b.FUNC_ADD),b.blendFunc(b.DST_COLOR,b.ONE_MINUS_SRC_ALPHA);break;case h.SCREEN:b.blendEquation(b.FUNC_ADD),b.blendFunc(b.ONE,b.ONE_MINUS_SRC_COLOR);break;case h.EXCLUSION:b.blendEquationSeparate(b.FUNC_ADD,b.FUNC_ADD),b.blendFuncSeparate(b.ONE_MINUS_DST_COLOR,b.ONE_MINUS_SRC_COLOR,b.ONE,b.ONE);break;case h.REPLACE:b.blendEquation(b.FUNC_ADD),b.blendFunc(b.ONE,b.ZERO);break;case h.SUBTRACT:b.blendEquationSeparate(b.FUNC_REVERSE_SUBTRACT,b.FUNC_ADD),b.blendFuncSeparate(b.ONE,b.ONE,b.ONE,b.ONE_MINUS_SRC_ALPHA);break;case h.DARKEST:this.blendExt?(b.blendEquationSeparate(this.blendExt.MIN||this.blendExt.MIN_EXT,b.FUNC_ADD),b.blendFuncSeparate(b.ONE,b.ONE,b.ONE,b.ONE)):console.warn("blendMode(DARKEST) does not work in your browser in WEBGL mode.");break;case h.LIGHTEST:this.blendExt?(b.blendEquationSeparate(this.blendExt.MAX||this.blendExt.MAX_EXT,b.FUNC_ADD),b.blendFuncSeparate(b.ONE,b.ONE,b.ONE,b.ONE)):console.warn("blendMode(LIGHTEST) does not work in your browser in WEBGL mode.");break;default:console.error("Oops! Somehow RendererGL set curBlendMode to an unsupported mode.")}this._isErasing||(this._cachedBlendMode=this.curBlendMode)}};var Be=d.default;u.default=Be},{"../core/constants":272,"../core/main":283,"./p5.Texture":343,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.join":166,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],332:[function(t,l,u){t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.hypot"),t("core-js/modules/es.string.sub"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(t=t("../core/main"))&&t.__esModule?t:{default:t};function p(d,h){for(var N=0;N<h.length;N++){var Be=h[N];Be.enumerable=Be.enumerable||!1,Be.configurable=!0,"value"in Be&&(Be.writable=!0),Object.defineProperty(d,Be.key,Be)}}s.default.prototype.camera=function(){var d;this._assert3d("camera");for(var h=arguments.length,N=new Array(h),Be=0;Be<h;Be++)N[Be]=arguments[Be];return s.default._validateParameters("camera",N),(d=this._renderer._curCamera).camera.apply(d,N),this},s.default.prototype.perspective=function(){var d;this._assert3d("perspective");for(var h=arguments.length,N=new Array(h),Be=0;Be<h;Be++)N[Be]=arguments[Be];return s.default._validateParameters("perspective",N),(d=this._renderer._curCamera).perspective.apply(d,N),this},s.default.prototype.linePerspective=function(d){if(s.default._validateParameters("linePerspective",arguments),!(this._renderer instanceof s.default.RendererGL))throw new Error("linePerspective() must be called in WebGL mode.");if(d===void 0)return this._renderer._curCamera.useLinePerspective;this._renderer._curCamera.useLinePerspective=d},s.default.prototype.ortho=function(){var d;this._assert3d("ortho");for(var h=arguments.length,N=new Array(h),Be=0;Be<h;Be++)N[Be]=arguments[Be];return s.default._validateParameters("ortho",N),(d=this._renderer._curCamera).ortho.apply(d,N),this},s.default.prototype.frustum=function(){var d;this._assert3d("frustum");for(var h=arguments.length,N=new Array(h),Be=0;Be<h;Be++)N[Be]=arguments[Be];return s.default._validateParameters("frustum",N),(d=this._renderer._curCamera).frustum.apply(d,N),this},s.default.prototype.createCamera=function(){this._assert3d("createCamera");var d=new s.default.Camera(this._renderer);return d._computeCameraDefaultSettings(),d._setDefaultCamera(),this._renderer._curCamera=d},s.default.Camera=function(){function d(Be){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this._renderer=Be,this.cameraType="default",this.useLinePerspective=!0,this.cameraMatrix=new s.default.Matrix,this.projMatrix=new s.default.Matrix,this.yScale=1}var h,N;return h=d,(N=[{key:"perspective",value:function(pe,b,E,de){this.cameraType=0<arguments.length?"custom":"default",pe===void 0?(pe=this.defaultCameraFOV,this.cameraFOV=pe):this.cameraFOV=this._renderer._pInst._toRadians(pe),b===void 0&&(b=this.defaultAspectRatio),E===void 0&&(E=this.defaultCameraNear),de===void 0&&(de=this.defaultCameraFar),E<=1e-4&&(E=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),de<E&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.aspectRatio=b,this.cameraNear=E,this.cameraFar=de,this.projMatrix=s.default.Matrix.identity();var pe=1/Math.tan(this.cameraFOV/2),Ye=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(pe/b,0,0,0,0,-pe*this.yScale,0,0,0,0,(de+E)*Ye,-1,0,0,2*de*E*Ye,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix)}},{key:"ortho",value:function(gt,yt,E,de,pe,Ye){var mt=this.fbo||this._renderer,mt=(gt===void 0&&(gt=-mt.width/2),yt===void 0&&(yt=+mt.width/2),E===void 0&&(E=-mt.height/2),de===void 0&&(de=+mt.height/2),pe===void 0&&(pe=0),Ye===void 0&&(Ye=Math.max(mt.width,mt.height)+800),this.cameraNear=pe,yt-gt),me=de-E,Le=(this.cameraFar=Ye)-pe,nt=2/mt,tt=2/me*this.yScale,ft=-2/Le,yt=-(yt+gt)/mt,gt=-(de+E)/me,mt=-(Ye+pe)/Le;this.projMatrix=s.default.Matrix.identity(),this.projMatrix.set(nt,0,0,0,0,-tt,0,0,0,0,ft,0,yt,gt,mt,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"frustum",value:function(gt,yt,E,de,pe,Ye){gt===void 0&&(gt=.05*-this._renderer.width),yt===void 0&&(yt=.05*+this._renderer.width),E===void 0&&(E=.05*+this._renderer.height),de===void 0&&(de=.05*-this._renderer.height),pe===void 0&&(pe=this.defaultCameraNear),Ye===void 0&&(Ye=this.defaultCameraFar),this.cameraNear=pe;var mt=yt-gt,me=de-E,Le=(this.cameraFar=Ye)-pe,nt=2*pe/mt,tt=2*pe/me*this.yScale,ft=-2*Ye*pe/Le,yt=(yt+gt)/mt,gt=(de+E)/me,mt=-(Ye+pe)/Le;this.projMatrix=s.default.Matrix.identity(),this.projMatrix.set(nt,0,0,0,0,-tt,0,0,yt,gt,mt,-1,0,0,ft,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix),this.cameraType="custom"}},{key:"_rotateView",value:function(nt,tt,ft,yt){var pe=this.centerX,Ye=this.centerY,me=this.centerZ,Le=(pe-=this.eyeX,Ye-=this.eyeY,me-=this.eyeZ,s.default.Matrix.identity(this._renderer._pInst)),nt=(Le.rotate(this._renderer._pInst._toRadians(nt),tt,ft,yt),[pe*Le.mat4[0]+Ye*Le.mat4[4]+me*Le.mat4[8],pe*Le.mat4[1]+Ye*Le.mat4[5]+me*Le.mat4[9],pe*Le.mat4[2]+Ye*Le.mat4[6]+me*Le.mat4[10]]),tt=(nt[0]+=this.eyeX,nt[1]+=this.eyeY,nt[2]+=this.eyeZ,this.upX*Le.mat4[0]+this.upY*Le.mat4[4]+this.upZ*Le.mat4[8]),ft=this.upX*Le.mat4[1]+this.upY*Le.mat4[5]+this.upZ*Le.mat4[9],yt=this.upX*Le.mat4[2]+this.upY*Le.mat4[6]+this.upZ*Le.mat4[10];this.camera(this.eyeX,this.eyeY,this.eyeZ,nt[0],nt[1],nt[2],tt,ft,yt)}},{key:"roll",value:function(E){var b=this._getLocalAxes(),E=s.default.Quat.fromAxisAngle(this._renderer._pInst._toRadians(E),b.z[0],b.z[1],b.z[2]).rotateVector(new s.default.Vector(this.upX,this.upY,this.upZ));this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,E.x,E.y,E.z)}},{key:"pan",value:function(Be){var b=this._getLocalAxes();this._rotateView(Be,b.y[0],b.y[1],b.y[2])}},{key:"tilt",value:function(Be){var b=this._getLocalAxes();this._rotateView(Be,b.x[0],b.x[1],b.x[2])}},{key:"lookAt",value:function(Be,b,E){this.camera(this.eyeX,this.eyeY,this.eyeZ,Be,b,E,this.upX,this.upY,this.upZ)}},{key:"camera",value:function(Be,b,E,de,pe,Ye,me,Le,nt){return Be===void 0&&(Be=this.defaultEyeX,b=this.defaultEyeY,E=this.defaultEyeZ,de=Be,pe=b,Le=1,nt=me=Ye=0),this.eyeX=Be,this.eyeY=b,this.eyeZ=E,de!==void 0&&(this.centerX=de,this.centerY=pe,this.centerZ=Ye),me!==void 0&&(this.upX=me,this.upY=Le,this.upZ=nt),de=this._getLocalAxes(),this.cameraMatrix.set(de.x[0],de.y[0],de.z[0],0,de.x[1],de.y[1],de.z[1],0,de.x[2],de.y[2],de.z[2],0,0,0,0,1),pe=-Be,this.cameraMatrix.translate([pe,-b,-E]),this._isActive()&&this._renderer.uViewMatrix.set(this.cameraMatrix),this}},{key:"move",value:function(de,pe,E){var Ye=this._getLocalAxes(),de=[Ye.x[0]*de,Ye.x[1]*de,Ye.x[2]*de],pe=[Ye.y[0]*pe,Ye.y[1]*pe,Ye.y[2]*pe],Ye=[Ye.z[0]*E,Ye.z[1]*E,Ye.z[2]*E];this.camera(this.eyeX+de[0]+pe[0]+Ye[0],this.eyeY+de[1]+pe[1]+Ye[1],this.eyeZ+de[2]+pe[2]+Ye[2],this.centerX+de[0]+pe[0]+Ye[0],this.centerY+de[1]+pe[1]+Ye[1],this.centerZ+de[2]+pe[2]+Ye[2],this.upX,this.upY,this.upZ)}},{key:"setPosition",value:function(Be,b,E){var de=Be-this.eyeX,pe=b-this.eyeY,Ye=E-this.eyeZ;this.camera(Be,b,E,this.centerX+de,this.centerY+pe,this.centerZ+Ye,this.upX,this.upY,this.upZ)}},{key:"set",value:function(Be){for(var b=0,E=["eyeX","eyeY","eyeZ","centerX","centerY","centerZ","upX","upY","upZ","cameraFOV","aspectRatio","cameraNear","cameraFar","cameraType","yScale","useLinePerspective"];b<E.length;b++){var de=E[b];this[de]=Be[de]}this.cameraMatrix=Be.cameraMatrix.copy(),this.projMatrix=Be.projMatrix.copy(),this._isActive()&&(this._renderer.uModelMatrix.reset(),this._renderer.uViewMatrix.set(this.cameraMatrix),this._renderer.uPMatrix.set(this.projMatrix))}},{key:"slerp",value:function(Be,b,E){var de,pe,Ye,me,Le,nt,tt,ft,yt,gt,mt,wt,St,bt,Ct,Et,It,Dt;E===0?this.set(Be):E===1?this.set(b):(this.projMatrix.mat4[15]!==0&&(this.projMatrix.mat4[0]=Be.projMatrix.mat4[0]*Math.pow(b.projMatrix.mat4[0]/Be.projMatrix.mat4[0],E),this.projMatrix.mat4[5]=Be.projMatrix.mat4[5]*Math.pow(b.projMatrix.mat4[5]/Be.projMatrix.mat4[5],E),this._isActive()&&(this._renderer.uPMatrix.mat4=this.projMatrix.mat4.slice())),me=new s.default.Vector(Be.eyeX,Be.eyeY,Be.eyeZ),Le=new s.default.Vector(b.eyeX,b.eyeY,b.eyeZ),Et=new s.default.Vector(Be.centerX,Be.centerY,Be.centerZ),Dt=new s.default.Vector(b.centerX,b.centerY,b.centerZ),Ye=s.default.Vector.dist(me,Et),de=s.default.Vector.dist(Le,Dt),de=Ye*Math.pow(de/Ye,E),Ye=s.default.Vector.sub(me,Le),pe=1,1e-6<(It=(bt=me.copy().sub(Le).sub(Et).add(Dt)).magSq())&&(pe=s.default.Vector.dot(Ye,bt)/It,pe=Math.max(0,Math.min(pe,1))),Ye=s.default.Vector.lerp(s.default.Vector.lerp(me,Et,pe),s.default.Vector.lerp(Le,Dt,pe),E),bt=Be.cameraMatrix.createSubMatrix3x3(),It=b.cameraMatrix.createSubMatrix3x3(),me=bt.row(2),Et=It.row(2),Le=bt.row(1),Dt=It.row(1),Be=new s.default.Vector,b=new s.default.Vector,nt=new s.default.Vector,tt=new s.default.Vector,1-(ft=.5*((bt=(It=It.mult3x3(bt.copy().transpose3x3())).diagonal())[0]+bt[1]+bt[2]-1))<1e-7?(Be.set(s.default.Vector.lerp(me,Et,E)).normalize(),nt.set(Be).mult(pe*de).add(Ye),tt.set(Be).mult((pe-1)*de).add(Ye),b.set(s.default.Vector.lerp(Le,Dt,E)).normalize()):(Et=1/(1-ft),Dt=Math.max(bt[0],bt[1],bt[2]),wt=It.mat3[1]+It.mat3[3],St=It.mat3[2]+It.mat3[6],Ct=It.mat3[5]+It.mat3[7],Dt=Dt===bt[0]?(gt=.5*wt*(Et/=yt=Math.sqrt((bt[0]-ft)*Et)),mt=.5*St*Et,.5*(It.mat3[7]-It.mat3[5])/yt):Dt===bt[1]?(mt=.5*Ct*(Et/=gt=Math.sqrt((bt[1]-ft)*Et)),yt=.5*wt*Et,.5*(It.mat3[2]-It.mat3[6])/gt):(yt=.5*St*(Et/=mt=Math.sqrt((bt[2]-ft)*Et)),gt=.5*Ct*Et,.5*(It.mat3[3]-It.mat3[1])/mt),wt=E*Math.atan2(Dt,ft),St=Math.cos(wt),bt=Math.sin(wt),(Dt=new s.default.Matrix("mat3",[St+(Ct=1-St)*yt*yt,Ct*(Et=yt*gt)+bt*mt,Ct*(It=mt*yt)-bt*gt,Ct*Et-bt*mt,St+Ct*gt*gt,Ct*(E=gt*mt)+bt*yt,Ct*It+bt*gt,Ct*E-bt*yt,St+Ct*mt*mt])).multiplyVec3(me,Be),nt.set(Be).mult(pe*de).add(Ye),tt.set(Be).mult((pe-1)*de).add(Ye),Dt.multiplyVec3(Le,b)),this.camera(nt.x,nt.y,nt.z,tt.x,tt.y,tt.z,b.x,b.y,b.z))}},{key:"_computeCameraDefaultSettings",value:function(){this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=800,this.defaultCameraFOV=2*Math.atan(this._renderer.height/2/this.defaultEyeZ),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ}},{key:"_setDefaultCamera",value:function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"}},{key:"_resize",value:function(){this.cameraType==="default"&&(this._computeCameraDefaultSettings(),this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.perspective())}},{key:"copy",value:function(){var Be=new s.default.Camera(this._renderer);return Be.cameraFOV=this.cameraFOV,Be.aspectRatio=this.aspectRatio,Be.eyeX=this.eyeX,Be.eyeY=this.eyeY,Be.eyeZ=this.eyeZ,Be.centerX=this.centerX,Be.centerY=this.centerY,Be.centerZ=this.centerZ,Be.upX=this.upX,Be.upY=this.upY,Be.upZ=this.upZ,Be.cameraNear=this.cameraNear,Be.cameraFar=this.cameraFar,Be.cameraType=this.cameraType,Be.useLinePerspective=this.useLinePerspective,Be.cameraMatrix=this.cameraMatrix.copy(),Be.projMatrix=this.projMatrix.copy(),Be.yScale=this.yScale,Be}},{key:"_getLocalAxes",value:function(){var Be=this.eyeX-this.centerX,b=this.eyeY-this.centerY,E=this.eyeZ-this.centerZ,me=Math.sqrt(Be*Be+b*b+E*E),me=(me!==0&&(Be/=me,b/=me,E/=me),this.upX),de=(Le=this.upY)*E-(nt=this.upZ)*b,pe=-me*E+nt*Be,Ye=me*b-Le*Be,me=b*Ye-E*pe,Le=-Be*Ye+E*de,nt=Be*pe-b*de,tt=Math.sqrt(de*de+pe*pe+Ye*Ye),tt=(tt!==0&&(de/=tt,pe/=tt,Ye/=tt),Math.sqrt(me*me+Le*Le+nt*nt));return tt!==0&&(me/=tt,Le/=tt,nt/=tt),{x:[de,pe,Ye],y:[me,Le,nt],z:[Be,b,E]}}},{key:"_orbit",value:function(Be,tt,nt){var pe=this.eyeX-this.centerX,Ye=this.eyeY-this.centerY,me=this.eyeZ-this.centerZ,de=Math.hypot(pe,Ye,me),pe=new s.default.Vector(pe,Ye,me).normalize(),Ye=new s.default.Vector(this.upX,this.upY,this.upZ).normalize(),me=s.default.Vector.cross(Ye,pe).normalize(),Le=s.default.Vector.cross(me,Ye),nt=((de=(de*=Math.pow(10,nt))<this.cameraNear?this.cameraNear:de)>this.cameraFar&&(de=this.cameraFar),Math.acos(Math.max(-1,Math.min(1,s.default.Vector.dot(pe,Ye))))+tt),tt=Be;(nt<=0||nt>=Math.PI)&&(this.upX*=-1,this.upY*=-1,this.upZ*=-1),Ye.mult(Math.cos(nt)),Le.mult(Math.cos(tt)*Math.sin(nt)),me.mult(Math.sin(tt)*Math.sin(nt)),pe.set(Ye).add(Le).add(me),this.eyeX=de*pe.x+this.centerX,this.eyeY=de*pe.y+this.centerY,this.eyeZ=de*pe.z+this.centerZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,this.centerX,this.centerY,this.centerZ,this.upX,this.upY,this.upZ)}},{key:"_orbitFree",value:function(nt,tt,yt){var pe=this.eyeX-this.centerX,Ye=this.eyeY-this.centerY,me=this.eyeZ-this.centerZ,de=Math.hypot(pe,Ye,me),pe=new s.default.Vector(pe,Ye,me).normalize(),Ye=new s.default.Vector(this.upX,this.upY,this.upZ),me=s.default.Vector.cross(Ye,pe).normalize(),Le=s.default.Vector.cross(pe,me),gt=Math.atan2(tt,nt),gt=(Le.mult(Math.sin(gt)),me.mult(Math.cos(gt)).add(Le),Math.sqrt(nt*nt+tt*tt)),Le=s.default.Vector.cross(pe,me),nt=((de=(de*=Math.pow(10,yt))<this.cameraNear?this.cameraNear:de)>this.cameraFar&&(de=this.cameraFar),Math.cos(gt)),tt=Math.sin(gt),yt=Ye.dot(pe),gt=Ye.dot(me),ft=yt*nt+gt*tt,yt=-yt*tt+gt*nt,gt=Ye.dot(Le);Ye.x=ft*pe.x+yt*me.x+gt*Le.x,Ye.y=ft*pe.y+yt*me.y+gt*Le.y,Ye.z=ft*pe.z+yt*me.z+gt*Le.z,me.mult(-tt),pe.mult(nt).add(me).mult(de),this.camera(pe.x+this.centerX,pe.y+this.centerY,pe.z+this.centerZ,this.centerX,this.centerY,this.centerZ,Ye.x,Ye.y,Ye.z)}},{key:"_isActive",value:function(){return this===this._renderer._curCamera}}])&&p(h.prototype,N),d}(),s.default.prototype.setCamera=function(d){this._renderer._curCamera=d,this._renderer.uPMatrix.set(d.projMatrix),this._renderer.uViewMatrix.set(d.cameraMatrix)},t=s.default.Camera,u.default=t},{"../core/main":283,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.hypot":176,"core-js/modules/es.string.sub":208}],333:[function(t,l,u){t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.log2"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.math.log2"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function s(p,d){for(var h=0;h<d.length;h++){var N=d[h];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(p,N.key,N)}}t.default.DataArray=function(){function p(){var N=0<arguments.length&&arguments[0]!==void 0?arguments[0]:128,Be=this,b=p;if(!(Be instanceof b))throw new TypeError("Cannot call a class as a function");this.length=0,this.data=new Float32Array(N),this.initialLength=N}var d,h;return d=p,(h=[{key:"dataArray",value:function(){return this.subArray(0,this.length)}},{key:"clear",value:function(){this.length=0}},{key:"rescale",value:function(){var N;this.length<this.data.length/2&&(N=1<<Math.ceil(Math.log2(this.length)),(N=new Float32Array(N)).set(this.data.subarray(0,this.length),0),this.data=N)}},{key:"reset",value:function(){this.clear(),this.data=new Float32Array(this.initialLength)}},{key:"push",value:function(){for(var N=arguments.length,Be=new Array(N),b=0;b<N;b++)Be[b]=arguments[b];this.ensureLength(this.length+Be.length),this.data.set(Be,this.length),this.length+=Be.length}},{key:"slice",value:function(N,Be){return this.data.slice(N,Math.min(Be,this.length))}},{key:"subArray",value:function(N,Be){return this.data.subarray(N,Math.min(Be,this.length))}},{key:"ensureLength",value:function(N){for(;this.data.length<N;){var Be=new Float32Array(2*this.data.length);Be.set(this.data,0),this.data=Be}}}])&&s(d.prototype,h),p}(),t=t.default.DataArray,u.default=t},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.math.log2":177,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239}],334:[function(wt,l,u){function s(St){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(bt){return typeof bt}:function(bt){return bt&&typeof Symbol=="function"&&bt.constructor===Symbol&&bt!==Symbol.prototype?"symbol":typeof bt})(St)}function p(St){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(bt){return s(bt)}:function(bt){return bt&&typeof Symbol=="function"&&bt.constructor===Symbol&&bt!==Symbol.prototype?"symbol":s(bt)})(St)}wt("core-js/modules/es.symbol"),wt("core-js/modules/es.symbol.description"),wt("core-js/modules/es.symbol.iterator"),wt("core-js/modules/es.array.fill"),wt("core-js/modules/es.array.includes"),wt("core-js/modules/es.array.iterator"),wt("core-js/modules/es.object.get-own-property-descriptor"),wt("core-js/modules/es.object.get-prototype-of"),wt("core-js/modules/es.object.to-string"),wt("core-js/modules/es.reflect.construct"),wt("core-js/modules/es.reflect.get"),wt("core-js/modules/es.regexp.to-string"),wt("core-js/modules/es.string.includes"),wt("core-js/modules/es.string.iterator"),wt("core-js/modules/es.typed-array.float32-array"),wt("core-js/modules/es.typed-array.uint8-array"),wt("core-js/modules/es.typed-array.uint8-clamped-array"),wt("core-js/modules/es.typed-array.copy-within"),wt("core-js/modules/es.typed-array.every"),wt("core-js/modules/es.typed-array.fill"),wt("core-js/modules/es.typed-array.filter"),wt("core-js/modules/es.typed-array.find"),wt("core-js/modules/es.typed-array.find-index"),wt("core-js/modules/es.typed-array.for-each"),wt("core-js/modules/es.typed-array.includes"),wt("core-js/modules/es.typed-array.index-of"),wt("core-js/modules/es.typed-array.iterator"),wt("core-js/modules/es.typed-array.join"),wt("core-js/modules/es.typed-array.last-index-of"),wt("core-js/modules/es.typed-array.map"),wt("core-js/modules/es.typed-array.reduce"),wt("core-js/modules/es.typed-array.reduce-right"),wt("core-js/modules/es.typed-array.reverse"),wt("core-js/modules/es.typed-array.set"),wt("core-js/modules/es.typed-array.slice"),wt("core-js/modules/es.typed-array.some"),wt("core-js/modules/es.typed-array.sort"),wt("core-js/modules/es.typed-array.subarray"),wt("core-js/modules/es.typed-array.to-locale-string"),wt("core-js/modules/es.typed-array.to-string"),wt("core-js/modules/es.weak-map"),wt("core-js/modules/web.dom-collections.iterator"),wt("core-js/modules/es.array.fill"),wt("core-js/modules/es.array.includes"),wt("core-js/modules/es.array.iterator"),wt("core-js/modules/es.object.get-prototype-of"),wt("core-js/modules/es.object.to-string"),wt("core-js/modules/es.string.includes"),wt("core-js/modules/es.typed-array.float32-array"),wt("core-js/modules/es.typed-array.uint8-array"),wt("core-js/modules/es.typed-array.uint8-clamped-array"),wt("core-js/modules/es.typed-array.copy-within"),wt("core-js/modules/es.typed-array.every"),wt("core-js/modules/es.typed-array.fill"),wt("core-js/modules/es.typed-array.filter"),wt("core-js/modules/es.typed-array.find"),wt("core-js/modules/es.typed-array.find-index"),wt("core-js/modules/es.typed-array.for-each"),wt("core-js/modules/es.typed-array.includes"),wt("core-js/modules/es.typed-array.index-of"),wt("core-js/modules/es.typed-array.iterator"),wt("core-js/modules/es.typed-array.join"),wt("core-js/modules/es.typed-array.last-index-of"),wt("core-js/modules/es.typed-array.map"),wt("core-js/modules/es.typed-array.reduce"),wt("core-js/modules/es.typed-array.reduce-right"),wt("core-js/modules/es.typed-array.reverse"),wt("core-js/modules/es.typed-array.set"),wt("core-js/modules/es.typed-array.slice"),wt("core-js/modules/es.typed-array.some"),wt("core-js/modules/es.typed-array.sort"),wt("core-js/modules/es.typed-array.subarray"),wt("core-js/modules/es.typed-array.to-locale-string"),wt("core-js/modules/es.typed-array.to-string"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=(mt=wt("../core/main"))&&mt.__esModule?mt:{default:mt},h=function(St){if(St&&St.__esModule)return St;if(St===null||p(St)!=="object"&&typeof St!="function")return{default:St};var bt=b();if(bt&&bt.has(St))return bt.get(St);var Ct,Et={},It=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(Ct in St){var Dt;Object.prototype.hasOwnProperty.call(St,Ct)&&((Dt=It?Object.getOwnPropertyDescriptor(St,Ct):null)&&(Dt.get||Dt.set)?Object.defineProperty(Et,Ct,Dt):Et[Ct]=St[Ct])}return Et.default=St,bt&&bt.set(St,Et),Et}(wt("../core/constants")),N=wt("./p5.Texture"),Be=wt("./p5.RendererGL");function b(){var St;return typeof WeakMap!="function"?null:(St=new WeakMap,b=function(){return St},St)}function E(St,bt){return function(Ct){if(Array.isArray(Ct))return Ct}(St)||function(Ct,Et){if(Symbol.iterator in Object(Ct)||Object.prototype.toString.call(Ct)==="[object Arguments]"){var It=[],Dt=!0,Pt=!1,qt=void 0;try{for(var Ht,Gt=Ct[Symbol.iterator]();!(Dt=(Ht=Gt.next()).done)&&(It.push(Ht.value),!Et||It.length!==Et);Dt=!0);}catch(Ut){Pt=!0,qt=Ut}finally{try{Dt||Gt.return==null||Gt.return()}finally{if(Pt)throw qt}}return It}}(St,bt)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function de(St,bt,Ct){return bt in St?Object.defineProperty(St,bt,{value:Ct,enumerable:!0,configurable:!0,writable:!0}):St[bt]=Ct,St}function pe(St,bt){if(!(St instanceof bt))throw new TypeError("Cannot call a class as a function")}function Ye(St,bt){for(var Ct=0;Ct<bt.length;Ct++){var Et=bt[Ct];Et.enumerable=Et.enumerable||!1,Et.configurable=!0,"value"in Et&&(Et.writable=!0),Object.defineProperty(St,Et.key,Et)}}function me(St,bt,Ct){bt&&Ye(St.prototype,bt)}function Le(St,bt,Ct){return(Le=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(Pt,It,Dt){var Pt=function(qt,Ht){for(;!Object.prototype.hasOwnProperty.call(qt,Ht)&&(qt=ft(qt))!==null;);return qt}(Pt,It);if(Pt)return(Pt=Object.getOwnPropertyDescriptor(Pt,It)).get?Pt.get.call(Dt):Pt.value})(St,bt,Ct||St)}function nt(St,bt){return(nt=Object.setPrototypeOf||function(Ct,Et){return Ct.__proto__=Et,Ct})(St,bt)}function tt(St){return function(){var bt,Ct=ft(St),Ct=(bt=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(bt=ft(this).constructor,Reflect.construct(Ct,arguments,bt)):Ct.apply(this,arguments),this);if(!bt||p(bt)!=="object"&&typeof bt!="function"){if(Ct!==void 0)return Ct;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return bt}}function ft(St){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(bt){return bt.__proto__||Object.getPrototypeOf(bt)})(St)}var yt=function(St){var bt=Et;if(typeof St!="function"&&St!==null)throw new TypeError("Super expression must either be null or a function");bt.prototype=Object.create(St&&St.prototype,{constructor:{value:bt,writable:!0,configurable:!0}}),St&&nt(bt,St);var Ct=tt(Et);function Et(It){var Dt;return pe(this,Et),(Dt=Ct.call(this,It.target._renderer)).fbo=It,Dt.yScale=-1,Dt}return me(Et,[{key:"_computeCameraDefaultSettings",value:function(){Le(ft(Et.prototype),"_computeCameraDefaultSettings",this).call(this),this.defaultAspectRatio=this.fbo.width/this.fbo.height,this.defaultCameraFOV=2*Math.atan(this.fbo.height/2/this.defaultEyeZ)}}]),Et}(d.default.Camera),gt=(d.default.FramebufferCamera=yt,function(){function St(bt,Ct){pe(this,St),this.framebuffer=bt,this.property=Ct}return me(St,[{key:"rawTexture",value:function(){return this.framebuffer[this.property]}},{key:"width",get:function(){return this.framebuffer.width*this.framebuffer.density}},{key:"height",get:function(){return this.framebuffer.height*this.framebuffer.density}}]),St}()),mt=(d.default.FramebufferTexture=gt,function(){function St(bt){var Ct=this,Et=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},It=(pe(this,St),this.target=bt,this.target._renderer.framebuffers.add(this),this._isClipApplied=!1,this.pixels=[],this.format=Et.format||h.UNSIGNED_BYTE,this.channels=Et.channels||(bt._renderer._pInst._glAttributes.alpha?h.RGBA:h.RGB),this.useDepth=Et.depth===void 0||Et.depth,this.depthFormat=Et.depthFormat||h.FLOAT,this.textureFiltering=Et.textureFiltering||h.LINEAR,Et.antialias===void 0?this.antialiasSamples=bt._renderer._pInst._glAttributes.antialias?2:0:typeof Et.antialias=="number"?this.antialiasSamples=Et.antialias:this.antialiasSamples=Et.antialias?2:0,this.antialias=0<this.antialiasSamples,this.antialias&&bt.webglVersion!==h.WEBGL2&&(console.warn("Antialiasing is unsupported in a WebGL 1 context"),this.antialias=!1),this.density=Et.density||bt.pixelDensity(),bt._renderer.GL);if(this.gl=It,Et.width&&Et.height?(Dt=bt._renderer._adjustDimensions(Et.width,Et.height),this.width=Dt.adjustedWidth,this.height=Dt.adjustedHeight,this._autoSized=!1):(Et.width===void 0!=(Et.height===void 0)&&console.warn("Please supply both width and height for a framebuffer to give it a size. Only one was given, so the framebuffer will match the size of its canvas."),this.width=bt.width,this.height=bt.height,this._autoSized=!0),this._checkIfFormatsAvailable(),Et.stencil&&!this.useDepth&&console.warn("A stencil buffer can only be used if also using depth. Since the framebuffer has no depth buffer, the stencil buffer will be ignored."),this.useStencil=this.useDepth&&(Et.stencil===void 0||Et.stencil),this.framebuffer=It.createFramebuffer(),!this.framebuffer)throw new Error("Unable to create a framebuffer");if(this.antialias&&(this.aaFramebuffer=It.createFramebuffer(),!this.aaFramebuffer))throw new Error("Unable to create a framebuffer for antialiasing");this._recreateTextures();var Dt=this.target._renderer._curCamera;this.defaultCamera=this.createCamera(),this.filterCamera=this.createCamera(),this.target._renderer._curCamera=Dt,this.draw(function(){return Ct.target.clear()})}return me(St,[{key:"resize",value:function(bt,Ct){this._autoSized=!1;var Et=this.target._renderer._adjustDimensions(bt,Ct);bt=Et.adjustedWidth,Ct=Et.adjustedHeight,this.width=bt,this.height=Ct,this._handleResize()}},{key:"pixelDensity",value:function(bt){if(!bt)return this.density;this._autoSized=!1,this.density=bt,this._handleResize()}},{key:"autoSized",value:function(bt){if(bt===void 0)return this._autoSized;this._autoSized=bt,this._handleResize()}},{key:"_checkIfFormatsAvailable",value:function(){var bt=this.gl,bt=(this.useDepth&&this.target.webglVersion===h.WEBGL&&!bt.getExtension("WEBGL_depth_texture")&&(console.warn("Unable to create depth textures in this environment. Falling back to a framebuffer without depth."),this.useDepth=!1),this.useDepth&&this.target.webglVersion===h.WEBGL&&this.depthFormat===h.FLOAT&&(console.warn("FLOAT depth format is unavailable in WebGL 1. Defaulting to UNSIGNED_INT."),this.depthFormat=h.UNSIGNED_INT),[h.UNSIGNED_BYTE,h.FLOAT,h.HALF_FLOAT].includes(this.format)||(console.warn("Unknown Framebuffer format. Please use UNSIGNED_BYTE, FLOAT, or HALF_FLOAT. Defaulting to UNSIGNED_BYTE."),this.format=h.UNSIGNED_BYTE),this.useDepth&&![h.UNSIGNED_INT,h.FLOAT].includes(this.depthFormat)&&(console.warn("Unknown Framebuffer depth format. Please use UNSIGNED_INT or FLOAT. Defaulting to FLOAT."),this.depthFormat=h.FLOAT),(0,N.checkWebGLCapabilities)(this.target._renderer));bt.float||this.format!==h.FLOAT||(console.warn("This environment does not support FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=h.UNSIGNED_BYTE),this.useDepth&&!bt.float&&this.depthFormat===h.FLOAT&&(console.warn("This environment does not support FLOAT depth textures. Falling back to UNSIGNED_INT."),this.depthFormat=h.UNSIGNED_INT),bt.halfFloat||this.format!==h.HALF_FLOAT||(console.warn("This environment does not support HALF_FLOAT textures. Falling back to UNSIGNED_BYTE."),this.format=h.UNSIGNED_BYTE),this.channels===h.RGB&&[h.FLOAT,h.HALF_FLOAT].includes(this.format)&&(console.warn("FLOAT and HALF_FLOAT formats do not work cross-platform with only RGB channels. Falling back to RGBA."),this.channels=h.RGBA)}},{key:"_recreateTextures",value:function(){var bt=this.gl,Ct=(this._updateSize(),bt.getParameter(bt.TEXTURE_BINDING_2D)),Et=bt.getParameter(bt.FRAMEBUFFER_BINDING),It=bt.createTexture();if(!It)throw new Error("Unable to create color texture");bt.bindTexture(bt.TEXTURE_2D,It);var Dt=this._glColorFormat();if(bt.texImage2D(bt.TEXTURE_2D,0,Dt.internalFormat,this.width*this.density,this.height*this.density,0,Dt.format,Dt.type,null),this.colorTexture=It,bt.bindFramebuffer(bt.FRAMEBUFFER,this.framebuffer),bt.framebufferTexture2D(bt.FRAMEBUFFER,bt.COLOR_ATTACHMENT0,bt.TEXTURE_2D,It,0),this.useDepth){var It=bt.createTexture();if(!It)throw new Error("Unable to create depth texture");var Pt=this._glDepthFormat();bt.bindTexture(bt.TEXTURE_2D,It),bt.texImage2D(bt.TEXTURE_2D,0,Pt.internalFormat,this.width*this.density,this.height*this.density,0,Pt.format,Pt.type,null),bt.framebufferTexture2D(bt.FRAMEBUFFER,this.useStencil?bt.DEPTH_STENCIL_ATTACHMENT:bt.DEPTH_ATTACHMENT,bt.TEXTURE_2D,It,0),this.depthTexture=It}this.antialias&&(this.colorRenderbuffer=bt.createRenderbuffer(),bt.bindRenderbuffer(bt.RENDERBUFFER,this.colorRenderbuffer),bt.renderbufferStorageMultisample(bt.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,bt.getParameter(bt.MAX_SAMPLES))),Dt.internalFormat,this.width*this.density,this.height*this.density),this.useDepth&&(Pt=this._glDepthFormat(),this.depthRenderbuffer=bt.createRenderbuffer(),bt.bindRenderbuffer(bt.RENDERBUFFER,this.depthRenderbuffer),bt.renderbufferStorageMultisample(bt.RENDERBUFFER,Math.max(0,Math.min(this.antialiasSamples,bt.getParameter(bt.MAX_SAMPLES))),Pt.internalFormat,this.width*this.density,this.height*this.density)),bt.bindFramebuffer(bt.FRAMEBUFFER,this.aaFramebuffer),bt.framebufferRenderbuffer(bt.FRAMEBUFFER,bt.COLOR_ATTACHMENT0,bt.RENDERBUFFER,this.colorRenderbuffer),this.useDepth&&bt.framebufferRenderbuffer(bt.FRAMEBUFFER,this.useStencil?bt.DEPTH_STENCIL_ATTACHMENT:bt.DEPTH_ATTACHMENT,bt.RENDERBUFFER,this.depthRenderbuffer)),this.useDepth&&(this.depth=new gt(this,"depthTexture"),It=bt.NEAREST,this.depthP5Texture=new d.default.Texture(this.target._renderer,this.depth,{minFilter:It,magFilter:It}),this.target._renderer.textures.set(this.depth,this.depthP5Texture)),this.color=new gt(this,"colorTexture"),Dt=this.textureFiltering===h.LINEAR?bt.LINEAR:bt.NEAREST,this.colorP5Texture=new d.default.Texture(this.target._renderer,this.color,{minFilter:Dt,magFilter:Dt}),this.target._renderer.textures.set(this.color,this.colorP5Texture),bt.bindTexture(bt.TEXTURE_2D,Ct),bt.bindFramebuffer(bt.FRAMEBUFFER,Et)}},{key:"_glColorFormat",value:function(){var bt,Ct,Et=this.gl,It=this.format===h.FLOAT?Et.FLOAT:this.format===h.HALF_FLOAT?this.target.webglVersion===h.WEBGL2?Et.HALF_FLOAT:Et.getExtension("OES_texture_half_float").HALF_FLOAT_OES:Et.UNSIGNED_BYTE,Dt=this.channels===h.RGBA?Et.RGBA:Et.RGB;return{internalFormat:this.target.webglVersion===h.WEBGL2?(de(Ct={},Et.FLOAT,de({},Et.RGBA,Et.RGBA32F)),de(Ct,Et.HALF_FLOAT,de({},Et.RGBA,Et.RGBA16F)),de(Ct,Et.UNSIGNED_BYTE,(de(bt={},Et.RGBA,Et.RGBA8),de(bt,Et.RGB,Et.RGB8),bt)),Ct[It][Dt]):this.format===h.HALF_FLOAT?Et.RGBA:Dt,format:Dt,type:It}}},{key:"_glDepthFormat",value:function(){var Et=this.gl,bt=this.useStencil?this.depthFormat===h.FLOAT?Et.FLOAT_32_UNSIGNED_INT_24_8_REV:this.target.webglVersion===h.WEBGL2?Et.UNSIGNED_INT_24_8:Et.getExtension("WEBGL_depth_texture").UNSIGNED_INT_24_8_WEBGL:this.depthFormat===h.FLOAT?Et.FLOAT:Et.UNSIGNED_INT,Ct=this.useStencil?Et.DEPTH_STENCIL:Et.DEPTH_COMPONENT,Et=this.useStencil?this.depthFormat===h.FLOAT?Et.DEPTH32F_STENCIL8:this.target.webglVersion===h.WEBGL2?Et.DEPTH24_STENCIL8:Et.DEPTH_STENCIL:this.target.webglVersion===h.WEBGL2?this.depthFormat===h.FLOAT?Et.DEPTH_COMPONENT32F:Et.DEPTH_COMPONENT24:Et.DEPTH_COMPONENT;return{internalFormat:Et,format:Ct,type:bt}}},{key:"_updateSize",value:function(){this._autoSized&&(this.width=this.target.width,this.height=this.target.height,this.density=this.target.pixelDensity())}},{key:"_canvasSizeChanged",value:function(){this._autoSized&&this._handleResize()}},{key:"_handleResize",value:function(){var It=this.color,bt=this.depth,Ct=this.colorRenderbuffer,Et=this.depthRenderbuffer,It=(this._deleteTexture(It),bt&&this._deleteTexture(bt),this.gl);Ct&&It.deleteRenderbuffer(Ct),Et&&It.deleteRenderbuffer(Et),this._recreateTextures(),this.defaultCamera._resize()}},{key:"createCamera",value:function(){var bt=new yt(this);return bt._computeCameraDefaultSettings(),bt._setDefaultCamera(),this.target._renderer._curCamera=bt}},{key:"_deleteTexture",value:function(bt){this.gl.deleteTexture(bt.rawTexture()),this.target._renderer.textures.delete(bt)}},{key:"remove",value:function(){var bt=this.gl;this._deleteTexture(this.color),this.depth&&this._deleteTexture(this.depth),bt.deleteFramebuffer(this.framebuffer),this.aaFramebuffer&&bt.deleteFramebuffer(this.aaFramebuffer),this.depthRenderbuffer&&bt.deleteRenderbuffer(this.depthRenderbuffer),this.colorRenderbuffer&&bt.deleteRenderbuffer(this.colorRenderbuffer),this.target._renderer.framebuffers.delete(this)}},{key:"begin",value:function(){this.prevFramebuffer=this.target._renderer.activeFramebuffer(),this.prevFramebuffer&&this.prevFramebuffer._beforeEnd(),this.target._renderer.activeFramebuffers.push(this),this._beforeBegin(),this.target.push(),this.target.setCamera(this.defaultCamera),this.target.resetMatrix(),this.target._renderer.uViewMatrix.set(this.target._renderer._curCamera.cameraMatrix),this.target._renderer.uModelMatrix.reset(),this.target._renderer._applyStencilTestIfClipping()}},{key:"_framebufferToBind",value:function(){return this.antialias?this.aaFramebuffer:this.framebuffer}},{key:"_beforeBegin",value:function(){var bt=this.gl;bt.bindFramebuffer(bt.FRAMEBUFFER,this._framebufferToBind()),this.target._renderer.viewport(this.width*this.density,this.height*this.density)}},{key:"_beforeEnd",value:function(){if(this.antialias){var bt=this.gl,Ct=(bt.bindFramebuffer(bt.READ_FRAMEBUFFER,this.aaFramebuffer),bt.bindFramebuffer(bt.DRAW_FRAMEBUFFER,this.framebuffer),[[bt.COLOR_BUFFER_BIT,this.colorP5Texture.glMagFilter]]);this.useDepth&&Ct.push([bt.DEPTH_BUFFER_BIT,this.depthP5Texture.glMagFilter]);for(var Et=0,It=Ct;Et<It.length;Et++){var Pt=E(It[Et],2),Dt=Pt[0],Pt=Pt[1];bt.blitFramebuffer(0,0,this.width*this.density,this.height*this.density,0,0,this.width*this.density,this.height*this.density,Dt,Pt)}}}},{key:"end",value:function(){var bt=this.gl;if(this.target.pop(),this.target._renderer.activeFramebuffers.pop()!==this)throw new Error("It looks like you've called end() while another Framebuffer is active.");this._beforeEnd(),this.prevFramebuffer?this.prevFramebuffer._beforeBegin():(bt.bindFramebuffer(bt.FRAMEBUFFER,null),this.target._renderer.viewport(this.target._renderer._origViewport.width,this.target._renderer._origViewport.height)),this.target._renderer._applyStencilTestIfClipping()}},{key:"draw",value:function(bt){this.begin(),bt(),this.end()}},{key:"loadPixels",value:function(){var bt=this.gl,Ct=this.target._renderer.activeFramebuffer(),Et=(bt.bindFramebuffer(bt.FRAMEBUFFER,this.framebuffer),this._glColorFormat());this.pixels=(0,Be.readPixelsWebGL)(this.pixels,bt,this.framebuffer,0,0,this.width*this.density,this.height*this.density,Et.format,Et.type),Ct?bt.bindFramebuffer(bt.FRAMEBUFFER,Ct._framebufferToBind()):bt.bindFramebuffer(bt.FRAMEBUFFER,null)}},{key:"get",value:function(bt,Ct,Et,It){d.default._validateParameters("p5.Framebuffer.get",arguments);var Dt=this._glColorFormat();if(bt===void 0&&Ct===void 0)Ct=bt=0,Et=this.width,It=this.height;else if(Et===void 0&&It===void 0)return(bt<0||Ct<0||bt>=this.width||Ct>=this.height)&&(console.warn("The x and y values passed to p5.Framebuffer.get are outside of its range and will be clamped."),bt=this.target.constrain(bt,0,this.width-1),Ct=this.target.constrain(Ct,0,this.height-1)),(0,Be.readPixelWebGL)(this.gl,this.framebuffer,bt*this.density,Ct*this.density,Dt.format,Dt.type);bt=this.target.constrain(bt,0,this.width-1),Ct=this.target.constrain(Ct,0,this.height-1),Et=this.target.constrain(Et,1,this.width-bt),It=this.target.constrain(It,1,this.height-Ct);for(var Pt=(0,Be.readPixelsWebGL)(void 0,this.gl,this.framebuffer,bt*this.density,Ct*this.density,Et*this.density,It*this.density,Dt.format,Dt.type),qt=new Uint8ClampedArray(Et*It*this.density*this.density*4),Ht=(qt.fill(255),Dt.type===this.gl.RGB?3:4),Gt=0;Gt<It*this.density;Gt++)for(var Ut=0;Ut<Et*this.density;Ut++)for(var Yt=0;Yt<4;Yt++){var Zt,vt=4*(Gt*Et*this.density+Ut)+Yt;Yt<Ht&&(Zt=Ht==4?vt:(Gt*Et*this.density+Ut)*Ht+Yt,qt[vt]=Pt[Zt])}return bt=new d.default.Image(Et*this.density,It*this.density),bt.imageData=bt.canvas.getContext("2d").createImageData(bt.width,bt.height),bt.imageData.data.set(qt),bt.pixels=bt.imageData.data,bt.updatePixels(),this.density!==1&&bt.resize(Et,It),bt}},{key:"updatePixels",value:function(){var bt=this.gl,Ct=(this.colorP5Texture.bindTexture(),this._glColorFormat()),Et=Ct.format===bt.RGBA?4:3,Et=this.width*this.height*this.density*this.density*Et,It=Ct.type===bt.UNSIGNED_BYTE?Uint8Array:Float32Array;if(!(this.pixels instanceof It)||this.pixels.length!==Et)throw new Error("The pixels array has not been set correctly. Please call loadPixels() before updatePixels().");bt.texImage2D(bt.TEXTURE_2D,0,Ct.internalFormat,this.width*this.density,this.height*this.density,0,Ct.format,Ct.type,this.pixels),this.colorP5Texture.unbindTexture(),It=this.target._renderer.activeFramebuffer(),this.antialias?(this.begin(),this.target.push(),this.target.imageMode(this.target.CENTER),this.target.resetMatrix(),this.target.noStroke(),this.target.clear(),this.target.image(this,0,0),this.target.pop(),this.useDepth&&(bt.clearDepth(1),bt.clear(bt.DEPTH_BUFFER_BIT)),this.end()):(bt.bindFramebuffer(bt.FRAMEBUFFER,this.framebuffer),this.useDepth&&(bt.clearDepth(1),bt.clear(bt.DEPTH_BUFFER_BIT)),It?bt.bindFramebuffer(bt.FRAMEBUFFER,It._framebufferToBind()):bt.bindFramebuffer(bt.FRAMEBUFFER,null))}}]),St}()),wt=d.default.Framebuffer=mt;u.default=wt},{"../core/constants":272,"../core/main":283,"./p5.RendererGL":341,"./p5.Texture":343,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.typed-array.uint8-clamped-array":243,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],335:[function(t,l,u){function s(pe){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ye){return typeof Ye}:function(Ye){return Ye&&typeof Symbol=="function"&&Ye.constructor===Symbol&&Ye!==Symbol.prototype?"symbol":typeof Ye})(pe)}function p(pe){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(Ye){return s(Ye)}:function(Ye){return Ye&&typeof Symbol=="function"&&Ye.constructor===Symbol&&Ye!==Symbol.prototype?"symbol":s(Ye)})(pe)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.flat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.unscopables.flat"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.entries"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.flat"),t("core-js/modules/es.array.for-each"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.last-index-of"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.unscopables.flat"),t("core-js/modules/es.array-buffer.constructor"),t("core-js/modules/es.map"),t("core-js/modules/es.number.constructor"),t("core-js/modules/es.object.entries"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.set"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.for-each"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=(de=t("../core/main"))&&de.__esModule?de:{default:de},h=function(pe){if(pe&&pe.__esModule)return pe;if(pe===null||p(pe)!=="object"&&typeof pe!="function")return{default:pe};var Ye=N();if(Ye&&Ye.has(pe))return Ye.get(pe);var me,Le={},nt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(me in pe){var tt;Object.prototype.hasOwnProperty.call(pe,me)&&((tt=nt?Object.getOwnPropertyDescriptor(pe,me):null)&&(tt.get||tt.set)?Object.defineProperty(Le,me,tt):Le[me]=pe[me])}return Le.default=pe,Ye&&Ye.set(pe,Le),Le}(t("../core/constants"));function N(){var pe;return typeof WeakMap!="function"?null:(pe=new WeakMap,N=function(){return pe},pe)}function Be(pe){return function(Ye){if(Array.isArray(Ye)){for(var me=0,Le=new Array(Ye.length);me<Ye.length;me++)Le[me]=Ye[me];return Le}}(pe)||function(Ye){if(Symbol.iterator in Object(Ye)||Object.prototype.toString.call(Ye)==="[object Arguments]")return Array.from(Ye)}(pe)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function b(pe,Ye){return function(me){if(Array.isArray(me))return me}(pe)||function(me,Le){if(Symbol.iterator in Object(me)||Object.prototype.toString.call(me)==="[object Arguments]"){var nt=[],tt=!0,ft=!1,yt=void 0;try{for(var gt,mt=me[Symbol.iterator]();!(tt=(gt=mt.next()).done)&&(nt.push(gt.value),!Le||nt.length!==Le);tt=!0);}catch(wt){ft=!0,yt=wt}finally{try{tt||mt.return==null||mt.return()}finally{if(ft)throw yt}}return nt}}(pe,Ye)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function E(pe,Ye){for(var me=0;me<Ye.length;me++){var Le=Ye[me];Le.enumerable=Le.enumerable||!1,Le.configurable=!0,"value"in Le&&(Le.writable=!0),Object.defineProperty(pe,Le.key,Le)}}d.default.Geometry=function(){function pe(Le,nt,tt){if(!(this instanceof pe))throw new TypeError("Cannot call a class as a function");this.vertices=[],this.boundingBoxCache=null,this.lineVertices=new d.default.DataArray,this.lineTangentsIn=new d.default.DataArray,this.lineTangentsOut=new d.default.DataArray,this.lineSides=new d.default.DataArray,this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.vertexColors=[],this.vertexStrokeColors=[],this.lineVertexColors=new d.default.DataArray,this.detailX=Le!==void 0?Le:1,this.detailY=nt!==void 0?nt:1,this.dirtyFlags={},this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,tt instanceof Function&&tt.call(this)}var Ye,me;return Ye=pe,(me=[{key:"calculateBoundingBox",value:function(){if(!this.boundingBoxCache){for(var Le=new d.default.Vector(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),nt=new d.default.Vector(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),tt=0;tt<this.vertices.length;tt++){var ft=this.vertices[tt];Le.x=Math.min(Le.x,ft.x),Le.y=Math.min(Le.y,ft.y),Le.z=Math.min(Le.z,ft.z),nt.x=Math.max(nt.x,ft.x),nt.y=Math.max(nt.y,ft.y),nt.z=Math.max(nt.z,ft.z)}var yt=new d.default.Vector(nt.x-Le.x,nt.y-Le.y,nt.z-Le.z),gt=new d.default.Vector((Le.x+nt.x)/2,(Le.y+nt.y)/2,(Le.z+nt.z)/2);this.boundingBoxCache={min:Le,max:nt,size:yt,offset:gt}}return this.boundingBoxCache}},{key:"reset",value:function(){this._hasFillTransparency=void 0,this._hasStrokeTransparency=void 0,this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear(),this.vertices.length=0,this.edges.length=0,this.vertexColors.length=0,this.vertexStrokeColors.length=0,this.lineVertexColors.clear(),this.vertexNormals.length=0,this.uvs.length=0,this.dirtyFlags={}}},{key:"hasFillTransparency",value:function(){if(this._hasFillTransparency===void 0){this._hasFillTransparency=!1;for(var Le=0;Le<this.vertexColors.length;Le+=4)if(this.vertexColors[Le+3]<1){this._hasFillTransparency=!0;break}}return this._hasFillTransparency}},{key:"hasStrokeTransparency",value:function(){if(this._hasStrokeTransparency===void 0){this._hasStrokeTransparency=!1;for(var Le=0;Le<this.lineVertexColors.length;Le+=4)if(this.lineVertexColors[Le+3]<1){this._hasStrokeTransparency=!0;break}}return this._hasStrokeTransparency}},{key:"clearColors",value:function(){return this.vertexColors=[],this}},{key:"saveObj",value:function(){var Le=this,nt=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"model.obj",tt="";if(this.vertices.forEach(function(gt){tt+="v ".concat(gt.x," ").concat(gt.y," ").concat(gt.z,`
`)}),this.uvs&&0<this.uvs.length)for(var ft=0;ft<this.uvs.length;ft+=2)tt+="vt ".concat(this.uvs[ft]," ").concat(this.uvs[ft+1],`
`);this.vertexNormals&&0<this.vertexNormals.length&&this.vertexNormals.forEach(function(gt){tt+="vn ".concat(gt.x," ").concat(gt.y," ").concat(gt.z,`
`)}),this.faces.forEach(function(gt){var mt="f";gt.forEach(function(wt){mt=mt+" "+(wt+1),(0<Le.vertexNormals.length||0<Le.uvs.length)&&(mt+="/",0<Le.uvs.length&&(mt+=wt+1),mt+="/",0<Le.vertexNormals.length&&(mt+=wt+1))}),tt+=mt+`
`});var yt=new Blob([tt],{type:"text/plain"});d.default.prototype.downloadFile(yt,nt,"obj")}},{key:"saveStl",value:function(){var Le=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"model.stl",nt=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).binary,nt=nt!==void 0&&nt,tt=Le.substring(0,Le.lastIndexOf(".")),ft=[],yt=!0,gt=!1,mt=void 0;try{for(var wt,St=this.faces[Symbol.iterator]();!(yt=(wt=St.next()).done);yt=!0){var bt=wt.value,Ct=d.default.Vector.sub(this.vertices[bt[1]],this.vertices[bt[0]]),Et=d.default.Vector.sub(this.vertices[bt[2]],this.vertices[bt[0]]),It=Ct.y*Et.z-Ct.z*Et.y,Dt=Ct.z*Et.x-Ct.x*Et.z,Pt=Ct.x*Et.y-Ct.y*Et.x;ft.push(new d.default.Vector(It,Dt,Pt).normalize())}}catch(sr){gt=!0,mt=sr}finally{try{yt||St.return==null||St.return()}finally{if(gt)throw mt}}if(nt){var qt,Ht=80,gt=2*this.faces.length+3*this.faces.length*4*4+80+4,mt=new ArrayBuffer(gt);(qt=new DataView(mt)).setUint32(Ht,this.faces.length,!0),Ht+=4;for(var Gt=0,Ut=Object.entries(this.faces);Gt<Ut.length;Gt++){var Yt=b(Ut[Gt],2),vt=Yt[0],Yt=Yt[1],vt=ft[vt],Zt=(qt.setFloat32(Ht,vt.x,!0),Ht+=4,qt.setFloat32(Ht,vt.y,!0),Ht+=4,qt.setFloat32(Ht,vt.z,!0),Ht+=4,!0),vt=!1,Rt=void 0;try{for(var Lt,Vt=Yt[Symbol.iterator]();!(Zt=(Lt=Vt.next()).done);Zt=!0){var Jt=Lt.value,er=this.vertices[Jt];qt.setFloat32(Ht,er.x,!0),Ht+=4,qt.setFloat32(Ht,er.y,!0),Ht+=4,qt.setFloat32(Ht,er.z,!0),Ht+=4}}catch(Nr){vt=!0,Rt=Nr}finally{try{Zt||Vt.return==null||Vt.return()}finally{if(vt)throw Rt}}qt.setUint16(Ht,0,!0),Ht+=2}}else{qt="solid "+tt+`
`;for(var ur=0,yr=Object.entries(this.faces);ur<yr.length;ur++){var Qt=b(yr[ur],2),or=Qt[0],Qt=Qt[1],or=ft[or],nr=(qt=qt+(" facet norm "+or.x+" "+or.y+" "+or.z+`
`)+`  outer loop
`,!0),or=!1,Wt=void 0;try{for(var ir,br=Qt[Symbol.iterator]();!(nr=(ir=br.next()).done);nr=!0){var Sr=ir.value,_r=this.vertices[Sr];qt+="   vertex "+_r.x+" "+_r.y+" "+_r.z+`
`}}catch(sr){or=!0,Wt=sr}finally{try{nr||br.return==null||br.return()}finally{if(or)throw Wt}}qt=qt+`  endloop
 endfacet
`}qt+="endsolid "+tt+`
`}nt=new Blob([qt],{type:"text/plain"}),d.default.prototype.downloadFile(nt,Le,"stl")}},{key:"flipU",value:function(){this.uvs=this.uvs.flat().map(function(Le,nt){return nt%2==0?1-Le:Le})}},{key:"flipV",value:function(){this.uvs=this.uvs.flat().map(function(Le,nt){return nt%2==0?Le:1-Le})}},{key:"computeFaces",value:function(){this.faces.length=0;for(var Le,nt,tt,ft=this.detailX+1,yt=0;yt<this.detailY;yt++)for(var gt=0;gt<this.detailX;gt++)nt=(yt+1)*ft+gt+1,this.faces.push([yt*ft+gt,Le=yt*ft+gt+1,tt=(yt+1)*ft+gt]),this.faces.push([tt,Le,nt]);return this}},{key:"_getFaceNormal",value:function(nt){var nt=this.faces[nt],tt=this.vertices[nt[0]],yt=this.vertices[nt[1]],nt=this.vertices[nt[2]],yt=d.default.Vector.sub(yt,tt),nt=d.default.Vector.sub(nt,tt),tt=d.default.Vector.cross(yt,nt),ft=d.default.Vector.mag(tt),yt=ft/(d.default.Vector.mag(yt)*d.default.Vector.mag(nt));return yt===0||isNaN(yt)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),tt):(1<yt&&(yt=1),tt.mult(Math.asin(yt)/ft))}},{key:"computeNormals",value:function(){var Le,nt=this,tt=0<arguments.length&&arguments[0]!==void 0?arguments[0]:h.FLAT,ft=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).roundToPrecision,yt=this.vertexNormals,gt=this.vertices,mt=this.faces;if(tt===h.SMOOTH){for(var wt={},St=[],bt=Math.pow(10,ft===void 0?3:ft),Ct=function(qt){return Math.round(qt*bt)/bt},Et=function(qt){return"".concat(Ct(qt.x),",").concat(Ct(qt.y),",").concat(Ct(qt.z))},It=0;It<gt.length;It++){var Dt=gt[It],Pt=Et(Dt);wt[Pt]===void 0&&(wt[Pt]=St.length,St.push(Dt))}mt.forEach(function(qt){for(var Ht=0;Ht<3;++Ht){var Gt=qt[Ht],Gt=gt[Gt],Gt=Et(Gt);qt[Ht]=wt[Gt]}}),this.edges.forEach(function(qt){for(var Ht=0;Ht<2;++Ht){var Gt=qt[Ht],Gt=gt[Gt],Gt=Et(Gt);qt[Ht]=wt[Gt]}}),this.vertices=gt=St}for(Le=yt.length=0;Le<gt.length;++Le)yt.push(new d.default.Vector);for(mt.forEach(function(qt,Ht){for(var Gt=nt._getFaceNormal(Ht),Ut=0;Ut<3;++Ut){var Yt=qt[Ut];yt[Yt].add(Gt)}}),Le=0;Le<gt.length;++Le)yt[Le].normalize();return this}},{key:"averageNormals",value:function(){for(var Le=0;Le<=this.detailY;Le++){var nt=this.detailX+1,tt=d.default.Vector.add(this.vertexNormals[Le*nt],this.vertexNormals[Le*nt+this.detailX]),tt=d.default.Vector.div(tt,2);this.vertexNormals[Le*nt]=tt,this.vertexNormals[Le*nt+this.detailX]=tt}return this}},{key:"averagePoleNormals",value:function(){for(var Le=new d.default.Vector(0,0,0),nt=0;nt<this.detailX;nt++)Le.add(this.vertexNormals[nt]);for(var Le=d.default.Vector.div(Le,this.detailX),tt=0;tt<this.detailX;tt++)this.vertexNormals[tt]=Le;Le=new d.default.Vector(0,0,0);for(var ft=this.vertices.length-1;ft>this.vertices.length-1-this.detailX;ft--)Le.add(this.vertexNormals[ft]);Le=d.default.Vector.div(Le,this.detailX);for(var yt=this.vertices.length-1;yt>this.vertices.length-1-this.detailX;yt--)this.vertexNormals[yt]=Le;return this}},{key:"_makeTriangleEdges",value:function(){for(var Le=this.edges.length=0;Le<this.faces.length;Le++)this.edges.push([this.faces[Le][0],this.faces[Le][1]]),this.edges.push([this.faces[Le][1],this.faces[Le][2]]),this.edges.push([this.faces[Le][2],this.faces[Le][0]]);return this}},{key:"_edgesToVertices",value:function(){this.lineVertices.clear(),this.lineTangentsIn.clear(),this.lineTangentsOut.clear(),this.lineSides.clear();for(var Le,nt=new Map,tt=new Set,ft=0;ft<this.edges.length;ft++){var yt,gt=this.edges[ft-1],mt=this.edges[ft],wt=this.vertices[mt[0]],St=this.vertices[mt[1]],bt=0<this.vertexStrokeColors.length&&gt?this.vertexStrokeColors.slice(4*gt[1],4*(gt[1]+1)):[0,0,0,0],Ct=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*mt[0],4*(mt[0]+1)):[0,0,0,0],Et=0<this.vertexStrokeColors.length?this.vertexStrokeColors.slice(4*mt[1],4*(mt[1]+1)):[0,0,0,0],It=St.copy().sub(wt).normalize(),Dt=0<It.magSq();Dt&&this._addSegment(wt,St,Ct,Et,It),0<ft&&gt[1]===mt[0]?tt.has(mt[0])||(tt.add(mt[0]),nt.delete(mt[0]),Le&&Dt&&It.dot(Le)<1-1e-8&&this._addJoin(wt,Le,It,Ct)):(Dt&&!tt.has(mt[0])&&((yt=nt.get(mt[0]))?(this._addJoin(wt,yt.dir,It,Ct),nt.delete(mt[0]),tt.add(mt[0])):nt.set(mt[0],{point:wt,dir:It.copy().mult(-1),color:Ct})),Le&&!tt.has(gt[1])&&((yt=nt.get(gt[1]))?(this._addJoin(this.vertices[gt[1]],Le,yt.dir.copy().mult(-1),bt),nt.delete(gt[1]),tt.add(gt[1])):nt.set(gt[1],{point:this.vertices[gt[1]],dir:Le,color:bt}),Le=void 0)),ft!==this.edges.length-1||tt.has(mt[1])||((wt=nt.get(mt[1]))?(this._addJoin(St,It,wt.dir.copy().mult(-1),Et),nt.delete(mt[1]),tt.add(mt[1])):nt.set(mt[1],{point:St,dir:It,color:Et})),Dt&&(Le=It)}var Pt=!0,qt=!1,Ht=void 0;try{for(var Gt,Ut=nt.values()[Symbol.iterator]();!(Pt=(Gt=Ut.next()).done);Pt=!0){var Yt=Gt.value,Zt=Yt.point,vt=Yt.dir,Rt=Yt.color;this._addCap(Zt,vt,Rt)}}catch(Lt){qt=!0,Ht=Lt}finally{try{Pt||Ut.return==null||Ut.return()}finally{if(qt)throw Ht}}return this}},{key:"_addSegment",value:function(gt,mt,tt,ft,yt){var gt=gt.array(),mt=mt.array(),wt=yt.array();this.lineSides.push(1,1,-1,1,-1,-1);for(var St=0,bt=[this.lineTangentsIn,this.lineTangentsOut];St<bt.length;St++)for(var Ct=bt[St],Et=0;Et<6;Et++)Ct.push.apply(Ct,Be(wt));return(yt=this.lineVertices).push.apply(yt,Be(gt).concat(Be(mt),Be(gt),Be(mt),Be(mt),Be(gt))),(yt=this.lineVertexColors).push.apply(yt,Be(tt).concat(Be(ft),Be(tt),Be(ft),Be(ft),Be(tt))),this}},{key:"_addCap",value:function(Le,nt,tt){for(var ft,yt=Le.array(),gt=nt.array(),mt=[0,0,0],wt=0;wt<6;wt++)(ft=this.lineVertices).push.apply(ft,Be(yt)),(ft=this.lineTangentsIn).push.apply(ft,Be(gt)),(ft=this.lineTangentsOut).push.apply(ft,mt),(ft=this.lineVertexColors).push.apply(ft,Be(tt));return this.lineSides.push(-1,2,-2,1,2,-1),this}},{key:"_addJoin",value:function(Le,nt,tt,ft){for(var yt,gt=Le.array(),mt=nt.array(),wt=tt.array(),St=0;St<12;St++)(yt=this.lineVertices).push.apply(yt,Be(gt)),(yt=this.lineTangentsIn).push.apply(yt,Be(mt)),(yt=this.lineTangentsOut).push.apply(yt,Be(wt)),(yt=this.lineVertexColors).push.apply(yt,Be(ft));return this.lineSides.push(-1,-3,-2,-1,0,-3),this.lineSides.push(3,1,2,3,0,1),this}},{key:"normalize",value:function(){if(0<this.vertices.length){for(var Le=this.vertices[0].copy(),nt=this.vertices[0].copy(),tt=0;tt<this.vertices.length;tt++)Le.x=Math.max(Le.x,this.vertices[tt].x),nt.x=Math.min(nt.x,this.vertices[tt].x),Le.y=Math.max(Le.y,this.vertices[tt].y),nt.y=Math.min(nt.y,this.vertices[tt].y),Le.z=Math.max(Le.z,this.vertices[tt].z),nt.z=Math.min(nt.z,this.vertices[tt].z);for(var ft=d.default.Vector.lerp(Le,nt,.5),yt=d.default.Vector.sub(Le,nt),gt=200/Math.max(Math.max(yt.x,yt.y),yt.z),mt=0;mt<this.vertices.length;mt++)this.vertices[mt].sub(ft),this.vertices[mt].mult(gt)}return this}}])&&E(Ye.prototype,me),pe}();var de=d.default.Geometry;u.default=de},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array-buffer.constructor":152,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.flat":160,"core-js/modules/es.array.for-each":161,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.last-index-of":167,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.unscopables.flat":173,"core-js/modules/es.map":175,"core-js/modules/es.number.constructor":179,"core-js/modules/es.object.entries":184,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.for-each":245,"core-js/modules/web.dom-collections.iterator":246}],336:[function(N,l,u){N("core-js/modules/es.array.iterator"),N("core-js/modules/es.object.to-string"),N("core-js/modules/es.typed-array.float32-array"),N("core-js/modules/es.typed-array.copy-within"),N("core-js/modules/es.typed-array.every"),N("core-js/modules/es.typed-array.fill"),N("core-js/modules/es.typed-array.filter"),N("core-js/modules/es.typed-array.find"),N("core-js/modules/es.typed-array.find-index"),N("core-js/modules/es.typed-array.for-each"),N("core-js/modules/es.typed-array.includes"),N("core-js/modules/es.typed-array.index-of"),N("core-js/modules/es.typed-array.iterator"),N("core-js/modules/es.typed-array.join"),N("core-js/modules/es.typed-array.last-index-of"),N("core-js/modules/es.typed-array.map"),N("core-js/modules/es.typed-array.reduce"),N("core-js/modules/es.typed-array.reduce-right"),N("core-js/modules/es.typed-array.reverse"),N("core-js/modules/es.typed-array.set"),N("core-js/modules/es.typed-array.slice"),N("core-js/modules/es.typed-array.some"),N("core-js/modules/es.typed-array.sort"),N("core-js/modules/es.typed-array.subarray"),N("core-js/modules/es.typed-array.to-locale-string"),N("core-js/modules/es.typed-array.to-string"),N("core-js/modules/es.array.iterator"),N("core-js/modules/es.object.to-string"),N("core-js/modules/es.typed-array.float32-array"),N("core-js/modules/es.typed-array.copy-within"),N("core-js/modules/es.typed-array.every"),N("core-js/modules/es.typed-array.fill"),N("core-js/modules/es.typed-array.filter"),N("core-js/modules/es.typed-array.find"),N("core-js/modules/es.typed-array.find-index"),N("core-js/modules/es.typed-array.for-each"),N("core-js/modules/es.typed-array.includes"),N("core-js/modules/es.typed-array.index-of"),N("core-js/modules/es.typed-array.iterator"),N("core-js/modules/es.typed-array.join"),N("core-js/modules/es.typed-array.last-index-of"),N("core-js/modules/es.typed-array.map"),N("core-js/modules/es.typed-array.reduce"),N("core-js/modules/es.typed-array.reduce-right"),N("core-js/modules/es.typed-array.reverse"),N("core-js/modules/es.typed-array.set"),N("core-js/modules/es.typed-array.slice"),N("core-js/modules/es.typed-array.some"),N("core-js/modules/es.typed-array.sort"),N("core-js/modules/es.typed-array.subarray"),N("core-js/modules/es.typed-array.to-locale-string"),N("core-js/modules/es.typed-array.to-string"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(N=N("../core/main"))&&N.__esModule?N:{default:N};function p(Be,b){for(var E=0;E<b.length;E++){var de=b[E];de.enumerable=de.enumerable||!1,de.configurable=!0,"value"in de&&(de.writable=!0),Object.defineProperty(Be,de.key,de)}}var d=Array,h=function(Be){return Array.isArray(Be)},N=(typeof Float32Array<"u"&&(d=Float32Array,h=function(Be){return Array.isArray(Be)||Be instanceof Float32Array}),s.default.Matrix=function(){function Be(){var pe=this,Ye=Be;if(pe instanceof Ye)return arguments.length&&((pe=arguments.length-1)<0||arguments.length<=pe?void 0:arguments[pe])instanceof s.default&&(this.p5=(Ye=arguments.length-1)<0||arguments.length<=Ye?void 0:arguments[Ye]),(arguments.length<=0?void 0:arguments[0])==="mat3"?this.mat3=Array.isArray(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:new d([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:new d([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this;throw new TypeError("Cannot call a class as a function")}var b,E,de;return b=Be,de=[{key:"identity",value:function(pe){return new s.default.Matrix(pe)}}],(E=[{key:"reset",value:function(){return this.mat3?this.mat3.set([1,0,0,0,1,0,0,0,1]):this.mat4&&this.mat4.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this}},{key:"set",value:function(pe){var Ye=arguments;if(pe instanceof s.default.Matrix?Ye=pe.mat4:h(pe)&&(Ye=pe),Ye.length!==16)s.default._friendlyError("Expected 16 values but received ".concat(Ye.length,"."),"p5.Matrix.set");else for(var me=0;me<16;me++)this.mat4[me]=Ye[me];return this}},{key:"get",value:function(){return new s.default.Matrix(this.mat4,this.p5)}},{key:"copy",value:function(){var pe;return this.mat3!==void 0?((pe=new s.default.Matrix("mat3",this.p5)).mat3[0]=this.mat3[0],pe.mat3[1]=this.mat3[1],pe.mat3[2]=this.mat3[2],pe.mat3[3]=this.mat3[3],pe.mat3[4]=this.mat3[4],pe.mat3[5]=this.mat3[5],pe.mat3[6]=this.mat3[6],pe.mat3[7]=this.mat3[7],pe.mat3[8]=this.mat3[8]):((pe=new s.default.Matrix(this.p5)).mat4[0]=this.mat4[0],pe.mat4[1]=this.mat4[1],pe.mat4[2]=this.mat4[2],pe.mat4[3]=this.mat4[3],pe.mat4[4]=this.mat4[4],pe.mat4[5]=this.mat4[5],pe.mat4[6]=this.mat4[6],pe.mat4[7]=this.mat4[7],pe.mat4[8]=this.mat4[8],pe.mat4[9]=this.mat4[9],pe.mat4[10]=this.mat4[10],pe.mat4[11]=this.mat4[11],pe.mat4[12]=this.mat4[12],pe.mat4[13]=this.mat4[13],pe.mat4[14]=this.mat4[14],pe.mat4[15]=this.mat4[15]),pe}},{key:"transpose",value:function(pe){var Ye,me,Le,nt,tt,ft;return pe instanceof s.default.Matrix?(Ye=pe.mat4[1],me=pe.mat4[2],Le=pe.mat4[3],nt=pe.mat4[6],tt=pe.mat4[7],ft=pe.mat4[11],this.mat4[0]=pe.mat4[0],this.mat4[1]=pe.mat4[4],this.mat4[2]=pe.mat4[8],this.mat4[3]=pe.mat4[12],this.mat4[4]=Ye,this.mat4[5]=pe.mat4[5],this.mat4[6]=pe.mat4[9],this.mat4[7]=pe.mat4[13],this.mat4[8]=me,this.mat4[9]=nt,this.mat4[10]=pe.mat4[10],this.mat4[11]=pe.mat4[14],this.mat4[12]=Le,this.mat4[13]=tt,this.mat4[14]=ft,this.mat4[15]=pe.mat4[15]):h(pe)&&(Ye=pe[1],me=pe[2],Le=pe[3],nt=pe[6],tt=pe[7],ft=pe[11],this.mat4[0]=pe[0],this.mat4[1]=pe[4],this.mat4[2]=pe[8],this.mat4[3]=pe[12],this.mat4[4]=Ye,this.mat4[5]=pe[5],this.mat4[6]=pe[9],this.mat4[7]=pe[13],this.mat4[8]=me,this.mat4[9]=nt,this.mat4[10]=pe[10],this.mat4[11]=pe[14],this.mat4[12]=Le,this.mat4[13]=tt,this.mat4[14]=ft,this.mat4[15]=pe[15]),this}},{key:"invert",value:function(Pt){Pt instanceof s.default.Matrix?(Ye=Pt.mat4[0],me=Pt.mat4[1],Le=Pt.mat4[2],nt=Pt.mat4[3],tt=Pt.mat4[4],ft=Pt.mat4[5],yt=Pt.mat4[6],gt=Pt.mat4[7],mt=Pt.mat4[8],wt=Pt.mat4[9],St=Pt.mat4[10],bt=Pt.mat4[11],Ct=Pt.mat4[12],Et=Pt.mat4[13],It=Pt.mat4[14],Dt=Pt.mat4[15]):h(Pt)&&(Ye=Pt[0],me=Pt[1],Le=Pt[2],nt=Pt[3],tt=Pt[4],ft=Pt[5],yt=Pt[6],gt=Pt[7],mt=Pt[8],wt=Pt[9],St=Pt[10],bt=Pt[11],Ct=Pt[12],Et=Pt[13],It=Pt[14],Dt=Pt[15]);var Ye,me,Le,nt,tt,ft,yt,gt,mt,wt,St,bt,Ct,Et,It,Dt,Pt=Ye*ft-me*tt,qt=Ye*yt-Le*tt,Ht=Ye*gt-nt*tt,Gt=me*yt-Le*ft,Ut=me*gt-nt*ft,Yt=Le*gt-nt*yt,Zt=mt*Et-wt*Ct,vt=mt*It-St*Ct,Rt=mt*Dt-bt*Ct,Lt=wt*It-St*Et,Vt=wt*Dt-bt*Et,Jt=St*Dt-bt*It,er=Pt*Jt-qt*Vt+Ht*Lt+Gt*Rt-Ut*vt+Yt*Zt;return er?(this.mat4[0]=(ft*Jt-yt*Vt+gt*Lt)*(er=1/er),this.mat4[1]=(Le*Vt-me*Jt-nt*Lt)*er,this.mat4[2]=(Et*Yt-It*Ut+Dt*Gt)*er,this.mat4[3]=(St*Ut-wt*Yt-bt*Gt)*er,this.mat4[4]=(yt*Rt-tt*Jt-gt*vt)*er,this.mat4[5]=(Ye*Jt-Le*Rt+nt*vt)*er,this.mat4[6]=(It*Ht-Ct*Yt-Dt*qt)*er,this.mat4[7]=(mt*Yt-St*Ht+bt*qt)*er,this.mat4[8]=(tt*Vt-ft*Rt+gt*Zt)*er,this.mat4[9]=(me*Rt-Ye*Vt-nt*Zt)*er,this.mat4[10]=(Ct*Ut-Et*Ht+Dt*Pt)*er,this.mat4[11]=(wt*Ht-mt*Ut-bt*Pt)*er,this.mat4[12]=(ft*vt-tt*Lt-yt*Zt)*er,this.mat4[13]=(Ye*Lt-me*vt+Le*Zt)*er,this.mat4[14]=(Et*qt-Ct*Gt-It*Pt)*er,this.mat4[15]=(mt*Gt-wt*qt+St*Pt)*er,this):null}},{key:"invert3x3",value:function(){var pe=this.mat3[0],Ye=this.mat3[1],me=this.mat3[2],Le=this.mat3[3],nt=this.mat3[4],tt=this.mat3[5],ft=this.mat3[6],yt=this.mat3[7],gt=this.mat3[8],mt=gt*nt-tt*yt,wt=-gt*Le+tt*ft,St=yt*Le-nt*ft,bt=pe*mt+Ye*wt+me*St;return bt?(this.mat3[0]=mt*(bt=1/bt),this.mat3[1]=(-gt*Ye+me*yt)*bt,this.mat3[2]=(tt*Ye-me*nt)*bt,this.mat3[3]=wt*bt,this.mat3[4]=(gt*pe-me*ft)*bt,this.mat3[5]=(-tt*pe+me*Le)*bt,this.mat3[6]=St*bt,this.mat3[7]=(-yt*pe+Ye*ft)*bt,this.mat3[8]=(nt*pe-Ye*Le)*bt,this):null}},{key:"transpose3x3",value:function(pe){var Ye=(pe=pe===void 0?this.mat3:pe)[1],me=pe[2],Le=pe[5];return this.mat3[0]=pe[0],this.mat3[1]=pe[3],this.mat3[2]=pe[6],this.mat3[3]=Ye,this.mat3[4]=pe[4],this.mat3[5]=pe[7],this.mat3[6]=me,this.mat3[7]=Le,this.mat3[8]=pe[8],this}},{key:"inverseTranspose",value:function(pe){if(pe=pe.mat4,this.mat3===void 0?s.default._friendlyError("sorry, this function only works with mat3"):(this.mat3[0]=pe[0],this.mat3[1]=pe[1],this.mat3[2]=pe[2],this.mat3[3]=pe[4],this.mat3[4]=pe[5],this.mat3[5]=pe[6],this.mat3[6]=pe[8],this.mat3[7]=pe[9],this.mat3[8]=pe[10]),pe=this.invert3x3(),pe)pe.transpose3x3(this.mat3);else for(var Ye=0;Ye<9;Ye++)this.mat3[Ye]=0;return this}},{key:"determinant",value:function(){var pe=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],Ye=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],me=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],Le=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],nt=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],tt=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],ft=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],yt=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],gt=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],mt=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],wt=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return pe*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-Ye*wt+me*mt+Le*gt-nt*yt+tt*ft}},{key:"mult",value:function(me){var Ye;if(me===this||me===this.mat4)Ye=this.copy().mat4;else if(me instanceof s.default.Matrix)Ye=me.mat4;else if(h(me))Ye=me;else{if(arguments.length!==16)return;Ye=arguments}var me=this.mat4[0],Le=this.mat4[1],nt=this.mat4[2],tt=this.mat4[3];return this.mat4[0]=me*Ye[0]+Le*Ye[4]+nt*Ye[8]+tt*Ye[12],this.mat4[1]=me*Ye[1]+Le*Ye[5]+nt*Ye[9]+tt*Ye[13],this.mat4[2]=me*Ye[2]+Le*Ye[6]+nt*Ye[10]+tt*Ye[14],this.mat4[3]=me*Ye[3]+Le*Ye[7]+nt*Ye[11]+tt*Ye[15],me=this.mat4[4],Le=this.mat4[5],nt=this.mat4[6],tt=this.mat4[7],this.mat4[4]=me*Ye[0]+Le*Ye[4]+nt*Ye[8]+tt*Ye[12],this.mat4[5]=me*Ye[1]+Le*Ye[5]+nt*Ye[9]+tt*Ye[13],this.mat4[6]=me*Ye[2]+Le*Ye[6]+nt*Ye[10]+tt*Ye[14],this.mat4[7]=me*Ye[3]+Le*Ye[7]+nt*Ye[11]+tt*Ye[15],me=this.mat4[8],Le=this.mat4[9],nt=this.mat4[10],tt=this.mat4[11],this.mat4[8]=me*Ye[0]+Le*Ye[4]+nt*Ye[8]+tt*Ye[12],this.mat4[9]=me*Ye[1]+Le*Ye[5]+nt*Ye[9]+tt*Ye[13],this.mat4[10]=me*Ye[2]+Le*Ye[6]+nt*Ye[10]+tt*Ye[14],this.mat4[11]=me*Ye[3]+Le*Ye[7]+nt*Ye[11]+tt*Ye[15],me=this.mat4[12],Le=this.mat4[13],nt=this.mat4[14],tt=this.mat4[15],this.mat4[12]=me*Ye[0]+Le*Ye[4]+nt*Ye[8]+tt*Ye[12],this.mat4[13]=me*Ye[1]+Le*Ye[5]+nt*Ye[9]+tt*Ye[13],this.mat4[14]=me*Ye[2]+Le*Ye[6]+nt*Ye[10]+tt*Ye[14],this.mat4[15]=me*Ye[3]+Le*Ye[7]+nt*Ye[11]+tt*Ye[15],this}},{key:"apply",value:function(me){var Ye;if(me===this||me===this.mat4)Ye=this.copy().mat4;else if(me instanceof s.default.Matrix)Ye=me.mat4;else if(h(me))Ye=me;else{if(arguments.length!==16)return;Ye=arguments}var me=this.mat4,Le=me[0],nt=me[4],tt=me[8],ft=me[12],Le=(me[0]=Ye[0]*Le+Ye[1]*nt+Ye[2]*tt+Ye[3]*ft,me[4]=Ye[4]*Le+Ye[5]*nt+Ye[6]*tt+Ye[7]*ft,me[8]=Ye[8]*Le+Ye[9]*nt+Ye[10]*tt+Ye[11]*ft,me[12]=Ye[12]*Le+Ye[13]*nt+Ye[14]*tt+Ye[15]*ft,me[1]),nt=me[5],tt=me[9],ft=me[13],Le=(me[1]=Ye[0]*Le+Ye[1]*nt+Ye[2]*tt+Ye[3]*ft,me[5]=Ye[4]*Le+Ye[5]*nt+Ye[6]*tt+Ye[7]*ft,me[9]=Ye[8]*Le+Ye[9]*nt+Ye[10]*tt+Ye[11]*ft,me[13]=Ye[12]*Le+Ye[13]*nt+Ye[14]*tt+Ye[15]*ft,me[2]),nt=me[6],tt=me[10],ft=me[14],Le=(me[2]=Ye[0]*Le+Ye[1]*nt+Ye[2]*tt+Ye[3]*ft,me[6]=Ye[4]*Le+Ye[5]*nt+Ye[6]*tt+Ye[7]*ft,me[10]=Ye[8]*Le+Ye[9]*nt+Ye[10]*tt+Ye[11]*ft,me[14]=Ye[12]*Le+Ye[13]*nt+Ye[14]*tt+Ye[15]*ft,me[3]),nt=me[7],tt=me[11],ft=me[15];return me[3]=Ye[0]*Le+Ye[1]*nt+Ye[2]*tt+Ye[3]*ft,me[7]=Ye[4]*Le+Ye[5]*nt+Ye[6]*tt+Ye[7]*ft,me[11]=Ye[8]*Le+Ye[9]*nt+Ye[10]*tt+Ye[11]*ft,me[15]=Ye[12]*Le+Ye[13]*nt+Ye[14]*tt+Ye[15]*ft,this}},{key:"scale",value:function(pe,Ye,me){return pe instanceof s.default.Vector?(Ye=pe.y,me=pe.z,pe=pe.x):pe instanceof Array&&(Ye=pe[1],me=pe[2],pe=pe[0]),this.mat4[0]*=pe,this.mat4[1]*=pe,this.mat4[2]*=pe,this.mat4[3]*=pe,this.mat4[4]*=Ye,this.mat4[5]*=Ye,this.mat4[6]*=Ye,this.mat4[7]*=Ye,this.mat4[8]*=me,this.mat4[9]*=me,this.mat4[10]*=me,this.mat4[11]*=me,this}},{key:"rotate",value:function(Pt,Vt,Lt,Le){Vt instanceof s.default.Vector?(Lt=Vt.y,Le=Vt.z,Vt=Vt.x):Vt instanceof Array&&(Lt=Vt[1],Le=Vt[2],Vt=Vt[0]);var nt=Math.sqrt(Vt*Vt+Lt*Lt+Le*Le),nt=(Vt*=1/nt,Lt*=1/nt,Le*=1/nt,this.mat4[0]),tt=this.mat4[1],ft=this.mat4[2],yt=this.mat4[3],gt=this.mat4[4],mt=this.mat4[5],wt=this.mat4[6],St=this.mat4[7],bt=this.mat4[8],Ct=this.mat4[9],Et=this.mat4[10],It=this.mat4[11],Dt=Math.sin(Pt),Pt=Math.cos(Pt),qt=1-Pt,Ht=Vt*Vt*qt+Pt,Gt=Lt*Vt*qt+Le*Dt,Ut=Le*Vt*qt-Lt*Dt,Yt=Vt*Lt*qt-Le*Dt,Zt=Lt*Lt*qt+Pt,vt=Le*Lt*qt+Vt*Dt,Rt=Vt*Le*qt+Lt*Dt,Lt=Lt*Le*qt-Vt*Dt,Vt=Le*Le*qt+Pt;return this.mat4[0]=nt*Ht+gt*Gt+bt*Ut,this.mat4[1]=tt*Ht+mt*Gt+Ct*Ut,this.mat4[2]=ft*Ht+wt*Gt+Et*Ut,this.mat4[3]=yt*Ht+St*Gt+It*Ut,this.mat4[4]=nt*Yt+gt*Zt+bt*vt,this.mat4[5]=tt*Yt+mt*Zt+Ct*vt,this.mat4[6]=ft*Yt+wt*Zt+Et*vt,this.mat4[7]=yt*Yt+St*Zt+It*vt,this.mat4[8]=nt*Rt+gt*Lt+bt*Vt,this.mat4[9]=tt*Rt+mt*Lt+Ct*Vt,this.mat4[10]=ft*Rt+wt*Lt+Et*Vt,this.mat4[11]=yt*Rt+St*Lt+It*Vt,this}},{key:"translate",value:function(Le){var Ye=Le[0],me=Le[1],Le=Le[2]||0;this.mat4[12]+=this.mat4[0]*Ye+this.mat4[4]*me+this.mat4[8]*Le,this.mat4[13]+=this.mat4[1]*Ye+this.mat4[5]*me+this.mat4[9]*Le,this.mat4[14]+=this.mat4[2]*Ye+this.mat4[6]*me+this.mat4[10]*Le,this.mat4[15]+=this.mat4[3]*Ye+this.mat4[7]*me+this.mat4[11]*Le}},{key:"rotateX",value:function(pe){this.rotate(pe,1,0,0)}},{key:"rotateY",value:function(pe){this.rotate(pe,0,1,0)}},{key:"rotateZ",value:function(pe){this.rotate(pe,0,0,1)}},{key:"perspective",value:function(nt,Ye,me,Le){var nt=1/Math.tan(nt/2),tt=1/(me-Le);return this.mat4[0]=nt/Ye,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=nt,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(Le+me)*tt,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*Le*me*tt,this.mat4[15]=0,this}},{key:"ortho",value:function(pe,Ye,me,Le,nt,tt){var ft=1/(pe-Ye),yt=1/(me-Le),gt=1/(nt-tt);return this.mat4[0]=-2*ft,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*yt,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*gt,this.mat4[11]=0,this.mat4[12]=(pe+Ye)*ft,this.mat4[13]=(Le+me)*yt,this.mat4[14]=(tt+nt)*gt,this.mat4[15]=1,this}},{key:"multiplyVec4",value:function(pe,Ye,me,Le){var nt=new Array(4),tt=this.mat4;return nt[0]=tt[0]*pe+tt[4]*Ye+tt[8]*me+tt[12]*Le,nt[1]=tt[1]*pe+tt[5]*Ye+tt[9]*me+tt[13]*Le,nt[2]=tt[2]*pe+tt[6]*Ye+tt[10]*me+tt[14]*Le,nt[3]=tt[3]*pe+tt[7]*Ye+tt[11]*me+tt[15]*Le,nt}},{key:"multiplyPoint",value:function(me){var Le=me.x,Ye=me.y,me=me.z,Le=this.multiplyVec4(Le,Ye,me,1);return new s.default.Vector(Le[0],Le[1],Le[2])}},{key:"multiplyAndNormalizePoint",value:function(me){var Le=me.x,Ye=me.y,me=me.z,Le=this.multiplyVec4(Le,Ye,me,1);return Le[0]/=Le[3],Le[1]/=Le[3],Le[2]/=Le[3],new s.default.Vector(Le[0],Le[1],Le[2])}},{key:"multiplyDirection",value:function(me){var Le=me.x,Ye=me.y,me=me.z,Le=this.multiplyVec4(Le,Ye,me,0);return new s.default.Vector(Le[0],Le[1],Le[2])}},{key:"mult3x3",value:function(me){var Ye;if(me===this||me===this.mat3)Ye=this.copy().mat3;else if(me instanceof s.default.Matrix)Ye=me.mat3;else if(h(me))Ye=me;else{if(arguments.length!==9)return;Ye=arguments}var me=this.mat3[0],Le=this.mat3[1],nt=this.mat3[2];return this.mat3[0]=me*Ye[0]+Le*Ye[3]+nt*Ye[6],this.mat3[1]=me*Ye[1]+Le*Ye[4]+nt*Ye[7],this.mat3[2]=me*Ye[2]+Le*Ye[5]+nt*Ye[8],me=this.mat3[3],Le=this.mat3[4],nt=this.mat3[5],this.mat3[3]=me*Ye[0]+Le*Ye[3]+nt*Ye[6],this.mat3[4]=me*Ye[1]+Le*Ye[4]+nt*Ye[7],this.mat3[5]=me*Ye[2]+Le*Ye[5]+nt*Ye[8],me=this.mat3[6],Le=this.mat3[7],nt=this.mat3[8],this.mat3[6]=me*Ye[0]+Le*Ye[3]+nt*Ye[6],this.mat3[7]=me*Ye[1]+Le*Ye[4]+nt*Ye[7],this.mat3[8]=me*Ye[2]+Le*Ye[5]+nt*Ye[8],this}},{key:"column",value:function(pe){return new s.default.Vector(this.mat3[3*pe],this.mat3[3*pe+1],this.mat3[3*pe+2])}},{key:"row",value:function(pe){return new s.default.Vector(this.mat3[pe],this.mat3[pe+3],this.mat3[pe+6])}},{key:"diagonal",value:function(){return this.mat3!==void 0?[this.mat3[0],this.mat3[4],this.mat3[8]]:[this.mat4[0],this.mat4[5],this.mat4[10],this.mat4[15]]}},{key:"multiplyVec3",value:function(pe,Ye){return(Ye=Ye===void 0?pe.copy():Ye).x=this.row(0).dot(pe),Ye.y=this.row(1).dot(pe),Ye.z=this.row(2).dot(pe),Ye}},{key:"createSubMatrix3x3",value:function(){var pe=new s.default.Matrix("mat3");return pe.mat3[0]=this.mat4[0],pe.mat3[1]=this.mat4[1],pe.mat3[2]=this.mat4[2],pe.mat3[3]=this.mat4[4],pe.mat3[4]=this.mat4[5],pe.mat3[5]=this.mat4[6],pe.mat3[6]=this.mat4[8],pe.mat3[7]=this.mat4[9],pe.mat3[8]=this.mat4[10],pe}}])&&p(b.prototype,E),de&&p(b,de),Be}(),s.default.Matrix);u.default=N},{"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.to-string":190,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239}],337:[function(t,l,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(t=t("../core/main"))&&t.__esModule?t:{default:t};function p(d,h){for(var N=0;N<h.length;N++){var Be=h[N];Be.enumerable=Be.enumerable||!1,Be.configurable=!0,"value"in Be&&(Be.writable=!0),Object.defineProperty(d,Be.key,Be)}}s.default.Quat=function(){function d(b,E,de,pe){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.w=b,this.vec=new s.default.Vector(E,de,pe)}var h,N,Be;return h=d,Be=[{key:"fromAxisAngle",value:function(b,me,de,pe){var Ye=Math.cos(b/2),me=new s.default.Vector(me,de,pe).normalize().mult(Math.sin(b/2));return new s.default.Quat(Ye,me.x,me.y,me.z)}}],(N=[{key:"conjugate",value:function(){return new s.default.Quat(this.w,-this.vec.x,-this.vec.y,-this.vec.z)}},{key:"multiply",value:function(b){return new s.default.Quat(this.w*b.w-this.vec.x*b.vec.x-this.vec.y*b.vec.y-this.vec.z-b.vec.z,this.w*b.vec.x+this.vec.x*b.w+this.vec.y*b.vec.z-this.vec.z*b.vec.y,this.w*b.vec.y-this.vec.x*b.vec.z+this.vec.y*b.w+this.vec.z*b.vec.x,this.w*b.vec.z+this.vec.x*b.vec.y-this.vec.y*b.vec.x+this.vec.z*b.w)}},{key:"rotateVector",value:function(b){return new s.default.Vector.mult(b,this.w*this.w-this.vec.dot(this.vec)).add(s.default.Vector.mult(this.vec,2*b.dot(this.vec))).add(s.default.Vector.mult(this.vec,2*this.w).cross(b)).clampToZero()}},{key:"rotateBy",value:function(b){return b.multiply(this).multiply(b.conjugate()).vec.clampToZero()}}])&&p(h.prototype,N),Be&&p(h,Be),d}(),t=s.default.Quat,u.default=t},{"../core/main":283}],338:[function(t,l,u){t("core-js/modules/es.array.map"),t("core-js/modules/es.array.map"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,t=(t=t("../core/main"))&&t.__esModule?t:{default:t};function s(p,d){for(var h=0;h<d.length;h++){var N=d[h];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(p,N.key,N)}}t.default.RenderBuffer=function(){function p(N,Be,b,E,de,pe){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");this.size=N,this.src=Be,this.dst=b,this.attr=E,this._renderer=de,this.map=pe}var d,h;return d=p,(h=[{key:"_prepareBuffer",value:function(N,Be){var b,E,de,me=Be.attributes,pe=this._renderer.GL,Ye=N.model||N,me=me[this.attr];me&&(b=N[this.dst],0<(E=Ye[this.src]).length?((de=!b)&&(N[this.dst]=b=pe.createBuffer()),pe.bindBuffer(pe.ARRAY_BUFFER,b),!de&&Ye.dirtyFlags[this.src]===!1||(de=(N=this.map)?N(E):E,this._renderer._bindBuffer(b,pe.ARRAY_BUFFER,de),Ye.dirtyFlags[this.src]=!1),Be.enableAttrib(me,this.size)):(N=me.location)!==-1&&this._renderer.registerEnabled.has(N)&&(pe.disableVertexAttribArray(N),this._renderer.registerEnabled.delete(N)))}}])&&s(d.prototype,h),p}(),t=t.default.RenderBuffer,u.default=t},{"../core/main":283,"core-js/modules/es.array.map":168}],339:[function(t,l,u){function s(de){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pe){return typeof pe}:function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe})(de)}function p(de){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(pe){return s(pe)}:function(pe){return pe&&typeof Symbol=="function"&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":s(pe)})(de)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.from"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.map"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.map"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=(E=t("../core/main"))&&E.__esModule?E:{default:E},h=function(de){if(de&&de.__esModule)return de;if(de===null||p(de)!=="object"&&typeof de!="function")return{default:de};var pe=N();if(pe&&pe.has(de))return pe.get(de);var Ye,me={},Le=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(Ye in de){var nt;Object.prototype.hasOwnProperty.call(de,Ye)&&((nt=Le?Object.getOwnPropertyDescriptor(de,Ye):null)&&(nt.get||nt.set)?Object.defineProperty(me,Ye,nt):me[Ye]=de[Ye])}return me.default=de,pe&&pe.set(de,me),me}(t("../core/constants"));function N(){var de;return typeof WeakMap!="function"?null:(de=new WeakMap,N=function(){return de},de)}function Be(de){return function(pe){if(Array.isArray(pe)){for(var Ye=0,me=new Array(pe.length);Ye<pe.length;Ye++)me[Ye]=pe[Ye];return me}}(de)||function(pe){if(Symbol.iterator in Object(pe)||Object.prototype.toString.call(pe)==="[object Arguments]")return Array.from(pe)}(de)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t("./p5.RenderBuffer"),d.default.RendererGL.prototype.beginShape=function(de){return this.immediateMode.shapeMode=de!==void 0?de:h.TESS,this.immediateMode.geometry.reset(),this.immediateMode.contourIndices=[],this};var b={vertices:1,vertexNormals:1,vertexColors:4,vertexStrokeColors:4,uvs:2},E=(d.default.RendererGL.prototype.beginContour=function(){if(this.immediateMode.shapeMode!==h.TESS)throw new Error("WebGL mode can only use contours with beginShape(TESS).");this.immediateMode.contourIndices.push(this.immediateMode.geometry.vertices.length)},d.default.RendererGL.prototype.vertex=function(de,pe){if(this.immediateMode.shapeMode===h.QUADS&&this.immediateMode.geometry.vertices.length%6==3)for(var Ye in b){var me=b[Ye],Ye=this.immediateMode.geometry[Ye];Ye.push.apply(Ye,Be(Ye.slice(Ye.length-3*me,Ye.length-2*me)).concat(Be(Ye.slice(Ye.length-me,Ye.length))))}var Le,nt,tt=Le=nt=0,ft=(arguments.length===3?tt=arguments[2]:arguments.length===4?(Le=arguments[2],nt=arguments[3]):arguments.length===5&&(tt=arguments[2],Le=arguments[3],nt=arguments[4]),new d.default.Vector(de,pe,tt)),ft=(this.immediateMode.geometry.vertices.push(ft),this.immediateMode.geometry.vertexNormals.push(this._currentNormal),this.curFillColor||[.5,.5,.5,1]),ft=(this.immediateMode.geometry.vertexColors.push(ft[0],ft[1],ft[2],ft[3]),this.curStrokeColor||[.5,.5,.5,1]);return this.immediateMode.geometry.vertexStrokeColors.push(ft[0],ft[1],ft[2],ft[3]),this.textureMode!==h.IMAGE||this.isProcessingVertices||(this._tex!==null?0<this._tex.width&&0<this._tex.height&&(Le/=this._tex.width,nt/=this._tex.height):this.userFillShader===void 0&&this.userStrokeShader===void 0&&this.userPointShader===void 0&&this._tex===null&&4<=arguments.length&&console.warn("You must first call texture() before using vertex() with image based u and v coordinates")),this.immediateMode.geometry.uvs.push(Le,nt),this.immediateMode._bezierVertex[0]=de,this.immediateMode._bezierVertex[1]=pe,this.immediateMode._bezierVertex[2]=tt,this.immediateMode._quadraticVertex[0]=de,this.immediateMode._quadraticVertex[1]=pe,this.immediateMode._quadraticVertex[2]=tt,this},d.default.RendererGL.prototype.normal=function(de,pe,Ye){return de instanceof d.default.Vector?this._currentNormal=de:this._currentNormal=new d.default.Vector(de,pe,Ye),this},d.default.RendererGL.prototype.endShape=function(de,pe,Ye,me,Le,nt){var tt,ft=6<arguments.length&&arguments[6]!==void 0?arguments[6]:1;return this.immediateMode.shapeMode===h.POINTS?this._drawPoints(this.immediateMode.geometry.vertices,this.immediateMode.buffers.point):(this.immediateMode.geometry.vertices.length===3&&this.immediateMode.shapeMode===h.TESS&&(this.immediateMode.shapeMode=h.TRIANGLES),this.isProcessingVertices=!0,this._processVertices.apply(this,arguments),tt=this.isProcessingVertices=!1,this.immediateMode.shapeMode!==h.LINE_STRIP&&this.immediateMode.shapeMode!==h.LINES||(this.immediateMode.shapeMode=h.TRIANGLE_FAN,tt=!0),this.immediateMode.shapeMode===h.QUADS?this.immediateMode.shapeMode=h.TRIANGLES:this.immediateMode.shapeMode===h.QUAD_STRIP&&(this.immediateMode.shapeMode=h.TRIANGLE_STRIP),this._doFill&&!tt&&!this.geometryBuilder&&3<=this.immediateMode.geometry.vertices.length&&this._drawImmediateFill(ft),this._doStroke&&!this.geometryBuilder&&1<=this.immediateMode.geometry.lineVertices.length&&this._drawImmediateStroke(),this.geometryBuilder&&this.geometryBuilder.addImmediate(),this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0),this},d.default.RendererGL.prototype._processVertices=function(de){var pe;this.immediateMode.geometry.vertices.length!==0&&(pe=this._doStroke,de=de===h.CLOSE,pe&&(this.immediateMode.geometry.edges=this._calculateEdges(this.immediateMode.shapeMode,this.immediateMode.geometry.vertices,de),this.geometryBuilder||this.immediateMode.geometry._edgesToVertices()),pe=this.immediateMode.shapeMode===h.TESS,de=0<this.immediateMode.contourIndices.length,this._doFill&&(this.isBezier||this.isQuadratic||this.isCurve||pe||de)&&this.immediateMode.shapeMode!==h.LINES&&this._tesselateShape())},d.default.RendererGL.prototype._calculateEdges=function(de,pe,Ye){var me=[],Le=0,nt=this.immediateMode.contourIndices.slice(),tt=0;switch(de){case h.TRIANGLE_STRIP:for(Le=0;Le<pe.length-2;Le++)me.push([Le,Le+1]),me.push([Le,Le+2]);me.push([Le,Le+1]);break;case h.TRIANGLE_FAN:for(Le=1;Le<pe.length-1;Le++)me.push([0,Le]),me.push([Le,Le+1]);me.push([0,pe.length-1]);break;case h.TRIANGLES:for(Le=0;Le<pe.length-2;Le+=3)me.push([Le,Le+1]),me.push([Le+1,Le+2]),me.push([Le+2,Le]);break;case h.LINES:for(Le=0;Le<pe.length-1;Le+=2)me.push([Le,Le+1]);break;case h.QUADS:for(Le=0;Le<pe.length-5;Le+=6)me.push([Le,Le+1]),me.push([Le+1,Le+2]),me.push([Le+3,Le+5]),me.push([Le+4,Le+5]);break;case h.QUAD_STRIP:for(Le=0;Le<pe.length-2;Le+=2)me.push([Le,Le+1]),me.push([Le,Le+2]),me.push([Le+1,Le+3]);me.push([Le,Le+1]);break;default:for(Le=0;Le<pe.length;Le++)Le+1<pe.length&&Le+1!==nt[0]?me.push([Le,Le+1]):((Ye||tt)&&me.push([Le,tt]),0<nt.length&&(tt=nt.shift()))}return de!==h.TESS&&Ye&&me.push([pe.length-1,0]),me},d.default.RendererGL.prototype._tesselateShape=function(){for(var de=this,pe=(this.immediateMode.shapeMode=h.TRIANGLES,[[]]),Ye=0;Ye<this.immediateMode.geometry.vertices.length;Ye++)0<this.immediateMode.contourIndices.length&&this.immediateMode.contourIndices[0]===Ye&&(this.immediateMode.contourIndices.shift(),pe.push([])),pe[pe.length-1].push(this.immediateMode.geometry.vertices[Ye].x,this.immediateMode.geometry.vertices[Ye].y,this.immediateMode.geometry.vertices[Ye].z,this.immediateMode.geometry.uvs[2*Ye],this.immediateMode.geometry.uvs[2*Ye+1],this.immediateMode.geometry.vertexColors[4*Ye],this.immediateMode.geometry.vertexColors[4*Ye+1],this.immediateMode.geometry.vertexColors[4*Ye+2],this.immediateMode.geometry.vertexColors[4*Ye+3],this.immediateMode.geometry.vertexNormals[Ye].x,this.immediateMode.geometry.vertexNormals[Ye].y,this.immediateMode.geometry.vertexNormals[Ye].z);for(var me,Le=this._triangulate(pe),nt=this.immediateMode.geometry.vertices,tt=(this.immediateMode.geometry.vertices=[],this.immediateMode.geometry.vertexNormals=[],this.immediateMode.geometry.uvs=[],[]),ft=0,yt=Le.length;ft<yt;ft+=d.default.RendererGL.prototype.tessyVertexSize)tt.push.apply(tt,Be(Le.slice(ft+5,ft+9))),this.normal.apply(this,Be(Le.slice(ft+9,ft+12))),this.vertex.apply(this,Be(Le.slice(ft,ft+5)));this.geometryBuilder&&(me=new Map,this.immediateMode.geometry.edges=this.immediateMode.geometry.edges.map(function(gt){return gt.map(function(mt){if(!me.has(mt)){var wt=nt[mt],St=de.immediateMode.geometry.vertices.findIndex(function(qt){return wt.x===qt.x&&wt.y===qt.y&&wt.z===qt.z});if(St===-1){for(var bt=1/0,Ct=0,Et=0;Et<de.immediateMode.geometry.vertices.length;Et++){var Dt=de.immediateMode.geometry.vertices[Et],Pt=wt.x-Dt.x,It=wt.y-Dt.y,Dt=wt.z-Dt.z,Pt=Pt*Pt+It*It+Dt*Dt;Pt<bt&&(bt=Pt,Ct=Et)}St=Ct}me.set(mt,St)}return me.get(mt)})})),this.immediateMode.geometry.vertexColors=tt},d.default.RendererGL.prototype._drawImmediateFill=function(){var de,pe=0<arguments.length&&arguments[0]!==void 0?arguments[0]:1,Ye=this.GL,me=(this._useVertexColor=0<this.immediateMode.geometry.vertexColors.length,de=this._getImmediateFillShader(),this._setFillUniforms(de),!0),Le=!1,nt=void 0;try{for(var tt,ft=this.immediateMode.buffers.fill[Symbol.iterator]();!(me=(tt=ft.next()).done);me=!0)tt.value._prepareBuffer(this.immediateMode.geometry,de)}catch(yt){Le=!0,nt=yt}finally{try{me||ft.return==null||ft.return()}finally{if(Le)throw nt}}if(de.disableRemainingAttributes(),this._applyColorBlend(this.curFillColor,this.immediateMode.geometry.hasFillTransparency()),pe===1)Ye.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length);else try{Ye.drawArraysInstanced(this.immediateMode.shapeMode,0,this.immediateMode.geometry.vertices.length,pe)}catch{console.log(" p5.js says: Instancing is only supported in WebGL2 mode")}de.unbindShader()},d.default.RendererGL.prototype._drawImmediateStroke=function(){var de=this.GL,pe=(this._useLineColor=0<this.immediateMode.geometry.vertexStrokeColors.length,this._getImmediateStrokeShader()),Ye=(this._setStrokeUniforms(pe),!0),me=!1,Le=void 0;try{for(var nt,tt=this.immediateMode.buffers.stroke[Symbol.iterator]();!(Ye=(nt=tt.next()).done);Ye=!0)nt.value._prepareBuffer(this.immediateMode.geometry,pe)}catch(ft){me=!0,Le=ft}finally{try{Ye||tt.return==null||tt.return()}finally{if(me)throw Le}}pe.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,this.immediateMode.geometry.hasFillTransparency()),de.drawArrays(de.TRIANGLES,0,this.immediateMode.geometry.lineVertices.length/3),pe.unbindShader()},d.default.RendererGL);u.default=E},{"../core/constants":272,"../core/main":283,"./p5.RenderBuffer":338,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.find-index":158,"core-js/modules/es.array.from":162,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.map":175,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],340:[function(t,l,u){function s(b){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(b)}function p(b){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(E){return s(E)}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":s(E)})(b)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.fill"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.some"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.float32-array"),t("core-js/modules/es.typed-array.uint16-array"),t("core-js/modules/es.typed-array.uint32-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=(Be=t("../core/main"))&&Be.__esModule?Be:{default:Be},h=(t("./p5.RendererGL"),t("./p5.RenderBuffer"),function(b){if(b&&b.__esModule)return b;if(b===null||p(b)!=="object"&&typeof b!="function")return{default:b};var E=N();if(E&&E.has(b))return E.get(b);var de,pe={},Ye=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(de in b){var me;Object.prototype.hasOwnProperty.call(b,de)&&((me=Ye?Object.getOwnPropertyDescriptor(b,de):null)&&(me.get||me.set)?Object.defineProperty(pe,de,me):pe[de]=b[de])}return pe.default=b,E&&E.set(b,pe),pe}(t("../core/constants")));function N(){var b;return typeof WeakMap!="function"?null:(b=new WeakMap,N=function(){return b},b)}d.default.RendererGL.prototype.freeGeometry=function(b){b.gid?this._freeBuffers(b.gid):console.warn("The model you passed to freeGeometry does not have an id!")},d.default.RendererGL.prototype._initBufferDefaults=function(b){var E;return this._freeBuffers(b),1e3<Object.keys(this.retainedMode.geometry).length&&(E=Object.keys(this.retainedMode.geometry)[0],this._freeBuffers(E)),this.retainedMode.geometry[b]={}},d.default.RendererGL.prototype._freeBuffers=function(b){var E,de=this.retainedMode.geometry[b];function pe(Ye){var me=!0,Le=!1,nt=void 0;try{for(var tt,ft=Ye[Symbol.iterator]();!(me=(tt=ft.next()).done);me=!0){var yt=tt.value;de[yt.dst]&&(E.deleteBuffer(de[yt.dst]),de[yt.dst]=null)}}catch(gt){Le=!0,nt=gt}finally{try{me||ft.return==null||ft.return()}finally{if(Le)throw nt}}}de&&(delete this.retainedMode.geometry[b],E=this.GL,de.indexBuffer&&E.deleteBuffer(de.indexBuffer),pe(this.retainedMode.buffers.stroke),pe(this.retainedMode.buffers.fill))},d.default.RendererGL.prototype.createBuffers=function(Le,E){var de,pe,Ye,me=this.GL,Le=this._initBufferDefaults(Le),nt=(Le.model=E,Le.indexBuffer);return E.faces.length?(nt=nt||(Le.indexBuffer=me.createBuffer()),Ye=(pe=(de=d.default.RendererGL.prototype._flatten(E.faces)).some(function(tt){return 65535<tt}))?Uint32Array:Uint16Array,this._bindBuffer(nt,me.ELEMENT_ARRAY_BUFFER,de,Ye),Le.indexBufferType=pe?me.UNSIGNED_INT:me.UNSIGNED_SHORT,Le.vertexCount=3*E.faces.length):(nt&&(me.deleteBuffer(nt),Le.indexBuffer=null),Le.vertexCount=E.vertices?E.vertices.length:0),Le.lineVertexCount=E.lineVertices?E.lineVertices.length/3:0,Le},d.default.RendererGL.prototype.drawBuffers=function(b){var E=this.GL,de=this.retainedMode.geometry[b];if(!this.geometryBuilder&&this._doFill&&0<this.retainedMode.geometry[b].vertexCount){this._useVertexColor=0<de.model.vertexColors.length;var pe=this._getRetainedFillShader(),Ye=(this._setFillUniforms(pe),!0),me=!1,Le=void 0;try{for(var nt,tt=this.retainedMode.buffers.fill[Symbol.iterator]();!(Ye=(nt=tt.next()).done);Ye=!0)nt.value._prepareBuffer(de,pe)}catch(wt){me=!0,Le=wt}finally{try{Ye||tt.return==null||tt.return()}finally{if(me)throw Le}}pe.disableRemainingAttributes(),de.indexBuffer&&this._bindBuffer(de.indexBuffer,E.ELEMENT_ARRAY_BUFFER),this._applyColorBlend(this.curFillColor,de.model.hasFillTransparency()),this._drawElements(E.TRIANGLES,b),pe.unbindShader()}if(!this.geometryBuilder&&this._doStroke&&0<de.lineVertexCount){this._useLineColor=0<de.model.vertexStrokeColors.length;var ft=this._getRetainedStrokeShader(),yt=(this._setStrokeUniforms(ft),!0),me=!1,Le=void 0;try{for(var gt,mt=this.retainedMode.buffers.stroke[Symbol.iterator]();!(yt=(gt=mt.next()).done);yt=!0)gt.value._prepareBuffer(de,ft)}catch(bt){me=!0,Le=bt}finally{try{yt||mt.return==null||mt.return()}finally{if(me)throw Le}}ft.disableRemainingAttributes(),this._applyColorBlend(this.curStrokeColor,de.model.hasStrokeTransparency()),this._drawArrays(E.TRIANGLES,b),ft.unbindShader()}return this.geometryBuilder&&this.geometryBuilder.addRetained(de),this},d.default.RendererGL.prototype.drawBuffersScaled=function(b,E,de,pe){var Ye=this.uModelMatrix.copy();try{this.uModelMatrix.scale(E,de,pe),this.drawBuffers(b)}finally{this.uModelMatrix=Ye}},d.default.RendererGL.prototype._drawArrays=function(b,E){return this.GL.drawArrays(b,0,this.retainedMode.geometry[E].lineVertexCount),this},d.default.RendererGL.prototype._drawElements=function(b,de){var de=this.retainedMode.geometry[de],pe=this.GL;if(de.indexBuffer){if(this._pInst.webglVersion!==h.WEBGL2&&de.indexBufferType===pe.UNSIGNED_INT&&!pe.getExtension("OES_element_index_uint"))throw new Error("Unable to render a 3d model with > 65535 triangles. Your web browser does not support the WebGL Extension OES_element_index_uint.");pe.drawElements(pe.TRIANGLES,de.vertexCount,de.indexBufferType,0)}else pe.drawArrays(b||pe.TRIANGLES,0,de.vertexCount)},d.default.RendererGL.prototype._drawPoints=function(b,E){var de=this.GL,pe=this._getImmediatePointShader();this._setPointUniforms(pe),this._bindBuffer(E,de.ARRAY_BUFFER,this._vToNArray(b),Float32Array,de.STATIC_DRAW),pe.enableAttrib(pe.attributes.aPosition,3),this._applyColorBlend(this.curStrokeColor),de.drawArrays(de.Points,0,b.length),pe.unbindShader()};var Be=d.default.RendererGL;u.default=Be},{"../core/constants":272,"../core/main":283,"./p5.RenderBuffer":338,"./p5.RendererGL":341,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.some":170,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint16-array":240,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],341:[function(Et,l,u){function s(Gt){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ut){return typeof Ut}:function(Ut){return Ut&&typeof Symbol=="function"&&Ut.constructor===Symbol&&Ut!==Symbol.prototype?"symbol":typeof Ut})(Gt)}function p(Gt){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(Ut){return s(Ut)}:function(Ut){return Ut&&typeof Symbol=="function"&&Ut.constructor===Symbol&&Ut!==Symbol.prototype?"symbol":s(Ut)})(Gt)}Et("core-js/modules/es.symbol"),Et("core-js/modules/es.symbol.description"),Et("core-js/modules/es.symbol.iterator"),Et("core-js/modules/es.array.concat"),Et("core-js/modules/es.array.copy-within"),Et("core-js/modules/es.array.every"),Et("core-js/modules/es.array.fill"),Et("core-js/modules/es.array.flat"),Et("core-js/modules/es.array.flat-map"),Et("core-js/modules/es.array.from"),Et("core-js/modules/es.array.includes"),Et("core-js/modules/es.array.iterator"),Et("core-js/modules/es.array.map"),Et("core-js/modules/es.array.slice"),Et("core-js/modules/es.array.some"),Et("core-js/modules/es.array.unscopables.flat"),Et("core-js/modules/es.array.unscopables.flat-map"),Et("core-js/modules/es.map"),Et("core-js/modules/es.object.assign"),Et("core-js/modules/es.object.get-own-property-descriptor"),Et("core-js/modules/es.object.get-prototype-of"),Et("core-js/modules/es.object.to-string"),Et("core-js/modules/es.reflect.construct"),Et("core-js/modules/es.reflect.get"),Et("core-js/modules/es.regexp.to-string"),Et("core-js/modules/es.set"),Et("core-js/modules/es.string.includes"),Et("core-js/modules/es.string.iterator"),Et("core-js/modules/es.typed-array.float32-array"),Et("core-js/modules/es.typed-array.float64-array"),Et("core-js/modules/es.typed-array.int16-array"),Et("core-js/modules/es.typed-array.uint8-array"),Et("core-js/modules/es.typed-array.uint16-array"),Et("core-js/modules/es.typed-array.uint32-array"),Et("core-js/modules/es.typed-array.copy-within"),Et("core-js/modules/es.typed-array.every"),Et("core-js/modules/es.typed-array.fill"),Et("core-js/modules/es.typed-array.filter"),Et("core-js/modules/es.typed-array.find"),Et("core-js/modules/es.typed-array.find-index"),Et("core-js/modules/es.typed-array.for-each"),Et("core-js/modules/es.typed-array.includes"),Et("core-js/modules/es.typed-array.index-of"),Et("core-js/modules/es.typed-array.iterator"),Et("core-js/modules/es.typed-array.join"),Et("core-js/modules/es.typed-array.last-index-of"),Et("core-js/modules/es.typed-array.map"),Et("core-js/modules/es.typed-array.reduce"),Et("core-js/modules/es.typed-array.reduce-right"),Et("core-js/modules/es.typed-array.reverse"),Et("core-js/modules/es.typed-array.set"),Et("core-js/modules/es.typed-array.slice"),Et("core-js/modules/es.typed-array.some"),Et("core-js/modules/es.typed-array.sort"),Et("core-js/modules/es.typed-array.subarray"),Et("core-js/modules/es.typed-array.to-locale-string"),Et("core-js/modules/es.typed-array.to-string"),Et("core-js/modules/es.weak-map"),Et("core-js/modules/web.dom-collections.iterator"),Et("core-js/modules/es.symbol"),Et("core-js/modules/es.symbol.description"),Et("core-js/modules/es.symbol.iterator"),Et("core-js/modules/es.array.concat"),Et("core-js/modules/es.array.copy-within"),Et("core-js/modules/es.array.every"),Et("core-js/modules/es.array.fill"),Et("core-js/modules/es.array.flat"),Et("core-js/modules/es.array.flat-map"),Et("core-js/modules/es.array.from"),Et("core-js/modules/es.array.includes"),Et("core-js/modules/es.array.iterator"),Et("core-js/modules/es.array.map"),Et("core-js/modules/es.array.slice"),Et("core-js/modules/es.array.some"),Et("core-js/modules/es.array.unscopables.flat"),Et("core-js/modules/es.array.unscopables.flat-map"),Et("core-js/modules/es.map"),Et("core-js/modules/es.object.assign"),Et("core-js/modules/es.object.to-string"),Et("core-js/modules/es.set"),Et("core-js/modules/es.string.includes"),Et("core-js/modules/es.string.iterator"),Et("core-js/modules/es.typed-array.float32-array"),Et("core-js/modules/es.typed-array.float64-array"),Et("core-js/modules/es.typed-array.int16-array"),Et("core-js/modules/es.typed-array.uint8-array"),Et("core-js/modules/es.typed-array.uint16-array"),Et("core-js/modules/es.typed-array.uint32-array"),Et("core-js/modules/es.typed-array.copy-within"),Et("core-js/modules/es.typed-array.every"),Et("core-js/modules/es.typed-array.fill"),Et("core-js/modules/es.typed-array.filter"),Et("core-js/modules/es.typed-array.find"),Et("core-js/modules/es.typed-array.find-index"),Et("core-js/modules/es.typed-array.for-each"),Et("core-js/modules/es.typed-array.includes"),Et("core-js/modules/es.typed-array.index-of"),Et("core-js/modules/es.typed-array.iterator"),Et("core-js/modules/es.typed-array.join"),Et("core-js/modules/es.typed-array.last-index-of"),Et("core-js/modules/es.typed-array.map"),Et("core-js/modules/es.typed-array.reduce"),Et("core-js/modules/es.typed-array.reduce-right"),Et("core-js/modules/es.typed-array.reverse"),Et("core-js/modules/es.typed-array.set"),Et("core-js/modules/es.typed-array.slice"),Et("core-js/modules/es.typed-array.some"),Et("core-js/modules/es.typed-array.sort"),Et("core-js/modules/es.typed-array.subarray"),Et("core-js/modules/es.typed-array.to-locale-string"),Et("core-js/modules/es.typed-array.to-string"),Et("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.readPixelsWebGL=qt,u.readPixelWebGL=Ht,u.default=void 0;var d=de(Et("../core/main")),h=function(Gt){if(Gt&&Gt.__esModule)return Gt;if(Gt===null||p(Gt)!=="object"&&typeof Gt!="function")return{default:Gt};var Ut=E();if(Ut&&Ut.has(Gt))return Ut.get(Gt);var Yt,Zt={},vt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(Yt in Gt){var Rt;Object.prototype.hasOwnProperty.call(Gt,Yt)&&((Rt=vt?Object.getOwnPropertyDescriptor(Gt,Yt):null)&&(Rt.get||Rt.set)?Object.defineProperty(Zt,Yt,Rt):Zt[Yt]=Gt[Yt])}return Zt.default=Gt,Ut&&Ut.set(Gt,Zt),Zt}(Et("../core/constants")),N=de(Et("./GeometryBuilder")),Be=de(Et("libtess")),b=(Et("./p5.Shader"),Et("./p5.Camera"),Et("../core/p5.Renderer"),Et("./p5.Matrix"),Et("./p5.Framebuffer"),Et("path"),Et("./p5.Texture"));function E(){var Gt;return typeof WeakMap!="function"?null:(Gt=new WeakMap,E=function(){return Gt},Gt)}function de(Gt){return Gt&&Gt.__esModule?Gt:{default:Gt}}function pe(Gt){return function(Ut){if(Array.isArray(Ut)){for(var Yt=0,Zt=new Array(Ut.length);Yt<Ut.length;Yt++)Zt[Yt]=Ut[Yt];return Zt}}(Gt)||function(Ut){if(Symbol.iterator in Object(Ut)||Object.prototype.toString.call(Ut)==="[object Arguments]")return Array.from(Ut)}(Gt)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ye(Gt,Ut){for(var Yt=0;Yt<Ut.length;Yt++){var Zt=Ut[Yt];Zt.enumerable=Zt.enumerable||!1,Zt.configurable=!0,"value"in Zt&&(Zt.writable=!0),Object.defineProperty(Gt,Zt.key,Zt)}}function me(Gt,Ut,Yt){return(me=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(Lt,vt,Rt){var Lt=function(Vt,Jt){for(;!Object.prototype.hasOwnProperty.call(Vt,Jt)&&(Vt=ft(Vt))!==null;);return Vt}(Lt,vt);if(Lt)return(Lt=Object.getOwnPropertyDescriptor(Lt,vt)).get?Lt.get.call(Rt):Lt.value})(Gt,Ut,Yt||Gt)}function Le(Gt,Ut){return(Le=Object.setPrototypeOf||function(Yt,Zt){return Yt.__proto__=Zt,Yt})(Gt,Ut)}function nt(Gt){return function(){var Ut,Yt,Zt=ft(Gt);return Ut=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(Ut=ft(this).constructor,Reflect.construct(Zt,arguments,Ut)):Zt.apply(this,arguments),Zt=this,!(Yt=Ut)||p(Yt)!=="object"&&typeof Yt!="function"?tt(Zt):Yt}}function tt(Gt){if(Gt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Gt}function ft(Gt){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(Ut){return Ut.__proto__||Object.getPrototypeOf(Ut)})(Gt)}function yt(Gt,Ut,Yt){Ut in Gt?Object.defineProperty(Gt,Ut,{value:Yt,enumerable:!0,configurable:!0,writable:!0}):Gt[Ut]=Yt}function gt(Gt,Ut){Ct+="#define STROKE_CAP_".concat(Gt," ").concat(Ut,`
`),St[h[Gt]]=Ut}function mt(Gt,Ut){Ct+="#define STROKE_JOIN_".concat(Gt," ").concat(Ut,`
`),bt[h[Gt]]=Ut}var wt,St={},bt={},Ct="",Et=(gt("ROUND",0),gt("PROJECT",1),gt("SQUARE",2),mt("ROUND",0),mt("MITER",1),mt("BEVEL",2),`#define PI 3.141592

precision highp float;
precision highp int;

uniform mat4 uViewMatrix;

uniform bool uUseLighting;

uniform int uAmbientLightCount;
uniform vec3 uAmbientColor[5];
uniform mat3 uCameraRotation;
uniform int uDirectionalLightCount;
uniform vec3 uLightingDirection[5];
uniform vec3 uDirectionalDiffuseColors[5];
uniform vec3 uDirectionalSpecularColors[5];

uniform int uPointLightCount;
uniform vec3 uPointLightLocation[5];
uniform vec3 uPointLightDiffuseColors[5];	
uniform vec3 uPointLightSpecularColors[5];

uniform int uSpotLightCount;
uniform float uSpotLightAngle[5];
uniform float uSpotLightConc[5];
uniform vec3 uSpotLightDiffuseColors[5];
uniform vec3 uSpotLightSpecularColors[5];
uniform vec3 uSpotLightLocation[5];
uniform vec3 uSpotLightDirection[5];

uniform bool uSpecular;
uniform float uShininess;
uniform float uMetallic;

uniform float uConstantAttenuation;
uniform float uLinearAttenuation;
uniform float uQuadraticAttenuation;

// setting from  _setImageLightUniforms()
// boolean to initiate the calculateImageDiffuse and calculateImageSpecular
uniform bool uUseImageLight;
// texture for use in calculateImageDiffuse
uniform sampler2D environmentMapDiffused;
// texture for use in calculateImageSpecular
uniform sampler2D environmentMapSpecular;

const float specularFactor = 2.0;
const float diffuseFactor = 0.73;

struct LightResult {
  float specular;
  float diffuse;
};

float _phongSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float shininess) {

  vec3 R = reflect(lightDirection, surfaceNormal);
  return pow(max(0.0, dot(R, viewDirection)), shininess);
}

float _lambertDiffuse(vec3 lightDirection, vec3 surfaceNormal) {
  return max(0.0, dot(-lightDirection, surfaceNormal));
}

LightResult _light(vec3 viewDirection, vec3 normal, vec3 lightVector, float shininess, float metallic) {

  vec3 lightDir = normalize(lightVector);

  //compute our diffuse & specular terms
  LightResult lr;
  float specularIntensity = mix(1.0, 0.4, metallic);
  float diffuseIntensity = mix(1.0, 0.1, metallic);
  if (uSpecular)
    lr.specular = (_phongSpecular(lightDir, viewDirection, normal, shininess)) * specularIntensity;
    lr.diffuse = _lambertDiffuse(lightDir, normal) * diffuseIntensity;
  return lr;
}

// converts the range of "value" from [min1 to max1] to [min2 to max2]
float map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

vec2 mapTextureToNormal( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( fract(theta + 0.25), 1.0 - phi );
  return angles;
}


vec3 calculateImageDiffuse(vec3 vNormal, vec3 vViewPosition, float metallic){
  // make 2 separate builds 
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);  // hardcoded world camera position
  vec3 worldNormal = normalize(vNormal * uCameraRotation);
  vec2 newTexCoor = mapTextureToNormal( worldNormal );
  vec4 texture = TEXTURE( environmentMapDiffused, newTexCoor );
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(smoothstep(vec3(0.0), vec3(1.0), texture.xyz), vec3(0.0), metallic);
}

vec3 calculateImageSpecular(vec3 vNormal, vec3 vViewPosition, float shininess, float metallic){
  vec3 worldCameraPosition =  vec3(0.0, 0.0, 0.0);
  vec3 worldNormal = normalize(vNormal);
  vec3 lightDirection = normalize( vViewPosition - worldCameraPosition );
  vec3 R = reflect(lightDirection, worldNormal) * uCameraRotation;
  vec2 newTexCoor = mapTextureToNormal( R );
#ifdef WEBGL2
  // In p5js the range of shininess is >= 1,
  // Therefore roughness range will be ([0,1]*8)*20 or [0, 160]
  // The factor of 8 is because currently the getSpecularTexture
  // only calculated 8 different levels of roughness
  // The factor of 20 is just to spread up this range so that,
  // [1, max] of shininess is converted to [0,160] of roughness
  float roughness = 20. / shininess;
  vec4 outColor = textureLod(environmentMapSpecular, newTexCoor, roughness * 8.);
#else
  vec4 outColor = TEXTURE(environmentMapSpecular, newTexCoor);
#endif
  // this is to make the darker sections more dark
  // png and jpg usually flatten the brightness so it is to reverse that
  return mix(
    pow(outColor.xyz, vec3(10)),
    pow(outColor.xyz, vec3(1.2)),
    metallic 
  );
}

void totalLight(
  vec3 modelPosition,
  vec3 normal,
  float shininess,
  float metallic,
  out vec3 totalDiffuse,
  out vec3 totalSpecular
) {

  totalSpecular = vec3(0.0);

  if (!uUseLighting) {
    totalDiffuse = vec3(1.0);
    return;
  }

  totalDiffuse = vec3(0.0);

  vec3 viewDirection = normalize(-modelPosition);

  for (int j = 0; j < 5; j++) {
    if (j < uDirectionalLightCount) {
      vec3 lightVector = (uViewMatrix * vec4(uLightingDirection[j], 0.0)).xyz;
      vec3 lightColor = uDirectionalDiffuseColors[j];
      vec3 specularColor = uDirectionalSpecularColors[j];
      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if (j < uPointLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
      //calculate attenuation
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);
      vec3 lightColor = lightFalloff * uPointLightDiffuseColors[j];
      vec3 specularColor = lightFalloff * uPointLightSpecularColors[j];

      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);
      totalDiffuse += result.diffuse * lightColor;
      totalSpecular += result.specular * lightColor * specularColor;
    }

    if(j < uSpotLightCount) {
      vec3 lightPosition = (uViewMatrix * vec4(uSpotLightLocation[j], 1.0)).xyz;
      vec3 lightVector = modelPosition - lightPosition;
    
      float lightDistance = length(lightVector);
      float lightFalloff = 1.0 / (uConstantAttenuation + lightDistance * uLinearAttenuation + (lightDistance * lightDistance) * uQuadraticAttenuation);

      vec3 lightDirection = (uViewMatrix * vec4(uSpotLightDirection[j], 0.0)).xyz;
      float spotDot = dot(normalize(lightVector), normalize(lightDirection));
      float spotFalloff;
      if(spotDot < uSpotLightAngle[j]) {
        spotFalloff = 0.0;
      }
      else {
        spotFalloff = pow(spotDot, uSpotLightConc[j]);
      }
      lightFalloff *= spotFalloff;

      vec3 lightColor = uSpotLightDiffuseColors[j];
      vec3 specularColor = uSpotLightSpecularColors[j];
     
      LightResult result = _light(viewDirection, normal, lightVector, shininess, metallic);
      
      totalDiffuse += result.diffuse * lightColor * lightFalloff;
      totalSpecular += result.specular * lightColor * specularColor * lightFalloff;
    }
  }

  if( uUseImageLight ){
    totalDiffuse += calculateImageDiffuse(normal, modelPosition, metallic);
    totalSpecular += calculateImageSpecular(normal, modelPosition, shininess, metallic);
  }

  totalDiffuse *= diffuseFactor;
  totalSpecular *= specularFactor;
}
`),It={sphereMappingFrag:`#define PI 3.141592

precision highp float;
  
uniform sampler2D uSampler;
uniform mat3 uNewNormalMatrix;
uniform float uFovY;
uniform float uAspect;

varying vec2 vTexCoord;
  
void main() {
    float uFovX = uFovY * uAspect; 
    vec4 newTexColor = texture2D(uSampler, vTexCoord);
    float angleY = mix(uFovY/2.0,  -uFovY/2.0, vTexCoord.y);
    float angleX = mix(uFovX/2.0, -uFovX/2.0, vTexCoord.x);
    vec3 rotatedNormal = vec3( angleX, angleY, 1.0 );
    rotatedNormal = uNewNormalMatrix * normalize(rotatedNormal);
    float temp = rotatedNormal.z;
    rotatedNormal.z = rotatedNormal.x;
    rotatedNormal.x = -temp;
    vec2 suv;
    suv.y = 0.5 + 0.5 * (-rotatedNormal.y);
    suv.x = atan(rotatedNormal.z, rotatedNormal.x) / (2.0 * PI) + 0.5;
    newTexColor = texture2D(uSampler, suv.xy);
    gl_FragColor = newTexColor;
}
`,immediateVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uResolution;
uniform float uPointSize;

OUT vec4 vColor;
void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
  gl_PointSize = uPointSize;
}
`,vertexColorVert:`IN vec3 aPosition;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

OUT vec4 vColor;

void main(void) {
  vec4 positionVec4 = vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vColor = aVertexColor;
}
`,vertexColorFrag:`IN vec4 vColor;
void main(void) {
  OUT_COLOR = vec4(vColor.rgb, 1.) * vColor.a;
}
`,normalVert:`IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform vec4 uMaterialColor;
uniform bool uUseVertexColor;

OUT vec3 vVertexNormal;
OUT highp vec2 vVertTexCoord;
OUT vec4 vColor;

void main(void) {
  HOOK_beforeVertex();
  vec4 positionVec4 = vec4(HOOK_getWorldPosition(
    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz
  ), 1.);

  gl_Position = uProjectionMatrix * positionVec4;

  vVertexNormal = HOOK_getWorldNormal(normalize(uNormalMatrix * HOOK_getLocalNormal(aNormal)));
  vVertTexCoord = HOOK_getUV(aTexCoord);
  vColor = HOOK_getVertexColor(uUseVertexColor ? aVertexColor : uMaterialColor);
  HOOK_afterVertex();
}
`,normalFrag:`IN vec3 vVertexNormal;
void main(void) {
  HOOK_beforeFragment();
  OUT_COLOR = HOOK_getFinalColor(vec4(vVertexNormal, 1.0));
  HOOK_afterFragment();
}
`,basicFrag:`IN vec4 vColor;
void main(void) {
  HOOK_beforeFragment();
  OUT_COLOR = HOOK_getFinalColor(vec4(vColor.rgb, 1.) * vColor.a);
  HOOK_afterFragment();
}
`,lightVert:Et+`// include lighting.glgl

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT highp vec2 vVertTexCoord;
OUT vec3 vDiffuseColor;
OUT vec3 vSpecularColor;
OUT vec4 vColor;

void main(void) {

  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;

  vec3 vertexNormal = normalize(uNormalMatrix * aNormal);
  vVertTexCoord = aTexCoord;

  totalLight(viewModelPosition.xyz, vertexNormal, vDiffuseColor, vSpecularColor);

  for (int i = 0; i < 8; i++) {
    if (i < uAmbientLightCount) {
      vDiffuseColor += uAmbientColor[i];
    }
  }
  
  vColor = (uUseVertexColor ? aVertexColor : uMaterialColor);
}
`,lightTextureFrag:`uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;
uniform bool uEmissive;

IN highp vec2 vVertTexCoord;
IN vec3 vDiffuseColor;
IN vec3 vSpecularColor;
IN vec4 vColor;

void main(void) {
  if(uEmissive && !isTexture) {
    OUT_COLOR = vColor;
  }
  else {
    vec4 baseColor = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? TEXTURE(uSampler, vVertTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
    OUT_COLOR = vec4(baseColor.rgb * vDiffuseColor + vSpecularColor, baseColor.a);
  }
}
`,phongVert:`precision highp int;

IN vec3 aPosition;
IN vec3 aNormal;
IN vec2 aTexCoord;
IN vec4 aVertexColor;

uniform vec3 uAmbientColor[5];

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;
uniform int uAmbientLightCount;

uniform bool uUseVertexColor;
uniform vec4 uMaterialColor;

OUT vec3 vNormal;
OUT vec2 vTexCoord;
OUT vec3 vViewPosition;
OUT vec3 vAmbientColor;
OUT vec4 vColor;

void main(void) {
  HOOK_beforeVertex();
  vec4 viewModelPosition = vec4(HOOK_getWorldPosition(
    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz
  ), 1.);

  // Pass varyings to fragment shader
  vViewPosition = viewModelPosition.xyz;
  gl_Position = uProjectionMatrix * viewModelPosition;  

  vNormal = HOOK_getWorldNormal(uNormalMatrix * HOOK_getLocalNormal(aNormal));
  vTexCoord = HOOK_getUV(aTexCoord);

  // TODO: this should be a uniform
  vAmbientColor = vec3(0.0);
  for (int i = 0; i < 5; i++) {
    if (i < uAmbientLightCount) {
      vAmbientColor += uAmbientColor[i];
    }
  }
  
  vColor = HOOK_getVertexColor((uUseVertexColor ? aVertexColor : uMaterialColor));
  HOOK_afterVertex();
}
`,phongFrag:Et+`// include lighting.glsl
precision highp int;

uniform bool uHasSetAmbient;
uniform vec4 uSpecularMatColor;
uniform vec4 uAmbientMatColor;
uniform vec4 uEmissiveMatColor;

uniform vec4 uTint;
uniform sampler2D uSampler;
uniform bool isTexture;

IN vec3 vNormal;
IN vec2 vTexCoord;
IN vec3 vViewPosition;
IN vec3 vAmbientColor;
IN vec4 vColor;

struct ColorComponents {
  vec3 baseColor;
  float opacity;
  vec3 ambientColor;
  vec3 specularColor;
  vec3 diffuse;
  vec3 ambient;
  vec3 specular;
  vec3 emissive;
};

struct Inputs {
  vec3 normal;
  vec2 texCoord;
  vec3 ambientLight;
  vec3 ambientMaterial;
  vec3 specularMaterial;
  vec3 emissiveMaterial;
  vec4 color;
  float shininess;
  float metalness;
};

void main(void) {
  HOOK_beforeFragment();

  Inputs inputs;
  inputs.normal = normalize(vNormal);
  inputs.texCoord = vTexCoord;
  inputs.ambientLight = vAmbientColor;
  inputs.color = isTexture
      // Textures come in with premultiplied alpha. To apply tint and still have
      // premultiplied alpha output, we need to multiply the RGB channels by the
      // tint RGB, and all channels by the tint alpha.
      ? TEXTURE(uSampler, vTexCoord) * vec4(uTint.rgb/255., 1.) * (uTint.a/255.)
      // Colors come in with unmultiplied alpha, so we need to multiply the RGB
      // channels by alpha to convert it to premultiplied alpha.
      : vec4(vColor.rgb * vColor.a, vColor.a);
  inputs.shininess = uShininess;
  inputs.metalness = uMetallic;
  inputs.ambientMaterial = uHasSetAmbient ? uAmbientMatColor.rgb : inputs.color.rgb;
  inputs.specularMaterial = uSpecularMatColor.rgb;
  inputs.emissiveMaterial = uEmissiveMatColor.rgb;
  inputs = HOOK_getPixelInputs(inputs);

  vec3 diffuse;
  vec3 specular;
  totalLight(vViewPosition, inputs.normal, inputs.shininess, inputs.metalness, diffuse, specular);

  // Calculating final color as result of all lights (plus emissive term).

  vec2 texCoord = inputs.texCoord;
  vec4 baseColor = inputs.color;
  ColorComponents c;
  c.opacity = baseColor.a;
  c.baseColor = baseColor.rgb;
  c.ambientColor = inputs.ambientMaterial;
  c.specularColor = inputs.specularMaterial;
  c.diffuse = diffuse;
  c.ambient = inputs.ambientLight;
  c.specular = specular;
  c.emissive = inputs.emissiveMaterial;
  OUT_COLOR = HOOK_getFinalColor(HOOK_combineColors(c));
  HOOK_afterFragment();
}
`,fontVert:`IN vec3 aPosition;
IN vec2 aTexCoord;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

uniform vec4 uGlyphRect;
uniform float uGlyphOffset;

OUT vec2 vTexCoord;
OUT float w;

void main() {
  vec4 positionVec4 = vec4(aPosition, 1.0);

  // scale by the size of the glyph's rectangle
  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;

  // Expand glyph bounding boxes by 1px on each side to give a bit of room
  // for antialiasing
  vec3 newOrigin = (uModelViewMatrix * vec4(0., 0., 0., 1.)).xyz;
  vec3 newDX = (uModelViewMatrix * vec4(1., 0., 0., 1.)).xyz;
  vec3 newDY = (uModelViewMatrix * vec4(0., 1., 0., 1.)).xyz;
  vec2 pixelScale = vec2(
    1. / length(newOrigin - newDX),
    1. / length(newOrigin - newDY)
  );
  vec2 offset = pixelScale * normalize(aTexCoord - vec2(0.5, 0.5)) * vec2(1., -1.);
  vec2 textureOffset = offset * (1. / vec2(
    uGlyphRect.z - uGlyphRect.x,
    uGlyphRect.w - uGlyphRect.y
  ));

  // move to the corner of the glyph
  positionVec4.xy += uGlyphRect.xy;

  // move to the letter's line offset
  positionVec4.x += uGlyphOffset;

  positionVec4.xy += offset;
  
  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
  vTexCoord = aTexCoord + textureOffset;
  w = gl_Position.w;
}
`,fontFrag:`#ifndef WEBGL2
#extension GL_OES_standard_derivatives : enable
#endif

#if 0
  // simulate integer math using floats
	#define int float
	#define ivec2 vec2
	#define INT(x) float(x)

	int ifloor(float v) { return floor(v); }
	ivec2 ifloor(vec2 v) { return floor(v); }

#else
  // use native integer math
	precision highp int;
	#define INT(x) x

	int ifloor(float v) { return int(v); }
	int ifloor(int v) { return v; }
	ivec2 ifloor(vec2 v) { return ivec2(v); }

#endif

uniform sampler2D uSamplerStrokes;
uniform sampler2D uSamplerRowStrokes;
uniform sampler2D uSamplerRows;
uniform sampler2D uSamplerColStrokes;
uniform sampler2D uSamplerCols;

uniform ivec2 uStrokeImageSize;
uniform ivec2 uCellsImageSize;
uniform ivec2 uGridImageSize;

uniform ivec2 uGridOffset;
uniform ivec2 uGridSize;
uniform vec4 uMaterialColor;

IN vec2 vTexCoord;

// some helper functions
int ROUND(float v) { return ifloor(v + 0.5); }
ivec2 ROUND(vec2 v) { return ifloor(v + 0.5); }
float saturate(float v) { return clamp(v, 0.0, 1.0); }
vec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }

int mul(float v1, int v2) {
  return ifloor(v1 * float(v2));
}

ivec2 mul(vec2 v1, ivec2 v2) {
  return ifloor(v1 * vec2(v2) + 0.5);
}

// unpack a 16-bit integer from a float vec2
int getInt16(vec2 v) {
  ivec2 iv = ROUND(v * 255.0);
  return iv.x * INT(128) + iv.y;
}

vec2 pixelScale;
vec2 coverage = vec2(0.0);
vec2 weight = vec2(0.5);
const float minDistance = 1.0/8192.0;
const float hardness = 1.05; // amount of antialias

// the maximum number of curves in a glyph
const int N = INT(250);

// retrieves an indexed pixel from a sampler
vec4 getTexel(sampler2D sampler, int pos, ivec2 size) {
  int width = size.x;
  int y = ifloor(pos / width);
  int x = pos - y * width;  // pos % width

  return TEXTURE(sampler, (vec2(x, y) + 0.5) / vec2(size));
}

void calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {

  // get the coefficients of the quadratic in t
  vec2 a = p0 - p1 * 2.0 + p2;
  vec2 b = p0 - p1;
  vec2 c = p0 - vTexCoord;

  // found out which values of 't' it crosses the axes
  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));
  vec2 t1 = ((b - surd) / a).yx;
  vec2 t2 = ((b + surd) / a).yx;

  // approximate straight lines to avoid rounding errors
  if (abs(a.y) < 0.001)
    t1.x = t2.x = c.y / (2.0 * b.y);

  if (abs(a.x) < 0.001)
    t1.y = t2.y = c.x / (2.0 * b.x);

  // plug into quadratic formula to find the corrdinates of the crossings
  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;
  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;
}

void coverageX(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  // determine on which side of the x-axis the points lie
  bool y0 = p0.y > vTexCoord.y;
  bool y1 = p1.y > vTexCoord.y;
  bool y2 = p2.y > vTexCoord.y;

  // could web be under the curve (after t1)?
  if (y1 ? !y2 : y0) {
    // add the coverage for t1
    coverage.x += saturate(C1.x + 0.5);
    // calculate the anti-aliasing for t1
    weight.x = min(weight.x, abs(C1.x));
  }

  // are we outside the curve (after t2)?
  if (y1 ? !y0 : y2) {
    // subtract the coverage for t2
    coverage.x -= saturate(C2.x + 0.5);
    // calculate the anti-aliasing for t2
    weight.x = min(weight.x, abs(C2.x));
  }
}

// this is essentially the same as coverageX, but with the axes swapped
void coverageY(vec2 p0, vec2 p1, vec2 p2) {

  vec2 C1, C2;
  calulateCrossings(p0, p1, p2, C1, C2);

  bool x0 = p0.x > vTexCoord.x;
  bool x1 = p1.x > vTexCoord.x;
  bool x2 = p2.x > vTexCoord.x;

  if (x1 ? !x2 : x0) {
    coverage.y -= saturate(C1.y + 0.5);
    weight.y = min(weight.y, abs(C1.y));
  }

  if (x1 ? !x0 : x2) {
    coverage.y += saturate(C2.y + 0.5);
    weight.y = min(weight.y, abs(C2.y));
  }
}

void main() {

  // calculate the pixel scale based on screen-coordinates
  pixelScale = hardness / fwidth(vTexCoord);

  // which grid cell is this pixel in?
  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));

  // intersect curves in this row
  {
    // the index into the row info bitmap
    int rowIndex = gridCoord.y + uGridOffset.y;
    // fetch the info texel
    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);
    // unpack the rowInfo
    int rowStrokeIndex = getInt16(rowInfo.xy);
    int rowStrokeCount = getInt16(rowInfo.zw);

    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {
      if (iRowStroke >= rowStrokeCount)
        break;

      // each stroke is made up of 3 points: the start and control point
      // and the start of the next curve.
      // fetch the indices of this pair of strokes:
      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);

      // unpack the stroke index
      int strokePos = getInt16(strokeIndices.xy);

      // fetch the two strokes
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);

      // calculate the coverage
      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  // intersect curves in this column
  {
    int colIndex = gridCoord.x + uGridOffset.x;
    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);
    int colStrokeIndex = getInt16(colInfo.xy);
    int colStrokeCount = getInt16(colInfo.zw);
    
    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {
      if (iColStroke >= colStrokeCount)
        break;

      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);

      int strokePos = getInt16(strokeIndices.xy);
      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);
      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);
      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);
    }
  }

  weight = saturate(1.0 - weight * 2.0);
  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.
  float antialias = abs(dot(coverage, weight) / distance);
  float cover = min(abs(coverage.x), abs(coverage.y));
  OUT_COLOR = vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a;
  OUT_COLOR *= saturate(max(antialias, cover));
}
`,lineVert:Ct+`/*
  Part of the Processing project - http://processing.org
  Copyright (c) 2012-15 The Processing Foundation
  Copyright (c) 2004-12 Ben Fry and Casey Reas
  Copyright (c) 2001-04 Massachusetts Institute of Technology
  This library is free software; you can redistribute it and/or
  modify it under the terms of the GNU Lesser General Public
  License as published by the Free Software Foundation, version 2.1.
  This library is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  Lesser General Public License for more details.
  You should have received a copy of the GNU Lesser General
  Public License along with this library; if not, write to the
  Free Software Foundation, Inc., 59 Temple Place, Suite 330,
  Boston, MA  02111-1307  USA
*/

#define PROCESSING_LINE_SHADER

precision mediump int;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform float uStrokeWeight;

uniform bool uUseLineColor;
uniform vec4 uMaterialColor;

uniform vec4 uViewport;
uniform int uPerspective;
uniform int uStrokeJoin;

IN vec4 aPosition;
IN vec3 aTangentIn;
IN vec3 aTangentOut;
IN float aSide;
IN vec4 aVertexColor;

OUT vec4 vColor;
OUT vec2 vTangent;
OUT vec2 vCenter;
OUT vec2 vPosition;
OUT float vMaxDist;
OUT float vCap;
OUT float vJoin;
OUT float vStrokeWeight;

vec2 lineIntersection(vec2 aPoint, vec2 aDir, vec2 bPoint, vec2 bDir) {
  // Rotate and translate so a starts at the origin and goes out to the right
  bPoint -= aPoint;
  vec2 rotatedBFrom = vec2(
    bPoint.x*aDir.x + bPoint.y*aDir.y,
    bPoint.y*aDir.x - bPoint.x*aDir.y
  );
  vec2 bTo = bPoint + bDir;
  vec2 rotatedBTo = vec2(
    bTo.x*aDir.x + bTo.y*aDir.y,
    bTo.y*aDir.x - bTo.x*aDir.y
  );
  float intersectionDistance =
    rotatedBTo.x + (rotatedBFrom.x - rotatedBTo.x) * rotatedBTo.y /
    (rotatedBTo.y - rotatedBFrom.y);
  return aPoint + aDir * intersectionDistance;
}

void main() {
  HOOK_beforeVertex();
  // Caps have one of either the in or out tangent set to 0
  vCap = (aTangentIn == vec3(0.)) != (aTangentOut == (vec3(0.)))
    ? 1. : 0.;

  // Joins have two unique, defined tangents
  vJoin = (
    aTangentIn != vec3(0.) &&
    aTangentOut != vec3(0.) &&
    aTangentIn != aTangentOut
  ) ? 1. : 0.;

  vec4 localPosition = vec4(HOOK_getLocalPosition(aPosition.xyz), 1.);
  vec4 posp = vec4(HOOK_getWorldPosition((uModelViewMatrix * localPosition).xyz), 1.);
  vec4 posqIn = posp + uModelViewMatrix * vec4(aTangentIn, 0);
  vec4 posqOut = posp + uModelViewMatrix * vec4(aTangentOut, 0);
  float strokeWeight = HOOK_getStrokeWeight(uStrokeWeight);
  vStrokeWeight = strokeWeight;

  float facingCamera = pow(
    // The word space tangent's z value is 0 if it's facing the camera
    abs(normalize(posqIn-posp).z),

    // Using pow() here to ramp \`facingCamera\` up from 0 to 1 really quickly
    // so most lines get scaled and don't get clipped
    0.25
  );

  // Moving vertices slightly toward the camera
  // to avoid depth-fighting with the fill triangles.
  // A mix of scaling and offsetting is used based on distance
  // Discussion here:
  // https://github.com/processing/p5.js/issues/7200 

  // using a scale <1 moves the lines towards nearby camera
  // in order to prevent popping effects due to half of
  // the line disappearing behind the geometry faces.
  float zDistance = -posp.z; 
  float distanceFactor = smoothstep(0.0, 800.0, zDistance); 
  
  // Discussed here:
  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  
  float scale = mix(1., 0.995, facingCamera);
  float dynamicScale = mix(scale, 1.0, distanceFactor); // Closer = more scale, farther = less

  posp.xyz = posp.xyz * dynamicScale;
  posqIn.xyz = posqIn.xyz * dynamicScale;
  posqOut.xyz = posqOut.xyz * dynamicScale;

  // Moving vertices slightly toward camera when far away 
  // https://github.com/processing/p5.js/issues/6956 
  float zOffset = mix(-0.00045, -1., facingCamera);
  float dynamicZAdjustment = mix(0.0, zOffset, distanceFactor); // Closer = less zAdjustment, farther = more

  posp.z -= dynamicZAdjustment;
  posqIn.z -= dynamicZAdjustment;
  posqOut.z -= dynamicZAdjustment;
  
  vec4 p = uProjectionMatrix * posp;
  vec4 qIn = uProjectionMatrix * posqIn;
  vec4 qOut = uProjectionMatrix * posqOut;
  vCenter = HOOK_getLineCenter(p.xy);

  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])
  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw

  // prevent division by W by transforming the tangent formula (div by 0 causes
  // the line to disappear, see https://github.com/processing/processing/issues/5183)
  // t = screen_q - screen_p
  //
  // tangent is normalized and we don't care which aDirection it points to (+-)
  // t = +- normalize( screen_q - screen_p )
  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )
  //
  // extract common factor, <1,1> - <1,1> cancels out
  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )
  //
  // convert to common divisor
  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )
  //
  // remove the common scalar divisor/factor, not needed due to normalize and +-
  // (keep uViewport - can't remove because it has different components for x and y
  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)
  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )

  vec2 tangentIn = normalize((qIn.xy*p.w - p.xy*qIn.w) * uViewport.zw);
  vec2 tangentOut = normalize((qOut.xy*p.w - p.xy*qOut.w) * uViewport.zw);

  vec2 curPerspScale;
  if(uPerspective == 1) {
    // Perspective ---
    // convert from world to clip by multiplying with projection scaling factor
    // to get the right thickness (see https://github.com/processing/processing/issues/5182)

    // The y value of the projection matrix may be flipped if rendering to a Framebuffer.
    // Multiplying again by its sign here negates the flip to get just the scale.
    curPerspScale = (uProjectionMatrix * vec4(1, sign(uProjectionMatrix[1][1]), 0, 0)).xy;
  } else {
    // No Perspective ---
    // multiply by W (to cancel out division by W later in the pipeline) and
    // convert from screen to clip (derived from clip to screen above)
    curPerspScale = p.w / (0.5 * uViewport.zw);
  }

  vec2 offset;
  if (vJoin == 1.) {
    vTangent = normalize(tangentIn + tangentOut);
    vec2 normalIn = vec2(-tangentIn.y, tangentIn.x);
    vec2 normalOut = vec2(-tangentOut.y, tangentOut.x);
    float side = sign(aSide);
    float sideEnum = abs(aSide);

    // We generate vertices for joins on either side of the centerline, but
    // the "elbow" side is the only one needing a join. By not setting the
    // offset for the other side, all its vertices will end up in the same
    // spot and not render, effectively discarding it.
    if (sign(dot(tangentOut, vec2(-tangentIn.y, tangentIn.x))) != side) {
      // Side enums:
      //   1: the side going into the join
      //   2: the middle of the join
      //   3: the side going out of the join
      if (sideEnum == 2.) {
        // Calculate the position + tangent on either side of the join, and
        // find where the lines intersect to find the elbow of the join
        vec2 c = (posp.xy/posp.w + vec2(1.,1.)) * 0.5 * uViewport.zw;
        vec2 intersection = lineIntersection(
          c + (side * normalIn * strokeWeight / 2.),
          tangentIn,
          c + (side * normalOut * strokeWeight / 2.),
          tangentOut
        );
        offset = (intersection - c);

        // When lines are thick and the angle of the join approaches 180, the
        // elbow might be really far from the center. We'll apply a limit to
        // the magnitude to avoid lines going across the whole screen when this
        // happens.
        float mag = length(offset);
        float maxMag = 3. * strokeWeight;
        if (mag > maxMag) {
          offset *= maxMag / mag;
        }
      } else if (sideEnum == 1.) {
        offset = side * normalIn * strokeWeight / 2.;
      } else if (sideEnum == 3.) {
        offset = side * normalOut * strokeWeight / 2.;
      }
    }
    if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 avgNormal = vec2(-vTangent.y, vTangent.x);
      vMaxDist = abs(dot(avgNormal, normalIn * strokeWeight / 2.));
    } else {
      vMaxDist = strokeWeight / 2.;
    }
  } else {
    vec2 tangent = aTangentIn == vec3(0.) ? tangentOut : tangentIn;
    vTangent = tangent;
    vec2 normal = vec2(-tangent.y, tangent.x);

    float normalOffset = sign(aSide);
    // Caps will have side values of -2 or 2 on the edge of the cap that
    // extends out from the line
    float tangentOffset = abs(aSide) - 1.;
    offset = (normal * normalOffset + tangent * tangentOffset) *
      strokeWeight * 0.5;
    vMaxDist = strokeWeight / 2.;
  }
  vPosition = HOOK_getLinePosition(vCenter + offset);

  gl_Position.xy = p.xy + offset.xy * curPerspScale;
  gl_Position.zw = p.zw;
  
  vColor = HOOK_getVertexColor(uUseLineColor ? aVertexColor : uMaterialColor);
  HOOK_afterVertex();
}
`,lineFrag:Ct+`precision mediump int;

uniform vec4 uMaterialColor;
uniform int uStrokeCap;
uniform int uStrokeJoin;

IN vec4 vColor;
IN vec2 vTangent;
IN vec2 vCenter;
IN vec2 vPosition;
IN float vStrokeWeight;
IN float vMaxDist;
IN float vCap;
IN float vJoin;

float distSquared(vec2 a, vec2 b) {
  vec2 aToB = b - a;
  return dot(aToB, aToB);
}

struct Inputs {
  vec4 color;
  vec2 tangent;
  vec2 center;
  vec2 position;
  float strokeWeight;
};

void main() {
  HOOK_beforeFragment();

  Inputs inputs;
  inputs.color = vColor;
  inputs.tangent = vTangent;
  inputs.center = vCenter;
  inputs.position = vPosition;
  inputs.strokeWeight = vStrokeWeight;
  inputs = HOOK_getPixelInputs(inputs);

  if (vCap > 0.) {
    if (
      uStrokeCap == STROKE_CAP_ROUND &&
      HOOK_shouldDiscard(distSquared(inputs.position, inputs.center) > inputs.strokeWeight * inputs.strokeWeight * 0.25)
    ) {
      discard;
    } else if (
      uStrokeCap == STROKE_CAP_SQUARE &&
      HOOK_shouldDiscard(dot(inputs.position - inputs.center, inputs.tangent) > 0.)
    ) {
      discard;
    // Use full area for PROJECT
    } else if (HOOK_shouldDiscard(false)) {
      discard;
    }
  } else if (vJoin > 0.) {
    if (
      uStrokeJoin == STROKE_JOIN_ROUND &&
      HOOK_shouldDiscard(distSquared(inputs.position, inputs.center) > inputs.strokeWeight * inputs.strokeWeight * 0.25)
    ) {
      discard;
    } else if (uStrokeJoin == STROKE_JOIN_BEVEL) {
      vec2 normal = vec2(-inputs.tangent.y, inputs.tangent.x);
      if (HOOK_shouldDiscard(abs(dot(inputs.position - inputs.center, normal)) > vMaxDist)) {
        discard;
      }
    // Use full area for MITER
    } else if (HOOK_shouldDiscard(false)) {
      discard;
    }
  }
  OUT_COLOR = HOOK_getFinalColor(vec4(inputs.color.rgb, 1.) * inputs.color.a);
  HOOK_afterFragment();
}
`,pointVert:`IN vec3 aPosition;
uniform float uPointSize;
OUT float vStrokeWeight;
uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

void main() {
  HOOK_beforeVertex();
  vec4 viewModelPosition = vec4(HOOK_getWorldPosition(
    (uModelViewMatrix * vec4(HOOK_getLocalPosition(aPosition), 1.0)).xyz
  ), 1.);
  gl_Position = uProjectionMatrix * viewModelPosition;  

  float pointSize = HOOK_getPointSize(uPointSize);

	gl_PointSize = pointSize;
	vStrokeWeight = pointSize;
  HOOK_afterVertex();
}
`,pointFrag:`precision mediump int;
uniform vec4 uMaterialColor;
IN float vStrokeWeight;

void main(){
  HOOK_beforeFragment();
  float mask = 0.0;

  // make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)
  // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant

  mask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));

  // if strokeWeight is 1 or less lets just draw a square
  // this prevents weird artifacting from carving circles when our points are really small
  // if strokeWeight is larger than 1, we just use it as is

  mask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));

  // throw away the borders of the mask
  // otherwise we get weird alpha blending issues

  if(HOOK_shouldDiscard(mask > 0.98)){
    discard;
  }

  OUT_COLOR = HOOK_getFinalColor(vec4(uMaterialColor.rgb, 1.) * uMaterialColor.a);
  HOOK_afterFragment();
}
`,imageLightVert:`precision highp float;
attribute vec3 aPosition;
attribute vec3 aNormal;
attribute vec2 aTexCoord;

varying vec3 localPos;
varying vec3 vWorldNormal;
varying vec3 vWorldPosition;
varying vec2 vTexCoord;

uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;
uniform mat3 uNormalMatrix;

void main() {
  // Multiply the position by the matrix.
  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);
  gl_Position = uProjectionMatrix * viewModelPosition;  
  
  // orient the normals and pass to the fragment shader
  vWorldNormal = uNormalMatrix * aNormal;
  
  // send the view position to the fragment shader
  vWorldPosition = (uModelViewMatrix * vec4(aPosition, 1.0)).xyz;
  
  localPos = vWorldPosition;
  vTexCoord = aTexCoord;
}


/*
in the vertex shader we'll compute the world position and world oriented normal of the vertices and pass those to the fragment shader as varyings.
*/
`,imageLightDiffusedFrag:`precision highp float;
varying vec3 localPos;

// the HDR cubemap converted (can be from an equirectangular environment map.)
uniform sampler2D environmentMap;
varying vec2 vTexCoord;

const float PI = 3.14159265359;

vec2 nTOE( vec3 v ){
  // x = r sin(phi) cos(theta)   
  // y = r cos(phi)  
  // z = r sin(phi) sin(theta)
  float phi = acos( v.y );
  // if phi is 0, then there are no x, z components
  float theta = 0.0;
  // else 
  theta = acos(v.x / sin(phi));
  float sinTheta = v.z / sin(phi);
  if (sinTheta < 0.0) {
    // Turn it into -theta, but in the 0-2PI range
    theta = 2.0 * PI - theta;
  }
  theta = theta / (2.0 * 3.14159);
  phi = phi / 3.14159 ;
  
  vec2 angles = vec2( phi, theta );
  return angles;
}

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

void main()
{   	 
	// the sample direction equals the hemisphere's orientation
  float phi = vTexCoord.x * 2.0 * PI;
  float theta = vTexCoord.y * PI;
  float x = sin(theta) * cos(phi);
  float y = sin(theta) * sin(phi);
  float z = cos(theta);
  vec3 normal = vec3( x, y, z);

	// Discretely sampling the hemisphere given the integral's
  // spherical coordinates translates to the following fragment code:
	vec3 irradiance = vec3(0.0);  
	vec3 up	= vec3(0.0, 1.0, 0.0);
	vec3 right = normalize(cross(up, normal));
	up = normalize(cross(normal, right));

	//  We specify a fixed sampleDelta delta value to traverse
  // the hemisphere; decreasing or increasing the sample delta
  // will increase or decrease the accuracy respectively.
	const float sampleDelta = 0.100;
	float nrSamples = 0.0;
  float randomOffset = random(gl_FragCoord.xy) * sampleDelta;
	for(float rawPhi = 0.0; rawPhi < 2.0 * PI; rawPhi += sampleDelta)
	{
    float phi = rawPhi + randomOffset;
    for(float rawTheta = 0.0; rawTheta < ( 0.5 ) * PI; rawTheta += sampleDelta)
    {
      float theta = rawTheta + randomOffset;
      // spherical to cartesian (in tangent space) // tangent space to world // add each sample result to irradiance
      float x = sin(theta) * cos(phi);
      float y = sin(theta) * sin(phi);
      float z = cos(theta);
      vec3 tangentSample = vec3( x, y, z);
      
      vec3 sampleVec = tangentSample.x * right + tangentSample.y * up + tangentSample.z * normal;
        irradiance += (texture2D(environmentMap, nTOE(sampleVec)).xyz) * cos(theta) * sin(theta);
      nrSamples++;
    }
	}
	// divide by the total number of samples taken, giving us the average sampled irradiance.
	irradiance = PI * irradiance * (1.0 / float(nrSamples )) ;
  
 
	gl_FragColor = vec4(irradiance, 1.0);
}`,imageLightSpecularFrag:`precision highp float;\r
varying vec3 localPos;\r
varying vec2 vTexCoord;\r
\r
// our texture\r
uniform sampler2D environmentMap;\r
uniform float roughness;\r
\r
const float PI = 3.14159265359;\r
\r
float VanDerCorput(int bits);\r
vec2 HammersleyNoBitOps(int i, int N);\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness);\r
\r
\r
vec2 nTOE( vec3 v ){\r
  // x = r sin(phi) cos(theta)   \r
  // y = r cos(phi)  \r
  // z = r sin(phi) sin(theta)\r
  float phi = acos( v.y );\r
  // if phi is 0, then there are no x, z components\r
  float theta = 0.0;\r
  // else \r
  theta = acos(v.x / sin(phi));\r
  float sinTheta = v.z / sin(phi);\r
  if (sinTheta < 0.0) {\r
    // Turn it into -theta, but in the 0-2PI range\r
    theta = 2.0 * PI - theta;\r
  }\r
  theta = theta / (2.0 * 3.14159);\r
  phi = phi / 3.14159 ;\r
  \r
  vec2 angles = vec2( phi, theta );\r
  return angles;\r
}\r
\r
\r
void main(){\r
  const int SAMPLE_COUNT = 400; // 4096\r
  int lowRoughnessLimit = int(pow(2.0,(roughness+0.1)*20.0));\r
  float totalWeight = 0.0;\r
  vec3 prefilteredColor = vec3(0.0);\r
  float phi = vTexCoord.x * 2.0 * PI;\r
  float theta = vTexCoord.y * PI;\r
  float x = sin(theta) * cos(phi);\r
  float y = sin(theta) * sin(phi);\r
  float z = cos(theta);\r
  vec3 N = vec3(x,y,z);\r
  vec3 V = N;\r
  for (int i = 0; i < SAMPLE_COUNT; ++i)\r
  {\r
    // break at smaller sample numbers for low roughness levels\r
    if(i == lowRoughnessLimit)\r
    {\r
      break;\r
    }\r
    vec2 Xi = HammersleyNoBitOps(i, SAMPLE_COUNT);\r
    vec3 H = ImportanceSampleGGX(Xi, N, roughness);\r
    vec3 L = normalize(2.0 * dot(V, H) * H - V);\r
\r
    float NdotL = max(dot(N, L), 0.0);\r
    if (NdotL > 0.0)\r
    {\r
      prefilteredColor += texture2D(environmentMap, nTOE(L)).xyz * NdotL;\r
      totalWeight += NdotL;\r
    }\r
  }\r
  prefilteredColor = prefilteredColor / totalWeight;\r
\r
  gl_FragColor = vec4(prefilteredColor, 1.0);\r
}\r
\r
vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness){\r
  float a = roughness * roughness;\r
\r
  float phi = 2.0 * PI * Xi.x;\r
  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a * a - 1.0) * Xi.y));\r
  float sinTheta = sqrt(1.0 - cosTheta * cosTheta);\r
  // from spherical coordinates to cartesian coordinates\r
  vec3 H;\r
  H.x = cos(phi) * sinTheta;\r
  H.y = sin(phi) * sinTheta;\r
  H.z = cosTheta;\r
\r
  // from tangent-space vector to world-space sample vector\r
  vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\r
  vec3 tangent = normalize(cross(up, N));\r
  vec3 bitangent = cross(N, tangent);\r
\r
  vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\r
  return normalize(sampleVec);\r
}\r
\r
\r
float VanDerCorput(int n, int base)\r
{\r
#ifdef WEBGL2\r
\r
    uint bits = uint(n);\r
    bits = (bits << 16u) | (bits >> 16u);\r
    bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\r
    bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\r
    bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\r
    bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\r
    return float(bits) * 2.3283064365386963e-10; // / 0x100000000\r
\r
#else\r
\r
  float invBase = 1.0 / float(base);\r
  float denom = 1.0;\r
  float result = 0.0;\r
\r
\r
  for (int i = 0; i < 32; ++i)\r
  {\r
        if (n > 0)\r
        {\r
        denom = mod(float(n), 2.0);\r
        result += denom * invBase;\r
        invBase = invBase / 2.0;\r
        n = int(float(n) / 2.0);\r
        }\r
  }\r
\r
\r
  return result;\r
\r
#endif\r
}\r
\r
vec2 HammersleyNoBitOps(int i, int N)\r
{\r
  return vec2(float(i) / float(N), VanDerCorput(i, 2));\r
}\r
`},Dt=It.sphereMappingFrag;for(wt in It)It[wt]=`#ifdef WEBGL2

#define IN in
#define OUT out

#ifdef FRAGMENT_SHADER
out vec4 outColor;
#define OUT_COLOR outColor
#endif
#define TEXTURE texture

#else

#ifdef FRAGMENT_SHADER
#define IN varying
#else
#define IN attribute
#endif
#define OUT varying
#define TEXTURE texture2D

#ifdef FRAGMENT_SHADER
#define OUT_COLOR gl_FragColor
#endif

#endif
`+It[wt];yt(Et={},h.GRAY,`precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 tex = texture2D(tex0, vTexCoord);
  float gray = luma(tex.rgb);
  gl_FragColor = vec4(gray, gray, gray, tex.a);
}
`),yt(Et,h.ERODE,`// Reduces the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the darkest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum < lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),yt(Et,h.DILATE,`// Increase the bright areas in an image

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform vec2 texelSize;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  // weights 77, 151, 28 taken from src/image/filters.js
  return dot(color, vec3(0.300781, 0.589844, 0.109375));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float lum = luma(color.rgb);

  // set current color as the brightest neighbor color

  vec4 neighbors[4];
  neighbors[0] = texture2D(tex0, vTexCoord + vec2( texelSize.x, 0.0));
  neighbors[1] = texture2D(tex0, vTexCoord + vec2(-texelSize.x, 0.0));
  neighbors[2] = texture2D(tex0, vTexCoord + vec2(0.0,  texelSize.y));
  neighbors[3] = texture2D(tex0, vTexCoord + vec2(0.0, -texelSize.y));

  for (int i = 0; i < 4; i++) {
    vec4 neighborColor = neighbors[i];
    float neighborLum = luma(neighborColor.rgb);

    if (neighborLum > lum) {
      color = neighborColor;
      lum = neighborLum;
    }
  }

  gl_FragColor = color;
}
`),yt(Et,h.BLUR,`precision highp float;

// Two-pass blur filter, unweighted kernel.
// See also a similar blur at Adam Ferriss' repo of shader examples:
// https://github.com/aferriss/p5jsShaderExamples/blob/gh-pages/4_image-effects/4-9_single-pass-blur/effect.frag


uniform sampler2D tex0;
varying vec2 vTexCoord;
uniform vec2 direction;
uniform vec2 canvasSize;
uniform float radius;

float random(vec2 p) {
  vec3 p3  = fract(vec3(p.xyx) * .1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

// This isn't a real Gaussian weight, it's a quadratic weight. It's what the
// CPU mode's blur uses though, so we also use it here to match.
float quadWeight(float x, float e) {
  return pow(e-abs(x), 2.);
}

void main(){
  vec2 uv = vTexCoord;

  // A reasonable maximum number of samples
  const float maxSamples = 64.0;

  float numSamples = floor(7. * radius);
  if (fract(numSamples / 2.) == 0.) {
    numSamples++;
  }
  vec4 avg = vec4(0.0);
  float total = 0.0;

  // Calculate the spacing to avoid skewing if numSamples > maxSamples
  float spacing = 1.0;
  if (numSamples > maxSamples) {
    spacing = numSamples / maxSamples;
    numSamples = maxSamples;
  }

  float randomOffset = (spacing - 1.0) * mix(-0.5, 0.5, random(gl_FragCoord.xy));
  for (float i = 0.0; i < maxSamples; i++) {
    if (i >= numSamples) break;

    float sample = i * spacing - (numSamples - 1.0) * 0.5 * spacing + randomOffset;
    vec2 sampleCoord = uv + vec2(sample, sample) / canvasSize * direction;
    float weight = quadWeight(sample, (numSamples - 1.0) * 0.5 * spacing);

    avg += weight * texture2D(tex0, sampleCoord);
    total += weight;
  }

  avg /= total;
  gl_FragColor = avg;
}
`),yt(Et,h.POSTERIZE,`// Limit color space for a stylized cartoon / poster effect

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

vec3 quantize(vec3 color, float n) {
  // restrict values to N options/bins
  // and floor each channel to nearest value
  //
  // eg. when N = 5, values = 0.0, 0.25, 0.50, 0.75, 1.0
  // then quantize (0.1, 0.7, 0.9) -> (0.0, 0.5, 1.0)

  color = color * n;
  color = floor(color);
  color = color / (n - 1.0);
  return color;
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);

  vec3 restrictedColor = quantize(color.rgb / color.a, filterParameter);

  gl_FragColor = vec4(restrictedColor.rgb * color.a, color.a);
}
`),yt(Et,h.OPAQUE,`// Set alpha channel to entirely opaque

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  gl_FragColor = vec4(color.rgb / color.a, 1.0);
}
`),yt(Et,h.INVERT,`// Set each pixel to inverse value
// Note that original INVERT does not change the opacity, so this follows suit

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;

void main() {
vec4 color = texture2D(tex0, vTexCoord);
vec3 origColor = color.rgb / color.a;
vec3 invertedColor = vec3(1.0) - origColor;
gl_FragColor = vec4(invertedColor * color.a, color.a);
}
`),yt(Et,h.THRESHOLD,`// Convert pixels to either white or black, 
// depending on if their luma is above or below filterParameter

precision highp float;

varying vec2 vTexCoord;

uniform sampler2D tex0;
uniform float filterParameter;

float luma(vec3 color) {
  // weighted grayscale with luminance values
  return dot(color, vec3(0.2126, 0.7152, 0.0722));
}

void main() {
  vec4 color = texture2D(tex0, vTexCoord);
  float gray = luma(color.rgb / color.a);
  // floor() used to match src/image/filters.js
  float threshold = floor(filterParameter * 255.0) / 255.0;
  float blackOrWhite = step(threshold, gray);
  gl_FragColor = vec4(vec3(blackOrWhite) * color.a, color.a);
}
`);var Pt=Et;function qt(Gt,Ut,yr,Zt,vt,Rt,Lt,Vt,Jt,er){var ur=Ut.getParameter(Ut.FRAMEBUFFER_BINDING),yr=(Ut.bindFramebuffer(Ut.FRAMEBUFFER,yr),Vt===Ut.RGBA?4:3),Qt=Rt*Lt*yr,nr=Jt===Ut.UNSIGNED_BYTE?Uint8Array:Float32Array;if(Gt instanceof nr&&Gt.length===Qt||(Gt=new nr(Qt)),Ut.readPixels(Zt,er?er-vt-Lt:vt,Rt,Lt,Vt,Jt,Gt),Ut.bindFramebuffer(Ut.FRAMEBUFFER,ur),er)for(var or=Math.floor(Lt/2),Wt=new nr(Rt*yr),ir=0;ir<or;ir++){var br=ir*Rt*4,Sr=(Lt-ir-1)*Rt*4;Wt.set(Gt.subarray(br,br+4*Rt)),Gt.copyWithin(br,Sr,Sr+4*Rt),Gt.set(Wt,Sr)}return Gt}function Ht(Gt,Jt,Yt,Zt,vt,Rt,Lt){var Vt=Gt.getParameter(Gt.FRAMEBUFFER_BINDING),Jt=(Gt.bindFramebuffer(Gt.FRAMEBUFFER,Jt),vt===Gt.RGBA?4:3),Jt=new(Rt===Gt.UNSIGNED_BYTE?Uint8Array:Float32Array)(Jt);return Gt.readPixels(Yt,Lt?Lt-Zt-1:Zt,1,1,vt,Rt,Jt),Gt.bindFramebuffer(Gt.FRAMEBUFFER,Vt),Array.from(Jt)}d.default.prototype.setAttributes=function(Gt,Ut){if(this._glAttributes===void 0)console.log("You are trying to use setAttributes on a p5.Graphics object that does not use a WEBGL renderer.");else{var Yt=!0;if(Ut!==void 0?(this._glAttributes===null&&(this._glAttributes={}),this._glAttributes[Gt]!==Ut&&(this._glAttributes[Gt]=Ut,Yt=!1)):Gt instanceof Object&&this._glAttributes!==Gt&&(this._glAttributes=Gt,Yt=!1),this._renderer.isP3D&&!Yt){if(!this._setupDone){for(var Zt in this._renderer.retainedMode.geometry)if(this._renderer.retainedMode.geometry.hasOwnProperty(Zt))return void d.default._friendlyError("Sorry, Could not set the attributes, you need to call setAttributes() before calling the other drawing methods in setup()")}this.push(),this._renderer._resetContext(),this.pop(),this._renderer._curCamera&&(this._renderer._curCamera._renderer=this._renderer)}}},d.default.RendererGL=function(Gt){var Ut=Zt;if(typeof Gt!="function"&&Gt!==null)throw new TypeError("Super expression must either be null or a function");Ut.prototype=Object.create(Gt&&Gt.prototype,{constructor:{value:Ut,writable:!0,configurable:!0}}),Gt&&Le(Ut,Gt);var Yt=nt(Zt);function Zt(vt,Rt,Lt,Vt){if(this instanceof Zt)return(vt=Yt.call(this,vt,Rt,Lt))._setAttributeDefaults(Rt),vt._initContext(),vt.isP3D=!0,vt.geometryBuilder=void 0,vt.GL=vt.drawingContext,vt._pInst._setProperty("drawingContext",vt.drawingContext),vt._isErasing=!1,vt._clipDepths=[],vt._isClipApplied=!1,vt._stencilTestOn=!1,vt._enableLighting=!1,vt.ambientLightColors=[],vt.mixedAmbientLight=[],vt.mixedSpecularColor=[],vt.specularColors=[1,1,1],vt.directionalLightDirections=[],vt.directionalLightDiffuseColors=[],vt.directionalLightSpecularColors=[],vt.pointLightPositions=[],vt.pointLightDiffuseColors=[],vt.pointLightSpecularColors=[],vt.spotLightPositions=[],vt.spotLightDirections=[],vt.spotLightDiffuseColors=[],vt.spotLightSpecularColors=[],vt.spotLightAngle=[],vt.spotLightConc=[],vt.activeImageLight=null,vt.diffusedTextures=new Map,vt.specularTextures=new Map,vt.drawMode=h.FILL,vt.curFillColor=vt._cachedFillStyle=[1,1,1,1],vt.curAmbientColor=vt._cachedFillStyle=[1,1,1,1],vt.curSpecularColor=vt._cachedFillStyle=[0,0,0,0],vt.curEmissiveColor=vt._cachedFillStyle=[0,0,0,0],vt.curStrokeColor=vt._cachedStrokeStyle=[0,0,0,1],vt.curBlendMode=h.BLEND,vt.preEraseBlend=void 0,vt._cachedBlendMode=void 0,vt.webglVersion===h.WEBGL2?vt.blendExt=vt.GL:vt.blendExt=vt.GL.getExtension("EXT_blend_minmax"),vt._isBlending=!1,vt._hasSetAmbient=!1,vt._useSpecularMaterial=!1,vt._useEmissiveMaterial=!1,vt._useNormalMaterial=!1,vt._useShininess=1,vt._useMetalness=0,vt._useLineColor=!1,vt._useVertexColor=!1,vt.registerEnabled=new Set,vt._tint=[255,255,255,255],vt.constantAttenuation=1,vt.linearAttenuation=0,vt.quadraticAttenuation=0,vt.uModelMatrix=new d.default.Matrix,vt.uViewMatrix=new d.default.Matrix,vt.uMVMatrix=new d.default.Matrix,vt.uPMatrix=new d.default.Matrix,vt.uNMatrix=new d.default.Matrix("mat3"),vt.curMatrix=new d.default.Matrix("mat3"),vt._currentNormal=new d.default.Vector(0,0,1),vt._curCamera=new d.default.Camera(tt(vt)),vt._curCamera._computeCameraDefaultSettings(),vt._curCamera._setDefaultCamera(),vt.filterCamera=new d.default.Camera(tt(vt)),vt.filterCamera._computeCameraDefaultSettings(),vt.filterCamera._setDefaultCamera(),vt.prevTouches=[],vt.zoomVelocity=0,vt.rotateVelocity=new d.default.Vector(0,0),vt.moveVelocity=new d.default.Vector(0,0),vt.executeZoom=!1,vt.executeRotateAndMove=!1,vt.specularShader=void 0,vt.sphereMapping=void 0,vt.diffusedShader=void 0,vt._defaultLightShader=void 0,vt._defaultImmediateModeShader=void 0,vt._defaultNormalShader=void 0,vt._defaultColorShader=void 0,vt._defaultPointShader=void 0,vt.userFillShader=void 0,vt.userStrokeShader=void 0,vt.userPointShader=void 0,vt.retainedMode={geometry:{},buffers:{stroke:[new d.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",tt(vt)),new d.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",tt(vt)),new d.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",tt(vt)),new d.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",tt(vt)),new d.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",tt(vt))],fill:[new d.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",tt(vt),vt._vToNArray),new d.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",tt(vt),vt._vToNArray),new d.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",tt(vt)),new d.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",tt(vt)),new d.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",tt(vt),vt._flatten)],text:[new d.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",tt(vt),vt._vToNArray),new d.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",tt(vt),vt._flatten)]}},vt.immediateMode={geometry:new d.default.Geometry,shapeMode:h.TRIANGLE_FAN,contourIndices:[],_bezierVertex:[],_quadraticVertex:[],_curveVertex:[],buffers:{fill:[new d.default.RenderBuffer(3,"vertices","vertexBuffer","aPosition",tt(vt),vt._vToNArray),new d.default.RenderBuffer(3,"vertexNormals","normalBuffer","aNormal",tt(vt),vt._vToNArray),new d.default.RenderBuffer(4,"vertexColors","colorBuffer","aVertexColor",tt(vt)),new d.default.RenderBuffer(3,"vertexAmbients","ambientBuffer","aAmbientColor",tt(vt)),new d.default.RenderBuffer(2,"uvs","uvBuffer","aTexCoord",tt(vt),vt._flatten)],stroke:[new d.default.RenderBuffer(4,"lineVertexColors","lineColorBuffer","aVertexColor",tt(vt)),new d.default.RenderBuffer(3,"lineVertices","lineVerticesBuffer","aPosition",tt(vt)),new d.default.RenderBuffer(3,"lineTangentsIn","lineTangentsInBuffer","aTangentIn",tt(vt)),new d.default.RenderBuffer(3,"lineTangentsOut","lineTangentsOutBuffer","aTangentOut",tt(vt)),new d.default.RenderBuffer(1,"lineSides","lineSidesBuffer","aSide",tt(vt))],point:vt.GL.createBuffer()}},vt.pointSize=5,vt.curStrokeWeight=1,vt.curStrokeCap=h.ROUND,vt.curStrokeJoin=h.ROUND,vt.textures=new Map,vt.framebuffers=new Set,vt.activeFramebuffers=[],vt.filterShader=void 0,vt.filterLayer=void 0,vt.filterLayerTemp=void 0,vt.defaultFilterShaders={},vt.textureMode=h.IMAGE,vt.textureWrapX=h.CLAMP,vt.textureWrapY=h.CLAMP,vt._tex=null,vt._curveTightness=6,vt._lookUpTableBezier=[],vt._lookUpTableQuadratic=[],vt._lutBezierDetail=0,vt._lutQuadraticDetail=0,vt.isProcessingVertices=!1,vt._tessy=vt._initTessy(),vt.fontInfos={},vt._curShader=void 0,vt;throw new TypeError("Cannot call a class as a function")}return Ut=Zt,(Gt=[{key:"beginGeometry",value:function(){if(this.geometryBuilder)throw new Error("It looks like `beginGeometry()` is being called while another p5.Geometry is already being build.");this.geometryBuilder=new N.default(this)}},{key:"endGeometry",value:function(){var vt;if(this.geometryBuilder)return vt=this.geometryBuilder.finish(),this.geometryBuilder=void 0,vt;throw new Error("Make sure you call beginGeometry() before endGeometry()!")}},{key:"buildGeometry",value:function(vt){return this.beginGeometry(),vt(),this.endGeometry()}},{key:"_setAttributeDefaults",value:function(vt){var Rt={alpha:!0,depth:!0,stencil:!0,antialias:navigator.userAgent.toLowerCase().includes("safari"),premultipliedAlpha:!0,preserveDrawingBuffer:!0,perPixelLighting:!0,version:2};vt._glAttributes===null?vt._glAttributes=Rt:vt._glAttributes=Object.assign(Rt,vt._glAttributes)}},{key:"_initContext",value:function(){if(this._pInst._glAttributes.version!==1&&(this.drawingContext=this.canvas.getContext("webgl2",this._pInst._glAttributes)),this.webglVersion=this.drawingContext?h.WEBGL2:h.WEBGL,this._pInst._setProperty("webglVersion",this.webglVersion),this.drawingContext||(this.drawingContext=this.canvas.getContext("webgl",this._pInst._glAttributes)||this.canvas.getContext("experimental-webgl",this._pInst._glAttributes)),this.drawingContext===null)throw new Error("Error creating webgl context");var vt=this.drawingContext;vt.enable(vt.DEPTH_TEST),vt.depthFunc(vt.LEQUAL),vt.viewport(0,0,vt.drawingBufferWidth,vt.drawingBufferHeight),vt.pixelStorei(vt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}},{key:"_getParam",value:function(){var vt=this.drawingContext;return vt.getParameter(vt.MAX_TEXTURE_SIZE)}},{key:"_adjustDimensions",value:function(vt,Rt){this._maxTextureSize||(this._maxTextureSize=this._getParam());var Vt=this._maxTextureSize,Vt=(d.default.prototype._maxAllowedPixelDimensions,Math.floor(Vt/this.pixelDensity())),Lt=Math.min(vt,Vt),Vt=Math.min(Rt,Vt);return Lt===vt&&Vt===Rt||console.warn("Warning: The requested width/height exceeds hardware limits. "+"Adjusting dimensions to width: ".concat(Lt,", height: ").concat(Vt,".")),{adjustedWidth:Lt,adjustedHeight:Vt}}},{key:"_resetContext",value:function(vt,Rt){var Lt,Vt=this.width,Jt=this.height,ur=this.canvas.id,er=this._pInst instanceof d.default.Graphics,ur=(er?((Lt=this._pInst).canvas.parentNode.removeChild(Lt.canvas),Lt.canvas=document.createElement("canvas"),(Lt._pInst._userNode||document.body).appendChild(Lt.canvas),d.default.Element.call(Lt,Lt.canvas,Lt._pInst),Lt.width=Vt,Lt.height=Jt):((Lt=this.canvas)&&Lt.parentNode.removeChild(Lt),(Lt=document.createElement("canvas")).id=ur,(this._pInst._userNode||document.body).appendChild(Lt),this._pInst.canvas=Lt,this.canvas=Lt),new d.default.RendererGL(this._pInst.canvas,this._pInst,!er));this._pInst._setProperty("_renderer",ur),ur.resize(Vt,Jt),ur._applyDefaults(),er||this._pInst._elements.push(ur),typeof Rt=="function"&&setTimeout(function(){Rt.apply(window._renderer,vt)},0)}},{key:"_update",value:function(){this.uModelMatrix.reset(),this.uViewMatrix.set(this._curCamera.cameraMatrix),this.ambientLightColors.length=0,this.specularColors=[1,1,1],this.directionalLightDirections.length=0,this.directionalLightDiffuseColors.length=0,this.directionalLightSpecularColors.length=0,this.pointLightPositions.length=0,this.pointLightDiffuseColors.length=0,this.pointLightSpecularColors.length=0,this.spotLightPositions.length=0,this.spotLightDirections.length=0,this.spotLightDiffuseColors.length=0,this.spotLightSpecularColors.length=0,this.spotLightAngle.length=0,this.spotLightConc.length=0,this._enableLighting=!1,this._tint=[255,255,255,255],this.GL.clearStencil(0),this.GL.clear(this.GL.DEPTH_BUFFER_BIT|this.GL.STENCIL_BUFFER_BIT),this.GL.disable(this.GL.STENCIL_TEST)}},{key:"background",value:function(){var Vt=(Vt=this._pInst).color.apply(Vt,arguments),vt=Vt.levels[0]/255,Rt=Vt.levels[1]/255,Lt=Vt.levels[2]/255,Vt=Vt.levels[3]/255;this.clear(vt,Rt,Lt,Vt)}},{key:"fill",value:function(vt,Rt,Lt,Vt){var Jt=d.default.prototype.color.apply(this._pInst,arguments);this.curFillColor=Jt._array,this.drawMode=h.FILL,this._useNormalMaterial=!1,this._tex=null}},{key:"stroke",value:function(vt,Rt,Lt,Vt){var Jt=d.default.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=Jt._array}},{key:"strokeCap",value:function(vt){this.curStrokeCap=vt}},{key:"strokeJoin",value:function(vt){this.curStrokeJoin=vt}},{key:"getFilterLayer",value:function(){return this.filterLayer||(this.filterLayer=this._pInst.createFramebuffer()),this.filterLayer}},{key:"getFilterLayerTemp",value:function(){return this.filterLayerTemp||(this.filterLayerTemp=this._pInst.createFramebuffer()),this.filterLayerTemp}},{key:"matchSize",value:function(vt,Rt){vt.width===Rt.width&&vt.height===Rt.height||vt.resize(Rt.width,Rt.height),vt.pixelDensity()!==Rt.pixelDensity()&&vt.pixelDensity(Rt.pixelDensity())}},{key:"filter",value:function(){var vt,Rt,Lt=this,Vt=this.getFilterLayer(),Jt=void 0,er=void 0,ur=(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(er=arguments.length<=0?void 0:arguments[0],yt(vt={},h.BLUR,3),yt(vt,h.POSTERIZE,4),yt(vt,h.THRESHOLD,.5),Jt=er in(vt=vt)&&(arguments.length<=1?void 0:arguments[1])===void 0?vt[er]:arguments.length<=1?void 0:arguments[1],er in this.defaultFilterShaders||(this.defaultFilterShaders[er]=new d.default.Shader(Vt._renderer,`uniform mat4 uModelViewMatrix;
uniform mat4 uProjectionMatrix;

attribute vec3 aPosition;
// texcoords only come from p5 to vertex shader
// so pass texcoords on to the fragment shader in a varying variable
attribute vec2 aTexCoord;
varying vec2 vTexCoord;

void main() {
  // transferring texcoords for the frag shader
  vTexCoord = aTexCoord;

  // copy position with a fourth coordinate for projection (1.0 is normal)
  vec4 positionVec4 = vec4(aPosition, 1.0);

  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;
}
`,Pt[er])),this.filterShader=this.defaultFilterShaders[er]):this.filterShader=arguments.length<=0?void 0:arguments[0],this.activeFramebuffer()||this),yr=(this.matchSize(Vt,ur),Vt.draw(function(){return Lt._pInst.clear()}),[1/(ur.width*ur.pixelDensity()),1/(ur.height*ur.pixelDensity())]);er===h.BLUR?(Rt=this.getFilterLayerTemp(),this.matchSize(Rt,ur),this._pInst.push(),this._pInst.noStroke(),this._pInst.blendMode(h.BLEND),this._pInst.shader(this.filterShader),this.filterShader.setUniform("texelSize",yr),this.filterShader.setUniform("canvasSize",[ur.width,ur.height]),this.filterShader.setUniform("radius",Math.max(1,Jt)),Rt.draw(function(){Lt.filterShader.setUniform("direction",[1,0]),Lt.filterShader.setUniform("tex0",ur),Lt._pInst.clear(),Lt._pInst.shader(Lt.filterShader),Lt._pInst.noLights(),Lt._pInst.plane(ur.width,ur.height)}),Vt.draw(function(){Lt.filterShader.setUniform("direction",[0,1]),Lt.filterShader.setUniform("tex0",Rt),Lt._pInst.clear(),Lt._pInst.shader(Lt.filterShader),Lt._pInst.noLights(),Lt._pInst.plane(ur.width,ur.height)}),this._pInst.pop()):Vt.draw(function(){Lt._pInst.noStroke(),Lt._pInst.blendMode(h.BLEND),Lt._pInst.shader(Lt.filterShader),Lt.filterShader.setUniform("tex0",ur),Lt.filterShader.setUniform("texelSize",yr),Lt.filterShader.setUniform("canvasSize",[ur.width,ur.height]),Lt.filterShader.setUniform("filterParameter",Jt),Lt._pInst.noLights(),Lt._pInst.plane(ur.width,ur.height)}),this._pInst.push(),this._pInst.noStroke(),this.clear(),this._pInst.push(),this._pInst.imageMode(h.CORNER),this._pInst.blendMode(h.BLEND),ur.filterCamera._resize(),this._pInst.setCamera(ur.filterCamera),this._pInst.resetMatrix(),this._pInst.image(Vt,-ur.width/2,-ur.height/2,ur.width,ur.height),this._pInst.clearDepth(),this._pInst.pop(),this._pInst.pop()}},{key:"pixelDensity",value:function(vt){return vt?this._pInst.pixelDensity(vt):this._pInst.pixelDensity()}},{key:"blendMode",value:function(vt){vt===h.DARKEST||vt===h.LIGHTEST||vt===h.ADD||vt===h.BLEND||vt===h.SUBTRACT||vt===h.SCREEN||vt===h.EXCLUSION||vt===h.REPLACE||vt===h.MULTIPLY||vt===h.REMOVE?this.curBlendMode=vt:vt!==h.BURN&&vt!==h.OVERLAY&&vt!==h.HARD_LIGHT&&vt!==h.SOFT_LIGHT&&vt!==h.DODGE||console.warn("BURN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, and DODGE only work for blendMode in 2D mode.")}},{key:"erase",value:function(vt,Rt){this._isErasing||(this.preEraseBlend=this.curBlendMode,this._isErasing=!0,this.blendMode(h.REMOVE),this._cachedFillStyle=this.curFillColor.slice(),this.curFillColor=[1,1,1,vt/255],this._cachedStrokeStyle=this.curStrokeColor.slice(),this.curStrokeColor=[1,1,1,Rt/255])}},{key:"noErase",value:function(){this._isErasing&&(this.curFillColor=this._cachedFillStyle.slice(),this.curStrokeColor=this._cachedStrokeStyle.slice(),this.curBlendMode=this.preEraseBlend,this.blendMode(this.preEraseBlend),this._isErasing=!1,this._applyBlendMode())}},{key:"drawTarget",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||this}},{key:"beginClip",value:function(){var vt=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},vt=(me(ft(Zt.prototype),"beginClip",this).call(this,vt),this.drawTarget()._isClipApplied=!0,this.GL);vt.clearStencil(0),vt.clear(vt.STENCIL_BUFFER_BIT),vt.enable(vt.STENCIL_TEST),this._stencilTestOn=!0,vt.stencilFunc(vt.ALWAYS,1,255),vt.stencilOp(vt.KEEP,vt.KEEP,vt.REPLACE),vt.disable(vt.DEPTH_TEST),this._pInst.push(),this._pInst.resetShader(),this._doFill&&this._pInst.fill(0,0),this._doStroke&&this._pInst.stroke(0,0)}},{key:"endClip",value:function(){this._pInst.pop();var vt=this.GL;vt.stencilOp(vt.KEEP,vt.KEEP,vt.KEEP),vt.stencilFunc(this._clipInvert?vt.EQUAL:vt.NOTEQUAL,0,255),vt.enable(vt.DEPTH_TEST),this._clipDepths.push(this._pushPopDepth),me(ft(Zt.prototype),"endClip",this).call(this)}},{key:"_clearClip",value:function(){this.GL.clearStencil(1),this.GL.clear(this.GL.STENCIL_BUFFER_BIT),0<this._clipDepths.length&&this._clipDepths.pop(),this.drawTarget()._isClipApplied=!1}},{key:"strokeWeight",value:function(vt){this.curStrokeWeight!==vt&&(this.pointSize=vt,this.curStrokeWeight=vt)}},{key:"_getPixel",value:function(vt,Rt){var Lt=this.GL;return Ht(Lt,null,vt,Rt,Lt.RGBA,Lt.UNSIGNED_BYTE,this._pInst.height*this._pInst.pixelDensity())}},{key:"loadPixels",value:function(){var vt,Rt,Lt=this._pixelsState;this._pInst._glAttributes.preserveDrawingBuffer!==!0?console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true."):(vt=this._pInst._pixelDensity,Rt=this.GL,Lt._setProperty("pixels",qt(Lt.pixels,Rt,null,0,0,this.width*vt,this.height*vt,Rt.RGBA,Rt.UNSIGNED_BYTE,this.height*vt)))}},{key:"updatePixels",value:function(){var vt=this._getTempFramebuffer();vt.pixels=this._pixelsState.pixels,vt.updatePixels(),this._pInst.push(),this._pInst.resetMatrix(),this._pInst.clear(),this._pInst.imageMode(h.CENTER),this._pInst.image(vt,0,0),this._pInst.pop(),this.GL.clearDepth(1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"_getTempFramebuffer",value:function(){return this._tempFramebuffer||(this._tempFramebuffer=this._pInst.createFramebuffer({format:h.UNSIGNED_BYTE,useDepth:this._pInst._glAttributes.depth,depthFormat:h.UNSIGNED_INT,antialias:this._pInst._glAttributes.antialias})),this._tempFramebuffer}},{key:"geometryInHash",value:function(vt){return this.retainedMode.geometry[vt]!==void 0}},{key:"viewport",value:function(vt,Rt){this._viewport=[0,0,vt,Rt],this.GL.viewport(0,0,vt,Rt)}},{key:"resize",value:function(Jt,Vt){d.default.Renderer.prototype.resize.call(this,Jt,Vt),this._origViewport={width:this.GL.drawingBufferWidth,height:this.GL.drawingBufferHeight},this.viewport(this._origViewport.width,this._origViewport.height),this._curCamera._resize();var Jt=this._pixelsState,Lt=(Jt.pixels!==void 0&&Jt._setProperty("pixels",new Uint8Array(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight*4)),!0),Vt=!1,Jt=void 0;try{for(var er,ur=this.framebuffers[Symbol.iterator]();!(Lt=(er=ur.next()).done);Lt=!0)er.value._canvasSizeChanged()}catch(yr){Vt=!0,Jt=yr}finally{try{Lt||ur.return==null||ur.return()}finally{if(Vt)throw Jt}}}},{key:"clear",value:function(){var vt=(arguments.length<=0?void 0:arguments[0])||0,Rt=(arguments.length<=1?void 0:arguments[1])||0,Lt=(arguments.length<=2?void 0:arguments[2])||0,Vt=(arguments.length<=3?void 0:arguments[3])||0,Jt=this.activeFramebuffer();Jt&&Jt.format===h.UNSIGNED_BYTE&&!Jt.antialias&&Vt===0&&(Vt=1e-10),this.GL.clearColor(vt*Vt,Rt*Vt,Lt*Vt,Vt),this.GL.clearDepth(1),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)}},{key:"clearDepth",value:function(){this.GL.clearDepth(0<arguments.length&&arguments[0]!==void 0?arguments[0]:1),this.GL.clear(this.GL.DEPTH_BUFFER_BIT)}},{key:"applyMatrix",value:function(vt,Rt,Lt,Vt,Jt,er){arguments.length===16?d.default.Matrix.prototype.apply.apply(this.uModelMatrix,arguments):this.uModelMatrix.apply([vt,Rt,0,0,Lt,Vt,0,0,0,0,1,0,Jt,er,0,1])}},{key:"translate",value:function(vt,Rt,Lt){return vt instanceof d.default.Vector&&(Lt=vt.z,Rt=vt.y,vt=vt.x),this.uModelMatrix.translate([vt,Rt,Lt]),this}},{key:"scale",value:function(vt,Rt,Lt){return this.uModelMatrix.scale(vt,Rt,Lt),this}},{key:"rotate",value:function(vt,Rt){return Rt===void 0?this.rotateZ(vt):(d.default.Matrix.prototype.rotate.apply(this.uModelMatrix,arguments),this)}},{key:"rotateX",value:function(vt){return this.rotate(vt,1,0,0),this}},{key:"rotateY",value:function(vt){return this.rotate(vt,0,1,0),this}},{key:"rotateZ",value:function(vt){return this.rotate(vt,0,0,1),this}},{key:"push",value:function(){var vt=d.default.Renderer.prototype.push.apply(this),Rt=vt.properties;return Rt.uModelMatrix=this.uModelMatrix.copy(),Rt.uViewMatrix=this.uViewMatrix.copy(),Rt.uPMatrix=this.uPMatrix.copy(),Rt._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),Rt.ambientLightColors=this.ambientLightColors.slice(),Rt.specularColors=this.specularColors.slice(),Rt.directionalLightDirections=this.directionalLightDirections.slice(),Rt.directionalLightDiffuseColors=this.directionalLightDiffuseColors.slice(),Rt.directionalLightSpecularColors=this.directionalLightSpecularColors.slice(),Rt.pointLightPositions=this.pointLightPositions.slice(),Rt.pointLightDiffuseColors=this.pointLightDiffuseColors.slice(),Rt.pointLightSpecularColors=this.pointLightSpecularColors.slice(),Rt.spotLightPositions=this.spotLightPositions.slice(),Rt.spotLightDirections=this.spotLightDirections.slice(),Rt.spotLightDiffuseColors=this.spotLightDiffuseColors.slice(),Rt.spotLightSpecularColors=this.spotLightSpecularColors.slice(),Rt.spotLightAngle=this.spotLightAngle.slice(),Rt.spotLightConc=this.spotLightConc.slice(),Rt.userFillShader=this.userFillShader,Rt.userStrokeShader=this.userStrokeShader,Rt.userPointShader=this.userPointShader,Rt.pointSize=this.pointSize,Rt.curStrokeWeight=this.curStrokeWeight,Rt.curStrokeColor=this.curStrokeColor,Rt.curFillColor=this.curFillColor,Rt.curAmbientColor=this.curAmbientColor,Rt.curSpecularColor=this.curSpecularColor,Rt.curEmissiveColor=this.curEmissiveColor,Rt._hasSetAmbient=this._hasSetAmbient,Rt._useSpecularMaterial=this._useSpecularMaterial,Rt._useEmissiveMaterial=this._useEmissiveMaterial,Rt._useShininess=this._useShininess,Rt._useMetalness=this._useMetalness,Rt.constantAttenuation=this.constantAttenuation,Rt.linearAttenuation=this.linearAttenuation,Rt.quadraticAttenuation=this.quadraticAttenuation,Rt._enableLighting=this._enableLighting,Rt._useNormalMaterial=this._useNormalMaterial,Rt._tex=this._tex,Rt.drawMode=this.drawMode,Rt._currentNormal=this._currentNormal,Rt.curBlendMode=this.curBlendMode,Rt.activeImageLight=this.activeImageLight,Rt.textureMode=this.textureMode,vt}},{key:"pop",value:function(){var vt;0<this._clipDepths.length&&this._pushPopDepth===this._clipDepths[this._clipDepths.length-1]&&this._clearClip();for(var Rt=arguments.length,Lt=new Array(Rt),Vt=0;Vt<Rt;Vt++)Lt[Vt]=arguments[Vt];(vt=me(ft(Zt.prototype),"pop",this)).call.apply(vt,[this].concat(Lt)),this._applyStencilTestIfClipping()}},{key:"_applyStencilTestIfClipping",value:function(){var vt=this.drawTarget();vt._isClipApplied!==this._stencilTestOn&&(vt._isClipApplied?(this.GL.enable(this.GL.STENCIL_TEST),this._stencilTestOn=!0):(this.GL.disable(this.GL.STENCIL_TEST),this._stencilTestOn=!1))}},{key:"resetMatrix",value:function(){return this.uModelMatrix.reset(),this.uViewMatrix.set(this._curCamera.cameraMatrix),this}},{key:"_getImmediateStrokeShader",value:function(){var vt=this.userStrokeShader;return vt&&vt.isStrokeShader()?vt:this._getLineShader()}},{key:"_getRetainedStrokeShader",value:function(){return this._getImmediateStrokeShader()}},{key:"_getSphereMapping",value:function(vt){return this.sphereMapping||(this.sphereMapping=this._pInst.createFilterShader(Dt)),this.uNMatrix.inverseTranspose(this.uViewMatrix),this.uNMatrix.invert3x3(this.uNMatrix),this.sphereMapping.setUniform("uFovY",this._curCamera.cameraFOV),this.sphereMapping.setUniform("uAspect",this._curCamera.aspectRatio),this.sphereMapping.setUniform("uNewNormalMatrix",this.uNMatrix.mat3),this.sphereMapping.setUniform("uSampler",vt),this.sphereMapping}},{key:"_getImmediateFillShader",value:function(){var vt=this.userFillShader;if(this._useNormalMaterial&&(!vt||!vt.isNormalShader()))return this._getNormalShader();if(this._enableLighting){if(!vt||!vt.isLightShader())return this._getLightShader()}else if(this._tex){if(!vt||!vt.isTextureShader())return this._getLightShader()}else if(!vt)return this._getImmediateModeShader();return vt}},{key:"_getRetainedFillShader",value:function(){if(this._useNormalMaterial)return this._getNormalShader();var vt=this.userFillShader;if(this._enableLighting){if(!vt||!vt.isLightShader())return this._getLightShader()}else if(this._tex){if(!vt||!vt.isTextureShader())return this._getLightShader()}else if(!vt)return this._getColorShader();return vt}},{key:"_getImmediatePointShader",value:function(){var vt=this.userPointShader;return vt&&vt.isPointShader()?vt:this._getPointShader()}},{key:"_getRetainedLineShader",value:function(){return this._getImmediateLineShader()}},{key:"baseMaterialShader",value:function(){if(this._pInst._glAttributes.perPixelLighting)return this._getLightShader();throw new Error("The material shader does not support hooks without perPixelLighting. Try turning it back on.")}},{key:"_getLightShader",value:function(){return this._defaultLightShader||(this._pInst._glAttributes.perPixelLighting?this._defaultLightShader=new d.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+It.phongVert,this._webGL2CompatibilityPrefix("frag","highp")+It.phongFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","Inputs getPixelInputs":"(Inputs inputs) { return inputs; }","vec4 combineColors":`(ColorComponents components) {
                vec4 color = vec4(0.);
                color.rgb += components.diffuse * components.baseColor;
                color.rgb += components.ambient * components.ambientColor;
                color.rgb += components.specular * components.specularColor;
                color.rgb += components.emissive;
                color.a = components.opacity;
                return color;
              }`,"vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}}):this._defaultLightShader=new d.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+It.lightVert,this._webGL2CompatibilityPrefix("frag","highp")+It.lightTextureFrag)),this._defaultLightShader}},{key:"_getImmediateModeShader",value:function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new d.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+It.immediateVert,this._webGL2CompatibilityPrefix("frag","mediump")+It.vertexColorFrag)),this._defaultImmediateModeShader}},{key:"baseNormalShader",value:function(){return this._getNormalShader()}},{key:"_getNormalShader",value:function(){return this._defaultNormalShader||(this._defaultNormalShader=new d.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+It.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+It.normalFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}})),this._defaultNormalShader}},{key:"baseColorShader",value:function(){return this._getColorShader()}},{key:"_getColorShader",value:function(){return this._defaultColorShader||(this._defaultColorShader=new d.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+It.normalVert,this._webGL2CompatibilityPrefix("frag","mediump")+It.basicFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","vec3 getLocalNormal":"(vec3 normal) { return normal; }","vec3 getWorldNormal":"(vec3 normal) { return normal; }","vec2 getUV":"(vec2 uv) { return uv; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","void afterFragment":"() {}"}})),this._defaultColorShader}},{key:"pointShader",value:function(){return this._getPointShader()}},{key:"_getPointShader",value:function(){return this._defaultPointShader||(this._defaultPointShader=new d.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+It.pointVert,this._webGL2CompatibilityPrefix("frag","mediump")+It.pointFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","float getPointSize":"(float size) { return size; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","vec4 getFinalColor":"(vec4 color) { return color; }","bool shouldDiscard":"(bool outside) { return outside; }","void afterFragment":"() {}"}})),this._defaultPointShader}},{key:"baseStrokeShader",value:function(){return this._getLineShader()}},{key:"_getLineShader",value:function(){return this._defaultLineShader||(this._defaultLineShader=new d.default.Shader(this,this._webGL2CompatibilityPrefix("vert","mediump")+It.lineVert,this._webGL2CompatibilityPrefix("frag","mediump")+It.lineFrag,{vertex:{"void beforeVertex":"() {}","vec3 getLocalPosition":"(vec3 position) { return position; }","vec3 getWorldPosition":"(vec3 position) { return position; }","float getStrokeWeight":"(float weight) { return weight; }","vec2 getLineCenter":"(vec2 center) { return center; }","vec2 getLinePosition":"(vec2 position) { return position; }","vec4 getVertexColor":"(vec4 color) { return color; }","void afterVertex":"() {}"},fragment:{"void beforeFragment":"() {}","Inputs getPixelInputs":"(Inputs inputs) { return inputs; }","vec4 getFinalColor":"(vec4 color) { return color; }","bool shouldDiscard":"(bool outside) { return outside; }","void afterFragment":"() {}"}})),this._defaultLineShader}},{key:"_getFontShader",value:function(){return this._defaultFontShader||(this.webglVersion===h.WEBGL&&this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new d.default.Shader(this,this._webGL2CompatibilityPrefix("vert","highp")+It.fontVert,this._webGL2CompatibilityPrefix("frag","highp")+It.fontFrag)),this._defaultFontShader}},{key:"_webGL2CompatibilityPrefix",value:function(vt,Rt){var Lt="";return this.webglVersion===h.WEBGL2&&(Lt+=`#version 300 es
#define WEBGL2
`),vt==="vert"?Lt+=`#define VERTEX_SHADER
`:vt==="frag"&&(Lt+=`#define FRAGMENT_SHADER
`),Rt&&(Lt+="precision ".concat(Rt,` float;
`)),Lt}},{key:"_getEmptyTexture",value:function(){var vt;return this._emptyTexture||((vt=new d.default.Image(1,1)).set(0,0,255),this._emptyTexture=new d.default.Texture(this,vt)),this._emptyTexture}},{key:"getTexture",value:function(vt){vt instanceof d.default.Framebuffer&&(vt=vt.color);var Rt=this.textures.get(vt);return Rt||(Rt=new d.default.Texture(this,vt),this.textures.set(vt,Rt),Rt)}},{key:"getDiffusedTexture",value:function(vt){var Rt,Lt,Vt=this;return this.diffusedTextures.get(vt)!=null?this.diffusedTextures.get(vt):(Rt=Math.floor(vt.height/vt.width*200),Lt=this._pInst.createFramebuffer({width:200,height:Rt,density:1}),this.diffusedShader||(this.diffusedShader=this._pInst.createShader(It.imageLightVert,It.imageLightDiffusedFrag)),Lt.draw(function(){Vt._pInst.shader(Vt.diffusedShader),Vt.diffusedShader.setUniform("environmentMap",vt),Vt._pInst.noStroke(),Vt._pInst.rectMode(h.CENTER),Vt._pInst.noLights(),Vt._pInst.rect(0,0,200,Rt)}),this.diffusedTextures.set(vt,Lt),Lt)}},{key:"getSpecularTexture",value:function(vt){var Rt=this;if(this.specularTextures.get(vt)!=null)return this.specularTextures.get(vt);for(var Lt,Vt=[],Jt=this._pInst.createFramebuffer({width:512,height:512,density:1}),er=Math.log(512)/Math.log(2),ur=(this.specularShader||(this.specularShader=this._pInst.createShader(It.imageLightVert,It.imageLightSpecularFrag)),512);1<=ur;ur/=2)(function(yr){Jt.resize(yr,yr);var Qt=1-Math.log(yr)/Math.log(2)/er;Jt.draw(function(){Rt._pInst.shader(Rt.specularShader),Rt._pInst.clear(),Rt.specularShader.setUniform("environmentMap",vt),Rt.specularShader.setUniform("roughness",Qt),Rt._pInst.noStroke(),Rt._pInst.noLights(),Rt._pInst.plane(yr,yr)}),Vt.push(Jt.get().drawingContext.getImageData(0,0,yr,yr))})(ur);return Jt.remove(),Lt=new b.MipmapTexture(this,Vt,{}),this.specularTextures.set(vt,Lt),Lt}},{key:"activeFramebuffer",value:function(){return this.activeFramebuffers[this.activeFramebuffers.length-1]||null}},{key:"createFramebuffer",value:function(vt){return new d.default.Framebuffer(this,vt)}},{key:"_setStrokeUniforms",value:function(vt){vt.bindShader(),vt.setUniform("uUseLineColor",this._useLineColor),vt.setUniform("uMaterialColor",this.curStrokeColor),vt.setUniform("uStrokeWeight",this.curStrokeWeight),vt.setUniform("uStrokeCap",St[this.curStrokeCap]),vt.setUniform("uStrokeJoin",bt[this.curStrokeJoin])}},{key:"_setFillUniforms",value:function(vt){var Rt=this,Lt=(vt.bindShader(),this.mixedSpecularColor=pe(this.curSpecularColor),0<this._useMetalness&&(this.mixedSpecularColor=this.mixedSpecularColor.map(function(Vt,Jt){return Rt.curFillColor[Jt]*Rt._useMetalness+Vt*(1-Rt._useMetalness)})),vt.setUniform("uUseVertexColor",this._useVertexColor),vt.setUniform("uMaterialColor",this.curFillColor),vt.setUniform("isTexture",!!this._tex),this._tex&&vt.setUniform("uSampler",this._tex),vt.setUniform("uTint",this._tint),vt.setUniform("uHasSetAmbient",this._hasSetAmbient),vt.setUniform("uAmbientMatColor",this.curAmbientColor),vt.setUniform("uSpecularMatColor",this.mixedSpecularColor),vt.setUniform("uEmissiveMatColor",this.curEmissiveColor),vt.setUniform("uSpecular",this._useSpecularMaterial),vt.setUniform("uEmissive",this._useEmissiveMaterial),vt.setUniform("uShininess",this._useShininess),vt.setUniform("uMetallic",this._useMetalness),this._setImageLightUniforms(vt),vt.setUniform("uUseLighting",this._enableLighting),this.pointLightDiffuseColors.length/3),Lt=(vt.setUniform("uPointLightCount",Lt),vt.setUniform("uPointLightLocation",this.pointLightPositions),vt.setUniform("uPointLightDiffuseColors",this.pointLightDiffuseColors),vt.setUniform("uPointLightSpecularColors",this.pointLightSpecularColors),this.directionalLightDiffuseColors.length/3),Lt=(vt.setUniform("uDirectionalLightCount",Lt),vt.setUniform("uLightingDirection",this.directionalLightDirections),vt.setUniform("uDirectionalDiffuseColors",this.directionalLightDiffuseColors),vt.setUniform("uDirectionalSpecularColors",this.directionalLightSpecularColors),this.ambientLightColors.length/3),Lt=(this.mixedAmbientLight=pe(this.ambientLightColors),0<this._useMetalness&&(this.mixedAmbientLight=this.mixedAmbientLight.map(function(Vt){return Vt-=Rt._useMetalness,Math.max(0,Vt)})),vt.setUniform("uAmbientLightCount",Lt),vt.setUniform("uAmbientColor",this.mixedAmbientLight),this.spotLightDiffuseColors.length/3);vt.setUniform("uSpotLightCount",Lt),vt.setUniform("uSpotLightAngle",this.spotLightAngle),vt.setUniform("uSpotLightConc",this.spotLightConc),vt.setUniform("uSpotLightDiffuseColors",this.spotLightDiffuseColors),vt.setUniform("uSpotLightSpecularColors",this.spotLightSpecularColors),vt.setUniform("uSpotLightLocation",this.spotLightPositions),vt.setUniform("uSpotLightDirection",this.spotLightDirections),vt.setUniform("uConstantAttenuation",this.constantAttenuation),vt.setUniform("uLinearAttenuation",this.linearAttenuation),vt.setUniform("uQuadraticAttenuation",this.quadraticAttenuation),vt.bindTextures()}},{key:"_setImageLightUniforms",value:function(vt){var Rt;vt.setUniform("uUseImageLight",this.activeImageLight!=null),this.activeImageLight&&(Rt=this.getDiffusedTexture(this.activeImageLight),vt.setUniform("environmentMapDiffused",Rt),Rt=this.getSpecularTexture(this.activeImageLight),vt.setUniform("environmentMapSpecular",Rt))}},{key:"_setPointUniforms",value:function(vt){vt.bindShader(),vt.setUniform("uMaterialColor",this.curStrokeColor),vt.setUniform("uPointSize",this.pointSize*this._pInst._pixelDensity)}},{key:"_bindBuffer",value:function(vt,Rt,Lt,Vt,Jt){Rt=Rt||this.GL.ARRAY_BUFFER,this.GL.bindBuffer(Rt,vt),Lt!==void 0&&((vt=Lt)instanceof d.default.DataArray?vt=Lt.dataArray():vt instanceof(Vt||Float32Array)||(vt=new(Vt||Float32Array)(vt)),this.GL.bufferData(Rt,vt,Jt||this.GL.STATIC_DRAW))}},{key:"_arraysEqual",value:function(vt,Rt){return vt.length===Rt.length&&vt.every(function(Lt,Vt){return Lt===Rt[Vt]})}},{key:"_isTypedArray",value:function(vt){return[Float32Array,Float64Array,Int16Array,Uint16Array,Uint32Array].some(function(Rt){return vt instanceof Rt})}},{key:"_flatten",value:function(vt){return vt.flat()}},{key:"_vToNArray",value:function(vt){return vt.flatMap(function(Rt){return[Rt.x,Rt.y,Rt.z]})}},{key:"_bezierCoefficients",value:function(vt){var Rt=vt*vt,Lt=1-vt,Vt=Lt*Lt;return[Vt*Lt,3*Vt*vt,3*Lt*Rt,Rt*vt]}},{key:"_quadraticCoefficients",value:function(vt){var Rt=1-vt;return[Rt*Rt,2*Rt*vt,vt*vt]}},{key:"_bezierToCatmull",value:function(vt){return[vt[1],vt[1]+(vt[2]-vt[0])/this._curveTightness,vt[2]-(vt[3]-vt[1])/this._curveTightness,vt[2]]}},{key:"_initTessy",value:function(){var vt=new Be.default.GluTesselator;return vt.gluTessCallback(Be.default.gluEnum.GLU_TESS_VERTEX_DATA,function(Rt,Lt){var Vt=!0,Jt=!1,er=void 0;try{for(var ur,yr=Rt[Symbol.iterator]();!(Vt=(ur=yr.next()).done);Vt=!0){var Qt=ur.value;Lt.push(Qt)}}catch(nr){Jt=!0,er=nr}finally{try{Vt||yr.return==null||yr.return()}finally{if(Jt)throw er}}}),vt.gluTessCallback(Be.default.gluEnum.GLU_TESS_BEGIN,function(Rt){Rt!==Be.default.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: ".concat(Rt))}),vt.gluTessCallback(Be.default.gluEnum.GLU_TESS_ERROR,function(Rt){console.log("error callback"),console.log("error number: ".concat(Rt))}),vt.gluTessCallback(Be.default.gluEnum.GLU_TESS_COMBINE,function(Rt,Lt,Vt){for(var Jt=new Array(d.default.RendererGL.prototype.tessyVertexSize).fill(0),er=0;er<Vt.length;er++)for(var ur=0;ur<Jt.length;ur++)Vt[er]!==0&&Lt[er]&&(Jt[ur]+=Lt[er][ur]*Vt[er]);return Jt}),vt.gluTessCallback(Be.default.gluEnum.GLU_TESS_EDGE_FLAG,function(Rt){}),vt.gluTessProperty(Be.default.gluEnum.GLU_TESS_WINDING_RULE,Be.default.windingRule.GLU_TESS_WINDING_NONZERO),vt}},{key:"_triangulate",value:function(vt){var Rt=vt[0]?vt[0][2]:void 0,Lt=!0,Vt=!0,Qt=!1,or=void 0;try{for(var Jt,er=vt[Symbol.iterator]();!(Vt=(Jt=er.next()).done);Vt=!0)for(var ur=Jt.value,yr=0;yr<ur.length;yr+=d.default.RendererGL.prototype.tessyVertexSize)if(ur[yr+2]!==Rt){Lt=!1;break}}catch(jr){Qt=!0,or=jr}finally{try{Vt||er.return==null||er.return()}finally{if(Qt)throw or}}Lt?this._tessy.gluTessNormal(0,0,1):this._tessy.gluTessNormal(0,0,0);var Qt=[],nr=(this._tessy.gluTessBeginPolygon(Qt),!0),or=!1,Wt=void 0;try{for(var ir,br=vt[Symbol.iterator]();!(nr=(ir=br.next()).done);nr=!0){var Sr=ir.value;this._tessy.gluTessBeginContour();for(var _r=0;_r<Sr.length;_r+=d.default.RendererGL.prototype.tessyVertexSize){var sr=Sr.slice(_r,_r+d.default.RendererGL.prototype.tessyVertexSize);this._tessy.gluTessVertex(sr,sr)}this._tessy.gluTessEndContour()}}catch(jr){or=!0,Wt=jr}finally{try{nr||br.return==null||br.return()}finally{if(or)throw Wt}}return this._tessy.gluTessEndPolygon(),Qt}}])&&Ye(Ut.prototype,Gt),Zt}(d.default.Renderer),d.default.prototype._assert3d=function(Gt){if(!this._renderer.isP3D)throw new Error("".concat(Gt,"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information."))},d.default.RendererGL.prototype.tessyVertexSize=12,Et=d.default.RendererGL,u.default=Et},{"../core/constants":272,"../core/main":283,"../core/p5.Renderer":286,"./GeometryBuilder":327,"./p5.Camera":332,"./p5.Framebuffer":334,"./p5.Matrix":336,"./p5.Shader":342,"./p5.Texture":343,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.copy-within":154,"core-js/modules/es.array.every":155,"core-js/modules/es.array.fill":156,"core-js/modules/es.array.flat":160,"core-js/modules/es.array.flat-map":159,"core-js/modules/es.array.from":162,"core-js/modules/es.array.includes":163,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.map":168,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.array.unscopables.flat":173,"core-js/modules/es.array.unscopables.flat-map":172,"core-js/modules/es.map":175,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.reflect.get":193,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.set":197,"core-js/modules/es.string.includes":199,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.float32-array":219,"core-js/modules/es.typed-array.float64-array":220,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.int16-array":224,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint16-array":240,"core-js/modules/es.typed-array.uint32-array":241,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246,libtess:255,path:258}],342:[function(t,l,u){t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.concat"),t("core-js/modules/es.array.index-of"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.slice"),t("core-js/modules/es.array.some"),t("core-js/modules/es.function.name"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var s=(t=t("../core/main"))&&t.__esModule?t:{default:t};function p(h,N){return function(Be){if(Array.isArray(Be))return Be}(h)||function(Be,b){if(Symbol.iterator in Object(Be)||Object.prototype.toString.call(Be)==="[object Arguments]"){var E=[],de=!0,pe=!1,Ye=void 0;try{for(var me,Le=Be[Symbol.iterator]();!(de=(me=Le.next()).done)&&(E.push(me.value),!b||E.length!==b);de=!0);}catch(nt){pe=!0,Ye=nt}finally{try{de||Le.return==null||Le.return()}finally{if(pe)throw Ye}}return E}}(h,N)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(h,N){for(var Be=0;Be<N.length;Be++){var b=N[Be];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(h,b.key,b)}}s.default.Shader=function(){function h(b,E,de){var pe=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},Ye=this,me=h;if(!(Ye instanceof me))throw new TypeError("Cannot call a class as a function");this._renderer=b,this._vertSrc=E,this._fragSrc=de,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[],this.hooks={uniforms:pe.uniforms||{},declarations:pe.declarations,helpers:pe.helpers||{},vertex:pe.vertex||{},fragment:pe.fragment||{},modified:{vertex:pe.modified&&pe.modified.vertex||{},fragment:pe.modified&&pe.modified.fragment||{}}}}var N,Be;return N=h,(Be=[{key:"shaderSrc",value:function(tt,E){var de,pe,Ye,me,Le,tt=p(tt.split("void main"),2),nt=tt[0],tt=tt[1],ft="";for(de in this.hooks.uniforms)ft+="uniform ".concat(de,`;
`);for(pe in this.hooks.declarations&&(ft+=this.hooks.declarations+`
`),this.hooks[E].declarations&&(ft+=this.hooks[E].declarations+`
`),this.hooks.helpers)ft+="".concat(pe).concat(this.hooks.helpers[pe],`
`);for(Ye in this.hooks[E])Ye!=="declarations"&&(me=(Le=p(Ye.split(" "),2))[0],Le=Le[1],this.hooks.modified[E][Ye]&&(ft+="#define AUGMENTED_HOOK_"+Le+`
`),ft+=me+" HOOK_"+Le+this.hooks[E][Ye]+`
`);return nt+ft+"void main"+tt}},{key:"version",value:function(){var b=/#version (.+)$/.exec(this.vertSrc());return b?b[1]:"100 es"}},{key:"vertSrc",value:function(){return this.shaderSrc(this._vertSrc,"vertex")}},{key:"fragSrc",value:function(){return this.shaderSrc(this._fragSrc,"fragment")}},{key:"inspectHooks",value:function(){for(var b in console.log("==== Vertex shader hooks: ===="),this.hooks.vertex)console.log((this.hooks.modified.vertex[b]?"[MODIFIED] ":"")+b+this.hooks.vertex[b]);for(var E in console.log(""),console.log("==== Fragment shader hooks: ===="),this.hooks.fragment)console.log((this.hooks.modified.fragment[E]?"[MODIFIED] ":"")+E+this.hooks.fragment[E]);for(var de in console.log(""),console.log("==== Helper functions: ===="),this.hooks.helpers)console.log(de+this.hooks.helpers[de])}},{key:"modify",value:function(b){s.default._validateParameters("p5.Shader.modify",arguments);var E,de={vertex:{},fragment:{},helpers:{}};for(E in b)E!=="declarations"&&E!=="uniforms"&&(E==="vertexDeclarations"?de.vertex.declarations=(de.vertex.declarations||"")+`
`+b[E]:E==="fragmentDeclarations"?de.fragment.declarations=(de.fragment.declarations||"")+`
`+b[E]:this.hooks.vertex[E]?de.vertex[E]=b[E]:this.hooks.fragment[E]?de.fragment[E]=b[E]:de.helpers[E]=b[E]);var pe,Ye,me=Object.assign({},this.hooks.modified.vertex),Le=Object.assign({},this.hooks.modified.fragment);for(pe in de.vertex||{})pe!=="declarations"&&(me[pe]=!0);for(Ye in de.fragment||{})Ye!=="declarations"&&(Le[Ye]=!0);return new s.default.Shader(this._renderer,this._vertSrc,this._fragSrc,{declarations:(this.hooks.declarations||"")+`
`+(b.declarations||""),uniforms:Object.assign({},this.hooks.uniforms,b.uniforms||{}),fragment:Object.assign({},this.hooks.fragment,de.fragment||{}),vertex:Object.assign({},this.hooks.vertex,de.vertex||{}),helpers:Object.assign({},this.hooks.helpers,de.helpers||{}),modified:{vertex:me,fragment:Le}})}},{key:"init",value:function(){if(this._glProgram===0){var b,E=this._renderer.GL;if(this._vertShader=E.createShader(E.VERTEX_SHADER),E.shaderSource(this._vertShader,this.vertSrc()),E.compileShader(this._vertShader),!E.getShaderParameter(this._vertShader,E.COMPILE_STATUS))return b=E.getShaderInfoLog(this._vertShader),console.error(b),null;if(this._fragShader=E.createShader(E.FRAGMENT_SHADER),E.shaderSource(this._fragShader,this.fragSrc()),E.compileShader(this._fragShader),!E.getShaderParameter(this._fragShader,E.COMPILE_STATUS))return b=E.getShaderInfoLog(this._fragShader),console.error(b),null;this._glProgram=E.createProgram(),E.attachShader(this._glProgram,this._vertShader),E.attachShader(this._glProgram,this._fragShader),E.linkProgram(this._glProgram),E.getProgramParameter(this._glProgram,E.LINK_STATUS)||s.default._friendlyError("Snap! Error linking shader program: ".concat(E.getProgramInfoLog(this._glProgram))),this._loadAttributes(),this._loadUniforms()}return this}},{key:"setDefaultUniforms",value:function(){for(var b in this.hooks.uniforms){var E=p(b.split(" "),2)[1],b=this.hooks.uniforms[b],de=void 0;(de=b instanceof Function?b():b)!=null&&this.setUniform(E,de)}}},{key:"copyToContext",value:function(b){var E=new s.default.Shader(b._renderer,this._vertSrc,this._fragSrc);return E.ensureCompiledOnContext(b),E}},{key:"ensureCompiledOnContext",value:function(b){if(this._glProgram!==0&&this._renderer!==b._renderer)throw new Error("The shader being run is attached to a different context. Do you need to copy it to this context first with .copyToContext()?");this._glProgram===0&&(this._renderer=b._renderer,this.init())}},{key:"_loadAttributes",value:function(){if(!this._loadedAttributes){this.attributes={};for(var b=this._renderer.GL,E=b.getProgramParameter(this._glProgram,b.ACTIVE_ATTRIBUTES),de=0;de<E;++de){var pe=b.getActiveAttrib(this._glProgram,de),Ye=pe.name,me=b.getAttribLocation(this._glProgram,Ye),Le={};Le.name=Ye,Le.location=me,Le.index=de,Le.type=pe.type,Le.size=pe.size,this.attributes[Ye]=Le}this._loadedAttributes=!0}}},{key:"_loadUniforms",value:function(){if(!this._loadedUniforms){for(var b=this._renderer.GL,E=b.getProgramParameter(this._glProgram,b.ACTIVE_UNIFORMS),de=0,pe=0;pe<E;++pe){var Ye=b.getActiveUniform(this._glProgram,pe),me={},Le=(me.location=b.getUniformLocation(this._glProgram,Ye.name),me.size=Ye.size,Ye.name);1<Ye.size&&(Le=Le.substring(0,Le.indexOf("[0]"))),me.name=Le,me.type=Ye.type,me._cachedData=void 0,me.type===b.SAMPLER_2D&&(me.samplerIndex=de,de++,this.samplers.push(me)),me.isArray=1<Ye.size||me.type===b.FLOAT_MAT3||me.type===b.FLOAT_MAT4||me.type===b.FLOAT_VEC2||me.type===b.FLOAT_VEC3||me.type===b.FLOAT_VEC4||me.type===b.INT_VEC2||me.type===b.INT_VEC4||me.type===b.INT_VEC3,this.uniforms[Le]=me}this._loadedUniforms=!0}}},{key:"compile",value:function(){}},{key:"bindShader",value:function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this._setMatrixUniforms(),this.setUniform("uViewport",this._renderer._viewport))}},{key:"unbindShader",value:function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this}},{key:"bindTextures",value:function(){var b=this._renderer.GL,E=!0,de=!1,pe=void 0;try{for(var Ye,me=this.samplers[Symbol.iterator]();!(E=(Ye=me.next()).done);E=!0){var Le=Ye.value,nt=Le.texture;nt===void 0&&(nt=this._renderer._getEmptyTexture()),b.activeTexture(b.TEXTURE0+Le.samplerIndex),nt.bindTexture(),nt.update(),b.uniform1i(Le.location,Le.samplerIndex)}}catch(tt){de=!0,pe=tt}finally{try{E||me.return==null||me.return()}finally{if(de)throw pe}}}},{key:"updateTextures",value:function(){var b=!0,E=!1,de=void 0;try{for(var pe,Ye=this.samplers[Symbol.iterator]();!(b=(pe=Ye.next()).done);b=!0){var me=pe.value.texture;me&&me.update()}}catch(Le){E=!0,de=Le}finally{try{b||Ye.return==null||Ye.return()}finally{if(E)throw de}}}},{key:"unbindTextures",value:function(){var b=!0,E=!1,de=void 0;try{for(var pe,Ye=this.samplers[Symbol.iterator]();!(b=(pe=Ye.next()).done);b=!0){var me=pe.value;this.setUniform(me.name,this._renderer._getEmptyTexture())}}catch(Le){E=!0,de=Le}finally{try{b||Ye.return==null||Ye.return()}finally{if(E)throw de}}}},{key:"_setMatrixUniforms",value:function(){var b=this._renderer.uModelMatrix,E=this._renderer.uViewMatrix,de=this._renderer.uPMatrix,pe=b.copy().mult(E),Ye=(this._renderer.uMVMatrix=pe).copy();Ye.mult(de),this.isStrokeShader()&&this.setUniform("uPerspective",this._renderer._curCamera.useLinePerspective?1:0),this.setUniform("uViewMatrix",E.mat4),this.setUniform("uProjectionMatrix",de.mat4),this.setUniform("uModelMatrix",b.mat4),this.setUniform("uModelViewMatrix",pe.mat4),this.setUniform("uModelViewProjectionMatrix",Ye.mat4),this.uniforms.uNormalMatrix&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3)),this.uniforms.uCameraRotation&&(this._renderer.curMatrix.inverseTranspose(this._renderer.uViewMatrix),this.setUniform("uCameraRotation",this._renderer.curMatrix.mat3))}},{key:"useProgram",value:function(){var b=this._renderer.GL;return this._renderer._curShader!==this&&(b.useProgram(this._glProgram),this._renderer._curShader=this),this}},{key:"setUniform",value:function(b,E){var de=this.uniforms[b];if(de){var pe=this._renderer.GL;if(de.isArray){if(de._cachedData&&this._renderer._arraysEqual(de._cachedData,E))return;de._cachedData=E.slice(0)}else{if(de._cachedData&&de._cachedData===E)return;Array.isArray(E)?de._cachedData=E.slice(0):de._cachedData=E}var Ye=de.location;switch(this.useProgram(),de.type){case pe.BOOL:E===!0?pe.uniform1i(Ye,1):pe.uniform1i(Ye,0);break;case pe.INT:1<de.size?E.length&&pe.uniform1iv(Ye,E):pe.uniform1i(Ye,E);break;case pe.FLOAT:1<de.size?E.length&&pe.uniform1fv(Ye,E):pe.uniform1f(Ye,E);break;case pe.FLOAT_MAT3:pe.uniformMatrix3fv(Ye,!1,E);break;case pe.FLOAT_MAT4:pe.uniformMatrix4fv(Ye,!1,E);break;case pe.FLOAT_VEC2:1<de.size?E.length&&pe.uniform2fv(Ye,E):pe.uniform2f(Ye,E[0],E[1]);break;case pe.FLOAT_VEC3:1<de.size?E.length&&pe.uniform3fv(Ye,E):pe.uniform3f(Ye,E[0],E[1],E[2]);break;case pe.FLOAT_VEC4:1<de.size?E.length&&pe.uniform4fv(Ye,E):pe.uniform4f(Ye,E[0],E[1],E[2],E[3]);break;case pe.INT_VEC2:1<de.size?E.length&&pe.uniform2iv(Ye,E):pe.uniform2i(Ye,E[0],E[1]);break;case pe.INT_VEC3:1<de.size?E.length&&pe.uniform3iv(Ye,E):pe.uniform3i(Ye,E[0],E[1],E[2]);break;case pe.INT_VEC4:1<de.size?E.length&&pe.uniform4iv(Ye,E):pe.uniform4i(Ye,E[0],E[1],E[2],E[3]);break;case pe.SAMPLER_2D:if(typeof E=="number"){if(E<pe.TEXTURE0||E>pe.TEXTURE31||E!==Math.ceil(E))return console.log(" p5.js says: You're trying to use a number as the data for a texture.Please use a texture."),this;pe.activeTexture(E),pe.uniform1i(Ye,E)}else pe.activeTexture(pe.TEXTURE0+de.samplerIndex),de.texture=E instanceof s.default.Texture?E:this._renderer.getTexture(E),pe.uniform1i(Ye,de.samplerIndex),de.texture.src.gifProperties&&de.texture.src._animateGif(this._renderer._pInst);break;case pe.SAMPLER_CUBE:case pe.SAMPLER_3D:case pe.SAMPLER_2D_SHADOW:case pe.SAMPLER_2D_ARRAY:case pe.SAMPLER_2D_ARRAY_SHADOW:case pe.SAMPLER_CUBE_SHADOW:case pe.INT_SAMPLER_2D:case pe.INT_SAMPLER_3D:case pe.INT_SAMPLER_CUBE:case pe.INT_SAMPLER_2D_ARRAY:case pe.UNSIGNED_INT_SAMPLER_2D:case pe.UNSIGNED_INT_SAMPLER_3D:case pe.UNSIGNED_INT_SAMPLER_CUBE:case pe.UNSIGNED_INT_SAMPLER_2D_ARRAY:typeof E=="number"&&(E<pe.TEXTURE0||E>pe.TEXTURE31||E!==Math.ceil(E)?console.log(" p5.js says: You're trying to use a number as the data for a texture.Please use a texture."):(pe.activeTexture(E),pe.uniform1i(Ye,E)))}return this}}},{key:"isLightShader",value:function(){return[this.attributes.aNormal,this.uniforms.uUseLighting,this.uniforms.uAmbientLightCount,this.uniforms.uDirectionalLightCount,this.uniforms.uPointLightCount,this.uniforms.uAmbientColor,this.uniforms.uDirectionalDiffuseColors,this.uniforms.uDirectionalSpecularColors,this.uniforms.uPointLightLocation,this.uniforms.uPointLightDiffuseColors,this.uniforms.uPointLightSpecularColors,this.uniforms.uLightingDirection,this.uniforms.uSpecular].some(function(b){return b!==void 0})}},{key:"isNormalShader",value:function(){return this.attributes.aNormal!==void 0}},{key:"isTextureShader",value:function(){return 0<this.samplers.length}},{key:"isColorShader",value:function(){return this.attributes.aVertexColor!==void 0||this.uniforms.uMaterialColor!==void 0}},{key:"isTexLightShader",value:function(){return this.isLightShader()&&this.isTextureShader()}},{key:"isStrokeShader",value:function(){return this.uniforms.uStrokeWeight!==void 0}},{key:"enableAttrib",value:function(b,E,de,pe,Ye,me){var Le;return b&&(b=b.location)!==-1&&(Le=this._renderer.GL,this._renderer.registerEnabled.has(b)||(Le.enableVertexAttribArray(b),this._renderer.registerEnabled.add(b)),this._renderer.GL.vertexAttribPointer(b,E,de||Le.FLOAT,pe||!1,Ye||0,me||0)),this}},{key:"disableRemainingAttributes",value:function(){var b=this,E=!0,de=!1,pe=void 0;try{for(var Ye,me=this._renderer.registerEnabled.values()[Symbol.iterator]();!(E=(Ye=me.next()).done);E=!0)(function(){var Le=Ye.value;Object.keys(b.attributes).some(function(nt){return b.attributes[nt].location===Le})||(b._renderer.GL.disableVertexAttribArray(Le),b._renderer.registerEnabled.delete(Le))})()}catch(Le){de=!0,pe=Le}finally{try{E||me.return==null||me.return()}finally{if(de)throw pe}}}}])&&d(N.prototype,Be),h}(),t=s.default.Shader,u.default=t},{"../core/main":283,"core-js/modules/es.array.concat":153,"core-js/modules/es.array.index-of":164,"core-js/modules/es.array.iterator":165,"core-js/modules/es.array.slice":169,"core-js/modules/es.array.some":170,"core-js/modules/es.function.name":174,"core-js/modules/es.object.assign":183,"core-js/modules/es.object.keys":189,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/web.dom-collections.iterator":246}],343:[function(t,l,u){function s(nt){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(tt){return typeof tt}:function(tt){return tt&&typeof Symbol=="function"&&tt.constructor===Symbol&&tt!==Symbol.prototype?"symbol":typeof tt})(nt)}function p(nt){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(tt){return s(tt)}:function(tt){return tt&&typeof Symbol=="function"&&tt.constructor===Symbol&&tt!==Symbol.prototype?"symbol":s(tt)})(nt)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.get-prototype-of"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.reflect.construct"),t("core-js/modules/es.regexp.to-string"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.typed-array.uint8-array"),t("core-js/modules/es.typed-array.copy-within"),t("core-js/modules/es.typed-array.every"),t("core-js/modules/es.typed-array.fill"),t("core-js/modules/es.typed-array.filter"),t("core-js/modules/es.typed-array.find"),t("core-js/modules/es.typed-array.find-index"),t("core-js/modules/es.typed-array.for-each"),t("core-js/modules/es.typed-array.includes"),t("core-js/modules/es.typed-array.index-of"),t("core-js/modules/es.typed-array.iterator"),t("core-js/modules/es.typed-array.join"),t("core-js/modules/es.typed-array.last-index-of"),t("core-js/modules/es.typed-array.map"),t("core-js/modules/es.typed-array.reduce"),t("core-js/modules/es.typed-array.reduce-right"),t("core-js/modules/es.typed-array.reverse"),t("core-js/modules/es.typed-array.set"),t("core-js/modules/es.typed-array.slice"),t("core-js/modules/es.typed-array.some"),t("core-js/modules/es.typed-array.sort"),t("core-js/modules/es.typed-array.subarray"),t("core-js/modules/es.typed-array.to-locale-string"),t("core-js/modules/es.typed-array.to-string"),Object.defineProperty(u,"__esModule",{value:!0}),u.checkWebGLCapabilities=Le,u.default=u.MipmapTexture=void 0;var d=(me=t("../core/main"))&&me.__esModule?me:{default:me},h=function(nt){if(nt&&nt.__esModule)return nt;if(nt===null||p(nt)!=="object"&&typeof nt!="function")return{default:nt};var tt=N();if(tt&&tt.has(nt))return tt.get(nt);var ft,yt={},gt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(ft in nt){var mt;Object.prototype.hasOwnProperty.call(nt,ft)&&((mt=gt?Object.getOwnPropertyDescriptor(nt,ft):null)&&(mt.get||mt.set)?Object.defineProperty(yt,ft,mt):yt[ft]=nt[ft])}return yt.default=nt,tt&&tt.set(nt,yt),yt}(t("../core/constants"));function N(){var nt;return typeof WeakMap!="function"?null:(nt=new WeakMap,N=function(){return nt},nt)}function Be(nt,tt){return(Be=Object.setPrototypeOf||function(ft,yt){return ft.__proto__=yt,ft})(nt,tt)}function b(nt){return function(){var tt,ft=E(nt),ft=(tt=function(){if(typeof Reflect<"u"&&Reflect.construct&&!Reflect.construct.sham){if(typeof Proxy=="function")return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch{}}}()?(tt=E(this).constructor,Reflect.construct(ft,arguments,tt)):ft.apply(this,arguments),this);if(!tt||p(tt)!=="object"&&typeof tt!="function"){if(ft!==void 0)return ft;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return tt}}function E(nt){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(tt){return tt.__proto__||Object.getPrototypeOf(tt)})(nt)}function de(nt,tt){if(!(nt instanceof tt))throw new TypeError("Cannot call a class as a function")}function pe(nt,tt){for(var ft=0;ft<tt.length;ft++){var yt=tt[ft];yt.enumerable=yt.enumerable||!1,yt.configurable=!0,"value"in yt&&(yt.writable=!0),Object.defineProperty(nt,yt.key,yt)}}function Ye(nt,tt,ft){tt&&pe(nt.prototype,tt)}d.default.Texture=function(){function nt(wt,ft,mt){de(this,nt),this._renderer=wt;var gt=this._renderer.GL,mt=(mt=mt||{},this.src=ft,this.glTex=void 0,this.glTarget=gt.TEXTURE_2D,this.glFormat=mt.format||gt.RGBA,this.mipmaps=!1,this.glMinFilter=mt.minFilter||gt.LINEAR,this.glMagFilter=mt.magFilter||gt.LINEAR,this.glWrapS=mt.wrapS||gt.CLAMP_TO_EDGE,this.glWrapT=mt.wrapT||gt.CLAMP_TO_EDGE,this.glDataType=mt.dataType||gt.UNSIGNED_BYTE,Le(wt)),wt=(this.glFormat!==gt.HALF_FLOAT||mt.halfFloat||(console.log("This device does not support dataType HALF_FLOAT. Falling back to FLOAT."),this.glDataType=gt.FLOAT),this.glFormat!==gt.HALF_FLOAT||this.glMinFilter!==gt.LINEAR&&this.glMagFilter!==gt.LINEAR||mt.halfFloatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===gt.LINEAR&&(this.glMinFilter=gt.NEAREST),this.glMagFilter===gt.LINEAR&&(this.glMagFilter=gt.NEAREST)),this.glFormat!==gt.FLOAT||mt.float||(console.log("This device does not support dataType FLOAT. Falling back to UNSIGNED_BYTE."),this.glDataType=gt.UNSIGNED_BYTE),this.glFormat!==gt.FLOAT||this.glMinFilter!==gt.LINEAR&&this.glMagFilter!==gt.LINEAR||mt.floatLinear||(console.log("This device does not support linear filtering for dataType FLOAT. Falling back to NEAREST."),this.glMinFilter===gt.LINEAR&&(this.glMinFilter=gt.NEAREST),this.glMagFilter===gt.LINEAR&&(this.glMagFilter=gt.NEAREST)),this.isSrcMediaElement=d.default.MediaElement!==void 0&&ft instanceof d.default.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=d.default.Element!==void 0&&ft instanceof d.default.Element&&!(ft instanceof d.default.Graphics)&&!(ft instanceof d.default.Renderer),this.isSrcP5Image=ft instanceof d.default.Image,this.isSrcP5Graphics=ft instanceof d.default.Graphics,this.isSrcP5Renderer=ft instanceof d.default.Renderer,this.isImageData=typeof ImageData<"u"&&ft instanceof ImageData,this.isFramebufferTexture=ft instanceof d.default.FramebufferTexture,this._getTextureDataFromSource());return this.width=wt.width,this.height=wt.height,this.init(wt),this}return Ye(nt,[{key:"_getTextureDataFromSource",value:function(){var tt;return this.isFramebufferTexture?tt=this.src.rawTexture():this.isSrcP5Image?tt=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcP5Renderer||this.isSrcHTMLElement?(this.src._ensureCanvas&&this.src._ensureCanvas(),tt=this.src.canvas||this.src.elt):this.isImageData&&(tt=this.src),tt}},{key:"init",value:function(tt){var ft,yt=this._renderer.GL;this.isFramebufferTexture||(this.glTex=yt.createTexture()),this.glWrapS=this._renderer.textureWrapX,this.glWrapT=this._renderer.textureWrapY,this.setWrapMode(this.glWrapS,this.glWrapT),this.bindTexture(),yt.texParameteri(yt.TEXTURE_2D,yt.TEXTURE_MAG_FILTER,this.glMagFilter),yt.texParameteri(yt.TEXTURE_2D,yt.TEXTURE_MIN_FILTER,this.glMinFilter),this.isFramebufferTexture||(this.width===0||this.height===0||this.isSrcMediaElement&&!this.src.loadedmetadata?(ft=new Uint8Array([1,1,1,1]),yt.texImage2D(this.glTarget,0,yt.RGBA,1,1,0,this.glFormat,this.glDataType,ft)):yt.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,tt))}},{key:"update",value:function(){var tt,ft,yt,gt=this.src;return gt.width!==0&&gt.height!==0&&!this.isFramebufferTexture&&(tt=this._getTextureDataFromSource(),ft=!1,yt=this._renderer.GL,tt.width!==this.width||tt.height!==this.height?(ft=!0,this.width=tt.width||gt.width,this.height=tt.height||gt.height,this.isSrcP5Image?gt.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&gt.setModified(!0)):this.isSrcP5Image?gt.isModified()&&gt.setModified(!(ft=!0)):this.isSrcMediaElement?gt.isModified()?gt.setModified(!(ft=!0)):gt.loadedmetadata&&this._videoPrevUpdateTime!==gt.time()&&(this._videoPrevUpdateTime=gt.time(),ft=!0):this.isImageData?gt._dirty&&(ft=!(gt._dirty=!1)):ft=!0,ft&&(this.bindTexture(),yt.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,this.glDataType,tt)),ft)}},{key:"bindTexture",value:function(){return this._renderer.GL.bindTexture(this.glTarget,this.getTexture()),this}},{key:"unbindTexture",value:function(){this._renderer.GL.bindTexture(this.glTarget,null)}},{key:"getTexture",value:function(){return this.isFramebufferTexture?this.src.rawTexture():this.glTex}},{key:"setInterpolation",value:function(tt,ft){var yt=this._renderer.GL;this.glMinFilter=this.glFilter(tt),this.glMagFilter=this.glFilter(ft),this.bindTexture(),yt.texParameteri(yt.TEXTURE_2D,yt.TEXTURE_MIN_FILTER,this.glMinFilter),yt.texParameteri(yt.TEXTURE_2D,yt.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()}},{key:"glFilter",value:function(tt){var ft=this._renderer.GL;return tt===h.NEAREST?ft.NEAREST:ft.LINEAR}},{key:"setWrapMode",value:function(tt,ft){function yt(St){return(St&St-1)==0}var gt=this._renderer.GL,wt=this._getTextureDataFromSource(),wt=wt.naturalWidth&&wt.naturalHeight?(mt=wt.naturalWidth,wt.naturalHeight):(mt=this.width,this.height),mt=yt(mt),wt=yt(wt);tt===h.REPEAT?this._renderer.webglVersion===h.WEBGL2||mt&&wt?this.glWrapS=gt.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=gt.CLAMP_TO_EDGE):tt===h.MIRROR?this._renderer.webglVersion===h.WEBGL2||mt&&wt?this.glWrapS=gt.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=gt.CLAMP_TO_EDGE):this.glWrapS=gt.CLAMP_TO_EDGE,ft===h.REPEAT?this._renderer.webglVersion===h.WEBGL2||mt&&wt?this.glWrapT=gt.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=gt.CLAMP_TO_EDGE):ft===h.MIRROR?this._renderer.webglVersion===h.WEBGL2||mt&&wt?this.glWrapT=gt.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=gt.CLAMP_TO_EDGE):this.glWrapT=gt.CLAMP_TO_EDGE,this.bindTexture(),gt.texParameteri(gt.TEXTURE_2D,gt.TEXTURE_WRAP_S,this.glWrapS),gt.texParameteri(gt.TEXTURE_2D,gt.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()}}]),nt}();var me=function(nt){var tt=yt;if(typeof nt!="function"&&nt!==null)throw new TypeError("Super expression must either be null or a function");tt.prototype=Object.create(nt&&nt.prototype,{constructor:{value:tt,writable:!0,configurable:!0}}),nt&&Be(tt,nt);var ft=b(yt);function yt(gt,mt,wt){return de(this,yt),mt=(gt=ft.call(this,gt,mt,wt))._renderer.GL,gt.glMinFilter===mt.LINEAR&&(gt.glMinFilter=mt.LINEAR_MIPMAP_LINEAR),gt}return Ye(yt,[{key:"glFilter",value:function(gt){return this._renderer.GL.LINEAR_MIPMAP_LINEAR}},{key:"_getTextureDataFromSource",value:function(){return this.src}},{key:"init",value:function(gt){var mt=this._renderer.GL;this.glTex=mt.createTexture(),this.bindTexture();for(var wt=0;wt<gt.length;wt++)mt.texImage2D(this.glTarget,wt,this.glFormat,this.glFormat,this.glDataType,gt[wt]);this.glMinFilter=mt.LINEAR_MIPMAP_LINEAR,mt.texParameteri(mt.TEXTURE_2D,mt.TEXTURE_MAG_FILTER,this.glMagFilter),mt.texParameteri(mt.TEXTURE_2D,mt.TEXTURE_MIN_FILTER,this.glMinFilter),this.unbindTexture()}},{key:"update",value:function(){}}]),yt}(d.default.Texture);function Le(gt){var tt=gt.GL,gt=gt.webglVersion,ft=gt===h.WEBGL2?tt.getExtension("EXT_color_buffer_float")&&tt.getExtension("EXT_float_blend"):tt.getExtension("OES_texture_float"),yt=ft&&tt.getExtension("OES_texture_float_linear"),gt=gt===h.WEBGL2?tt.getExtension("EXT_color_buffer_float"):tt.getExtension("OES_texture_half_float");return{float:ft,floatLinear:yt,halfFloat:gt,halfFloatLinear:gt&&tt.getExtension("OES_texture_half_float_linear")}}u.MipmapTexture=me,t=d.default.Texture,u.default=t},{"../core/constants":272,"../core/main":283,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.get-prototype-of":188,"core-js/modules/es.object.to-string":190,"core-js/modules/es.reflect.construct":192,"core-js/modules/es.regexp.to-string":196,"core-js/modules/es.string.iterator":200,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.typed-array.copy-within":213,"core-js/modules/es.typed-array.every":214,"core-js/modules/es.typed-array.fill":215,"core-js/modules/es.typed-array.filter":216,"core-js/modules/es.typed-array.find":218,"core-js/modules/es.typed-array.find-index":217,"core-js/modules/es.typed-array.for-each":221,"core-js/modules/es.typed-array.includes":222,"core-js/modules/es.typed-array.index-of":223,"core-js/modules/es.typed-array.iterator":226,"core-js/modules/es.typed-array.join":227,"core-js/modules/es.typed-array.last-index-of":228,"core-js/modules/es.typed-array.map":229,"core-js/modules/es.typed-array.reduce":231,"core-js/modules/es.typed-array.reduce-right":230,"core-js/modules/es.typed-array.reverse":232,"core-js/modules/es.typed-array.set":233,"core-js/modules/es.typed-array.slice":234,"core-js/modules/es.typed-array.some":235,"core-js/modules/es.typed-array.sort":236,"core-js/modules/es.typed-array.subarray":237,"core-js/modules/es.typed-array.to-locale-string":238,"core-js/modules/es.typed-array.to-string":239,"core-js/modules/es.typed-array.uint8-array":242,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}],344:[function(t,l,u){function s(nt){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(tt){return typeof tt}:function(tt){return tt&&typeof Symbol=="function"&&tt.constructor===Symbol&&tt!==Symbol.prototype?"symbol":typeof tt})(nt)}function p(nt){return(p=typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?function(tt){return s(tt)}:function(tt){return tt&&typeof Symbol=="function"&&tt.constructor===Symbol&&tt!==Symbol.prototype?"symbol":s(tt)})(nt)}t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.get-own-property-descriptor"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/es.weak-map"),t("core-js/modules/web.dom-collections.iterator"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.description"),t("core-js/modules/es.symbol.iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.object.to-string"),t("core-js/modules/es.regexp.exec"),t("core-js/modules/es.string.iterator"),t("core-js/modules/es.string.split"),t("core-js/modules/es.string.sub"),t("core-js/modules/web.dom-collections.iterator");var d,h=(d=t("../core/main"))&&d.__esModule?d:{default:d},N=function(nt){if(nt&&nt.__esModule)return nt;if(nt===null||p(nt)!=="object"&&typeof nt!="function")return{default:nt};var tt=Be();if(tt&&tt.has(nt))return tt.get(nt);var ft,yt={},gt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(ft in nt){var mt;Object.prototype.hasOwnProperty.call(nt,ft)&&((mt=gt?Object.getOwnPropertyDescriptor(nt,ft):null)&&(mt.get||mt.set)?Object.defineProperty(yt,ft,mt):yt[ft]=nt[ft])}return yt.default=nt,tt&&tt.set(nt,yt),yt}(t("../core/constants"));function Be(){var nt;return typeof WeakMap!="function"?null:(nt=new WeakMap,Be=function(){return nt},nt)}function b(nt,tt){if(!(nt instanceof tt))throw new TypeError("Cannot call a class as a function")}function E(nt,tt){for(var ft=0;ft<tt.length;ft++){var yt=tt[ft];yt.enumerable=yt.enumerable||!1,yt.configurable=!0,"value"in yt&&(yt.writable=!0),Object.defineProperty(nt,yt.key,yt)}}function de(nt,tt,ft){tt&&E(nt.prototype,tt)}t("./p5.Shader"),t("./p5.RendererGL.Retained"),h.default.RendererGL.prototype._applyTextProperties=function(){this._setProperty("_textAscent",null),this._setProperty("_textDescent",null)},h.default.RendererGL.prototype.textWidth=function(nt){return this._isOpenType()?this._textFont._textWidth(nt,this._textSize):0};var pe=function(){function nt(tt,ft){b(this,nt),this.width=tt,this.height=ft,this.infos=[]}return de(nt,[{key:"findImage",value:function(tt){var ft,yt,gt=this.width*this.height;if(gt<tt)throw new Error("font is too complex to render in 3D");for(var mt=this.infos.length-1;0<=mt;--mt){var wt=this.infos[mt];if(wt.index+tt<gt){yt=(ft=wt).imageData;break}}if(!ft){try{yt=new ImageData(this.width,this.height)}catch{var St=document.getElementsByTagName("canvas")[0],bt=!St,Ct=(St||((St=document.createElement("canvas")).style.display="none",document.body.appendChild(St)),St.getContext("2d"));Ct&&(yt=Ct.createImageData(this.width,this.height)),bt&&document.body.removeChild(St)}this.infos.push(ft={index:0,imageData:yt})}return Ct=ft.index,ft.index+=tt,yt._dirty=!0,{imageData:yt,index:Ct}}}]),nt}();function Ye(wt,tt,ft,yt,gt){var mt=wt.imageData.data,wt=4*wt.index++;mt[wt++]=tt,mt[wt++]=ft,mt[wt++]=yt,mt[+wt]=gt}var me=Math.sqrt(3),Le=function(){function nt(tt){b(this,nt),this.font=tt,this.strokeImageInfos=new pe(64,64),this.colDimImageInfos=new pe(64,64),this.rowDimImageInfos=new pe(64,64),this.colCellImageInfos=new pe(64,64),this.rowCellImageInfos=new pe(64,64),this.glyphInfos={}}return de(nt,[{key:"getGlyphInfo",value:function(tt){var ft=this.glyphInfos[tt.index];if(!ft){var yt=tt.getBoundingBox(),gt=yt.x1,mt=yt.y1,wt=yt.x2-gt,St=yt.y2-mt,bt=tt.path.commands;if(wt==0||St==0||!bt.length)return this.glyphInfos[tt.index]={};for(var Ct=[],Et=[],It=[],Dt=8;0<=Dt;--Dt)It.push([]);for(Dt=8;0<=Dt;--Dt)Et.push([]);var Pt,qt,Ht,Gt,Ut=function(){function Pr(Vr,Xr,Gr,Er){b(this,Pr),this.p0=Vr,this.c0=Xr,this.c1=Gr,this.p1=Er}return de(Pr,[{key:"toQuadratic",value:function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}}},{key:"quadError",value:function(){return h.default.Vector.sub(h.default.Vector.sub(this.p1,this.p0),h.default.Vector.mult(h.default.Vector.sub(this.c1,this.c0),3)).mag()/2}},{key:"split",value:function(Ir){var Xr=h.default.Vector.lerp(this.p0,this.c0,Ir),Er=h.default.Vector.lerp(this.c0,this.c1,Ir),Gr=h.default.Vector.lerp(Xr,Er,Ir),Er=(this.c1=h.default.Vector.lerp(this.c1,this.p1,Ir),this.c0=h.default.Vector.lerp(Er,this.c1,Ir),h.default.Vector.lerp(Gr,this.c0,Ir)),Ir=new Pr(this.p0,Xr,Gr,Er);return this.p0=Er,Ir}},{key:"splitInflections",value:function(){var Vr=h.default.Vector.sub(this.c0,this.p0),Xr=h.default.Vector.sub(h.default.Vector.sub(this.c1,this.c0),Vr),Gr=h.default.Vector.sub(h.default.Vector.sub(h.default.Vector.sub(this.p1,this.c1),Vr),h.default.Vector.mult(Xr,2)),Er=[],Ir=Xr.x*Gr.y-Xr.y*Gr.x;return Ir!==0&&0<=(Vr=(Gr=Vr.x*Gr.y-Vr.y*Gr.x)*Gr-4*Ir*(Vr.x*Xr.y-Vr.y*Xr.x))&&(Ir<0&&(Ir=-Ir,Gr=-Gr),Vr=(-Gr+(Xr=Math.sqrt(Vr)))/(2*Ir),0<(Gr=(-Gr-Xr)/(2*Ir))&&Gr<1&&(Er.push(this.split(Gr)),Vr=1-(1-Vr)/(1-Gr)),0<Vr&&Vr<1&&Er.push(this.split(Vr))),Er.push(this),Er}}]),Pr}(),Yt=!0,Zt=!1,vt=void 0;try{for(var Rt,Lt=bt[Symbol.iterator]();!(Yt=(Rt=Lt.next()).done);Yt=!0){var Vt=Rt.value,Jt=(Vt.x-gt)/wt,er=(Vt.y-mt)/St;if(!kr(Pt,qt,Jt,er)){switch(Vt.type){case"M":Ht=Jt,Gt=er;break;case"L":Nr(Pt,qt,Jt,er);break;case"Q":var ur=(Vt.x1-gt)/wt,yr=(Vt.y1-mt)/St;sr([Pt,Jt,ur],[qt,er,yr],{x:Pt,y:qt,cx:ur,cy:yr});break;case"Z":kr(Pt,qt,Ht,Gt)?Ct.push({x:Pt,y:qt}):(Nr(Pt,qt,Ht,Gt),Ct.push({x:Ht,y:Gt}));break;case"C":for(var Qt=function(ar,Dr,zr,Gr,Er,Ir,Cr,tr){var ar=new Ut(new h.default.Vector(ar,Dr),new h.default.Vector(zr,Gr),new h.default.Vector(Er,Ir),new h.default.Vector(Cr,tr)).splitInflections(),Kt=[],cr=30/me,Tr=!0,Dr=!1,zr=void 0;try{for(var fn,vn=ar[Symbol.iterator]();!(Tr=(fn=vn.next()).done);Tr=!0){for(var _n=fn.value,wn=[],An=void 0;!(.125<=(An=cr/_n.quadError()));){var Cn=Math.pow(An,.3333333333333333),En=_n.split(Cn),Tn=_n.split(1-Cn/(1-Cn));Kt.push(En),wn.push(_n),_n=Tn}An<1&&Kt.push(_n.split(.5)),Kt.push(_n),Array.prototype.push.apply(Kt,wn.reverse())}}catch(Mn){Dr=!0,zr=Mn}finally{try{Tr||vn.return==null||vn.return()}finally{if(Dr)throw zr}}return Kt}(Pt,qt,(Vt.x1-gt)/wt,(Vt.y1-mt)/St,(Vt.x2-gt)/wt,(Vt.y2-mt)/St,Jt,er),nr=0;nr<Qt.length;nr++){var or=Qt[nr].toQuadratic();sr([or.x,or.x1,or.cx],[or.y,or.y1,or.cy],or)}break;default:throw new Error("unknown command type: ".concat(Vt.type))}Pt=Jt,qt=er}}}catch(Pr){Zt=!0,vt=Pr}finally{try{Yt||Lt.return==null||Lt.return()}finally{if(Zt)throw vt}}for(var Wt=Ct.length,ir=this.strokeImageInfos.findImage(Wt),br=ir.index,Sr=0;Sr<Wt;++Sr){var _r=Ct[Sr];Ye(ir,jr(_r.x),jr(_r.y),jr(_r.cx),jr(_r.cy))}(ft=this.glyphInfos[tt.index]={glyph:tt,uGlyphRect:[yt.x1,-yt.y1,yt.x2,-yt.y2],strokeImageInfo:ir,strokes:Ct,colInfo:qr(It,this.colDimImageInfos,this.colCellImageInfos),rowInfo:qr(Et,this.rowDimImageInfos,this.rowCellImageInfos)}).uGridOffset=[ft.colInfo.dimOffset,ft.rowInfo.dimOffset]}return ft;function sr(Pr,Vr,Xr){var Gr=Ct.length;function Er(Kt,cr,Tr){for(var Dr=Kt.length;0<Dr--;){var zr=Kt[Dr];zr<cr&&(cr=zr),Tr<zr&&(Tr=zr)}return{min:cr,max:Tr}}Ct.push(Xr);for(var Xr=Er(Pr,1,0),Pr=Math.max(Math.floor(9*Xr.min-.5),0),Ir=Math.min(Math.ceil(9*Xr.max+.5),9),Cr=Pr;Cr<Ir;++Cr)It[Cr].push(Gr);for(var Xr=Er(Vr,1,0),Pr=Math.max(Math.floor(9*Xr.min-.5),0),tr=Math.min(Math.ceil(9*Xr.max+.5),9),ar=Pr;ar<tr;++ar)Et[ar].push(Gr)}function jr(Pr){return(Pr=(Xr=255)*Pr)<(Vr=0)?Vr:Xr<Pr?Xr:Pr;var Vr,Xr}function Nr(Pr,Vr,Xr,Gr){sr([Pr,Xr],[Vr,Gr],{x:Pr,y:Vr,cx:(Pr+Xr)/2,cy:(Vr+Gr)/2})}function kr(Pr,Vr,Xr,Gr){return Math.abs(Xr-Pr)<1e-5&&Math.abs(Gr-Vr)<1e-5}function qr(Pr,Vr,Xr){for(var Gr=Pr.length,Er=Vr.findImage(Gr),Vr=Er.index,Ir=0,Cr=0;Cr<Gr;++Cr)Ir+=Pr[Cr].length;for(var tr=Xr.findImage(Ir),ar=0;ar<Gr;++ar){var Kt=Pr[ar],cr=Kt.length,Tr=tr.index;Ye(Er,Tr>>7,127&Tr,cr>>7,127&cr);for(var Dr=0;Dr<cr;++Dr){var zr=Kt[Dr]+br;Ye(tr,zr>>7,127&zr,0,0)}}return{cellImageInfo:tr,dimOffset:Vr,dimImageInfo:Er}}}}]),nt}();h.default.RendererGL.prototype._renderText=function(nt,tt,ft,yt,gt){if(this._textFont&&typeof this._textFont!="string"){if(!(gt<=yt)&&this._doFill){if(this._isOpenType()){nt.push();var gt=this._doStroke,mt=this.drawMode,wt=(this._doStroke=!1,this.drawMode=N.TEXTURE,this._textFont.font),St=(St=this._textFont._fontInfo)||(this._textFont._fontInfo=new Le(wt)),ft=this._textFont._handleAlignment(this,tt,ft,yt),yt=this._textSize/wt.unitsPerEm,bt=(this.translate(ft.x,ft.y,0),this.scale(yt,yt,1),this.GL),ft=!this._defaultFontShader,Ct=this._getFontShader(),Et=(Ct.init(),Ct.bindShader(),ft&&(Ct.setUniform("uGridImageSize",[64,64]),Ct.setUniform("uCellsImageSize",[64,64]),Ct.setUniform("uStrokeImageSize",[64,64]),Ct.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor),this.retainedMode.geometry.glyph),It=(Et||((yt=this._textGeom=new h.default.Geometry(1,1,function(){for(var nr=0;nr<=1;nr++)for(var or=0;or<=1;or++)this.vertices.push(new h.default.Vector(or,nr,0)),this.uvs.push(or,nr)})).computeFaces().computeNormals(),Et=this.createBuffers("glyph",yt)),!0),ft=!1,yt=void 0;try{for(var Dt,Pt=this.retainedMode.buffers.text[Symbol.iterator]();!(It=(Dt=Pt.next()).done);It=!0)Dt.value._prepareBuffer(Et,Ct)}catch(nr){ft=!0,yt=nr}finally{try{It||Pt.return==null||Pt.return()}finally{if(ft)throw yt}}this._bindBuffer(Et.indexBuffer,bt.ELEMENT_ARRAY_BUFFER),Ct.setUniform("uMaterialColor",this.curFillColor),bt.pixelStorei(bt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);try{var qt=0,Ht=null,Gt=wt.stringToGlyphs(tt),Ut=!0,Yt=!1,Zt=void 0;try{for(var vt,Rt=Gt[Symbol.iterator]();!(Ut=(vt=Rt.next()).done);Ut=!0){var Lt,Vt,Jt=vt.value,er=(Ht&&(qt+=wt.getKerningValue(Ht,Jt)),St.getGlyphInfo(Jt));er.uGlyphRect&&(Lt=er.rowInfo,Vt=er.colInfo,Ct.setUniform("uSamplerStrokes",er.strokeImageInfo.imageData),Ct.setUniform("uSamplerRowStrokes",Lt.cellImageInfo.imageData),Ct.setUniform("uSamplerRows",Lt.dimImageInfo.imageData),Ct.setUniform("uSamplerColStrokes",Vt.cellImageInfo.imageData),Ct.setUniform("uSamplerCols",Vt.dimImageInfo.imageData),Ct.setUniform("uGridOffset",er.uGridOffset),Ct.setUniform("uGlyphRect",er.uGlyphRect),Ct.setUniform("uGlyphOffset",qt),Ct.bindTextures(),bt.drawElements(bt.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)),qt+=Jt.advanceWidth,Ht=Jt}}catch(nr){Yt=!0,Zt=nr}finally{try{Ut||Rt.return==null||Rt.return()}finally{if(Yt)throw Zt}}}finally{Ct.unbindShader(),this._doStroke=gt,this.drawMode=mt,bt.pixelStorei(bt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),nt.pop()}}else console.log("WEBGL: only Opentype (.otf) and Truetype (.ttf) fonts are supported");return nt}}else console.log("WEBGL: you must load and set a font before drawing text. See `loadFont` and `textFont` for more details.")}},{"../core/constants":272,"../core/main":283,"./p5.RendererGL.Retained":340,"./p5.Shader":342,"core-js/modules/es.array.iterator":165,"core-js/modules/es.object.get-own-property-descriptor":186,"core-js/modules/es.object.to-string":190,"core-js/modules/es.regexp.exec":195,"core-js/modules/es.string.iterator":200,"core-js/modules/es.string.split":206,"core-js/modules/es.string.sub":208,"core-js/modules/es.symbol":212,"core-js/modules/es.symbol.description":210,"core-js/modules/es.symbol.iterator":211,"core-js/modules/es.weak-map":244,"core-js/modules/web.dom-collections.iterator":246}]},{},[267])(267)})}(p5_min)),p5_min.exports}var p5_minExports=requireP5_min();const p5=getDefaultExportFromCjs(p5_minExports);function c(r,a,n,t){var l=this,u=reactExports.useRef(null),s=reactExports.useRef(0),p=reactExports.useRef(0),d=reactExports.useRef(null),h=reactExports.useRef([]),N=reactExports.useRef(),Be=reactExports.useRef(),b=reactExports.useRef(r),E=reactExports.useRef(!0);b.current=r;var de=typeof window<"u",pe=!a&&a!==0&&de;if(typeof r!="function")throw new TypeError("Expected a function");a=+a||0;var Ye=!!(n=n||{}).leading,me=!("trailing"in n)||!!n.trailing,Le="maxWait"in n,nt="debounceOnServer"in n&&!!n.debounceOnServer,tt=Le?Math.max(+n.maxWait||0,a):null;reactExports.useEffect(function(){return E.current=!0,function(){E.current=!1}},[]);var ft=reactExports.useMemo(function(){var yt=function(Et){var It=h.current,Dt=N.current;return h.current=N.current=null,s.current=Et,p.current=p.current||Et,Be.current=b.current.apply(Dt,It)},gt=function(Et,It){pe&&cancelAnimationFrame(d.current),d.current=pe?requestAnimationFrame(Et):setTimeout(Et,It)},mt=function(Et){if(!E.current)return!1;var It=Et-u.current;return!u.current||It>=a||It<0||Le&&Et-s.current>=tt},wt=function(Et){return d.current=null,me&&h.current?yt(Et):(h.current=N.current=null,Be.current)},St=function Et(){var It=Date.now();if(Ye&&p.current===s.current&&bt(),mt(It))return wt(It);if(E.current){var Dt=a-(It-u.current),Pt=Le?Math.min(Dt,tt-(It-s.current)):Dt;gt(Et,Pt)}},bt=function(){},Ct=function(){if(de||nt){var Et=Date.now(),It=mt(Et);if(h.current=[].slice.call(arguments),N.current=l,u.current=Et,It){if(!d.current&&E.current)return s.current=u.current,gt(St,a),Ye?yt(u.current):Be.current;if(Le)return gt(St,a),yt(u.current)}return d.current||gt(St,a),Be.current}};return Ct.cancel=function(){d.current&&(pe?cancelAnimationFrame(d.current):clearTimeout(d.current)),s.current=0,h.current=u.current=N.current=d.current=null},Ct.isPending=function(){return!!d.current},Ct.flush=function(){return d.current?wt(Date.now()):Be.current},Ct},[Ye,Le,a,tt,me,pe,de,nt,t]);return ft}var __assign=function(){return __assign=Object.assign||function(a){for(var n,t=1,l=arguments.length;t<l;t++){n=arguments[t];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(a[u]=n[u])}return a},__assign.apply(this,arguments)};function __spreadArray(r,a,n){if(n||arguments.length===2)for(var t=0,l=a.length,u;t<l;t++)(u||!(t in a))&&(u||(u=Array.prototype.slice.call(a,0,t)),u[t]=a[t]);return r.concat(u||Array.prototype.slice.call(a))}typeof SuppressedError=="function"&&SuppressedError;var MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT$1="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs$1=Math.abs,from=String.fromCharCode,assign$1=Object.assign;function hash(r,a){return charat(r,0)^45?(((a<<2^charat(r,0))<<2^charat(r,1))<<2^charat(r,2))<<2^charat(r,3):0}function trim(r){return r.trim()}function match(r,a){return(r=a.exec(r))?r[0]:r}function replace(r,a,n){return r.replace(a,n)}function indexof(r,a,n){return r.indexOf(a,n)}function charat(r,a){return r.charCodeAt(a)|0}function substr(r,a,n){return r.slice(a,n)}function strlen(r){return r.length}function sizeof(r){return r.length}function append(r,a){return a.push(r),r}function combine(r,a){return r.map(a).join("")}function filter(r,a){return r.filter(function(n){return!match(n,a)})}var line=1,column=1,length=0,position=0,character=0,characters="";function node(r,a,n,t,l,u,s,p){return{value:r,root:a,parent:n,type:t,props:l,children:u,line,column,length:s,return:"",siblings:p}}function copy(r,a){return assign$1(node("",null,null,"",null,null,0,r.siblings),r,{length:-r.length},a)}function lift(r){for(;r.root;)r=copy(r.root,{children:[r]});append(r,r.siblings)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice(r,a){return substr(characters,r,a)}function token(r){switch(r){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(r){return line=column=1,length=strlen(characters=r),position=0,[]}function dealloc(r){return characters="",r}function delimit(r){return trim(slice(position-1,delimiter(r===91?r+2:r===40?r+1:r)))}function whitespace(r){for(;(character=peek())&&character<33;)next();return token(r)>2||token(character)>3?"":" "}function escaping(r,a){for(;--a&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(r,caret()+(a<6&&peek()==32&&next()==32))}function delimiter(r){for(;next();)switch(character){case r:return position;case 34:case 39:r!==34&&r!==39&&delimiter(character);break;case 40:r===41&&delimiter(r);break;case 92:next();break}return position}function commenter(r,a){for(;next()&&r+character!==57;)if(r+character===84&&peek()===47)break;return"/*"+slice(a,position-1)+"*"+from(r===47?r:next())}function identifier(r){for(;!token(peek());)next();return slice(r,position)}function compile(r){return dealloc(parse$1("",null,null,null,[""],r=alloc(r),0,[0],r))}function parse$1(r,a,n,t,l,u,s,p,d){for(var h=0,N=0,Be=s,b=0,E=0,de=0,pe=1,Ye=1,me=1,Le=0,nt="",tt=l,ft=u,yt=t,gt=nt;Ye;)switch(de=Le,Le=next()){case 40:if(de!=108&&charat(gt,Be-1)==58){indexof(gt+=replace(delimit(Le),"&","&\f"),"&\f",abs$1(h?p[h-1]:0))!=-1&&(me=-1);break}case 34:case 39:case 91:gt+=delimit(Le);break;case 9:case 10:case 13:case 32:gt+=whitespace(de);break;case 92:gt+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),a,n,d),d);break;default:gt+="/"}break;case 123*pe:p[h++]=strlen(gt)*me;case 125*pe:case 59:case 0:switch(Le){case 0:case 125:Ye=0;case 59+N:me==-1&&(gt=replace(gt,/\f/g,"")),E>0&&strlen(gt)-Be&&append(E>32?declaration(gt+";",t,n,Be-1,d):declaration(replace(gt," ","")+";",t,n,Be-2,d),d);break;case 59:gt+=";";default:if(append(yt=ruleset(gt,a,n,h,N,l,p,nt,tt=[],ft=[],Be,u),u),Le===123)if(N===0)parse$1(gt,a,yt,yt,tt,u,Be,p,ft);else switch(b===99&&charat(gt,3)===110?100:b){case 100:case 108:case 109:case 115:parse$1(r,yt,yt,t&&append(ruleset(r,yt,yt,0,0,l,p,nt,l,tt=[],Be,ft),ft),l,ft,Be,p,t?tt:ft);break;default:parse$1(gt,yt,yt,yt,[""],ft,0,p,ft)}}h=N=E=0,pe=me=1,nt=gt="",Be=s;break;case 58:Be=1+strlen(gt),E=de;default:if(pe<1){if(Le==123)--pe;else if(Le==125&&pe++==0&&prev()==125)continue}switch(gt+=from(Le),Le*pe){case 38:me=N>0?1:(gt+="\f",-1);break;case 44:p[h++]=(strlen(gt)-1)*me,me=1;break;case 64:peek()===45&&(gt+=delimit(next())),b=peek(),N=Be=strlen(nt=gt+=identifier(caret())),Le++;break;case 45:de===45&&strlen(gt)==2&&(pe=0)}}return u}function ruleset(r,a,n,t,l,u,s,p,d,h,N,Be){for(var b=l-1,E=l===0?u:[""],de=sizeof(E),pe=0,Ye=0,me=0;pe<t;++pe)for(var Le=0,nt=substr(r,b+1,b=abs$1(Ye=s[pe])),tt=r;Le<de;++Le)(tt=trim(Ye>0?E[Le]+" "+nt:replace(nt,/&\f/g,E[Le])))&&(d[me++]=tt);return node(r,a,n,l===0?RULESET:p,d,h,N,Be)}function comment(r,a,n,t){return node(r,a,n,COMMENT$1,from(char()),substr(r,2,-2),0,t)}function declaration(r,a,n,t,l){return node(r,a,n,DECLARATION,substr(r,0,t),substr(r,t+1,-1),t,l)}function prefix(r,a,n){switch(hash(r,a)){case 5103:return WEBKIT+"print-"+r+r;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+r+r;case 4789:return MOZ+r+r;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+r+MOZ+r+MS+r+r;case 5936:switch(charat(r,a+11)){case 114:return WEBKIT+r+MS+replace(r,/[svh]\w+-[tblr]{2}/,"tb")+r;case 108:return WEBKIT+r+MS+replace(r,/[svh]\w+-[tblr]{2}/,"tb-rl")+r;case 45:return WEBKIT+r+MS+replace(r,/[svh]\w+-[tblr]{2}/,"lr")+r}case 6828:case 4268:case 2903:return WEBKIT+r+MS+r+r;case 6165:return WEBKIT+r+MS+"flex-"+r+r;case 5187:return WEBKIT+r+replace(r,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+r;case 5443:return WEBKIT+r+MS+"flex-item-"+replace(r,/flex-|-self/g,"")+(match(r,/flex-|baseline/)?"":MS+"grid-row-"+replace(r,/flex-|-self/g,""))+r;case 4675:return WEBKIT+r+MS+"flex-line-pack"+replace(r,/align-content|flex-|-self/g,"")+r;case 5548:return WEBKIT+r+MS+replace(r,"shrink","negative")+r;case 5292:return WEBKIT+r+MS+replace(r,"basis","preferred-size")+r;case 6060:return WEBKIT+"box-"+replace(r,"-grow","")+WEBKIT+r+MS+replace(r,"grow","positive")+r;case 4554:return WEBKIT+replace(r,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+r;case 6187:return replace(replace(replace(r,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),r,"")+r;case 5495:case 3959:return replace(r,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(r,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+r+r;case 4200:if(!match(r,/flex-|baseline/))return MS+"grid-column-align"+substr(r,a)+r;break;case 2592:case 3360:return MS+replace(r,"template-","")+r;case 4384:case 3616:return n&&n.some(function(t,l){return a=l,match(t.props,/grid-\w+-end/)})?~indexof(r+(n=n[a].value),"span",0)?r:MS+replace(r,"-start","")+r+MS+"grid-row-span:"+(~indexof(n,"span",0)?match(n,/\d+/):+match(n,/\d+/)-+match(r,/\d+/))+";":MS+replace(r,"-start","")+r;case 4896:case 4128:return n&&n.some(function(t){return match(t.props,/grid-\w+-start/)})?r:MS+replace(replace(r,"-end","-span"),"span ","")+r;case 4095:case 3583:case 4068:case 2532:return replace(r,/(.+)-inline(.+)/,WEBKIT+"$1$2")+r;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(r)-1-a>6)switch(charat(r,a+1)){case 109:if(charat(r,a+4)!==45)break;case 102:return replace(r,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(r,a+3)==108?"$3":"$2-$3"))+r;case 115:return~indexof(r,"stretch",0)?prefix(replace(r,"stretch","fill-available"),a,n)+r:r}break;case 5152:case 5920:return replace(r,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(t,l,u,s,p,d,h){return MS+l+":"+u+h+(s?MS+l+"-span:"+(p?d:+d-+u)+h:"")+r});case 4949:if(charat(r,a+6)===121)return replace(r,":",":"+WEBKIT)+r;break;case 6444:switch(charat(r,charat(r,14)===45?18:11)){case 120:return replace(r,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+WEBKIT+(charat(r,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+r;case 100:return replace(r,":",":"+MS)+r}break;case 5719:case 2647:case 2135:case 3927:case 2391:return replace(r,"scroll-","scroll-snap-")+r}return r}function serialize(r,a){for(var n="",t=0;t<r.length;t++)n+=a(r[t],t,r,a)||"";return n}function stringify(r,a,n,t){switch(r.type){case LAYER:if(r.children.length)break;case IMPORT:case DECLARATION:return r.return=r.return||r.value;case COMMENT$1:return"";case KEYFRAMES:return r.return=r.value+"{"+serialize(r.children,t)+"}";case RULESET:if(!strlen(r.value=r.props.join(",")))return""}return strlen(n=serialize(r.children,t))?r.return=r.value+"{"+n+"}":""}function middleware(r){var a=sizeof(r);return function(n,t,l,u){for(var s="",p=0;p<a;p++)s+=r[p](n,t,l,u)||"";return s}}function rulesheet(r){return function(a){a.root||(a=a.return)&&r(a)}}function prefixer(r,a,n,t){if(r.length>-1&&!r.return)switch(r.type){case DECLARATION:r.return=prefix(r.value,r.length,n);return;case KEYFRAMES:return serialize([copy(r,{value:replace(r.value,"@","@"+WEBKIT)})],t);case RULESET:if(r.length)return combine(n=r.props,function(l){switch(match(l,t=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":lift(copy(r,{props:[replace(l,/:(read-\w+)/,":"+MOZ+"$1")]})),lift(copy(r,{props:[l]})),assign$1(r,{props:filter(n,t)});break;case"::placeholder":lift(copy(r,{props:[replace(l,/:(plac\w+)/,":"+WEBKIT+"input-$1")]})),lift(copy(r,{props:[replace(l,/:(plac\w+)/,":"+MOZ+"$1")]})),lift(copy(r,{props:[replace(l,/:(plac\w+)/,MS+"input-$1")]})),lift(copy(r,{props:[l]})),assign$1(r,{props:filter(n,t)});break}return""})}}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},define_process_env_default={},f=typeof process<"u"&&define_process_env_default!==void 0&&(define_process_env_default.REACT_APP_SC_ATTR||define_process_env_default.SC_ATTR)||"data-styled",m="active",y="data-styled-version",v="6.1.19",g=`/*!sc*/
`,S=typeof window<"u"&&typeof document<"u",w=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&define_process_env_default!==void 0&&define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY!==""?define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&define_process_env_default!==void 0&&define_process_env_default.SC_DISABLE_SPEEDY!==void 0&&define_process_env_default.SC_DISABLE_SPEEDY!==""&&define_process_env_default.SC_DISABLE_SPEEDY!=="false"&&define_process_env_default.SC_DISABLE_SPEEDY),_=Object.freeze([]),C=Object.freeze({});function I(r,a,n){return n===void 0&&(n=C),r.theme!==n.theme&&r.theme||a||n.theme}var A=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),O=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,D=/(^-|-$)/g;function R(r){return r.replace(O,"-").replace(D,"")}var T=/(a)(d)/gi,k=52,j=function(r){return String.fromCharCode(r+(r>25?39:97))};function x(r){var a,n="";for(a=Math.abs(r);a>k;a=a/k|0)n=j(a%k)+n;return(j(a%k)+n).replace(T,"$1-$2")}var V,F=5381,M=function(r,a){for(var n=a.length;n;)r=33*r^a.charCodeAt(--n);return r},z=function(r){return M(F,r)};function $(r){return x(z(r)>>>0)}function B(r){return r.displayName||r.name||"Component"}function L(r){return typeof r=="string"&&!0}var G=typeof Symbol=="function"&&Symbol.for,Y=G?Symbol.for("react.memo"):60115,W=G?Symbol.for("react.forward_ref"):60112,q={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},H={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},U={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},J=((V={})[W]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},V[Y]=U,V);function X(r){return("type"in(a=r)&&a.type.$$typeof)===Y?U:"$$typeof"in r?J[r.$$typeof]:q;var a}var Z=Object.defineProperty,K=Object.getOwnPropertyNames,Q=Object.getOwnPropertySymbols,ee=Object.getOwnPropertyDescriptor,te=Object.getPrototypeOf,ne=Object.prototype;function oe(r,a,n){if(typeof a!="string"){if(ne){var t=te(a);t&&t!==ne&&oe(r,t,n)}var l=K(a);Q&&(l=l.concat(Q(a)));for(var u=X(r),s=X(a),p=0;p<l.length;++p){var d=l[p];if(!(d in H||n&&n[d]||s&&d in s||u&&d in u)){var h=ee(a,d);try{Z(r,d,h)}catch{}}}}return r}function re(r){return typeof r=="function"}function se(r){return typeof r=="object"&&"styledComponentId"in r}function ie(r,a){return r&&a?"".concat(r," ").concat(a):r||a||""}function ae(r,a){if(r.length===0)return"";for(var n=r[0],t=1;t<r.length;t++)n+=r[t];return n}function ce(r){return r!==null&&typeof r=="object"&&r.constructor.name===Object.name&&!("props"in r&&r.$$typeof)}function le(r,a,n){if(n===void 0&&(n=!1),!n&&!ce(r)&&!Array.isArray(r))return a;if(Array.isArray(a))for(var t=0;t<a.length;t++)r[t]=le(r[t],a[t]);else if(ce(a))for(var t in a)r[t]=le(r[t],a[t]);return r}function ue(r,a){Object.defineProperty(r,"toString",{value:a})}function he(r){for(var a=[],n=1;n<arguments.length;n++)a[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(r," for more information.").concat(a.length>0?" Args: ".concat(a.join(", ")):""))}var fe=function(){function r(a){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=a}return r.prototype.indexOfGroup=function(a){for(var n=0,t=0;t<a;t++)n+=this.groupSizes[t];return n},r.prototype.insertRules=function(a,n){if(a>=this.groupSizes.length){for(var t=this.groupSizes,l=t.length,u=l;a>=u;)if((u<<=1)<0)throw he(16,"".concat(a));this.groupSizes=new Uint32Array(u),this.groupSizes.set(t),this.length=u;for(var s=l;s<u;s++)this.groupSizes[s]=0}for(var p=this.indexOfGroup(a+1),d=(s=0,n.length);s<d;s++)this.tag.insertRule(p,n[s])&&(this.groupSizes[a]++,p++)},r.prototype.clearGroup=function(a){if(a<this.length){var n=this.groupSizes[a],t=this.indexOfGroup(a),l=t+n;this.groupSizes[a]=0;for(var u=t;u<l;u++)this.tag.deleteRule(t)}},r.prototype.getGroup=function(a){var n="";if(a>=this.length||this.groupSizes[a]===0)return n;for(var t=this.groupSizes[a],l=this.indexOfGroup(a),u=l+t,s=l;s<u;s++)n+="".concat(this.tag.getRule(s)).concat(g);return n},r}(),ye=new Map,ve=new Map,ge=1,Se=function(r){if(ye.has(r))return ye.get(r);for(;ve.has(ge);)ge++;var a=ge++;return ye.set(r,a),ve.set(a,r),a},we=function(r,a){ge=a+1,ye.set(r,a),ve.set(a,r)},be="style[".concat(f,"][").concat(y,'="').concat(v,'"]'),Ee=new RegExp("^".concat(f,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Ne=function(r,a,n){for(var t,l=n.split(","),u=0,s=l.length;u<s;u++)(t=l[u])&&r.registerName(a,t)},Pe=function(r,a){for(var n,t=((n=a.textContent)!==null&&n!==void 0?n:"").split(g),l=[],u=0,s=t.length;u<s;u++){var p=t[u].trim();if(p){var d=p.match(Ee);if(d){var h=0|parseInt(d[1],10),N=d[2];h!==0&&(we(N,h),Ne(r,N,d[3]),r.getTag().insertRules(h,l)),l.length=0}else l.push(p)}}},_e=function(r){for(var a=document.querySelectorAll(be),n=0,t=a.length;n<t;n++){var l=a[n];l&&l.getAttribute(f)!==m&&(Pe(r,l),l.parentNode&&l.parentNode.removeChild(l))}};function Ce(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var Ie=function(r){var a=document.head,n=r||a,t=document.createElement("style"),l=function(p){var d=Array.from(p.querySelectorAll("style[".concat(f,"]")));return d[d.length-1]}(n),u=l!==void 0?l.nextSibling:null;t.setAttribute(f,m),t.setAttribute(y,v);var s=Ce();return s&&t.setAttribute("nonce",s),n.insertBefore(t,u),t},Ae=function(){function r(a){this.element=Ie(a),this.element.appendChild(document.createTextNode("")),this.sheet=function(n){if(n.sheet)return n.sheet;for(var t=document.styleSheets,l=0,u=t.length;l<u;l++){var s=t[l];if(s.ownerNode===n)return s}throw he(17)}(this.element),this.length=0}return r.prototype.insertRule=function(a,n){try{return this.sheet.insertRule(n,a),this.length++,!0}catch{return!1}},r.prototype.deleteRule=function(a){this.sheet.deleteRule(a),this.length--},r.prototype.getRule=function(a){var n=this.sheet.cssRules[a];return n&&n.cssText?n.cssText:""},r}(),Oe=function(){function r(a){this.element=Ie(a),this.nodes=this.element.childNodes,this.length=0}return r.prototype.insertRule=function(a,n){if(a<=this.length&&a>=0){var t=document.createTextNode(n);return this.element.insertBefore(t,this.nodes[a]||null),this.length++,!0}return!1},r.prototype.deleteRule=function(a){this.element.removeChild(this.nodes[a]),this.length--},r.prototype.getRule=function(a){return a<this.length?this.nodes[a].textContent:""},r}(),De=function(){function r(a){this.rules=[],this.length=0}return r.prototype.insertRule=function(a,n){return a<=this.length&&(this.rules.splice(a,0,n),this.length++,!0)},r.prototype.deleteRule=function(a){this.rules.splice(a,1),this.length--},r.prototype.getRule=function(a){return a<this.length?this.rules[a]:""},r}(),Re=S,Te={isServer:!S,useCSSOMInjection:!w},ke=function(){function r(a,n,t){a===void 0&&(a=C),n===void 0&&(n={});var l=this;this.options=__assign(__assign({},Te),a),this.gs=n,this.names=new Map(t),this.server=!!a.isServer,!this.server&&S&&Re&&(Re=!1,_e(this)),ue(this,function(){return function(u){for(var s=u.getTag(),p=s.length,d="",h=function(Be){var b=function(me){return ve.get(me)}(Be);if(b===void 0)return"continue";var E=u.names.get(b),de=s.getGroup(Be);if(E===void 0||!E.size||de.length===0)return"continue";var pe="".concat(f,".g").concat(Be,'[id="').concat(b,'"]'),Ye="";E!==void 0&&E.forEach(function(me){me.length>0&&(Ye+="".concat(me,","))}),d+="".concat(de).concat(pe,'{content:"').concat(Ye,'"}').concat(g)},N=0;N<p;N++)h(N);return d}(l)})}return r.registerId=function(a){return Se(a)},r.prototype.rehydrate=function(){!this.server&&S&&_e(this)},r.prototype.reconstructWithOptions=function(a,n){return n===void 0&&(n=!0),new r(__assign(__assign({},this.options),a),this.gs,n&&this.names||void 0)},r.prototype.allocateGSInstance=function(a){return this.gs[a]=(this.gs[a]||0)+1},r.prototype.getTag=function(){return this.tag||(this.tag=(a=function(n){var t=n.useCSSOMInjection,l=n.target;return n.isServer?new De(l):t?new Ae(l):new Oe(l)}(this.options),new fe(a)));var a},r.prototype.hasNameForId=function(a,n){return this.names.has(a)&&this.names.get(a).has(n)},r.prototype.registerName=function(a,n){if(Se(a),this.names.has(a))this.names.get(a).add(n);else{var t=new Set;t.add(n),this.names.set(a,t)}},r.prototype.insertRules=function(a,n,t){this.registerName(a,n),this.getTag().insertRules(Se(a),t)},r.prototype.clearNames=function(a){this.names.has(a)&&this.names.get(a).clear()},r.prototype.clearRules=function(a){this.getTag().clearGroup(Se(a)),this.clearNames(a)},r.prototype.clearTag=function(){this.tag=void 0},r}(),je=/&/g,xe=/^\s*\/\/.*$/gm;function Ve(r,a){return r.map(function(n){return n.type==="rule"&&(n.value="".concat(a," ").concat(n.value),n.value=n.value.replaceAll(",",",".concat(a," ")),n.props=n.props.map(function(t){return"".concat(a," ").concat(t)})),Array.isArray(n.children)&&n.type!=="@keyframes"&&(n.children=Ve(n.children,a)),n})}function Fe(r){var a,n,t,l=C,u=l.options,s=u===void 0?C:u,p=l.plugins,d=p===void 0?_:p,h=function(b,E,de){return de.startsWith(n)&&de.endsWith(n)&&de.replaceAll(n,"").length>0?".".concat(a):b},N=d.slice();N.push(function(b){b.type===RULESET&&b.value.includes("&")&&(b.props[0]=b.props[0].replace(je,n).replace(t,h))}),s.prefix&&N.push(prefixer),N.push(stringify);var Be=function(b,E,de,pe){E===void 0&&(E=""),de===void 0&&(de=""),pe===void 0&&(pe="&"),a=pe,n=E,t=new RegExp("\\".concat(n,"\\b"),"g");var Ye=b.replace(xe,""),me=compile(de||E?"".concat(de," ").concat(E," { ").concat(Ye," }"):Ye);s.namespace&&(me=Ve(me,s.namespace));var Le=[];return serialize(me,middleware(N.concat(rulesheet(function(nt){return Le.push(nt)})))),Le};return Be.hash=d.length?d.reduce(function(b,E){return E.name||he(15),M(b,E.name)},F).toString():"",Be}var Me=new ke,ze=Fe(),$e=React.createContext({shouldForwardProp:void 0,styleSheet:Me,stylis:ze});$e.Consumer;React.createContext(void 0);function Ge(){return reactExports.useContext($e)}var We=function(){function r(a,n){var t=this;this.inject=function(l,u){u===void 0&&(u=ze);var s=t.name+u.hash;l.hasNameForId(t.id,s)||l.insertRules(t.id,s,u(t.rules,s,"@keyframes"))},this.name=a,this.id="sc-keyframes-".concat(a),this.rules=n,ue(this,function(){throw he(12,String(t.name))})}return r.prototype.getName=function(a){return a===void 0&&(a=ze),this.name+a.hash},r}(),qe=function(r){return r>="A"&&r<="Z"};function He(r){for(var a="",n=0;n<r.length;n++){var t=r[n];if(n===1&&t==="-"&&r[0]==="-")return r;qe(t)?a+="-"+t.toLowerCase():a+=t}return a.startsWith("ms-")?"-"+a:a}var Ue=function(r){return r==null||r===!1||r===""},Je=function(r){var a,n,t=[];for(var l in r){var u=r[l];r.hasOwnProperty(l)&&!Ue(u)&&(Array.isArray(u)&&u.isCss||re(u)?t.push("".concat(He(l),":"),u,";"):ce(u)?t.push.apply(t,__spreadArray(__spreadArray(["".concat(l," {")],Je(u),!1),["}"],!1)):t.push("".concat(He(l),": ").concat((a=l,(n=u)==null||typeof n=="boolean"||n===""?"":typeof n!="number"||n===0||a in unitlessKeys||a.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return t};function Xe(r,a,n,t){if(Ue(r))return[];if(se(r))return[".".concat(r.styledComponentId)];if(re(r)){if(!re(u=r)||u.prototype&&u.prototype.isReactComponent||!a)return[r];var l=r(a);return Xe(l,a,n,t)}var u;return r instanceof We?n?(r.inject(n,t),[r.getName(t)]):[r]:ce(r)?Je(r):Array.isArray(r)?Array.prototype.concat.apply(_,r.map(function(s){return Xe(s,a,n,t)})):[r.toString()]}function Ze(r){for(var a=0;a<r.length;a+=1){var n=r[a];if(re(n)&&!se(n))return!1}return!0}var Ke=z(v),Qe=function(){function r(a,n,t){this.rules=a,this.staticRulesId="",this.isStatic=(t===void 0||t.isStatic)&&Ze(a),this.componentId=n,this.baseHash=M(Ke,n),this.baseStyle=t,ke.registerId(n)}return r.prototype.generateAndInjectStyles=function(a,n,t){var l=this.baseStyle?this.baseStyle.generateAndInjectStyles(a,n,t):"";if(this.isStatic&&!t.hash)if(this.staticRulesId&&n.hasNameForId(this.componentId,this.staticRulesId))l=ie(l,this.staticRulesId);else{var u=ae(Xe(this.rules,a,n,t)),s=x(M(this.baseHash,u)>>>0);if(!n.hasNameForId(this.componentId,s)){var p=t(u,".".concat(s),void 0,this.componentId);n.insertRules(this.componentId,s,p)}l=ie(l,s),this.staticRulesId=s}else{for(var d=M(this.baseHash,t.hash),h="",N=0;N<this.rules.length;N++){var Be=this.rules[N];if(typeof Be=="string")h+=Be;else if(Be){var b=ae(Xe(Be,a,n,t));d=M(d,b+N),h+=b}}if(h){var E=x(d>>>0);n.hasNameForId(this.componentId,E)||n.insertRules(this.componentId,E,t(h,".".concat(E),void 0,this.componentId)),l=ie(l,E)}}return l},r}(),et=React.createContext(void 0);et.Consumer;var rt={};function it(r,a,n){var t=se(r),l=r,u=!L(r),s=a.attrs,p=s===void 0?_:s,d=a.componentId,h=d===void 0?function(tt,ft){var yt=typeof tt!="string"?"sc":R(tt);rt[yt]=(rt[yt]||0)+1;var gt="".concat(yt,"-").concat($(v+yt+rt[yt]));return ft?"".concat(ft,"-").concat(gt):gt}(a.displayName,a.parentComponentId):d,N=a.displayName,Be=N===void 0?function(tt){return L(tt)?"styled.".concat(tt):"Styled(".concat(B(tt),")")}(r):N,b=a.displayName&&a.componentId?"".concat(R(a.displayName),"-").concat(a.componentId):a.componentId||h,E=t&&l.attrs?l.attrs.concat(p).filter(Boolean):p,de=a.shouldForwardProp;if(t&&l.shouldForwardProp){var pe=l.shouldForwardProp;if(a.shouldForwardProp){var Ye=a.shouldForwardProp;de=function(tt,ft){return pe(tt,ft)&&Ye(tt,ft)}}else de=pe}var me=new Qe(n,b,t?l.componentStyle:void 0);function Le(tt,ft){return function(yt,gt,mt){var wt=yt.attrs,St=yt.componentStyle,bt=yt.defaultProps,Ct=yt.foldedComponentIds,Et=yt.styledComponentId,It=yt.target,Dt=React.useContext(et),Pt=Ge(),qt=yt.shouldForwardProp||Pt.shouldForwardProp,Ht=I(gt,Dt,bt)||C,Gt=function(Lt,Vt,Jt){for(var er,ur=__assign(__assign({},Vt),{className:void 0,theme:Jt}),yr=0;yr<Lt.length;yr+=1){var Qt=re(er=Lt[yr])?er(ur):er;for(var nr in Qt)ur[nr]=nr==="className"?ie(ur[nr],Qt[nr]):nr==="style"?__assign(__assign({},ur[nr]),Qt[nr]):Qt[nr]}return Vt.className&&(ur.className=ie(ur.className,Vt.className)),ur}(wt,gt,Ht),Ut=Gt.as||It,Yt={};for(var Zt in Gt)Gt[Zt]===void 0||Zt[0]==="$"||Zt==="as"||Zt==="theme"&&Gt.theme===Ht||(Zt==="forwardedAs"?Yt.as=Gt.forwardedAs:qt&&!qt(Zt,Ut)||(Yt[Zt]=Gt[Zt]));var vt=function(Lt,Vt){var Jt=Ge(),er=Lt.generateAndInjectStyles(Vt,Jt.styleSheet,Jt.stylis);return er}(St,Gt),Rt=ie(Ct,Et);return vt&&(Rt+=" "+vt),Gt.className&&(Rt+=" "+Gt.className),Yt[L(Ut)&&!A.has(Ut)?"class":"className"]=Rt,mt&&(Yt.ref=mt),reactExports.createElement(Ut,Yt)}(nt,tt,ft)}Le.displayName=Be;var nt=React.forwardRef(Le);return nt.attrs=E,nt.componentStyle=me,nt.displayName=Be,nt.shouldForwardProp=de,nt.foldedComponentIds=t?ie(l.foldedComponentIds,l.styledComponentId):"",nt.styledComponentId=b,nt.target=t?l.target:r,Object.defineProperty(nt,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(tt){this._foldedDefaultProps=t?function(ft){for(var yt=[],gt=1;gt<arguments.length;gt++)yt[gt-1]=arguments[gt];for(var mt=0,wt=yt;mt<wt.length;mt++)le(ft,wt[mt],!0);return ft}({},l.defaultProps,tt):tt}}),ue(nt,function(){return".".concat(nt.styledComponentId)}),u&&oe(nt,r,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),nt}function at(r,a){for(var n=[r[0]],t=0,l=a.length;t<l;t+=1)n.push(a[t],r[t+1]);return n}var ct=function(r){return Object.assign(r,{isCss:!0})};function lt(r){for(var a=[],n=1;n<arguments.length;n++)a[n-1]=arguments[n];if(re(r)||ce(r))return ct(Xe(at(_,__spreadArray([r],a,!0))));var t=r;return a.length===0&&t.length===1&&typeof t[0]=="string"?Xe(t):ct(Xe(at(t,a)))}function ut(r,a,n){if(n===void 0&&(n=C),!a)throw he(1,a);var t=function(l){for(var u=[],s=1;s<arguments.length;s++)u[s-1]=arguments[s];return r(a,n,lt.apply(void 0,__spreadArray([l],u,!1)))};return t.attrs=function(l){return ut(r,a,__assign(__assign({},n),{attrs:Array.prototype.concat(n.attrs,l).filter(Boolean)}))},t.withConfig=function(l){return ut(r,a,__assign(__assign({},n),l))},t}var pt=function(r){return ut(it,r)},dt=pt;A.forEach(function(r){dt[r]=pt(r)});const StyledButton=dt.button`
  padding: "10px 16px";
  backgroundcolor: "#4CAF50";
  color: "white";
  border: "none";
  borderradius: "4px";
  cursor: "pointer";
  margintop: "10px";
  fontsize: "16px";
`,ToggleButton$1=dt.button`
  padding: 0.5rem 1rem;
  background-color: ${r=>r.active?"#4caf50":"#ccc"};
  color: ${r=>r.active?"white":"#666"};
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-size: 1rem;

  &:hover {
    background-color: ${r=>r.active?"#45a049":"#ddd"};
  }
`,ToggleButtonGroup=dt.div`
  display: flex;
  gap: 1rem;
  margin-top: 1rem;
  justify-content: center; /* Center horizontally */
  align-items: center; /* Center vertically */
`,PreviewContainer=dt.div`
  margin-top: 1rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
`,PreviewCaption=dt.div`
  font-weight: bold;
  font-size: 1rem;
`,CanvasWrapper=dt.div`
  padding: 0.5rem;
  display: inline-block;
`,CollapsiblePreview=dt.details`
  width: 100%;
  display: ${r=>r.isVisible?"block":"none"}; /* Control visibility */
`,CollapsibleSummary=dt.summary`
  font-weight: bold;
  font-size: 1rem;
  cursor: pointer;
  margin-bottom: 0.5rem;

  &:focus {
    outline: none;
  }
`,CollapsibleContent=dt.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
`,TooltipContainer=dt.div`
  position: relative;
  display: inline-block;
  cursor: pointer;
  align-self: flex-start; /* Add this line */
`,TooltipText=dt.div`
  visibility: hidden;
  width: 200px;
  background-color: #333;
  color: #fff;
  text-align: center;
  border-radius: 5px;
  padding: 0.5rem;
  position: absolute;
  z-index: 1;
  bottom: 125%; /* Position above the icon */
  left: 50%;
  transform: translateX(-50%);
  opacity: 0;
  transition: opacity 0.3s;

  /* Arrow below the tooltip */
  &::after {
    content: "";
    position: absolute;
    top: 100%; /* At the bottom of the tooltip */
    left: 50%;
    margin-left: -5px;
    border-width: 5px;
    border-style: solid;
    border-color: #333 transparent transparent transparent;
  }
`,TooltipIcon=dt.span`
  padding: 0.2rem 0.4rem;
  align-items: center;
  justify-content: center;

  &:hover + ${TooltipText} {
    visibility: visible;
    opacity: 1;
  }
`,ThresholdControl=({name:r,threshold:a,onThresholdChange:n})=>{const[t,l]=reactExports.useState(!1),u=reactExports.useRef(null),s=N=>{const Be=Number(N.target.value);n(Be)},p=N=>{if(N.type==="blur"||N.key==="Enter"){const Be=Math.min(255,Math.max(0,Number(N.target.value)));n(Be),l(!1)}},d=()=>{l(!0)},h=()=>{u.current&&u.current.select()};return jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("label",{children:[t?jsxRuntimeExports.jsx("input",{ref:u,type:"number",min:"0",max:"255",defaultValue:a,autoFocus:!0,onBlur:p,onKeyDown:p,onFocus:h,title:"Click to edit threshold"}):jsxRuntimeExports.jsxs("span",{onDoubleClick:d,title:"Double-click to edit threshold",children:[r,": ",a]}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"255",value:a,onChange:s,style:{width:"100%"},title:"Drag to adjust threshold"})]})})},StepContainer=dt.div`
  border: 1px solid #ccc;
  border-radius: 6px;
  padding: 1rem;
  margin-bottom: 1rem;
`,StepHeader=dt.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
`,RemoveButton=dt.button`
  background: none;
  border: none;
  color: #c00;
  font-size: 1.2rem;
  cursor: pointer;

  &:hover {
    color: red;
  }
`,Select=dt.select`
  margin-right: 1rem;
  padding: 0.3rem;
`,ToggleButton=dt.button`
  padding: 0.3rem 0.7rem;
  border: 1px solid #ccc;
  border-radius: 4px;
  cursor: pointer;
`;dt.label`
  display: block;
  margin-top: 0.5rem;
  cursor: pointer;
`;dt.input`
  margin-left: 0.5rem;
`;dt.input`
  width: 100%;
  margin-top: 0.5rem;
`;const SortStepEditor=({step:r,index:a,onUpdate:n,onRemove:t})=>{const l=()=>{n({disabled:!r.disabled})};return jsxRuntimeExports.jsxs(StepContainer,{children:[jsxRuntimeExports.jsxs(StepHeader,{children:[jsxRuntimeExports.jsxs("strong",{children:["Step ",a+1]}),jsxRuntimeExports.jsxs("label",{children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:!r.disabled,onChange:l}),"Enabled"]}),jsxRuntimeExports.jsx(RemoveButton,{onClick:t,children:""})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{children:["Direction:",jsxRuntimeExports.jsxs(Select,{value:r.direction,onChange:u=>n({direction:u.target.value}),disabled:r.disabled,children:[jsxRuntimeExports.jsx("option",{value:"rows",children:"Rows"}),jsxRuntimeExports.jsx("option",{value:"cols",children:"Columns"}),jsxRuntimeExports.jsx("option",{value:"diag",children:"Diagonal"})]})]}),jsxRuntimeExports.jsxs("label",{children:["Order:",jsxRuntimeExports.jsx(ToggleButton,{onClick:()=>n({order:r.order==="asc"?"desc":"asc"}),disabled:r.disabled,children:r.order==="asc"?" Ascending":" Descending"})]})]})]})},Container=dt.div`
  padding: 1rem;
`,AddButton=dt.button`
  margin-top: 1rem;
  padding: 0.5rem 1rem;
  border-radius: 8px;
  background-color: #007bff;
  color: white;
  font-weight: bold;
  border: none;
  cursor: pointer;

  &:hover {
    background-color: #0056b3;
  }
`,SortPipeline=({pipeline:r,onPipelineChange:a})=>{const n=(u,s)=>{a(r.map(p=>p.id===u?{...p,...s}:p))},t=u=>{a(r.filter(s=>s.id!==u))},l=()=>{a([...r,{id:v4(),direction:"rows",order:"asc",disabled:!1}])};return jsxRuntimeExports.jsxs(Container,{children:[jsxRuntimeExports.jsx("h3",{children:"Sort Pipeline"}),r.map((u,s)=>jsxRuntimeExports.jsx(SortStepEditor,{step:u,index:s,onUpdate:p=>n(u.id,p),onRemove:()=>t(u.id)},u.id)),jsxRuntimeExports.jsx(AddButton,{onClick:l,children:" Add Step"})]})},bitMethods={getBit(r){return this.data[getSlot(r)]&1<<getShift(r)?1:0},setBit(r){this.data[getSlot(r)]|=1<<getShift(r)},clearBit(r){this.data[getSlot(r)]&=~(1<<getShift(r))},toggleBit(r){this.data[getSlot(r)]^=1<<getShift(r)},getBitXY(r,a){return r>=this.width||a>=this.height?0:this.getBit(a*this.width+r)},setBitXY(r,a){this.setBit(a*this.width+r)},clearBitXY(r,a){this.clearBit(a*this.width+r)},toggleBitXY(r,a){this.toggleBit(a*this.width+r)}};function getSlot(r){return r>>3}function getShift(r){return 7-(r&7)}function setBitMethods(r){for(const a in bitMethods)r.prototype[a]=bitMethods[a]}function checkProcessable(r,a={}){let{bitDepth:n,alpha:t,colorModel:l,components:u,channels:s}=a;if(typeof r!="string"||r.length===0)throw new TypeError("processName must be a string");if(n&&(Array.isArray(n)||(n=[n]),!n.includes(this.bitDepth)))throw new TypeError(`The process: ${r} can only be applied if bit depth is in: ${n}`);if(t&&(Array.isArray(t)||(t=[t]),!t.includes(this.alpha)))throw new TypeError(`The process: ${r} can only be applied if alpha is in: ${t}`);if(l&&(Array.isArray(l)||(l=[l]),!l.includes(this.colorModel)))throw new TypeError(`The process: ${r} can only be applied if color model is in: ${l}`);if(u&&(Array.isArray(u)||(u=[u]),!u.includes(this.components))){let p=`The process: ${r} can only be applied if the number of components is in: ${u}`;throw u.length===1&&u[0]===1?new TypeError(`${p}.\rYou should transform your image using "image.grey()" before applying the algorithm.`):new TypeError(p)}if(s&&(Array.isArray(s)||(s=[s]),!s.includes(this.channels)))throw new TypeError(`The process: ${r} can only be applied if the number of channels is in: ${s}`)}function createBlob(r,a){r=r||[],a=a||{},typeof a=="string"&&(a={type:a});try{return new Blob(r,a)}catch(u){if(u.name!=="TypeError")throw u;for(var n=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,t=new n,l=0;l<r.length;l+=1)t.append(r[l]);return t.getBlob(a.type)}}function dataURLToBlob(r){var a=r.match(/data:([^;]+)/)[1],n=r.replace(/^[^,]+,/,""),t=binaryStringToArrayBuffer(atob(n));return createBlob([t],{type:a})}function canvasToBlob(r,a,n){return typeof r.toBlob=="function"?new Promise(function(t){r.toBlob(t,a,n)}):Promise.resolve(dataURLToBlob(r.toDataURL(a,n)))}function binaryStringToArrayBuffer(r){for(var a=r.length,n=new ArrayBuffer(a),t=new Uint8Array(n),l=-1;++l<a;)t[l]=r.charCodeAt(l);return n}var src$5={};function decode$2(r,a="utf8"){return new TextDecoder(a).decode(r)}const encoder$1=new TextEncoder;function encode$1(r){return encoder$1.encode(r)}const defaultByteLength=1024*8,hostBigEndian=(()=>{const r=new Uint8Array(4),a=new Uint32Array(r.buffer);return!((a[0]=1)&r[0])})(),typedArrays={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class IOBuffer{constructor(a=defaultByteLength,n={}){ti(this,"buffer");ti(this,"byteLength");ti(this,"byteOffset");ti(this,"length");ti(this,"offset");ti(this,"lastWrittenByte");ti(this,"littleEndian");ti(this,"_data");ti(this,"_mark");ti(this,"_marks");let t=!1;typeof a=="number"?a=new ArrayBuffer(a):(t=!0,this.lastWrittenByte=a.byteLength);const l=n.offset?n.offset>>>0:0,u=a.byteLength-l;let s=l;(ArrayBuffer.isView(a)||a instanceof IOBuffer)&&(a.byteLength!==a.buffer.byteLength&&(s=a.byteOffset+l),a=a.buffer),t?this.lastWrittenByte=u:this.lastWrittenByte=0,this.buffer=a,this.length=u,this.byteLength=u,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,u),this._mark=0,this._marks=[]}available(a=1){return this.offset+a<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(a=1){return this.offset+=a,this}back(a=1){return this.offset-=a,this}seek(a){return this.offset=a,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const a=this._marks.pop();if(a===void 0)throw new Error("Mark stack empty");return this.seek(a),this}rewind(){return this.offset=0,this}ensureAvailable(a=1){if(!this.available(a)){const t=(this.offset+a)*2,l=new Uint8Array(t);l.set(new Uint8Array(this.buffer)),this.buffer=l.buffer,this.length=t,this.byteLength=t,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(a=1){return this.readArray(a,"uint8")}readArray(a,n){const t=typedArrays[n].BYTES_PER_ELEMENT*a,l=this.byteOffset+this.offset,u=this.buffer.slice(l,l+t);if(this.littleEndian===hostBigEndian&&n!=="uint8"&&n!=="int8"){const p=new Uint8Array(this.buffer.slice(l,l+t));p.reverse();const d=new typedArrays[n](p.buffer);return this.offset+=t,d.reverse(),d}const s=new typedArrays[n](u);return this.offset+=t,s}readInt16(){const a=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,a}readUint16(){const a=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,a}readInt32(){const a=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,a}readUint32(){const a=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,a}readFloat32(){const a=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,a}readFloat64(){const a=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,a}readBigInt64(){const a=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,a}readBigUint64(){const a=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,a}readChar(){return String.fromCharCode(this.readInt8())}readChars(a=1){let n="";for(let t=0;t<a;t++)n+=this.readChar();return n}readUtf8(a=1){return decode$2(this.readBytes(a))}decodeText(a=1,n="utf8"){return decode$2(this.readBytes(a),n)}writeBoolean(a){return this.writeUint8(a?255:0),this}writeInt8(a){return this.ensureAvailable(1),this._data.setInt8(this.offset++,a),this._updateLastWrittenByte(),this}writeUint8(a){return this.ensureAvailable(1),this._data.setUint8(this.offset++,a),this._updateLastWrittenByte(),this}writeByte(a){return this.writeUint8(a)}writeBytes(a){this.ensureAvailable(a.length);for(let n=0;n<a.length;n++)this._data.setUint8(this.offset++,a[n]);return this._updateLastWrittenByte(),this}writeInt16(a){return this.ensureAvailable(2),this._data.setInt16(this.offset,a,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(a){return this.ensureAvailable(2),this._data.setUint16(this.offset,a,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(a){return this.ensureAvailable(4),this._data.setInt32(this.offset,a,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(a){return this.ensureAvailable(4),this._data.setUint32(this.offset,a,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(a){return this.ensureAvailable(4),this._data.setFloat32(this.offset,a,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(a){return this.ensureAvailable(8),this._data.setFloat64(this.offset,a,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(a){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,a,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(a){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,a,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(a){return this.writeUint8(a.charCodeAt(0))}writeChars(a){for(let n=0;n<a.length;n++)this.writeUint8(a.charCodeAt(n));return this}writeUtf8(a){return this.writeBytes(encode$1(a))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}const IOBuffer$1=Object.freeze(Object.defineProperty({__proto__:null,IOBuffer},Symbol.toStringTag,{value:"Module"})),require$$0$3=getAugmentedNamespace(IOBuffer$1);var constants,hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,constants={BITMAPV5HEADER:{LogicalColorSpace:{LCS_CALIBRATED_RGB:0,LCS_sRGB:1934772034,LCS_WINDOWS_COLOR_SPACE:1466527264},Compression:{BI_RGB:0,BI_RLE8:1,BI_RLE4:2,BI_BITFIELDS:3,BI_JPEG:4,BI_PNG:5,BI_CMYK:11,BI_CMYKRLE8:12,BI_CMYKRLE4:13},GamutMappingIntent:{LCS_GM_ABS_COLORIMETRIC:8,LCS_GM_BUSINESS:1,LCS_GM_GRAPHICS:2,LCS_GM_IMAGES:4}}}),constants}var BMPEncoder_1,hasRequiredBMPEncoder;function requireBMPEncoder(){if(hasRequiredBMPEncoder)return BMPEncoder_1;hasRequiredBMPEncoder=1;const{IOBuffer:r}=require$$0$3,a=requireConstants(),n=[];for(let l=0;l<=8;l++)n.push(255<<l);class t extends r{constructor(u){if(u.bitDepth!==1)throw new Error("Only bitDepth of 1 is supported");if(!u.height||!u.width)throw new Error("ImageData width and height are required");super(u.data),this.width=u.width,this.height=u.height,this.bitDepth=u.bitDepth,this.channels=u.channels,this.components=u.components}encode(){this.encoded=new r,this.encoded.skip(14),this.writeBitmapV5Header(),this.writeColorTable();const u=this.encoded.offset;return this.writePixelArray(),this.encoded.rewind(),this.writeBitmapFileHeader(u),this.encoded.toArray()}writePixelArray(){let u=this.encoded;const s=Math.floor((this.bitDepth*this.width+31)/32)*4,p=Math.ceil(this.bitDepth*this.width/8),d=s-p,h=this.bitDepth*this.width%8,N=h===0?0:8-h,Be=s*this.height;let b,E,de=0,pe=0,Ye=8;u.mark(),E=this.readUint8();for(let me=this.height-1;me>=0;me--){const Le=me===0;u.reset(),u.skip(me*s);for(let nt=0;nt<p;nt++){const tt=nt===p-1;pe<=N&&tt?(u.writeByte(E<<pe),(N===0||N===pe)&&!Le&&(b=E,E=this.readByte())):pe===0?(b=E,E=this.readUint8(),u.writeByte(b)):(b=E,E=this.readUint8(),u.writeByte(b<<pe&n[pe]|E>>Ye)),tt&&(de+=h||0,u.skip(d),pe=de%8,Ye=8-pe)}}s>p&&(u.reset(),u.skip(Be-1),u.writeUint8(0))}writeColorTable(){this.encoded.writeUint32(0).writeUint32(16777215)}writeBitmapFileHeader(u){this.encoded.writeChars("BM").writeInt32(this.encoded.lastWrittenByte).writeUint16(0).writeUint16(0).writeUint32(u)}writeBitmapV5Header(){const s=Math.floor((this.bitDepth*this.width+31)/32)*4*this.height;this.encoded.writeUint32(124).writeInt32(this.width).writeInt32(this.height).writeUint16(1).writeUint16(this.bitDepth).writeUint32(a.BITMAPV5HEADER.Compression.BI_RGB).writeUint32(s).writeInt32(0).writeInt32(0).writeUint32(Math.pow(2,this.bitDepth)).writeUint32(Math.pow(2,this.bitDepth)).writeUint32(4278190080).writeUint32(16711680).writeUint32(65280).writeUint32(255).writeUint32(a.BITMAPV5HEADER.LogicalColorSpace.LCS_sRGB).skip(36).skip(12).writeUint32(a.BITMAPV5HEADER.GamutMappingIntent.LCS_GM_IMAGES).skip(12)}}return BMPEncoder_1=t,BMPEncoder_1}var hasRequiredSrc$5;function requireSrc$5(){if(hasRequiredSrc$5)return src$5;hasRequiredSrc$5=1;const r=requireBMPEncoder();return src$5.encode=function(n){return new r(n).encode()},src$5}var srcExports$3=requireSrc$5();/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Z_FIXED$1=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN$1=2;function zero$1(r){let a=r.length;for(;--a>=0;)r[a]=0}const STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(r,a,n,t,l){this.static_tree=r,this.extra_bits=a,this.extra_base=n,this.elems=t,this.max_length=l,this.has_stree=r&&r.length}let static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(r,a){this.dyn_tree=r,this.max_code=0,this.stat_desc=a}const d_code=r=>r<256?_dist_code[r]:_dist_code[256+(r>>>7)],put_short=(r,a)=>{r.pending_buf[r.pending++]=a&255,r.pending_buf[r.pending++]=a>>>8&255},send_bits=(r,a,n)=>{r.bi_valid>Buf_size-n?(r.bi_buf|=a<<r.bi_valid&65535,put_short(r,r.bi_buf),r.bi_buf=a>>Buf_size-r.bi_valid,r.bi_valid+=n-Buf_size):(r.bi_buf|=a<<r.bi_valid&65535,r.bi_valid+=n)},send_code=(r,a,n)=>{send_bits(r,n[a*2],n[a*2+1])},bi_reverse=(r,a)=>{let n=0;do n|=r&1,r>>>=1,n<<=1;while(--a>0);return n>>>1},bi_flush=r=>{r.bi_valid===16?(put_short(r,r.bi_buf),r.bi_buf=0,r.bi_valid=0):r.bi_valid>=8&&(r.pending_buf[r.pending++]=r.bi_buf&255,r.bi_buf>>=8,r.bi_valid-=8)},gen_bitlen=(r,a)=>{const n=a.dyn_tree,t=a.max_code,l=a.stat_desc.static_tree,u=a.stat_desc.has_stree,s=a.stat_desc.extra_bits,p=a.stat_desc.extra_base,d=a.stat_desc.max_length;let h,N,Be,b,E,de,pe=0;for(b=0;b<=MAX_BITS$1;b++)r.bl_count[b]=0;for(n[r.heap[r.heap_max]*2+1]=0,h=r.heap_max+1;h<HEAP_SIZE$1;h++)N=r.heap[h],b=n[n[N*2+1]*2+1]+1,b>d&&(b=d,pe++),n[N*2+1]=b,!(N>t)&&(r.bl_count[b]++,E=0,N>=p&&(E=s[N-p]),de=n[N*2],r.opt_len+=de*(b+E),u&&(r.static_len+=de*(l[N*2+1]+E)));if(pe!==0){do{for(b=d-1;r.bl_count[b]===0;)b--;r.bl_count[b]--,r.bl_count[b+1]+=2,r.bl_count[d]--,pe-=2}while(pe>0);for(b=d;b!==0;b--)for(N=r.bl_count[b];N!==0;)Be=r.heap[--h],!(Be>t)&&(n[Be*2+1]!==b&&(r.opt_len+=(b-n[Be*2+1])*n[Be*2],n[Be*2+1]=b),N--)}},gen_codes=(r,a,n)=>{const t=new Array(MAX_BITS$1+1);let l=0,u,s;for(u=1;u<=MAX_BITS$1;u++)l=l+n[u-1]<<1,t[u]=l;for(s=0;s<=a;s++){let p=r[s*2+1];p!==0&&(r[s*2]=bi_reverse(t[p]++,p))}},tr_static_init=()=>{let r,a,n,t,l;const u=new Array(MAX_BITS$1+1);for(n=0,t=0;t<LENGTH_CODES$1-1;t++)for(base_length[t]=n,r=0;r<1<<extra_lbits[t];r++)_length_code[n++]=t;for(_length_code[n-1]=t,l=0,t=0;t<16;t++)for(base_dist[t]=l,r=0;r<1<<extra_dbits[t];r++)_dist_code[l++]=t;for(l>>=7;t<D_CODES$1;t++)for(base_dist[t]=l<<7,r=0;r<1<<extra_dbits[t]-7;r++)_dist_code[256+l++]=t;for(a=0;a<=MAX_BITS$1;a++)u[a]=0;for(r=0;r<=143;)static_ltree[r*2+1]=8,r++,u[8]++;for(;r<=255;)static_ltree[r*2+1]=9,r++,u[9]++;for(;r<=279;)static_ltree[r*2+1]=7,r++,u[7]++;for(;r<=287;)static_ltree[r*2+1]=8,r++,u[8]++;for(gen_codes(static_ltree,L_CODES$1+1,u),r=0;r<D_CODES$1;r++)static_dtree[r*2+1]=5,static_dtree[r*2]=bi_reverse(r,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)},init_block=r=>{let a;for(a=0;a<L_CODES$1;a++)r.dyn_ltree[a*2]=0;for(a=0;a<D_CODES$1;a++)r.dyn_dtree[a*2]=0;for(a=0;a<BL_CODES$1;a++)r.bl_tree[a*2]=0;r.dyn_ltree[END_BLOCK*2]=1,r.opt_len=r.static_len=0,r.sym_next=r.matches=0},bi_windup=r=>{r.bi_valid>8?put_short(r,r.bi_buf):r.bi_valid>0&&(r.pending_buf[r.pending++]=r.bi_buf),r.bi_buf=0,r.bi_valid=0},smaller=(r,a,n,t)=>{const l=a*2,u=n*2;return r[l]<r[u]||r[l]===r[u]&&t[a]<=t[n]},pqdownheap=(r,a,n)=>{const t=r.heap[n];let l=n<<1;for(;l<=r.heap_len&&(l<r.heap_len&&smaller(a,r.heap[l+1],r.heap[l],r.depth)&&l++,!smaller(a,t,r.heap[l],r.depth));)r.heap[n]=r.heap[l],n=l,l<<=1;r.heap[n]=t},compress_block=(r,a,n)=>{let t,l,u=0,s,p;if(r.sym_next!==0)do t=r.pending_buf[r.sym_buf+u++]&255,t+=(r.pending_buf[r.sym_buf+u++]&255)<<8,l=r.pending_buf[r.sym_buf+u++],t===0?send_code(r,l,a):(s=_length_code[l],send_code(r,s+LITERALS$1+1,a),p=extra_lbits[s],p!==0&&(l-=base_length[s],send_bits(r,l,p)),t--,s=d_code(t),send_code(r,s,n),p=extra_dbits[s],p!==0&&(t-=base_dist[s],send_bits(r,t,p)));while(u<r.sym_next);send_code(r,END_BLOCK,a)},build_tree=(r,a)=>{const n=a.dyn_tree,t=a.stat_desc.static_tree,l=a.stat_desc.has_stree,u=a.stat_desc.elems;let s,p,d=-1,h;for(r.heap_len=0,r.heap_max=HEAP_SIZE$1,s=0;s<u;s++)n[s*2]!==0?(r.heap[++r.heap_len]=d=s,r.depth[s]=0):n[s*2+1]=0;for(;r.heap_len<2;)h=r.heap[++r.heap_len]=d<2?++d:0,n[h*2]=1,r.depth[h]=0,r.opt_len--,l&&(r.static_len-=t[h*2+1]);for(a.max_code=d,s=r.heap_len>>1;s>=1;s--)pqdownheap(r,n,s);h=u;do s=r.heap[1],r.heap[1]=r.heap[r.heap_len--],pqdownheap(r,n,1),p=r.heap[1],r.heap[--r.heap_max]=s,r.heap[--r.heap_max]=p,n[h*2]=n[s*2]+n[p*2],r.depth[h]=(r.depth[s]>=r.depth[p]?r.depth[s]:r.depth[p])+1,n[s*2+1]=n[p*2+1]=h,r.heap[1]=h++,pqdownheap(r,n,1);while(r.heap_len>=2);r.heap[--r.heap_max]=r.heap[1],gen_bitlen(r,a),gen_codes(n,d,r.bl_count)},scan_tree=(r,a,n)=>{let t,l=-1,u,s=a[0*2+1],p=0,d=7,h=4;for(s===0&&(d=138,h=3),a[(n+1)*2+1]=65535,t=0;t<=n;t++)u=s,s=a[(t+1)*2+1],!(++p<d&&u===s)&&(p<h?r.bl_tree[u*2]+=p:u!==0?(u!==l&&r.bl_tree[u*2]++,r.bl_tree[REP_3_6*2]++):p<=10?r.bl_tree[REPZ_3_10*2]++:r.bl_tree[REPZ_11_138*2]++,p=0,l=u,s===0?(d=138,h=3):u===s?(d=6,h=3):(d=7,h=4))},send_tree=(r,a,n)=>{let t,l=-1,u,s=a[0*2+1],p=0,d=7,h=4;for(s===0&&(d=138,h=3),t=0;t<=n;t++)if(u=s,s=a[(t+1)*2+1],!(++p<d&&u===s)){if(p<h)do send_code(r,u,r.bl_tree);while(--p!==0);else u!==0?(u!==l&&(send_code(r,u,r.bl_tree),p--),send_code(r,REP_3_6,r.bl_tree),send_bits(r,p-3,2)):p<=10?(send_code(r,REPZ_3_10,r.bl_tree),send_bits(r,p-3,3)):(send_code(r,REPZ_11_138,r.bl_tree),send_bits(r,p-11,7));p=0,l=u,s===0?(d=138,h=3):u===s?(d=6,h=3):(d=7,h=4)}},build_bl_tree=r=>{let a;for(scan_tree(r,r.dyn_ltree,r.l_desc.max_code),scan_tree(r,r.dyn_dtree,r.d_desc.max_code),build_tree(r,r.bl_desc),a=BL_CODES$1-1;a>=3&&r.bl_tree[bl_order[a]*2+1]===0;a--);return r.opt_len+=3*(a+1)+5+5+4,a},send_all_trees=(r,a,n,t)=>{let l;for(send_bits(r,a-257,5),send_bits(r,n-1,5),send_bits(r,t-4,4),l=0;l<t;l++)send_bits(r,r.bl_tree[bl_order[l]*2+1],3);send_tree(r,r.dyn_ltree,a-1),send_tree(r,r.dyn_dtree,n-1)},detect_data_type=r=>{let a=4093624447,n;for(n=0;n<=31;n++,a>>>=1)if(a&1&&r.dyn_ltree[n*2]!==0)return Z_BINARY;if(r.dyn_ltree[9*2]!==0||r.dyn_ltree[10*2]!==0||r.dyn_ltree[13*2]!==0)return Z_TEXT;for(n=32;n<LITERALS$1;n++)if(r.dyn_ltree[n*2]!==0)return Z_TEXT;return Z_BINARY};let static_init_done=!1;const _tr_init$1=r=>{static_init_done||(tr_static_init(),static_init_done=!0),r.l_desc=new TreeDesc(r.dyn_ltree,static_l_desc),r.d_desc=new TreeDesc(r.dyn_dtree,static_d_desc),r.bl_desc=new TreeDesc(r.bl_tree,static_bl_desc),r.bi_buf=0,r.bi_valid=0,init_block(r)},_tr_stored_block$1=(r,a,n,t)=>{send_bits(r,(STORED_BLOCK<<1)+(t?1:0),3),bi_windup(r),put_short(r,n),put_short(r,~n),n&&r.pending_buf.set(r.window.subarray(a,a+n),r.pending),r.pending+=n},_tr_align$1=r=>{send_bits(r,STATIC_TREES<<1,3),send_code(r,END_BLOCK,static_ltree),bi_flush(r)},_tr_flush_block$1=(r,a,n,t)=>{let l,u,s=0;r.level>0?(r.strm.data_type===Z_UNKNOWN$1&&(r.strm.data_type=detect_data_type(r)),build_tree(r,r.l_desc),build_tree(r,r.d_desc),s=build_bl_tree(r),l=r.opt_len+3+7>>>3,u=r.static_len+3+7>>>3,u<=l&&(l=u)):l=u=n+5,n+4<=l&&a!==-1?_tr_stored_block$1(r,a,n,t):r.strategy===Z_FIXED$1||u===l?(send_bits(r,(STATIC_TREES<<1)+(t?1:0),3),compress_block(r,static_ltree,static_dtree)):(send_bits(r,(DYN_TREES<<1)+(t?1:0),3),send_all_trees(r,r.l_desc.max_code+1,r.d_desc.max_code+1,s+1),compress_block(r,r.dyn_ltree,r.dyn_dtree)),init_block(r),t&&bi_windup(r)},_tr_tally$1=(r,a,n)=>(r.pending_buf[r.sym_buf+r.sym_next++]=a,r.pending_buf[r.sym_buf+r.sym_next++]=a>>8,r.pending_buf[r.sym_buf+r.sym_next++]=n,a===0?r.dyn_ltree[n*2]++:(r.matches++,a--,r.dyn_ltree[(_length_code[n]+LITERALS$1+1)*2]++,r.dyn_dtree[d_code(a)*2]++),r.sym_next===r.sym_end);var _tr_init_1=_tr_init$1,_tr_stored_block_1=_tr_stored_block$1,_tr_flush_block_1=_tr_flush_block$1,_tr_tally_1=_tr_tally$1,_tr_align_1=_tr_align$1,trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};const adler32=(r,a,n,t)=>{let l=r&65535|0,u=r>>>16&65535|0,s=0;for(;n!==0;){s=n>2e3?2e3:n,n-=s;do l=l+a[t++]|0,u=u+l|0;while(--s);l%=65521,u%=65521}return l|u<<16|0};var adler32_1=adler32;const makeTable=()=>{let r,a=[];for(var n=0;n<256;n++){r=n;for(var t=0;t<8;t++)r=r&1?3988292384^r>>>1:r>>>1;a[n]=r}return a},crcTable$1=new Uint32Array(makeTable()),crc32=(r,a,n,t)=>{const l=crcTable$1,u=t+n;r^=-1;for(let s=t;s<u;s++)r=r>>>8^l[(r^a[s])&255];return r^-1};var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init,_tr_stored_block,_tr_flush_block,_tr_tally,_tr_align}=trees,{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_PARTIAL_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$3,Z_BLOCK:Z_BLOCK$1,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_UNKNOWN,Z_DEFLATED:Z_DEFLATED$2}=constants$2,MAX_MEM_LEVEL=9,MAX_WBITS$1=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,GZIP_STATE=57,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,err=(r,a)=>(r.msg=messages[a],a),rank=r=>r*2-(r>4?9:0),zero=r=>{let a=r.length;for(;--a>=0;)r[a]=0},slide_hash=r=>{let a,n,t,l=r.w_size;a=r.hash_size,t=a;do n=r.head[--t],r.head[t]=n>=l?n-l:0;while(--a);a=l,t=a;do n=r.prev[--t],r.prev[t]=n>=l?n-l:0;while(--a)};let HASH_ZLIB=(r,a,n)=>(a<<r.hash_shift^n)&r.hash_mask,HASH=HASH_ZLIB;const flush_pending=r=>{const a=r.state;let n=a.pending;n>r.avail_out&&(n=r.avail_out),n!==0&&(r.output.set(a.pending_buf.subarray(a.pending_out,a.pending_out+n),r.next_out),r.next_out+=n,a.pending_out+=n,r.total_out+=n,r.avail_out-=n,a.pending-=n,a.pending===0&&(a.pending_out=0))},flush_block_only=(r,a)=>{_tr_flush_block(r,r.block_start>=0?r.block_start:-1,r.strstart-r.block_start,a),r.block_start=r.strstart,flush_pending(r.strm)},put_byte=(r,a)=>{r.pending_buf[r.pending++]=a},putShortMSB=(r,a)=>{r.pending_buf[r.pending++]=a>>>8&255,r.pending_buf[r.pending++]=a&255},read_buf=(r,a,n,t)=>{let l=r.avail_in;return l>t&&(l=t),l===0?0:(r.avail_in-=l,a.set(r.input.subarray(r.next_in,r.next_in+l),n),r.state.wrap===1?r.adler=adler32_1(r.adler,a,l,n):r.state.wrap===2&&(r.adler=crc32_1(r.adler,a,l,n)),r.next_in+=l,r.total_in+=l,l)},longest_match=(r,a)=>{let n=r.max_chain_length,t=r.strstart,l,u,s=r.prev_length,p=r.nice_match;const d=r.strstart>r.w_size-MIN_LOOKAHEAD?r.strstart-(r.w_size-MIN_LOOKAHEAD):0,h=r.window,N=r.w_mask,Be=r.prev,b=r.strstart+MAX_MATCH;let E=h[t+s-1],de=h[t+s];r.prev_length>=r.good_match&&(n>>=2),p>r.lookahead&&(p=r.lookahead);do if(l=a,!(h[l+s]!==de||h[l+s-1]!==E||h[l]!==h[t]||h[++l]!==h[t+1])){t+=2,l++;do;while(h[++t]===h[++l]&&h[++t]===h[++l]&&h[++t]===h[++l]&&h[++t]===h[++l]&&h[++t]===h[++l]&&h[++t]===h[++l]&&h[++t]===h[++l]&&h[++t]===h[++l]&&t<b);if(u=MAX_MATCH-(b-t),t=b-MAX_MATCH,u>s){if(r.match_start=a,s=u,u>=p)break;E=h[t+s-1],de=h[t+s]}}while((a=Be[a&N])>d&&--n!==0);return s<=r.lookahead?s:r.lookahead},fill_window=r=>{const a=r.w_size;let n,t,l;do{if(t=r.window_size-r.lookahead-r.strstart,r.strstart>=a+(a-MIN_LOOKAHEAD)&&(r.window.set(r.window.subarray(a,a+a-t),0),r.match_start-=a,r.strstart-=a,r.block_start-=a,r.insert>r.strstart&&(r.insert=r.strstart),slide_hash(r),t+=a),r.strm.avail_in===0)break;if(n=read_buf(r.strm,r.window,r.strstart+r.lookahead,t),r.lookahead+=n,r.lookahead+r.insert>=MIN_MATCH)for(l=r.strstart-r.insert,r.ins_h=r.window[l],r.ins_h=HASH(r,r.ins_h,r.window[l+1]);r.insert&&(r.ins_h=HASH(r,r.ins_h,r.window[l+MIN_MATCH-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++,r.insert--,!(r.lookahead+r.insert<MIN_MATCH)););}while(r.lookahead<MIN_LOOKAHEAD&&r.strm.avail_in!==0)},deflate_stored=(r,a)=>{let n=r.pending_buf_size-5>r.w_size?r.w_size:r.pending_buf_size-5,t,l,u,s=0,p=r.strm.avail_in;do{if(t=65535,u=r.bi_valid+42>>3,r.strm.avail_out<u||(u=r.strm.avail_out-u,l=r.strstart-r.block_start,t>l+r.strm.avail_in&&(t=l+r.strm.avail_in),t>u&&(t=u),t<n&&(t===0&&a!==Z_FINISH$3||a===Z_NO_FLUSH$2||t!==l+r.strm.avail_in)))break;s=a===Z_FINISH$3&&t===l+r.strm.avail_in?1:0,_tr_stored_block(r,0,0,s),r.pending_buf[r.pending-4]=t,r.pending_buf[r.pending-3]=t>>8,r.pending_buf[r.pending-2]=~t,r.pending_buf[r.pending-1]=~t>>8,flush_pending(r.strm),l&&(l>t&&(l=t),r.strm.output.set(r.window.subarray(r.block_start,r.block_start+l),r.strm.next_out),r.strm.next_out+=l,r.strm.avail_out-=l,r.strm.total_out+=l,r.block_start+=l,t-=l),t&&(read_buf(r.strm,r.strm.output,r.strm.next_out,t),r.strm.next_out+=t,r.strm.avail_out-=t,r.strm.total_out+=t)}while(s===0);return p-=r.strm.avail_in,p&&(p>=r.w_size?(r.matches=2,r.window.set(r.strm.input.subarray(r.strm.next_in-r.w_size,r.strm.next_in),0),r.strstart=r.w_size,r.insert=r.strstart):(r.window_size-r.strstart<=p&&(r.strstart-=r.w_size,r.window.set(r.window.subarray(r.w_size,r.w_size+r.strstart),0),r.matches<2&&r.matches++,r.insert>r.strstart&&(r.insert=r.strstart)),r.window.set(r.strm.input.subarray(r.strm.next_in-p,r.strm.next_in),r.strstart),r.strstart+=p,r.insert+=p>r.w_size-r.insert?r.w_size-r.insert:p),r.block_start=r.strstart),r.high_water<r.strstart&&(r.high_water=r.strstart),s?BS_FINISH_DONE:a!==Z_NO_FLUSH$2&&a!==Z_FINISH$3&&r.strm.avail_in===0&&r.strstart===r.block_start?BS_BLOCK_DONE:(u=r.window_size-r.strstart,r.strm.avail_in>u&&r.block_start>=r.w_size&&(r.block_start-=r.w_size,r.strstart-=r.w_size,r.window.set(r.window.subarray(r.w_size,r.w_size+r.strstart),0),r.matches<2&&r.matches++,u+=r.w_size,r.insert>r.strstart&&(r.insert=r.strstart)),u>r.strm.avail_in&&(u=r.strm.avail_in),u&&(read_buf(r.strm,r.window,r.strstart,u),r.strstart+=u,r.insert+=u>r.w_size-r.insert?r.w_size-r.insert:u),r.high_water<r.strstart&&(r.high_water=r.strstart),u=r.bi_valid+42>>3,u=r.pending_buf_size-u>65535?65535:r.pending_buf_size-u,n=u>r.w_size?r.w_size:u,l=r.strstart-r.block_start,(l>=n||(l||a===Z_FINISH$3)&&a!==Z_NO_FLUSH$2&&r.strm.avail_in===0&&l<=u)&&(t=l>u?u:l,s=a===Z_FINISH$3&&r.strm.avail_in===0&&t===l?1:0,_tr_stored_block(r,r.block_start,t,s),r.block_start+=t,flush_pending(r.strm)),s?BS_FINISH_STARTED:BS_NEED_MORE)},deflate_fast=(r,a)=>{let n,t;for(;;){if(r.lookahead<MIN_LOOKAHEAD){if(fill_window(r),r.lookahead<MIN_LOOKAHEAD&&a===Z_NO_FLUSH$2)return BS_NEED_MORE;if(r.lookahead===0)break}if(n=0,r.lookahead>=MIN_MATCH&&(r.ins_h=HASH(r,r.ins_h,r.window[r.strstart+MIN_MATCH-1]),n=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),n!==0&&r.strstart-n<=r.w_size-MIN_LOOKAHEAD&&(r.match_length=longest_match(r,n)),r.match_length>=MIN_MATCH)if(t=_tr_tally(r,r.strstart-r.match_start,r.match_length-MIN_MATCH),r.lookahead-=r.match_length,r.match_length<=r.max_lazy_match&&r.lookahead>=MIN_MATCH){r.match_length--;do r.strstart++,r.ins_h=HASH(r,r.ins_h,r.window[r.strstart+MIN_MATCH-1]),n=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart;while(--r.match_length!==0);r.strstart++}else r.strstart+=r.match_length,r.match_length=0,r.ins_h=r.window[r.strstart],r.ins_h=HASH(r,r.ins_h,r.window[r.strstart+1]);else t=_tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++;if(t&&(flush_block_only(r,!1),r.strm.avail_out===0))return BS_NEED_MORE}return r.insert=r.strstart<MIN_MATCH-1?r.strstart:MIN_MATCH-1,a===Z_FINISH$3?(flush_block_only(r,!0),r.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):r.sym_next&&(flush_block_only(r,!1),r.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_slow=(r,a)=>{let n,t,l;for(;;){if(r.lookahead<MIN_LOOKAHEAD){if(fill_window(r),r.lookahead<MIN_LOOKAHEAD&&a===Z_NO_FLUSH$2)return BS_NEED_MORE;if(r.lookahead===0)break}if(n=0,r.lookahead>=MIN_MATCH&&(r.ins_h=HASH(r,r.ins_h,r.window[r.strstart+MIN_MATCH-1]),n=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),r.prev_length=r.match_length,r.prev_match=r.match_start,r.match_length=MIN_MATCH-1,n!==0&&r.prev_length<r.max_lazy_match&&r.strstart-n<=r.w_size-MIN_LOOKAHEAD&&(r.match_length=longest_match(r,n),r.match_length<=5&&(r.strategy===Z_FILTERED||r.match_length===MIN_MATCH&&r.strstart-r.match_start>4096)&&(r.match_length=MIN_MATCH-1)),r.prev_length>=MIN_MATCH&&r.match_length<=r.prev_length){l=r.strstart+r.lookahead-MIN_MATCH,t=_tr_tally(r,r.strstart-1-r.prev_match,r.prev_length-MIN_MATCH),r.lookahead-=r.prev_length-1,r.prev_length-=2;do++r.strstart<=l&&(r.ins_h=HASH(r,r.ins_h,r.window[r.strstart+MIN_MATCH-1]),n=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart);while(--r.prev_length!==0);if(r.match_available=0,r.match_length=MIN_MATCH-1,r.strstart++,t&&(flush_block_only(r,!1),r.strm.avail_out===0))return BS_NEED_MORE}else if(r.match_available){if(t=_tr_tally(r,0,r.window[r.strstart-1]),t&&flush_block_only(r,!1),r.strstart++,r.lookahead--,r.strm.avail_out===0)return BS_NEED_MORE}else r.match_available=1,r.strstart++,r.lookahead--}return r.match_available&&(t=_tr_tally(r,0,r.window[r.strstart-1]),r.match_available=0),r.insert=r.strstart<MIN_MATCH-1?r.strstart:MIN_MATCH-1,a===Z_FINISH$3?(flush_block_only(r,!0),r.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):r.sym_next&&(flush_block_only(r,!1),r.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_rle=(r,a)=>{let n,t,l,u;const s=r.window;for(;;){if(r.lookahead<=MAX_MATCH){if(fill_window(r),r.lookahead<=MAX_MATCH&&a===Z_NO_FLUSH$2)return BS_NEED_MORE;if(r.lookahead===0)break}if(r.match_length=0,r.lookahead>=MIN_MATCH&&r.strstart>0&&(l=r.strstart-1,t=s[l],t===s[++l]&&t===s[++l]&&t===s[++l])){u=r.strstart+MAX_MATCH;do;while(t===s[++l]&&t===s[++l]&&t===s[++l]&&t===s[++l]&&t===s[++l]&&t===s[++l]&&t===s[++l]&&t===s[++l]&&l<u);r.match_length=MAX_MATCH-(u-l),r.match_length>r.lookahead&&(r.match_length=r.lookahead)}if(r.match_length>=MIN_MATCH?(n=_tr_tally(r,1,r.match_length-MIN_MATCH),r.lookahead-=r.match_length,r.strstart+=r.match_length,r.match_length=0):(n=_tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++),n&&(flush_block_only(r,!1),r.strm.avail_out===0))return BS_NEED_MORE}return r.insert=0,a===Z_FINISH$3?(flush_block_only(r,!0),r.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):r.sym_next&&(flush_block_only(r,!1),r.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_huff=(r,a)=>{let n;for(;;){if(r.lookahead===0&&(fill_window(r),r.lookahead===0)){if(a===Z_NO_FLUSH$2)return BS_NEED_MORE;break}if(r.match_length=0,n=_tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++,n&&(flush_block_only(r,!1),r.strm.avail_out===0))return BS_NEED_MORE}return r.insert=0,a===Z_FINISH$3?(flush_block_only(r,!0),r.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):r.sym_next&&(flush_block_only(r,!1),r.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE};function Config(r,a,n,t,l){this.good_length=r,this.max_lazy=a,this.nice_length=n,this.max_chain=t,this.func=l}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],lm_init=r=>{r.window_size=2*r.w_size,zero(r.head),r.max_lazy_match=configuration_table[r.level].max_lazy,r.good_match=configuration_table[r.level].good_length,r.nice_match=configuration_table[r.level].nice_length,r.max_chain_length=configuration_table[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=MIN_MATCH-1,r.match_available=0,r.ins_h=0};function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(HEAP_SIZE*2),this.dyn_dtree=new Uint16Array((2*D_CODES+1)*2),this.bl_tree=new Uint16Array((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(MAX_BITS+1),this.heap=new Uint16Array(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*L_CODES+1),zero(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const deflateStateCheck=r=>{if(!r)return 1;const a=r.state;return!a||a.strm!==r||a.status!==INIT_STATE&&a.status!==GZIP_STATE&&a.status!==EXTRA_STATE&&a.status!==NAME_STATE&&a.status!==COMMENT_STATE&&a.status!==HCRC_STATE&&a.status!==BUSY_STATE&&a.status!==FINISH_STATE?1:0},deflateResetKeep=r=>{if(deflateStateCheck(r))return err(r,Z_STREAM_ERROR$2);r.total_in=r.total_out=0,r.data_type=Z_UNKNOWN;const a=r.state;return a.pending=0,a.pending_out=0,a.wrap<0&&(a.wrap=-a.wrap),a.status=a.wrap===2?GZIP_STATE:a.wrap?INIT_STATE:BUSY_STATE,r.adler=a.wrap===2?0:1,a.last_flush=-2,_tr_init(a),Z_OK$3},deflateReset=r=>{const a=deflateResetKeep(r);return a===Z_OK$3&&lm_init(r.state),a},deflateSetHeader=(r,a)=>deflateStateCheck(r)||r.state.wrap!==2?Z_STREAM_ERROR$2:(r.state.gzhead=a,Z_OK$3),deflateInit2=(r,a,n,t,l,u)=>{if(!r)return Z_STREAM_ERROR$2;let s=1;if(a===Z_DEFAULT_COMPRESSION$1&&(a=6),t<0?(s=0,t=-t):t>15&&(s=2,t-=16),l<1||l>MAX_MEM_LEVEL||n!==Z_DEFLATED$2||t<8||t>15||a<0||a>9||u<0||u>Z_FIXED||t===8&&s!==1)return err(r,Z_STREAM_ERROR$2);t===8&&(t=9);const p=new DeflateState;return r.state=p,p.strm=r,p.status=INIT_STATE,p.wrap=s,p.gzhead=null,p.w_bits=t,p.w_size=1<<p.w_bits,p.w_mask=p.w_size-1,p.hash_bits=l+7,p.hash_size=1<<p.hash_bits,p.hash_mask=p.hash_size-1,p.hash_shift=~~((p.hash_bits+MIN_MATCH-1)/MIN_MATCH),p.window=new Uint8Array(p.w_size*2),p.head=new Uint16Array(p.hash_size),p.prev=new Uint16Array(p.w_size),p.lit_bufsize=1<<l+6,p.pending_buf_size=p.lit_bufsize*4,p.pending_buf=new Uint8Array(p.pending_buf_size),p.sym_buf=p.lit_bufsize,p.sym_end=(p.lit_bufsize-1)*3,p.level=a,p.strategy=u,p.method=n,deflateReset(r)},deflateInit=(r,a)=>deflateInit2(r,a,Z_DEFLATED$2,MAX_WBITS$1,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY$1),deflate$2=(r,a)=>{if(deflateStateCheck(r)||a>Z_BLOCK$1||a<0)return r?err(r,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;const n=r.state;if(!r.output||r.avail_in!==0&&!r.input||n.status===FINISH_STATE&&a!==Z_FINISH$3)return err(r,r.avail_out===0?Z_BUF_ERROR$1:Z_STREAM_ERROR$2);const t=n.last_flush;if(n.last_flush=a,n.pending!==0){if(flush_pending(r),r.avail_out===0)return n.last_flush=-1,Z_OK$3}else if(r.avail_in===0&&rank(a)<=rank(t)&&a!==Z_FINISH$3)return err(r,Z_BUF_ERROR$1);if(n.status===FINISH_STATE&&r.avail_in!==0)return err(r,Z_BUF_ERROR$1);if(n.status===INIT_STATE&&n.wrap===0&&(n.status=BUSY_STATE),n.status===INIT_STATE){let l=Z_DEFLATED$2+(n.w_bits-8<<4)<<8,u=-1;if(n.strategy>=Z_HUFFMAN_ONLY||n.level<2?u=0:n.level<6?u=1:n.level===6?u=2:u=3,l|=u<<6,n.strstart!==0&&(l|=PRESET_DICT),l+=31-l%31,putShortMSB(n,l),n.strstart!==0&&(putShortMSB(n,r.adler>>>16),putShortMSB(n,r.adler&65535)),r.adler=1,n.status=BUSY_STATE,flush_pending(r),n.pending!==0)return n.last_flush=-1,Z_OK$3}if(n.status===GZIP_STATE){if(r.adler=0,put_byte(n,31),put_byte(n,139),put_byte(n,8),n.gzhead)put_byte(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),put_byte(n,n.gzhead.time&255),put_byte(n,n.gzhead.time>>8&255),put_byte(n,n.gzhead.time>>16&255),put_byte(n,n.gzhead.time>>24&255),put_byte(n,n.level===9?2:n.strategy>=Z_HUFFMAN_ONLY||n.level<2?4:0),put_byte(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(put_byte(n,n.gzhead.extra.length&255),put_byte(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(r.adler=crc32_1(r.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=EXTRA_STATE;else if(put_byte(n,0),put_byte(n,0),put_byte(n,0),put_byte(n,0),put_byte(n,0),put_byte(n,n.level===9?2:n.strategy>=Z_HUFFMAN_ONLY||n.level<2?4:0),put_byte(n,OS_CODE),n.status=BUSY_STATE,flush_pending(r),n.pending!==0)return n.last_flush=-1,Z_OK$3}if(n.status===EXTRA_STATE){if(n.gzhead.extra){let l=n.pending,u=(n.gzhead.extra.length&65535)-n.gzindex;for(;n.pending+u>n.pending_buf_size;){let p=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+p),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>l&&(r.adler=crc32_1(r.adler,n.pending_buf,n.pending-l,l)),n.gzindex+=p,flush_pending(r),n.pending!==0)return n.last_flush=-1,Z_OK$3;l=0,u-=p}let s=new Uint8Array(n.gzhead.extra);n.pending_buf.set(s.subarray(n.gzindex,n.gzindex+u),n.pending),n.pending+=u,n.gzhead.hcrc&&n.pending>l&&(r.adler=crc32_1(r.adler,n.pending_buf,n.pending-l,l)),n.gzindex=0}n.status=NAME_STATE}if(n.status===NAME_STATE){if(n.gzhead.name){let l=n.pending,u;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>l&&(r.adler=crc32_1(r.adler,n.pending_buf,n.pending-l,l)),flush_pending(r),n.pending!==0)return n.last_flush=-1,Z_OK$3;l=0}n.gzindex<n.gzhead.name.length?u=n.gzhead.name.charCodeAt(n.gzindex++)&255:u=0,put_byte(n,u)}while(u!==0);n.gzhead.hcrc&&n.pending>l&&(r.adler=crc32_1(r.adler,n.pending_buf,n.pending-l,l)),n.gzindex=0}n.status=COMMENT_STATE}if(n.status===COMMENT_STATE){if(n.gzhead.comment){let l=n.pending,u;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>l&&(r.adler=crc32_1(r.adler,n.pending_buf,n.pending-l,l)),flush_pending(r),n.pending!==0)return n.last_flush=-1,Z_OK$3;l=0}n.gzindex<n.gzhead.comment.length?u=n.gzhead.comment.charCodeAt(n.gzindex++)&255:u=0,put_byte(n,u)}while(u!==0);n.gzhead.hcrc&&n.pending>l&&(r.adler=crc32_1(r.adler,n.pending_buf,n.pending-l,l))}n.status=HCRC_STATE}if(n.status===HCRC_STATE){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(flush_pending(r),n.pending!==0))return n.last_flush=-1,Z_OK$3;put_byte(n,r.adler&255),put_byte(n,r.adler>>8&255),r.adler=0}if(n.status=BUSY_STATE,flush_pending(r),n.pending!==0)return n.last_flush=-1,Z_OK$3}if(r.avail_in!==0||n.lookahead!==0||a!==Z_NO_FLUSH$2&&n.status!==FINISH_STATE){let l=n.level===0?deflate_stored(n,a):n.strategy===Z_HUFFMAN_ONLY?deflate_huff(n,a):n.strategy===Z_RLE?deflate_rle(n,a):configuration_table[n.level].func(n,a);if((l===BS_FINISH_STARTED||l===BS_FINISH_DONE)&&(n.status=FINISH_STATE),l===BS_NEED_MORE||l===BS_FINISH_STARTED)return r.avail_out===0&&(n.last_flush=-1),Z_OK$3;if(l===BS_BLOCK_DONE&&(a===Z_PARTIAL_FLUSH?_tr_align(n):a!==Z_BLOCK$1&&(_tr_stored_block(n,0,0,!1),a===Z_FULL_FLUSH$1&&(zero(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),flush_pending(r),r.avail_out===0))return n.last_flush=-1,Z_OK$3}return a!==Z_FINISH$3?Z_OK$3:n.wrap<=0?Z_STREAM_END$3:(n.wrap===2?(put_byte(n,r.adler&255),put_byte(n,r.adler>>8&255),put_byte(n,r.adler>>16&255),put_byte(n,r.adler>>24&255),put_byte(n,r.total_in&255),put_byte(n,r.total_in>>8&255),put_byte(n,r.total_in>>16&255),put_byte(n,r.total_in>>24&255)):(putShortMSB(n,r.adler>>>16),putShortMSB(n,r.adler&65535)),flush_pending(r),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?Z_OK$3:Z_STREAM_END$3)},deflateEnd=r=>{if(deflateStateCheck(r))return Z_STREAM_ERROR$2;const a=r.state.status;return r.state=null,a===BUSY_STATE?err(r,Z_DATA_ERROR$2):Z_OK$3},deflateSetDictionary=(r,a)=>{let n=a.length;if(deflateStateCheck(r))return Z_STREAM_ERROR$2;const t=r.state,l=t.wrap;if(l===2||l===1&&t.status!==INIT_STATE||t.lookahead)return Z_STREAM_ERROR$2;if(l===1&&(r.adler=adler32_1(r.adler,a,n,0)),t.wrap=0,n>=t.w_size){l===0&&(zero(t.head),t.strstart=0,t.block_start=0,t.insert=0);let d=new Uint8Array(t.w_size);d.set(a.subarray(n-t.w_size,n),0),a=d,n=t.w_size}const u=r.avail_in,s=r.next_in,p=r.input;for(r.avail_in=n,r.next_in=0,r.input=a,fill_window(t);t.lookahead>=MIN_MATCH;){let d=t.strstart,h=t.lookahead-(MIN_MATCH-1);do t.ins_h=HASH(t,t.ins_h,t.window[d+MIN_MATCH-1]),t.prev[d&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=d,d++;while(--h);t.strstart=d,t.lookahead=MIN_MATCH-1,fill_window(t)}return t.strstart+=t.lookahead,t.block_start=t.strstart,t.insert=t.lookahead,t.lookahead=0,t.match_length=t.prev_length=MIN_MATCH-1,t.match_available=0,r.next_in=s,r.input=p,r.avail_in=u,t.wrap=l,Z_OK$3};var deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2$1=deflate$2,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1$2={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2$1,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo};const _has=(r,a)=>Object.prototype.hasOwnProperty.call(r,a);var assign=function(r){const a=Array.prototype.slice.call(arguments,1);for(;a.length;){const n=a.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const t in n)_has(n,t)&&(r[t]=n[t])}}return r},flattenChunks=r=>{let a=0;for(let t=0,l=r.length;t<l;t++)a+=r[t].length;const n=new Uint8Array(a);for(let t=0,l=0,u=r.length;t<u;t++){let s=r[t];n.set(s,l),l+=s.length}return n},common$1={assign,flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let r=0;r<256;r++)_utf8len[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let a,n,t,l,u,s=r.length,p=0;for(l=0;l<s;l++)n=r.charCodeAt(l),(n&64512)===55296&&l+1<s&&(t=r.charCodeAt(l+1),(t&64512)===56320&&(n=65536+(n-55296<<10)+(t-56320),l++)),p+=n<128?1:n<2048?2:n<65536?3:4;for(a=new Uint8Array(p),u=0,l=0;u<p;l++)n=r.charCodeAt(l),(n&64512)===55296&&l+1<s&&(t=r.charCodeAt(l+1),(t&64512)===56320&&(n=65536+(n-55296<<10)+(t-56320),l++)),n<128?a[u++]=n:n<2048?(a[u++]=192|n>>>6,a[u++]=128|n&63):n<65536?(a[u++]=224|n>>>12,a[u++]=128|n>>>6&63,a[u++]=128|n&63):(a[u++]=240|n>>>18,a[u++]=128|n>>>12&63,a[u++]=128|n>>>6&63,a[u++]=128|n&63);return a};const buf2binstring=(r,a)=>{if(a<65534&&r.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,r.length===a?r:r.subarray(0,a));let n="";for(let t=0;t<a;t++)n+=String.fromCharCode(r[t]);return n};var buf2string=(r,a)=>{const n=a||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,a));let t,l;const u=new Array(n*2);for(l=0,t=0;t<n;){let s=r[t++];if(s<128){u[l++]=s;continue}let p=_utf8len[s];if(p>4){u[l++]=65533,t+=p-1;continue}for(s&=p===2?31:p===3?15:7;p>1&&t<n;)s=s<<6|r[t++]&63,p--;if(p>1){u[l++]=65533;continue}s<65536?u[l++]=s:(s-=65536,u[l++]=55296|s>>10&1023,u[l++]=56320|s&1023)}return buf2binstring(u,l)},utf8border=(r,a)=>{a=a||r.length,a>r.length&&(a=r.length);let n=a-1;for(;n>=0&&(r[n]&192)===128;)n--;return n<0||n===0?a:n+_utf8len[r[n]]>a?n:a},strings={string2buf,buf2string,utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const toString$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH:Z_FINISH$2,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED:Z_DEFLATED$1}=constants$2;function Deflate$1(r){this.options=common$1.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},r||{});let a=this.options;a.raw&&a.windowBits>0?a.windowBits=-a.windowBits:a.gzip&&a.windowBits>0&&a.windowBits<16&&(a.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let n=deflate_1$2.deflateInit2(this.strm,a.level,a.method,a.windowBits,a.memLevel,a.strategy);if(n!==Z_OK$2)throw new Error(messages[n]);if(a.header&&deflate_1$2.deflateSetHeader(this.strm,a.header),a.dictionary){let t;if(typeof a.dictionary=="string"?t=strings.string2buf(a.dictionary):toString$1.call(a.dictionary)==="[object ArrayBuffer]"?t=new Uint8Array(a.dictionary):t=a.dictionary,n=deflate_1$2.deflateSetDictionary(this.strm,t),n!==Z_OK$2)throw new Error(messages[n]);this._dict_set=!0}}Deflate$1.prototype.push=function(r,a){const n=this.strm,t=this.options.chunkSize;let l,u;if(this.ended)return!1;for(a===~~a?u=a:u=a===!0?Z_FINISH$2:Z_NO_FLUSH$1,typeof r=="string"?n.input=strings.string2buf(r):toString$1.call(r)==="[object ArrayBuffer]"?n.input=new Uint8Array(r):n.input=r,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(t),n.next_out=0,n.avail_out=t),(u===Z_SYNC_FLUSH||u===Z_FULL_FLUSH)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(l=deflate_1$2.deflate(n,u),l===Z_STREAM_END$2)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),l=deflate_1$2.deflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===Z_OK$2;if(n.avail_out===0){this.onData(n.output);continue}if(u>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};Deflate$1.prototype.onData=function(r){this.chunks.push(r)};Deflate$1.prototype.onEnd=function(r){r===Z_OK$2&&(this.result=common$1.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function deflate$1(r,a){const n=new Deflate$1(a);if(n.push(r,!0),n.err)throw n.msg||messages[n.err];return n.result}var deflate_2=deflate$1,deflate_1$1={deflate:deflate_2};const BAD$1=16209,TYPE$1=16191;var inffast=function(a,n){let t,l,u,s,p,d,h,N,Be,b,E,de,pe,Ye,me,Le,nt,tt,ft,yt,gt,mt,wt,St;const bt=a.state;t=a.next_in,wt=a.input,l=t+(a.avail_in-5),u=a.next_out,St=a.output,s=u-(n-a.avail_out),p=u+(a.avail_out-257),d=bt.dmax,h=bt.wsize,N=bt.whave,Be=bt.wnext,b=bt.window,E=bt.hold,de=bt.bits,pe=bt.lencode,Ye=bt.distcode,me=(1<<bt.lenbits)-1,Le=(1<<bt.distbits)-1;e:do{de<15&&(E+=wt[t++]<<de,de+=8,E+=wt[t++]<<de,de+=8),nt=pe[E&me];t:for(;;){if(tt=nt>>>24,E>>>=tt,de-=tt,tt=nt>>>16&255,tt===0)St[u++]=nt&65535;else if(tt&16){ft=nt&65535,tt&=15,tt&&(de<tt&&(E+=wt[t++]<<de,de+=8),ft+=E&(1<<tt)-1,E>>>=tt,de-=tt),de<15&&(E+=wt[t++]<<de,de+=8,E+=wt[t++]<<de,de+=8),nt=Ye[E&Le];r:for(;;){if(tt=nt>>>24,E>>>=tt,de-=tt,tt=nt>>>16&255,tt&16){if(yt=nt&65535,tt&=15,de<tt&&(E+=wt[t++]<<de,de+=8,de<tt&&(E+=wt[t++]<<de,de+=8)),yt+=E&(1<<tt)-1,yt>d){a.msg="invalid distance too far back",bt.mode=BAD$1;break e}if(E>>>=tt,de-=tt,tt=u-s,yt>tt){if(tt=yt-tt,tt>N&&bt.sane){a.msg="invalid distance too far back",bt.mode=BAD$1;break e}if(gt=0,mt=b,Be===0){if(gt+=h-tt,tt<ft){ft-=tt;do St[u++]=b[gt++];while(--tt);gt=u-yt,mt=St}}else if(Be<tt){if(gt+=h+Be-tt,tt-=Be,tt<ft){ft-=tt;do St[u++]=b[gt++];while(--tt);if(gt=0,Be<ft){tt=Be,ft-=tt;do St[u++]=b[gt++];while(--tt);gt=u-yt,mt=St}}}else if(gt+=Be-tt,tt<ft){ft-=tt;do St[u++]=b[gt++];while(--tt);gt=u-yt,mt=St}for(;ft>2;)St[u++]=mt[gt++],St[u++]=mt[gt++],St[u++]=mt[gt++],ft-=3;ft&&(St[u++]=mt[gt++],ft>1&&(St[u++]=mt[gt++]))}else{gt=u-yt;do St[u++]=St[gt++],St[u++]=St[gt++],St[u++]=St[gt++],ft-=3;while(ft>2);ft&&(St[u++]=St[gt++],ft>1&&(St[u++]=St[gt++]))}}else if((tt&64)===0){nt=Ye[(nt&65535)+(E&(1<<tt)-1)];continue r}else{a.msg="invalid distance code",bt.mode=BAD$1;break e}break}}else if((tt&64)===0){nt=pe[(nt&65535)+(E&(1<<tt)-1)];continue t}else if(tt&32){bt.mode=TYPE$1;break e}else{a.msg="invalid literal/length code",bt.mode=BAD$1;break e}break}}while(t<l&&u<p);ft=de>>3,t-=ft,de-=ft<<3,E&=(1<<de)-1,a.next_in=t,a.next_out=u,a.avail_in=t<l?5+(l-t):5-(t-l),a.avail_out=u<p?257+(p-u):257-(u-p),bt.hold=E,bt.bits=de};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(r,a,n,t,l,u,s,p)=>{const d=p.bits;let h=0,N=0,Be=0,b=0,E=0,de=0,pe=0,Ye=0,me=0,Le=0,nt,tt,ft,yt,gt,mt=null,wt;const St=new Uint16Array(MAXBITS+1),bt=new Uint16Array(MAXBITS+1);let Ct=null,Et,It,Dt;for(h=0;h<=MAXBITS;h++)St[h]=0;for(N=0;N<t;N++)St[a[n+N]]++;for(E=d,b=MAXBITS;b>=1&&St[b]===0;b--);if(E>b&&(E=b),b===0)return l[u++]=1<<24|64<<16|0,l[u++]=1<<24|64<<16|0,p.bits=1,0;for(Be=1;Be<b&&St[Be]===0;Be++);for(E<Be&&(E=Be),Ye=1,h=1;h<=MAXBITS;h++)if(Ye<<=1,Ye-=St[h],Ye<0)return-1;if(Ye>0&&(r===CODES$1||b!==1))return-1;for(bt[1]=0,h=1;h<MAXBITS;h++)bt[h+1]=bt[h]+St[h];for(N=0;N<t;N++)a[n+N]!==0&&(s[bt[a[n+N]]++]=N);if(r===CODES$1?(mt=Ct=s,wt=20):r===LENS$1?(mt=lbase,Ct=lext,wt=257):(mt=dbase,Ct=dext,wt=0),Le=0,N=0,h=Be,gt=u,de=E,pe=0,ft=-1,me=1<<E,yt=me-1,r===LENS$1&&me>ENOUGH_LENS$1||r===DISTS$1&&me>ENOUGH_DISTS$1)return 1;for(;;){Et=h-pe,s[N]+1<wt?(It=0,Dt=s[N]):s[N]>=wt?(It=Ct[s[N]-wt],Dt=mt[s[N]-wt]):(It=96,Dt=0),nt=1<<h-pe,tt=1<<de,Be=tt;do tt-=nt,l[gt+(Le>>pe)+tt]=Et<<24|It<<16|Dt|0;while(tt!==0);for(nt=1<<h-1;Le&nt;)nt>>=1;if(nt!==0?(Le&=nt-1,Le+=nt):Le=0,N++,--St[h]===0){if(h===b)break;h=a[n+s[N]]}if(h>E&&(Le&yt)!==ft){for(pe===0&&(pe=E),gt+=Be,de=h-pe,Ye=1<<de;de+pe<b&&(Ye-=St[de+pe],!(Ye<=0));)de++,Ye<<=1;if(me+=1<<de,r===LENS$1&&me>ENOUGH_LENS$1||r===DISTS$1&&me>ENOUGH_DISTS$1)return 1;ft=Le&yt,l[ft]=E<<24|de<<16|gt-u|0}}return Le!==0&&(l[gt+Le]=h-pe<<24|64<<16|0),p.bits=E,0};var inftrees=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=r=>{if(!r)return 1;const a=r.state;return!a||a.strm!==r||a.mode<HEAD||a.mode>SYNC?1:0},inflateResetKeep=r=>{if(inflateStateCheck(r))return Z_STREAM_ERROR$1;const a=r.state;return r.total_in=r.total_out=a.total=0,r.msg="",a.wrap&&(r.adler=a.wrap&1),a.mode=HEAD,a.last=0,a.havedict=0,a.flags=-1,a.dmax=32768,a.head=null,a.hold=0,a.bits=0,a.lencode=a.lendyn=new Int32Array(ENOUGH_LENS),a.distcode=a.distdyn=new Int32Array(ENOUGH_DISTS),a.sane=1,a.back=-1,Z_OK$1},inflateReset=r=>{if(inflateStateCheck(r))return Z_STREAM_ERROR$1;const a=r.state;return a.wsize=0,a.whave=0,a.wnext=0,inflateResetKeep(r)},inflateReset2=(r,a)=>{let n;if(inflateStateCheck(r))return Z_STREAM_ERROR$1;const t=r.state;return a<0?(n=0,a=-a):(n=(a>>4)+5,a<48&&(a&=15)),a&&(a<8||a>15)?Z_STREAM_ERROR$1:(t.window!==null&&t.wbits!==a&&(t.window=null),t.wrap=n,t.wbits=a,inflateReset(r))},inflateInit2=(r,a)=>{if(!r)return Z_STREAM_ERROR$1;const n=new InflateState;r.state=n,n.strm=r,n.window=null,n.mode=HEAD;const t=inflateReset2(r,a);return t!==Z_OK$1&&(r.state=null),t},inflateInit=r=>inflateInit2(r,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=r=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let a=0;for(;a<144;)r.lens[a++]=8;for(;a<256;)r.lens[a++]=9;for(;a<280;)r.lens[a++]=7;for(;a<288;)r.lens[a++]=8;for(inftrees(LENS,r.lens,0,288,lenfix,0,r.work,{bits:9}),a=0;a<32;)r.lens[a++]=5;inftrees(DISTS,r.lens,0,32,distfix,0,r.work,{bits:5}),virgin=!1}r.lencode=lenfix,r.lenbits=9,r.distcode=distfix,r.distbits=5},updatewindow=(r,a,n,t)=>{let l;const u=r.state;return u.window===null&&(u.wsize=1<<u.wbits,u.wnext=0,u.whave=0,u.window=new Uint8Array(u.wsize)),t>=u.wsize?(u.window.set(a.subarray(n-u.wsize,n),0),u.wnext=0,u.whave=u.wsize):(l=u.wsize-u.wnext,l>t&&(l=t),u.window.set(a.subarray(n-t,n-t+l),u.wnext),t-=l,t?(u.window.set(a.subarray(n-t,n),0),u.wnext=t,u.whave=u.wsize):(u.wnext+=l,u.wnext===u.wsize&&(u.wnext=0),u.whave<u.wsize&&(u.whave+=l))),0},inflate$2=(r,a)=>{let n,t,l,u,s,p,d,h,N,Be,b,E,de,pe,Ye=0,me,Le,nt,tt,ft,yt,gt,mt;const wt=new Uint8Array(4);let St,bt;const Ct=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(r)||!r.output||!r.input&&r.avail_in!==0)return Z_STREAM_ERROR$1;n=r.state,n.mode===TYPE&&(n.mode=TYPEDO),s=r.next_out,l=r.output,d=r.avail_out,u=r.next_in,t=r.input,p=r.avail_in,h=n.hold,N=n.bits,Be=p,b=d,mt=Z_OK$1;e:for(;;)switch(n.mode){case HEAD:if(n.wrap===0){n.mode=TYPEDO;break}for(;N<16;){if(p===0)break e;p--,h+=t[u++]<<N,N+=8}if(n.wrap&2&&h===35615){n.wbits===0&&(n.wbits=15),n.check=0,wt[0]=h&255,wt[1]=h>>>8&255,n.check=crc32_1(n.check,wt,2,0),h=0,N=0,n.mode=FLAGS;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((h&255)<<8)+(h>>8))%31){r.msg="incorrect header check",n.mode=BAD;break}if((h&15)!==Z_DEFLATED){r.msg="unknown compression method",n.mode=BAD;break}if(h>>>=4,N-=4,gt=(h&15)+8,n.wbits===0&&(n.wbits=gt),gt>15||gt>n.wbits){r.msg="invalid window size",n.mode=BAD;break}n.dmax=1<<n.wbits,n.flags=0,r.adler=n.check=1,n.mode=h&512?DICTID:TYPE,h=0,N=0;break;case FLAGS:for(;N<16;){if(p===0)break e;p--,h+=t[u++]<<N,N+=8}if(n.flags=h,(n.flags&255)!==Z_DEFLATED){r.msg="unknown compression method",n.mode=BAD;break}if(n.flags&57344){r.msg="unknown header flags set",n.mode=BAD;break}n.head&&(n.head.text=h>>8&1),n.flags&512&&n.wrap&4&&(wt[0]=h&255,wt[1]=h>>>8&255,n.check=crc32_1(n.check,wt,2,0)),h=0,N=0,n.mode=TIME;case TIME:for(;N<32;){if(p===0)break e;p--,h+=t[u++]<<N,N+=8}n.head&&(n.head.time=h),n.flags&512&&n.wrap&4&&(wt[0]=h&255,wt[1]=h>>>8&255,wt[2]=h>>>16&255,wt[3]=h>>>24&255,n.check=crc32_1(n.check,wt,4,0)),h=0,N=0,n.mode=OS;case OS:for(;N<16;){if(p===0)break e;p--,h+=t[u++]<<N,N+=8}n.head&&(n.head.xflags=h&255,n.head.os=h>>8),n.flags&512&&n.wrap&4&&(wt[0]=h&255,wt[1]=h>>>8&255,n.check=crc32_1(n.check,wt,2,0)),h=0,N=0,n.mode=EXLEN;case EXLEN:if(n.flags&1024){for(;N<16;){if(p===0)break e;p--,h+=t[u++]<<N,N+=8}n.length=h,n.head&&(n.head.extra_len=h),n.flags&512&&n.wrap&4&&(wt[0]=h&255,wt[1]=h>>>8&255,n.check=crc32_1(n.check,wt,2,0)),h=0,N=0}else n.head&&(n.head.extra=null);n.mode=EXTRA;case EXTRA:if(n.flags&1024&&(E=n.length,E>p&&(E=p),E&&(n.head&&(gt=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(t.subarray(u,u+E),gt)),n.flags&512&&n.wrap&4&&(n.check=crc32_1(n.check,t,E,u)),p-=E,u+=E,n.length-=E),n.length))break e;n.length=0,n.mode=NAME;case NAME:if(n.flags&2048){if(p===0)break e;E=0;do gt=t[u+E++],n.head&&gt&&n.length<65536&&(n.head.name+=String.fromCharCode(gt));while(gt&&E<p);if(n.flags&512&&n.wrap&4&&(n.check=crc32_1(n.check,t,E,u)),p-=E,u+=E,gt)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=COMMENT;case COMMENT:if(n.flags&4096){if(p===0)break e;E=0;do gt=t[u+E++],n.head&&gt&&n.length<65536&&(n.head.comment+=String.fromCharCode(gt));while(gt&&E<p);if(n.flags&512&&n.wrap&4&&(n.check=crc32_1(n.check,t,E,u)),p-=E,u+=E,gt)break e}else n.head&&(n.head.comment=null);n.mode=HCRC;case HCRC:if(n.flags&512){for(;N<16;){if(p===0)break e;p--,h+=t[u++]<<N,N+=8}if(n.wrap&4&&h!==(n.check&65535)){r.msg="header crc mismatch",n.mode=BAD;break}h=0,N=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),r.adler=n.check=0,n.mode=TYPE;break;case DICTID:for(;N<32;){if(p===0)break e;p--,h+=t[u++]<<N,N+=8}r.adler=n.check=zswap32(h),h=0,N=0,n.mode=DICT;case DICT:if(n.havedict===0)return r.next_out=s,r.avail_out=d,r.next_in=u,r.avail_in=p,n.hold=h,n.bits=N,Z_NEED_DICT$1;r.adler=n.check=1,n.mode=TYPE;case TYPE:if(a===Z_BLOCK||a===Z_TREES)break e;case TYPEDO:if(n.last){h>>>=N&7,N-=N&7,n.mode=CHECK;break}for(;N<3;){if(p===0)break e;p--,h+=t[u++]<<N,N+=8}switch(n.last=h&1,h>>>=1,N-=1,h&3){case 0:n.mode=STORED;break;case 1:if(fixedtables(n),n.mode=LEN_,a===Z_TREES){h>>>=2,N-=2;break e}break;case 2:n.mode=TABLE;break;case 3:r.msg="invalid block type",n.mode=BAD}h>>>=2,N-=2;break;case STORED:for(h>>>=N&7,N-=N&7;N<32;){if(p===0)break e;p--,h+=t[u++]<<N,N+=8}if((h&65535)!==(h>>>16^65535)){r.msg="invalid stored block lengths",n.mode=BAD;break}if(n.length=h&65535,h=0,N=0,n.mode=COPY_,a===Z_TREES)break e;case COPY_:n.mode=COPY;case COPY:if(E=n.length,E){if(E>p&&(E=p),E>d&&(E=d),E===0)break e;l.set(t.subarray(u,u+E),s),p-=E,u+=E,d-=E,s+=E,n.length-=E;break}n.mode=TYPE;break;case TABLE:for(;N<14;){if(p===0)break e;p--,h+=t[u++]<<N,N+=8}if(n.nlen=(h&31)+257,h>>>=5,N-=5,n.ndist=(h&31)+1,h>>>=5,N-=5,n.ncode=(h&15)+4,h>>>=4,N-=4,n.nlen>286||n.ndist>30){r.msg="too many length or distance symbols",n.mode=BAD;break}n.have=0,n.mode=LENLENS;case LENLENS:for(;n.have<n.ncode;){for(;N<3;){if(p===0)break e;p--,h+=t[u++]<<N,N+=8}n.lens[Ct[n.have++]]=h&7,h>>>=3,N-=3}for(;n.have<19;)n.lens[Ct[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,St={bits:n.lenbits},mt=inftrees(CODES,n.lens,0,19,n.lencode,0,n.work,St),n.lenbits=St.bits,mt){r.msg="invalid code lengths set",n.mode=BAD;break}n.have=0,n.mode=CODELENS;case CODELENS:for(;n.have<n.nlen+n.ndist;){for(;Ye=n.lencode[h&(1<<n.lenbits)-1],me=Ye>>>24,Le=Ye>>>16&255,nt=Ye&65535,!(me<=N);){if(p===0)break e;p--,h+=t[u++]<<N,N+=8}if(nt<16)h>>>=me,N-=me,n.lens[n.have++]=nt;else{if(nt===16){for(bt=me+2;N<bt;){if(p===0)break e;p--,h+=t[u++]<<N,N+=8}if(h>>>=me,N-=me,n.have===0){r.msg="invalid bit length repeat",n.mode=BAD;break}gt=n.lens[n.have-1],E=3+(h&3),h>>>=2,N-=2}else if(nt===17){for(bt=me+3;N<bt;){if(p===0)break e;p--,h+=t[u++]<<N,N+=8}h>>>=me,N-=me,gt=0,E=3+(h&7),h>>>=3,N-=3}else{for(bt=me+7;N<bt;){if(p===0)break e;p--,h+=t[u++]<<N,N+=8}h>>>=me,N-=me,gt=0,E=11+(h&127),h>>>=7,N-=7}if(n.have+E>n.nlen+n.ndist){r.msg="invalid bit length repeat",n.mode=BAD;break}for(;E--;)n.lens[n.have++]=gt}}if(n.mode===BAD)break;if(n.lens[256]===0){r.msg="invalid code -- missing end-of-block",n.mode=BAD;break}if(n.lenbits=9,St={bits:n.lenbits},mt=inftrees(LENS,n.lens,0,n.nlen,n.lencode,0,n.work,St),n.lenbits=St.bits,mt){r.msg="invalid literal/lengths set",n.mode=BAD;break}if(n.distbits=6,n.distcode=n.distdyn,St={bits:n.distbits},mt=inftrees(DISTS,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,St),n.distbits=St.bits,mt){r.msg="invalid distances set",n.mode=BAD;break}if(n.mode=LEN_,a===Z_TREES)break e;case LEN_:n.mode=LEN;case LEN:if(p>=6&&d>=258){r.next_out=s,r.avail_out=d,r.next_in=u,r.avail_in=p,n.hold=h,n.bits=N,inffast(r,b),s=r.next_out,l=r.output,d=r.avail_out,u=r.next_in,t=r.input,p=r.avail_in,h=n.hold,N=n.bits,n.mode===TYPE&&(n.back=-1);break}for(n.back=0;Ye=n.lencode[h&(1<<n.lenbits)-1],me=Ye>>>24,Le=Ye>>>16&255,nt=Ye&65535,!(me<=N);){if(p===0)break e;p--,h+=t[u++]<<N,N+=8}if(Le&&(Le&240)===0){for(tt=me,ft=Le,yt=nt;Ye=n.lencode[yt+((h&(1<<tt+ft)-1)>>tt)],me=Ye>>>24,Le=Ye>>>16&255,nt=Ye&65535,!(tt+me<=N);){if(p===0)break e;p--,h+=t[u++]<<N,N+=8}h>>>=tt,N-=tt,n.back+=tt}if(h>>>=me,N-=me,n.back+=me,n.length=nt,Le===0){n.mode=LIT;break}if(Le&32){n.back=-1,n.mode=TYPE;break}if(Le&64){r.msg="invalid literal/length code",n.mode=BAD;break}n.extra=Le&15,n.mode=LENEXT;case LENEXT:if(n.extra){for(bt=n.extra;N<bt;){if(p===0)break e;p--,h+=t[u++]<<N,N+=8}n.length+=h&(1<<n.extra)-1,h>>>=n.extra,N-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=DIST;case DIST:for(;Ye=n.distcode[h&(1<<n.distbits)-1],me=Ye>>>24,Le=Ye>>>16&255,nt=Ye&65535,!(me<=N);){if(p===0)break e;p--,h+=t[u++]<<N,N+=8}if((Le&240)===0){for(tt=me,ft=Le,yt=nt;Ye=n.distcode[yt+((h&(1<<tt+ft)-1)>>tt)],me=Ye>>>24,Le=Ye>>>16&255,nt=Ye&65535,!(tt+me<=N);){if(p===0)break e;p--,h+=t[u++]<<N,N+=8}h>>>=tt,N-=tt,n.back+=tt}if(h>>>=me,N-=me,n.back+=me,Le&64){r.msg="invalid distance code",n.mode=BAD;break}n.offset=nt,n.extra=Le&15,n.mode=DISTEXT;case DISTEXT:if(n.extra){for(bt=n.extra;N<bt;){if(p===0)break e;p--,h+=t[u++]<<N,N+=8}n.offset+=h&(1<<n.extra)-1,h>>>=n.extra,N-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){r.msg="invalid distance too far back",n.mode=BAD;break}n.mode=MATCH;case MATCH:if(d===0)break e;if(E=b-d,n.offset>E){if(E=n.offset-E,E>n.whave&&n.sane){r.msg="invalid distance too far back",n.mode=BAD;break}E>n.wnext?(E-=n.wnext,de=n.wsize-E):de=n.wnext-E,E>n.length&&(E=n.length),pe=n.window}else pe=l,de=s-n.offset,E=n.length;E>d&&(E=d),d-=E,n.length-=E;do l[s++]=pe[de++];while(--E);n.length===0&&(n.mode=LEN);break;case LIT:if(d===0)break e;l[s++]=n.length,d--,n.mode=LEN;break;case CHECK:if(n.wrap){for(;N<32;){if(p===0)break e;p--,h|=t[u++]<<N,N+=8}if(b-=d,r.total_out+=b,n.total+=b,n.wrap&4&&b&&(r.adler=n.check=n.flags?crc32_1(n.check,l,b,s-b):adler32_1(n.check,l,b,s-b)),b=d,n.wrap&4&&(n.flags?h:zswap32(h))!==n.check){r.msg="incorrect data check",n.mode=BAD;break}h=0,N=0}n.mode=LENGTH;case LENGTH:if(n.wrap&&n.flags){for(;N<32;){if(p===0)break e;p--,h+=t[u++]<<N,N+=8}if(n.wrap&4&&h!==(n.total&4294967295)){r.msg="incorrect length check",n.mode=BAD;break}h=0,N=0}n.mode=DONE;case DONE:mt=Z_STREAM_END$1;break e;case BAD:mt=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return r.next_out=s,r.avail_out=d,r.next_in=u,r.avail_in=p,n.hold=h,n.bits=N,(n.wsize||b!==r.avail_out&&n.mode<BAD&&(n.mode<CHECK||a!==Z_FINISH$1))&&updatewindow(r,r.output,r.next_out,b-r.avail_out),Be-=r.avail_in,b-=r.avail_out,r.total_in+=Be,r.total_out+=b,n.total+=b,n.wrap&4&&b&&(r.adler=n.check=n.flags?crc32_1(n.check,l,b,r.next_out-b):adler32_1(n.check,l,b,r.next_out-b)),r.data_type=n.bits+(n.last?64:0)+(n.mode===TYPE?128:0)+(n.mode===LEN_||n.mode===COPY_?256:0),(Be===0&&b===0||a===Z_FINISH$1)&&mt===Z_OK$1&&(mt=Z_BUF_ERROR),mt},inflateEnd=r=>{if(inflateStateCheck(r))return Z_STREAM_ERROR$1;let a=r.state;return a.window&&(a.window=null),r.state=null,Z_OK$1},inflateGetHeader=(r,a)=>{if(inflateStateCheck(r))return Z_STREAM_ERROR$1;const n=r.state;return(n.wrap&2)===0?Z_STREAM_ERROR$1:(n.head=a,a.done=!1,Z_OK$1)},inflateSetDictionary=(r,a)=>{const n=a.length;let t,l,u;return inflateStateCheck(r)||(t=r.state,t.wrap!==0&&t.mode!==DICT)?Z_STREAM_ERROR$1:t.mode===DICT&&(l=1,l=adler32_1(l,a,n,0),l!==t.check)?Z_DATA_ERROR$1:(u=updatewindow(r,a,n,n),u?(t.mode=MEM,Z_MEM_ERROR$1):(t.havedict=1,Z_OK$1))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString$2=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(r){this.options=common$1.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const a=this.options;a.raw&&a.windowBits>=0&&a.windowBits<16&&(a.windowBits=-a.windowBits,a.windowBits===0&&(a.windowBits=-15)),a.windowBits>=0&&a.windowBits<16&&!(r&&r.windowBits)&&(a.windowBits+=32),a.windowBits>15&&a.windowBits<48&&(a.windowBits&15)===0&&(a.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let n=inflate_1$2.inflateInit2(this.strm,a.windowBits);if(n!==Z_OK)throw new Error(messages[n]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),a.dictionary&&(typeof a.dictionary=="string"?a.dictionary=strings.string2buf(a.dictionary):toString$2.call(a.dictionary)==="[object ArrayBuffer]"&&(a.dictionary=new Uint8Array(a.dictionary)),a.raw&&(n=inflate_1$2.inflateSetDictionary(this.strm,a.dictionary),n!==Z_OK)))throw new Error(messages[n])}Inflate$1.prototype.push=function(r,a){const n=this.strm,t=this.options.chunkSize,l=this.options.dictionary;let u,s,p;if(this.ended)return!1;for(a===~~a?s=a:s=a===!0?Z_FINISH:Z_NO_FLUSH,toString$2.call(r)==="[object ArrayBuffer]"?n.input=new Uint8Array(r):n.input=r,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(t),n.next_out=0,n.avail_out=t),u=inflate_1$2.inflate(n,s),u===Z_NEED_DICT&&l&&(u=inflate_1$2.inflateSetDictionary(n,l),u===Z_OK?u=inflate_1$2.inflate(n,s):u===Z_DATA_ERROR&&(u=Z_NEED_DICT));n.avail_in>0&&u===Z_STREAM_END&&n.state.wrap>0&&r[n.next_in]!==0;)inflate_1$2.inflateReset(n),u=inflate_1$2.inflate(n,s);switch(u){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(u),this.ended=!0,!1}if(p=n.avail_out,n.next_out&&(n.avail_out===0||u===Z_STREAM_END))if(this.options.to==="string"){let d=strings.utf8border(n.output,n.next_out),h=n.next_out-d,N=strings.buf2string(n.output,d);n.next_out=h,n.avail_out=t-h,h&&n.output.set(n.output.subarray(d,d+h),0),this.onData(N)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(u===Z_OK&&p===0)){if(u===Z_STREAM_END)return u=inflate_1$2.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Inflate$1.prototype.onData=function(r){this.chunks.push(r)};Inflate$1.prototype.onEnd=function(r){r===Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common$1.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function inflate$1(r,a){const n=new Inflate$1(a);if(n.push(r),n.err)throw n.msg||messages[n.err];return n.result}var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2};const{deflate}=deflate_1$1,{Inflate,inflate}=inflate_1$1;var deflate_1=deflate,Inflate_1=Inflate,inflate_1=inflate;const crcTable=[];for(let r=0;r<256;r++){let a=r;for(let n=0;n<8;n++)a&1?a=3988292384^a>>>1:a=a>>>1;crcTable[r]=a}const initialCrc=4294967295;function updateCrc(r,a,n){let t=r;for(let l=0;l<n;l++)t=crcTable[(t^a[l])&255]^t>>>8;return t}function crc(r,a){return(updateCrc(initialCrc,r,a)^initialCrc)>>>0}function checkCrc(r,a,n){const t=r.readUint32(),l=crc(new Uint8Array(r.buffer,r.byteOffset+r.offset-a-4,a),a);if(l!==t)throw new Error(`CRC mismatch for chunk ${n}. Expected ${t}, found ${l}`)}function writeCrc(r,a){r.writeUint32(crc(new Uint8Array(r.buffer,r.byteOffset+r.offset-a,a),a))}function unfilterNone(r,a,n){for(let t=0;t<n;t++)a[t]=r[t]}function unfilterSub(r,a,n,t){let l=0;for(;l<t;l++)a[l]=r[l];for(;l<n;l++)a[l]=r[l]+a[l-t]&255}function unfilterUp(r,a,n,t){let l=0;if(n.length===0)for(;l<t;l++)a[l]=r[l];else for(;l<t;l++)a[l]=r[l]+n[l]&255}function unfilterAverage(r,a,n,t,l){let u=0;if(n.length===0){for(;u<l;u++)a[u]=r[u];for(;u<t;u++)a[u]=r[u]+(a[u-l]>>1)&255}else{for(;u<l;u++)a[u]=r[u]+(n[u]>>1)&255;for(;u<t;u++)a[u]=r[u]+(a[u-l]+n[u]>>1)&255}}function unfilterPaeth(r,a,n,t,l){let u=0;if(n.length===0){for(;u<l;u++)a[u]=r[u];for(;u<t;u++)a[u]=r[u]+a[u-l]&255}else{for(;u<l;u++)a[u]=r[u]+n[u]&255;for(;u<t;u++)a[u]=r[u]+paethPredictor(a[u-l],n[u],n[u-l])&255}}function paethPredictor(r,a,n){const t=r+a-n,l=Math.abs(t-r),u=Math.abs(t-a),s=Math.abs(t-n);return l<=u&&l<=s?r:u<=s?a:n}function applyUnfilter(r,a,n,t,l,u){switch(r){case 0:unfilterNone(a,n,l);break;case 1:unfilterSub(a,n,l,u);break;case 2:unfilterUp(a,n,t,l);break;case 3:unfilterAverage(a,n,t,l,u);break;case 4:unfilterPaeth(a,n,t,l,u);break;default:throw new Error(`Unsupported filter: ${r}`)}}const uint16$1=new Uint16Array([255]),uint8$1=new Uint8Array(uint16$1.buffer),osIsLittleEndian$1=uint8$1[0]===255;function decodeInterlaceAdam7(r){const{data:a,width:n,height:t,channels:l,depth:u}=r,s=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],p=Math.ceil(u/8)*l,d=new Uint8Array(t*n*p);let h=0;for(let N=0;N<7;N++){const Be=s[N],b=Math.ceil((n-Be.x)/Be.xStep),E=Math.ceil((t-Be.y)/Be.yStep);if(b<=0||E<=0)continue;const de=b*p,pe=new Uint8Array(de);for(let Ye=0;Ye<E;Ye++){const me=a[h++],Le=a.subarray(h,h+de);h+=de;const nt=new Uint8Array(de);applyUnfilter(me,Le,nt,pe,de,p),pe.set(nt);for(let tt=0;tt<b;tt++){const ft=Be.x+tt*Be.xStep,yt=Be.y+Ye*Be.yStep;if(!(ft>=n||yt>=t))for(let gt=0;gt<p;gt++)d[(yt*n+ft)*p+gt]=nt[tt*p+gt]}}}if(u===16){const N=new Uint16Array(d.buffer);if(osIsLittleEndian$1)for(let Be=0;Be<N.length;Be++)N[Be]=swap16$1(N[Be]);return N}else return d}function swap16$1(r){return(r&255)<<8|r>>8&255}const uint16=new Uint16Array([255]),uint8=new Uint8Array(uint16.buffer),osIsLittleEndian=uint8[0]===255,empty=new Uint8Array(0);function decodeInterlaceNull(r){const{data:a,width:n,height:t,channels:l,depth:u}=r,s=Math.ceil(u/8)*l,p=Math.ceil(u/8*l*n),d=new Uint8Array(t*p);let h=empty,N=0,Be,b;for(let E=0;E<t;E++){switch(Be=a.subarray(N+1,N+1+p),b=d.subarray(E*p,(E+1)*p),a[N]){case 0:unfilterNone(Be,b,p);break;case 1:unfilterSub(Be,b,p,s);break;case 2:unfilterUp(Be,b,h,p);break;case 3:unfilterAverage(Be,b,h,p,s);break;case 4:unfilterPaeth(Be,b,h,p,s);break;default:throw new Error(`Unsupported filter: ${a[N]}`)}h=b,N+=p+1}if(u===16){const E=new Uint16Array(d.buffer);if(osIsLittleEndian)for(let de=0;de<E.length;de++)E[de]=swap16(E[de]);return E}else return d}function swap16(r){return(r&255)<<8|r>>8&255}const pngSignature=Uint8Array.of(137,80,78,71,13,10,26,10);function writeSignature(r){r.writeBytes(pngSignature)}function checkSignature(r){if(!hasPngSignature(r.readBytes(pngSignature.length)))throw new Error("wrong PNG signature")}function hasPngSignature(r){if(r.length<pngSignature.length)return!1;for(let a=0;a<pngSignature.length;a++)if(r[a]!==pngSignature[a])return!1;return!0}const textChunkName="tEXt",NULL=0,latin1Decoder=new TextDecoder("latin1");function validateKeyword(r){if(validateLatin1(r),r.length===0||r.length>79)throw new Error("keyword length must be between 1 and 79")}const latin1Regex=/^[\u0000-\u00FF]*$/;function validateLatin1(r){if(!latin1Regex.test(r))throw new Error("invalid latin1 text")}function decodetEXt(r,a,n){const t=readKeyword(a);r[t]=readLatin1(a,n-t.length-1)}function encodetEXt(r,a,n){validateKeyword(a),validateLatin1(n);const t=a.length+1+n.length;r.writeUint32(t),r.writeChars(textChunkName),r.writeChars(a),r.writeByte(NULL),r.writeChars(n),writeCrc(r,t+4)}function readKeyword(r){for(r.mark();r.readByte()!==NULL;);const a=r.offset;r.reset();const n=latin1Decoder.decode(r.readBytes(a-r.offset-1));return r.skip(1),validateKeyword(n),n}function readLatin1(r,a){return latin1Decoder.decode(r.readBytes(a))}const ColorType={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},CompressionMethod={UNKNOWN:-1,DEFLATE:0},FilterMethod={UNKNOWN:-1,ADAPTIVE:0},InterlaceMethod={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},DisposeOpType={NONE:0,BACKGROUND:1,PREVIOUS:2},BlendOpType={SOURCE:0,OVER:1};class PngDecoder extends IOBuffer{constructor(n,t={}){super(n);ti(this,"_checkCrc");ti(this,"_inflator");ti(this,"_png");ti(this,"_apng");ti(this,"_end");ti(this,"_hasPalette");ti(this,"_palette");ti(this,"_hasTransparency");ti(this,"_transparency");ti(this,"_compressionMethod");ti(this,"_filterMethod");ti(this,"_interlaceMethod");ti(this,"_colorType");ti(this,"_isAnimated");ti(this,"_numberOfFrames");ti(this,"_numberOfPlays");ti(this,"_frames");ti(this,"_writingDataChunks");const{checkCrc:l=!1}=t;this._checkCrc=l,this._inflator=new Inflate_1,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=CompressionMethod.UNKNOWN,this._filterMethod=FilterMethod.UNKNOWN,this._interlaceMethod=InterlaceMethod.UNKNOWN,this._colorType=ColorType.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(checkSignature(this);!this._end;){const n=this.readUint32(),t=this.readChars(4);this.decodeChunk(n,t)}return this.decodeImage(),this._png}decodeApng(){for(checkSignature(this);!this._end;){const n=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(n,t)}return this.decodeApngImage(),this._apng}decodeChunk(n,t){const l=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case textChunkName:decodetEXt(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-l!==n)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?checkCrc(this,n+4,t):this.skip(4)}decodeApngChunk(n,t){const l=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,t),this.offset=l+n;break}if(this.offset-l!==n)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?checkCrc(this,n+4,t):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=checkBitDepth(this.readUint8());const t=this.readUint8();this._colorType=t;let l;switch(t){case ColorType.GREYSCALE:l=1;break;case ColorType.TRUECOLOUR:l=3;break;case ColorType.INDEXED_COLOUR:l=1;break;case ColorType.GREYSCALE_ALPHA:l=2;break;case ColorType.TRUECOLOUR_ALPHA:l=4;break;case ColorType.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=l,this._compressionMethod=this.readUint8(),this._compressionMethod!==CompressionMethod.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const t=n/3;this._hasPalette=!0;const l=[];this._palette=l;for(let u=0;u<t;u++)l.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const t=n,l=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,l,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let t=n,l=this.offset+this.byteOffset;if(l+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,l,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case ColorType.GREYSCALE:case ColorType.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let t=0;t<n/2;t++)this._transparency[t]=this.readUint16();break}case ColorType.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let t=0;for(;t<n;t++){const l=this.readByte();this._palette[t].push(l)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case ColorType.UNKNOWN:case ColorType.GREYSCALE_ALPHA:case ColorType.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const t=readKeyword(this),l=this.readUint8();if(l!==CompressionMethod.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${l}`);const u=this.readBytes(n-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:inflate_1(u)}}decodepHYs(){const n=this.readUint32(),t=this.readUint32(),l=this.readByte();this._png.resolution={x:n,y:t,unit:l}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const t={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},l=this._frames.at(n);if(l){if(l.data=decodeInterlaceNull({data:l.data,width:l.width,height:l.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||l.xOffset===0&&l.yOffset===0&&l.width===this._png.width&&l.height===this._png.height)t.data=l.data;else{const u=this._apng.frames.at(n-1);this.disposeFrame(l,u,t),this.addFrameDataToCanvas(t,l)}this._apng.frames.push(t)}}return this._apng}disposeFrame(n,t,l){switch(n.disposeOp){case DisposeOpType.NONE:break;case DisposeOpType.BACKGROUND:for(let u=0;u<this._png.height;u++)for(let s=0;s<this._png.width;s++){const p=(u*n.width+s)*this._png.channels;for(let d=0;d<this._png.channels;d++)l.data[p+d]=0}break;case DisposeOpType.PREVIOUS:l.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,t){const l=1<<this._png.depth,u=(s,p)=>{const d=((s+t.yOffset)*this._png.width+t.xOffset+p)*this._png.channels,h=(s*t.width+p)*this._png.channels;return{index:d,frameIndex:h}};switch(t.blendOp){case BlendOpType.SOURCE:for(let s=0;s<t.height;s++)for(let p=0;p<t.width;p++){const{index:d,frameIndex:h}=u(s,p);for(let N=0;N<this._png.channels;N++)n.data[d+N]=t.data[h+N]}break;case BlendOpType.OVER:for(let s=0;s<t.height;s++)for(let p=0;p<t.width;p++){const{index:d,frameIndex:h}=u(s,p);for(let N=0;N<this._png.channels;N++){const Be=t.data[h+this._png.channels-1]/l,b=N%(this._png.channels-1)===0?1:t.data[h+N],E=Math.floor(Be*b+(1-Be)*n.data[d+N]);n.data[d+N]+=E}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var t;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?((t=this._frames)==null?void 0:t.at(0)).data:this._inflator.result;if(this._filterMethod!==FilterMethod.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===InterlaceMethod.NO_INTERLACE)this._png.data=decodeInterlaceNull({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===InterlaceMethod.ADAM7)this._png.data=decodeInterlaceAdam7({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,t=this._frames.at(-1);t?t.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:DisposeOpType.NONE,blendOp:BlendOpType.SOURCE,data:n}),this._inflator=new Inflate_1,this._writingDataChunks=!1}}function checkBitDepth(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}const defaultZlibOptions={level:3};class PngEncoder extends IOBuffer{constructor(n,t={}){super();ti(this,"_png");ti(this,"_zlibOptions");ti(this,"_colorType");ti(this,"_interlaceMethod");this._colorType=ColorType.UNKNOWN,this._zlibOptions={...defaultZlibOptions,...t.zlib},this._png=this._checkData(n),this._interlaceMethod=(t.interlace==="Adam7"?InterlaceMethod.ADAM7:InterlaceMethod.NO_INTERLACE)??InterlaceMethod.NO_INTERLACE,this.setBigEndian()}encode(){if(writeSignature(this),this.encodeIHDR(),this._png.palette&&(this.encodePLTE(),this._png.palette[0].length===4&&this.encodeTRNS()),this.encodeData(),this._png.text)for(const[n,t]of Object.entries(this._png.text))encodetEXt(this,n,t);return this.encodeIEND(),this.toArray()}encodeIHDR(){this.writeUint32(13),this.writeChars("IHDR"),this.writeUint32(this._png.width),this.writeUint32(this._png.height),this.writeByte(this._png.depth),this.writeByte(this._colorType),this.writeByte(CompressionMethod.DEFLATE),this.writeByte(FilterMethod.ADAPTIVE),this.writeByte(this._interlaceMethod),writeCrc(this,17)}encodeIEND(){this.writeUint32(0),this.writeChars("IEND"),writeCrc(this,4)}encodePLTE(){var t;const n=((t=this._png.palette)==null?void 0:t.length)*3;this.writeUint32(n),this.writeChars("PLTE");for(const l of this._png.palette)this.writeByte(l[0]),this.writeByte(l[1]),this.writeByte(l[2]);writeCrc(this,4+n)}encodeTRNS(){const n=this._png.palette.filter(t=>t.at(-1)!==255);this.writeUint32(n.length),this.writeChars("tRNS");for(const t of n)this.writeByte(t.at(-1));writeCrc(this,4+n.length)}encodeIDAT(n){this.writeUint32(n.length),this.writeChars("IDAT"),this.writeBytes(n),writeCrc(this,n.length+4)}encodeData(){const{width:n,height:t,channels:l,depth:u,data:s}=this._png,p=u<=8?Math.ceil(n*u/8)*l:Math.ceil(n*u/8*l/2),d=new IOBuffer().setBigEndian();let h=0;if(this._interlaceMethod===InterlaceMethod.NO_INTERLACE)for(let b=0;b<t;b++)d.writeByte(0),u===16?h=writeDataUint16(s,d,p,h):h=writeDataBytes(s,d,p,h);else this._interlaceMethod===InterlaceMethod.ADAM7&&(h=writeDataInterlaced(this._png,s,d,h));const N=d.toArray(),Be=deflate_1(N,this._zlibOptions);this.encodeIDAT(Be)}_checkData(n){const{colorType:t,channels:l,depth:u}=getColorType(n,n.palette),s={width:checkInteger(n.width,"width"),height:checkInteger(n.height,"height"),channels:l,data:n.data,depth:u,text:n.text,palette:n.palette};this._colorType=t;const p=u<8?Math.ceil(s.width*u/8)*s.height*l:s.width*s.height*l;if(s.data.length!==p)throw new RangeError(`wrong data size. Found ${s.data.length}, expected ${p}`);return s}}function checkInteger(r,a){if(Number.isInteger(r)&&r>0)return r;throw new TypeError(`${a} must be a positive integer`)}function getColorType(r,a){const{channels:n=4,depth:t=8}=r;if(n!==4&&n!==3&&n!==2&&n!==1)throw new RangeError(`unsupported number of channels: ${n}`);const l={channels:n,depth:t,colorType:ColorType.UNKNOWN};switch(n){case 4:l.colorType=ColorType.TRUECOLOUR_ALPHA;break;case 3:l.colorType=ColorType.TRUECOLOUR;break;case 1:a?l.colorType=ColorType.INDEXED_COLOUR:l.colorType=ColorType.GREYSCALE;break;case 2:l.colorType=ColorType.GREYSCALE_ALPHA;break;default:throw new Error("unsupported number of channels")}return l}function writeDataBytes(r,a,n,t){for(let l=0;l<n;l++)a.writeByte(r[t++]);return t}function writeDataInterlaced(r,a,n,t){const l=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],{width:u,height:s,channels:p,depth:d}=r;let h=0;d===16?h=p*d/8/2:h=p*d/8;for(let N=0;N<7;N++){const Be=l[N],b=Math.floor((u-Be.x+Be.xStep-1)/Be.xStep),E=Math.floor((s-Be.y+Be.yStep-1)/Be.yStep);if(b<=0||E<=0)continue;const de=b*h;for(let pe=0;pe<E;pe++){const Ye=Be.y+pe*Be.yStep,me=d<=8?new Uint8Array(de):new Uint16Array(de);let Le=0;for(let nt=0;nt<b;nt++){const tt=Be.x+nt*Be.xStep;if(tt<u&&Ye<s){const ft=(Ye*u+tt)*h;for(let yt=0;yt<h;yt++)me[Le++]=a[ft+yt]}}if(n.writeByte(0),d===8)n.writeBytes(me);else if(d===16)for(const nt of me)n.writeByte(nt>>8&255),n.writeByte(nt&255)}}return t}function writeDataUint16(r,a,n,t){for(let l=0;l<n;l++)a.writeUint16(r[t++]);return t}var ResolutionUnitSpecifier;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})(ResolutionUnitSpecifier||(ResolutionUnitSpecifier={}));function decodePng(r,a){return new PngDecoder(r,a).decode()}function encodePng$1(r,a){return new PngEncoder(r,a).encode()}var encoder={exports:{}},hasRequiredEncoder;function requireEncoder(){return hasRequiredEncoder||(hasRequiredEncoder=1,function(r){function a(t){var l=Math.floor,u=new Array(64),s=new Array(64),p=new Array(64),d=new Array(64),h,N,Be,b,E=new Array(65535),de=new Array(65535),pe=new Array(64),Ye=new Array(64),me=[],Le=0,nt=7,tt=new Array(64),ft=new Array(64),yt=new Array(64),gt=new Array(256),mt=new Array(2048),wt,St=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],bt=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Ct=[0,1,2,3,4,5,6,7,8,9,10,11],Et=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],It=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Dt=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Pt=[0,1,2,3,4,5,6,7,8,9,10,11],qt=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Ht=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Gt(sr){for(var jr=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Nr=0;Nr<64;Nr++){var kr=l((jr[Nr]*sr+50)/100);kr<1?kr=1:kr>255&&(kr=255),u[St[Nr]]=kr}for(var qr=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Pr=0;Pr<64;Pr++){var Vr=l((qr[Pr]*sr+50)/100);Vr<1?Vr=1:Vr>255&&(Vr=255),s[St[Pr]]=Vr}for(var Xr=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Gr=0,Er=0;Er<8;Er++)for(var Ir=0;Ir<8;Ir++)p[Gr]=1/(u[St[Gr]]*Xr[Er]*Xr[Ir]*8),d[Gr]=1/(s[St[Gr]]*Xr[Er]*Xr[Ir]*8),Gr++}function Ut(sr,jr){for(var Nr=0,kr=0,qr=new Array,Pr=1;Pr<=16;Pr++){for(var Vr=1;Vr<=sr[Pr];Vr++)qr[jr[kr]]=[],qr[jr[kr]][0]=Nr,qr[jr[kr]][1]=Pr,kr++,Nr++;Nr*=2}return qr}function Yt(){h=Ut(bt,Ct),N=Ut(Dt,Pt),Be=Ut(Et,It),b=Ut(qt,Ht)}function Zt(){for(var sr=1,jr=2,Nr=1;Nr<=15;Nr++){for(var kr=sr;kr<jr;kr++)de[32767+kr]=Nr,E[32767+kr]=[],E[32767+kr][1]=Nr,E[32767+kr][0]=kr;for(var qr=-(jr-1);qr<=-sr;qr++)de[32767+qr]=Nr,E[32767+qr]=[],E[32767+qr][1]=Nr,E[32767+qr][0]=jr-1+qr;sr<<=1,jr<<=1}}function vt(){for(var sr=0;sr<256;sr++)mt[sr]=19595*sr,mt[sr+256>>0]=38470*sr,mt[sr+512>>0]=7471*sr+32768,mt[sr+768>>0]=-11059*sr,mt[sr+1024>>0]=-21709*sr,mt[sr+1280>>0]=32768*sr+8421375,mt[sr+1536>>0]=-27439*sr,mt[sr+1792>>0]=-5329*sr}function Rt(sr){for(var jr=sr[0],Nr=sr[1]-1;Nr>=0;)jr&1<<Nr&&(Le|=1<<nt),Nr--,nt--,nt<0&&(Le==255?(Lt(255),Lt(0)):Lt(Le),nt=7,Le=0)}function Lt(sr){me.push(sr)}function Vt(sr){Lt(sr>>8&255),Lt(sr&255)}function Jt(sr,jr){var Nr,kr,qr,Pr,Vr,Xr,Gr,Er,Ir=0,Cr,tr=8,ar=64;for(Cr=0;Cr<tr;++Cr){Nr=sr[Ir],kr=sr[Ir+1],qr=sr[Ir+2],Pr=sr[Ir+3],Vr=sr[Ir+4],Xr=sr[Ir+5],Gr=sr[Ir+6],Er=sr[Ir+7];var Kt=Nr+Er,cr=Nr-Er,Tr=kr+Gr,Dr=kr-Gr,zr=qr+Xr,fn=qr-Xr,vn=Pr+Vr,_n=Pr-Vr,wn=Kt+vn,An=Kt-vn,Cn=Tr+zr,En=Tr-zr;sr[Ir]=wn+Cn,sr[Ir+4]=wn-Cn;var Tn=(En+An)*.707106781;sr[Ir+2]=An+Tn,sr[Ir+6]=An-Tn,wn=_n+fn,Cn=fn+Dr,En=Dr+cr;var Mn=(wn-En)*.382683433,Ft=.5411961*wn+Mn,Tt=1.306562965*En+Mn,jt=Cn*.707106781,xt=cr+jt,At=cr-jt;sr[Ir+5]=At+Ft,sr[Ir+3]=At-Ft,sr[Ir+1]=xt+Tt,sr[Ir+7]=xt-Tt,Ir+=8}for(Ir=0,Cr=0;Cr<tr;++Cr){Nr=sr[Ir],kr=sr[Ir+8],qr=sr[Ir+16],Pr=sr[Ir+24],Vr=sr[Ir+32],Xr=sr[Ir+40],Gr=sr[Ir+48],Er=sr[Ir+56];var Bt=Nr+Er,lr=Nr-Er,hr=kr+Gr,dr=kr-Gr,vr=qr+Xr,Ur=qr-Xr,Ar=Pr+Vr,an=Pr-Vr,pn=Bt+Ar,Jr=Bt-Ar,on=hr+vr,mr=hr-vr;sr[Ir]=pn+on,sr[Ir+32]=pn-on;var gr=(mr+Jr)*.707106781;sr[Ir+16]=Jr+gr,sr[Ir+48]=Jr-gr,pn=an+Ur,on=Ur+dr,mr=dr+lr;var Yr=(pn-mr)*.382683433,Hr=.5411961*pn+Yr,Sn=1.306562965*mr+Yr,Kr=on*.707106781,Dn=lr+Kr,ln=lr-Kr;sr[Ir+40]=ln+Hr,sr[Ir+24]=ln-Hr,sr[Ir+8]=Dn+Sn,sr[Ir+56]=Dn-Sn,Ir++}var jn;for(Cr=0;Cr<ar;++Cr)jn=sr[Cr]*jr[Cr],pe[Cr]=jn>0?jn+.5|0:jn-.5|0;return pe}function er(){Vt(65504),Vt(16),Lt(74),Lt(70),Lt(73),Lt(70),Lt(0),Lt(1),Lt(1),Lt(0),Vt(1),Vt(1),Lt(0),Lt(0)}function ur(sr){if(sr){Vt(65505),sr[0]===69&&sr[1]===120&&sr[2]===105&&sr[3]===102?Vt(sr.length+2):(Vt(sr.length+5+2),Lt(69),Lt(120),Lt(105),Lt(102),Lt(0));for(var jr=0;jr<sr.length;jr++)Lt(sr[jr])}}function yr(sr,jr){Vt(65472),Vt(17),Lt(8),Vt(jr),Vt(sr),Lt(3),Lt(1),Lt(17),Lt(0),Lt(2),Lt(17),Lt(1),Lt(3),Lt(17),Lt(1)}function Qt(){Vt(65499),Vt(132),Lt(0);for(var sr=0;sr<64;sr++)Lt(u[sr]);Lt(1);for(var jr=0;jr<64;jr++)Lt(s[jr])}function nr(){Vt(65476),Vt(418),Lt(0);for(var sr=0;sr<16;sr++)Lt(bt[sr+1]);for(var jr=0;jr<=11;jr++)Lt(Ct[jr]);Lt(16);for(var Nr=0;Nr<16;Nr++)Lt(Et[Nr+1]);for(var kr=0;kr<=161;kr++)Lt(It[kr]);Lt(1);for(var qr=0;qr<16;qr++)Lt(Dt[qr+1]);for(var Pr=0;Pr<=11;Pr++)Lt(Pt[Pr]);Lt(17);for(var Vr=0;Vr<16;Vr++)Lt(qt[Vr+1]);for(var Xr=0;Xr<=161;Xr++)Lt(Ht[Xr])}function or(sr){typeof sr>"u"||sr.constructor!==Array||sr.forEach(jr=>{if(typeof jr=="string"){Vt(65534);var Nr=jr.length;Vt(Nr+2);var kr;for(kr=0;kr<Nr;kr++)Lt(jr.charCodeAt(kr))}})}function Wt(){Vt(65498),Vt(12),Lt(3),Lt(1),Lt(0),Lt(2),Lt(17),Lt(3),Lt(17),Lt(0),Lt(63),Lt(0)}function ir(sr,jr,Nr,kr,qr){for(var Pr=qr[0],Vr=qr[240],Xr,Gr=16,Er=63,Ir=64,Cr=Jt(sr,jr),tr=0;tr<Ir;++tr)Ye[St[tr]]=Cr[tr];var ar=Ye[0]-Nr;Nr=Ye[0],ar==0?Rt(kr[0]):(Xr=32767+ar,Rt(kr[de[Xr]]),Rt(E[Xr]));for(var Kt=63;Kt>0&&Ye[Kt]==0;Kt--);if(Kt==0)return Rt(Pr),Nr;for(var cr=1,Tr;cr<=Kt;){for(var Dr=cr;Ye[cr]==0&&cr<=Kt;++cr);var zr=cr-Dr;if(zr>=Gr){Tr=zr>>4;for(var fn=1;fn<=Tr;++fn)Rt(Vr);zr=zr&15}Xr=32767+Ye[cr],Rt(qr[(zr<<4)+de[Xr]]),Rt(E[Xr]),cr++}return Kt!=Er&&Rt(Pr),Nr}function br(){for(var sr=String.fromCharCode,jr=0;jr<256;jr++)gt[jr]=sr(jr)}this.encode=function(sr,jr){new Date().getTime(),jr&&Sr(jr),me=new Array,Le=0,nt=7,Vt(65496),er(),or(sr.comments),ur(sr.exifBuffer),Qt(),yr(sr.width,sr.height),nr(),Wt();var Nr=0,kr=0,qr=0;Le=0,nt=7,this.encode.displayName="_encode_";for(var Pr=sr.data,Vr=sr.width,Xr=sr.height,Gr=Vr*4,Er,Ir=0,Cr,tr,ar,Kt,cr,Tr,Dr,zr;Ir<Xr;){for(Er=0;Er<Gr;){for(Kt=Gr*Ir+Er,cr=Kt,Tr=-1,Dr=0,zr=0;zr<64;zr++)Dr=zr>>3,Tr=(zr&7)*4,cr=Kt+Dr*Gr+Tr,Ir+Dr>=Xr&&(cr-=Gr*(Ir+1+Dr-Xr)),Er+Tr>=Gr&&(cr-=Er+Tr-Gr+4),Cr=Pr[cr++],tr=Pr[cr++],ar=Pr[cr++],tt[zr]=(mt[Cr]+mt[tr+256>>0]+mt[ar+512>>0]>>16)-128,ft[zr]=(mt[Cr+768>>0]+mt[tr+1024>>0]+mt[ar+1280>>0]>>16)-128,yt[zr]=(mt[Cr+1280>>0]+mt[tr+1536>>0]+mt[ar+1792>>0]>>16)-128;Nr=ir(tt,p,Nr,h,Be),kr=ir(ft,d,kr,N,b),qr=ir(yt,d,qr,N,b),Er+=32}Ir+=8}if(nt>=0){var fn=[];fn[1]=nt+1,fn[0]=(1<<nt+1)-1,Rt(fn)}return Vt(65497),Buffer.from(me)};function Sr(sr){if(sr<=0&&(sr=1),sr>100&&(sr=100),wt!=sr){var jr=0;sr<50?jr=Math.floor(5e3/sr):jr=Math.floor(200-sr*2),Gt(jr),wt=sr}}function _r(){var sr=new Date().getTime();t||(t=50),br(),Yt(),Zt(),vt(),Sr(t),new Date().getTime()-sr}_r()}r.exports=n;function n(t,l){typeof l>"u"&&(l=50);var u=new a(l),s=u.encode(t,l);return{data:s,width:t.width,height:t.height}}}(encoder)),encoder.exports}var decoder={exports:{}},hasRequiredDecoder;function requireDecoder(){return hasRequiredDecoder||(hasRequiredDecoder=1,function(r){var a=function(){var l=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),u=4017,s=799,p=3406,d=2276,h=1567,N=3784,Be=5793,b=2896;function E(){}function de(ft,yt){for(var gt=0,mt=[],wt,St,bt=16;bt>0&&!ft[bt-1];)bt--;mt.push({children:[],index:0});var Ct=mt[0],Et;for(wt=0;wt<bt;wt++){for(St=0;St<ft[wt];St++){for(Ct=mt.pop(),Ct.children[Ct.index]=yt[gt];Ct.index>0;){if(mt.length===0)throw new Error("Could not recreate Huffman Table");Ct=mt.pop()}for(Ct.index++,mt.push(Ct);mt.length<=wt;)mt.push(Et={children:[],index:0}),Ct.children[Ct.index]=Et.children,Ct=Et;gt++}wt+1<bt&&(mt.push(Et={children:[],index:0}),Ct.children[Ct.index]=Et.children,Ct=Et)}return mt[0].children}function pe(ft,yt,gt,mt,wt,St,bt,Ct,Et,It){gt.precision,gt.samplesPerLine,gt.scanLines;var Dt=gt.mcusPerLine,Pt=gt.progressive;gt.maxH,gt.maxV;var qt=yt,Ht=0,Gt=0;function Ut(){if(Gt>0)return Gt--,Ht>>Gt&1;if(Ht=ft[yt++],Ht==255){var Xr=ft[yt++];if(Xr)throw new Error("unexpected marker: "+(Ht<<8|Xr).toString(16))}return Gt=7,Ht>>>7}function Yt(Xr){for(var Gr=Xr,Er;(Er=Ut())!==null;){if(Gr=Gr[Er],typeof Gr=="number")return Gr;if(typeof Gr!="object")throw new Error("invalid huffman sequence")}return null}function Zt(Xr){for(var Gr=0;Xr>0;){var Er=Ut();if(Er===null)return;Gr=Gr<<1|Er,Xr--}return Gr}function vt(Xr){var Gr=Zt(Xr);return Gr>=1<<Xr-1?Gr:Gr+(-1<<Xr)+1}function Rt(Xr,Gr){var Er=Yt(Xr.huffmanTableDC),Ir=Er===0?0:vt(Er);Gr[0]=Xr.pred+=Ir;for(var Cr=1;Cr<64;){var tr=Yt(Xr.huffmanTableAC),ar=tr&15,Kt=tr>>4;if(ar===0){if(Kt<15)break;Cr+=16;continue}Cr+=Kt;var cr=l[Cr];Gr[cr]=vt(ar),Cr++}}function Lt(Xr,Gr){var Er=Yt(Xr.huffmanTableDC),Ir=Er===0?0:vt(Er)<<Et;Gr[0]=Xr.pred+=Ir}function Vt(Xr,Gr){Gr[0]|=Ut()<<Et}var Jt=0;function er(Xr,Gr){if(Jt>0){Jt--;return}for(var Er=St,Ir=bt;Er<=Ir;){var Cr=Yt(Xr.huffmanTableAC),tr=Cr&15,ar=Cr>>4;if(tr===0){if(ar<15){Jt=Zt(ar)+(1<<ar)-1;break}Er+=16;continue}Er+=ar;var Kt=l[Er];Gr[Kt]=vt(tr)*(1<<Et),Er++}}var ur=0,yr;function Qt(Xr,Gr){for(var Er=St,Ir=bt,Cr=0;Er<=Ir;){var tr=l[Er],ar=Gr[tr]<0?-1:1;switch(ur){case 0:var Kt=Yt(Xr.huffmanTableAC),cr=Kt&15,Cr=Kt>>4;if(cr===0)Cr<15?(Jt=Zt(Cr)+(1<<Cr),ur=4):(Cr=16,ur=1);else{if(cr!==1)throw new Error("invalid ACn encoding");yr=vt(cr),ur=Cr?2:3}continue;case 1:case 2:Gr[tr]?Gr[tr]+=(Ut()<<Et)*ar:(Cr--,Cr===0&&(ur=ur==2?3:0));break;case 3:Gr[tr]?Gr[tr]+=(Ut()<<Et)*ar:(Gr[tr]=yr<<Et,ur=0);break;case 4:Gr[tr]&&(Gr[tr]+=(Ut()<<Et)*ar);break}Er++}ur===4&&(Jt--,Jt===0&&(ur=0))}function nr(Xr,Gr,Er,Ir,Cr){var tr=Er/Dt|0,ar=Er%Dt,Kt=tr*Xr.v+Ir,cr=ar*Xr.h+Cr;Xr.blocks[Kt]===void 0&&It.tolerantDecoding||Gr(Xr,Xr.blocks[Kt][cr])}function or(Xr,Gr,Er){var Ir=Er/Xr.blocksPerLine|0,Cr=Er%Xr.blocksPerLine;Xr.blocks[Ir]===void 0&&It.tolerantDecoding||Gr(Xr,Xr.blocks[Ir][Cr])}var Wt=mt.length,ir,br,Sr,_r,sr,jr;Pt?St===0?jr=Ct===0?Lt:Vt:jr=Ct===0?er:Qt:jr=Rt;var Nr=0,kr,qr;Wt==1?qr=mt[0].blocksPerLine*mt[0].blocksPerColumn:qr=Dt*gt.mcusPerColumn,wt||(wt=qr);for(var Pr,Vr;Nr<qr;){for(br=0;br<Wt;br++)mt[br].pred=0;if(Jt=0,Wt==1)for(ir=mt[0],sr=0;sr<wt;sr++)or(ir,jr,Nr),Nr++;else for(sr=0;sr<wt;sr++){for(br=0;br<Wt;br++)for(ir=mt[br],Pr=ir.h,Vr=ir.v,Sr=0;Sr<Vr;Sr++)for(_r=0;_r<Pr;_r++)nr(ir,jr,Nr,Sr,_r);if(Nr++,Nr===qr)break}if(Nr===qr)do{if(ft[yt]===255&&ft[yt+1]!==0)break;yt+=1}while(yt<ft.length-2);if(Gt=0,kr=ft[yt]<<8|ft[yt+1],kr<65280)throw new Error("marker was not found");if(kr>=65488&&kr<=65495)yt+=2;else break}return yt-qt}function Ye(ft,yt){var gt=[],mt=yt.blocksPerLine,wt=yt.blocksPerColumn,St=mt<<3,bt=new Int32Array(64),Ct=new Uint8Array(64);function Et(Zt,vt,Rt){var Lt=yt.quantizationTable,Vt,Jt,er,ur,yr,Qt,nr,or,Wt,ir=Rt,br;for(br=0;br<64;br++)ir[br]=Zt[br]*Lt[br];for(br=0;br<8;++br){var Sr=8*br;if(ir[1+Sr]==0&&ir[2+Sr]==0&&ir[3+Sr]==0&&ir[4+Sr]==0&&ir[5+Sr]==0&&ir[6+Sr]==0&&ir[7+Sr]==0){Wt=Be*ir[0+Sr]+512>>10,ir[0+Sr]=Wt,ir[1+Sr]=Wt,ir[2+Sr]=Wt,ir[3+Sr]=Wt,ir[4+Sr]=Wt,ir[5+Sr]=Wt,ir[6+Sr]=Wt,ir[7+Sr]=Wt;continue}Vt=Be*ir[0+Sr]+128>>8,Jt=Be*ir[4+Sr]+128>>8,er=ir[2+Sr],ur=ir[6+Sr],yr=b*(ir[1+Sr]-ir[7+Sr])+128>>8,or=b*(ir[1+Sr]+ir[7+Sr])+128>>8,Qt=ir[3+Sr]<<4,nr=ir[5+Sr]<<4,Wt=Vt-Jt+1>>1,Vt=Vt+Jt+1>>1,Jt=Wt,Wt=er*N+ur*h+128>>8,er=er*h-ur*N+128>>8,ur=Wt,Wt=yr-nr+1>>1,yr=yr+nr+1>>1,nr=Wt,Wt=or+Qt+1>>1,Qt=or-Qt+1>>1,or=Wt,Wt=Vt-ur+1>>1,Vt=Vt+ur+1>>1,ur=Wt,Wt=Jt-er+1>>1,Jt=Jt+er+1>>1,er=Wt,Wt=yr*d+or*p+2048>>12,yr=yr*p-or*d+2048>>12,or=Wt,Wt=Qt*s+nr*u+2048>>12,Qt=Qt*u-nr*s+2048>>12,nr=Wt,ir[0+Sr]=Vt+or,ir[7+Sr]=Vt-or,ir[1+Sr]=Jt+nr,ir[6+Sr]=Jt-nr,ir[2+Sr]=er+Qt,ir[5+Sr]=er-Qt,ir[3+Sr]=ur+yr,ir[4+Sr]=ur-yr}for(br=0;br<8;++br){var _r=br;if(ir[8+_r]==0&&ir[16+_r]==0&&ir[24+_r]==0&&ir[32+_r]==0&&ir[40+_r]==0&&ir[48+_r]==0&&ir[56+_r]==0){Wt=Be*Rt[br+0]+8192>>14,ir[0+_r]=Wt,ir[8+_r]=Wt,ir[16+_r]=Wt,ir[24+_r]=Wt,ir[32+_r]=Wt,ir[40+_r]=Wt,ir[48+_r]=Wt,ir[56+_r]=Wt;continue}Vt=Be*ir[0+_r]+2048>>12,Jt=Be*ir[32+_r]+2048>>12,er=ir[16+_r],ur=ir[48+_r],yr=b*(ir[8+_r]-ir[56+_r])+2048>>12,or=b*(ir[8+_r]+ir[56+_r])+2048>>12,Qt=ir[24+_r],nr=ir[40+_r],Wt=Vt-Jt+1>>1,Vt=Vt+Jt+1>>1,Jt=Wt,Wt=er*N+ur*h+2048>>12,er=er*h-ur*N+2048>>12,ur=Wt,Wt=yr-nr+1>>1,yr=yr+nr+1>>1,nr=Wt,Wt=or+Qt+1>>1,Qt=or-Qt+1>>1,or=Wt,Wt=Vt-ur+1>>1,Vt=Vt+ur+1>>1,ur=Wt,Wt=Jt-er+1>>1,Jt=Jt+er+1>>1,er=Wt,Wt=yr*d+or*p+2048>>12,yr=yr*p-or*d+2048>>12,or=Wt,Wt=Qt*s+nr*u+2048>>12,Qt=Qt*u-nr*s+2048>>12,nr=Wt,ir[0+_r]=Vt+or,ir[56+_r]=Vt-or,ir[8+_r]=Jt+nr,ir[48+_r]=Jt-nr,ir[16+_r]=er+Qt,ir[40+_r]=er-Qt,ir[24+_r]=ur+yr,ir[32+_r]=ur-yr}for(br=0;br<64;++br){var sr=128+(ir[br]+8>>4);vt[br]=sr<0?0:sr>255?255:sr}}tt(St*wt*8);for(var It,Dt,Pt=0;Pt<wt;Pt++){var qt=Pt<<3;for(It=0;It<8;It++)gt.push(new Uint8Array(St));for(var Ht=0;Ht<mt;Ht++){Et(yt.blocks[Pt][Ht],Ct,bt);var Gt=0,Ut=Ht<<3;for(Dt=0;Dt<8;Dt++){var Yt=gt[qt+Dt];for(It=0;It<8;It++)Yt[Ut+It]=Ct[Gt++]}}}return gt}function me(ft){return ft<0?0:ft>255?255:ft}E.prototype={load:function(yt){var gt=new XMLHttpRequest;gt.open("GET",yt,!0),gt.responseType="arraybuffer",gt.onload=(function(){var mt=new Uint8Array(gt.response||gt.mozResponseArrayBuffer);this.parse(mt),this.onload&&this.onload()}).bind(this),gt.send(null)},parse:function(yt){var gt=this.opts.maxResolutionInMP*1e3*1e3,mt=0;yt.length;function wt(){var ar=yt[mt]<<8|yt[mt+1];return mt+=2,ar}function St(){var ar=wt(),Kt=yt.subarray(mt,mt+ar-2);return mt+=Kt.length,Kt}function bt(ar){var Kt=1,cr=1,Tr,Dr;for(Dr in ar.components)ar.components.hasOwnProperty(Dr)&&(Tr=ar.components[Dr],Kt<Tr.h&&(Kt=Tr.h),cr<Tr.v&&(cr=Tr.v));var zr=Math.ceil(ar.samplesPerLine/8/Kt),fn=Math.ceil(ar.scanLines/8/cr);for(Dr in ar.components)if(ar.components.hasOwnProperty(Dr)){Tr=ar.components[Dr];var vn=Math.ceil(Math.ceil(ar.samplesPerLine/8)*Tr.h/Kt),_n=Math.ceil(Math.ceil(ar.scanLines/8)*Tr.v/cr),wn=zr*Tr.h,An=fn*Tr.v,Cn=An*wn,En=[];tt(Cn*256);for(var Tn=0;Tn<An;Tn++){for(var Mn=[],Ft=0;Ft<wn;Ft++)Mn.push(new Int32Array(64));En.push(Mn)}Tr.blocksPerLine=vn,Tr.blocksPerColumn=_n,Tr.blocks=En}ar.maxH=Kt,ar.maxV=cr,ar.mcusPerLine=zr,ar.mcusPerColumn=fn}var Ct=null,Et=null,It,Dt,Pt=[],qt=[],Ht=[],Gt=[],Ut=wt(),Yt=-1;if(this.comments=[],Ut!=65496)throw new Error("SOI not found");for(Ut=wt();Ut!=65497;){var Zt,vt;switch(Ut){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var Rt=St();if(Ut===65534){var Lt=String.fromCharCode.apply(null,Rt);this.comments.push(Lt)}Ut===65504&&Rt[0]===74&&Rt[1]===70&&Rt[2]===73&&Rt[3]===70&&Rt[4]===0&&(Ct={version:{major:Rt[5],minor:Rt[6]},densityUnits:Rt[7],xDensity:Rt[8]<<8|Rt[9],yDensity:Rt[10]<<8|Rt[11],thumbWidth:Rt[12],thumbHeight:Rt[13],thumbData:Rt.subarray(14,14+3*Rt[12]*Rt[13])}),Ut===65505&&Rt[0]===69&&Rt[1]===120&&Rt[2]===105&&Rt[3]===102&&Rt[4]===0&&(this.exifBuffer=Rt.subarray(5,Rt.length)),Ut===65518&&Rt[0]===65&&Rt[1]===100&&Rt[2]===111&&Rt[3]===98&&Rt[4]===101&&Rt[5]===0&&(Et={version:Rt[6],flags0:Rt[7]<<8|Rt[8],flags1:Rt[9]<<8|Rt[10],transformCode:Rt[11]});break;case 65499:for(var Vt=wt(),Jt=Vt+mt-2;mt<Jt;){var er=yt[mt++];tt(256);var ur=new Int32Array(64);if(er>>4===0)for(vt=0;vt<64;vt++){var yr=l[vt];ur[yr]=yt[mt++]}else if(er>>4===1)for(vt=0;vt<64;vt++){var yr=l[vt];ur[yr]=wt()}else throw new Error("DQT: invalid table spec");Pt[er&15]=ur}break;case 65472:case 65473:case 65474:wt(),It={},It.extended=Ut===65473,It.progressive=Ut===65474,It.precision=yt[mt++],It.scanLines=wt(),It.samplesPerLine=wt(),It.components={},It.componentsOrder=[];var Qt=It.scanLines*It.samplesPerLine;if(Qt>gt){var nr=Math.ceil((Qt-gt)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${nr}MP`)}var or=yt[mt++],Wt;for(Zt=0;Zt<or;Zt++){Wt=yt[mt];var ir=yt[mt+1]>>4,br=yt[mt+1]&15,Sr=yt[mt+2];if(ir<=0||br<=0)throw new Error("Invalid sampling factor, expected values above 0");It.componentsOrder.push(Wt),It.components[Wt]={h:ir,v:br,quantizationIdx:Sr},mt+=3}bt(It),qt.push(It);break;case 65476:var _r=wt();for(Zt=2;Zt<_r;){var sr=yt[mt++],jr=new Uint8Array(16),Nr=0;for(vt=0;vt<16;vt++,mt++)Nr+=jr[vt]=yt[mt];tt(16+Nr);var kr=new Uint8Array(Nr);for(vt=0;vt<Nr;vt++,mt++)kr[vt]=yt[mt];Zt+=17+Nr,(sr>>4===0?Gt:Ht)[sr&15]=de(jr,kr)}break;case 65501:wt(),Dt=wt();break;case 65500:wt(),wt();break;case 65498:wt();var qr=yt[mt++],Pr=[],Vr;for(Zt=0;Zt<qr;Zt++){Vr=It.components[yt[mt++]];var Xr=yt[mt++];Vr.huffmanTableDC=Gt[Xr>>4],Vr.huffmanTableAC=Ht[Xr&15],Pr.push(Vr)}var Gr=yt[mt++],Er=yt[mt++],Ir=yt[mt++],Cr=pe(yt,mt,It,Pr,Dt,Gr,Er,Ir>>4,Ir&15,this.opts);mt+=Cr;break;case 65535:yt[mt]!==255&&mt--;break;default:if(yt[mt-3]==255&&yt[mt-2]>=192&&yt[mt-2]<=254){mt-=3;break}else if(Ut===224||Ut==225){if(Yt!==-1)throw new Error(`first unknown JPEG marker at offset ${Yt.toString(16)}, second unknown JPEG marker ${Ut.toString(16)} at offset ${(mt-1).toString(16)}`);Yt=mt-1;const ar=wt();if(yt[mt+ar-2]===255){mt+=ar-2;break}}throw new Error("unknown JPEG marker "+Ut.toString(16))}Ut=wt()}if(qt.length!=1)throw new Error("only single frame JPEGs supported");for(var Zt=0;Zt<qt.length;Zt++){var tr=qt[Zt].components;for(var vt in tr)tr[vt].quantizationTable=Pt[tr[vt].quantizationIdx],delete tr[vt].quantizationIdx}this.width=It.samplesPerLine,this.height=It.scanLines,this.jfif=Ct,this.adobe=Et,this.components=[];for(var Zt=0;Zt<It.componentsOrder.length;Zt++){var Vr=It.components[It.componentsOrder[Zt]];this.components.push({lines:Ye(It,Vr),scaleX:Vr.h/It.maxH,scaleY:Vr.v/It.maxV})}},getData:function(yt,gt){var mt=this.width/yt,wt=this.height/gt,St,bt,Ct,Et,It,Dt,Pt,qt,Ht,Gt,Ut=0,Yt,Zt,vt,Rt,Lt,Vt,Jt,er,ur,yr,Qt,nr=yt*gt*this.components.length;tt(nr);var or=new Uint8Array(nr);switch(this.components.length){case 1:for(St=this.components[0],Gt=0;Gt<gt;Gt++)for(It=St.lines[0|Gt*St.scaleY*wt],Ht=0;Ht<yt;Ht++)Yt=It[0|Ht*St.scaleX*mt],or[Ut++]=Yt;break;case 2:for(St=this.components[0],bt=this.components[1],Gt=0;Gt<gt;Gt++)for(It=St.lines[0|Gt*St.scaleY*wt],Dt=bt.lines[0|Gt*bt.scaleY*wt],Ht=0;Ht<yt;Ht++)Yt=It[0|Ht*St.scaleX*mt],or[Ut++]=Yt,Yt=Dt[0|Ht*bt.scaleX*mt],or[Ut++]=Yt;break;case 3:for(Qt=!0,this.adobe&&this.adobe.transformCode?Qt=!0:typeof this.opts.colorTransform<"u"&&(Qt=!!this.opts.colorTransform),St=this.components[0],bt=this.components[1],Ct=this.components[2],Gt=0;Gt<gt;Gt++)for(It=St.lines[0|Gt*St.scaleY*wt],Dt=bt.lines[0|Gt*bt.scaleY*wt],Pt=Ct.lines[0|Gt*Ct.scaleY*wt],Ht=0;Ht<yt;Ht++)Qt?(Yt=It[0|Ht*St.scaleX*mt],Zt=Dt[0|Ht*bt.scaleX*mt],vt=Pt[0|Ht*Ct.scaleX*mt],er=me(Yt+1.402*(vt-128)),ur=me(Yt-.3441363*(Zt-128)-.71413636*(vt-128)),yr=me(Yt+1.772*(Zt-128))):(er=It[0|Ht*St.scaleX*mt],ur=Dt[0|Ht*bt.scaleX*mt],yr=Pt[0|Ht*Ct.scaleX*mt]),or[Ut++]=er,or[Ut++]=ur,or[Ut++]=yr;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(Qt=!1,this.adobe&&this.adobe.transformCode?Qt=!0:typeof this.opts.colorTransform<"u"&&(Qt=!!this.opts.colorTransform),St=this.components[0],bt=this.components[1],Ct=this.components[2],Et=this.components[3],Gt=0;Gt<gt;Gt++)for(It=St.lines[0|Gt*St.scaleY*wt],Dt=bt.lines[0|Gt*bt.scaleY*wt],Pt=Ct.lines[0|Gt*Ct.scaleY*wt],qt=Et.lines[0|Gt*Et.scaleY*wt],Ht=0;Ht<yt;Ht++)Qt?(Yt=It[0|Ht*St.scaleX*mt],Zt=Dt[0|Ht*bt.scaleX*mt],vt=Pt[0|Ht*Ct.scaleX*mt],Rt=qt[0|Ht*Et.scaleX*mt],Lt=255-me(Yt+1.402*(vt-128)),Vt=255-me(Yt-.3441363*(Zt-128)-.71413636*(vt-128)),Jt=255-me(Yt+1.772*(Zt-128))):(Lt=It[0|Ht*St.scaleX*mt],Vt=Dt[0|Ht*bt.scaleX*mt],Jt=Pt[0|Ht*Ct.scaleX*mt],Rt=qt[0|Ht*Et.scaleX*mt]),or[Ut++]=255-Lt,or[Ut++]=255-Vt,or[Ut++]=255-Jt,or[Ut++]=255-Rt;break;default:throw new Error("Unsupported color mode")}return or},copyToImageData:function(yt,gt){var mt=yt.width,wt=yt.height,St=yt.data,bt=this.getData(mt,wt),Ct=0,Et=0,It,Dt,Pt,qt,Ht,Gt,Ut,Yt,Zt;switch(this.components.length){case 1:for(Dt=0;Dt<wt;Dt++)for(It=0;It<mt;It++)Pt=bt[Ct++],St[Et++]=Pt,St[Et++]=Pt,St[Et++]=Pt,gt&&(St[Et++]=255);break;case 3:for(Dt=0;Dt<wt;Dt++)for(It=0;It<mt;It++)Ut=bt[Ct++],Yt=bt[Ct++],Zt=bt[Ct++],St[Et++]=Ut,St[Et++]=Yt,St[Et++]=Zt,gt&&(St[Et++]=255);break;case 4:for(Dt=0;Dt<wt;Dt++)for(It=0;It<mt;It++)Ht=bt[Ct++],Gt=bt[Ct++],Pt=bt[Ct++],qt=bt[Ct++],Ut=255-me(Ht*(1-qt/255)+qt),Yt=255-me(Gt*(1-qt/255)+qt),Zt=255-me(Pt*(1-qt/255)+qt),St[Et++]=Ut,St[Et++]=Yt,St[Et++]=Zt,gt&&(St[Et++]=255);break;default:throw new Error("Unsupported color mode")}}};var Le=0,nt=0;function tt(ft=0){var yt=Le+ft;if(yt>nt){var gt=Math.ceil((yt-nt)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${gt}MB`)}Le=yt}return E.resetMaxMemoryUsage=function(ft){Le=0,nt=ft},E.getBytesAllocated=function(){return Le},E.requestMemoryAllocation=tt,E}();r.exports=n;function n(t,l={}){var u={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512},s={...u,...l},p=new Uint8Array(t),d=new a;d.opts=s,a.resetMaxMemoryUsage(s.maxMemoryUsageInMB*1024*1024),d.parse(p);var h=s.formatAsRGBA?4:3,N=d.width*d.height*h;try{a.requestMemoryAllocation(N);var Be={width:d.width,height:d.height,exifBuffer:d.exifBuffer,data:s.useTArray?new Uint8Array(N):Buffer.alloc(N)};d.comments.length>0&&(Be.comments=d.comments)}catch(b){throw b instanceof RangeError?new Error("Could not allocate enough memory for the image. Required: "+N):b instanceof ReferenceError&&b.message==="Buffer is not defined"?new Error("Buffer is not globally defined in this environment. Consider setting useTArray to true"):b}return d.copyToImageData(Be,s.formatAsRGBA),Be}}(decoder)),decoder.exports}var jpegJs,hasRequiredJpegJs;function requireJpegJs(){if(hasRequiredJpegJs)return jpegJs;hasRequiredJpegJs=1;var r=requireEncoder(),a=requireDecoder();return jpegJs={encode:r,decode:a},jpegJs}var jpegJsExports=requireJpegJs();let chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=new Uint8Array(256);for(let r=0;r<chars.length;r++)lookup[chars.charCodeAt(r)]=r;function encode(r){let a,n=r.length,t="";for(a=0;a<n;a+=3)t+=chars[r[a]>>2],t+=chars[(r[a]&3)<<4|r[a+1]>>4],t+=chars[(r[a+1]&15)<<2|r[a+2]>>6],t+=chars[r[a+2]&63];return n%3===2?t=`${t.substring(0,t.length-1)}=`:n%3===1&&(t=`${t.substring(0,t.length-2)}==`),t}function decode$1(r){let a=r.length*.75,n=r.length,t=0,l,u,s,p;r[r.length-1]==="="&&(a--,r[r.length-2]==="="&&a--);const d=new Uint8Array(a);for(let h=0;h<n;h+=4)l=lookup[r.charCodeAt(h)],u=lookup[r.charCodeAt(h+1)],s=lookup[r.charCodeAt(h+2)],p=lookup[r.charCodeAt(h+3)],d[t++]=l<<2|u>>4,d[t++]=(u&15)<<4|s>>2,d[t++]=(s&3)<<6|p&63;return d}function toBase64URL(r,a){const n=encode(r);return`data:${a};base64,${n}`}const ImageData$1=self.ImageData,DOMImage=self.Image;function createCanvas(r,a){let n=self.document.createElement("canvas");return n.width=r,n.height=a,n}function fetchBinary(r,{withCredentials:a=!1}={}){return new Promise(function(n,t){let l=new self.XMLHttpRequest;l.open("GET",r,!0),l.responseType="arraybuffer",l.withCredentials=a,l.onload=function(u){this.status!==200?t(u):n(this.response)},l.onerror=t,l.send()})}function createWriteStream(){throw new Error("createWriteStream does not exist in the browser")}function writeFile(){throw new Error("writeFile does not exist in the browser")}function getType(r){return r.includes("/")||(r=`image/${r}`),r}function encodeJpeg(r,a={}){const n={width:r.width,height:r.height,data:r.getRGBAData()};return jpegJsExports.encode(n,a.quality).data}function encodePng(r,a){const n={width:r.width,height:r.height,channels:r.channels,depth:r.bitDepth,data:r.data};return(n.depth===1||n.depth===32)&&(n.depth=8,n.channels=4,n.data=r.getRGBAData()),encodePng$1(n,a)}const exportMethods={save(r,a={}){const{useCanvas:n=!1,encoder:t=void 0}=a;let{format:l}=a;if(!l){const u=/\.(?<format>[a-zA-Z]+)$/.exec(r);u&&(l=u.groups.format.toLowerCase())}if(!l)throw new Error("file format not provided");return new Promise((u,s)=>{let p,d;switch(l.toLowerCase()){case"png":{n?p=this.getCanvas().pngStream():d=encodePng(this,t);break}case"jpg":case"jpeg":n?p=this.getCanvas().jpegStream():d=encodeJpeg(this,t);break;case"bmp":d=srcExports$3.encode(this,t);break;default:throw new RangeError(`invalid output format: ${l}`)}if(p){let h=createWriteStream();h.on("finish",u),h.on("error",s),p.pipe(h)}else d&&writeFile()})},toDataURL(r="image/png",a={}){typeof r=="object"&&(a=r,r="image/png");const{useCanvas:n=!1,encoder:t=void 0}=a;r=getType(r);function l(u,s){const p=u(s,t);return toBase64URL(p,r)}return r==="image/bmp"?l(srcExports$3.encode,this):r==="image/png"&&!n?l(encodePng,this):r==="image/jpeg"&&!n?l(encodeJpeg,this):this.getCanvas().toDataURL(r)},toBuffer(r={}){const{format:a="png",encoder:n=void 0}=r;switch(a.toLowerCase()){case"png":return encodePng(this,n);case"jpeg":case"jpg":return encodeJpeg(this,n);case"bmp":return srcExports$3.encode(this,n);default:throw new RangeError(`invalid output format: ${a}`)}},toBase64(r="image/png",a={}){if(a.async)return this.toDataURL(r,a).then(function(n){return n.substring(n.indexOf(",")+1)});{const n=this.toDataURL(r,a);return n.substring(n.indexOf(",")+1)}},toBlob(r="image/png",a=.8){return canvasToBlob(this.getCanvas(),r,a)},getCanvas(){const r=new ImageData$1(this.getRGBAData({clamped:!0}),this.width,this.height);let a=createCanvas(this.width,this.height);return a.getContext("2d").putImageData(r,0,0),a}};function setExportMethods(r){for(const a in exportMethods)r.prototype[a]=exportMethods[a]}var hasOwn$1={exports:{}};const version="1.0.1",require$$0$2={version};var hasRequiredHasOwn;function requireHasOwn(){return hasRequiredHasOwn||(hasRequiredHasOwn=1,function(r,a){var n=Object.prototype.hasOwnProperty;r.exports=a=function(l,u){return n.call(u,l)},a.version=require$$0$2.version}(hasOwn$1,hasOwn$1.exports)),hasOwn$1.exports}var hasOwnExports=requireHasOwn();const hasOwn=getDefaultExportFromCjs(hasOwnExports);let computedPropertyDescriptor$1={configurable:!0,enumerable:!1,get:void 0};function extendMethod(r,a,n={}){let{inPlace:t=!1,returnThis:l=!0,partialArgs:u=[]}=n;return t?Image$1.prototype[r]=function(...s){this.computed=null;let p=a.apply(this,[...u,...s]);return l?this:p}:Image$1.prototype[r]=function(...s){return a.apply(this,[...u,...s])},Image$1}function extendProperty(r,a,n={}){let{partialArgs:t=[]}=n;return computedPropertyDescriptor$1.get=function(){if(this.computed===null)this.computed={};else if(hasOwn(r,this.computed))return this.computed[r];let l=a.apply(this,t);return this.computed[r]=l,l},Object.defineProperty(Image$1.prototype,r,computedPropertyDescriptor$1),Image$1}const GREY$1="GREY",RGB$1="RGB",HSL="HSL",HSV="HSV",CMYK$1="CMYK",ColorModel=Object.freeze(Object.defineProperty({__proto__:null,CMYK:CMYK$1,GREY:GREY$1,HSL,HSV,RGB:RGB$1},Symbol.toStringTag,{value:"Module"}));function getRGBAData(r={}){const{clamped:a}=r;this.checkProcessable("getRGBAData",{components:[1,3],bitDepth:[1,8,16,32]});const n=this.width*this.height*4;let t=a?new Uint8ClampedArray(n):new Uint8Array(n);return this.bitDepth===1?fillDataFromBinary(this,t):this.bitDepth===32?(this.checkProcessable("getRGBAData",{alpha:0}),this.components===1?fillDataFromGrey32(this,t):this.components===3&&(this.checkProcessable("getRGBAData",{colorModel:[RGB$1]}),fillDataFromRGB32(this,t))):this.components===1?fillDataFromGrey(this,t):this.components===3&&(this.checkProcessable("getRGBAData",{colorModel:[RGB$1]}),fillDataFromRGB(this,t)),this.alpha===1?(this.checkProcessable("getRGBAData",{bitDepth:[8,16]}),copyAlpha(this,t)):fillAlpha(this,t),t}function fillDataFromBinary(r,a){for(let n=0;n<r.size;n++){const t=r.getBit(n);a[n*4]=t*255,a[n*4+1]=t*255,a[n*4+2]=t*255}}function fillDataFromGrey32(r,a){const n=r.min[0],l=r.max[0]-n;for(let u=0;u<r.size;u++){const s=Math.floor(255*(r.data[u]-n)/l);a[u*4]=s,a[u*4+1]=s,a[u*4+2]=s}}function fillDataFromRGB32(r,a){const n=Math.min(...r.min),l=Math.max(...r.max)-n;for(let u=0;u<r.size;u++){const s=Math.floor(255*(r.data[u*3]-n)/l),p=Math.floor(255*(r.data[u*3+1]-n)/l),d=Math.floor(255*(r.data[u*3+2]-n)/l);a[u*4]=s,a[u*4+1]=p,a[u*4+2]=d}}function fillDataFromGrey(r,a){for(let n=0;n<r.size;n++)a[n*4]=r.data[n*r.channels]>>>r.bitDepth-8,a[n*4+1]=r.data[n*r.channels]>>>r.bitDepth-8,a[n*4+2]=r.data[n*r.channels]>>>r.bitDepth-8}function fillDataFromRGB(r,a){for(let n=0;n<r.size;n++)a[n*4]=r.data[n*r.channels]>>>r.bitDepth-8,a[n*4+1]=r.data[n*r.channels+1]>>>r.bitDepth-8,a[n*4+2]=r.data[n*r.channels+2]>>>r.bitDepth-8}function copyAlpha(r,a){for(let n=0;n<r.size;n++)a[n*4+3]=r.data[n*r.channels+r.components]>>r.bitDepth-8}function fillAlpha(r,a){for(let n=0;n<r.size;n++)a[n*4+3]=255}const BINARY="BINARY",GREY="GREY",GREYA="GREYA",RGB="RGB",RGBA="RGBA",CMYK="CMYK",CMYKA="CMYKA",kinds={};kinds[BINARY]={components:1,alpha:0,bitDepth:1,colorModel:GREY$1};kinds[GREYA]={components:1,alpha:1,bitDepth:8,colorModel:GREY$1};kinds[GREY]={components:1,alpha:0,bitDepth:8,colorModel:GREY$1};kinds[RGBA]={components:3,alpha:1,bitDepth:8,colorModel:RGB$1};kinds[RGB]={components:3,alpha:0,bitDepth:8,colorModel:RGB$1};kinds[CMYK]={components:4,alpha:0,bitDepth:8,colorModel:CMYK$1};kinds[CMYKA]={components:4,alpha:1,bitDepth:8,colorModel:CMYK$1};function getKind(r){const a=kinds[r];if(!a)throw new RangeError(`invalid image kind: ${r}`);return a}const validBitDepth=[1,8,16,32];function verifyKindDefinition(r){const{components:a,alpha:n,bitDepth:t,colorModel:l}=r;if(!Number.isInteger(a)||a<=0)throw new RangeError(`invalid components: ${a}. Must be a positive integer`);if(n!==0&&n!==1&&typeof n!="boolean")throw new TypeError(`invalid alpha: ${n}: must be a boolean, 0 or 1`);if(!validBitDepth.includes(t))throw new RangeError(`invalid bitDepth: ${t}. Must be one of ${validBitDepth.join(", ")}`);if(!ColorModel[l])throw new RangeError(`invalid colorModel: ${l}. Must be one of ${Object.keys(ColorModel).join(", ")}`)}function getTheoreticalPixelArraySize(r,a,n){let t=a*r;return n===1&&(t=Math.ceil(t/8)),t}function createPixelArray(r,a,n,t,l,u){const s=t*r;let p;switch(l){case 1:p=new Uint8Array(Math.ceil(s/8));break;case 8:p=new Uint8Array(s);break;case 16:p=new Uint16Array(s);break;case 32:p=new Float32Array(s);break;default:throw new Error(`Cannot create pixel array for bit depth ${l}`)}if(n)for(let d=a;d<p.length;d+=t)p[d]=u;return p}var src$4={},IOBuffer_1,hasRequiredIOBuffer;function requireIOBuffer(){if(hasRequiredIOBuffer)return IOBuffer_1;hasRequiredIOBuffer=1;const r=1024*8,a=[];class n{constructor(l,u){u=u||{},l===void 0&&(l=r),typeof l=="number"&&(l=new ArrayBuffer(l));let s=l.byteLength;const p=u.offset?u.offset>>>0:0;l.buffer&&(s=l.byteLength-p,l.byteLength!==l.buffer.byteLength?l=l.buffer.slice(l.byteOffset+p,l.byteOffset+l.byteLength):p?l=l.buffer.slice(p):l=l.buffer),this.buffer=l,this.length=s,this.byteLength=s,this.byteOffset=0,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer),this._increment=s||r,this._mark=0}available(l){return l===void 0&&(l=1),this.offset+l<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){this.littleEndian=!0}isBigEndian(){return!this.littleEndian}setBigEndian(){this.littleEndian=!1}skip(l){l===void 0&&(l=1),this.offset+=l}seek(l){this.offset=l}mark(){this._mark=this.offset}reset(){this.offset=this._mark}rewind(){this.offset=0}ensureAvailable(l){if(l===void 0&&(l=1),!this.available(l)){const u=this._increment+this._increment;this._increment=u;const s=this.length+u,p=new Uint8Array(s);p.set(new Uint8Array(this.buffer)),this.buffer=p.buffer,this.length=s,this._data=new DataView(this.buffer)}}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(l){l===void 0&&(l=1);for(var u=new Uint8Array(l),s=0;s<l;s++)u[s]=this.readByte();return u}readInt16(){var l=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,l}readUint16(){var l=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,l}readInt32(){var l=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,l}readUint32(){var l=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,l}readFloat32(){var l=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,l}readFloat64(){var l=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,l}readChar(){return String.fromCharCode(this.readInt8())}readChars(l){l===void 0&&(l=1),a.length=l;for(var u=0;u<l;u++)a[u]=this.readChar();return a.join("")}writeBoolean(l){this.writeUint8(l?255:0)}writeInt8(l){this.ensureAvailable(1),this._data.setInt8(this.offset++,l)}writeUint8(l){this.ensureAvailable(1),this._data.setUint8(this.offset++,l)}writeByte(l){this.writeUint8(l)}writeBytes(l){this.ensureAvailable(l.length);for(var u=0;u<l.length;u++)this._data.setUint8(this.offset++,l[u])}writeInt16(l){this.ensureAvailable(2),this._data.setInt16(this.offset,l,this.littleEndian),this.offset+=2}writeUint16(l){this.ensureAvailable(2),this._data.setUint16(this.offset,l,this.littleEndian),this.offset+=2}writeInt32(l){this.ensureAvailable(4),this._data.setInt32(this.offset,l,this.littleEndian),this.offset+=4}writeUint32(l){this.ensureAvailable(4),this._data.setUint32(this.offset,l,this.littleEndian),this.offset+=4}writeFloat32(l){this.ensureAvailable(4),this._data.setFloat32(this.offset,l,this.littleEndian),this.offset+=4}writeFloat64(l){this.ensureAvailable(8),this._data.setFloat64(this.offset,l,this.littleEndian),this.offset+=8}writeChar(l){this.writeUint8(l.charCodeAt(0))}writeChars(l){for(var u=0;u<l.length;u++)this.writeUint8(l.charCodeAt(u))}toArray(){return new Uint8Array(this.buffer,0,this.offset)}}return IOBuffer_1=n,IOBuffer_1}var src$3={},standard$1,hasRequiredStandard;function requireStandard(){if(hasRequiredStandard)return standard$1;hasRequiredStandard=1;const r={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},a={};for(var n in r)a[r[n]]=n;return standard$1={tagsById:r,tagsByName:a},standard$1}var exif$1,hasRequiredExif;function requireExif(){if(hasRequiredExif)return exif$1;hasRequiredExif=1;const r={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},a={};for(var n in r)a[r[n]]=n;return exif$1={tagsById:r,tagsByName:a},exif$1}var gps$1,hasRequiredGps;function requireGps(){if(hasRequiredGps)return gps$1;hasRequiredGps=1;const r={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},a={};for(var n in r)a[r[n]]=n;return gps$1={tagsById:r,tagsByName:a},gps$1}var ifd,hasRequiredIfd;function requireIfd(){if(hasRequiredIfd)return ifd;hasRequiredIfd=1;const r={standard:requireStandard(),exif:requireExif(),gps:requireGps()};class a{constructor(t){if(!t)throw new Error("missing kind");this.data=null,this.fields=new Map,this.kind=t,this._map=null}get(t){if(typeof t=="number")return this.fields.get(t);if(typeof t=="string")return this.fields.get(r[this.kind].tagsByName[t]);throw new Error("expected a number or string")}get map(){if(!this._map){this._map={};const l=r[this.kind].tagsById;for(var t of this.fields.keys())l[t]&&(this._map[l[t]]=this.fields.get(t))}return this._map}}return ifd=a,ifd}var tiffIfd,hasRequiredTiffIfd;function requireTiffIfd(){if(hasRequiredTiffIfd)return tiffIfd;hasRequiredTiffIfd=1;const r=requireIfd(),a=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class n extends r{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){var u=new Date,s=a.exec(this.dateTime);return u.setFullYear(s[1],s[2]-1,s[3]),u.setHours(s[4],s[5],s[6]),u}get newSubfileType(){return this.get(254)}get imageWidth(){return this.get(256)}get imageLength(){return this.get(257)}get bitsPerSample(){return this.get(258)}get compression(){return this.get(259)||1}get type(){return this.get(262)}get fillOrder(){return this.get(266)||1}get documentName(){return this.get(269)}get imageDescription(){return this.get(270)}get stripOffsets(){return t(this.get(273))}get orientation(){return this.get(274)}get samplesPerPixel(){return this.get(277)}get rowsPerStrip(){return this.get(278)}get stripByteCounts(){return t(this.get(279))}get minSampleValue(){return this.get(280)||0}get maxSampleValue(){return this.get(281)||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get(282)}get yResolution(){return this.get(283)}get planarConfiguration(){return this.get(284)||1}get resolutionUnit(){return this.get(296)||2}get dateTime(){return this.get(306)}get predictor(){return this.get(317)||1}get sampleFormat(){return this.get(339)||1}get sMinSampleValue(){return this.get(340)||this.minSampleValue}get sMaxSampleValue(){return this.get(341)||this.maxSampleValue}}function t(l){return typeof l=="number"?[l]:l}return tiffIfd=n,tiffIfd}var ifdValue={},hasRequiredIfdValue;function requireIfdValue(){if(hasRequiredIfdValue)return ifdValue;hasRequiredIfdValue=1;var r=new Map([[1,[1,a]],[2,[1,n]],[3,[2,t]],[4,[4,l]],[5,[8,u]],[6,[1,s]],[7,[1,a]],[8,[2,p]],[9,[4,d]],[10,[8,h]],[11,[4,N]],[12,[8,Be]]]);ifdValue.getByteLength=function(b,E){return r.get(b)[0]*E},ifdValue.readData=function(b,E,de){return r.get(E)[1](b,de)};function a(b,E){if(E===1)return b.readUint8();for(var de=new Uint8Array(E),pe=0;pe<E;pe++)de[pe]=b.readUint8();return de}function n(b,E){for(var de=[],pe="",Ye=0;Ye<E;Ye++){var me=String.fromCharCode(b.readUint8());me==="\0"?(de.push(pe),pe=""):pe+=me}return de.length===1?de[0]:de}function t(b,E){if(E===1)return b.readUint16();for(var de=new Uint16Array(E),pe=0;pe<E;pe++)de[pe]=b.readUint16();return de}function l(b,E){if(E===1)return b.readUint32();for(var de=new Uint32Array(E),pe=0;pe<E;pe++)de[pe]=b.readUint32();return de}function u(b,E){if(E===1)return b.readUint32()/b.readUint32();for(var de=new Array(E),pe=0;pe<E;pe++)de[pe]=b.readUint32()/b.readUint32();return de}function s(b,E){if(E===1)return b.readInt8();for(var de=new Int8Array(E),pe=0;pe<E;pe++)de[pe]=b.readInt8();return de}function p(b,E){if(E===1)return b.readInt16();for(var de=new Int16Array(E),pe=0;pe<E;pe++)de[pe]=b.readInt16();return de}function d(b,E){if(E===1)return b.readInt32();for(var de=new Int32Array(E),pe=0;pe<E;pe++)de[pe]=b.readInt32();return de}function h(b,E){if(E===1)return b.readInt32()/b.readInt32();for(var de=new Array(E),pe=0;pe<E;pe++)de[pe]=b.readInt32()/b.readInt32();return de}function N(b,E){if(E===1)return b.readFloat32();for(var de=new Float32Array(E),pe=0;pe<E;pe++)de[pe]=b.readFloat32();return de}function Be(b,E){if(E===1)return b.readFloat64();for(var de=new Float64Array(E),pe=0;pe<E;pe++)de[pe]=b.readFloat64();return de}return ifdValue}var tiffDecoder,hasRequiredTiffDecoder;function requireTiffDecoder(){if(hasRequiredTiffDecoder)return tiffDecoder;hasRequiredTiffDecoder=1;const r=requireIOBuffer(),a=requireIfd(),n=requireTiffIfd(),t=requireIfdValue(),l={ignoreImageData:!1,onlyFirst:!1};class u extends r{constructor(E,de){super(E,de),this._nextIFD=0}decode(E){E=Object.assign({},l,E);const de=[];for(this.decodeHeader();this._nextIFD;)if(de.push(this.decodeIFD(E)),E.onlyFirst)return de[0];return de}decodeHeader(){let E=this.readUint16();if(E===18761)this.setLittleEndian();else if(E===19789)this.setBigEndian();else throw new Error("invalid byte order: 0x"+E.toString(16));if(E=this.readUint16(),E!==42)throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(E){this.seek(this._nextIFD);var de;E.kind?de=new a(E.kind):de=new n;const pe=this.readUint16();for(var Ye=0;Ye<pe;Ye++)this.decodeIFDEntry(de);return E.ignoreImageData||this.decodeImageData(de),this._nextIFD=this.readUint32(),de}decodeIFDEntry(E){const de=this.offset,pe=this.readUint16(),Ye=this.readUint16(),me=this.readUint32();if(Ye<1||Ye>12){this.skip(4);return}t.getByteLength(Ye,me)>4&&this.seek(this.readUint32());const nt=t.readData(this,Ye,me);if(E.fields.set(pe,nt),pe===34665||pe===34853){let tt=this.offset,ft;pe===34665?ft="exif":pe===34853&&(ft="gps"),this._nextIFD=nt,E[ft]=this.decodeIFD({kind:ft,ignoreImageData:!0}),this.offset=tt}this.seek(de),this.skip(12)}decodeImageData(E){const de=E.orientation;switch(de&&de!==1&&N("orientation",de),E.type){case 1:case 2:this.readStripData(E);break;default:N("image type",E.type);break}}readStripData(E){const de=E.width,pe=E.height,Ye=Be(E.bitsPerSample),me=E.sampleFormat;let Le=de*pe;const nt=s(Le,1,Ye,me),tt=E.compression,yt=E.rowsPerStrip*de,gt=E.stripOffsets,mt=E.stripByteCounts;for(var wt=0,St=0;St<gt.length;St++){var bt=this.getStripData(tt,gt[St],mt[St]),Ct=Le>yt?yt:Le;Le-=Ct,Ye===8?wt=p(nt,bt,wt,Ct):Ye===16?wt=d(nt,bt,wt,Ct,this.isLittleEndian()):Ye===32&&me===3?wt=h(nt,bt,wt,Ct,this.isLittleEndian()):N("bitDepth",Ye)}E.data=nt}getStripData(E,de,pe){switch(E){case 1:return new DataView(this.buffer,de,pe);case 2:case 32773:return N("Compression",E);default:throw new Error("invalid compression: "+E)}}}tiffDecoder=u;function s(b,E,de,pe){return de===8?new Uint8Array(b*E):de===16?new Uint16Array(b*E):de===32&&pe===3?new Float32Array(b*E):N("bit depth / sample format",de+" / "+pe)}function p(b,E,de,pe){for(var Ye=0;Ye<pe;Ye++)b[de++]=E.getUint8(Ye);return de}function d(b,E,de,pe,Ye){for(var me=0;me<pe*2;me+=2)b[de++]=E.getUint16(me,Ye);return de}function h(b,E,de,pe,Ye){for(var me=0;me<pe*4;me+=4)b[de++]=E.getFloat32(me,Ye);return de}function N(b,E){throw new Error("Unsupported "+b+": "+E)}function Be(b){if(b.length){const de=b;b=de[0];for(var E=0;E<de.length;E++)de[E]!==b&&N("bit depth",de)}return b}return tiffDecoder}var decode,hasRequiredDecode$1;function requireDecode$1(){if(hasRequiredDecode$1)return decode;hasRequiredDecode$1=1;const r=requireTiffDecoder();return decode=function(n,t){return new r(n,t).decode(t)},decode}var hasRequiredSrc$4;function requireSrc$4(){return hasRequiredSrc$4||(hasRequiredSrc$4=1,src$3.decode=requireDecode$1()),src$3}var decode_1,hasRequiredDecode;function requireDecode(){if(hasRequiredDecode)return decode_1;hasRequiredDecode=1;const r=requireIOBuffer(),a=requireSrc$4();function n(t){const l=new r(t),u={};if(l.setBigEndian(),l.readUint16()!==65496)throw new Error("SOI marker not found. Not a valid JPEG file");if(l.readUint16()===65505){l.readUint16();const d=l.readBytes(6);if(d[0]===69&&d[1]===120&&d[2]===105&&d[3]===102&&d[4]===0&&d[5]===0){const h=a.decode(l,{onlyFirst:!0,ignoreImageData:!0,offset:l.offset});u.exif=h}}return u}return decode_1=n,decode_1}var hasRequiredSrc$3;function requireSrc$3(){return hasRequiredSrc$3||(hasRequiredSrc$3=1,src$4.decode=requireDecode()),src$4}var srcExports$2=requireSrc$3(),imageType$1={exports:{}},fileType={exports:{}},hasRequiredFileType;function requireFileType(){return hasRequiredFileType||(hasRequiredFileType=1,function(module){const toBytes=r=>[...r].map(a=>a.charCodeAt(0)),xpiZipFilename=toBytes("META-INF/mozilla.rsa"),oxmlContentTypes=toBytes("[Content_Types].xml"),oxmlRels=toBytes("_rels/.rels");function readUInt64LE(r,a=0){let n=r[a],t=1,l=0;for(;++l<8;)t*=256,n+=r[a+l]*t;return n}const fileType=r=>{if(!(r instanceof Uint8Array||r instanceof ArrayBuffer||Buffer.isBuffer(r)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof r}\``);const a=r instanceof Uint8Array?r:new Uint8Array(r);if(!(a&&a.length>1))return null;const n=(l,u)=>{u=Object.assign({offset:0},u);for(let s=0;s<l.length;s++)if(u.mask){if(l[s]!==(u.mask[s]&a[s+u.offset]))return!1}else if(l[s]!==a[s+u.offset])return!1;return!0},t=(l,u)=>n(toBytes(l),u);if(n([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(n([137,80,78,71,13,10,26,10]))return{ext:"png",mime:"image/png"};if(n([71,73,70]))return{ext:"gif",mime:"image/gif"};if(n([87,69,66,80],{offset:8}))return{ext:"webp",mime:"image/webp"};if(n([70,76,73,70]))return{ext:"flif",mime:"image/flif"};if((n([73,73,42,0])||n([77,77,0,42]))&&n([67,82],{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(n([73,73,42,0])||n([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(n([66,77]))return{ext:"bmp",mime:"image/bmp"};if(n([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(n([56,66,80,83]))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(n([80,75,3,4])){if(n([109,105,109,101,116,121,112,101,97,112,112,108,105,99,97,116,105,111,110,47,101,112,117,98,43,122,105,112],{offset:30}))return{ext:"epub",mime:"application/epub+zip"};if(n(xpiZipFilename,{offset:30}))return{ext:"xpi",mime:"application/x-xpinstall"};if(t("mimetypeapplication/vnd.oasis.opendocument.text",{offset:30}))return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};if(t("mimetypeapplication/vnd.oasis.opendocument.spreadsheet",{offset:30}))return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};if(t("mimetypeapplication/vnd.oasis.opendocument.presentation",{offset:30}))return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};const l=(d,h=0)=>d.findIndex((N,Be,b)=>Be>=h&&b[Be]===80&&b[Be+1]===75&&b[Be+2]===3&&b[Be+3]===4);let u=0,s=!1,p=null;do{const d=u+30;if(s||(s=n(oxmlContentTypes,{offset:d})||n(oxmlRels,{offset:d})),p||(t("word/",{offset:d})?p={ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}:t("ppt/",{offset:d})?p={ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"}:t("xl/",{offset:d})&&(p={ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),s&&p)return p;u=l(a,d)}while(u>=0);if(p)return p}if(n([80,75])&&(a[2]===3||a[2]===5||a[2]===7)&&(a[3]===4||a[3]===6||a[3]===8))return{ext:"zip",mime:"application/zip"};if(n([117,115,116,97,114],{offset:257}))return{ext:"tar",mime:"application/x-tar"};if(n([82,97,114,33,26,7])&&(a[6]===0||a[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(n([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(n([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(n([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(n([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(n([51,103,112,53])||n([0,0,0])&&n([102,116,121,112],{offset:4})&&(n([109,112,52,49],{offset:8})||n([109,112,52,50],{offset:8})||n([105,115,111,109],{offset:8})||n([105,115,111,50],{offset:8})||n([109,109,112,52],{offset:8})||n([77,52,86],{offset:8})||n([100,97,115,104],{offset:8})))return{ext:"mp4",mime:"video/mp4"};if(n([77,84,104,100]))return{ext:"mid",mime:"audio/midi"};if(n([26,69,223,163])){const l=a.subarray(4,4100),u=l.findIndex((s,p,d)=>d[p]===66&&d[p+1]===130);if(u!==-1){const s=u+3,p=d=>[...d].every((h,N)=>l[s+N]===h.charCodeAt(0));if(p("matroska"))return{ext:"mkv",mime:"video/x-matroska"};if(p("webm"))return{ext:"webm",mime:"video/webm"}}}if(n([0,0,0,20,102,116,121,112,113,116,32,32])||n([102,114,101,101],{offset:4})||n([102,116,121,112,113,116,32,32],{offset:4})||n([109,100,97,116],{offset:4})||n([109,111,111,118],{offset:4})||n([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(n([82,73,70,70])){if(n([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(n([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(n([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(n([48,38,178,117,142,102,207,17,166,217])){let l=30;do{const u=readUInt64LE(a,l+16);if(n([145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101],{offset:l})){if(n([64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43],{offset:l+24}))return{ext:"wma",mime:"audio/x-ms-wma"};if(n([192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43],{offset:l+24}))return{ext:"wmv",mime:"video/x-ms-asf"};break}l+=u}while(l+24<=a.length);return{ext:"asf",mime:"application/vnd.ms-asf"}}if(n([0,0,1,186])||n([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(n([102,116,121,112,51,103],{offset:4}))return{ext:"3gp",mime:"video/3gpp"};for(let l=0;l<2&&l<a.length-16;l++){if(n([73,68,51],{offset:l})||n([255,226],{offset:l,mask:[255,226]}))return{ext:"mp3",mime:"audio/mpeg"};if(n([255,228],{offset:l,mask:[255,228]}))return{ext:"mp2",mime:"audio/mpeg"};if(n([255,248],{offset:l,mask:[255,252]}))return{ext:"mp2",mime:"audio/mpeg"};if(n([255,240],{offset:l,mask:[255,252]}))return{ext:"mp4",mime:"audio/mpeg"}}if(n([102,116,121,112,77,52,65],{offset:4}))return{ext:"m4a",mime:"audio/mp4"};if(n([79,112,117,115,72,101,97,100],{offset:28}))return{ext:"opus",mime:"audio/opus"};if(n([79,103,103,83]))return n([128,116,104,101,111,114,97],{offset:28})?{ext:"ogv",mime:"video/ogg"}:n([1,118,105,100,101,111,0],{offset:28})?{ext:"ogm",mime:"video/ogg"}:n([127,70,76,65,67],{offset:28})?{ext:"oga",mime:"audio/ogg"}:n([83,112,101,101,120,32,32],{offset:28})?{ext:"spx",mime:"audio/ogg"}:n([1,118,111,114,98,105,115],{offset:28})?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"};if(n([102,76,97,67]))return{ext:"flac",mime:"audio/x-flac"};if(n([77,65,67,32]))return{ext:"ape",mime:"audio/ape"};if(n([119,118,112,107]))return{ext:"wv",mime:"audio/wavpack"};if(n([35,33,65,77,82,10]))return{ext:"amr",mime:"audio/amr"};if(n([37,80,68,70]))return{ext:"pdf",mime:"application/pdf"};if(n([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if((a[0]===67||a[0]===70)&&n([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(n([123,92,114,116,102]))return{ext:"rtf",mime:"application/rtf"};if(n([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(n([119,79,70,70])&&(n([0,1,0,0],{offset:4})||n([79,84,84,79],{offset:4})))return{ext:"woff",mime:"font/woff"};if(n([119,79,70,50])&&(n([0,1,0,0],{offset:4})||n([79,84,84,79],{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(n([76,80],{offset:34})&&(n([0,0,1],{offset:8})||n([1,0,2],{offset:8})||n([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(n([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(n([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(n([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(n([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(n([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(n([37,33]))return{ext:"ps",mime:"application/postscript"};if(n([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(n([83,81,76,105]))return{ext:"sqlite",mime:"application/x-sqlite3"};if(n([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(n([67,114,50,52]))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(n([77,83,67,70])||n([73,83,99,40]))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(n([33,60,97,114,99,104,62,10,100,101,98,105,97,110,45,98,105,110,97,114,121]))return{ext:"deb",mime:"application/x-deb"};if(n([33,60,97,114,99,104,62]))return{ext:"ar",mime:"application/x-unix-archive"};if(n([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(n([31,160])||n([31,157]))return{ext:"Z",mime:"application/x-compress"};if(n([76,90,73,80]))return{ext:"lz",mime:"application/x-lzip"};if(n([208,207,17,224,161,177,26,225]))return{ext:"msi",mime:"application/x-msi"};if(n([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(n([71],{offset:4})&&(n([71],{offset:192})||n([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(n([66,76,69,78,68,69,82]))return{ext:"blend",mime:"application/x-blender"};if(n([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(n([0,0,0,12,106,80,32,32,13,10,135,10])){if(n([106,112,50,32],{offset:20}))return{ext:"jp2",mime:"image/jp2"};if(n([106,112,120,32],{offset:20}))return{ext:"jpx",mime:"image/jpx"};if(n([106,112,109,32],{offset:20}))return{ext:"jpm",mime:"image/jpm"};if(n([109,106,112,50],{offset:20}))return{ext:"mj2",mime:"image/mj2"}}if(n([70,79,82,77]))return{ext:"aif",mime:"audio/aiff"};if(t("<?xml "))return{ext:"xml",mime:"application/xml"};if(n([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(n([102,116,121,112],{offset:4})){if(n([109,105,102,49],{offset:8}))return{ext:"heic",mime:"image/heif"};if(n([109,115,102,49],{offset:8}))return{ext:"heic",mime:"image/heif-sequence"};if(n([104,101,105,99],{offset:8})||n([104,101,105,120],{offset:8}))return{ext:"heic",mime:"image/heic"};if(n([104,101,118,99],{offset:8})||n([104,101,118,120],{offset:8}))return{ext:"heic",mime:"image/heic-sequence"}}return n([171,75,84,88,32,49,49,187,13,10,26,10])?{ext:"ktx",mime:"image/ktx"}:n([68,73,67,77],{offset:128})?{ext:"dcm",mime:"application/dicom"}:n([77,80,43])?{ext:"mpc",mime:"audio/x-musepack"}:n([77,80,67,75])?{ext:"mpc",mime:"audio/x-musepack"}:n([66,69,71,73,78,58])?{ext:"ics",mime:"text/calendar"}:n([103,108,84,70,2,0,0,0])?{ext:"glb",mime:"model/gltf-binary"}:n([212,195,178,161])||n([161,178,195,212])?{ext:"pcap",mime:"application/vnd.tcpdump.pcap"}:null};module.exports=fileType,module.exports.default=fileType,Object.defineProperty(fileType,"minimumBytes",{value:4100}),module.exports.stream=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.once("readable",()=>{const r=new stream.PassThrough,a=readableStream.read(module.exports.minimumBytes)||readableStream.read();try{r.fileType=fileType(a)}catch(n){reject(n)}readableStream.unshift(a),stream.pipeline?resolve(stream.pipeline(readableStream,r,()=>{})):resolve(readableStream.pipe(r))})})}(fileType)),fileType.exports}var hasRequiredImageType;function requireImageType(){if(hasRequiredImageType)return imageType$1.exports;hasRequiredImageType=1;const r=requireFileType(),a=new Set(["jpg","png","gif","webp","flif","cr2","tif","bmp","jxr","psd","ico","bpg","jp2","jpm","jpx","heic","cur","dcm"]),n=t=>{const l=r(t);return a.has(l&&l.ext)?l:null};return imageType$1.exports=n,imageType$1.exports.default=n,Object.defineProperty(n,"minimumBytes",{value:r.minimumBytes}),imageType$1.exports}var imageTypeExports=requireImageType();const imageType=getDefaultExportFromCjs(imageTypeExports);function guessStripByteCounts(r){if(r.compression!==1)throw new Error("missing mandatory StripByteCounts field in compressed image");const a=r.rowsPerStrip*r.width*r.samplesPerPixel*(r.bitsPerSample/8);return new Array(r.stripOffsets.length).fill(a)}function applyHorizontalDifferencing8Bit(r,a,n){let t=0;for(;t<r.length;){for(let l=n;l<a*n;l+=n)for(let u=0;u<n;u++)r[t+l+u]=r[t+l+u]+r[t+l-(n-u)]&255;t+=a*n}}function applyHorizontalDifferencing16Bit(r,a,n){let t=0;for(;t<r.length;){for(let l=n;l<a*n;l+=n)for(let u=0;u<n;u++)r[t+l+u]=r[t+l+u]+r[t+l-(n-u)]&65535;t+=a*n}}const tagsById$2={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},tagsByName$2={};for(let r in tagsById$2)tagsByName$2[tagsById$2[r]]=Number(r);const exif=Object.freeze(Object.defineProperty({__proto__:null,tagsById:tagsById$2,tagsByName:tagsByName$2},Symbol.toStringTag,{value:"Module"})),tagsById$1={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},tagsByName$1={};for(let r in tagsById$1)tagsByName$1[tagsById$1[r]]=Number(r);const gps=Object.freeze(Object.defineProperty({__proto__:null,tagsById:tagsById$1,tagsByName:tagsByName$1},Symbol.toStringTag,{value:"Module"})),tagsById={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},tagsByName={};for(let r in tagsById)tagsByName[tagsById[r]]=Number(r);const standard=Object.freeze(Object.defineProperty({__proto__:null,tagsById,tagsByName},Symbol.toStringTag,{value:"Module"})),tags={standard,exif,gps};class IFD{constructor(a){if(!a)throw new Error("missing kind");this.data=new Uint8Array,this.fields=new Map,this.kind=a,this._hasMap=!1,this._map={}}get(a){if(typeof a=="number")return this.fields.get(a);if(typeof a=="string")return this.fields.get(tags[this.kind].tagsByName[a]);throw new Error("expected a number or string")}get map(){if(!this._hasMap){const a=tags[this.kind].tagsById;for(let n of this.fields.keys())a[n]&&(this._map[a[n]]=this.fields.get(n));this._hasMap=!0}return this._map}}let types$1=new Map([[1,[1,readByte]],[2,[1,readASCII]],[3,[2,readShort]],[4,[4,readLong]],[5,[8,readRational]],[6,[1,readSByte]],[7,[1,readByte]],[8,[2,readSShort]],[9,[4,readSLong]],[10,[8,readSRational]],[11,[4,readFloat]],[12,[8,readDouble]]]);function getByteLength(r,a){const n=types$1.get(r);if(!n)throw new Error(`type not found: ${r}`);return n[0]*a}function readData(r,a,n){const t=types$1.get(a);if(!t)throw new Error(`type not found: ${a}`);return t[1](r,n)}function readByte(r,a){if(a===1)return r.readUint8();let n=new Uint8Array(a);for(let t=0;t<a;t++)n[t]=r.readUint8();return n}function readASCII(r,a){let n=[],t="";for(let l=0;l<a;l++){let u=String.fromCharCode(r.readUint8());u==="\0"?(n.push(t),t=""):t+=u}return n.length===1?n[0]:n}function readShort(r,a){if(a===1)return r.readUint16();let n=new Uint16Array(a);for(let t=0;t<a;t++)n[t]=r.readUint16();return n}function readLong(r,a){if(a===1)return r.readUint32();let n=new Uint32Array(a);for(let t=0;t<a;t++)n[t]=r.readUint32();return n}function readRational(r,a){if(a===1)return r.readUint32()/r.readUint32();let n=new Array(a);for(let t=0;t<a;t++)n[t]=r.readUint32()/r.readUint32();return n}function readSByte(r,a){if(a===1)return r.readInt8();let n=new Int8Array(a);for(let t=0;t<a;t++)n[t]=r.readInt8();return n}function readSShort(r,a){if(a===1)return r.readInt16();let n=new Int16Array(a);for(let t=0;t<a;t++)n[t]=r.readInt16();return n}function readSLong(r,a){if(a===1)return r.readInt32();let n=new Int32Array(a);for(let t=0;t<a;t++)n[t]=r.readInt32();return n}function readSRational(r,a){if(a===1)return r.readInt32()/r.readInt32();let n=new Array(a);for(let t=0;t<a;t++)n[t]=r.readInt32()/r.readInt32();return n}function readFloat(r,a){if(a===1)return r.readFloat32();let n=new Float32Array(a);for(let t=0;t<a;t++)n[t]=r.readFloat32();return n}function readDouble(r,a){if(a===1)return r.readFloat64();let n=new Float64Array(a);for(let t=0;t<a;t++)n[t]=r.readFloat64();return n}const CLEAR_CODE=256,EOI_CODE=257,TABLE_START=258,MIN_BIT_LENGTH=9;let stringTable=[];function initializeStringTable(){if(stringTable.length===0){for(let a=0;a<256;a++)stringTable.push([a]);const r=[];for(let a=256;a<4096;a++)stringTable.push(r)}}const andTable=[511,1023,2047,4095],bitJumps=[0,0,0,0,0,0,0,0,0,511,1023,2047,4095];class LzwDecoder{constructor(a){this.nextData=0,this.nextBits=0,this.bytePointer=0,this.tableLength=TABLE_START,this.currentBitLength=MIN_BIT_LENGTH,this.stripArray=new Uint8Array(a.buffer,a.byteOffset,a.byteLength),this.outData=new IOBuffer(a.byteLength),this.initializeTable()}decode(){let a=0,n=0;for(;(a=this.getNextCode())!==EOI_CODE;)if(a===CLEAR_CODE){if(this.initializeTable(),a=this.getNextCode(),a===EOI_CODE)break;this.writeString(this.stringFromCode(a)),n=a}else if(this.isInTable(a))this.writeString(this.stringFromCode(a)),this.addStringToTable(this.stringFromCode(n).concat(this.stringFromCode(a)[0])),n=a;else{const l=this.stringFromCode(n).concat(this.stringFromCode(n)[0]);this.writeString(l),this.addStringToTable(l),n=a}const t=this.outData.toArray();return new DataView(t.buffer,t.byteOffset,t.byteLength)}initializeTable(){initializeStringTable(),this.tableLength=TABLE_START,this.currentBitLength=MIN_BIT_LENGTH}writeString(a){this.outData.writeBytes(a)}stringFromCode(a){return stringTable[a]}isInTable(a){return a<this.tableLength}addStringToTable(a){if(stringTable[this.tableLength++]=a,stringTable.length>4096)throw stringTable=[],new Error("LZW decoding error. Please open an issue at https://github.com/image-js/tiff/issues/new/choose (include a test image).");this.tableLength===bitJumps[this.currentBitLength]&&this.currentBitLength++}getNextCode(){this.nextData=this.nextData<<8|this.stripArray[this.bytePointer++]&255,this.nextBits+=8,this.nextBits<this.currentBitLength&&(this.nextData=this.nextData<<8|this.stripArray[this.bytePointer++]&255,this.nextBits+=8);const a=this.nextData>>this.nextBits-this.currentBitLength&andTable[this.currentBitLength-9];return this.nextBits-=this.currentBitLength,this.bytePointer>this.stripArray.length?257:a}}function decompressLzw(r){return new LzwDecoder(r).decode()}const dateTimeRegex=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class TiffIfd extends IFD{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){let a=new Date,n=dateTimeRegex.exec(this.dateTime);if(n===null)throw new Error(`invalid dateTime: ${this.dateTime}`);return a.setFullYear(Number(n[1]),Number(n[2])-1,Number(n[3])),a.setHours(Number(n[4]),Number(n[5]),Number(n[6])),a}get newSubfileType(){return this.get("NewSubfileType")}get imageWidth(){return this.get("ImageWidth")}get imageLength(){return this.get("ImageLength")}get bitsPerSample(){const a=this.get("BitsPerSample");return a&&typeof a!="number"?a[0]:a}get alpha(){const a=this.extraSamples;return a?a[0]!==0:!1}get associatedAlpha(){const a=this.extraSamples;return a?a[0]===1:!1}get extraSamples(){return alwaysArray(this.get("ExtraSamples"))}get compression(){return this.get("Compression")||1}get type(){return this.get("PhotometricInterpretation")}get fillOrder(){return this.get("FillOrder")||1}get documentName(){return this.get("DocumentName")}get imageDescription(){return this.get("ImageDescription")}get stripOffsets(){return alwaysArray(this.get("StripOffsets"))}get orientation(){return this.get("Orientation")}get samplesPerPixel(){return this.get("SamplesPerPixel")||1}get rowsPerStrip(){return this.get("RowsPerStrip")}get stripByteCounts(){return alwaysArray(this.get("StripByteCounts"))}get minSampleValue(){return this.get("MinSampleValue")||0}get maxSampleValue(){return this.get("MaxSampleValue")||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get("XResolution")}get yResolution(){return this.get("YResolution")}get planarConfiguration(){return this.get("PlanarConfiguration")||1}get resolutionUnit(){return this.get("ResolutionUnit")||2}get dateTime(){return this.get("DateTime")}get predictor(){return this.get("Predictor")||1}get sampleFormat(){return this.get("SampleFormat")||1}get sMinSampleValue(){return this.get("SMinSampleValue")||this.minSampleValue}get sMaxSampleValue(){return this.get("SMaxSampleValue")||this.maxSampleValue}get palette(){const a=2**this.bitsPerSample,n=this.get("ColorMap");if(!n)return;if(n.length!==3*a)throw new Error(`ColorMap size must be ${a}`);const t=[];for(let l=0;l<a;l++)t.push([n[l],n[l+a],n[l+2*a]]);return t}}function alwaysArray(r){return typeof r=="number"?[r]:r}function decompressZlib(r){const a=new Uint8Array(r.buffer,r.byteOffset,r.byteLength),n=inflate_1(a);return new DataView(n.buffer,n.byteOffset,n.byteLength)}const defaultOptions$3={ignoreImageData:!1,onlyFirst:!1};class TIFFDecoder extends IOBuffer{constructor(a){super(a),this._nextIFD=0}get isMultiPage(){let a=0;for(this.decodeHeader();this._nextIFD;)if(a++,this.decodeIFD({ignoreImageData:!0},!0),a===2)return!0;if(a===1)return!1;throw unsupported("ifdCount",a)}get pageCount(){let a=0;for(this.decodeHeader();this._nextIFD;)a++,this.decodeIFD({ignoreImageData:!0},!0);if(a>0)return a;throw unsupported("ifdCount",a)}decode(a={}){a=Object.assign({},defaultOptions$3,a);const n=[];for(this.decodeHeader();this._nextIFD;)if(n.push(this.decodeIFD(a,!0)),a.onlyFirst)return[n[0]];return n}decodeHeader(){const a=this.readUint16();if(a===18761)this.setLittleEndian();else if(a===19789)this.setBigEndian();else throw new Error(`invalid byte order: 0x${a.toString(16)}`);if(this.readUint16()!==42)throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(a,n){this.seek(this._nextIFD);let t;if(n)t=new TiffIfd;else{if(!a.kind)throw new Error("kind is missing");t=new IFD(a.kind)}const l=this.readUint16();for(let u=0;u<l;u++)this.decodeIFDEntry(t);if(!a.ignoreImageData){if(!(t instanceof TiffIfd))throw new Error("must be a tiff ifd");this.decodeImageData(t)}return this._nextIFD=this.readUint32(),t}decodeIFDEntry(a){const n=this.offset,t=this.readUint16(),l=this.readUint16(),u=this.readUint32();if(l<1||l>12){this.skip(4);return}getByteLength(l,u)>4&&this.seek(this.readUint32());const p=readData(this,l,u);if(a.fields.set(t,p),t===34665||t===34853){let d=this.offset,h="exif";t===34665?h="exif":t===34853&&(h="gps"),this._nextIFD=p,a[h]=this.decodeIFD({kind:h,ignoreImageData:!0},!1),this.offset=d}this.seek(n),this.skip(12)}decodeImageData(a){const n=a.orientation;if(n&&n!==1)throw unsupported("orientation",n);switch(a.type){case 0:case 1:case 2:case 3:this.readStripData(a);break;default:throw unsupported("image type",a.type)}if(this.applyPredictor(a),this.convertAlpha(a),a.type===0){const t=a.bitsPerSample,l=Math.pow(2,t)-1;for(let u=0;u<a.data.length;u++)a.data[u]=l-a.data[u]}}readStripData(a){const n=a.width,t=a.height,l=a.bitsPerSample,u=a.sampleFormat,s=n*t*a.samplesPerPixel,p=getDataArray(s,l,u),h=a.rowsPerStrip*n*a.samplesPerPixel,N=a.stripOffsets,Be=a.stripByteCounts||guessStripByteCounts(a);let b=s,E=0;for(let de=0;de<N.length;de++){let pe=new DataView(this.buffer,this.byteOffset+N[de],Be[de]),Ye=b>h?h:b;b-=Ye;let me=pe;switch(a.compression){case 1:break;case 5:{me=decompressLzw(pe);break}case 8:{me=decompressZlib(pe);break}case 2:throw unsupported("Compression","CCITT Group 3");case 32773:throw unsupported("Compression","PackBits");default:throw unsupported("Compression",a.compression)}E=this.fillUncompressed(l,u,p,me,E,Ye)}a.data=p}fillUncompressed(a,n,t,l,u,s){if(a===8)return fill8bit(t,l,u,s);if(a===16)return fill16bit(t,l,u,s,this.isLittleEndian());if(a===32&&n===3)return fillFloat32(t,l,u,s,this.isLittleEndian());throw unsupported("bitDepth",a)}applyPredictor(a){const n=a.bitsPerSample;switch(a.predictor){case 1:break;case 2:{if(n===8)applyHorizontalDifferencing8Bit(a.data,a.width,a.components);else if(n===16)applyHorizontalDifferencing16Bit(a.data,a.width,a.components);else throw new Error(`Horizontal differencing is only supported for images with a bit depth of ${n}`);break}default:throw new Error(`invalid predictor: ${a.predictor}`)}}convertAlpha(a){if(a.alpha&&a.associatedAlpha){const{data:n,components:t,maxSampleValue:l}=a;for(let u=0;u<n.length;u+=t){const s=n[u+t-1];for(let p=0;p<t-1;p++)n[u+p]=Math.round(n[u+p]*l/s)}}}}function getDataArray(r,a,n){if(a===8)return new Uint8Array(r);if(a===16)return new Uint16Array(r);if(a===32&&n===3)return new Float32Array(r);throw unsupported("bit depth / sample format",`${a} / ${n}`)}function fill8bit(r,a,n,t){for(let l=0;l<t;l++)r[n++]=a.getUint8(l);return n}function fill16bit(r,a,n,t,l){for(let u=0;u<t*2;u+=2)r[n++]=a.getUint16(u,l);return n}function fillFloat32(r,a,n,t,l){for(let u=0;u<t*4;u+=4)r[n++]=a.getFloat32(u,l);return n}function unsupported(r,a){return new Error(`Unsupported ${r}: ${a}`)}function decodeTIFF(r,a){return new TIFFDecoder(r).decode(a)}function matchAndCrop(r={}){let{algorithm:a="matchToPrevious",ignoreBorder:n=[0,0]}=r;this.checkProcessable("matchAndCrop",{bitDepth:[8,16]});let t=a==="matchToPrevious",l=this[0],u=[];u[0]={position:[0,0],image:this[0]};let s=[0,0];for(let b=1;b<this.length;b++){let E=l.getBestMatch(this[b],{border:n});u[b]={position:[E[0]+s[0],E[1]+s[1]],image:this[b]},t&&(s[0]+=E[0],s[1]+=E[1],l=this[b])}let p=0,d=0,h=0,N=0;for(let b=0;b<u.length;b++){let E=u[b];E.position[0]>p&&(p=E.position[0]),E.position[0]<d&&(d=E.position[0]),E.position[1]>h&&(h=E.position[1]),E.position[1]<N&&(N=E.position[1])}d=0-d,N=0-N;for(let b=0;b<u.length;b++){let E=u[b];E.crop=E.image.crop({x:p-E.position[0],y:h-E.position[1],width:l.width-d-p,height:l.height-N-h})}let Be=[];for(let b=0;b<u.length;b++)Be[b]=u[b].crop;return new Stack(Be)}function min$2(){this.checkProcessable("min",{bitDepth:[8,16]});let r=this[0].min;for(let a=1;a<this.length;a++)for(let n=0;n<r.length;n++)r[n]=Math.min(r[n],this[a].min[n]);return r}function max$2(){this.checkProcessable("min",{bitDepth:[8,16]});let r=this[0].max;for(let a=1;a<this.length;a++)for(let n=0;n<r.length;n++)r[n]=Math.max(r[n],this[a].max[n]);return r}function median$2(r){let a=r.reduce((s,p)=>s+p);if(a===0)throw new Error("unreachable");let n=0,t=0,l=a/2,u;for(;;){if(r[n]>0){if(u!==void 0)return(u+n)/2;if(t+=r[n],t>l)return n;t===l&&(u=n)}n++}}function mean$2(r){let a=0,n=0;for(let t=0;t<r.length;t++)a+=r[t],n+=r[t]*t;return a===0?0:n/a}function median$1(){this.checkProcessable("median",{bitDepth:[8,16]});let r=this.getHistograms({maxSlots:this[0].maxValue+1}),a=new Array(r.length);for(let n=0;n<r.length;n++){let t=r[n];a[n]=median$2(t)}return a}function histogram(r){this.checkProcessable("min",{bitDepth:[8,16]});let a=this[0].getHistogram(r);for(let n=1;n<this.length;n++){let t=this[n].getHistogram(r);for(let l=0;l<a.length;l++)a[l]+=t[l]}return a}function histograms(r){this.checkProcessable("min",{bitDepth:[8,16]});let a=this[0].getHistograms(r),n=a[0].length;for(let t=1;t<this.length;t++){let l=this[t].getHistograms(r);for(let u=0;u<a.length;u++)for(let s=0;s<n;s++)a[u][s]+=l[u][s]}return a}function averageImage(){this.checkProcessable("averageImage",{bitDepth:[8,16]});let r=new Uint32Array(this[0].data.length);for(let t=0;t<this.length;t++){let l=this[t];for(let u=0;u<this[0].data.length;u++)r[u]+=l.data[u]}let a=Image$1.createFrom(this[0]),n=a.data;for(let t=0;t<this[0].data.length;t++)n[t]=r[t]/this.length;return a}function maxImage(){this.checkProcessable("max",{bitDepth:[8,16]});let r=Image$1.createFrom(this[0]);r.data.fill(0);for(const a of this)for(let n=0;n<r.data.length;n++)r.data[n]=Math.max(a.data[n],r.data[n]);return r}function minImage(){this.checkProcessable("max",{bitDepth:[8,16]});let r=Image$1.createFrom(this[0]);r.data.fill(r.maxValue);for(const a of this)for(let n=0;n<r.data.length;n++)r.data[n]=Math.min(a.data[n],r.data[n]);return r}function extend$3(r){r.extendMethod("matchAndCrop",matchAndCrop),r.extendMethod("getMin",min$2),r.extendMethod("getMax",max$2),r.extendMethod("getMedian",median$1),r.extendMethod("getHistogram",histogram),r.extendMethod("getHistograms",histograms),r.extendMethod("getAverage",averageImage),r.extendMethod("getAverageImage",averageImage),r.extendMethod("getMaxImage",maxImage),r.extendMethod("getMinImage",minImage)}let computedPropertyDescriptor={configurable:!0,enumerable:!1,get:void 0};class Stack extends Array{constructor(a){if(Array.isArray(a)){super(a.length);for(let n=0;n<a.length;n++)this[n]=a[n]}else typeof a=="number"?super(a):super();this.computed=null}static load(a){return Promise.all(a.map(Image$1.load)).then(n=>new Stack(n))}static extendMethod(a,n,t={}){let{inPlace:l=!1,returnThis:u=!0,partialArgs:s=[]}=t;return l?Stack.prototype[a]=function(...p){this.computed=null;let d=n.apply(this,[...s,...p]);return u?this:d}:Stack.prototype[a]=function(...p){return n.apply(this,[...s,...p])},Stack}static extendProperty(a,n,t={}){let{partialArgs:l=[]}=t;return computedPropertyDescriptor.get=function(){if(this.computed===null)this.computed={};else if(hasOwn(a,this.computed))return this.computed[a];let u=n.apply(this,l);return this.computed[a]=u,u},Object.defineProperty(Stack.prototype,a,computedPropertyDescriptor),Stack}checkProcessable(a,n={}){if(typeof a!="string")throw new TypeError("checkProcessable requires as first parameter the processName (a string)");if(this.size===0)throw new TypeError(`The process: ${a} can not be applied on an empty stack`);this[0].checkProcessable(a,n);for(let t=1;t<this.length;t++){if((n.sameSize===void 0||n.sameSize)&&this[0].width!==this[t].width)throw new TypeError(`The process: ${a} can not be applied if width is not identical in all images`);if((n.sameSize===void 0||n.sameSize)&&this[0].height!==this[t].height)throw new TypeError(`The process: ${a} can not be applied if height is not identical in all images`);if((n.sameAlpha===void 0||n.sameAlpha)&&this[0].alpha!==this[t].alpha)throw new TypeError(`The process: ${a} can not be applied if alpha is not identical in all images`);if((n.sameBitDepth===void 0||n.sameBitDepth)&&this[0].bitDepth!==this[t].bitDepth)throw new TypeError(`The process: ${a} can not be applied if bitDepth is not identical in all images`);if((n.sameColorModel===void 0||n.sameColorModel)&&this[0].colorModel!==this[t].colorModel)throw new TypeError(`The process: ${a} can not be applied if colorModel is not identical in all images`);if((n.sameNumberChannels===void 0||n.sameNumberChannels)&&this[0].channels!==this[t].channels)throw new TypeError(`The process: ${a} can not be applied if channels is not identical in all images`)}}}Array[Symbol.species]||(Stack.prototype.map=function(r,a){if(typeof r!="function")throw new TypeError(`${r} is not a function`);let n=new Stack(this.length);for(let t=0;t<this.length;t++)n[t]=r.call(a,this[t],t,this);return n});extend$3(Stack);const isDataURL=/^data:[a-z]+\/(?:[a-z]+);base64,/;function load$2(r,a){if(typeof r=="string")return loadURL(r,a);if(r instanceof ArrayBuffer)return Promise.resolve(loadBinary(new Uint8Array(r),void 0,a&&a.ignorePalette));if(r.buffer)return Promise.resolve(loadBinary(r,void 0,a&&a.ignorePalette));throw new Error('argument to "load" must be a string or buffer.')}function loadBinary(r,a,n){const t=imageType(r);if(t)switch(t.mime){case"image/png":return loadPNG(r);case"image/jpeg":return loadJPEG(r);case"image/tiff":return loadTIFF(r,n);default:return loadGeneric(l(t.mime))}return loadGeneric(l("application/octet-stream"));function l(u){return a||toBase64URL(r,u)}}function loadURL(r,a){const n=r.slice(0,64).match(isDataURL);let t;return n!==null?t=Promise.resolve(decode$1(r.slice(n[0].length))):t=fetchBinary(r,a),t.then(l=>{const u=new Uint8Array(l);return loadBinary(u,n?r:void 0,a&&a.ignorePalette)})}function loadPNG(r){const a=decodePng(r);let n=a.channels,t,l=0;return n===2||n===4?(t=n-1,l=1):t=n,a.palette?loadPNGFromPalette(a):new Image$1(a.width,a.height,a.data,{components:t,alpha:l,bitDepth:a.depth,meta:{text:a.text}})}function loadPNGFromPalette(r){const a=r.width*r.height,n=r.palette[0].length,t=new Uint8Array(a*n),l=8/r.depth,u=r.depth<8?l:1,s=parseInt("1".repeat(r.depth),2),p=n===4;let d=0;for(let h=0;h<a;h++){const N=Math.floor(h/u);let Be=r.data[N];r.depth<8&&(Be=Be>>>r.depth*(l-1-h%l)&s);const b=r.palette[Be];t[d++]=b[0],t[d++]=b[1],t[d++]=b[2],p&&(t[d++]=b[3])}return new Image$1(r.width,r.height,t,{components:3,alpha:p,bitDepth:8})}function loadJPEG(r){const a=srcExports$2.decode(r);let n;a.exif&&(n=getMetadata(a.exif));const t=jpegJsExports.decode(r,{useTArray:!0,maxMemoryUsageInMB:1024});let l=new Image$1(t.width,t.height,t.data,{meta:n});if(n&&n.tiff.tags.Orientation){const u=n.tiff.tags.Orientation;u>2&&(l=l.rotate({3:180,4:180,5:90,6:90,7:270,8:270}[u])),[2,4,5,7].includes(u)&&(l=l.flipX())}return l}function loadTIFF(r,a){let n=decodeTIFF(r);return n.length===1?getImageFromIFD(n[0],a):new Stack(n.map(function(t){return getImageFromIFD(t,a)}))}function getMetadata(r){const a={tiff:{fields:r.fields,tags:r.map}};return r.exif&&(a.exif=r.exif),r.gps&&(a.gps=r.gps),a}function getImageFromIFD(r,a){if(!a&&r.type===3){const n=new Uint16Array(3*r.width*r.height),t=r.palette;let l=0;for(let u=0;u<r.data.length;u++){const s=r.data[u],p=t[s];n[l++]=p[0],n[l++]=p[1],n[l++]=p[2]}return new Image$1(r.width,r.height,n,{components:3,alpha:r.alpha,colorModel:RGB$1,bitDepth:16,meta:getMetadata(r)})}else return new Image$1(r.width,r.height,r.data,{components:r.type===2?3:1,alpha:r.alpha,colorModel:r.type===2?RGB$1:GREY$1,bitDepth:r.bitsPerSample.length?r.bitsPerSample[0]:r.bitsPerSample,meta:getMetadata(r)})}function loadGeneric(r,a){return a=a||{},new Promise(function(n,t){let l=new DOMImage;l.onload=function(){let u=l.width,s=l.height,d=createCanvas(u,s).getContext("2d");d.drawImage(l,0,0,u,s);let h=d.getImageData(0,0,u,s).data;n(new Image$1(u,s,h,a))},l.onerror=function(){t(new Error(`Could not load ${r}`))},l.src=r})}const valueMethods={getValueXY(r,a,n){return this.data[(a*this.width+r)*this.channels+n]},setValueXY(r,a,n,t){return this.data[(a*this.width+r)*this.channels+n]=t,this.computed=null,this},getValue(r,a){return this.data[r*this.channels+a]},setValue(r,a,n){return this.data[r*this.channels+a]=n,this.computed=null,this},getPixelXY(r,a){return this.getPixel(a*this.width+r)},setPixelXY(r,a,n){return this.setPixel(a*this.width+r,n)},getPixel(r){const a=new Array(this.channels),n=r*this.channels;for(let t=0;t<this.channels;t++)a[t]=this.data[n+t];return a},setPixel(r,a){const n=r*this.channels;for(let t=0;t<a.length;t++)this.data[n+t]=a[t];return this.computed=null,this}};function setValueMethods(r){for(const a in valueMethods)r.prototype[a]=valueMethods[a]}function getImageParameters(r){return{width:r.width,height:r.height,components:r.components,alpha:r.alpha,colorModel:r.colorModel,bitDepth:r.bitDepth}}function getOutputImage(r,a,n,t={}){const{out:l}=a;if(l===void 0)return t.copy?r.clone():Image$1.createFrom(r,n);{if(!Image$1.isImage(l))throw new TypeError("out must be an Image object");const u=Object.assign(getImageParameters(r),n);for(const s in u)if(l[s]!==u[s])throw new RangeError(`cannot use out. Its ${s} must be "${u[s]}" (found "${l[s]}")`);return l}}function getOutputImageOrInPlace(r,a,n){if(a.inPlace!==void 0&&typeof a.inPlace!="boolean")throw new TypeError("inPlace option must be a boolean");if(a.inPlace){if(a.out!==void 0)throw new TypeError("out option must not be set if inPlace option is true");return r}return getOutputImage(r,a,null,n)}function abs(r={}){this.checkProcessable("abs",{bitDepth:[32]});const a=getOutputImageOrInPlace(this,r);return absolute(this,a),a}function absolute(r,a){for(let n=0;n<r.data.length;n++)a.data[n]=Math.abs(r.data[n])}function copyAlphaChannel(r,a){if(r.alpha===1&&a.alpha===1)for(let n=0;n<r.size;n++)a.data[n*a.channels+a.components]=r.data[n*r.channels+r.components]}function invert(r={}){this.checkProcessable("invert",{bitDepth:[1,8,16]});const a=getOutputImageOrInPlace(this,r);return this.bitDepth===1?invertBinary(this,a):(invertColor(this,a),this!==a&&copyAlphaChannel(this,a)),a}function invertBinary(r,a){for(let n=0;n<r.data.length;n++)a.data[n]=~r.data[n]}function invertColor(r,a){for(let n=0;n<r.data.length;n+=r.channels)for(let t=0;t<r.components;t++)a.data[n+t]=r.maxValue-r.data[n+t]}function flipX(){this.checkProcessable("flipX",{bitDepth:[8,16]});for(let r=0;r<this.height;r++){let a=r*this.width*this.channels;for(let n=0;n<Math.floor(this.width/2);n++){let t=n*this.channels+a,l=(this.width-n-1)*this.channels+a;for(let u=0;u<this.channels;u++){let s=this.data[t+u];this.data[t+u]=this.data[l+u],this.data[l+u]=s}}}return this}function flipY(){this.checkProcessable("flipY",{bitDepth:[8,16]});for(let r=0;r<Math.floor(this.height/2);r++)for(let a=0;a<this.width;a++){let n=a*this.channels+r*this.width*this.channels,t=a*this.channels+(this.height-1-r)*this.channels*this.width;for(let l=0;l<this.channels;l++){let u=this.data[n+l];this.data[n+l]=this.data[t+l],this.data[t+l]=u}}return this}function blurFilter(r={}){const{radius:a=1}=r;if(a<1)throw new Error("radius must be greater than 1");const n=2*a+1,t=new Array(n);for(let l=0;l<n;l++){t[l]=new Array(n);for(let u=0;u<n;u++)t[l][u]=1/(n*n)}return this.convolution(t)}var medianQuickselect_min={exports:{}},hasRequiredMedianQuickselect_min;function requireMedianQuickselect_min(){return hasRequiredMedianQuickselect_min||(hasRequiredMedianQuickselect_min=1,function(r){(function(){function a(l){for(var u=0,s=l.length-1,p=void 0,d=void 0,h=void 0,N=t(u,s);;){if(s<=u)return l[N];if(s==u+1)return l[u]>l[s]&&n(l,u,s),l[N];for(p=t(u,s),l[p]>l[s]&&n(l,p,s),l[u]>l[s]&&n(l,u,s),l[p]>l[u]&&n(l,p,u),n(l,p,u+1),d=u+1,h=s;;){do d++;while(l[u]>l[d]);do h--;while(l[h]>l[u]);if(h<d)break;n(l,d,h)}n(l,u,h),h<=N&&(u=d),h>=N&&(s=h-1)}}var n=function(u,s,p){var d;return d=[u[p],u[s]],u[s]=d[0],u[p]=d[1],d},t=function(u,s){return~~((u+s)/2)};r.exports?r.exports=a:window.median=a})()}(medianQuickselect_min)),medianQuickselect_min.exports}var medianQuickselect_minExports=requireMedianQuickselect_min();const quickSelectMedian=getDefaultExportFromCjs(medianQuickselect_minExports);function validateArrayOfChannels(r,a={}){let{channels:n,allowAlpha:t,defaultAlpha:l}=a;return typeof t!="boolean"&&(t=!0),typeof n>"u"?allChannels(r,l):validateChannels(r,n,t)}function allChannels(r,a){let n=a?r.channels:r.components,t=new Array(n);for(let l=0;l<n;l++)t[l]=l;return t}function validateChannels(r,a,n){Array.isArray(a)||(a=[a]);for(let t=0;t<a.length;t++)a[t]=validateChannel(r,a[t],n);return a}function validateChannel(r,a,n=!0){if(a===void 0)throw new RangeError(`validateChannel : the channel has to be >=0 and <${r.channels}`);if(typeof a=="string"){switch(r.colorModel){case GREY$1:break;case RGB$1:if("rgb".includes(a))switch(a){case"r":a=0;break;case"g":a=1;break;case"b":a=2;break}break;case HSL:if("hsl".includes(a))switch(a){case"h":a=0;break;case"s":a=1;break;case"l":a=2;break}break;case HSV:if("hsv".includes(a))switch(a){case"h":a=0;break;case"s":a=1;break;case"v":a=2;break}break;case CMYK$1:if("cmyk".includes(a))switch(a){case"c":a=0;break;case"m":a=1;break;case"y":a=2;break;case"k":a=3;break}break;default:throw new Error(`Unexpected color model: ${r.colorModel}`)}if(a==="a"){if(!r.alpha)throw new Error("validateChannel : the image does not contain alpha channel");a=r.components}if(typeof a=="string")throw new Error(`validateChannel : undefined channel: ${a}`)}if(a>=r.channels)throw new RangeError(`validateChannel : the channel has to be >=0 and <${r.channels}`);if(!n&&a>=r.components)throw new RangeError("validateChannel : alpha channel may not be selected");return a}function medianFilter(r={}){let{radius:a=1,border:n="copy",channels:t}=r;if(this.checkProcessable("medianFilter",{bitDepth:[8,16]}),a<1)throw new Error("radius must be greater than 0");t=validateArrayOfChannels(this,t);let l=a,u=a,s=Image$1.createFrom(this),p=(l*2+1)*(u*2+1),d=new Array(p);for(let h=0;h<t.length;h++){let N=t[h];for(let Be=u;Be<this.height-u;Be++)for(let b=l;b<this.width-l;b++){let E=0;for(let pe=-u;pe<=u;pe++)for(let Ye=-l;Ye<=l;Ye++){let me=((Be+pe)*this.width+b+Ye)*this.channels+N;d[E++]=this.data[me]}let de=(Be*this.width+b)*this.channels+N;s.data[de]=quickSelectMedian(d)}}if(this.alpha&&!t.includes(this.channels))for(let h=this.components;h<this.data.length;h=h+this.channels)s.data[h]=this.data[h];return s.setBorder({size:[l,u],algorithm:n}),s}function gaussianFilter(r={}){let{radius:a=1,sigma:n,channels:t,border:l="copy"}=r;this.checkProcessable("gaussian",{bitDepth:[8,16]});const u=getKernel(a,n);return this.convolution([u,u],{border:l,channels:t,algorithm:"separable"})}function getKernel(r,a){const n=r*2+1,t=new Array(n),l=a||((n-1)*.5-1)*.3+.8,u=-.5/(l*l);let s=0;for(let p=0;p<n;p++){const d=p-r,h=Math.exp(u*d*d);t[p]=h,s+=h}for(let p=0;p<n;p++)t[p]/=s;return t}const SOBEL_X=[[-1,0,1],[-2,0,2],[-1,0,1]],SOBEL_Y=[[-1,-2,-1],[0,0,0],[1,2,1]],SCHARR_X=[[3,0,-3],[10,0,-10],[3,0,-3]],SCHARR_Y=[[3,10,3],[0,0,0],[-3,-10,-3]];var src$2={},fftlib={},hasRequiredFftlib;function requireFftlib(){return hasRequiredFftlib||(hasRequiredFftlib=1,function(r){(function(){var a;a=r;var n={release:"0.3.0",date:"2013-03"};a.toString=function(){return"version "+n.release+", released "+n.date};for(var t=0,l=null,u=null,s={init:function(h){if(h!==0&&(h&h-1)===0)t=h,s._initArray(),s._makeBitReversalTable(),s._makeCosSinTable();else throw new Error("init: radix-2 required")},fft1d:function(h,N){s.fft(h,N,1)},ifft1d:function(h,N){var Be=1/t;s.fft(h,N,-1);for(var b=0;b<t;b++)h[b]*=Be,N[b]*=Be},bt1d:function(h,N){s.fft(h,N,-1)},fft2d:function(h,N){for(var Be=[],b=[],E=0,de=0;de<t;de++){E=de*t;for(var pe=0;pe<t;pe++)Be[pe]=h[pe+E],b[pe]=N[pe+E];s.fft1d(Be,b);for(var Ye=0;Ye<t;Ye++)h[Ye+E]=Be[Ye],N[Ye+E]=b[Ye]}for(var me=0;me<t;me++){for(var Le=0;Le<t;Le++)E=me+Le*t,Be[Le]=h[E],b[Le]=N[E];s.fft1d(Be,b);for(var nt=0;nt<t;nt++)E=me+nt*t,h[E]=Be[nt],N[E]=b[nt]}},ifft2d:function(h,N){for(var Be=[],b=[],E=0,de=0;de<t;de++){E=de*t;for(var pe=0;pe<t;pe++)Be[pe]=h[pe+E],b[pe]=N[pe+E];s.ifft1d(Be,b);for(var Ye=0;Ye<t;Ye++)h[Ye+E]=Be[Ye],N[Ye+E]=b[Ye]}for(var me=0;me<t;me++){for(var Le=0;Le<t;Le++)E=me+Le*t,Be[Le]=h[E],b[Le]=N[E];s.ifft1d(Be,b);for(var nt=0;nt<t;nt++)E=me+nt*t,h[E]=Be[nt],N[E]=b[nt]}},fft:function(h,N,Be){for(var b,E,de,pe,Ye,me,Le,nt,tt,ft=t>>2,yt=0;yt<t;yt++)pe=l[yt],yt<pe&&(Ye=h[yt],h[yt]=h[pe],h[pe]=Ye,Ye=N[yt],N[yt]=N[pe],N[pe]=Ye);for(var gt=1;gt<t;gt<<=1){E=0,b=t/(gt<<1);for(var mt=0;mt<gt;mt++){me=u[E+ft],Le=Be*u[E];for(var wt=mt;wt<t;wt+=gt<<1)de=wt+gt,nt=me*h[de]+Le*N[de],tt=me*N[de]-Le*h[de],h[de]=h[wt]-nt,h[wt]+=nt,N[de]=N[wt]-tt,N[wt]+=tt;E+=b}}},_initArray:function(){typeof Uint32Array<"u"?l=new Uint32Array(t):l=[],typeof Float64Array<"u"?u=new Float64Array(t*1.25):u=[]},_paddingZero:function(){},_makeBitReversalTable:function(){var h=0,N=0,Be=0;for(l[0]=0;++h<t;){for(Be=t>>1;Be<=N;)N-=Be,Be>>=1;N+=Be,l[h]=N}},_makeCosSinTable:function(){var h=t>>1,N=t>>2,Be=t>>3,b=h+N,E=Math.sin(Math.PI/t),de=2*E*E,pe=Math.sqrt(de*(2-de)),Ye=u[N]=1,me=u[0]=0;E=2*de;for(var Le=1;Le<Be;Le++)Ye-=de,de+=E*Ye,me+=pe,pe-=E*me,u[Le]=me,u[N-Le]=Ye;Be!==0&&(u[Be]=Math.sqrt(.5));for(var nt=0;nt<N;nt++)u[h-nt]=u[nt];for(var tt=0;tt<b;tt++)u[tt+h]=-u[tt]}},p=["init","fft1d","ifft1d","fft2d","ifft2d"],d=0;d<p.length;d++)a[p[d]]=s[p[d]];return a.bt=s.bt1d,a.fft=s.fft1d,a.ifft=s.ifft1d,a}).call(fftlib)}(fftlib)),fftlib}var FFTUtils_1,hasRequiredFFTUtils;function requireFFTUtils(){if(hasRequiredFFTUtils)return FFTUtils_1;hasRequiredFFTUtils=1;var r=requireFftlib(),a={DEBUG:!1,ifft2DArray:function(n,t,l){var u=new Array(t*l),s=t/2,p=(l-1)*2;r.init(s);for(var d={re:new Array(s),im:new Array(s)},h=0;h<l;h++){for(var N=s-1;N>=0;N--)d.re[N]=n[N*2*l+h],d.im[N]=n[(N*2+1)*l+h];r.bt(d.re,d.im);for(var N=s-1;N>=0;N--)u[N*2*l+h]=d.re[N],u[(N*2+1)*l+h]=d.im[N]}var Be=new Array(s*p);r.init(p);for(var b={re:new Array(p),im:new Array(p)},E=p*s,N=0;N<t;N+=2){b.re[0]=u[N*l],b.im[0]=u[(N+1)*l];for(var h=1;h<l;h++)b.re[h]=u[N*l+h],b.im[h]=u[(N+1)*l+h],b.re[p-h]=u[N*l+h],b.im[p-h]=-u[(N+1)*l+h];r.bt(b.re,b.im);for(var de=N/2*p,h=p-1;h>=0;h--)Be[de+h]=b.re[h]/E}return Be},fft2DArray:function(n,t,l,u){Object.assign({},{inplace:!0});var s=l/2+1,p=t*2,d=new Array(p*s);r.init(l);for(var h={re:new Array(l),im:new Array(l)},N={re:new Array(l),im:new Array(l)},Be={re:new Array(l),im:new Array(l)},b,E,de,pe,Ye,me=0;me<t/2;me++){b=me*2*l,h.re=n.slice(b,b+l),b=(me*2+1)*l,h.im=n.slice(b,b+l),r.fft1d(h.re,h.im),this.reconstructTwoRealFFT(h,N,Be),E=me*4*s,de=(me*4+1)*s,pe=(me*4+2)*s,Ye=(me*4+3)*s;for(var Le=s-1;Le>=0;Le--)d[E+Le]=N.re[Le],d[de+Le]=N.im[Le],d[pe+Le]=Be.re[Le],d[Ye+Le]=Be.im[Le]}N=null,Be=null;var nt=new Array(p*s);r.init(t);for(var tt={re:new Array(t),im:new Array(t)},ft=s-1;ft>=0;ft--){for(var me=t-1;me>=0;me--)tt.re[me]=d[me*2*s+ft],tt.im[me]=d[(me*2+1)*s+ft],isNaN(tt.re[me])&&(tt.re[me]=0),isNaN(tt.im[me])&&(tt.im[me]=0);r.fft1d(tt.re,tt.im);for(var me=t-1;me>=0;me--)nt[me*2*s+ft]=tt.re[me],nt[(me*2+1)*s+ft]=tt.im[me]}return nt},reconstructTwoRealFFT:function(n,t,l){var u=n.re.length;t.re[0]=n.re[0],t.im[0]=0,l.re[0]=n.im[0],l.im[0]=0;for(var s,p,d,h,N,Be=u/2;Be>0;Be--)N=u-Be,s=.5*(n.re[Be]-n.re[N]),p=.5*(n.re[Be]+n.re[N]),d=.5*(n.im[Be]-n.im[N]),h=.5*(n.im[Be]+n.im[N]),t.re[Be]=p,t.im[Be]=d,t.re[N]=p,t.im[N]=-d,l.re[Be]=h,l.im[Be]=-s,l.re[N]=h,l.im[N]=s},convolute2DI:function(n,t,l,u){for(var s,p,d=0;d<l/2;d++)for(var h=0;h<u;h++)s=n[d*2*u+h]*t[d*2*u+h]-n[(d*2+1)*u+h]*t[(d*2+1)*u+h],p=n[d*2*u+h]*t[(d*2+1)*u+h]+n[(d*2+1)*u+h]*t[d*2*u+h],n[d*2*u+h]=s,n[(d*2+1)*u+h]=p},convolute:function(n,t,l,u,s){for(var p=new Array(u*l),d=0;d<l*u;d++)p[d]=n[d];p=this.fft2DArray(p,l,u);for(var h=t.length,N=t[0].length,Be=new Array(u*l),d=0;d<u*l;d++)Be[d]=0;for(var b,E,de=Math.floor((h-1)/2),pe=Math.floor((N-1)/2),Ye=0;Ye<h;Ye++){b=(Ye-de+l)%l;for(var me=0;me<N;me++)E=(me-pe+u)%u,Be[b*u+E]=t[Ye][me]}Be=this.fft2DArray(Be,l,u);var Le=l*2,nt=u/2+1;return this.convolute2DI(p,Be,Le,nt),this.ifft2DArray(p,Le,nt)},toRadix2:function(n,t,l){var u,s,p,d,h=l,N=t;if(!(l!==0&&(l&l-1)===0)){for(h=0;l>>++h!=0;);h=1<<h}if(!(t!==0&&(t&t-1)===0)){for(N=0;t>>++N!=0;);N=1<<N}if(N==t&&h==l)return{data:n,rows:t,cols:l};var Be=new Array(N*h),b=Math.floor((N-t)/2)-t,E=Math.floor((h-l)/2)-l;for(u=0;u<N;u++)for(p=u*h,d=(u-b)%t*l,s=0;s<h;s++)Be[p+s]=n[d+(s-E)%l];return{data:Be,rows:N,cols:h}},crop:function(n,t,l,u,s,p){if(t==u&&l==s)return n;Object.assign({},p);var d=new Array(s*u),h=Math.floor((t-u)/2),N=Math.floor((l-s)/2),Be,b,E,de;for(E=0;E<u;E++)for(Be=E*s,b=(E+h)*l,de=0;de<s;de++)d[Be+de]=n[b+(de+N)];return d}};return FFTUtils_1=a,FFTUtils_1}var hasRequiredSrc$2;function requireSrc$2(){return hasRequiredSrc$2||(hasRequiredSrc$2=1,src$2.FFTUtils=requireFFTUtils(),src$2.FFT=requireFftlib()),src$2}var src$1,hasRequiredSrc$1;function requireSrc$1(){if(hasRequiredSrc$1)return src$1;hasRequiredSrc$1=1;var r=requireSrc$2().FFTUtils;function a(u,s,p){var d=l(u),h=d.data,N=Object.assign({normalize:!1,divisor:1,rows:d.rows,cols:d.cols},p),Be,b;if(N.rows&&N.cols)Be=N.rows,b=N.cols;else throw new Error("Invalid number of rows or columns "+Be+" "+b);var E=N.divisor,de,pe,Ye=s.length,me=s[0].length;if(N.normalize)for(E=0,de=0;de<Ye;de++)for(pe=0;pe<me;pe++)E+=s[de][pe];if(E===0)throw new RangeError("convolution: The divisor is equal to zero");var Le=r.toRadix2(h,Be,b),nt=r.convolute(Le.data,s,Le.rows,Le.cols);if(nt=r.crop(nt,Le.rows,Le.cols,Be,b),E!=0&&E!=1)for(de=0;de<nt.length;de++)nt[de]/=E;return nt}function n(u,s,p){var d=l(u),h=d.data,N=Object.assign({normalize:!1,divisor:1,rows:d.rows,cols:d.cols},p),Be,b;if(N.rows&&N.cols)Be=N.rows,b=N.cols;else throw new Error("Invalid number of rows or columns "+Be+" "+b);var E=N.divisor,de=s.length,pe=s[0].length,Ye,me,Le,nt,tt,ft,yt,gt,mt;if(N.normalize)for(E=0,Ye=0;Ye<de;Ye++)for(me=0;me<pe;me++)E+=s[Ye][me];if(E===0)throw new RangeError("convolution: The divisor is equal to zero");var wt=new Array(Be*b),St=Math.floor(de/2),bt=Math.floor(pe/2);for(nt=0;nt<Be;nt++)for(Le=0;Le<b;Le++){for(ft=0,me=0;me<de;me++)for(Ye=0;Ye<pe;Ye++)yt=s[de-me-1][pe-Ye-1],gt=(nt+me-St+Be)%Be,mt=(Le+Ye-bt+b)%b,tt=gt*b+mt,ft+=h[tt]*yt;tt=nt*b+Le,wt[tt]=ft/E}return wt}function t(u,s,p){var d=1e3;p&&p.factor&&(d=p.factor);var h=new Array(s),N,Be,b,E;d*=-1;var de=(s-1)/2,pe=2*u*u;for(N=0;N<s;N++)for(h[N]=new Array(s),E=(N-de)*(N-de),Be=0;Be<s;Be++)b=-((Be-de)*(Be-de)+E)/pe,h[N][Be]=Math.round(d*(1+b)*Math.exp(b));return h}function l(u){var s=u,p,d;if(typeof u[0]!="number"){p=u.length,d=u[0].length,s=new Array(p*d);for(var h=0;h<p;h++)for(var N=0;N<d;N++)s[h*d+N]=u[h][N]}else{var Be=Math.sqrt(u.length);Number.isInteger(Be)&&(p=Be,d=Be)}return{data:s,rows:p,cols:d}}return src$1={fft:a,direct:n,kernelFactory:{LoG:t},matrix2Array:l},src$1}var srcExports$1=requireSrc$1(),_isFinite,hasRequired_isFinite;function require_isFinite(){return hasRequired_isFinite||(hasRequired_isFinite=1,_isFinite=Number.isFinite||function(r){return!(typeof r!="number"||r!==r||r===1/0||r===-1/0)}),_isFinite}var isInteger$2,hasRequiredIsInteger;function requireIsInteger(){if(hasRequiredIsInteger)return isInteger$2;hasRequiredIsInteger=1;var r=require_isFinite();return isInteger$2=Number.isInteger||function(a){return typeof a=="number"&&r(a)&&Math.floor(a)===a},isInteger$2}var isIntegerExports=requireIsInteger();const isInteger$1=getDefaultExportFromCjs(isIntegerExports);function validateKernel(r){let a,n;if(Array.isArray(r))if(Array.isArray(r[0])){if((r.length&1)===0||(r[0].length&1)===0)throw new RangeError("validateKernel: Kernel rows and columns should be odd numbers");a=Math.floor(r.length/2),n=Math.floor(r[0].length/2)}else{let t=Math.sqrt(r.length);if(isInteger$1(t))n=a=Math.floor(Math.sqrt(r.length)/2);else throw new RangeError("validateKernel: Kernel array should be a square");let l=new Array(t);for(let u=0;u<t;u++){l[u]=new Array(t);for(let s=0;s<t;s++)l[u][s]=r[u*t+s]}r=l}else throw new Error(`validateKernel: Invalid Kernel: ${r}`);return{kernel:r,kWidth:n,kHeight:a}}function clamp(r,a){return Math.round(Math.min(Math.max(r,0),a.maxValue))}function directConvolution(r,a,n){if(n===void 0){const u=r.length+a.length-1;n=new Array(u)}fill(n);for(var t=0;t<r.length;t++)for(var l=0;l<a.length;l++)n[t+l]+=r[t]*a[l];return n}function fill(r){for(var a=0;a<r.length;a++)r[a]=0}var fft,hasRequiredFft;function requireFft(){if(hasRequiredFft)return fft;hasRequiredFft=1;function r(a){if(this.size=a|0,this.size<=1||(this.size&this.size-1)!==0)throw new Error("FFT size must be a power of two and bigger than 1");this._csize=a<<1;for(var n=new Array(this.size*2),t=0;t<n.length;t+=2){const h=Math.PI*t/this.size;n[t]=Math.cos(h),n[t+1]=-Math.sin(h)}this.table=n;for(var l=0,u=1;this.size>u;u<<=1)l++;this._width=l%2===0?l-1:l,this._bitrev=new Array(1<<this._width);for(var s=0;s<this._bitrev.length;s++){this._bitrev[s]=0;for(var p=0;p<this._width;p+=2){var d=this._width-p-2;this._bitrev[s]|=(s>>>p&3)<<d}}this._out=null,this._data=null,this._inv=0}return fft=r,r.prototype.fromComplexArray=function(n,t){for(var l=t||new Array(n.length>>>1),u=0;u<n.length;u+=2)l[u>>>1]=n[u];return l},r.prototype.createComplexArray=function(){const n=new Array(this._csize);for(var t=0;t<n.length;t++)n[t]=0;return n},r.prototype.toComplexArray=function(n,t){for(var l=t||this.createComplexArray(),u=0;u<l.length;u+=2)l[u]=n[u>>>1],l[u+1]=0;return l},r.prototype.completeSpectrum=function(n){for(var t=this._csize,l=t>>>1,u=2;u<l;u+=2)n[t-u]=n[u],n[t-u+1]=-n[u+1]},r.prototype.transform=function(n,t){if(n===t)throw new Error("Input and output buffers must be different");this._out=n,this._data=t,this._inv=0,this._transform4(),this._out=null,this._data=null},r.prototype.realTransform=function(n,t){if(n===t)throw new Error("Input and output buffers must be different");this._out=n,this._data=t,this._inv=0,this._realTransform4(),this._out=null,this._data=null},r.prototype.inverseTransform=function(n,t){if(n===t)throw new Error("Input and output buffers must be different");this._out=n,this._data=t,this._inv=1,this._transform4();for(var l=0;l<n.length;l++)n[l]/=this.size;this._out=null,this._data=null},r.prototype._transform4=function(){var n=this._out,t=this._csize,l=this._width,u=1<<l,s=t/u<<1,p,d,h=this._bitrev;if(s===4)for(p=0,d=0;p<t;p+=s,d++){const Ye=h[d];this._singleTransform2(p,Ye,u)}else for(p=0,d=0;p<t;p+=s,d++){const Ye=h[d];this._singleTransform4(p,Ye,u)}var N=this._inv?-1:1,Be=this.table;for(u>>=2;u>=2;u>>=2){s=t/u<<1;var b=s>>>2;for(p=0;p<t;p+=s)for(var E=p+b,de=p,pe=0;de<E;de+=2,pe+=u){const Ye=de,me=Ye+b,Le=me+b,nt=Le+b,tt=n[Ye],ft=n[Ye+1],yt=n[me],gt=n[me+1],mt=n[Le],wt=n[Le+1],St=n[nt],bt=n[nt+1],Ct=tt,Et=ft,It=Be[pe],Dt=N*Be[pe+1],Pt=yt*It-gt*Dt,qt=yt*Dt+gt*It,Ht=Be[2*pe],Gt=N*Be[2*pe+1],Ut=mt*Ht-wt*Gt,Yt=mt*Gt+wt*Ht,Zt=Be[3*pe],vt=N*Be[3*pe+1],Rt=St*Zt-bt*vt,Lt=St*vt+bt*Zt,Vt=Ct+Ut,Jt=Et+Yt,er=Ct-Ut,ur=Et-Yt,yr=Pt+Rt,Qt=qt+Lt,nr=N*(Pt-Rt),or=N*(qt-Lt),Wt=Vt+yr,ir=Jt+Qt,br=Vt-yr,Sr=Jt-Qt,_r=er+or,sr=ur-nr,jr=er-or,Nr=ur+nr;n[Ye]=Wt,n[Ye+1]=ir,n[me]=_r,n[me+1]=sr,n[Le]=br,n[Le+1]=Sr,n[nt]=jr,n[nt+1]=Nr}}},r.prototype._singleTransform2=function(n,t,l){const u=this._out,s=this._data,p=s[t],d=s[t+1],h=s[t+l],N=s[t+l+1],Be=p+h,b=d+N,E=p-h,de=d-N;u[n]=Be,u[n+1]=b,u[n+2]=E,u[n+3]=de},r.prototype._singleTransform4=function(n,t,l){const u=this._out,s=this._data,p=this._inv?-1:1,d=l*2,h=l*3,N=s[t],Be=s[t+1],b=s[t+l],E=s[t+l+1],de=s[t+d],pe=s[t+d+1],Ye=s[t+h],me=s[t+h+1],Le=N+de,nt=Be+pe,tt=N-de,ft=Be-pe,yt=b+Ye,gt=E+me,mt=p*(b-Ye),wt=p*(E-me),St=Le+yt,bt=nt+gt,Ct=tt+wt,Et=ft-mt,It=Le-yt,Dt=nt-gt,Pt=tt-wt,qt=ft+mt;u[n]=St,u[n+1]=bt,u[n+2]=Ct,u[n+3]=Et,u[n+4]=It,u[n+5]=Dt,u[n+6]=Pt,u[n+7]=qt},r.prototype._realTransform4=function(){var n=this._out,t=this._csize,l=this._width,u=1<<l,s=t/u<<1,p,d,h=this._bitrev;if(s===4)for(p=0,d=0;p<t;p+=s,d++){const Tr=h[d];this._singleRealTransform2(p,Tr>>>1,u>>>1)}else for(p=0,d=0;p<t;p+=s,d++){const Tr=h[d];this._singleRealTransform4(p,Tr>>>1,u>>>1)}var N=this._inv?-1:1,Be=this.table;for(u>>=2;u>=2;u>>=2){s=t/u<<1;var b=s>>>1,E=b>>>1,de=E>>>1;for(p=0;p<t;p+=s)for(var pe=0,Ye=0;pe<=de;pe+=2,Ye+=u){var me=p+pe,Le=me+E,nt=Le+E,tt=nt+E,ft=n[me],yt=n[me+1],gt=n[Le],mt=n[Le+1],wt=n[nt],St=n[nt+1],bt=n[tt],Ct=n[tt+1],Et=ft,It=yt,Dt=Be[Ye],Pt=N*Be[Ye+1],qt=gt*Dt-mt*Pt,Ht=gt*Pt+mt*Dt,Gt=Be[2*Ye],Ut=N*Be[2*Ye+1],Yt=wt*Gt-St*Ut,Zt=wt*Ut+St*Gt,vt=Be[3*Ye],Rt=N*Be[3*Ye+1],Lt=bt*vt-Ct*Rt,Vt=bt*Rt+Ct*vt,Jt=Et+Yt,er=It+Zt,ur=Et-Yt,yr=It-Zt,Qt=qt+Lt,nr=Ht+Vt,or=N*(qt-Lt),Wt=N*(Ht-Vt),ir=Jt+Qt,br=er+nr,Sr=ur+Wt,_r=yr-or;if(n[me]=ir,n[me+1]=br,n[Le]=Sr,n[Le+1]=_r,pe===0){var sr=Jt-Qt,jr=er-nr;n[nt]=sr,n[nt+1]=jr;continue}if(pe!==de){var Nr=ur,kr=-yr,qr=Jt,Pr=-er,Vr=-N*Wt,Xr=-N*or,Gr=-N*nr,Er=-N*Qt,Ir=Nr+Vr,Cr=kr+Xr,tr=qr+Er,ar=Pr-Gr,Kt=p+E-pe,cr=p+b-pe;n[Kt]=Ir,n[Kt+1]=Cr,n[cr]=tr,n[cr+1]=ar}}}},r.prototype._singleRealTransform2=function(n,t,l){const u=this._out,s=this._data,p=s[t],d=s[t+l],h=p+d,N=p-d;u[n]=h,u[n+1]=0,u[n+2]=N,u[n+3]=0},r.prototype._singleRealTransform4=function(n,t,l){const u=this._out,s=this._data,p=this._inv?-1:1,d=l*2,h=l*3,N=s[t],Be=s[t+l],b=s[t+d],E=s[t+h],de=N+b,pe=N-b,Ye=Be+E,me=p*(Be-E),Le=de+Ye,nt=pe,tt=-me,ft=de-Ye,yt=pe,gt=me;u[n]=Le,u[n+1]=0,u[n+2]=nt,u[n+3]=tt,u[n+4]=ft,u[n+5]=0,u[n+6]=yt,u[n+7]=gt},fft}requireFft();function convolutionSeparable(r,a,n,t){const l=new Array(r.length);let u,s,p,d;d=a[1],p=(d.length-1)/2,s=new Array(n+d.length-1),u=new Array(n);for(let h=0;h<t;h++){for(let N=0;N<n;N++)u[N]=r[h*n+N];directConvolution(u,d,s);for(let N=0;N<n;N++)l[h*n+N]=s[p+N]}d=a[0],p=(d.length-1)/2,s=new Array(t+d.length-1),u=new Array(t);for(let h=0;h<n;h++){for(let N=0;N<t;N++)u[N]=l[N*n+h];directConvolution(u,d,s);for(let N=0;N<t;N++)l[N*n+h]=s[p+N]}return l}var matrix$1={};const toString=Object.prototype.toString;function isAnyArray(r){const a=toString.call(r);return a.endsWith("Array]")&&!a.includes("Big")}const libEsm=Object.freeze(Object.defineProperty({__proto__:null,isAnyArray},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(libEsm);function max$1(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!isAnyArray(r))throw new TypeError("input must be an array");if(r.length===0)throw new TypeError("input must not be empty");var n=a.fromIndex,t=n===void 0?0:n,l=a.toIndex,u=l===void 0?r.length:l;if(t<0||t>=r.length||!Number.isInteger(t))throw new Error("fromIndex must be a positive integer smaller than length");if(u<=t||u>r.length||!Number.isInteger(u))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=r[t],p=t+1;p<u;p++)r[p]>s&&(s=r[p]);return s}function min$1(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!isAnyArray(r))throw new TypeError("input must be an array");if(r.length===0)throw new TypeError("input must not be empty");var n=a.fromIndex,t=n===void 0?0:n,l=a.toIndex,u=l===void 0?r.length:l;if(t<0||t>=r.length||!Number.isInteger(t))throw new Error("fromIndex must be a positive integer smaller than length");if(u<=t||u>r.length||!Number.isInteger(u))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=r[t],p=t+1;p<u;p++)r[p]<s&&(s=r[p]);return s}function rescale(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(isAnyArray(r)){if(r.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var n;if(a.output!==void 0){if(!isAnyArray(a.output))throw new TypeError("output option must be an array if specified");n=a.output}else n=new Array(r.length);var t=min$1(r),l=max$1(r);if(t===l)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var u=a.min,s=u===void 0?a.autoMinMax?t:0:u,p=a.max,d=p===void 0?a.autoMinMax?l:1:p;if(s>=d)throw new RangeError("min option must be smaller than max option");for(var h=(d-s)/(l-t),N=0;N<r.length;N++)n[N]=(r[N]-t)*h+s;return n}const libEs6=Object.freeze(Object.defineProperty({__proto__:null,default:rescale},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(libEs6);var hasRequiredMatrix;function requireMatrix(){var An,Bf,Tn;if(hasRequiredMatrix)return matrix$1;hasRequiredMatrix=1,Object.defineProperty(matrix$1,"__esModule",{value:!0});var r=require$$0$1,a=require$$1;const n=" ".repeat(2),t=" ".repeat(4);function l(){return u(this)}function u(Ft,Tt={}){const{maxRows:jt=15,maxColumns:xt=10,maxNumSize:At=8,padMinus:Bt="auto"}=Tt;return`${Ft.constructor.name} {
${n}[
${t}${s(Ft,jt,xt,At,Bt)}
${n}]
${n}rows: ${Ft.rows}
${n}columns: ${Ft.columns}
}`}function s(Ft,Tt,jt,xt,At){const{rows:Bt,columns:lr}=Ft,hr=Math.min(Bt,Tt),dr=Math.min(lr,jt),vr=[];if(At==="auto"){At=!1;e:for(let Ur=0;Ur<hr;Ur++)for(let Ar=0;Ar<dr;Ar++)if(Ft.get(Ur,Ar)<0){At=!0;break e}}for(let Ur=0;Ur<hr;Ur++){let Ar=[];for(let an=0;an<dr;an++)Ar.push(p(Ft.get(Ur,an),xt,At));vr.push(`${Ar.join(" ")}`)}return dr!==lr&&(vr[vr.length-1]+=` ... ${lr-jt} more columns`),hr!==Bt&&vr.push(`... ${Bt-Tt} more rows`),vr.join(`
${t}`)}function p(Ft,Tt,jt){return(Ft>=0&&jt?` ${d(Ft,Tt-1)}`:d(Ft,Tt)).padEnd(Tt)}function d(Ft,Tt){let jt=Ft.toString();if(jt.length<=Tt)return jt;let xt=Ft.toFixed(Tt);if(xt.length>Tt&&(xt=Ft.toFixed(Math.max(0,Tt-(xt.length-Tt)))),xt.length<=Tt&&!xt.startsWith("0.000")&&!xt.startsWith("-0.000"))return xt;let At=Ft.toExponential(Tt);return At.length>Tt&&(At=Ft.toExponential(Math.max(0,Tt-(At.length-Tt)))),At.slice(0)}function h(Ft,Tt){Ft.prototype.add=function(xt){return typeof xt=="number"?this.addS(xt):this.addM(xt)},Ft.prototype.addS=function(xt){for(let At=0;At<this.rows;At++)for(let Bt=0;Bt<this.columns;Bt++)this.set(At,Bt,this.get(At,Bt)+xt);return this},Ft.prototype.addM=function(xt){if(xt=Tt.checkMatrix(xt),this.rows!==xt.rows||this.columns!==xt.columns)throw new RangeError("Matrices dimensions must be equal");for(let At=0;At<this.rows;At++)for(let Bt=0;Bt<this.columns;Bt++)this.set(At,Bt,this.get(At,Bt)+xt.get(At,Bt));return this},Ft.add=function(xt,At){return new Tt(xt).add(At)},Ft.prototype.sub=function(xt){return typeof xt=="number"?this.subS(xt):this.subM(xt)},Ft.prototype.subS=function(xt){for(let At=0;At<this.rows;At++)for(let Bt=0;Bt<this.columns;Bt++)this.set(At,Bt,this.get(At,Bt)-xt);return this},Ft.prototype.subM=function(xt){if(xt=Tt.checkMatrix(xt),this.rows!==xt.rows||this.columns!==xt.columns)throw new RangeError("Matrices dimensions must be equal");for(let At=0;At<this.rows;At++)for(let Bt=0;Bt<this.columns;Bt++)this.set(At,Bt,this.get(At,Bt)-xt.get(At,Bt));return this},Ft.sub=function(xt,At){return new Tt(xt).sub(At)},Ft.prototype.subtract=Ft.prototype.sub,Ft.prototype.subtractS=Ft.prototype.subS,Ft.prototype.subtractM=Ft.prototype.subM,Ft.subtract=Ft.sub,Ft.prototype.mul=function(xt){return typeof xt=="number"?this.mulS(xt):this.mulM(xt)},Ft.prototype.mulS=function(xt){for(let At=0;At<this.rows;At++)for(let Bt=0;Bt<this.columns;Bt++)this.set(At,Bt,this.get(At,Bt)*xt);return this},Ft.prototype.mulM=function(xt){if(xt=Tt.checkMatrix(xt),this.rows!==xt.rows||this.columns!==xt.columns)throw new RangeError("Matrices dimensions must be equal");for(let At=0;At<this.rows;At++)for(let Bt=0;Bt<this.columns;Bt++)this.set(At,Bt,this.get(At,Bt)*xt.get(At,Bt));return this},Ft.mul=function(xt,At){return new Tt(xt).mul(At)},Ft.prototype.multiply=Ft.prototype.mul,Ft.prototype.multiplyS=Ft.prototype.mulS,Ft.prototype.multiplyM=Ft.prototype.mulM,Ft.multiply=Ft.mul,Ft.prototype.div=function(xt){return typeof xt=="number"?this.divS(xt):this.divM(xt)},Ft.prototype.divS=function(xt){for(let At=0;At<this.rows;At++)for(let Bt=0;Bt<this.columns;Bt++)this.set(At,Bt,this.get(At,Bt)/xt);return this},Ft.prototype.divM=function(xt){if(xt=Tt.checkMatrix(xt),this.rows!==xt.rows||this.columns!==xt.columns)throw new RangeError("Matrices dimensions must be equal");for(let At=0;At<this.rows;At++)for(let Bt=0;Bt<this.columns;Bt++)this.set(At,Bt,this.get(At,Bt)/xt.get(At,Bt));return this},Ft.div=function(xt,At){return new Tt(xt).div(At)},Ft.prototype.divide=Ft.prototype.div,Ft.prototype.divideS=Ft.prototype.divS,Ft.prototype.divideM=Ft.prototype.divM,Ft.divide=Ft.div,Ft.prototype.mod=function(xt){return typeof xt=="number"?this.modS(xt):this.modM(xt)},Ft.prototype.modS=function(xt){for(let At=0;At<this.rows;At++)for(let Bt=0;Bt<this.columns;Bt++)this.set(At,Bt,this.get(At,Bt)%xt);return this},Ft.prototype.modM=function(xt){if(xt=Tt.checkMatrix(xt),this.rows!==xt.rows||this.columns!==xt.columns)throw new RangeError("Matrices dimensions must be equal");for(let At=0;At<this.rows;At++)for(let Bt=0;Bt<this.columns;Bt++)this.set(At,Bt,this.get(At,Bt)%xt.get(At,Bt));return this},Ft.mod=function(xt,At){return new Tt(xt).mod(At)},Ft.prototype.modulus=Ft.prototype.mod,Ft.prototype.modulusS=Ft.prototype.modS,Ft.prototype.modulusM=Ft.prototype.modM,Ft.modulus=Ft.mod,Ft.prototype.and=function(xt){return typeof xt=="number"?this.andS(xt):this.andM(xt)},Ft.prototype.andS=function(xt){for(let At=0;At<this.rows;At++)for(let Bt=0;Bt<this.columns;Bt++)this.set(At,Bt,this.get(At,Bt)&xt);return this},Ft.prototype.andM=function(xt){if(xt=Tt.checkMatrix(xt),this.rows!==xt.rows||this.columns!==xt.columns)throw new RangeError("Matrices dimensions must be equal");for(let At=0;At<this.rows;At++)for(let Bt=0;Bt<this.columns;Bt++)this.set(At,Bt,this.get(At,Bt)&xt.get(At,Bt));return this},Ft.and=function(xt,At){return new Tt(xt).and(At)},Ft.prototype.or=function(xt){return typeof xt=="number"?this.orS(xt):this.orM(xt)},Ft.prototype.orS=function(xt){for(let At=0;At<this.rows;At++)for(let Bt=0;Bt<this.columns;Bt++)this.set(At,Bt,this.get(At,Bt)|xt);return this},Ft.prototype.orM=function(xt){if(xt=Tt.checkMatrix(xt),this.rows!==xt.rows||this.columns!==xt.columns)throw new RangeError("Matrices dimensions must be equal");for(let At=0;At<this.rows;At++)for(let Bt=0;Bt<this.columns;Bt++)this.set(At,Bt,this.get(At,Bt)|xt.get(At,Bt));return this},Ft.or=function(xt,At){return new Tt(xt).or(At)},Ft.prototype.xor=function(xt){return typeof xt=="number"?this.xorS(xt):this.xorM(xt)},Ft.prototype.xorS=function(xt){for(let At=0;At<this.rows;At++)for(let Bt=0;Bt<this.columns;Bt++)this.set(At,Bt,this.get(At,Bt)^xt);return this},Ft.prototype.xorM=function(xt){if(xt=Tt.checkMatrix(xt),this.rows!==xt.rows||this.columns!==xt.columns)throw new RangeError("Matrices dimensions must be equal");for(let At=0;At<this.rows;At++)for(let Bt=0;Bt<this.columns;Bt++)this.set(At,Bt,this.get(At,Bt)^xt.get(At,Bt));return this},Ft.xor=function(xt,At){return new Tt(xt).xor(At)},Ft.prototype.leftShift=function(xt){return typeof xt=="number"?this.leftShiftS(xt):this.leftShiftM(xt)},Ft.prototype.leftShiftS=function(xt){for(let At=0;At<this.rows;At++)for(let Bt=0;Bt<this.columns;Bt++)this.set(At,Bt,this.get(At,Bt)<<xt);return this},Ft.prototype.leftShiftM=function(xt){if(xt=Tt.checkMatrix(xt),this.rows!==xt.rows||this.columns!==xt.columns)throw new RangeError("Matrices dimensions must be equal");for(let At=0;At<this.rows;At++)for(let Bt=0;Bt<this.columns;Bt++)this.set(At,Bt,this.get(At,Bt)<<xt.get(At,Bt));return this},Ft.leftShift=function(xt,At){return new Tt(xt).leftShift(At)},Ft.prototype.signPropagatingRightShift=function(xt){return typeof xt=="number"?this.signPropagatingRightShiftS(xt):this.signPropagatingRightShiftM(xt)},Ft.prototype.signPropagatingRightShiftS=function(xt){for(let At=0;At<this.rows;At++)for(let Bt=0;Bt<this.columns;Bt++)this.set(At,Bt,this.get(At,Bt)>>xt);return this},Ft.prototype.signPropagatingRightShiftM=function(xt){if(xt=Tt.checkMatrix(xt),this.rows!==xt.rows||this.columns!==xt.columns)throw new RangeError("Matrices dimensions must be equal");for(let At=0;At<this.rows;At++)for(let Bt=0;Bt<this.columns;Bt++)this.set(At,Bt,this.get(At,Bt)>>xt.get(At,Bt));return this},Ft.signPropagatingRightShift=function(xt,At){return new Tt(xt).signPropagatingRightShift(At)},Ft.prototype.rightShift=function(xt){return typeof xt=="number"?this.rightShiftS(xt):this.rightShiftM(xt)},Ft.prototype.rightShiftS=function(xt){for(let At=0;At<this.rows;At++)for(let Bt=0;Bt<this.columns;Bt++)this.set(At,Bt,this.get(At,Bt)>>>xt);return this},Ft.prototype.rightShiftM=function(xt){if(xt=Tt.checkMatrix(xt),this.rows!==xt.rows||this.columns!==xt.columns)throw new RangeError("Matrices dimensions must be equal");for(let At=0;At<this.rows;At++)for(let Bt=0;Bt<this.columns;Bt++)this.set(At,Bt,this.get(At,Bt)>>>xt.get(At,Bt));return this},Ft.rightShift=function(xt,At){return new Tt(xt).rightShift(At)},Ft.prototype.zeroFillRightShift=Ft.prototype.rightShift,Ft.prototype.zeroFillRightShiftS=Ft.prototype.rightShiftS,Ft.prototype.zeroFillRightShiftM=Ft.prototype.rightShiftM,Ft.zeroFillRightShift=Ft.rightShift,Ft.prototype.not=function(){for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.set(xt,At,~this.get(xt,At));return this},Ft.not=function(xt){return new Tt(xt).not()},Ft.prototype.abs=function(){for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.set(xt,At,Math.abs(this.get(xt,At)));return this},Ft.abs=function(xt){return new Tt(xt).abs()},Ft.prototype.acos=function(){for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.set(xt,At,Math.acos(this.get(xt,At)));return this},Ft.acos=function(xt){return new Tt(xt).acos()},Ft.prototype.acosh=function(){for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.set(xt,At,Math.acosh(this.get(xt,At)));return this},Ft.acosh=function(xt){return new Tt(xt).acosh()},Ft.prototype.asin=function(){for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.set(xt,At,Math.asin(this.get(xt,At)));return this},Ft.asin=function(xt){return new Tt(xt).asin()},Ft.prototype.asinh=function(){for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.set(xt,At,Math.asinh(this.get(xt,At)));return this},Ft.asinh=function(xt){return new Tt(xt).asinh()},Ft.prototype.atan=function(){for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.set(xt,At,Math.atan(this.get(xt,At)));return this},Ft.atan=function(xt){return new Tt(xt).atan()},Ft.prototype.atanh=function(){for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.set(xt,At,Math.atanh(this.get(xt,At)));return this},Ft.atanh=function(xt){return new Tt(xt).atanh()},Ft.prototype.cbrt=function(){for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.set(xt,At,Math.cbrt(this.get(xt,At)));return this},Ft.cbrt=function(xt){return new Tt(xt).cbrt()},Ft.prototype.ceil=function(){for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.set(xt,At,Math.ceil(this.get(xt,At)));return this},Ft.ceil=function(xt){return new Tt(xt).ceil()},Ft.prototype.clz32=function(){for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.set(xt,At,Math.clz32(this.get(xt,At)));return this},Ft.clz32=function(xt){return new Tt(xt).clz32()},Ft.prototype.cos=function(){for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.set(xt,At,Math.cos(this.get(xt,At)));return this},Ft.cos=function(xt){return new Tt(xt).cos()},Ft.prototype.cosh=function(){for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.set(xt,At,Math.cosh(this.get(xt,At)));return this},Ft.cosh=function(xt){return new Tt(xt).cosh()},Ft.prototype.exp=function(){for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.set(xt,At,Math.exp(this.get(xt,At)));return this},Ft.exp=function(xt){return new Tt(xt).exp()},Ft.prototype.expm1=function(){for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.set(xt,At,Math.expm1(this.get(xt,At)));return this},Ft.expm1=function(xt){return new Tt(xt).expm1()},Ft.prototype.floor=function(){for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.set(xt,At,Math.floor(this.get(xt,At)));return this},Ft.floor=function(xt){return new Tt(xt).floor()},Ft.prototype.fround=function(){for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.set(xt,At,Math.fround(this.get(xt,At)));return this},Ft.fround=function(xt){return new Tt(xt).fround()},Ft.prototype.log=function(){for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.set(xt,At,Math.log(this.get(xt,At)));return this},Ft.log=function(xt){return new Tt(xt).log()},Ft.prototype.log1p=function(){for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.set(xt,At,Math.log1p(this.get(xt,At)));return this},Ft.log1p=function(xt){return new Tt(xt).log1p()},Ft.prototype.log10=function(){for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.set(xt,At,Math.log10(this.get(xt,At)));return this},Ft.log10=function(xt){return new Tt(xt).log10()},Ft.prototype.log2=function(){for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.set(xt,At,Math.log2(this.get(xt,At)));return this},Ft.log2=function(xt){return new Tt(xt).log2()},Ft.prototype.round=function(){for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.set(xt,At,Math.round(this.get(xt,At)));return this},Ft.round=function(xt){return new Tt(xt).round()},Ft.prototype.sign=function(){for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.set(xt,At,Math.sign(this.get(xt,At)));return this},Ft.sign=function(xt){return new Tt(xt).sign()},Ft.prototype.sin=function(){for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.set(xt,At,Math.sin(this.get(xt,At)));return this},Ft.sin=function(xt){return new Tt(xt).sin()},Ft.prototype.sinh=function(){for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.set(xt,At,Math.sinh(this.get(xt,At)));return this},Ft.sinh=function(xt){return new Tt(xt).sinh()},Ft.prototype.sqrt=function(){for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.set(xt,At,Math.sqrt(this.get(xt,At)));return this},Ft.sqrt=function(xt){return new Tt(xt).sqrt()},Ft.prototype.tan=function(){for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.set(xt,At,Math.tan(this.get(xt,At)));return this},Ft.tan=function(xt){return new Tt(xt).tan()},Ft.prototype.tanh=function(){for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.set(xt,At,Math.tanh(this.get(xt,At)));return this},Ft.tanh=function(xt){return new Tt(xt).tanh()},Ft.prototype.trunc=function(){for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.set(xt,At,Math.trunc(this.get(xt,At)));return this},Ft.trunc=function(xt){return new Tt(xt).trunc()},Ft.pow=function(xt,At){return new Tt(xt).pow(At)},Ft.prototype.pow=function(xt){return typeof xt=="number"?this.powS(xt):this.powM(xt)},Ft.prototype.powS=function(xt){for(let At=0;At<this.rows;At++)for(let Bt=0;Bt<this.columns;Bt++)this.set(At,Bt,this.get(At,Bt)**xt);return this},Ft.prototype.powM=function(xt){if(xt=Tt.checkMatrix(xt),this.rows!==xt.rows||this.columns!==xt.columns)throw new RangeError("Matrices dimensions must be equal");for(let At=0;At<this.rows;At++)for(let Bt=0;Bt<this.columns;Bt++)this.set(At,Bt,this.get(At,Bt)**xt.get(At,Bt));return this}}function N(Ft,Tt,jt){let xt=jt?Ft.rows:Ft.rows-1;if(Tt<0||Tt>xt)throw new RangeError("Row index out of range")}function Be(Ft,Tt,jt){let xt=jt?Ft.columns:Ft.columns-1;if(Tt<0||Tt>xt)throw new RangeError("Column index out of range")}function b(Ft,Tt){if(Tt.to1DArray&&(Tt=Tt.to1DArray()),Tt.length!==Ft.columns)throw new RangeError("vector size must be the same as the number of columns");return Tt}function E(Ft,Tt){if(Tt.to1DArray&&(Tt=Tt.to1DArray()),Tt.length!==Ft.rows)throw new RangeError("vector size must be the same as the number of rows");return Tt}function de(Ft,Tt){if(!r.isAnyArray(Tt))throw new TypeError("row indices must be an array");for(let jt=0;jt<Tt.length;jt++)if(Tt[jt]<0||Tt[jt]>=Ft.rows)throw new RangeError("row indices are out of range")}function pe(Ft,Tt){if(!r.isAnyArray(Tt))throw new TypeError("column indices must be an array");for(let jt=0;jt<Tt.length;jt++)if(Tt[jt]<0||Tt[jt]>=Ft.columns)throw new RangeError("column indices are out of range")}function Ye(Ft,Tt,jt,xt,At){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(Le("startRow",Tt),Le("endRow",jt),Le("startColumn",xt),Le("endColumn",At),Tt>jt||xt>At||Tt<0||Tt>=Ft.rows||jt<0||jt>=Ft.rows||xt<0||xt>=Ft.columns||At<0||At>=Ft.columns)throw new RangeError("Submatrix indices are out of range")}function me(Ft,Tt=0){let jt=[];for(let xt=0;xt<Ft;xt++)jt.push(Tt);return jt}function Le(Ft,Tt){if(typeof Tt!="number")throw new TypeError(`${Ft} must be a number`)}function nt(Ft){if(Ft.isEmpty())throw new Error("Empty matrix has no elements to index")}function tt(Ft){let Tt=me(Ft.rows);for(let jt=0;jt<Ft.rows;++jt)for(let xt=0;xt<Ft.columns;++xt)Tt[jt]+=Ft.get(jt,xt);return Tt}function ft(Ft){let Tt=me(Ft.columns);for(let jt=0;jt<Ft.rows;++jt)for(let xt=0;xt<Ft.columns;++xt)Tt[xt]+=Ft.get(jt,xt);return Tt}function yt(Ft){let Tt=0;for(let jt=0;jt<Ft.rows;jt++)for(let xt=0;xt<Ft.columns;xt++)Tt+=Ft.get(jt,xt);return Tt}function gt(Ft){let Tt=me(Ft.rows,1);for(let jt=0;jt<Ft.rows;++jt)for(let xt=0;xt<Ft.columns;++xt)Tt[jt]*=Ft.get(jt,xt);return Tt}function mt(Ft){let Tt=me(Ft.columns,1);for(let jt=0;jt<Ft.rows;++jt)for(let xt=0;xt<Ft.columns;++xt)Tt[xt]*=Ft.get(jt,xt);return Tt}function wt(Ft){let Tt=1;for(let jt=0;jt<Ft.rows;jt++)for(let xt=0;xt<Ft.columns;xt++)Tt*=Ft.get(jt,xt);return Tt}function St(Ft,Tt,jt){const xt=Ft.rows,At=Ft.columns,Bt=[];for(let lr=0;lr<xt;lr++){let hr=0,dr=0,vr=0;for(let Ur=0;Ur<At;Ur++)vr=Ft.get(lr,Ur)-jt[lr],hr+=vr,dr+=vr*vr;Tt?Bt.push((dr-hr*hr/At)/(At-1)):Bt.push((dr-hr*hr/At)/At)}return Bt}function bt(Ft,Tt,jt){const xt=Ft.rows,At=Ft.columns,Bt=[];for(let lr=0;lr<At;lr++){let hr=0,dr=0,vr=0;for(let Ur=0;Ur<xt;Ur++)vr=Ft.get(Ur,lr)-jt[lr],hr+=vr,dr+=vr*vr;Tt?Bt.push((dr-hr*hr/xt)/(xt-1)):Bt.push((dr-hr*hr/xt)/xt)}return Bt}function Ct(Ft,Tt,jt){const xt=Ft.rows,At=Ft.columns,Bt=xt*At;let lr=0,hr=0,dr=0;for(let vr=0;vr<xt;vr++)for(let Ur=0;Ur<At;Ur++)dr=Ft.get(vr,Ur)-jt,lr+=dr,hr+=dr*dr;return Tt?(hr-lr*lr/Bt)/(Bt-1):(hr-lr*lr/Bt)/Bt}function Et(Ft,Tt){for(let jt=0;jt<Ft.rows;jt++)for(let xt=0;xt<Ft.columns;xt++)Ft.set(jt,xt,Ft.get(jt,xt)-Tt[jt])}function It(Ft,Tt){for(let jt=0;jt<Ft.rows;jt++)for(let xt=0;xt<Ft.columns;xt++)Ft.set(jt,xt,Ft.get(jt,xt)-Tt[xt])}function Dt(Ft,Tt){for(let jt=0;jt<Ft.rows;jt++)for(let xt=0;xt<Ft.columns;xt++)Ft.set(jt,xt,Ft.get(jt,xt)-Tt)}function Pt(Ft){const Tt=[];for(let jt=0;jt<Ft.rows;jt++){let xt=0;for(let At=0;At<Ft.columns;At++)xt+=Ft.get(jt,At)**2/(Ft.columns-1);Tt.push(Math.sqrt(xt))}return Tt}function qt(Ft,Tt){for(let jt=0;jt<Ft.rows;jt++)for(let xt=0;xt<Ft.columns;xt++)Ft.set(jt,xt,Ft.get(jt,xt)/Tt[jt])}function Ht(Ft){const Tt=[];for(let jt=0;jt<Ft.columns;jt++){let xt=0;for(let At=0;At<Ft.rows;At++)xt+=Ft.get(At,jt)**2/(Ft.rows-1);Tt.push(Math.sqrt(xt))}return Tt}function Gt(Ft,Tt){for(let jt=0;jt<Ft.rows;jt++)for(let xt=0;xt<Ft.columns;xt++)Ft.set(jt,xt,Ft.get(jt,xt)/Tt[xt])}function Ut(Ft){const Tt=Ft.size-1;let jt=0;for(let xt=0;xt<Ft.columns;xt++)for(let At=0;At<Ft.rows;At++)jt+=Ft.get(At,xt)**2/Tt;return Math.sqrt(jt)}function Yt(Ft,Tt){for(let jt=0;jt<Ft.rows;jt++)for(let xt=0;xt<Ft.columns;xt++)Ft.set(jt,xt,Ft.get(jt,xt)/Tt)}class Zt{static from1DArray(Tt,jt,xt){if(Tt*jt!==xt.length)throw new RangeError("data length does not match given dimensions");let Bt=new Lt(Tt,jt);for(let lr=0;lr<Tt;lr++)for(let hr=0;hr<jt;hr++)Bt.set(lr,hr,xt[lr*jt+hr]);return Bt}static rowVector(Tt){let jt=new Lt(1,Tt.length);for(let xt=0;xt<Tt.length;xt++)jt.set(0,xt,Tt[xt]);return jt}static columnVector(Tt){let jt=new Lt(Tt.length,1);for(let xt=0;xt<Tt.length;xt++)jt.set(xt,0,Tt[xt]);return jt}static zeros(Tt,jt){return new Lt(Tt,jt)}static ones(Tt,jt){return new Lt(Tt,jt).fill(1)}static rand(Tt,jt,xt={}){if(typeof xt!="object")throw new TypeError("options must be an object");const{random:At=Math.random}=xt;let Bt=new Lt(Tt,jt);for(let lr=0;lr<Tt;lr++)for(let hr=0;hr<jt;hr++)Bt.set(lr,hr,At());return Bt}static randInt(Tt,jt,xt={}){if(typeof xt!="object")throw new TypeError("options must be an object");const{min:At=0,max:Bt=1e3,random:lr=Math.random}=xt;if(!Number.isInteger(At))throw new TypeError("min must be an integer");if(!Number.isInteger(Bt))throw new TypeError("max must be an integer");if(At>=Bt)throw new RangeError("min must be smaller than max");let hr=Bt-At,dr=new Lt(Tt,jt);for(let vr=0;vr<Tt;vr++)for(let Ur=0;Ur<jt;Ur++){let Ar=At+Math.round(lr()*hr);dr.set(vr,Ur,Ar)}return dr}static eye(Tt,jt,xt){jt===void 0&&(jt=Tt),xt===void 0&&(xt=1);let At=Math.min(Tt,jt),Bt=this.zeros(Tt,jt);for(let lr=0;lr<At;lr++)Bt.set(lr,lr,xt);return Bt}static diag(Tt,jt,xt){let At=Tt.length;jt===void 0&&(jt=At),xt===void 0&&(xt=jt);let Bt=Math.min(At,jt,xt),lr=this.zeros(jt,xt);for(let hr=0;hr<Bt;hr++)lr.set(hr,hr,Tt[hr]);return lr}static min(Tt,jt){Tt=this.checkMatrix(Tt),jt=this.checkMatrix(jt);let xt=Tt.rows,At=Tt.columns,Bt=new Lt(xt,At);for(let lr=0;lr<xt;lr++)for(let hr=0;hr<At;hr++)Bt.set(lr,hr,Math.min(Tt.get(lr,hr),jt.get(lr,hr)));return Bt}static max(Tt,jt){Tt=this.checkMatrix(Tt),jt=this.checkMatrix(jt);let xt=Tt.rows,At=Tt.columns,Bt=new this(xt,At);for(let lr=0;lr<xt;lr++)for(let hr=0;hr<At;hr++)Bt.set(lr,hr,Math.max(Tt.get(lr,hr),jt.get(lr,hr)));return Bt}static checkMatrix(Tt){return Zt.isMatrix(Tt)?Tt:new Lt(Tt)}static isMatrix(Tt){return Tt!=null&&Tt.klass==="Matrix"}get size(){return this.rows*this.columns}apply(Tt){if(typeof Tt!="function")throw new TypeError("callback must be a function");for(let jt=0;jt<this.rows;jt++)for(let xt=0;xt<this.columns;xt++)Tt.call(this,jt,xt);return this}to1DArray(){let Tt=[];for(let jt=0;jt<this.rows;jt++)for(let xt=0;xt<this.columns;xt++)Tt.push(this.get(jt,xt));return Tt}to2DArray(){let Tt=[];for(let jt=0;jt<this.rows;jt++){Tt.push([]);for(let xt=0;xt<this.columns;xt++)Tt[jt].push(this.get(jt,xt))}return Tt}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let Tt=0;Tt<this.rows;Tt++)for(let jt=0;jt<=Tt;jt++)if(this.get(Tt,jt)!==this.get(jt,Tt))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let Tt=0;Tt<this.rows;Tt++)if(this.get(Tt,Tt)!==0)return!1;return!0}isEchelonForm(){let Tt=0,jt=0,xt=-1,At=!0,Bt=!1;for(;Tt<this.rows&&At;){for(jt=0,Bt=!1;jt<this.columns&&Bt===!1;)this.get(Tt,jt)===0?jt++:this.get(Tt,jt)===1&&jt>xt?(Bt=!0,xt=jt):(At=!1,Bt=!0);Tt++}return At}isReducedEchelonForm(){let Tt=0,jt=0,xt=-1,At=!0,Bt=!1;for(;Tt<this.rows&&At;){for(jt=0,Bt=!1;jt<this.columns&&Bt===!1;)this.get(Tt,jt)===0?jt++:this.get(Tt,jt)===1&&jt>xt?(Bt=!0,xt=jt):(At=!1,Bt=!0);for(let lr=jt+1;lr<this.rows;lr++)this.get(Tt,lr)!==0&&(At=!1);Tt++}return At}echelonForm(){let Tt=this.clone(),jt=0,xt=0;for(;jt<Tt.rows&&xt<Tt.columns;){let At=jt;for(let Bt=jt;Bt<Tt.rows;Bt++)Tt.get(Bt,xt)>Tt.get(At,xt)&&(At=Bt);if(Tt.get(At,xt)===0)xt++;else{Tt.swapRows(jt,At);let Bt=Tt.get(jt,xt);for(let lr=xt;lr<Tt.columns;lr++)Tt.set(jt,lr,Tt.get(jt,lr)/Bt);for(let lr=jt+1;lr<Tt.rows;lr++){let hr=Tt.get(lr,xt)/Tt.get(jt,xt);Tt.set(lr,xt,0);for(let dr=xt+1;dr<Tt.columns;dr++)Tt.set(lr,dr,Tt.get(lr,dr)-Tt.get(jt,dr)*hr)}jt++,xt++}}return Tt}reducedEchelonForm(){let Tt=this.echelonForm(),jt=Tt.columns,xt=Tt.rows,At=xt-1;for(;At>=0;)if(Tt.maxRow(At)===0)At--;else{let Bt=0,lr=!1;for(;Bt<xt&&lr===!1;)Tt.get(At,Bt)===1?lr=!0:Bt++;for(let hr=0;hr<At;hr++){let dr=Tt.get(hr,Bt);for(let vr=Bt;vr<jt;vr++){let Ur=Tt.get(hr,vr)-dr*Tt.get(At,vr);Tt.set(hr,vr,Ur)}}At--}return Tt}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(Tt={}){if(typeof Tt!="object")throw new TypeError("options must be an object");const{rows:jt=1,columns:xt=1}=Tt;if(!Number.isInteger(jt)||jt<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(xt)||xt<=0)throw new TypeError("columns must be a positive integer");let At=new Lt(this.rows*jt,this.columns*xt);for(let Bt=0;Bt<jt;Bt++)for(let lr=0;lr<xt;lr++)At.setSubMatrix(this,this.rows*Bt,this.columns*lr);return At}fill(Tt){for(let jt=0;jt<this.rows;jt++)for(let xt=0;xt<this.columns;xt++)this.set(jt,xt,Tt);return this}neg(){return this.mulS(-1)}getRow(Tt){N(this,Tt);let jt=[];for(let xt=0;xt<this.columns;xt++)jt.push(this.get(Tt,xt));return jt}getRowVector(Tt){return Lt.rowVector(this.getRow(Tt))}setRow(Tt,jt){N(this,Tt),jt=b(this,jt);for(let xt=0;xt<this.columns;xt++)this.set(Tt,xt,jt[xt]);return this}swapRows(Tt,jt){N(this,Tt),N(this,jt);for(let xt=0;xt<this.columns;xt++){let At=this.get(Tt,xt);this.set(Tt,xt,this.get(jt,xt)),this.set(jt,xt,At)}return this}getColumn(Tt){Be(this,Tt);let jt=[];for(let xt=0;xt<this.rows;xt++)jt.push(this.get(xt,Tt));return jt}getColumnVector(Tt){return Lt.columnVector(this.getColumn(Tt))}setColumn(Tt,jt){Be(this,Tt),jt=E(this,jt);for(let xt=0;xt<this.rows;xt++)this.set(xt,Tt,jt[xt]);return this}swapColumns(Tt,jt){Be(this,Tt),Be(this,jt);for(let xt=0;xt<this.rows;xt++){let At=this.get(xt,Tt);this.set(xt,Tt,this.get(xt,jt)),this.set(xt,jt,At)}return this}addRowVector(Tt){Tt=b(this,Tt);for(let jt=0;jt<this.rows;jt++)for(let xt=0;xt<this.columns;xt++)this.set(jt,xt,this.get(jt,xt)+Tt[xt]);return this}subRowVector(Tt){Tt=b(this,Tt);for(let jt=0;jt<this.rows;jt++)for(let xt=0;xt<this.columns;xt++)this.set(jt,xt,this.get(jt,xt)-Tt[xt]);return this}mulRowVector(Tt){Tt=b(this,Tt);for(let jt=0;jt<this.rows;jt++)for(let xt=0;xt<this.columns;xt++)this.set(jt,xt,this.get(jt,xt)*Tt[xt]);return this}divRowVector(Tt){Tt=b(this,Tt);for(let jt=0;jt<this.rows;jt++)for(let xt=0;xt<this.columns;xt++)this.set(jt,xt,this.get(jt,xt)/Tt[xt]);return this}addColumnVector(Tt){Tt=E(this,Tt);for(let jt=0;jt<this.rows;jt++)for(let xt=0;xt<this.columns;xt++)this.set(jt,xt,this.get(jt,xt)+Tt[jt]);return this}subColumnVector(Tt){Tt=E(this,Tt);for(let jt=0;jt<this.rows;jt++)for(let xt=0;xt<this.columns;xt++)this.set(jt,xt,this.get(jt,xt)-Tt[jt]);return this}mulColumnVector(Tt){Tt=E(this,Tt);for(let jt=0;jt<this.rows;jt++)for(let xt=0;xt<this.columns;xt++)this.set(jt,xt,this.get(jt,xt)*Tt[jt]);return this}divColumnVector(Tt){Tt=E(this,Tt);for(let jt=0;jt<this.rows;jt++)for(let xt=0;xt<this.columns;xt++)this.set(jt,xt,this.get(jt,xt)/Tt[jt]);return this}mulRow(Tt,jt){N(this,Tt);for(let xt=0;xt<this.columns;xt++)this.set(Tt,xt,this.get(Tt,xt)*jt);return this}mulColumn(Tt,jt){Be(this,Tt);for(let xt=0;xt<this.rows;xt++)this.set(xt,Tt,this.get(xt,Tt)*jt);return this}max(Tt){if(this.isEmpty())return NaN;switch(Tt){case"row":{const jt=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.get(xt,At)>jt[xt]&&(jt[xt]=this.get(xt,At));return jt}case"column":{const jt=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.get(xt,At)>jt[At]&&(jt[At]=this.get(xt,At));return jt}case void 0:{let jt=this.get(0,0);for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.get(xt,At)>jt&&(jt=this.get(xt,At));return jt}default:throw new Error(`invalid option: ${Tt}`)}}maxIndex(){nt(this);let Tt=this.get(0,0),jt=[0,0];for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.get(xt,At)>Tt&&(Tt=this.get(xt,At),jt[0]=xt,jt[1]=At);return jt}min(Tt){if(this.isEmpty())return NaN;switch(Tt){case"row":{const jt=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.get(xt,At)<jt[xt]&&(jt[xt]=this.get(xt,At));return jt}case"column":{const jt=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.get(xt,At)<jt[At]&&(jt[At]=this.get(xt,At));return jt}case void 0:{let jt=this.get(0,0);for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.get(xt,At)<jt&&(jt=this.get(xt,At));return jt}default:throw new Error(`invalid option: ${Tt}`)}}minIndex(){nt(this);let Tt=this.get(0,0),jt=[0,0];for(let xt=0;xt<this.rows;xt++)for(let At=0;At<this.columns;At++)this.get(xt,At)<Tt&&(Tt=this.get(xt,At),jt[0]=xt,jt[1]=At);return jt}maxRow(Tt){if(N(this,Tt),this.isEmpty())return NaN;let jt=this.get(Tt,0);for(let xt=1;xt<this.columns;xt++)this.get(Tt,xt)>jt&&(jt=this.get(Tt,xt));return jt}maxRowIndex(Tt){N(this,Tt),nt(this);let jt=this.get(Tt,0),xt=[Tt,0];for(let At=1;At<this.columns;At++)this.get(Tt,At)>jt&&(jt=this.get(Tt,At),xt[1]=At);return xt}minRow(Tt){if(N(this,Tt),this.isEmpty())return NaN;let jt=this.get(Tt,0);for(let xt=1;xt<this.columns;xt++)this.get(Tt,xt)<jt&&(jt=this.get(Tt,xt));return jt}minRowIndex(Tt){N(this,Tt),nt(this);let jt=this.get(Tt,0),xt=[Tt,0];for(let At=1;At<this.columns;At++)this.get(Tt,At)<jt&&(jt=this.get(Tt,At),xt[1]=At);return xt}maxColumn(Tt){if(Be(this,Tt),this.isEmpty())return NaN;let jt=this.get(0,Tt);for(let xt=1;xt<this.rows;xt++)this.get(xt,Tt)>jt&&(jt=this.get(xt,Tt));return jt}maxColumnIndex(Tt){Be(this,Tt),nt(this);let jt=this.get(0,Tt),xt=[0,Tt];for(let At=1;At<this.rows;At++)this.get(At,Tt)>jt&&(jt=this.get(At,Tt),xt[0]=At);return xt}minColumn(Tt){if(Be(this,Tt),this.isEmpty())return NaN;let jt=this.get(0,Tt);for(let xt=1;xt<this.rows;xt++)this.get(xt,Tt)<jt&&(jt=this.get(xt,Tt));return jt}minColumnIndex(Tt){Be(this,Tt),nt(this);let jt=this.get(0,Tt),xt=[0,Tt];for(let At=1;At<this.rows;At++)this.get(At,Tt)<jt&&(jt=this.get(At,Tt),xt[0]=At);return xt}diag(){let Tt=Math.min(this.rows,this.columns),jt=[];for(let xt=0;xt<Tt;xt++)jt.push(this.get(xt,xt));return jt}norm(Tt="frobenius"){switch(Tt){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${Tt}`)}}cumulativeSum(){let Tt=0;for(let jt=0;jt<this.rows;jt++)for(let xt=0;xt<this.columns;xt++)Tt+=this.get(jt,xt),this.set(jt,xt,Tt);return this}dot(Tt){Zt.isMatrix(Tt)&&(Tt=Tt.to1DArray());let jt=this.to1DArray();if(jt.length!==Tt.length)throw new RangeError("vectors do not have the same size");let xt=0;for(let At=0;At<jt.length;At++)xt+=jt[At]*Tt[At];return xt}mmul(Tt){Tt=Lt.checkMatrix(Tt);let jt=this.rows,xt=this.columns,At=Tt.columns,Bt=new Lt(jt,At),lr=new Float64Array(xt);for(let hr=0;hr<At;hr++){for(let dr=0;dr<xt;dr++)lr[dr]=Tt.get(dr,hr);for(let dr=0;dr<jt;dr++){let vr=0;for(let Ur=0;Ur<xt;Ur++)vr+=this.get(dr,Ur)*lr[Ur];Bt.set(dr,hr,vr)}}return Bt}mpow(Tt){if(!this.isSquare())throw new RangeError("Matrix must be square");if(!Number.isInteger(Tt)||Tt<0)throw new RangeError("Exponent must be a non-negative integer");let jt=Lt.eye(this.rows),xt=this;for(let At=Tt;At>=1;At/=2)(At&1)!==0&&(jt=jt.mmul(xt)),xt=xt.mmul(xt);return jt}strassen2x2(Tt){Tt=Lt.checkMatrix(Tt);let jt=new Lt(2,2);const xt=this.get(0,0),At=Tt.get(0,0),Bt=this.get(0,1),lr=Tt.get(0,1),hr=this.get(1,0),dr=Tt.get(1,0),vr=this.get(1,1),Ur=Tt.get(1,1),Ar=(xt+vr)*(At+Ur),an=(hr+vr)*At,pn=xt*(lr-Ur),Jr=vr*(dr-At),on=(xt+Bt)*Ur,mr=(hr-xt)*(At+lr),gr=(Bt-vr)*(dr+Ur),Yr=Ar+Jr-on+gr,Hr=pn+on,Sn=an+Jr,Kr=Ar-an+pn+mr;return jt.set(0,0,Yr),jt.set(0,1,Hr),jt.set(1,0,Sn),jt.set(1,1,Kr),jt}strassen3x3(Tt){Tt=Lt.checkMatrix(Tt);let jt=new Lt(3,3);const xt=this.get(0,0),At=this.get(0,1),Bt=this.get(0,2),lr=this.get(1,0),hr=this.get(1,1),dr=this.get(1,2),vr=this.get(2,0),Ur=this.get(2,1),Ar=this.get(2,2),an=Tt.get(0,0),pn=Tt.get(0,1),Jr=Tt.get(0,2),on=Tt.get(1,0),mr=Tt.get(1,1),gr=Tt.get(1,2),Yr=Tt.get(2,0),Hr=Tt.get(2,1),Sn=Tt.get(2,2),Kr=(xt+At+Bt-lr-hr-Ur-Ar)*mr,Dn=(xt-lr)*(-pn+mr),ln=hr*(-an+pn+on-mr-gr-Yr+Sn),jn=(-xt+lr+hr)*(an-pn+mr),bn=(lr+hr)*(-an+pn),Lr=xt*an,cn=(-xt+vr+Ur)*(an-Jr+gr),xn=(-xt+vr)*(Jr-gr),mn=(vr+Ur)*(-an+Jr),$n=(xt+At+Bt-hr-dr-vr-Ur)*gr,Bn=Ur*(-an+Jr+on-mr-gr-Yr+Hr),qn=(-Bt+Ur+Ar)*(mr+Yr-Hr),Gn=(Bt-Ar)*(mr-Hr),Ai=Bt*Yr,vi=(Ur+Ar)*(-Yr+Hr),Yn=(-Bt+hr+dr)*(gr+Yr-Sn),Gi=(Bt-dr)*(gr-Sn),Qi=(hr+dr)*(-Yr+Sn),Hn=At*on,wi=dr*Hr,ki=lr*Jr,Hi=vr*pn,Jn=Ar*Sn,no=Lr+Ai+Hn,Jo=Kr+jn+bn+Lr+qn+Ai+vi,Ua=Lr+cn+mn+$n+Ai+Yn+Qi,ja=Dn+ln+jn+Lr+Ai+Yn+Gi,Do=Dn+jn+bn+Lr+wi,za=Ai+Yn+Gi+Qi+ki,aa=Lr+cn+xn+Bn+qn+Gn+Ai,Ji=qn+Gn+Ai+vi+Hi,Lo=Lr+cn+xn+mn+Jn;return jt.set(0,0,no),jt.set(0,1,Jo),jt.set(0,2,Ua),jt.set(1,0,ja),jt.set(1,1,Do),jt.set(1,2,za),jt.set(2,0,aa),jt.set(2,1,Ji),jt.set(2,2,Lo),jt}mmulStrassen(Tt){Tt=Lt.checkMatrix(Tt);let jt=this.clone(),xt=jt.rows,At=jt.columns,Bt=Tt.rows,lr=Tt.columns;At!==Bt&&console.warn(`Multiplying ${xt} x ${At} and ${Bt} x ${lr} matrix: dimensions do not match.`);function hr(Ar,an,pn){let Jr=Ar.rows,on=Ar.columns;if(Jr===an&&on===pn)return Ar;{let mr=Zt.zeros(an,pn);return mr=mr.setSubMatrix(Ar,0,0),mr}}let dr=Math.max(xt,Bt),vr=Math.max(At,lr);jt=hr(jt,dr,vr),Tt=hr(Tt,dr,vr);function Ur(Ar,an,pn,Jr){if(pn<=512||Jr<=512)return Ar.mmul(an);pn%2===1&&Jr%2===1?(Ar=hr(Ar,pn+1,Jr+1),an=hr(an,pn+1,Jr+1)):pn%2===1?(Ar=hr(Ar,pn+1,Jr),an=hr(an,pn+1,Jr)):Jr%2===1&&(Ar=hr(Ar,pn,Jr+1),an=hr(an,pn,Jr+1));let on=parseInt(Ar.rows/2,10),mr=parseInt(Ar.columns/2,10),gr=Ar.subMatrix(0,on-1,0,mr-1),Yr=an.subMatrix(0,on-1,0,mr-1),Hr=Ar.subMatrix(0,on-1,mr,Ar.columns-1),Sn=an.subMatrix(0,on-1,mr,an.columns-1),Kr=Ar.subMatrix(on,Ar.rows-1,0,mr-1),Dn=an.subMatrix(on,an.rows-1,0,mr-1),ln=Ar.subMatrix(on,Ar.rows-1,mr,Ar.columns-1),jn=an.subMatrix(on,an.rows-1,mr,an.columns-1),bn=Ur(Zt.add(gr,ln),Zt.add(Yr,jn),on,mr),Lr=Ur(Zt.add(Kr,ln),Yr,on,mr),cn=Ur(gr,Zt.sub(Sn,jn),on,mr),xn=Ur(ln,Zt.sub(Dn,Yr),on,mr),mn=Ur(Zt.add(gr,Hr),jn,on,mr),$n=Ur(Zt.sub(Kr,gr),Zt.add(Yr,Sn),on,mr),Bn=Ur(Zt.sub(Hr,ln),Zt.add(Dn,jn),on,mr),qn=Zt.add(bn,xn);qn.sub(mn),qn.add(Bn);let Gn=Zt.add(cn,mn),Ai=Zt.add(Lr,xn),vi=Zt.sub(bn,Lr);vi.add(cn),vi.add($n);let Yn=Zt.zeros(2*qn.rows,2*qn.columns);return Yn=Yn.setSubMatrix(qn,0,0),Yn=Yn.setSubMatrix(Gn,qn.rows,0),Yn=Yn.setSubMatrix(Ai,0,qn.columns),Yn=Yn.setSubMatrix(vi,qn.rows,qn.columns),Yn.subMatrix(0,pn-1,0,Jr-1)}return Ur(jt,Tt,dr,vr)}scaleRows(Tt={}){if(typeof Tt!="object")throw new TypeError("options must be an object");const{min:jt=0,max:xt=1}=Tt;if(!Number.isFinite(jt))throw new TypeError("min must be a number");if(!Number.isFinite(xt))throw new TypeError("max must be a number");if(jt>=xt)throw new RangeError("min must be smaller than max");let At=new Lt(this.rows,this.columns);for(let Bt=0;Bt<this.rows;Bt++){const lr=this.getRow(Bt);lr.length>0&&a(lr,{min:jt,max:xt,output:lr}),At.setRow(Bt,lr)}return At}scaleColumns(Tt={}){if(typeof Tt!="object")throw new TypeError("options must be an object");const{min:jt=0,max:xt=1}=Tt;if(!Number.isFinite(jt))throw new TypeError("min must be a number");if(!Number.isFinite(xt))throw new TypeError("max must be a number");if(jt>=xt)throw new RangeError("min must be smaller than max");let At=new Lt(this.rows,this.columns);for(let Bt=0;Bt<this.columns;Bt++){const lr=this.getColumn(Bt);lr.length&&a(lr,{min:jt,max:xt,output:lr}),At.setColumn(Bt,lr)}return At}flipRows(){const Tt=Math.ceil(this.columns/2);for(let jt=0;jt<this.rows;jt++)for(let xt=0;xt<Tt;xt++){let At=this.get(jt,xt),Bt=this.get(jt,this.columns-1-xt);this.set(jt,xt,Bt),this.set(jt,this.columns-1-xt,At)}return this}flipColumns(){const Tt=Math.ceil(this.rows/2);for(let jt=0;jt<this.columns;jt++)for(let xt=0;xt<Tt;xt++){let At=this.get(xt,jt),Bt=this.get(this.rows-1-xt,jt);this.set(xt,jt,Bt),this.set(this.rows-1-xt,jt,At)}return this}kroneckerProduct(Tt){Tt=Lt.checkMatrix(Tt);let jt=this.rows,xt=this.columns,At=Tt.rows,Bt=Tt.columns,lr=new Lt(jt*At,xt*Bt);for(let hr=0;hr<jt;hr++)for(let dr=0;dr<xt;dr++)for(let vr=0;vr<At;vr++)for(let Ur=0;Ur<Bt;Ur++)lr.set(At*hr+vr,Bt*dr+Ur,this.get(hr,dr)*Tt.get(vr,Ur));return lr}kroneckerSum(Tt){if(Tt=Lt.checkMatrix(Tt),!this.isSquare()||!Tt.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let jt=this.rows,xt=Tt.rows,At=this.kroneckerProduct(Lt.eye(xt,xt)),Bt=Lt.eye(jt,jt).kroneckerProduct(Tt);return At.add(Bt)}transpose(){let Tt=new Lt(this.columns,this.rows);for(let jt=0;jt<this.rows;jt++)for(let xt=0;xt<this.columns;xt++)Tt.set(xt,jt,this.get(jt,xt));return Tt}sortRows(Tt=vt){for(let jt=0;jt<this.rows;jt++)this.setRow(jt,this.getRow(jt).sort(Tt));return this}sortColumns(Tt=vt){for(let jt=0;jt<this.columns;jt++)this.setColumn(jt,this.getColumn(jt).sort(Tt));return this}subMatrix(Tt,jt,xt,At){Ye(this,Tt,jt,xt,At);let Bt=new Lt(jt-Tt+1,At-xt+1);for(let lr=Tt;lr<=jt;lr++)for(let hr=xt;hr<=At;hr++)Bt.set(lr-Tt,hr-xt,this.get(lr,hr));return Bt}subMatrixRow(Tt,jt,xt){if(jt===void 0&&(jt=0),xt===void 0&&(xt=this.columns-1),jt>xt||jt<0||jt>=this.columns||xt<0||xt>=this.columns)throw new RangeError("Argument out of range");let At=new Lt(Tt.length,xt-jt+1);for(let Bt=0;Bt<Tt.length;Bt++)for(let lr=jt;lr<=xt;lr++){if(Tt[Bt]<0||Tt[Bt]>=this.rows)throw new RangeError(`Row index out of range: ${Tt[Bt]}`);At.set(Bt,lr-jt,this.get(Tt[Bt],lr))}return At}subMatrixColumn(Tt,jt,xt){if(jt===void 0&&(jt=0),xt===void 0&&(xt=this.rows-1),jt>xt||jt<0||jt>=this.rows||xt<0||xt>=this.rows)throw new RangeError("Argument out of range");let At=new Lt(xt-jt+1,Tt.length);for(let Bt=0;Bt<Tt.length;Bt++)for(let lr=jt;lr<=xt;lr++){if(Tt[Bt]<0||Tt[Bt]>=this.columns)throw new RangeError(`Column index out of range: ${Tt[Bt]}`);At.set(lr-jt,Bt,this.get(lr,Tt[Bt]))}return At}setSubMatrix(Tt,jt,xt){if(Tt=Lt.checkMatrix(Tt),Tt.isEmpty())return this;let At=jt+Tt.rows-1,Bt=xt+Tt.columns-1;Ye(this,jt,At,xt,Bt);for(let lr=0;lr<Tt.rows;lr++)for(let hr=0;hr<Tt.columns;hr++)this.set(jt+lr,xt+hr,Tt.get(lr,hr));return this}selection(Tt,jt){de(this,Tt),pe(this,jt);let xt=new Lt(Tt.length,jt.length);for(let At=0;At<Tt.length;At++){let Bt=Tt[At];for(let lr=0;lr<jt.length;lr++){let hr=jt[lr];xt.set(At,lr,this.get(Bt,hr))}}return xt}trace(){let Tt=Math.min(this.rows,this.columns),jt=0;for(let xt=0;xt<Tt;xt++)jt+=this.get(xt,xt);return jt}clone(){return this.constructor.copy(this,new Lt(this.rows,this.columns))}static copy(Tt,jt){for(const[xt,At,Bt]of Tt.entries())jt.set(xt,At,Bt);return jt}sum(Tt){switch(Tt){case"row":return tt(this);case"column":return ft(this);case void 0:return yt(this);default:throw new Error(`invalid option: ${Tt}`)}}product(Tt){switch(Tt){case"row":return gt(this);case"column":return mt(this);case void 0:return wt(this);default:throw new Error(`invalid option: ${Tt}`)}}mean(Tt){const jt=this.sum(Tt);switch(Tt){case"row":{for(let xt=0;xt<this.rows;xt++)jt[xt]/=this.columns;return jt}case"column":{for(let xt=0;xt<this.columns;xt++)jt[xt]/=this.rows;return jt}case void 0:return jt/this.size;default:throw new Error(`invalid option: ${Tt}`)}}variance(Tt,jt={}){if(typeof Tt=="object"&&(jt=Tt,Tt=void 0),typeof jt!="object")throw new TypeError("options must be an object");const{unbiased:xt=!0,mean:At=this.mean(Tt)}=jt;if(typeof xt!="boolean")throw new TypeError("unbiased must be a boolean");switch(Tt){case"row":{if(!r.isAnyArray(At))throw new TypeError("mean must be an array");return St(this,xt,At)}case"column":{if(!r.isAnyArray(At))throw new TypeError("mean must be an array");return bt(this,xt,At)}case void 0:{if(typeof At!="number")throw new TypeError("mean must be a number");return Ct(this,xt,At)}default:throw new Error(`invalid option: ${Tt}`)}}standardDeviation(Tt,jt){typeof Tt=="object"&&(jt=Tt,Tt=void 0);const xt=this.variance(Tt,jt);if(Tt===void 0)return Math.sqrt(xt);for(let At=0;At<xt.length;At++)xt[At]=Math.sqrt(xt[At]);return xt}center(Tt,jt={}){if(typeof Tt=="object"&&(jt=Tt,Tt=void 0),typeof jt!="object")throw new TypeError("options must be an object");const{center:xt=this.mean(Tt)}=jt;switch(Tt){case"row":{if(!r.isAnyArray(xt))throw new TypeError("center must be an array");return Et(this,xt),this}case"column":{if(!r.isAnyArray(xt))throw new TypeError("center must be an array");return It(this,xt),this}case void 0:{if(typeof xt!="number")throw new TypeError("center must be a number");return Dt(this,xt),this}default:throw new Error(`invalid option: ${Tt}`)}}scale(Tt,jt={}){if(typeof Tt=="object"&&(jt=Tt,Tt=void 0),typeof jt!="object")throw new TypeError("options must be an object");let xt=jt.scale;switch(Tt){case"row":{if(xt===void 0)xt=Pt(this);else if(!r.isAnyArray(xt))throw new TypeError("scale must be an array");return qt(this,xt),this}case"column":{if(xt===void 0)xt=Ht(this);else if(!r.isAnyArray(xt))throw new TypeError("scale must be an array");return Gt(this,xt),this}case void 0:{if(xt===void 0)xt=Ut(this);else if(typeof xt!="number")throw new TypeError("scale must be a number");return Yt(this,xt),this}default:throw new Error(`invalid option: ${Tt}`)}}toString(Tt){return u(this,Tt)}[Symbol.iterator](){return this.entries()}*entries(){for(let Tt=0;Tt<this.rows;Tt++)for(let jt=0;jt<this.columns;jt++)yield[Tt,jt,this.get(Tt,jt)]}*values(){for(let Tt=0;Tt<this.rows;Tt++)for(let jt=0;jt<this.columns;jt++)yield this.get(Tt,jt)}}Zt.prototype.klass="Matrix",typeof Symbol<"u"&&(Zt.prototype[Symbol.for("nodejs.util.inspect.custom")]=l);function vt(Ft,Tt){return Ft-Tt}function Rt(Ft){return Ft.every(Tt=>typeof Tt=="number")}Zt.random=Zt.rand,Zt.randomInt=Zt.randInt,Zt.diagonal=Zt.diag,Zt.prototype.diagonal=Zt.prototype.diag,Zt.identity=Zt.eye,Zt.prototype.negate=Zt.prototype.neg,Zt.prototype.tensorProduct=Zt.prototype.kroneckerProduct;const En=class En extends Zt{constructor(jt,xt){super();Pf(this,An);ti(this,"data");if(En.isMatrix(jt))Nf(this,An,Bf).call(this,jt.rows,jt.columns),En.copy(jt,this);else if(Number.isInteger(jt)&&jt>=0)Nf(this,An,Bf).call(this,jt,xt);else if(r.isAnyArray(jt)){const At=jt;if(jt=At.length,xt=jt?At[0].length:0,typeof xt!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let Bt=0;Bt<jt;Bt++){if(At[Bt].length!==xt)throw new RangeError("Inconsistent array dimensions");if(!Rt(At[Bt]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(At[Bt]))}this.rows=jt,this.columns=xt}else throw new TypeError("First argument must be a positive number or an array")}set(jt,xt,At){return this.data[jt][xt]=At,this}get(jt,xt){return this.data[jt][xt]}removeRow(jt){return N(this,jt),this.data.splice(jt,1),this.rows-=1,this}addRow(jt,xt){return xt===void 0&&(xt=jt,jt=this.rows),N(this,jt,!0),xt=Float64Array.from(b(this,xt)),this.data.splice(jt,0,xt),this.rows+=1,this}removeColumn(jt){Be(this,jt);for(let xt=0;xt<this.rows;xt++){const At=new Float64Array(this.columns-1);for(let Bt=0;Bt<jt;Bt++)At[Bt]=this.data[xt][Bt];for(let Bt=jt+1;Bt<this.columns;Bt++)At[Bt-1]=this.data[xt][Bt];this.data[xt]=At}return this.columns-=1,this}addColumn(jt,xt){typeof xt>"u"&&(xt=jt,jt=this.columns),Be(this,jt,!0),xt=E(this,xt);for(let At=0;At<this.rows;At++){const Bt=new Float64Array(this.columns+1);let lr=0;for(;lr<jt;lr++)Bt[lr]=this.data[At][lr];for(Bt[lr++]=xt[At];lr<this.columns+1;lr++)Bt[lr]=this.data[At][lr-1];this.data[At]=Bt}return this.columns+=1,this}};An=new WeakSet,Bf=function(jt,xt){if(this.data=[],Number.isInteger(xt)&&xt>=0)for(let At=0;At<jt;At++)this.data.push(new Float64Array(xt));else throw new TypeError("nColumns must be a positive integer");this.rows=jt,this.columns=xt};let Lt=En;h(Zt,Lt);const Mn=class Mn extends Zt{constructor(jt){super();Pf(this,Tn);if(Lt.isMatrix(jt)){if(!jt.isSymmetric())throw new TypeError("not symmetric data");Uu(this,Tn,Lt.copy(jt,new Lt(jt.rows,jt.rows)))}else if(Number.isInteger(jt)&&jt>=0)Uu(this,Tn,new Lt(jt,jt));else if(Uu(this,Tn,new Lt(jt)),!this.isSymmetric())throw new TypeError("not symmetric data")}get size(){return ka(this,Tn).size}get rows(){return ka(this,Tn).rows}get columns(){return ka(this,Tn).columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(jt){return Lt.isMatrix(jt)&&jt.klassType==="SymmetricMatrix"}static zeros(jt){return new this(jt)}static ones(jt){return new this(jt).fill(1)}clone(){const jt=new Mn(this.diagonalSize);for(const[xt,At,Bt]of this.upperRightEntries())jt.set(xt,At,Bt);return jt}toMatrix(){return new Lt(this)}get(jt,xt){return ka(this,Tn).get(jt,xt)}set(jt,xt,At){return ka(this,Tn).set(jt,xt,At),ka(this,Tn).set(xt,jt,At),this}removeCross(jt){return ka(this,Tn).removeRow(jt),ka(this,Tn).removeColumn(jt),this}addCross(jt,xt){xt===void 0&&(xt=jt,jt=this.diagonalSize);const At=xt.slice();return At.splice(jt,1),ka(this,Tn).addRow(jt,At),ka(this,Tn).addColumn(jt,xt),this}applyMask(jt){if(jt.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");const xt=[];for(const[At,Bt]of jt.entries())Bt||xt.push(At);xt.reverse();for(const At of xt)this.removeCross(At);return this}toCompact(){const{diagonalSize:jt}=this,xt=new Array(jt*(jt+1)/2);for(let At=0,Bt=0,lr=0;lr<xt.length;lr++)xt[lr]=this.get(Bt,At),++At>=jt&&(At=++Bt);return xt}static fromCompact(jt){const xt=jt.length,At=(Math.sqrt(8*xt+1)-1)/2;if(!Number.isInteger(At))throw new TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(jt)}`);const Bt=new Mn(At);for(let lr=0,hr=0,dr=0;dr<xt;dr++)Bt.set(lr,hr,jt[dr]),++lr>=At&&(lr=++hr);return Bt}*upperRightEntries(){for(let jt=0,xt=0;jt<this.diagonalSize;void 0){const At=this.get(jt,xt);yield[jt,xt,At],++xt>=this.diagonalSize&&(xt=++jt)}}*upperRightValues(){for(let jt=0,xt=0;jt<this.diagonalSize;void 0)yield this.get(jt,xt),++xt>=this.diagonalSize&&(xt=++jt)}};Tn=new WeakMap;let Vt=Mn;Vt.prototype.klassType="SymmetricMatrix";class Jt extends Vt{static isDistanceMatrix(Tt){return Vt.isSymmetricMatrix(Tt)&&Tt.klassSubType==="DistanceMatrix"}constructor(Tt){if(super(Tt),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(Tt,jt,xt){return Tt===jt&&(xt=0),super.set(Tt,jt,xt)}addCross(Tt,jt){return jt===void 0&&(jt=Tt,Tt=this.diagonalSize),jt=jt.slice(),jt[Tt]=0,super.addCross(Tt,jt)}toSymmetricMatrix(){return new Vt(this)}clone(){const Tt=new Jt(this.diagonalSize);for(const[jt,xt,At]of this.upperRightEntries())jt!==xt&&Tt.set(jt,xt,At);return Tt}toCompact(){const{diagonalSize:Tt}=this,jt=(Tt-1)*Tt/2,xt=new Array(jt);for(let At=1,Bt=0,lr=0;lr<xt.length;lr++)xt[lr]=this.get(Bt,At),++At>=Tt&&(At=++Bt+1);return xt}static fromCompact(Tt){const jt=Tt.length;if(jt===0)return new this(0);const xt=(Math.sqrt(8*jt+1)+1)/2;if(!Number.isInteger(xt))throw new TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(Tt)}`);const At=new this(xt);for(let Bt=1,lr=0,hr=0;hr<jt;hr++)At.set(Bt,lr,Tt[hr]),++Bt>=xt&&(Bt=++lr+1);return At}}Jt.prototype.klassSubType="DistanceMatrix";class er extends Zt{constructor(Tt,jt,xt){super(),this.matrix=Tt,this.rows=jt,this.columns=xt}}class ur extends er{constructor(Tt,jt){Be(Tt,jt),super(Tt,Tt.rows,1),this.column=jt}set(Tt,jt,xt){return this.matrix.set(Tt,this.column,xt),this}get(Tt){return this.matrix.get(Tt,this.column)}}class yr extends er{constructor(Tt,jt){pe(Tt,jt),super(Tt,Tt.rows,jt.length),this.columnIndices=jt}set(Tt,jt,xt){return this.matrix.set(Tt,this.columnIndices[jt],xt),this}get(Tt,jt){return this.matrix.get(Tt,this.columnIndices[jt])}}class Qt extends er{constructor(Tt){super(Tt,Tt.rows,Tt.columns)}set(Tt,jt,xt){return this.matrix.set(Tt,this.columns-jt-1,xt),this}get(Tt,jt){return this.matrix.get(Tt,this.columns-jt-1)}}class nr extends er{constructor(Tt){super(Tt,Tt.rows,Tt.columns)}set(Tt,jt,xt){return this.matrix.set(this.rows-Tt-1,jt,xt),this}get(Tt,jt){return this.matrix.get(this.rows-Tt-1,jt)}}class or extends er{constructor(Tt,jt){N(Tt,jt),super(Tt,1,Tt.columns),this.row=jt}set(Tt,jt,xt){return this.matrix.set(this.row,jt,xt),this}get(Tt,jt){return this.matrix.get(this.row,jt)}}class Wt extends er{constructor(Tt,jt){de(Tt,jt),super(Tt,jt.length,Tt.columns),this.rowIndices=jt}set(Tt,jt,xt){return this.matrix.set(this.rowIndices[Tt],jt,xt),this}get(Tt,jt){return this.matrix.get(this.rowIndices[Tt],jt)}}class ir extends er{constructor(Tt,jt,xt){de(Tt,jt),pe(Tt,xt),super(Tt,jt.length,xt.length),this.rowIndices=jt,this.columnIndices=xt}set(Tt,jt,xt){return this.matrix.set(this.rowIndices[Tt],this.columnIndices[jt],xt),this}get(Tt,jt){return this.matrix.get(this.rowIndices[Tt],this.columnIndices[jt])}}class br extends er{constructor(Tt,jt,xt,At,Bt){Ye(Tt,jt,xt,At,Bt),super(Tt,xt-jt+1,Bt-At+1),this.startRow=jt,this.startColumn=At}set(Tt,jt,xt){return this.matrix.set(this.startRow+Tt,this.startColumn+jt,xt),this}get(Tt,jt){return this.matrix.get(this.startRow+Tt,this.startColumn+jt)}}class Sr extends er{constructor(Tt){super(Tt,Tt.columns,Tt.rows)}set(Tt,jt,xt){return this.matrix.set(jt,Tt,xt),this}get(Tt,jt){return this.matrix.get(jt,Tt)}}class _r extends Zt{constructor(Tt,jt={}){const{rows:xt=1}=jt;if(Tt.length%xt!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=xt,this.columns=Tt.length/xt,this.data=Tt}set(Tt,jt,xt){let At=this._calculateIndex(Tt,jt);return this.data[At]=xt,this}get(Tt,jt){let xt=this._calculateIndex(Tt,jt);return this.data[xt]}_calculateIndex(Tt,jt){return Tt*this.columns+jt}}class sr extends Zt{constructor(Tt){super(),this.data=Tt,this.rows=Tt.length,this.columns=Tt[0].length}set(Tt,jt,xt){return this.data[Tt][jt]=xt,this}get(Tt,jt){return this.data[Tt][jt]}}function jr(Ft,Tt){if(r.isAnyArray(Ft))return Ft[0]&&r.isAnyArray(Ft[0])?new sr(Ft):new _r(Ft,Tt);throw new Error("the argument is not an array")}class Nr{constructor(Tt){Tt=sr.checkMatrix(Tt);let jt=Tt.clone(),xt=jt.rows,At=jt.columns,Bt=new Float64Array(xt),lr=1,hr,dr,vr,Ur,Ar,an,pn,Jr,on;for(hr=0;hr<xt;hr++)Bt[hr]=hr;for(Jr=new Float64Array(xt),dr=0;dr<At;dr++){for(hr=0;hr<xt;hr++)Jr[hr]=jt.get(hr,dr);for(hr=0;hr<xt;hr++){for(on=Math.min(hr,dr),Ar=0,vr=0;vr<on;vr++)Ar+=jt.get(hr,vr)*Jr[vr];Jr[hr]-=Ar,jt.set(hr,dr,Jr[hr])}for(Ur=dr,hr=dr+1;hr<xt;hr++)Math.abs(Jr[hr])>Math.abs(Jr[Ur])&&(Ur=hr);if(Ur!==dr){for(vr=0;vr<At;vr++)an=jt.get(Ur,vr),jt.set(Ur,vr,jt.get(dr,vr)),jt.set(dr,vr,an);pn=Bt[Ur],Bt[Ur]=Bt[dr],Bt[dr]=pn,lr=-lr}if(dr<xt&&jt.get(dr,dr)!==0)for(hr=dr+1;hr<xt;hr++)jt.set(hr,dr,jt.get(hr,dr)/jt.get(dr,dr))}this.LU=jt,this.pivotVector=Bt,this.pivotSign=lr}isSingular(){let Tt=this.LU,jt=Tt.columns;for(let xt=0;xt<jt;xt++)if(Tt.get(xt,xt)===0)return!0;return!1}solve(Tt){Tt=Lt.checkMatrix(Tt);let jt=this.LU;if(jt.rows!==Tt.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let At=Tt.columns,Bt=Tt.subMatrixRow(this.pivotVector,0,At-1),lr=jt.columns,hr,dr,vr;for(vr=0;vr<lr;vr++)for(hr=vr+1;hr<lr;hr++)for(dr=0;dr<At;dr++)Bt.set(hr,dr,Bt.get(hr,dr)-Bt.get(vr,dr)*jt.get(hr,vr));for(vr=lr-1;vr>=0;vr--){for(dr=0;dr<At;dr++)Bt.set(vr,dr,Bt.get(vr,dr)/jt.get(vr,vr));for(hr=0;hr<vr;hr++)for(dr=0;dr<At;dr++)Bt.set(hr,dr,Bt.get(hr,dr)-Bt.get(vr,dr)*jt.get(hr,vr))}return Bt}get determinant(){let Tt=this.LU;if(!Tt.isSquare())throw new Error("Matrix must be square");let jt=this.pivotSign,xt=Tt.columns;for(let At=0;At<xt;At++)jt*=Tt.get(At,At);return jt}get lowerTriangularMatrix(){let Tt=this.LU,jt=Tt.rows,xt=Tt.columns,At=new Lt(jt,xt);for(let Bt=0;Bt<jt;Bt++)for(let lr=0;lr<xt;lr++)Bt>lr?At.set(Bt,lr,Tt.get(Bt,lr)):Bt===lr?At.set(Bt,lr,1):At.set(Bt,lr,0);return At}get upperTriangularMatrix(){let Tt=this.LU,jt=Tt.rows,xt=Tt.columns,At=new Lt(jt,xt);for(let Bt=0;Bt<jt;Bt++)for(let lr=0;lr<xt;lr++)Bt<=lr?At.set(Bt,lr,Tt.get(Bt,lr)):At.set(Bt,lr,0);return At}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function kr(Ft,Tt){let jt=0;return Math.abs(Ft)>Math.abs(Tt)?(jt=Tt/Ft,Math.abs(Ft)*Math.sqrt(1+jt*jt)):Tt!==0?(jt=Ft/Tt,Math.abs(Tt)*Math.sqrt(1+jt*jt)):0}class qr{constructor(Tt){Tt=sr.checkMatrix(Tt);let jt=Tt.clone(),xt=Tt.rows,At=Tt.columns,Bt=new Float64Array(At),lr,hr,dr,vr;for(dr=0;dr<At;dr++){let Ur=0;for(lr=dr;lr<xt;lr++)Ur=kr(Ur,jt.get(lr,dr));if(Ur!==0){for(jt.get(dr,dr)<0&&(Ur=-Ur),lr=dr;lr<xt;lr++)jt.set(lr,dr,jt.get(lr,dr)/Ur);for(jt.set(dr,dr,jt.get(dr,dr)+1),hr=dr+1;hr<At;hr++){for(vr=0,lr=dr;lr<xt;lr++)vr+=jt.get(lr,dr)*jt.get(lr,hr);for(vr=-vr/jt.get(dr,dr),lr=dr;lr<xt;lr++)jt.set(lr,hr,jt.get(lr,hr)+vr*jt.get(lr,dr))}}Bt[dr]=-Ur}this.QR=jt,this.Rdiag=Bt}solve(Tt){Tt=Lt.checkMatrix(Tt);let jt=this.QR,xt=jt.rows;if(Tt.rows!==xt)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let At=Tt.columns,Bt=Tt.clone(),lr=jt.columns,hr,dr,vr,Ur;for(vr=0;vr<lr;vr++)for(dr=0;dr<At;dr++){for(Ur=0,hr=vr;hr<xt;hr++)Ur+=jt.get(hr,vr)*Bt.get(hr,dr);for(Ur=-Ur/jt.get(vr,vr),hr=vr;hr<xt;hr++)Bt.set(hr,dr,Bt.get(hr,dr)+Ur*jt.get(hr,vr))}for(vr=lr-1;vr>=0;vr--){for(dr=0;dr<At;dr++)Bt.set(vr,dr,Bt.get(vr,dr)/this.Rdiag[vr]);for(hr=0;hr<vr;hr++)for(dr=0;dr<At;dr++)Bt.set(hr,dr,Bt.get(hr,dr)-Bt.get(vr,dr)*jt.get(hr,vr))}return Bt.subMatrix(0,lr-1,0,At-1)}isFullRank(){let Tt=this.QR.columns;for(let jt=0;jt<Tt;jt++)if(this.Rdiag[jt]===0)return!1;return!0}get upperTriangularMatrix(){let Tt=this.QR,jt=Tt.columns,xt=new Lt(jt,jt),At,Bt;for(At=0;At<jt;At++)for(Bt=0;Bt<jt;Bt++)At<Bt?xt.set(At,Bt,Tt.get(At,Bt)):At===Bt?xt.set(At,Bt,this.Rdiag[At]):xt.set(At,Bt,0);return xt}get orthogonalMatrix(){let Tt=this.QR,jt=Tt.rows,xt=Tt.columns,At=new Lt(jt,xt),Bt,lr,hr,dr;for(hr=xt-1;hr>=0;hr--){for(Bt=0;Bt<jt;Bt++)At.set(Bt,hr,0);for(At.set(hr,hr,1),lr=hr;lr<xt;lr++)if(Tt.get(hr,hr)!==0){for(dr=0,Bt=hr;Bt<jt;Bt++)dr+=Tt.get(Bt,hr)*At.get(Bt,lr);for(dr=-dr/Tt.get(hr,hr),Bt=hr;Bt<jt;Bt++)At.set(Bt,lr,At.get(Bt,lr)+dr*Tt.get(Bt,hr))}}return At}}class Pr{constructor(Tt,jt={}){if(Tt=sr.checkMatrix(Tt),Tt.isEmpty())throw new Error("Matrix must be non-empty");let xt=Tt.rows,At=Tt.columns;const{computeLeftSingularVectors:Bt=!0,computeRightSingularVectors:lr=!0,autoTranspose:hr=!1}=jt;let dr=!!Bt,vr=!!lr,Ur=!1,Ar;if(xt<At)if(!hr)Ar=Tt.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{Ar=Tt.transpose(),xt=Ar.rows,At=Ar.columns,Ur=!0;let Lr=dr;dr=vr,vr=Lr}else Ar=Tt.clone();let an=Math.min(xt,At),pn=Math.min(xt+1,At),Jr=new Float64Array(pn),on=new Lt(xt,an),mr=new Lt(At,At),gr=new Float64Array(At),Yr=new Float64Array(xt),Hr=new Float64Array(pn);for(let Lr=0;Lr<pn;Lr++)Hr[Lr]=Lr;let Sn=Math.min(xt-1,At),Kr=Math.max(0,Math.min(At-2,xt)),Dn=Math.max(Sn,Kr);for(let Lr=0;Lr<Dn;Lr++){if(Lr<Sn){Jr[Lr]=0;for(let cn=Lr;cn<xt;cn++)Jr[Lr]=kr(Jr[Lr],Ar.get(cn,Lr));if(Jr[Lr]!==0){Ar.get(Lr,Lr)<0&&(Jr[Lr]=-Jr[Lr]);for(let cn=Lr;cn<xt;cn++)Ar.set(cn,Lr,Ar.get(cn,Lr)/Jr[Lr]);Ar.set(Lr,Lr,Ar.get(Lr,Lr)+1)}Jr[Lr]=-Jr[Lr]}for(let cn=Lr+1;cn<At;cn++){if(Lr<Sn&&Jr[Lr]!==0){let xn=0;for(let mn=Lr;mn<xt;mn++)xn+=Ar.get(mn,Lr)*Ar.get(mn,cn);xn=-xn/Ar.get(Lr,Lr);for(let mn=Lr;mn<xt;mn++)Ar.set(mn,cn,Ar.get(mn,cn)+xn*Ar.get(mn,Lr))}gr[cn]=Ar.get(Lr,cn)}if(dr&&Lr<Sn)for(let cn=Lr;cn<xt;cn++)on.set(cn,Lr,Ar.get(cn,Lr));if(Lr<Kr){gr[Lr]=0;for(let cn=Lr+1;cn<At;cn++)gr[Lr]=kr(gr[Lr],gr[cn]);if(gr[Lr]!==0){gr[Lr+1]<0&&(gr[Lr]=0-gr[Lr]);for(let cn=Lr+1;cn<At;cn++)gr[cn]/=gr[Lr];gr[Lr+1]+=1}if(gr[Lr]=-gr[Lr],Lr+1<xt&&gr[Lr]!==0){for(let cn=Lr+1;cn<xt;cn++)Yr[cn]=0;for(let cn=Lr+1;cn<xt;cn++)for(let xn=Lr+1;xn<At;xn++)Yr[cn]+=gr[xn]*Ar.get(cn,xn);for(let cn=Lr+1;cn<At;cn++){let xn=-gr[cn]/gr[Lr+1];for(let mn=Lr+1;mn<xt;mn++)Ar.set(mn,cn,Ar.get(mn,cn)+xn*Yr[mn])}}if(vr)for(let cn=Lr+1;cn<At;cn++)mr.set(cn,Lr,gr[cn])}}let ln=Math.min(At,xt+1);if(Sn<At&&(Jr[Sn]=Ar.get(Sn,Sn)),xt<ln&&(Jr[ln-1]=0),Kr+1<ln&&(gr[Kr]=Ar.get(Kr,ln-1)),gr[ln-1]=0,dr){for(let Lr=Sn;Lr<an;Lr++){for(let cn=0;cn<xt;cn++)on.set(cn,Lr,0);on.set(Lr,Lr,1)}for(let Lr=Sn-1;Lr>=0;Lr--)if(Jr[Lr]!==0){for(let cn=Lr+1;cn<an;cn++){let xn=0;for(let mn=Lr;mn<xt;mn++)xn+=on.get(mn,Lr)*on.get(mn,cn);xn=-xn/on.get(Lr,Lr);for(let mn=Lr;mn<xt;mn++)on.set(mn,cn,on.get(mn,cn)+xn*on.get(mn,Lr))}for(let cn=Lr;cn<xt;cn++)on.set(cn,Lr,-on.get(cn,Lr));on.set(Lr,Lr,1+on.get(Lr,Lr));for(let cn=0;cn<Lr-1;cn++)on.set(cn,Lr,0)}else{for(let cn=0;cn<xt;cn++)on.set(cn,Lr,0);on.set(Lr,Lr,1)}}if(vr)for(let Lr=At-1;Lr>=0;Lr--){if(Lr<Kr&&gr[Lr]!==0)for(let cn=Lr+1;cn<At;cn++){let xn=0;for(let mn=Lr+1;mn<At;mn++)xn+=mr.get(mn,Lr)*mr.get(mn,cn);xn=-xn/mr.get(Lr+1,Lr);for(let mn=Lr+1;mn<At;mn++)mr.set(mn,cn,mr.get(mn,cn)+xn*mr.get(mn,Lr))}for(let cn=0;cn<At;cn++)mr.set(cn,Lr,0);mr.set(Lr,Lr,1)}let jn=ln-1,bn=Number.EPSILON;for(;ln>0;){let Lr,cn;for(Lr=ln-2;Lr>=-1&&Lr!==-1;Lr--){const xn=Number.MIN_VALUE+bn*Math.abs(Jr[Lr]+Math.abs(Jr[Lr+1]));if(Math.abs(gr[Lr])<=xn||Number.isNaN(gr[Lr])){gr[Lr]=0;break}}if(Lr===ln-2)cn=4;else{let xn;for(xn=ln-1;xn>=Lr&&xn!==Lr;xn--){let mn=(xn!==ln?Math.abs(gr[xn]):0)+(xn!==Lr+1?Math.abs(gr[xn-1]):0);if(Math.abs(Jr[xn])<=bn*mn){Jr[xn]=0;break}}xn===Lr?cn=3:xn===ln-1?cn=1:(cn=2,Lr=xn)}switch(Lr++,cn){case 1:{let xn=gr[ln-2];gr[ln-2]=0;for(let mn=ln-2;mn>=Lr;mn--){let $n=kr(Jr[mn],xn),Bn=Jr[mn]/$n,qn=xn/$n;if(Jr[mn]=$n,mn!==Lr&&(xn=-qn*gr[mn-1],gr[mn-1]=Bn*gr[mn-1]),vr)for(let Gn=0;Gn<At;Gn++)$n=Bn*mr.get(Gn,mn)+qn*mr.get(Gn,ln-1),mr.set(Gn,ln-1,-qn*mr.get(Gn,mn)+Bn*mr.get(Gn,ln-1)),mr.set(Gn,mn,$n)}break}case 2:{let xn=gr[Lr-1];gr[Lr-1]=0;for(let mn=Lr;mn<ln;mn++){let $n=kr(Jr[mn],xn),Bn=Jr[mn]/$n,qn=xn/$n;if(Jr[mn]=$n,xn=-qn*gr[mn],gr[mn]=Bn*gr[mn],dr)for(let Gn=0;Gn<xt;Gn++)$n=Bn*on.get(Gn,mn)+qn*on.get(Gn,Lr-1),on.set(Gn,Lr-1,-qn*on.get(Gn,mn)+Bn*on.get(Gn,Lr-1)),on.set(Gn,mn,$n)}break}case 3:{const xn=Math.max(Math.abs(Jr[ln-1]),Math.abs(Jr[ln-2]),Math.abs(gr[ln-2]),Math.abs(Jr[Lr]),Math.abs(gr[Lr])),mn=Jr[ln-1]/xn,$n=Jr[ln-2]/xn,Bn=gr[ln-2]/xn,qn=Jr[Lr]/xn,Gn=gr[Lr]/xn,Ai=(($n+mn)*($n-mn)+Bn*Bn)/2,vi=mn*Bn*(mn*Bn);let Yn=0;(Ai!==0||vi!==0)&&(Ai<0?Yn=0-Math.sqrt(Ai*Ai+vi):Yn=Math.sqrt(Ai*Ai+vi),Yn=vi/(Ai+Yn));let Gi=(qn+mn)*(qn-mn)+Yn,Qi=qn*Gn;for(let Hn=Lr;Hn<ln-1;Hn++){let wi=kr(Gi,Qi);wi===0&&(wi=Number.MIN_VALUE);let ki=Gi/wi,Hi=Qi/wi;if(Hn!==Lr&&(gr[Hn-1]=wi),Gi=ki*Jr[Hn]+Hi*gr[Hn],gr[Hn]=ki*gr[Hn]-Hi*Jr[Hn],Qi=Hi*Jr[Hn+1],Jr[Hn+1]=ki*Jr[Hn+1],vr)for(let Jn=0;Jn<At;Jn++)wi=ki*mr.get(Jn,Hn)+Hi*mr.get(Jn,Hn+1),mr.set(Jn,Hn+1,-Hi*mr.get(Jn,Hn)+ki*mr.get(Jn,Hn+1)),mr.set(Jn,Hn,wi);if(wi=kr(Gi,Qi),wi===0&&(wi=Number.MIN_VALUE),ki=Gi/wi,Hi=Qi/wi,Jr[Hn]=wi,Gi=ki*gr[Hn]+Hi*Jr[Hn+1],Jr[Hn+1]=-Hi*gr[Hn]+ki*Jr[Hn+1],Qi=Hi*gr[Hn+1],gr[Hn+1]=ki*gr[Hn+1],dr&&Hn<xt-1)for(let Jn=0;Jn<xt;Jn++)wi=ki*on.get(Jn,Hn)+Hi*on.get(Jn,Hn+1),on.set(Jn,Hn+1,-Hi*on.get(Jn,Hn)+ki*on.get(Jn,Hn+1)),on.set(Jn,Hn,wi)}gr[ln-2]=Gi;break}case 4:{if(Jr[Lr]<=0&&(Jr[Lr]=Jr[Lr]<0?-Jr[Lr]:0,vr))for(let xn=0;xn<=jn;xn++)mr.set(xn,Lr,-mr.get(xn,Lr));for(;Lr<jn&&!(Jr[Lr]>=Jr[Lr+1]);){let xn=Jr[Lr];if(Jr[Lr]=Jr[Lr+1],Jr[Lr+1]=xn,vr&&Lr<At-1)for(let mn=0;mn<At;mn++)xn=mr.get(mn,Lr+1),mr.set(mn,Lr+1,mr.get(mn,Lr)),mr.set(mn,Lr,xn);if(dr&&Lr<xt-1)for(let mn=0;mn<xt;mn++)xn=on.get(mn,Lr+1),on.set(mn,Lr+1,on.get(mn,Lr)),on.set(mn,Lr,xn);Lr++}ln--;break}}}if(Ur){let Lr=mr;mr=on,on=Lr}this.m=xt,this.n=At,this.s=Jr,this.U=on,this.V=mr}solve(Tt){let jt=Tt,xt=this.threshold,At=this.s.length,Bt=Lt.zeros(At,At);for(let an=0;an<At;an++)Math.abs(this.s[an])<=xt?Bt.set(an,an,0):Bt.set(an,an,1/this.s[an]);let lr=this.U,hr=this.rightSingularVectors,dr=hr.mmul(Bt),vr=hr.rows,Ur=lr.rows,Ar=Lt.zeros(vr,Ur);for(let an=0;an<vr;an++)for(let pn=0;pn<Ur;pn++){let Jr=0;for(let on=0;on<At;on++)Jr+=dr.get(an,on)*lr.get(pn,on);Ar.set(an,pn,Jr)}return Ar.mmul(jt)}solveForDiagonal(Tt){return this.solve(Lt.diag(Tt))}inverse(){let Tt=this.V,jt=this.threshold,xt=Tt.rows,At=Tt.columns,Bt=new Lt(xt,this.s.length);for(let Ur=0;Ur<xt;Ur++)for(let Ar=0;Ar<At;Ar++)Math.abs(this.s[Ar])>jt&&Bt.set(Ur,Ar,Tt.get(Ur,Ar)/this.s[Ar]);let lr=this.U,hr=lr.rows,dr=lr.columns,vr=new Lt(xt,hr);for(let Ur=0;Ur<xt;Ur++)for(let Ar=0;Ar<hr;Ar++){let an=0;for(let pn=0;pn<dr;pn++)an+=Bt.get(Ur,pn)*lr.get(Ar,pn);vr.set(Ur,Ar,an)}return vr}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let Tt=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,jt=0,xt=this.s;for(let At=0,Bt=xt.length;At<Bt;At++)xt[At]>Tt&&jt++;return jt}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return Lt.diag(this.s)}}function Vr(Ft,Tt=!1){return Ft=sr.checkMatrix(Ft),Tt?new Pr(Ft).inverse():Xr(Ft,Lt.eye(Ft.rows))}function Xr(Ft,Tt,jt=!1){return Ft=sr.checkMatrix(Ft),Tt=sr.checkMatrix(Tt),jt?new Pr(Ft).solve(Tt):Ft.isSquare()?new Nr(Ft).solve(Tt):new qr(Ft).solve(Tt)}function Gr(Ft){if(Ft=Lt.checkMatrix(Ft),Ft.isSquare()){if(Ft.columns===0)return 1;let Tt,jt,xt,At;if(Ft.columns===2)return Tt=Ft.get(0,0),jt=Ft.get(0,1),xt=Ft.get(1,0),At=Ft.get(1,1),Tt*At-jt*xt;if(Ft.columns===3){let Bt,lr,hr;return Bt=new ir(Ft,[1,2],[1,2]),lr=new ir(Ft,[1,2],[0,2]),hr=new ir(Ft,[1,2],[0,1]),Tt=Ft.get(0,0),jt=Ft.get(0,1),xt=Ft.get(0,2),Tt*Gr(Bt)-jt*Gr(lr)+xt*Gr(hr)}else return new Nr(Ft).determinant}else throw Error("determinant can only be calculated for a square matrix")}function Er(Ft,Tt){let jt=[];for(let xt=0;xt<Ft;xt++)xt!==Tt&&jt.push(xt);return jt}function Ir(Ft,Tt,jt,xt=1e-9,At=1e-9){if(Ft>At)return new Array(Tt.rows+1).fill(0);{let Bt=Tt.addRow(jt,[0]);for(let lr=0;lr<Bt.rows;lr++)Math.abs(Bt.get(lr,0))<xt&&Bt.set(lr,0,0);return Bt.to1DArray()}}function Cr(Ft,Tt={}){const{thresholdValue:jt=1e-9,thresholdError:xt=1e-9}=Tt;Ft=Lt.checkMatrix(Ft);let At=Ft.rows,Bt=new Lt(At,At);for(let lr=0;lr<At;lr++){let hr=Lt.columnVector(Ft.getRow(lr)),dr=Ft.subMatrixRow(Er(At,lr)).transpose(),Ur=new Pr(dr).solve(hr),Ar=Lt.sub(hr,dr.mmul(Ur)).abs().max();Bt.setRow(lr,Ir(Ar,Ur,lr,jt,xt))}return Bt}function tr(Ft,Tt=Number.EPSILON){if(Ft=Lt.checkMatrix(Ft),Ft.isEmpty())return Ft.transpose();let jt=new Pr(Ft,{autoTranspose:!0}),xt=jt.leftSingularVectors,At=jt.rightSingularVectors,Bt=jt.diagonal;for(let lr=0;lr<Bt.length;lr++)Math.abs(Bt[lr])>Tt?Bt[lr]=1/Bt[lr]:Bt[lr]=0;return At.mmul(Lt.diag(Bt).mmul(xt.transpose()))}function ar(Ft,Tt=Ft,jt={}){Ft=new Lt(Ft);let xt=!1;if(typeof Tt=="object"&&!Lt.isMatrix(Tt)&&!r.isAnyArray(Tt)?(jt=Tt,Tt=Ft,xt=!0):Tt=new Lt(Tt),Ft.rows!==Tt.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:At=!0}=jt;At&&(Ft=Ft.center("column"),xt||(Tt=Tt.center("column")));const Bt=Ft.transpose().mmul(Tt);for(let lr=0;lr<Bt.rows;lr++)for(let hr=0;hr<Bt.columns;hr++)Bt.set(lr,hr,Bt.get(lr,hr)*(1/(Ft.rows-1)));return Bt}function Kt(Ft,Tt=Ft,jt={}){Ft=new Lt(Ft);let xt=!1;if(typeof Tt=="object"&&!Lt.isMatrix(Tt)&&!r.isAnyArray(Tt)?(jt=Tt,Tt=Ft,xt=!0):Tt=new Lt(Tt),Ft.rows!==Tt.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:At=!0,scale:Bt=!0}=jt;At&&(Ft.center("column"),xt||Tt.center("column")),Bt&&(Ft.scale("column"),xt||Tt.scale("column"));const lr=Ft.standardDeviation("column",{unbiased:!0}),hr=xt?lr:Tt.standardDeviation("column",{unbiased:!0}),dr=Ft.transpose().mmul(Tt);for(let vr=0;vr<dr.rows;vr++)for(let Ur=0;Ur<dr.columns;Ur++)dr.set(vr,Ur,dr.get(vr,Ur)*(1/(lr[vr]*hr[Ur]))*(1/(Ft.rows-1)));return dr}class cr{constructor(Tt,jt={}){const{assumeSymmetric:xt=!1}=jt;if(Tt=sr.checkMatrix(Tt),!Tt.isSquare())throw new Error("Matrix is not a square matrix");if(Tt.isEmpty())throw new Error("Matrix must be non-empty");let At=Tt.columns,Bt=new Lt(At,At),lr=new Float64Array(At),hr=new Float64Array(At),dr=Tt,vr,Ur,Ar=!1;if(xt?Ar=!0:Ar=Tt.isSymmetric(),Ar){for(vr=0;vr<At;vr++)for(Ur=0;Ur<At;Ur++)Bt.set(vr,Ur,dr.get(vr,Ur));Tr(At,hr,lr,Bt),Dr(At,hr,lr,Bt)}else{let an=new Lt(At,At),pn=new Float64Array(At);for(Ur=0;Ur<At;Ur++)for(vr=0;vr<At;vr++)an.set(vr,Ur,dr.get(vr,Ur));zr(At,an,pn,Bt),fn(At,hr,lr,Bt,an)}this.n=At,this.e=hr,this.d=lr,this.V=Bt}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let Tt=this.n,jt=this.e,xt=this.d,At=new Lt(Tt,Tt),Bt,lr;for(Bt=0;Bt<Tt;Bt++){for(lr=0;lr<Tt;lr++)At.set(Bt,lr,0);At.set(Bt,Bt,xt[Bt]),jt[Bt]>0?At.set(Bt,Bt+1,jt[Bt]):jt[Bt]<0&&At.set(Bt,Bt-1,jt[Bt])}return At}}function Tr(Ft,Tt,jt,xt){let At,Bt,lr,hr,dr,vr,Ur,Ar;for(dr=0;dr<Ft;dr++)jt[dr]=xt.get(Ft-1,dr);for(hr=Ft-1;hr>0;hr--){for(Ar=0,lr=0,vr=0;vr<hr;vr++)Ar=Ar+Math.abs(jt[vr]);if(Ar===0)for(Tt[hr]=jt[hr-1],dr=0;dr<hr;dr++)jt[dr]=xt.get(hr-1,dr),xt.set(hr,dr,0),xt.set(dr,hr,0);else{for(vr=0;vr<hr;vr++)jt[vr]/=Ar,lr+=jt[vr]*jt[vr];for(At=jt[hr-1],Bt=Math.sqrt(lr),At>0&&(Bt=-Bt),Tt[hr]=Ar*Bt,lr=lr-At*Bt,jt[hr-1]=At-Bt,dr=0;dr<hr;dr++)Tt[dr]=0;for(dr=0;dr<hr;dr++){for(At=jt[dr],xt.set(dr,hr,At),Bt=Tt[dr]+xt.get(dr,dr)*At,vr=dr+1;vr<=hr-1;vr++)Bt+=xt.get(vr,dr)*jt[vr],Tt[vr]+=xt.get(vr,dr)*At;Tt[dr]=Bt}for(At=0,dr=0;dr<hr;dr++)Tt[dr]/=lr,At+=Tt[dr]*jt[dr];for(Ur=At/(lr+lr),dr=0;dr<hr;dr++)Tt[dr]-=Ur*jt[dr];for(dr=0;dr<hr;dr++){for(At=jt[dr],Bt=Tt[dr],vr=dr;vr<=hr-1;vr++)xt.set(vr,dr,xt.get(vr,dr)-(At*Tt[vr]+Bt*jt[vr]));jt[dr]=xt.get(hr-1,dr),xt.set(hr,dr,0)}}jt[hr]=lr}for(hr=0;hr<Ft-1;hr++){if(xt.set(Ft-1,hr,xt.get(hr,hr)),xt.set(hr,hr,1),lr=jt[hr+1],lr!==0){for(vr=0;vr<=hr;vr++)jt[vr]=xt.get(vr,hr+1)/lr;for(dr=0;dr<=hr;dr++){for(Bt=0,vr=0;vr<=hr;vr++)Bt+=xt.get(vr,hr+1)*xt.get(vr,dr);for(vr=0;vr<=hr;vr++)xt.set(vr,dr,xt.get(vr,dr)-Bt*jt[vr])}}for(vr=0;vr<=hr;vr++)xt.set(vr,hr+1,0)}for(dr=0;dr<Ft;dr++)jt[dr]=xt.get(Ft-1,dr),xt.set(Ft-1,dr,0);xt.set(Ft-1,Ft-1,1),Tt[0]=0}function Dr(Ft,Tt,jt,xt){let At,Bt,lr,hr,dr,vr,Ur,Ar,an,pn,Jr,on,mr,gr,Yr,Hr;for(lr=1;lr<Ft;lr++)Tt[lr-1]=Tt[lr];Tt[Ft-1]=0;let Sn=0,Kr=0,Dn=Number.EPSILON;for(vr=0;vr<Ft;vr++){for(Kr=Math.max(Kr,Math.abs(jt[vr])+Math.abs(Tt[vr])),Ur=vr;Ur<Ft&&!(Math.abs(Tt[Ur])<=Dn*Kr);)Ur++;if(Ur>vr)do{for(At=jt[vr],Ar=(jt[vr+1]-At)/(2*Tt[vr]),an=kr(Ar,1),Ar<0&&(an=-an),jt[vr]=Tt[vr]/(Ar+an),jt[vr+1]=Tt[vr]*(Ar+an),pn=jt[vr+1],Bt=At-jt[vr],lr=vr+2;lr<Ft;lr++)jt[lr]-=Bt;for(Sn=Sn+Bt,Ar=jt[Ur],Jr=1,on=Jr,mr=Jr,gr=Tt[vr+1],Yr=0,Hr=0,lr=Ur-1;lr>=vr;lr--)for(mr=on,on=Jr,Hr=Yr,At=Jr*Tt[lr],Bt=Jr*Ar,an=kr(Ar,Tt[lr]),Tt[lr+1]=Yr*an,Yr=Tt[lr]/an,Jr=Ar/an,Ar=Jr*jt[lr]-Yr*At,jt[lr+1]=Bt+Yr*(Jr*At+Yr*jt[lr]),dr=0;dr<Ft;dr++)Bt=xt.get(dr,lr+1),xt.set(dr,lr+1,Yr*xt.get(dr,lr)+Jr*Bt),xt.set(dr,lr,Jr*xt.get(dr,lr)-Yr*Bt);Ar=-Yr*Hr*mr*gr*Tt[vr]/pn,Tt[vr]=Yr*Ar,jt[vr]=Jr*Ar}while(Math.abs(Tt[vr])>Dn*Kr);jt[vr]=jt[vr]+Sn,Tt[vr]=0}for(lr=0;lr<Ft-1;lr++){for(dr=lr,Ar=jt[lr],hr=lr+1;hr<Ft;hr++)jt[hr]<Ar&&(dr=hr,Ar=jt[hr]);if(dr!==lr)for(jt[dr]=jt[lr],jt[lr]=Ar,hr=0;hr<Ft;hr++)Ar=xt.get(hr,lr),xt.set(hr,lr,xt.get(hr,dr)),xt.set(hr,dr,Ar)}}function zr(Ft,Tt,jt,xt){let At=0,Bt=Ft-1,lr,hr,dr,vr,Ur,Ar,an;for(Ar=At+1;Ar<=Bt-1;Ar++){for(an=0,vr=Ar;vr<=Bt;vr++)an=an+Math.abs(Tt.get(vr,Ar-1));if(an!==0){for(dr=0,vr=Bt;vr>=Ar;vr--)jt[vr]=Tt.get(vr,Ar-1)/an,dr+=jt[vr]*jt[vr];for(hr=Math.sqrt(dr),jt[Ar]>0&&(hr=-hr),dr=dr-jt[Ar]*hr,jt[Ar]=jt[Ar]-hr,Ur=Ar;Ur<Ft;Ur++){for(lr=0,vr=Bt;vr>=Ar;vr--)lr+=jt[vr]*Tt.get(vr,Ur);for(lr=lr/dr,vr=Ar;vr<=Bt;vr++)Tt.set(vr,Ur,Tt.get(vr,Ur)-lr*jt[vr])}for(vr=0;vr<=Bt;vr++){for(lr=0,Ur=Bt;Ur>=Ar;Ur--)lr+=jt[Ur]*Tt.get(vr,Ur);for(lr=lr/dr,Ur=Ar;Ur<=Bt;Ur++)Tt.set(vr,Ur,Tt.get(vr,Ur)-lr*jt[Ur])}jt[Ar]=an*jt[Ar],Tt.set(Ar,Ar-1,an*hr)}}for(vr=0;vr<Ft;vr++)for(Ur=0;Ur<Ft;Ur++)xt.set(vr,Ur,vr===Ur?1:0);for(Ar=Bt-1;Ar>=At+1;Ar--)if(Tt.get(Ar,Ar-1)!==0){for(vr=Ar+1;vr<=Bt;vr++)jt[vr]=Tt.get(vr,Ar-1);for(Ur=Ar;Ur<=Bt;Ur++){for(hr=0,vr=Ar;vr<=Bt;vr++)hr+=jt[vr]*xt.get(vr,Ur);for(hr=hr/jt[Ar]/Tt.get(Ar,Ar-1),vr=Ar;vr<=Bt;vr++)xt.set(vr,Ur,xt.get(vr,Ur)+hr*jt[vr])}}}function fn(Ft,Tt,jt,xt,At){let Bt=Ft-1,lr=0,hr=Ft-1,dr=Number.EPSILON,vr=0,Ur=0,Ar=0,an=0,pn=0,Jr=0,on=0,mr=0,gr,Yr,Hr,Sn,Kr,Dn,ln,jn,bn,Lr,cn,xn,mn,$n,Bn;for(gr=0;gr<Ft;gr++)for((gr<lr||gr>hr)&&(jt[gr]=At.get(gr,gr),Tt[gr]=0),Yr=Math.max(gr-1,0);Yr<Ft;Yr++)Ur=Ur+Math.abs(At.get(gr,Yr));for(;Bt>=lr;){for(Sn=Bt;Sn>lr&&(Jr=Math.abs(At.get(Sn-1,Sn-1))+Math.abs(At.get(Sn,Sn)),Jr===0&&(Jr=Ur),!(Math.abs(At.get(Sn,Sn-1))<dr*Jr));)Sn--;if(Sn===Bt)At.set(Bt,Bt,At.get(Bt,Bt)+vr),jt[Bt]=At.get(Bt,Bt),Tt[Bt]=0,Bt--,mr=0;else if(Sn===Bt-1){if(ln=At.get(Bt,Bt-1)*At.get(Bt-1,Bt),Ar=(At.get(Bt-1,Bt-1)-At.get(Bt,Bt))/2,an=Ar*Ar+ln,on=Math.sqrt(Math.abs(an)),At.set(Bt,Bt,At.get(Bt,Bt)+vr),At.set(Bt-1,Bt-1,At.get(Bt-1,Bt-1)+vr),jn=At.get(Bt,Bt),an>=0){for(on=Ar>=0?Ar+on:Ar-on,jt[Bt-1]=jn+on,jt[Bt]=jt[Bt-1],on!==0&&(jt[Bt]=jn-ln/on),Tt[Bt-1]=0,Tt[Bt]=0,jn=At.get(Bt,Bt-1),Jr=Math.abs(jn)+Math.abs(on),Ar=jn/Jr,an=on/Jr,pn=Math.sqrt(Ar*Ar+an*an),Ar=Ar/pn,an=an/pn,Yr=Bt-1;Yr<Ft;Yr++)on=At.get(Bt-1,Yr),At.set(Bt-1,Yr,an*on+Ar*At.get(Bt,Yr)),At.set(Bt,Yr,an*At.get(Bt,Yr)-Ar*on);for(gr=0;gr<=Bt;gr++)on=At.get(gr,Bt-1),At.set(gr,Bt-1,an*on+Ar*At.get(gr,Bt)),At.set(gr,Bt,an*At.get(gr,Bt)-Ar*on);for(gr=lr;gr<=hr;gr++)on=xt.get(gr,Bt-1),xt.set(gr,Bt-1,an*on+Ar*xt.get(gr,Bt)),xt.set(gr,Bt,an*xt.get(gr,Bt)-Ar*on)}else jt[Bt-1]=jn+Ar,jt[Bt]=jn+Ar,Tt[Bt-1]=on,Tt[Bt]=-on;Bt=Bt-2,mr=0}else{if(jn=At.get(Bt,Bt),bn=0,ln=0,Sn<Bt&&(bn=At.get(Bt-1,Bt-1),ln=At.get(Bt,Bt-1)*At.get(Bt-1,Bt)),mr===10){for(vr+=jn,gr=lr;gr<=Bt;gr++)At.set(gr,gr,At.get(gr,gr)-jn);Jr=Math.abs(At.get(Bt,Bt-1))+Math.abs(At.get(Bt-1,Bt-2)),jn=bn=.75*Jr,ln=-.4375*Jr*Jr}if(mr===30&&(Jr=(bn-jn)/2,Jr=Jr*Jr+ln,Jr>0)){for(Jr=Math.sqrt(Jr),bn<jn&&(Jr=-Jr),Jr=jn-ln/((bn-jn)/2+Jr),gr=lr;gr<=Bt;gr++)At.set(gr,gr,At.get(gr,gr)-Jr);vr+=Jr,jn=bn=ln=.964}for(mr=mr+1,Kr=Bt-2;Kr>=Sn&&(on=At.get(Kr,Kr),pn=jn-on,Jr=bn-on,Ar=(pn*Jr-ln)/At.get(Kr+1,Kr)+At.get(Kr,Kr+1),an=At.get(Kr+1,Kr+1)-on-pn-Jr,pn=At.get(Kr+2,Kr+1),Jr=Math.abs(Ar)+Math.abs(an)+Math.abs(pn),Ar=Ar/Jr,an=an/Jr,pn=pn/Jr,!(Kr===Sn||Math.abs(At.get(Kr,Kr-1))*(Math.abs(an)+Math.abs(pn))<dr*(Math.abs(Ar)*(Math.abs(At.get(Kr-1,Kr-1))+Math.abs(on)+Math.abs(At.get(Kr+1,Kr+1))))));)Kr--;for(gr=Kr+2;gr<=Bt;gr++)At.set(gr,gr-2,0),gr>Kr+2&&At.set(gr,gr-3,0);for(Hr=Kr;Hr<=Bt-1&&($n=Hr!==Bt-1,Hr!==Kr&&(Ar=At.get(Hr,Hr-1),an=At.get(Hr+1,Hr-1),pn=$n?At.get(Hr+2,Hr-1):0,jn=Math.abs(Ar)+Math.abs(an)+Math.abs(pn),jn!==0&&(Ar=Ar/jn,an=an/jn,pn=pn/jn)),jn!==0);Hr++)if(Jr=Math.sqrt(Ar*Ar+an*an+pn*pn),Ar<0&&(Jr=-Jr),Jr!==0){for(Hr!==Kr?At.set(Hr,Hr-1,-Jr*jn):Sn!==Kr&&At.set(Hr,Hr-1,-At.get(Hr,Hr-1)),Ar=Ar+Jr,jn=Ar/Jr,bn=an/Jr,on=pn/Jr,an=an/Ar,pn=pn/Ar,Yr=Hr;Yr<Ft;Yr++)Ar=At.get(Hr,Yr)+an*At.get(Hr+1,Yr),$n&&(Ar=Ar+pn*At.get(Hr+2,Yr),At.set(Hr+2,Yr,At.get(Hr+2,Yr)-Ar*on)),At.set(Hr,Yr,At.get(Hr,Yr)-Ar*jn),At.set(Hr+1,Yr,At.get(Hr+1,Yr)-Ar*bn);for(gr=0;gr<=Math.min(Bt,Hr+3);gr++)Ar=jn*At.get(gr,Hr)+bn*At.get(gr,Hr+1),$n&&(Ar=Ar+on*At.get(gr,Hr+2),At.set(gr,Hr+2,At.get(gr,Hr+2)-Ar*pn)),At.set(gr,Hr,At.get(gr,Hr)-Ar),At.set(gr,Hr+1,At.get(gr,Hr+1)-Ar*an);for(gr=lr;gr<=hr;gr++)Ar=jn*xt.get(gr,Hr)+bn*xt.get(gr,Hr+1),$n&&(Ar=Ar+on*xt.get(gr,Hr+2),xt.set(gr,Hr+2,xt.get(gr,Hr+2)-Ar*pn)),xt.set(gr,Hr,xt.get(gr,Hr)-Ar),xt.set(gr,Hr+1,xt.get(gr,Hr+1)-Ar*an)}}}if(Ur!==0){for(Bt=Ft-1;Bt>=0;Bt--)if(Ar=jt[Bt],an=Tt[Bt],an===0)for(Sn=Bt,At.set(Bt,Bt,1),gr=Bt-1;gr>=0;gr--){for(ln=At.get(gr,gr)-Ar,pn=0,Yr=Sn;Yr<=Bt;Yr++)pn=pn+At.get(gr,Yr)*At.get(Yr,Bt);if(Tt[gr]<0)on=ln,Jr=pn;else if(Sn=gr,Tt[gr]===0?At.set(gr,Bt,ln!==0?-pn/ln:-pn/(dr*Ur)):(jn=At.get(gr,gr+1),bn=At.get(gr+1,gr),an=(jt[gr]-Ar)*(jt[gr]-Ar)+Tt[gr]*Tt[gr],Dn=(jn*Jr-on*pn)/an,At.set(gr,Bt,Dn),At.set(gr+1,Bt,Math.abs(jn)>Math.abs(on)?(-pn-ln*Dn)/jn:(-Jr-bn*Dn)/on)),Dn=Math.abs(At.get(gr,Bt)),dr*Dn*Dn>1)for(Yr=gr;Yr<=Bt;Yr++)At.set(Yr,Bt,At.get(Yr,Bt)/Dn)}else if(an<0)for(Sn=Bt-1,Math.abs(At.get(Bt,Bt-1))>Math.abs(At.get(Bt-1,Bt))?(At.set(Bt-1,Bt-1,an/At.get(Bt,Bt-1)),At.set(Bt-1,Bt,-(At.get(Bt,Bt)-Ar)/At.get(Bt,Bt-1))):(Bn=vn(0,-At.get(Bt-1,Bt),At.get(Bt-1,Bt-1)-Ar,an),At.set(Bt-1,Bt-1,Bn[0]),At.set(Bt-1,Bt,Bn[1])),At.set(Bt,Bt-1,0),At.set(Bt,Bt,1),gr=Bt-2;gr>=0;gr--){for(Lr=0,cn=0,Yr=Sn;Yr<=Bt;Yr++)Lr=Lr+At.get(gr,Yr)*At.get(Yr,Bt-1),cn=cn+At.get(gr,Yr)*At.get(Yr,Bt);if(ln=At.get(gr,gr)-Ar,Tt[gr]<0)on=ln,pn=Lr,Jr=cn;else if(Sn=gr,Tt[gr]===0?(Bn=vn(-Lr,-cn,ln,an),At.set(gr,Bt-1,Bn[0]),At.set(gr,Bt,Bn[1])):(jn=At.get(gr,gr+1),bn=At.get(gr+1,gr),xn=(jt[gr]-Ar)*(jt[gr]-Ar)+Tt[gr]*Tt[gr]-an*an,mn=(jt[gr]-Ar)*2*an,xn===0&&mn===0&&(xn=dr*Ur*(Math.abs(ln)+Math.abs(an)+Math.abs(jn)+Math.abs(bn)+Math.abs(on))),Bn=vn(jn*pn-on*Lr+an*cn,jn*Jr-on*cn-an*Lr,xn,mn),At.set(gr,Bt-1,Bn[0]),At.set(gr,Bt,Bn[1]),Math.abs(jn)>Math.abs(on)+Math.abs(an)?(At.set(gr+1,Bt-1,(-Lr-ln*At.get(gr,Bt-1)+an*At.get(gr,Bt))/jn),At.set(gr+1,Bt,(-cn-ln*At.get(gr,Bt)-an*At.get(gr,Bt-1))/jn)):(Bn=vn(-pn-bn*At.get(gr,Bt-1),-Jr-bn*At.get(gr,Bt),on,an),At.set(gr+1,Bt-1,Bn[0]),At.set(gr+1,Bt,Bn[1]))),Dn=Math.max(Math.abs(At.get(gr,Bt-1)),Math.abs(At.get(gr,Bt))),dr*Dn*Dn>1)for(Yr=gr;Yr<=Bt;Yr++)At.set(Yr,Bt-1,At.get(Yr,Bt-1)/Dn),At.set(Yr,Bt,At.get(Yr,Bt)/Dn)}for(gr=0;gr<Ft;gr++)if(gr<lr||gr>hr)for(Yr=gr;Yr<Ft;Yr++)xt.set(gr,Yr,At.get(gr,Yr));for(Yr=Ft-1;Yr>=lr;Yr--)for(gr=lr;gr<=hr;gr++){for(on=0,Hr=lr;Hr<=Math.min(Yr,hr);Hr++)on=on+xt.get(gr,Hr)*At.get(Hr,Yr);xt.set(gr,Yr,on)}}}function vn(Ft,Tt,jt,xt){let At,Bt;return Math.abs(jt)>Math.abs(xt)?(At=xt/jt,Bt=jt+At*xt,[(Ft+At*Tt)/Bt,(Tt-At*Ft)/Bt]):(At=jt/xt,Bt=xt+At*jt,[(At*Ft+Tt)/Bt,(At*Tt-Ft)/Bt])}class _n{constructor(Tt){if(Tt=sr.checkMatrix(Tt),!Tt.isSymmetric())throw new Error("Matrix is not symmetric");let jt=Tt,xt=jt.rows,At=new Lt(xt,xt),Bt=!0,lr,hr,dr;for(hr=0;hr<xt;hr++){let vr=0;for(dr=0;dr<hr;dr++){let Ur=0;for(lr=0;lr<dr;lr++)Ur+=At.get(dr,lr)*At.get(hr,lr);Ur=(jt.get(hr,dr)-Ur)/At.get(dr,dr),At.set(hr,dr,Ur),vr=vr+Ur*Ur}for(vr=jt.get(hr,hr)-vr,Bt&&(Bt=vr>0),At.set(hr,hr,Math.sqrt(Math.max(vr,0))),dr=hr+1;dr<xt;dr++)At.set(hr,dr,0)}this.L=At,this.positiveDefinite=Bt}isPositiveDefinite(){return this.positiveDefinite}solve(Tt){Tt=sr.checkMatrix(Tt);let jt=this.L,xt=jt.rows;if(Tt.rows!==xt)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let At=Tt.columns,Bt=Tt.clone(),lr,hr,dr;for(dr=0;dr<xt;dr++)for(hr=0;hr<At;hr++){for(lr=0;lr<dr;lr++)Bt.set(dr,hr,Bt.get(dr,hr)-Bt.get(lr,hr)*jt.get(dr,lr));Bt.set(dr,hr,Bt.get(dr,hr)/jt.get(dr,dr))}for(dr=xt-1;dr>=0;dr--)for(hr=0;hr<At;hr++){for(lr=dr+1;lr<xt;lr++)Bt.set(dr,hr,Bt.get(dr,hr)-Bt.get(lr,hr)*jt.get(lr,dr));Bt.set(dr,hr,Bt.get(dr,hr)/jt.get(dr,dr))}return Bt}get lowerTriangularMatrix(){return this.L}}class wn{constructor(Tt,jt={}){Tt=sr.checkMatrix(Tt);let{Y:xt}=jt;const{scaleScores:At=!1,maxIterations:Bt=1e3,terminationCriteria:lr=1e-10}=jt;let hr;if(xt){if(r.isAnyArray(xt)&&typeof xt[0]=="number"?xt=Lt.columnVector(xt):xt=sr.checkMatrix(xt),xt.rows!==Tt.rows)throw new Error("Y should have the same number of rows as X");hr=xt.getColumnVector(0)}else hr=Tt.getColumnVector(0);let dr=1,vr,Ur,Ar,an;for(let pn=0;pn<Bt&&dr>lr;pn++)Ar=Tt.transpose().mmul(hr).div(hr.transpose().mmul(hr).get(0,0)),Ar=Ar.div(Ar.norm()),vr=Tt.mmul(Ar).div(Ar.transpose().mmul(Ar).get(0,0)),pn>0&&(dr=vr.clone().sub(an).pow(2).sum()),an=vr.clone(),xt?(Ur=xt.transpose().mmul(vr).div(vr.transpose().mmul(vr).get(0,0)),Ur=Ur.div(Ur.norm()),hr=xt.mmul(Ur).div(Ur.transpose().mmul(Ur).get(0,0))):hr=vr;if(xt){let pn=Tt.transpose().mmul(vr).div(vr.transpose().mmul(vr).get(0,0));pn=pn.div(pn.norm());let Jr=Tt.clone().sub(vr.clone().mmul(pn.transpose())),on=hr.transpose().mmul(vr).div(vr.transpose().mmul(vr).get(0,0)),mr=xt.clone().sub(vr.clone().mulS(on.get(0,0)).mmul(Ur.transpose()));this.t=vr,this.p=pn.transpose(),this.w=Ar.transpose(),this.q=Ur,this.u=hr,this.s=vr.transpose().mmul(vr),this.xResidual=Jr,this.yResidual=mr,this.betas=on}else this.w=Ar.transpose(),this.s=vr.transpose().mmul(vr).sqrt(),At?this.t=vr.clone().div(this.s.get(0,0)):this.t=vr,this.xResidual=Tt.sub(vr.mmul(Ar.transpose()))}}return matrix$1.AbstractMatrix=Zt,matrix$1.CHO=_n,matrix$1.CholeskyDecomposition=_n,matrix$1.DistanceMatrix=Jt,matrix$1.EVD=cr,matrix$1.EigenvalueDecomposition=cr,matrix$1.LU=Nr,matrix$1.LuDecomposition=Nr,matrix$1.Matrix=Lt,matrix$1.MatrixColumnSelectionView=yr,matrix$1.MatrixColumnView=ur,matrix$1.MatrixFlipColumnView=Qt,matrix$1.MatrixFlipRowView=nr,matrix$1.MatrixRowSelectionView=Wt,matrix$1.MatrixRowView=or,matrix$1.MatrixSelectionView=ir,matrix$1.MatrixSubView=br,matrix$1.MatrixTransposeView=Sr,matrix$1.NIPALS=wn,matrix$1.Nipals=wn,matrix$1.QR=qr,matrix$1.QrDecomposition=qr,matrix$1.SVD=Pr,matrix$1.SingularValueDecomposition=Pr,matrix$1.SymmetricMatrix=Vt,matrix$1.WrapperMatrix1D=_r,matrix$1.WrapperMatrix2D=sr,matrix$1.correlation=Kt,matrix$1.covariance=ar,matrix$1.default=Lt,matrix$1.determinant=Gr,matrix$1.inverse=Vr,matrix$1.linearDependencies=Cr,matrix$1.pseudoInverse=tr,matrix$1.solve=Xr,matrix$1.wrap=jr,matrix$1}var matrixExports=requireMatrix();const matrix=getDefaultExportFromCjs(matrixExports),Matrix$1=matrixExports.Matrix,SVD=matrixExports.SVD,SingularValueDecomposition=matrixExports.SingularValueDecomposition;matrix.Matrix?matrix.Matrix:matrixExports.Matrix;const inverse=matrixExports.inverse,solve=matrixExports.solve;function getSeparatedKernel(r){const a=new SVD(r,{autoTranspose:!0});if(a.rank!==1)return null;const n=Math.sqrt(a.s[0]),t=a.U.to2DArray().map(u=>u[0]*n),l=a.V.to2DArray().map(u=>u[0]*n);return[t,l]}function convolution(r,a={}){let{channels:n,bitDepth:t,normalize:l=!1,divisor:u=1,border:s="copy",algorithm:p="auto"}=a,d={};t&&(d.bitDepth=t);let h=Image$1.createFrom(this,d);if(n=validateArrayOfChannels(this,n),p!=="separable")({kernel:r}=validateKernel(r));else if(!Array.isArray(r)||r.length!==2)throw new RangeError("separable convolution requires two arrays of numbers to represent the kernel");if(p==="auto"){let tt=getSeparatedKernel(r);tt!==null?(p="separable",r=tt):(r.length>9||r[0].length>9)&&this.width<=4096&&this.height<=4096?p="fft":p="direct"}let N,Be;p==="separable"?(N=Math.floor(r[0].length/2),Be=Math.floor(r[1].length/2)):(N=Math.floor(r.length/2),Be=Math.floor(r[0].length/2));let b=h.isClamped,E=new Array(this.height*this.width),de,pe,Ye,me,Le,nt;for(me=0;me<n.length;me++){for(Le=n[me],Ye=0;Ye<this.height;Ye++)for(pe=0;pe<this.width;pe++)de=Ye*this.width+pe,E[de]=this.data[de*this.channels+Le];if(p==="direct")nt=srcExports$1.direct(E,r,{rows:this.height,cols:this.width,normalize:l,divisor:u});else if(p==="separable"){if(nt=convolutionSeparable(E,r,this.width,this.height),l){u=0;for(let tt=0;tt<r[0].length;tt++)for(let ft=0;ft<r[1].length;ft++)u+=r[0][tt]*r[1][ft]}if(u!==1)for(let tt=0;tt<nt.length;tt++)nt[tt]/=u}else nt=srcExports$1.fft(E,r,{rows:this.height,cols:this.width,normalize:l,divisor:u});for(Ye=0;Ye<this.height;Ye++)for(pe=0;pe<this.width;pe++)de=Ye*this.width+pe,b?h.data[de*this.channels+Le]=clamp(nt[de],h):h.data[de*this.channels+Le]=nt[de]}if(this.alpha&&!n.includes(this.channels))for(pe=this.components;pe<this.data.length;pe=pe+this.channels)h.data[pe]=this.data[pe];return s!=="periodic"&&h.setBorder({size:[Be,N],algorithm:s}),h}function gradientFilter(r={}){let{direction:a="xy",border:n="copy",kernelX:t,kernelY:l,channels:u,bitDepth:s=this.bitDepth}=r;switch(this.checkProcessable("gradientFilter",{bitDepth:[8,16]}),a){case"x":if(!t)throw new Error("kernelX option is missing");return convolution.call(this,t,{channels:u,border:n,bitDepth:s});case"y":if(!l)throw new Error("kernelY option is missing");return convolution.call(this,l,{channels:u,border:n,bitDepth:s});case"xy":{if(!t)throw new Error("kernelX option is missing");if(!l)throw new Error("kernelY option is missing");const p=convolution.call(this,t,{channels:u,border:n,bitDepth:32}),d=convolution.call(this,l,{channels:u,border:n,bitDepth:32});return p.hypotenuse(d,{bitDepth:s,channels:u})}default:throw new Error(`Unknown parameter direction: ${a}`)}}function sobelFilter(r){return gradientFilter.call(this,Object.assign({},r,{kernelX:SOBEL_X,kernelY:SOBEL_Y}))}function scharrFilter(r){return gradientFilter.call(this,Object.assign({},r,{kernelX:SCHARR_X,kernelY:SCHARR_Y}))}var newArray_1,hasRequiredNewArray;function requireNewArray(){if(hasRequiredNewArray)return newArray_1;hasRequiredNewArray=1,newArray_1=r;function r(a,n){a=a||0;for(var t=new Array(a),l=0;l<a;l++)t[l]=n;return t}return newArray_1}var newArrayExports=requireNewArray();const newArray=getDefaultExportFromCjs(newArrayExports);function level(r={}){let{algorithm:a="range",channels:n,min:t=this.min,max:l=this.max}=r;switch(this.checkProcessable("level",{bitDepth:[8,16,32]}),n=validateArrayOfChannels(this,{channels:n}),n.length!==this.channel&&(Array.isArray(t)&&t.length===this.channels&&(t=t.filter((u,s)=>n.includes(s))),Array.isArray(l)&&l.length===this.channels&&(l=l.filter((u,s)=>n.includes(s)))),a){case"range":t<0&&(t=0),l>this.maxValue&&(l=this.maxValue),Array.isArray(t)||(t=newArray(n.length,t)),Array.isArray(l)||(l=newArray(n.length,l)),processImage(this,t,l,n);break;default:throw new Error(`level: algorithm not implement: ${a}`)}return this}function processImage(r,a,n,t){let l=1e-5,u=new Array(t.length);for(let s=0;s<t.length;s++)a[s]===0&&n[s]===r.maxValue||n[s]===a[s]?u[s]=0:u[s]=(r.maxValue+1-l)/(n[s]-a[s]),a[s]+=(.5-l/2)/u[s];for(let s=0;s<t.length;s++){let p=t[s];if(u[s]!==0)for(let d=0;d<r.data.length;d+=r.channels)r.data[d+p]=Math.min(Math.max(0,(r.data[d+p]-a[s])*u[s]+.5|0),r.maxValue)}}var isArrayType,hasRequiredIsArrayType;function requireIsArrayType(){if(hasRequiredIsArrayType)return isArrayType;hasRequiredIsArrayType=1;var r=Object.prototype.toString;return isArrayType=function(n){return r.call(n).substr(-6,5)==="Array"},isArrayType}var isArrayTypeExports=requireIsArrayType();const isArray=getDefaultExportFromCjs(isArrayTypeExports);function checkNumberArray(r){if(isNaN(r)){if(r instanceof Image$1)return r.data;if(!isArray(r))throw new Error("checkNumberArray: the value should be either a number, array or Image");return r}else{if(r<=0)throw new Error("checkNumberArray: the value must be greater than 0");return r}}function add(r,a={}){let{channels:n}=a;if(this.checkProcessable("add",{bitDepth:[8,16]}),n=validateArrayOfChannels(this,{channels:n}),r=checkNumberArray(r),isNaN(r)){if(this.data.length!==r.length)throw new Error("add: the data size is different");for(let t=0;t<n.length;t++){let l=n[t];for(let u=0;u<this.data.length;u+=this.channels)this.data[u+l]=Math.max(0,Math.min(this.maxValue,this.data[u+l]+r[u+l]>>0))}}else for(let t=0;t<n.length;t++){let l=n[t];for(let u=0;u<this.data.length;u+=this.channels)this.data[u+l]=Math.min(this.maxValue,this.data[u+l]+r>>0)}return this}function subtract(r,a={}){let{channels:n}=a;if(this.checkProcessable("subtract",{bitDepth:[8,16]}),n=validateArrayOfChannels(this,{channels:n}),r=checkNumberArray(r),isNaN(r)){if(this.data.length!==r.length)throw new Error("subtract: the data size is different");for(let t=0;t<n.length;t++){let l=n[t];for(let u=0;u<this.data.length;u+=this.channels)this.data[u+l]=Math.max(0,Math.min(this.maxValue,this.data[u+l]-r[u+l]>>0))}}else for(let t=0;t<n.length;t++){let l=n[t];for(let u=0;u<this.data.length;u+=this.channels)this.data[u+l]=Math.max(0,this.data[u+l]-r>>0)}return this}function subtractImage(r,a={}){let{channels:n,absolute:t=!1}=a;if(this.checkProcessable("subtractImage",{bitDepth:[8,16]}),this.width!==r.width||this.height!==r.height)throw new Error("subtractImage: both images must have the same size");if(this.alpha!==r.alpha||this.bitDepth!==r.bitDepth)throw new Error("subtractImage: both images must have the same alpha and bitDepth");if(this.channels!==r.channels)throw new Error("subtractImage: both images must have the same number of channels");let l=this.clone();n=validateArrayOfChannels(this,{channels:n});for(let u=0;u<n.length;u++){let s=n[u];for(let p=s;p<this.data.length;p+=this.channels){let d=this.data[p]-r.data[p];t?l.data[p]=Math.abs(d):l.data[p]=Math.max(d,0)}}return l}function hypotenuse(r,a={}){let{bitDepth:n=this.bitDepth,channels:t}=a;if(this.checkProcessable("hypotenuse",{bitDepth:[8,16,32]}),this.width!==r.width||this.height!==r.height)throw new Error("hypotenuse: both images must have the same size");if(this.alpha!==r.alpha||this.bitDepth!==r.bitDepth)throw new Error("hypotenuse: both images must have the same alpha and bitDepth");if(this.channels!==r.channels)throw new Error("hypotenuse: both images must have the same number of channels");let l=Image$1.createFrom(this,{bitDepth:n});t=validateArrayOfChannels(this,{channels:t});let u=l.isClamped;for(let s=0;s<t.length;s++){let p=t[s];for(let d=p;d<this.data.length;d+=this.channels){let h=Math.hypot(this.data[d],r.data[d]);u?l.data[d]=Math.min(Math.max(Math.round(h),0),l.maxValue):l.data[d]=h}}return l}function multiply(r,a={}){let{channels:n}=a;if(this.checkProcessable("multiply",{bitDepth:[8,16]}),r<=0)throw new Error("multiply: the value must be greater than 0");if(n=validateArrayOfChannels(this,{channels:n}),r=checkNumberArray(r),isNaN(r)){if(this.data.length!==r.length)throw new Error("multiply: the data size is different");for(let t=0;t<n.length;t++){let l=n[t];for(let u=0;u<this.data.length;u+=this.channels)this.data[u+l]=Math.max(0,Math.min(this.maxValue,this.data[u+l]*r[u+l]>>0))}}else for(let t=0;t<n.length;t++){let l=n[t];for(let u=0;u<this.data.length;u+=this.channels)this.data[u+l]=Math.min(this.maxValue,this.data[u+l]*r>>0)}return this}function divide(r,a={}){let{channels:n}=a;if(this.checkProcessable("divide",{bitDepth:[8,16]}),n=validateArrayOfChannels(this,{channels:n}),r=checkNumberArray(r),isNaN(r)){if(this.data.length!==r.length)throw new Error("divide: the: the data size is different");for(let t=0;t<n.length;t++){let l=n[t];for(let u=0;u<this.data.length;u+=this.channels)this.data[u+l]=Math.max(0,Math.min(this.maxValue,this.data[u+l]/r[u+l]>>0))}}else for(let t=0;t<n.length;t++){let l=n[t];for(let u=0;u<this.data.length;u+=this.channels)this.data[u+l]=Math.min(this.maxValue,this.data[u+l]/r>>0)}return this}class BaseRegression{constructor(){if(new.target===BaseRegression)throw new Error("BaseRegression must be subclassed")}predict(a){if(typeof a=="number")return this._predict(a);if(isAnyArray(a)){const n=[];for(let t=0;t<a.length;t++)n.push(this._predict(a[t]));return n}else throw new TypeError("x must be a number or array")}_predict(){throw new Error("_predict must be implemented")}train(){}toString(){return""}toLaTeX(){return""}score(a,n){if(!isAnyArray(a)||!isAnyArray(n)||a.length!==n.length)throw new Error("x and y must be arrays of the same length");const t=a.length,l=new Array(t);for(let E=0;E<t;E++)l[E]=this._predict(a[E]);let u=0,s=0,p=0,d=0,h=0,N=0,Be=0;for(let E=0;E<t;E++)u+=l[E],s+=n[E],h+=l[E]*l[E],N+=n[E]*n[E],Be+=l[E]*n[E],n[E]!==0&&(p+=(n[E]-l[E])*(n[E]-l[E])/n[E]),d+=(n[E]-l[E])*(n[E]-l[E]);const b=(t*Be-u*s)/Math.sqrt((t*h-u*u)*(t*N-s*s));return{r:b,r2:b*b,chi2:p,rmsd:Math.sqrt(d/t)}}}function squaredEuclidean(r,a){let n=0;for(let t=0;t<r.length;t++)n+=(r[t]-a[t])*(r[t]-a[t]);return n}function euclidean(r,a){return Math.sqrt(squaredEuclidean(r,a))}const euclidean$1=Object.freeze(Object.defineProperty({__proto__:null,euclidean,squaredEuclidean},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(euclidean$1);var gaussianKernel,hasRequiredGaussianKernel;function requireGaussianKernel(){if(hasRequiredGaussianKernel)return gaussianKernel;hasRequiredGaussianKernel=1;const{squaredEuclidean:r}=require$$0,a={sigma:1};class n{constructor(l){l=Object.assign({},a,l),this.sigma=l.sigma,this.divisor=2*l.sigma*l.sigma}compute(l,u){const s=r(l,u);return Math.exp(-s/this.divisor)}}return gaussianKernel=n,gaussianKernel}var polynomialKernel,hasRequiredPolynomialKernel;function requirePolynomialKernel(){if(hasRequiredPolynomialKernel)return polynomialKernel;hasRequiredPolynomialKernel=1;const r={degree:1,constant:1,scale:1};class a{constructor(t){t=Object.assign({},r,t),this.degree=t.degree,this.constant=t.constant,this.scale=t.scale}compute(t,l){for(var u=0,s=0;s<t.length;s++)u+=t[s]*l[s];return Math.pow(this.scale*u+this.constant,this.degree)}}return polynomialKernel=a,polynomialKernel}var sigmoidKernel,hasRequiredSigmoidKernel;function requireSigmoidKernel(){if(hasRequiredSigmoidKernel)return sigmoidKernel;hasRequiredSigmoidKernel=1;const r={alpha:.01,constant:-Math.E};class a{constructor(t){t=Object.assign({},r,t),this.alpha=t.alpha,this.constant=t.constant}compute(t,l){for(var u=0,s=0;s<t.length;s++)u+=t[s]*l[s];return Math.tanh(this.alpha*u+this.constant)}}return sigmoidKernel=a,sigmoidKernel}var anovaKernel,hasRequiredAnovaKernel;function requireAnovaKernel(){if(hasRequiredAnovaKernel)return anovaKernel;hasRequiredAnovaKernel=1;const r={sigma:1,degree:1};class a{constructor(t){t=Object.assign({},r,t),this.sigma=t.sigma,this.degree=t.degree}compute(t,l){for(var u=0,s=Math.min(t.length,l.length),p=1;p<=s;++p)u+=Math.pow(Math.exp(-this.sigma*Math.pow(Math.pow(t[p-1],p)-Math.pow(l[p-1],p),2)),this.degree);return u}}return anovaKernel=a,anovaKernel}var cauchyKernel,hasRequiredCauchyKernel;function requireCauchyKernel(){if(hasRequiredCauchyKernel)return cauchyKernel;hasRequiredCauchyKernel=1;const{squaredEuclidean:r}=require$$0,a={sigma:1};class n{constructor(l){l=Object.assign({},a,l),this.sigma=l.sigma}compute(l,u){return 1/(1+r(l,u)/(this.sigma*this.sigma))}}return cauchyKernel=n,cauchyKernel}var exponentialKernel,hasRequiredExponentialKernel;function requireExponentialKernel(){if(hasRequiredExponentialKernel)return exponentialKernel;hasRequiredExponentialKernel=1;const{euclidean:r}=require$$0,a={sigma:1};class n{constructor(l){l=Object.assign({},a,l),this.sigma=l.sigma,this.divisor=2*l.sigma*l.sigma}compute(l,u){const s=r(l,u);return Math.exp(-s/this.divisor)}}return exponentialKernel=n,exponentialKernel}var histogramIntersectionKernel,hasRequiredHistogramIntersectionKernel;function requireHistogramIntersectionKernel(){if(hasRequiredHistogramIntersectionKernel)return histogramIntersectionKernel;hasRequiredHistogramIntersectionKernel=1;class r{compute(n,t){for(var l=Math.min(n.length,t.length),u=0,s=0;s<l;++s)u+=Math.min(n[s],t[s]);return u}}return histogramIntersectionKernel=r,histogramIntersectionKernel}var laplacianKernel,hasRequiredLaplacianKernel;function requireLaplacianKernel(){if(hasRequiredLaplacianKernel)return laplacianKernel;hasRequiredLaplacianKernel=1;const{euclidean:r}=require$$0,a={sigma:1};class n{constructor(l){l=Object.assign({},a,l),this.sigma=l.sigma}compute(l,u){const s=r(l,u);return Math.exp(-s/this.sigma)}}return laplacianKernel=n,laplacianKernel}var multiquadraticKernel,hasRequiredMultiquadraticKernel;function requireMultiquadraticKernel(){if(hasRequiredMultiquadraticKernel)return multiquadraticKernel;hasRequiredMultiquadraticKernel=1;const{squaredEuclidean:r}=require$$0,a={constant:1};class n{constructor(l){l=Object.assign({},a,l),this.constant=l.constant}compute(l,u){return Math.sqrt(r(l,u)+this.constant*this.constant)}}return multiquadraticKernel=n,multiquadraticKernel}var rationalQuadraticKernel,hasRequiredRationalQuadraticKernel;function requireRationalQuadraticKernel(){if(hasRequiredRationalQuadraticKernel)return rationalQuadraticKernel;hasRequiredRationalQuadraticKernel=1;const{squaredEuclidean:r}=require$$0,a={constant:1};class n{constructor(l){l=Object.assign({},a,l),this.constant=l.constant}compute(l,u){const s=r(l,u);return 1-s/(s+this.constant)}}return rationalQuadraticKernel=n,rationalQuadraticKernel}var kernel,hasRequiredKernel;function requireKernel(){if(hasRequiredKernel)return kernel;hasRequiredKernel=1;const{Matrix:r,MatrixTransposeView:a}=requireMatrix(),n=requireGaussianKernel(),t=requirePolynomialKernel(),l=requireSigmoidKernel(),u=requireAnovaKernel(),s=requireCauchyKernel(),p=requireExponentialKernel(),d=requireHistogramIntersectionKernel(),h=requireLaplacianKernel(),N=requireMultiquadraticKernel(),Be=requireRationalQuadraticKernel(),b={gaussian:n,rbf:n,polynomial:t,poly:t,anova:u,cauchy:s,exponential:p,histogram:d,min:d,laplacian:h,multiquadratic:N,rational:Be,sigmoid:l,mlp:l};class E{constructor(pe,Ye){if(this.kernelType=pe,pe!=="linear")if(typeof pe=="string"){pe=pe.toLowerCase();var me=b[pe];if(me)this.kernelFunction=new me(Ye);else throw new Error(`unsupported kernel type: ${pe}`)}else if(typeof pe=="object"&&typeof pe.compute=="function")this.kernelFunction=pe;else throw new TypeError("first argument must be a valid kernel type or instance")}compute(pe,Ye){if(pe=r.checkMatrix(pe),Ye===void 0?Ye=pe:Ye=r.checkMatrix(Ye),this.kernelType==="linear")return pe.mmul(new a(Ye));const me=new r(pe.rows,Ye.rows);if(pe===Ye)for(let Le=0;Le<pe.rows;Le++)for(let nt=Le;nt<pe.rows;nt++){const tt=this.kernelFunction.compute(pe.getRow(Le),pe.getRow(nt));me.set(Le,nt,tt),me.set(nt,Le,tt)}else for(let Le=0;Le<pe.rows;Le++)for(let nt=0;nt<Ye.rows;nt++)me.set(Le,nt,this.kernelFunction.compute(pe.getRow(Le),Ye.getRow(nt)));return me}}return kernel=E,kernel}var kernelExports=requireKernel();const Kernel=getDefaultExportFromCjs(kernelExports),defaultOptions$2={lambda:.1,kernelType:"gaussian",kernelOptions:{},computeCoefficient:!1};class KernelRidgeRegression extends BaseRegression{constructor(a,n,t){if(super(),a===!0)this.alpha=n.alpha,this.inputs=n.inputs,this.kernelType=n.kernelType,this.kernelOptions=n.kernelOptions,this.kernel=new Kernel(n.kernelType,n.kernelOptions);else{a=Matrix$1.checkMatrix(a),t=Object.assign({},defaultOptions$2,t);const l=new Kernel(t.kernelType,t.kernelOptions),u=l.compute(a),s=a.rows;u.add(Matrix$1.eye(s,s).mul(t.lambda)),this.alpha=solve(u,n),this.inputs=a,this.kernelType=t.kernelType,this.kernelOptions=t.kernelOptions,this.kernel=l}}_predict(a){return this.kernel.compute([a],this.inputs).mmul(this.alpha).getRow(0)}toJSON(){return{name:"kernelRidgeRegression",alpha:this.alpha,inputs:this.inputs,kernelType:this.kernelType,kernelOptions:this.kernelOptions}}static load(a){if(a.name!=="kernelRidgeRegression")throw new TypeError("not a KRR model");return new KernelRidgeRegression(!0,a)}}function background$1(r,a,n){const t=new KernelRidgeRegression(r,a,n),l=new Array(this.size);for(let p=0;p<this.width;p++)for(let d=0;d<this.height;d++)l[d*this.width+p]=[p,d];const u=t.predict(l),s=Image$1.createFrom(this);for(let p=0;p<this.size;p++)s.data[p]=Math.min(this.maxValue,Math.max(0,u[p][0]));return s}function dilate(r={}){let{kernel:a=[[1,1,1],[1,1,1],[1,1,1]],iterations:n=1}=r;if(this.checkProcessable("dilate",{bitDepth:[1,8,16],components:1,alpha:0}),a.columns%2===0||a.rows%2===0)throw new TypeError("dilate: The number of rows and columns of the kernel must be odd");let t=!0;e:for(const u of a)for(const s of u)if(s!==1){t=!1;break e}let l=this;for(let u=0;u<n;u++)if(this.bitDepth===1)if(t){const s=l.clone();l=dilateOnceBinaryOnlyOnes(l,s,a.length,a[0].length)}else{const s=Image$1.createFrom(l);l=dilateOnceBinary(l,s,a)}else if(t){const s=Image$1.createFrom(l);l=dilateOnceGreyOnlyOnes(l,s,a.length,a[0].length)}else{const s=Image$1.createFrom(l);l=dilateOnceGrey(l,s,a)}return l}function dilateOnceGrey(r,a,n){const t=n.length,l=n[0].length;let u=(t-1)/2,s=(l-1)/2;for(let p=0;p<r.height;p++)for(let d=0;d<r.width;d++){let h=0;for(let N=0;N<l;N++)for(let Be=0;Be<t;Be++){if(n[Be][N]!==1)continue;let b=Be-u+d,E=N-s+p;if(b<0||E<0||b>=r.width||E>=r.height)continue;const de=r.getValueXY(b,E,0);de>h&&(h=de)}a.setValueXY(d,p,0,h)}return a}function dilateOnceGreyOnlyOnes(r,a,n,t){const l=(n-1)/2,u=(t-1)/2,s=[];for(let p=0;p<r.width;p++)s.push(0);for(let p=0;p<r.height;p++){for(let d=0;d<r.width;d++){let h=0;for(let N=Math.max(0,p-u);N<Math.min(r.height,p+u+1);N++){const Be=r.getValueXY(d,N,0);Be>h&&(h=Be)}s[d]=h}for(let d=0;d<r.width;d++){let h=0;for(let N=Math.max(0,d-l);N<Math.min(r.width,d+l+1);N++)s[N]>h&&(h=s[N]);a.setValueXY(d,p,0,h)}}return a}function dilateOnceBinary(r,a,n){const t=n.length,l=n[0].length;let u=(t-1)/2,s=(l-1)/2;for(let p=0;p<r.height;p++)for(let d=0;d<r.width;d++){let h=0;e:for(let N=0;N<l;N++)for(let Be=0;Be<t;Be++){if(n[Be][N]!==1)continue;let b=Be-u+d,E=N-s+p;if(E<0||b<0||b>=r.width||E>=r.height)continue;if(r.getBitXY(b,E)===1){h=1;break e}}h===1&&a.setBitXY(d,p)}return a}function dilateOnceBinaryOnlyOnes(r,a,n,t){const l=(n-1)/2,u=(t-1)/2,s=[];for(let p=0;p<r.width;p++)s.push(1);for(let p=0;p<r.height;p++){for(let d=0;d<r.width;d++){s[d]=0;for(let h=Math.max(0,p-u);h<Math.min(r.height,p+u+1);h++)if(r.getBitXY(d,h)===1){s[d]=1;break}}for(let d=0;d<r.width;d++)if(a.getBitXY(d,p)!==1){for(let h=Math.max(0,d-l);h<Math.min(r.width,d+l+1);h++)if(s[h]===1){a.setBitXY(d,p);break}}}return a}function erode(r={}){let{kernel:a=[[1,1,1],[1,1,1],[1,1,1]],iterations:n=1}=r;if(this.checkProcessable("erode",{bitDepth:[1,8,16],components:1,alpha:0}),a.columns%2===0||a.rows%2===0)throw new TypeError("erode: The number of rows and columns of the kernel must be odd");let t=!0;e:for(const u of a)for(const s of u)if(s!==1){t=!1;break e}let l=this;for(let u=0;u<n;u++)if(this.bitDepth===1)if(t){const s=l.clone();l=erodeOnceBinaryOnlyOnes(l,s,a.length,a[0].length)}else{const s=Image$1.createFrom(l);l=erodeOnceBinary(l,s,a)}else if(t){const s=Image$1.createFrom(l);l=erodeOnceGreyOnlyOnes(l,s,a.length,a[0].length)}else{const s=Image$1.createFrom(l);l=erodeOnceGrey(l,s,a)}return l}function erodeOnceGrey(r,a,n){const t=n.length,l=n[0].length;let u=(t-1)/2,s=(l-1)/2;for(let p=0;p<r.height;p++)for(let d=0;d<r.width;d++){let h=r.maxValue;for(let N=0;N<l;N++)for(let Be=0;Be<t;Be++){if(n[Be][N]!==1)continue;let b=Be-u+d,E=N-s+p;if(b<0||E<0||b>=r.width||E>=r.height)continue;const de=r.getValueXY(b,E,0);de<h&&(h=de)}a.setValueXY(d,p,0,h)}return a}function erodeOnceGreyOnlyOnes(r,a,n,t){const l=(n-1)/2,u=(t-1)/2,s=[];for(let p=0;p<r.width;p++)s.push(0);for(let p=0;p<r.height;p++){for(let d=0;d<r.width;d++){let h=r.maxValue;for(let N=Math.max(0,p-u);N<Math.min(r.height,p+u+1);N++){const Be=r.getValueXY(d,N,0);Be<h&&(h=Be)}s[d]=h}for(let d=0;d<r.width;d++){let h=r.maxValue;for(let N=Math.max(0,d-l);N<Math.min(r.width,d+l+1);N++)s[N]<h&&(h=s[N]);a.setValueXY(d,p,0,h)}}return a}function erodeOnceBinary(r,a,n){const t=n.length,l=n[0].length;let u=(t-1)/2,s=(l-1)/2;for(let p=0;p<r.height;p++)for(let d=0;d<r.width;d++){let h=1;e:for(let N=0;N<l;N++)for(let Be=0;Be<t;Be++){if(n[Be][N]!==1)continue;let b=Be-u+d,E=N-s+p;if(E<0||b<0||b>=r.width||E>=r.height)continue;if(r.getBitXY(b,E)===0){h=0;break e}}h===1&&a.setBitXY(d,p)}return a}function erodeOnceBinaryOnlyOnes(r,a,n,t){const l=(n-1)/2,u=(t-1)/2,s=[];for(let p=0;p<r.width;p++)s.push(0);for(let p=0;p<r.height;p++){for(let d=0;d<r.width;d++){s[d]=1;for(let h=Math.max(0,p-u);h<Math.min(r.height,p+u+1);h++)if(r.getBitXY(d,h)===0){s[d]=0;break}}for(let d=0;d<r.width;d++)if(a.getBitXY(d,p)!==0){for(let h=Math.max(0,d-l);h<Math.min(r.width,d+l+1);h++)if(s[h]===0){a.clearBitXY(d,p);break}}}return a}function open(r={}){let{kernel:a=[[1,1,1],[1,1,1],[1,1,1]],iterations:n=1}=r;if(this.checkProcessable("open",{bitDepth:[8,16],components:1,alpha:0}),a.columns%2===0||a.rows%2===0)throw new TypeError("open: The number of rows and columns of the kernel must be odd");let t=this;for(let l=0;l<n;l++)t=t.erode({kernel:a}),t=t.dilate({kernel:a});return t}function close(r={}){let{kernel:a=[[1,1,1],[1,1,1],[1,1,1]],iterations:n=1}=r;if(this.checkProcessable("close",{bitDepth:[1,8,16],components:1,alpha:0}),a.columns%2===0||a.rows%2===0)throw new TypeError("close: The number of rows and columns of the kernel must be odd");let t=this;for(let l=0;l<n;l++)t=t.dilate({kernel:a}).erode({kernel:a});return t}function topHat(r={}){let{kernel:a=[[1,1,1],[1,1,1],[1,1,1]],iterations:n=1}=r;if(this.checkProcessable("topHat",{bitDepth:[8,16],components:1,alpha:0}),a.length%2===0||a[0].length%2===0)throw new TypeError("topHat: The number of rows and columns of the kernel must be odd");let t=this;for(let l=0;l<n;l++)t=t.open({kernel:a}).subtractImage(t,{absolute:!0});return t}function blackHat(r={}){let{kernel:a=[[1,1,1],[1,1,1],[1,1,1]],iterations:n=1}=r;if(this.checkProcessable("blackHat",{bitDepth:[8,16],components:1,alpha:0}),a.columns%2===0||a.rows%2===0)throw new TypeError("blackHat: The number of rows and columns of the kernel must be odd");let t=this;for(let l=0;l<n;l++)t=t.close({kernel:a}).subtractImage(t,{absolute:!0});return t}function morphologicalGradient(r={}){let{kernel:a=[[1,1,1],[1,1,1],[1,1,1]],iterations:n=1}=r;if(this.checkProcessable("morphologicalGradient",{bitDepth:[8,16],components:1,alpha:0}),a.columns%2===0||a.rows%2===0)throw new TypeError("morphologicalGradient: The number of rows and columns of the kernel must be odd");let t=this;for(let l=0;l<n;l++){let u=t.dilate({kernel:a}),s=t.erode({kernel:a});t=u.subtractImage(s,{absolute:!0})}return t}function order4Points(r){let a=0,n=0,t=0,l=0,u=r[0][0],s=0;for(let h=1;h<r.length;h++)r[h][0]<u&&(u=r[h][0],s=h);let p=r[(s+1)%r.length][0],d=(s+1)%r.length;for(let h=1;h<r.length;h++)r[h][0]<p&&h!==s&&(p=r[h][0],d=h);return r[d][1]<r[s][1]?(a=r[d],l=r[s],s!==(d+1)%4?(n=r[(d+1)%4],t=r[(d+2)%4]):(n=r[(d+2)%4],t=r[(d+3)%4])):(l=r[d],a=r[s],d!==(s+1)%4?(n=r[(s+1)%4],t=r[(s+2)%4]):(n=r[(s+2)%4],t=r[(s+3)%4])),[a,n,t,l]}function distance2Points(r,a){return Math.sqrt(Math.pow(r[0]-a[0],2)+Math.pow(r[1]-a[1],2))}function crossVect(r,a){return[r[1]*a[2]-r[2]*a[1],r[2]*a[0]-r[0]*a[2],r[0]*a[1]-r[1]*a[0]]}function dotVect(r,a){return r[0]*a[0]+r[1]*a[1]+r[2]*a[2]}function computeWidthAndHeigth(r,a,n,t,l,u){let s=Math.max(distance2Points(r,a),distance2Points(t,n)),p=Math.max(distance2Points(r,t),distance2Points(a,n)),d=0,h=0,N=Math.ceil(l/2),Be=Math.ceil(u/2),b=s/p,E=[r[0],r[1],1],de=[a[0],a[1],1],pe=[t[0],t[1],1],Ye=[n[0],n[1],1],me=dotVect(crossVect(E,Ye),pe)/dotVect(crossVect(de,Ye),pe),Le=dotVect(crossVect(E,Ye),de)/dotVect(crossVect(pe,Ye),de),nt=[me*de[0]-E[0],me*de[1]-E[1],me*de[2]-E[2]],tt=[Le*pe[0]-E[0],Le*pe[1]-E[1],Le*pe[2]-E[2]],ft=nt[0],yt=nt[1],gt=nt[2],mt=tt[0],wt=tt[1],St=tt[2],bt=1/(gt*St)*(ft*mt-(ft*St+gt*mt)*N+gt*St*N*N+(yt*wt-(yt*St+gt*wt)*Be+gt*St*Be*Be));bt>=0?bt=Math.sqrt(bt):bt=Math.sqrt(-bt);let Ct=new Matrix$1([[bt,0,N],[0,bt,Be],[0,0,1]]),Et=Ct.transpose(),It=inverse(Et),Dt=inverse(Ct),Pt=Matrix$1.rowVector(nt),qt=Matrix$1.rowVector(tt),Ht=Math.sqrt(dotVect(Pt.mmul(It).mmul(Dt).to1DArray(),nt)/dotVect(qt.mmul(It).mmul(Dt).to1DArray(),tt));return Ht===0||b===0?(d=Math.ceil(s),h=Math.ceil(p)):Ht<b?(d=Math.ceil(s),h=Math.ceil(d/Ht)):(h=Math.ceil(p),d=Math.ceil(Ht*h)),[d,h]}function projectionPoint(r,a,n,t,l,u,s,p,d,h,N,Be){let[b,E]=[(n*r+t*a+l)/(d*r+h*a+1),(u*r+s*a+p)/(d*r+h*a+1)];return N.getValueXY(Math.floor(b),Math.floor(E),Be)}function warpingFourPoints(r,a={}){let{calculateRatio:n=!0}=a;if(r.length!==4)throw new Error(`The array pts must have four elements, which are the four corners. Currently, pts have ${r.length} elements`);let[t,l,u,s]=r,p=[t,l,u,s],[d,h,N,Be]=order4Points(p),b,E;n?[b,E]=computeWidthAndHeigth(d,h,N,Be,this.width,this.height):(b=Math.ceil(Math.max(distance2Points(d,h),distance2Points(Be,N))),E=Math.ceil(Math.max(distance2Points(d,Be),distance2Points(h,N))));let de=Image$1.createFrom(this,{width:b,height:E}),[pe,Ye]=d,[me,Le]=h,[nt,tt]=N,[ft,yt]=Be,[gt,mt]=[0,0],[wt,St]=[0,b-1],[bt,Ct]=[E-1,b-1],[Et,It]=[E-1,0],Dt=new Matrix$1([[gt,mt,1,0,0,0,-gt*pe,-mt*pe],[wt,St,1,0,0,0,-wt*me,-St*me],[bt,Ct,1,0,0,0,-bt*nt,-mt*nt],[Et,It,1,0,0,0,-Et*ft,-It*ft],[0,0,0,gt,mt,1,-gt*Ye,-mt*Ye],[0,0,0,wt,St,1,-wt*Le,-St*Le],[0,0,0,bt,Ct,1,-bt*tt,-Ct*tt],[0,0,0,Et,It,1,-Et*yt,-It*yt]]),Pt=Matrix$1.columnVector([pe,me,nt,ft,Ye,Le,tt,yt]),Ht=new SingularValueDecomposition(Dt).solve(Pt),[Gt,Ut,Yt,Zt,vt,Rt,Lt,Vt]=Ht.to1DArray(),Jt=new Matrix$1(E,b);for(let er=0;er<this.channels;er++){for(let ur=0;ur<E;ur++)for(let yr=0;yr<b;yr++)Jt.set(ur,yr,projectionPoint(ur,yr,Gt,Ut,Yt,Zt,vt,Rt,Lt,Vt,this,er));de.setMatrix(Jt,{channel:er})}return de}function crop(r={}){let{x:a=0,y:n=0,width:t=this.width-a,height:l=this.height-n}=r;if(this.checkProcessable("crop",{bitDepth:[1,8,16]}),a=Math.round(a),n=Math.round(n),t=Math.round(t),l=Math.round(l),a>this.width-1||n>this.height-1)throw new RangeError(`crop: origin (x:${a}, y:${n}) out of range (${this.width-1}; ${this.height-1})`);if(t<=0||l<=0)throw new RangeError(`crop: width and height (width:${t}; height:${l}) must be positive numbers`);if(a<0||n<0)throw new RangeError(`crop: x and y (x:${a}, y:${n}) must be positive numbers`);if(t>this.width-a||l>this.height-n)throw new RangeError(`crop: (x: ${a}, y:${n}, width:${t}, height:${l}) size is out of range`);let u=this;if(this.bitDepth===1){const s=new Image$1(t,l,{kind:"BINARY",parent:this});u=cropBinary(this,s,a,n,t,l)}else{const s=Image$1.createFrom(this,{width:t,height:l,position:[a,n]});u=cropDefault(this,s,a,n,t,l)}return u}function cropDefault(r,a,n,t,l,u){let s=l*r.channels,p=t+u,d=0,h=n*r.channels;for(let N=t;N<p;N++){let Be=N*r.width*r.channels+h,b=Be+s;for(;Be<b;Be++)a.data[d++]=r.data[Be]}return a}function cropBinary(r,a,n,t,l,u){let s=l*r.channels,p=t+u,d=0,h=n*r.channels;for(let N=t;N<p;N++){let Be=N*r.width*r.channels+h,b=Be+s;for(;Be<b;Be++)r.getBit(Be)&&a.setBit(d),++d}return a}function cropAlpha(r={}){this.checkProcessable("cropAlpha",{alpha:1});const{threshold:a=this.maxValue}=r;let n=findLeft(this,a,this.components);if(n===-1)throw new Error("Could not find new dimensions. Threshold may be too high.");let t=findTop(this,a,this.components,n),l=findBottom(this,a,this.components,n),u=findRight(this,a,this.components,n,t,l);return this.crop({x:n,y:t,width:u-n+1,height:l-t+1})}function findLeft(r,a,n){for(let t=0;t<r.width;t++)for(let l=0;l<r.height;l++)if(r.getValueXY(t,l,n)>=a)return t;return-1}function findTop(r,a,n,t){for(let l=0;l<r.height;l++)for(let u=t;u<r.width;u++)if(r.getValueXY(u,l,n)>=a)return l;return-1}function findBottom(r,a,n,t){for(let l=r.height-1;l>=0;l--)for(let u=t;u<r.width;u++)if(r.getValueXY(u,l,n)>=a)return l;return-1}function findRight(r,a,n,t,l,u){for(let s=r.width-1;s>=t;s--)for(let p=l;p<=u;p++)if(r.getValueXY(s,p,n)>=a)return s;return-1}function getFactor(r){if(typeof r=="string"){const a=r[r.length-1];r=parseFloat(r),a==="%"&&(r/=100)}return r}function getThreshold$1(r,a){if(!a)throw Error("getThreshold : the maxValue should be specified");if(typeof r=="string"){if(r[r.length-1]!=="%")throw Error("getThreshold : if the value is a string it must finish by %");return parseFloat(r)/100*a}else{if(typeof r=="number")return r<1?r*a:r;throw Error("getThreshold : the value is not valid")}}function factorDimensions(r,a,n){r=getFactor(r);let t=Math.round(r*a),l=Math.round(r*n);return t<=0&&(t=1),l<=0&&(l=1),{width:t,height:l}}function checkRow(r,a){if(a<0||a>=r.height)throw new RangeError(`row must be included between 0 and ${r.height-1}. Current value: ${a}`)}function checkColumn(r,a){if(a<0||a>=r.width)throw new RangeError(`column must be included between 0 and ${r.width-1}. Current value: ${a}`)}function checkChannel(r,a){if(a<0||a>=r.channels)throw new RangeError(`channel must be included between 0 and ${r.channels-1}. Current value: ${a}`)}const validInterpolations={nearestneighbor:"nearestNeighbor",nearestneighbour:"nearestNeighbor",bilinear:"bilinear"};function checkInterpolation(r){if(typeof r!="string")throw new TypeError("interpolation must be a string");if(r=r.toLowerCase(),!validInterpolations[r])throw new RangeError(`invalid interpolation algorithm: ${r}`);return validInterpolations[r]}function nearestNeighbor(r,a,n){const t=this.width/a,l=this.height/n;if(this.bitDepth>1)for(let u=0;u<a;u++){const s=Math.floor((u+.5)*t);for(let p=0;p<n;p++){const d=Math.floor((p+.5)*l);for(let h=0;h<this.channels;h++)r.setValueXY(u,p,h,this.getValueXY(s,d,h))}}else for(let u=0;u<a;u++){const s=Math.floor((u+.5)*t);for(let p=0;p<n;p++){const d=Math.floor((p+.5)*l);this.getBitXY(s,d)&&r.setBitXY(u,p)}}}function resize(r={}){const{factor:a=1,interpolation:n=validInterpolations.nearestneighbor,preserveAspectRatio:t=!0}=r,l=checkInterpolation(n);let u=r.width,s=r.height;if(u||(s&&t?u=Math.round(s*(this.width/this.height)):u=this.width),s||(t?s=Math.round(u*(this.height/this.width)):s=this.height),{width:u,height:s}=factorDimensions(a,u,s),u===this.width&&s===this.height){const N=this.clone();return N.position=[0,0],N}let p=Math.round((this.width-u)/2),d=Math.round((this.height-s)/2);const h=Image$1.createFrom(this,{width:u,height:s,position:[p,d]});switch(l){case validInterpolations.nearestneighbor:nearestNeighbor.call(this,h,u,s);break;default:throw new Error(`unsupported resize interpolation: ${l}`)}return h}function hsv(){this.checkProcessable("hsv",{bitDepth:[8,16],alpha:[0,1],colorModel:[RGB$1]});let r=Image$1.createFrom(this,{colorModel:HSV}),a=0,n=this.data;for(let t=0;t<n.length;t+=this.channels){let l=n[t],u=n[t+1],s=n[t+2],p=Math.min(l,u,s),d=Math.max(l,u,s),h=d-p,N=0,Be=d===0?0:h/d,b=d;if(d!==p){switch(d){case l:N=(u-s)/h+(u<s?6:0);break;case u:N=(s-l)/h+2;break;case s:N=(l-u)/h+4;break;default:throw new Error("unreachable")}N/=6}r.data[a++]=N*this.maxValue,r.data[a++]=Be*this.maxValue,r.data[a++]=b,this.alpha&&(r.data[a++]=n[t+3])}return r}function hsl$1(){this.checkProcessable("hsl",{bitDepth:[8,16],alpha:[0,1],colorModel:[RGB$1]});let r=Image$1.createFrom(this,{colorModel:HSL}),a=Math.floor(this.maxValue/2),n=0,t=this.data;for(let l=0;l<t.length;l+=this.channels){let u=t[l],s=t[l+1],p=t[l+2],d=Math.max(u,s,p),h=Math.min(u,s,p),N=0,Be=0,b=(d+h)/2;if(d!==h){let E=d-h;switch(Be=b>a?E/(2-d-h):E/(d+h),d){case u:N=(s-p)/E+(s<p?6:0);break;case s:N=(p-u)/E+2;break;case p:N=(u-s)/E+4;break;default:throw new Error("unreachable")}N/=6}r.data[n++]=N*this.maxValue,r.data[n++]=Be*this.maxValue,r.data[n++]=b,this.alpha&&(r.data[n++]=t[l+3])}return r}function cmyk(){this.checkProcessable("cmyk",{bitDepth:[8,16],alpha:[0,1],colorModel:[RGB$1]});let r=Image$1.createFrom(this,{components:4,colorModel:CMYK$1}),a=0,n=this.data;for(let t=0;t<n.length;t+=this.channels){let l=n[t],u=n[t+1],s=n[t+2],p=Math.min(this.maxValue-l,this.maxValue-u,this.maxValue-s),d=(this.maxValue-l-p)/(1-p/this.maxValue),h=(this.maxValue-u-p)/(1-p/this.maxValue),N=(this.maxValue-s-p)/(1-p/this.maxValue);r.data[a++]=Math.round(d),r.data[a++]=Math.round(h),r.data[a++]=Math.round(N),r.data[a++]=Math.round(p),this.alpha&&(r.data[a++]=n[t+3])}return r}function rgba8(){return new Image$1(this.width,this.height,this.getRGBAData(),{kind:"RGBA",parent:this})}const methods$1={luma709(r,a,n){return r*6966+a*23436+n*2366>>15},luma601(r,a,n){return r*9798+a*19235+n*3735>>15},maximum(r,a,n){return Math.max(r,a,n)},minimum(r,a,n){return Math.min(r,a,n)},average(r,a,n){return(r+a+n)/3>>0},minmax(r,a,n){return(Math.max(r,a,n)+Math.min(r,a,n))/2},red(r){return r},green(r,a){return a},blue(r,a,n){return n},cyan(r,a,n,t){let l=methods$1.black(r,a,n,t);return(t.maxValue-r-l)/(1-l/t.maxValue)>>0},magenta(r,a,n,t){let l=methods$1.black(r,a,n,t);return(t.maxValue-a-l)/(1-l/t.maxValue)>>0},yellow(r,a,n,t){let l=methods$1.black(r,a,n,t);return(t.maxValue-n-l)/(1-l/t.maxValue)>>0},black(r,a,n,t){return Math.min(t.maxValue-r,t.maxValue-a,t.maxValue-n)},hue(r,a,n,t){let l=methods$1.min(r,a,n),u=methods$1.max(r,a,n);if(u===l)return 0;let s=0,p=u-l;switch(u){case r:s=(a-n)/p+(a<n?6:0);break;case a:s=(n-r)/p+2;break;case n:s=(r-a)/p+4;break;default:throw new Error("unreachable")}return s/6*t.maxValue>>0},saturation(r,a,n,t){let l=methods$1.min(r,a,n),u=methods$1.max(r,a,n),s=u-l;return u===0?0:s/u*t.maxValue},lightness(r,a,n){let t=methods$1.min(r,a,n);return(methods$1.max(r,a,n)+t)/2}};Object.defineProperty(methods$1,"luminosity",{enumerable:!1,value:methods$1.lightness});Object.defineProperty(methods$1,"luminance",{enumerable:!1,value:methods$1.lightness});Object.defineProperty(methods$1,"min",{enumerable:!1,value:methods$1.minimum});Object.defineProperty(methods$1,"max",{enumerable:!1,value:methods$1.maximum});Object.defineProperty(methods$1,"brightness",{enumerable:!1,value:methods$1.maximum});Object.keys(methods$1).forEach(r=>{});function grey(r={}){let{algorithm:a="luma709",keepAlpha:n=!1,mergeAlpha:t=!0}=r;if(typeof a!="string"&&typeof a!="function")throw new TypeError("algorithm must be a string or a function");this.checkProcessable("grey",{bitDepth:[8,16],alpha:[0,1]}),this.components===1&&(a="red"),n&=this.alpha,t&=this.alpha,n&&(t=!1);let l=getOutputImage(this,r,{components:1,alpha:n,colorModel:GREY$1}),u;if(typeof a=="function")u=a;else if(u=methods$1[a.toLowerCase()],!u)throw new Error(`unsupported grey algorithm: ${a}`);let s=0;for(let p=0;p<this.data.length;p+=this.channels)t?l.data[s++]=clamp(u(this.data[p],this.data[p+1],this.data[p+2],this)*this.data[p+this.components]/this.maxValue,this):(l.data[s++]=clamp(u(this.data[p],this.data[p+1],this.data[p+2],this),this),l.alpha&&(l.data[s++]=this.data[p+this.components]));return l}function huang(r){let a=0;for(let N=0;N<r.length;N++)if(r[N]!==0){a=N;break}let n=r.length-1;for(let N=r.length-1;N>=a;N--)if(r[N]!==0){n=N;break}let t=1/(n-a),l=new Array(r.length),u=0,s=0;for(let N=a;N<r.length;N++)u+=N*r[N],s+=r[N],l[N]=u/s;let p=new Array(r.length);u=s=0;for(let N=n;N>0;N--)u+=N*r[N],s+=r[N],p[N-1]=u/s;let d=-1,h=Number.MAX_VALUE;for(let N=0;N<r.length;N++){let Be=0,b;for(let E=0;E<=N;E++)b=1/(1+t*Math.abs(E-l[N])),b<1e-6||b>.999999||(Be+=r[E]*(-b*Math.log(b)-(1-b)*Math.log(1-b)));for(let E=N+1;E<r.length;E++)b=1/(1+t*Math.abs(E-p[N])),b<1e-6||b>.999999||(Be+=r[E]*(-b*Math.log(b)-(1-b)*Math.log(1-b)));Be<h&&(h=Be,d=N)}return d}function intermodes(r){let a=r.slice(),n=0;for(;!bimodalTest$1(a);){let l=0,u=0,s=a[0];for(let p=0;p<r.length-1;p++)l=u,u=s,s=a[p+1],a[p]=(l+u+s)/3;if(a[r.length-1]=(u+s)/3,n++,n>1e4)throw new Error("Intermodes Threshold not found after 10000 iterations")}let t=0;for(let l=1;l<r.length-1;l++)a[l-1]<a[l]&&a[l+1]<a[l]&&(t+=l);return Math.floor(t/2)}function bimodalTest$1(r){let a=!1,n=0;for(let t=1;t<r.length-1;t++)if(r[t-1]<r[t]&&r[t+1]<r[t]&&(n++,n>2))return!1;return n===2&&(a=!0),a}function isodata(r){let a,n,t,l,u=0;for(let s=1;s<r.length;s++)if(r[s]>0){u=s+1;break}for(;;){a=0,t=0;for(let s=0;s<u;s++)t=t+r[s],a=a+r[s]*s;l=0,n=0;for(let s=u+1;s<r.length;s++)n+=r[s],l+=r[s]*s;if(t>0&&n>0&&(a/=t,l/=n,u===Math.round((a+l)/2)))break;if(u++,u>r.length-2)throw new Error("Threshold not found")}return u}function li(r,a){let n,t,l,u,s,p,d,h,N,Be,b,E;b=.5,Be=0;for(let de=0;de<r.length;de++)Be+=de*r[de];Be/=a,d=Be;do{p=d,n=p+.5|0,t=0,u=0;for(let de=0;de<=n;de++)t+=de*r[de],u+=r[de];h=u===0?0:t/u,l=0,s=0;for(let de=n+1;de<r.length;de++)l+=de*r[de],s+=r[de];N=s===0?0:l/s,E=(h-N)/(Math.log(h)-Math.log(N)),E<-Number.EPSILON?d=E-.5|0:d=E+.5|0}while(Math.abs(d-p)>b);return n}function maxEntropy(r,a){let n=new Array(r.length);for(let b=0;b<r.length;b++)n[b]=r[b]/a;let t=new Array(r.length),l=new Array(r.length);t[0]=n[0],l[0]=1-t[0];for(let b=1;b<r.length;b++)t[b]=t[b-1]+n[b],l[b]=1-t[b];let u=0;for(let b=0;b<r.length;b++)if(Math.abs(t[b])>=Number.EPSILON){u=b;break}let s=r.length-1;for(let b=r.length-1;b>=u;b--)if(Math.abs(l[b])>=Number.EPSILON){s=b;break}let p=-1,d,h=Number.MIN_VALUE,N,Be;for(let b=u;b<=s;b++){N=0;for(let E=0;E<=b;E++)r[E]!==0&&(N-=n[E]/t[b]*Math.log(n[E]/t[b]));Be=0;for(let E=b+1;E<r.length;E++)r[E]!==0&&(Be-=n[E]/l[b]*Math.log(n[E]/l[b]));d=N+Be,h<d&&(h=d,p=b)}return p}function mean$1(r,a){let n=0;for(let t=0;t<r.length;t++)n+=t*r[t];return Math.floor(n/a)}function minError(r,a){let n,t=-2,l,u,s,p,d,h,N,Be,b,E,de,pe=0;for(let Ye=0;Ye<r.length;Ye++)pe+=Ye*r[Ye];for(pe/=a,n=pe;n!==t;){let Ye=sumA(r,n),me=sumA(r,r.length-1),Le=sumB(r,n),nt=sumB(r,r.length-1),tt=sumC(r,n),ft=sumC(r,r.length-1);if(l=Le/Ye,u=(nt-Le)/(me-Ye),s=Ye/me,p=(me-Ye)/me,d=tt/Ye-l*l,h=(ft-tt)/(me-Ye)-u*u,N=1/d-1/h,Be=l/d-u/h,b=l*l/d-u*u/h+Math.log10(d*(p*p)/(h*(s*s))),E=Be*Be-N*b,E<0)return n;t=n,de=(Be+Math.sqrt(E))/N,isNaN(de)?n=t:n=Math.floor(de)}return n}function sumA(r,a){let n=0;for(let t=0;t<=a;t++)n+=r[t];return n}function sumB(r,a){let n=0;for(let t=0;t<=a;t++)n+=t*r[t];return n}function sumC(r,a){let n=0;for(let t=0;t<=a;t++)n+=t*t*r[t];return n}function minimum(r){if(r.length<2)return 0;let a=0,n=-1,t=-1,l=new Array(r.length);for(let u=0;u<r.length;u++)l[u]=r[u],r[u]>0&&(t=u);for(;!bimodalTest(l);)if(l=smoothed(l),a++,a>1e4)return n;return n=minimumBetweenPeeks(l,t),n}function smoothed(r){let a=new Array(r.length);for(let n=1;n<r.length-1;n++)a[n]=(r[n-1]+r[n]+r[n+1])/3;return a[0]=(r[0]+r[1])/3,a[r.length-1]=(r[r.length-2]+r[r.length-1])/3,a}function minimumBetweenPeeks(r,a){let n;for(let t=1;t<a;t++)if(r[t-1]>r[t]&&r[t+1]>=r[t]){n=t;break}return n}function bimodalTest(r){let a=r.length,n=!1,t=0;for(let l=1;l<a-1;l++)if(r[l-1]<r[l]&&r[l+1]<r[l]&&(t++,t>2))return!1;return t===2&&(n=!0),n}function moments(r,a){let n=1,t=0,l=0,u=0,s=0,p,d,h,N,Be,b,E=-1,de=r.length,pe=new Array(de);for(let Ye=0;Ye<de;Ye++)pe[Ye]=r[Ye]/a;for(let Ye=0;Ye<de;Ye++)t+=Ye*pe[Ye],l+=Ye*Ye*pe[Ye],u+=Ye*Ye*Ye*pe[Ye];d=n*l-t*t,h=(-l*l+t*u)/d,N=(n*-u+l*t)/d,Be=.5*(-N-Math.sqrt(N*N-4*h)),b=.5*(-N+Math.sqrt(N*N-4*h)),p=(b-t)/(b-Be);for(let Ye=0;Ye<de;Ye++)if(s+=pe[Ye],s>p){E=Ye;break}return E}function otsu(r,a){let n=0,t=0,l=0,u=0,s=0;for(let p=0;p<r.length;p++)s+=p*r[p];for(let p=0;p<r.length;p++){t=t+r[p];const d=a-t;if(t===0||d===0)continue;n=n+p*r[p];const h=(s-n)/d,N=t*d*(n/t-h)*(n/t-h);N>=l&&(u=p,l=N)}return u}function percentile(r){let a=-1,n=.5,t=new Array(r.length),l=partialSum(r,r.length-1),u=1;for(let s=0;s<r.length;s++)t[s]=Math.abs(partialSum(r,s)/l-n),t[s]<u&&(u=t[s],a=s);return a}function partialSum(r,a){let n=0;for(let t=0;t<=a;t++)n+=r[t];return n}function renyiEntropy(r,a){let n,t,l,u=new Array(r.length),s=new Array(r.length),p=new Array(r.length),d=0,h=0,N=0,Be=0,b=0,E=0,pe=1/(1-.5),me=1/(1-2);for(let ft=0;ft<r.length;ft++)u[ft]=r[ft]/a;s[0]=u[0],p[0]=1-s[0];for(let ft=1;ft<r.length;ft++)s[ft]=s[ft-1]+u[ft],p[ft]=1-s[ft];t=0;for(let ft=0;ft<r.length;ft++)if(Math.abs(s[ft])>=Number.EPSILON){t=ft;break}l=r.length-1;for(let ft=r.length-1;ft>=t;ft--)if(Math.abs(p[ft])>=Number.EPSILON){l=ft;break}for(let ft=t;ft<=l;ft++){let yt=0,gt=0,mt=0;for(let Dt=0;Dt<=ft;Dt++)r[Dt]!==0&&(yt-=u[Dt]/s[ft]*Math.log(u[Dt]/s[ft])),gt+=Math.sqrt(u[Dt]/s[ft]),mt+=u[Dt]*u[Dt]/(s[ft]*s[ft]);let wt=0,St=0,bt=0;for(let Dt=ft+1;Dt<r.length;Dt++)r[Dt]!==0&&(wt-=u[Dt]/p[ft]*Math.log(u[Dt]/p[ft])),St+=Math.sqrt(u[Dt]/p[ft]),bt+=u[Dt]*u[Dt]/(p[ft]*p[ft]);let Ct=yt+wt,Et=pe*(gt*St>0?Math.log(gt*St):0),It=me*(mt*bt>0?Math.log(mt*bt):0);Ct>Be&&(Be=Ct,d=ft),Et>b&&(b=Et,h=ft),It>E&&(E=It,N=ft)}let Le=[d,h,N];Le.sort((ft,yt)=>ft-yt);let nt;Math.abs(Le[0]-Le[1])<=5?Math.abs(Le[1]-Le[2])<=5?nt=[1,2,1]:nt=[0,1,3]:Math.abs(Le[1]-Le[2])<=5?nt=[3,1,0]:nt=[1,2,1];let tt=s[Le[2]]-s[Le[0]];return n=Math.round(Le[0]*(s[Le[0]]+.25*tt*nt[0])+.25*Le[1]*tt*nt[1]+Le[2]*(p[Le[2]]+.25*tt*nt[2])),n}function shanbhag(r,a){let n=new Array(r.length);for(let E=0;E<r.length;E++)n[E]=r[E]/a;let t=new Array(r.length),l=new Array(r.length);t[0]=n[0],l[0]=1-t[0];for(let E=1;E<r.length;E++)t[E]=t[E-1]+n[E],l[E]=1-t[E];let u=0;for(let E=0;E<r.length;E++)if(Math.abs(t[E])>=Number.EPSILON){u=E;break}let s=r.length-1;for(let E=r.length-1;E>=u;E--)if(Math.abs(l[E])>=Number.EPSILON){s=E;break}let p=-1,d=Number.MAX_VALUE,h,N,Be,b;for(let E=u;E<=s;E++){Be=0,h=.5/t[E];for(let de=1;de<=E;de++)Be-=n[de]*Math.log(1-h*t[de-1]);Be*=h,b=0,h=.5/l[E];for(let de=E+1;de<r.length;de++)b-=n[de]*Math.log(1-h*l[de]);b*=h,N=Math.abs(Be-b),N<d&&(d=N,p=E)}return p}function triangle$1(r){let a=0,n=0,t=0,l=0;for(let Be=0;Be<r.length;Be++)if(r[Be]>0){a=Be;break}a>0&&a--;for(let Be=r.length-1;Be>0;Be--)if(r[Be]>0){l=Be;break}l<r.length-1&&l++;for(let Be=0;Be<r.length;Be++)r[Be]>n&&(t=Be,n=r[Be]);let u=!1;if(t-a<l-t){u=!0;let Be=0,b=r.length-1;for(;Be<b;){let E=r[Be];r[Be]=r[b],r[b]=E,Be++,b--}a=r.length-1-l,t=r.length-1-t}if(a===t)return a;let s,p,d;s=r[t],p=a-t,d=Math.sqrt(s*s+p*p),s/=d,p/=d,d=s*a+p*r[a];let h=a,N=0;for(let Be=a+1;Be<=t;Be++){let b=s*Be+p*r[Be]-d;b>N&&(h=Be,N=b)}if(h--,u){let Be=0,b=r.length-1;for(;Be<b;){let E=r[Be];r[Be]=r[b],r[b]=E,Be++,b--}return r.length-1-h}else return h}function yen(r,a){let n=new Array(r.length);for(let h=0;h<r.length;h++)n[h]=r[h]/a;let t=new Array(r.length);t[0]=n[0];for(let h=1;h<r.length;h++)t[h]=t[h-1]+n[h];let l=new Array(r.length);l[0]=n[0]*n[0];for(let h=1;h<r.length;h++)l[h]=l[h-1]+n[h]*n[h];let u=new Array(r.length);u[r.length-1]=0;for(let h=r.length-2;h>=0;h--)u[h]=u[h+1]+n[h+1]*n[h+1];let s=-1,p=Number.MIN_VALUE,d;for(let h=0;h<r.length;h++)d=-1*(l[h]*u[h]>0?Math.log(l[h]*u[h]):0)+2*(t[h]*(1-t[h])>0?Math.log(t[h]*(1-t[h])):0),d>p&&(p=d,s=h);return s}const methods={huang,intermodes,isodata,li,maxentropy:maxEntropy,mean:mean$1,minerror:minError,minimum,moments,otsu,percentile,renyientropy:renyiEntropy,shanbhag,triangle:triangle$1,yen},names={};Object.keys(methods).forEach(r=>{names[r]=r});function getThreshold(r={}){let{algorithm:a=names.otsu}=r;this.checkProcessable("getThreshold",{components:1,bitDepth:[8,16]});let n=methods[a.toLowerCase()];if(n){let t=this.getHistogram();return n(t,this.size)}else throw new Error(`unknown thresholding algorithm: ${a}`)}const THRESHOLD="threshold";function mask(r={}){let{algorithm:a=THRESHOLD,threshold:n=.5,useAlpha:t=!0,invert:l=!1}=r;this.checkProcessable("mask",{components:1,bitDepth:[8,16]}),a===THRESHOLD?n=getThreshold$1(n,this.maxValue):n=getThreshold.call(this,r);let u=new Image$1(this.width,this.height,{kind:"BINARY",parent:this}),s=0;if(this.alpha&&t)for(let p=0;p<this.data.length;p+=this.channels){let d=this.data[p]+(this.maxValue-this.data[p])*(this.maxValue-this.data[p+1])/this.maxValue;(l&&d<=n||!l&&d>=n)&&u.setBit(s),s++}else for(let p=0;p<this.data.length;p+=this.channels)(l&&this.data[p]<=n||!l&&this.data[p]>=n)&&u.setBit(s),s++;return u}function copyImage(r,a,n,t){let l=r.width,u=r.height,s=a.width,p=r.channels;for(let d=0;d<l;d++)for(let h=0;h<u;h++)for(let N=0;N<p;N++){let Be=(h*l+d)*p+N,b=((t+h)*s+n+d)*p+N;a.data[b]=r.data[Be]}}function pad(r={}){let{size:a=0,algorithm:n="copy",color:t}=r;if(this.checkProcessable("pad",{bitDepth:[8,16]}),n==="set"){if(t.length!==this.channels)throw new Error(`pad: the color array must have the same length as the number of channels. Here: ${this.channels}`);for(let d=0;d<t.length;d++)t[d]===0&&(t[d]=.001)}else t=newArray(this.channels,null);Array.isArray(a)||(a=[a,a]);let l=this.width+a[0]*2,u=this.height+a[1]*2,s=this.channels,p=Image$1.createFrom(this,{width:l,height:u});copyImage(this,p,a[0],a[1]);for(let d=a[0];d<l-a[0];d++)for(let h=0;h<s;h++){let N=t[h]||p.data[(a[1]*l+d)*s+h];for(let Be=0;Be<a[1];Be++)p.data[(Be*l+d)*s+h]=N;N=t[h]||p.data[((u-a[1]-1)*l+d)*s+h];for(let Be=u-a[1];Be<u;Be++)p.data[(Be*l+d)*s+h]=N}for(let d=0;d<u;d++)for(let h=0;h<s;h++){let N=t[h]||p.data[(d*l+a[0])*s+h];for(let Be=0;Be<a[0];Be++)p.data[(d*l+Be)*s+h]=N;N=t[h]||p.data[(d*l+l-a[0]-1)*s+h];for(let Be=l-a[0];Be<l;Be++)p.data[(d*l+Be)*s+h]=N}return p}function colorDepth(r=8){if(this.checkProcessable("colorDepth",{bitDepth:[1,8,16]}),![8,16].includes(r))throw Error("You need to specify the new colorDepth as 8 or 16");if(this.bitDepth===r)return this.clone();let a=Image$1.createFrom(this,{bitDepth:r});switch(r){case 8:if(this.bitDepth===1)for(let n=0;n<this.size;n++)this.getBit(n)&&(a.data[n]=255);else for(let n=0;n<this.data.length;n++)a.data[n]=this.data[n]>>8;break;case 16:if(this.bitDepth===1)for(let n=0;n<this.size;n++)this.getBit(n)&&(a.data[n]=65535);else for(let n=0;n<this.data.length;n++)a.data[n]=this.data[n]<<8|this.data[n];break;default:throw new Error("colorDepth conversion unexpected case")}return a}function rotateFree(r,a={}){const{interpolation:n=validInterpolations.nearestneighbor,width:t=this.width,height:l=this.height}=a;if(typeof r!="number")throw new TypeError("degrees must be a number");const u=checkInterpolation(n),s=r*Math.PI/180,p=Math.floor(Math.abs(t*Math.cos(s))+Math.abs(l*Math.sin(s))),d=Math.floor(Math.abs(l*Math.cos(s))+Math.abs(t*Math.sin(s))),h=Math.cos(-s),N=Math.sin(-s);let Be=p/2,b=d/2;p%2===0?(Be=Be-.5,d%2===0?b=b-.5:b=Math.floor(b)):(Be=Math.floor(Be),d%2===0?b=b-.5:b=Math.floor(b));const E=Math.floor(t/2-Be),de=Math.floor(l/2-b);if(this.bitDepth===1){const pe=new Image$1(p,d,{kind:"BINARY",parent:this});switch(u){case validInterpolations.nearestneighbor:return rotateBinaryNearestNeighbor(this,pe,E,de,Be,b,h,N);case validInterpolations.bilinear:return rotateBinaryBilinear(this,pe,E,de,Be,b,h,N);default:throw new Error(`unsupported rotate interpolation: ${u}`)}}else{const pe=Image$1.createFrom(this,{width:p,height:d});switch(u){case validInterpolations.nearestneighbor:return rotateNearestNeighbor(this,pe,E,de,Be,b,h,N);case validInterpolations.bilinear:return rotateBilinear(this,pe,E,de,Be,b,h,N);default:throw new Error(`unsupported rotate interpolation: ${u}`)}}}function rotateNearestNeighbor(r,a,n,t,l,u,s,p){for(let d=0;d<a.width;d+=1)for(let h=0;h<a.height;h+=1)for(let N=0;N<r.channels;N++){let Be=Math.round((d-l)*s-(h-u)*p+l)+n,b=Math.round((h-u)*s+(d-l)*p+u)+t;Be<0||Be>=r.width||b<0||b>=r.height?r.alpha===1&&N===r.channels-1?a.setValueXY(d,h,N,0):a.setValueXY(d,h,N,r.maxValue):a.setValueXY(d,h,N,r.getValueXY(Be,b,N))}return a}function rotateBinaryNearestNeighbor(r,a,n,t,l,u,s,p){for(let d=0;d<a.width;d+=1)for(let h=0;h<a.height;h+=1){let N=Math.round((d-l)*s-(h-u)*p+l)+n,Be=Math.round((h-u)*s+(d-l)*p+u)+t;(N<0||N>=r.width||Be<0||Be>=r.height||r.getBitXY(N,Be))&&a.setBitXY(d,h)}return a}function rotateBilinear(r,a,n,t,l,u,s,p){let d=r.width*r.channels;for(let h=0;h<a.height;h++)for(let N=0;N<a.width;N++){let Be=(N-l)*s-(h-u)*p+l+n,b=(h-u)*s+(N-l)*p+u+t,E=Be|0,de=b|0,pe=Be-E,Ye=b-de;for(let me=0;me<r.channels;me++)if(Be<0||Be>=r.width||b<0||b>=r.height)r.alpha===1&&me===r.channels-1?a.setValueXY(N,h,me,0):a.setValueXY(N,h,me,r.maxValue);else{let Le=(de*r.width+E)*r.channels+me,nt=r.data[Le],tt=r.data[Le+r.channels],ft=r.data[Le+d],yt=r.data[Le+d+r.channels],gt=nt+pe*(tt-nt)+Ye*(ft-nt)+pe*Ye*(nt-tt-ft+yt)|0;a.setValueXY(N,h,me,gt)}}return a}function rotateBinaryBilinear(r,a,n,t,l,u,s,p){let d=r.width;for(let h=0;h<a.height;h++)for(let N=0;N<a.width;N++){let Be=(N-l)*s-(h-u)*p+l+n,b=(h-u)*s+(N-l)*p+u+t,E=Be|0,de=b|0,pe=Be-E,Ye=b-de;if(Be<0||Be>=r.width||b<0||b>=r.height)a.setBitXY(N,h);else{let me=de*r.width+E,Le=r.getBit(me),nt=r.getBit(me+1),tt=r.getBit(me+d),ft=r.getBit(me+1+d);(Le|pe&nt-Le|Ye&tt-Le|pe&Ye&Le-nt-tt+ft)>0&&a.setBitXY(N,h)}}return a}function rotate$1(r,a){if(this.checkProcessable("rotate",{bitDepth:[1,8,16]}),typeof r!="number")throw new TypeError("angle must be a number");switch(r<0&&(r=Math.ceil(-r/360)*360+r),r%360){case 0:return this.clone();case 90:return rotateRight.call(this);case 180:return rotate180.call(this);case 270:return rotateLeft.call(this);default:return rotateFree.call(this,r,a)}}function rotateLeft(){if(this.bitDepth===1){const r=new Image$1(this.height,this.width,{kind:"BINARY",parent:this}),a=r.height-1;for(let n=0;n<this.height;n++)for(let t=0;t<this.width;t++)this.getBitXY(t,n)&&r.setBitXY(n,a-t);return r}else{const r=Image$1.createFrom(this,{width:this.height,height:this.width}),a=r.height-1;for(let n=0;n<this.height;n++)for(let t=0;t<this.width;t++)for(let l=0;l<this.channels;l++)r.setValueXY(n,a-t,l,this.getValueXY(t,n,l));return r}}function rotateRight(){if(this.bitDepth===1){const r=new Image$1(this.height,this.width,{kind:"BINARY",parent:this}),a=r.width-1;for(let n=0;n<this.height;n++)for(let t=0;t<this.width;t++)this.getBitXY(t,n)&&r.setBitXY(a-n,t);return r}else{const r=Image$1.createFrom(this,{width:this.height,height:this.width}),a=r.width-1;for(let n=0;n<this.height;n++)for(let t=0;t<this.width;t++)for(let l=0;l<this.channels;l++)r.setValueXY(a-n,t,l,this.getValueXY(t,n,l));return r}}function rotate180(){if(this.bitDepth===1){const r=new Image$1(this.width,this.height,{kind:"BINARY",parent:this}),a=r.width-1,n=r.height-1;for(let t=0;t<this.height;t++)for(let l=0;l<this.width;l++)this.getBitXY(l,t)&&r.setBitXY(a-l,n-t);return r}else{const r=Image$1.createFrom(this),a=r.width-1,n=r.height-1;for(let t=0;t<this.height;t++)for(let l=0;l<this.width;l++)for(let u=0;u<this.channels;u++)r.setValueXY(a-l,n-t,u,this.getValueXY(l,t,u));return r}}function insert(r,a={}){const n=getImageParameters(r);this.checkProcessable("insert",n);let{x:t=0,y:l=0}=a;const u=getOutputImageOrInPlace(this,a,{copy:!0}),s=Math.min(u.height,l+r.height),p=Math.min(u.width,t+r.width);if(u.bitDepth===1)for(let d=l;d<s;d++)for(let h=t;h<p;h++)r.getBitXY(h-t,d-l)?u.setBitXY(h,d):u.clearBitXY(h,d);else for(let d=l;d<s;d++)for(let h=t;h<p;h++)u.setPixelXY(h,d,r.getPixelXY(h-t,d-l));return u}function setBorder(r={}){let{size:a=0,algorithm:n="copy",color:t}=r;if(this.checkProcessable("setBorder",{bitDepth:[8,16,32,64]}),n==="set"){if(t.length!==this.channels)throw new Error(`setBorder: the color array must have the same length as the number of channels. Here: ${this.channels}`);for(let p=0;p<t.length;p++)t[p]===0&&(t[p]=.001)}else t=newArray(this.channels,null);Array.isArray(a)||(a=[a,a]);let l=a[0],u=a[1],s=this.channels;for(let p=l;p<this.width-l;p++)for(let d=0;d<s;d++){let h=t[d]||this.data[(p+this.width*u)*s+d];for(let N=0;N<u;N++)this.data[(N*this.width+p)*s+d]=h;h=t[d]||this.data[(p+this.width*(this.height-u-1))*s+d];for(let N=this.height-u;N<this.height;N++)this.data[(N*this.width+p)*s+d]=h}for(let p=0;p<this.height;p++)for(let d=0;d<s;d++){let h=t[d]||this.data[(p*this.width+l)*s+d];for(let N=0;N<l;N++)this.data[(p*this.width+N)*s+d]=h;h=t[d]||this.data[(p*this.width+this.width-l-1)*s+d];for(let N=this.width-l;N<this.width;N++)this.data[(p*this.width+N)*s+d]=h}return this}function split(r={}){let{preserveAlpha:a=!0}=r;if(this.checkProcessable("split",{bitDepth:[8,16]}),this.components===1)return new Stack([this.clone()]);let n=new Stack,t=this.data;if(this.alpha&&a)for(let l=0;l<this.components;l++){let u=Image$1.createFrom(this,{components:1,alpha:!0,colorModel:GREY$1}),s=0;for(let p=0;p<t.length;p+=this.channels)u.data[s++]=t[p+l],u.data[s++]=t[p+this.components];n.push(u)}else for(let l=0;l<this.channels;l++){let u=Image$1.createFrom(this,{components:1,alpha:!1,colorModel:GREY$1}),s=0;for(let p=0;p<t.length;p+=this.channels)u.data[s++]=t[p+l];n.push(u)}return n}function getChannel(r,a={}){let{keepAlpha:n=!1,mergeAlpha:t=!1}=a;n&=this.alpha,t&=this.alpha,this.checkProcessable("getChannel",{bitDepth:[8,16]}),r=validateChannel(this,r);let l=Image$1.createFrom(this,{components:1,alpha:n,colorModel:GREY$1}),u=0;for(let s=0;s<this.data.length;s+=this.channels)t?l.data[u++]=this.data[s+r]*this.data[s+this.components]/this.maxValue:(l.data[u++]=this.data[s+r],n&&(l.data[u++]=this.data[s+this.components]));return l}function combineChannels(r=defaultCombineMethod,a={}){let{mergeAlpha:n=!1,keepAlpha:t=!1}=a;n&=this.alpha,t&=this.alpha,this.checkProcessable("combineChannels",{bitDepth:[8,16]});let l=Image$1.createFrom(this,{components:1,alpha:t,colorModel:GREY$1}),u=0;for(let s=0;s<this.size;s++){let p=r(this.getPixel(s));n?l.data[u++]=p*this.data[s*this.channels+this.components]/this.maxValue:(l.data[u++]=p,t&&(l.data[u++]=this.data[s*this.channels+this.components]))}return l}function defaultCombineMethod(r){return(r[0]+r[1]+r[2])/3}function setChannel(r,a){if(this.checkProcessable("setChannel",{bitDepth:[8,16]}),a.checkProcessable("setChannel (image parameter check)",{bitDepth:[this.bitDepth],alpha:[0],components:[1]}),a.width!==this.width||a.height!==this.height)throw new Error("Images must have exactly the same width and height");r=validateChannel(this,r);let n=r;for(let t=0;t<a.data.length;t++)this.data[n]=a.data[t],n+=this.channels;return this}function getSimilarity(r,a={}){let{shift:n=[0,0],average:t,channels:l,defaultAlpha:u,normalize:s,border:p=[0,0]}=a;if(this.checkProcessable("getSimilarity",{bitDepth:[8,16]}),Array.isArray(p)||(p=[p,p]),l=validateArrayOfChannels(this,{channels:l,defaultAlpha:u}),this.bitDepth!==r.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==r.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==r.colorModel)throw new Error("Both images must have the same colorModel");typeof t>"u"&&(t=!0);let d=Math.max(p[0],-n[0]),h=Math.min(this.width-p[0],this.width-n[0]),N=Math.max(p[1],-n[1]),Be=Math.min(this.height-p[1],this.height-n[1]),b=newArray(l.length,0);for(let E=0;E<l.length;E++){let de=l[E],pe=s?this.sum[de]:Math.max(this.sum[de],r.sum[de]),Ye=s?r.sum[de]:Math.max(this.sum[de],r.sum[de]);if(pe!==0&&Ye!==0)for(let me=d;me<h;me++)for(let Le=N;Le<Be;Le++){let nt=me*this.multiplierX+Le*this.multiplierY+de,tt=nt+n[0]*this.multiplierX+n[1]*this.multiplierY;b[E]+=Math.min(this.data[nt]/pe,r.data[tt]/Ye)}}return t?b.reduce((E,de)=>E+de)/b.length:b}function getPixelsGrid(r={}){let{sampling:a=[10,10],painted:n=!1,mask:t}=r;this.checkProcessable("getPixelsGrid",{bitDepth:[8,16],channels:1}),Array.isArray(a)||(a=[a,a]);const l=a[0],u=a[1],s=[],p=[],d=this.width/l,h=this.height/u;let N=Math.floor(d/2);for(let b=0;b<l;b++){let E=Math.floor(h/2);for(let de=0;de<u;de++){let pe=Math.round(N),Ye=Math.round(E);(!t||t.getBitXY(pe,Ye))&&(s.push([pe,Ye]),p.push(this.getPixelXY(pe,Ye))),E+=h}N+=d}const Be={xyS:s,zS:p};return n&&(Be.painted=this.rgba8().paintPoints(s)),Be}function Matrix(r,a,n){const t=new Array(r);for(let l=0;l<r;l++)t[l]=new Array(a);if(n)for(let l=0;l<r;l++)for(let u=0;u<a;u++)t[l][u]=n;return t.width=r,t.height=a,Object.setPrototypeOf(t,Matrix.prototype),t}Matrix.prototype.localMin=function(r,a){let n=this[r][a],t=[r,a];for(let l=Math.max(0,r-1);l<Math.min(this.length,r+2);l++)for(let u=Math.max(0,a-1);u<Math.min(this[0].length,a+2);u++)this[l][u]<n&&(n=this[l][u],t=[l,u]);return{position:t,value:n}};Matrix.prototype.localMax=function(r,a){let n=this[r][a],t=[r,a];for(let l=Math.max(0,r-1);l<Math.min(this.length,r+2);l++)for(let u=Math.max(0,a-1);u<Math.min(this[0].length,a+2);u++)this[l][u]>n&&(n=this[l][u],t=[l,u]);return{position:t,value:n}};Matrix.prototype.localSearch=function(r,a,n){let t=[];for(let l=Math.max(0,r-1);l<Math.min(this.length,r+2);l++)for(let u=Math.max(0,a-1);u<Math.min(this[0].length,a+2);u++)this[l][u]===n&&t.push([l,u]);return t};function getBestMatch(r,a={}){let{border:n}=a;if(this.checkProcessable("getChannel",{bitDepth:[8,16]}),this.bitDepth!==r.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==r.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==r.colorModel)throw new Error("Both images must have the same colorModel");let t=new Matrix(r.width,r.height,-1/0),l=Math.floor(r.width/2),u=Math.floor(r.height/2),s=l,p=u,d=!1;for(;!d;){let h=t.localSearch(l,u,-1/0);for(let Be=0;Be<h.length;Be++){let b=h[Be],E=this.getSimilarity(r,{border:n,shift:[s-b[0],p-b[1]]});t[b[0]][b[1]]=E}let N=t.localMax(l,u);N.position[0]!==l||N.position[1]!==u?(l=N.position[0],u=N.position[1]):d=!0}return[l-s,u-p]}function getRow(r,a=0){this.checkProcessable("getRow",{bitDepth:[8,16]}),checkRow(this,r),checkChannel(this,a);let n=new Array(this.width),t=0,l=r*this.width*this.channels+a,u=l+this.width*this.channels;for(let s=l;s<u;s+=this.channels)n[t++]=this.data[s];return n}function getColumn(r,a=0){this.checkProcessable("getColumn",{bitDepth:[8,16]}),checkColumn(this,r),checkChannel(this,a);let n=new Array(this.height),t=0,l=this.width*this.channels;for(let u=a+r*this.channels;u<this.data.length;u+=l)n[t++]=this.data[u];return n}function getMatrix(r={}){let{channel:a}=r;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),a===void 0){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");a=0}let n=new Matrix$1(this.height,this.width);for(let t=0;t<this.height;t++)for(let l=0;l<this.width;l++)n.set(t,l,this.getValueXY(l,t,a));return n}function setMatrix(r,a={}){r=new Matrix$1(r);let{channel:n}=a;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),n===void 0){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");n=0}if(this.width!==r.columns||this.height!==r.rows)throw new RangeError("The size of the matrix must be equal to the size of the image");for(let t=0;t<this.height;t++)for(let l=0;l<this.width;l++)this.setValueXY(l,t,n,r.get(t,l));return this}function getPixelsArray(){this.checkProcessable("getPixelsArray",{bitDepth:[8,16,32]});let r=new Array(this.size),a=0;for(let n=0;n<this.data.length;n+=this.channels){let t=new Array(this.components);for(let l=0;l<this.components;l++)t[l]=this.data[n+l];r[a++]=t}return r}function getIntersection(r){let a=this,n=a.getClosestCommonParent(r),t=a.getRelativePosition(n,{defaultFurther:!0}),l=getRelativePositionForAllPixels(a,t),u=r.getRelativePosition(n,{defaultFurther:!0}),s=getRelativePositionForAllPixels(r,u),p=getCommonSurface(l,s),d={whitePixelsMask1:[],whitePixelsMask2:[],commonWhitePixels:[]};for(let h=0;h<p.length;h++){let N=p[h],Be=[N[0]-t[0],N[1]-t[1]],b=[N[0]-u[0],N[1]-u[1]],E=a.getBitXY(Be[0],Be[1]),de=r.getBitXY(b[0],b[1]);E===1&&de===1&&d.commonWhitePixels.push(N)}for(let h=0;h<l.length;h++){let N,Be;h!==0&&(N=Math.floor(h/a.width),Be=h%a.width),a.getBitXY(N,Be)===1&&d.whitePixelsMask1.push(l[h])}for(let h=0;h<s.length;h++){let N=0,Be=0;h!==0&&(N=Math.floor(h/r.width),Be=h%r.width),r.getBitXY(N,Be)===1&&d.whitePixelsMask2.push(s[h])}return d}function getRelativePositionForAllPixels(r,a){let n=[];for(let t=0;t<r.height;t++)for(let l=0;l<r.width;l++){let u=[t,l];n.push([u[0]+a[0],u[1]+a[1]])}return n}function getCommonSurface(r,a){let n=0,t=0,l=[];for(;n<r.length&&t<a.length;)r[n][0]===a[t][0]&&r[n][1]===a[t][1]?(l.push(r[n]),n++,t++):r[n][0]<a[t][0]||r[n][0]===a[t][0]&&r[n][1]<a[t][1]?n++:t++;return l}function getClosestCommonParent(r){let a=getDepth(this),n=getDepth(r),t;if(a>=n?t=getFurthestParent(this,a):t=getFurthestParent(r,n),a===0||n===0)return t;let l=this,u=r;for(;a!==n;)if(a>n){if(l=l.parent,l===null)return t;a=a-1}else{if(u=u.parent,u===null)return t;n=n-1}for(;l!==u&&l!==null&&u!==null;)if(l=l.parent,u=u.parent,l===null||u===null)return t;return l!==u?t:l}function getDepth(r){let a=0,n=r;for(;n.parent!=null;)n=n.parent,a++;return a}function getFurthestParent(r,a){let n=r;for(;a>0;)n=n.parent,a=a-1;return n}const defaultOptions$1={lowThreshold:10,highThreshold:30,gaussianBlur:1.1},Gx=[[-1,0,1],[-2,0,2],[-1,0,1]],Gy=[[-1,-2,-1],[0,0,0],[1,2,1]],convOptions={bitDepth:32,mode:"periodic"};function cannyEdgeDetector(r,a){r.checkProcessable("Canny edge detector",{bitDepth:8,channels:1,components:1}),a=Object.assign({},defaultOptions$1,a);const n=r.width,t=r.height,l=r.maxValue,u={sigma:a.gaussianBlur,radius:3},s=r.gaussianFilter(u),p=s.convolution(Gy,convOptions),d=s.convolution(Gx,convOptions),h=d.hypotenuse(p),N=r.constructor,Be=new N(n,t,{kind:"GREY",bitDepth:32}),b=new N(n,t,{kind:"GREY",bitDepth:32}),E=new N(n,t,{kind:"GREY"});for(var de=1;de<n-1;de++)for(var pe=1;pe<t-1;pe++){var Ye=(Math.round(Math.atan2(d.getValueXY(de,pe,0),p.getValueXY(de,pe,0))*(5/Math.PI))+5)%5;Ye===0&&(h.getValueXY(de,pe,0)<=h.getValueXY(de,pe-1,0)||h.getValueXY(de,pe,0)<=h.getValueXY(de,pe+1,0))||Ye===1&&(h.getValueXY(de,pe,0)<=h.getValueXY(de-1,pe+1,0)||h.getValueXY(de,pe,0)<=h.getValueXY(de+1,pe-1,0))||Ye===2&&(h.getValueXY(de,pe,0)<=h.getValueXY(de-1,pe,0)||h.getValueXY(de,pe,0)<=h.getValueXY(de+1,pe,0))||Ye===3&&(h.getValueXY(de,pe,0)<=h.getValueXY(de-1,pe-1,0)||h.getValueXY(de,pe,0)<=h.getValueXY(de+1,pe+1,0))||Be.setValueXY(de,pe,0,h.getValueXY(de,pe,0))}for(de=0;de<n*t;++de){var me=Be.data[de],Le=0;me>a.highThreshold&&(Le++,E.data[de]=l),me>a.lowThreshold&&Le++,b.data[de]=Le}var nt=[];for(de=1;de<n-1;++de)for(pe=1;pe<t-1;++pe)if(b.getValueXY(de,pe,0)===1){e:for(var tt=de-1;tt<de+2;++tt)for(var ft=pe-1;ft<pe+2;++ft)if(b.getValueXY(tt,ft,0)===2){nt.push([de,pe]),E.setValueXY(de,pe,0,l);break e}}for(;nt.length>0;){var yt=[];for(de=0;de<nt.length;++de)for(pe=-1;pe<2;++pe)for(tt=-1;tt<2;++tt)if(!(pe===0&&tt===0)){var gt=nt[de][0]+pe,mt=nt[de][1]+tt;b.getValueXY(gt,mt,0)===1&&E.getValueXY(gt,mt,0)===0&&(yt.push([gt,mt]),E.setValueXY(gt,mt,0,l))}nt=yt}return E}function cannyEdge(r){return cannyEdgeDetector(this,r)}function extract(r,a={}){let{position:n}=a;if(this.checkProcessable("extract",{bitDepth:[1,8,16]}),!n&&(n=r.getRelativePosition(this),!n))throw new Error("extract : can not extract an image because the relative position can not be determined, try to specify manually the position as an array of 2 elements [x,y].");if(this.bitDepth>1){let t=Image$1.createFrom(this,{width:r.width,height:r.height,alpha:1,position:n,parent:this});for(let l=0;l<r.width;l++)for(let u=0;u<r.height;u++){for(let s=0;s<this.channels;s++){let p=this.getValueXY(l+n[0],u+n[1],s);t.setValueXY(l,u,s,p)}r.getBitXY(l,u)||t.setValueXY(l,u,this.components,0)}return t}else{let t=Image$1.createFrom(this,{width:r.width,height:r.height,position:n,parent:this});for(let l=0;l<r.height;l++)for(let u=0;u<r.width;u++)r.getBitXY(u,l)&&this.getBitXY(u+n[0],l+n[1])&&t.setBitXY(u,l);return t}}var fastList={exports:{}},hasRequiredFastList;function requireFastList(){return hasRequiredFastList||(hasRequiredFastList=1,function(r,a){(function(){function n(l,u,s){this.next=s,s&&(s.prev=this),this.prev=u,u&&(u.next=this),this.data=l}function t(){if(!(this instanceof t))return new t;this._head=null,this._tail=null,this.length=0}t.prototype={push:function(l){this._tail=new n(l,this._tail,null),this._head||(this._head=this._tail),this.length++},pop:function(){if(this.length!==0){var l=this._tail;return this._tail=l.prev,l.prev&&(l.prev=this._tail.next=null),this.length--,this.length===1?this._head=this._tail:this.length===0&&(this._head=this._tail=null),l.data}},unshift:function(l){this._head=new n(l,null,this._head),this._tail||(this._tail=this._head),this.length++},shift:function(){if(this.length!==0){var l=this._head;return this._head=l.next,l.next&&(l.next=this._head.prev=null),this.length--,this.length===1?this._tail=this._head:this.length===0&&(this._head=this._tail=null),l.data}},item:function(l){l<0&&(l=this.length+l);for(var u=this._head;l-- >0&&u;)u=u.next;return u?u.data:void 0},slice:function(l,u){if(l||(l=0),u||(u=this.length),u<0&&(u=this.length+u),l<0&&(l=this.length+l),u===l)return[];if(u<l)throw new Error("invalid offset: "+l+","+u+" (length="+this.length+")");for(var s=u-l,p=new Array(s),d=0,h=this._head;l-- >0&&h;)h=h.next;for(;d<s&&h;)p[d++]=h.data,h=h.next;return p},drop:function(){t.call(this)},forEach:function(l,u){for(var s=this._head,p=0,d=this.length;p<d&&s;)l.call(u||this,s.data,p,this),s=s.next,p++},map:function(l,u){var s=new t;return this.forEach(function(p,d,h){s.push(l.call(u||h,p,d,h))}),s},filter:function(l,u){var s=new t;return this.forEach(function(p,d,h){l.call(u||h,p,d,h)&&s.push(p)}),s},reduce:function(l,u,s){var p=0,d=this._head,h=this.length;for(u||(p=1,u=d&&d.data,d=d&&d.next);p<h&&d;)u=l.call(s||this,u,d.data,this),p++,d=d.next;return u}},r.exports=t})()}(fastList)),fastList.exports}var fastListExports=requireFastList();const LinkedList=getDefaultExportFromCjs(fastListExports);function floodFill(r={}){const{x:a=0,y:n=0,inPlace:t=!0}=r,l=t?this:Image$1.createFrom(this);if(this.checkProcessable("floodFill",{bitDepth:1}),this.getBitXY(a,n))return l;const s=new LinkedList;for(s.push(new Node(a,n));s.length>0;){const p=s.shift();l.setBitXY(p.x,p.y);for(let d=p.x+1;d<this.width&&(!l.getBitXY(d,p.y)&&!this.getBitXY(d,p.y));d++)l.setBitXY(d,p.y),p.y+1<this.height&&!this.getBitXY(d,p.y+1)&&s.push(new Node(d,p.y+1)),p.y-1>=0&&!this.getBitXY(d,p.y-1)&&s.push(new Node(d,p.y-1));for(let d=p.x-1;d>=0&&(!l.getBitXY(d,p.y)&&!this.getBitXY(d,p.y));d++)l.setBitXY(d,p.y),p.y+1<this.height&&!this.getBitXY(d,p.y+1)&&s.push(new Node(d,p.y+1)),p.y-1>=0&&!this.getBitXY(d,p.y-1)&&s.push(new Node(d,p.y-1))}return l}function Node(r,a){this.x=r,this.y=a}function _extends(){return _extends=Object.assign?Object.assign.bind():function(r){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)({}).hasOwnProperty.call(n,t)&&(r[t]=n[t])}return r},_extends.apply(null,arguments)}function hsv2rgb(r,a,n){a=a/100,n=n/100;var t=[],l=n*a,u=r/60,s=l*(1-Math.abs(u%2-1)),p=n-l;return u>=0&&u<1?t=[l,s,0]:u>=1&&u<2?t=[s,l,0]:u>=2&&u<3?t=[0,l,s]:r>=3&&u<4?t=[0,s,l]:r>=4&&u<5?t=[s,0,l]:r>=5&&u<=6?t=[l,0,s]:t=[0,0,0],{r:Math.round(255*(t[0]+p)),g:Math.round(255*(t[1]+p)),b:Math.round(255*(t[2]+p))}}function hsl2hsv(r,a,n){return a*=(n<50?n:100-n)/100,{h:r,s:2*a/(n+a)*100,v:n+a}}function hsl2rgb$1(r,a,n){var t=hsl2hsv(r,a,n);return hsv2rgb(t.h,t.s,t.v)}var colors={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]};function parse(r){return named(r)||hex3(r)||hex6(r)||rgb(r)||rgba$1(r)||hsl(r)||hsla(r)}function named(r){var a=colors[r.toLowerCase()];if(a)return{r:a[0],g:a[1],b:a[2],a:100}}function rgb(r){var a=r.match(/rgb\(([^)]+)\)/);if(a){var n=a[1].split(/ *, */).map(Number);return{r:n[0],g:n[1],b:n[2],a:100}}}function rgba$1(r){var a=r.match(/rgba\(([^)]+)\)/);if(a){var n=a[1].split(/ *, */).map(Number);return{r:n[0],g:n[1],b:n[2],a:n[3]*100}}}function hex6(r){if(r[0]==="#"&&r.length===7)return{r:parseInt(r.slice(1,3),16),g:parseInt(r.slice(3,5),16),b:parseInt(r.slice(5,7),16),a:100}}function hex3(r){if(r[0]==="#"&&r.length===4)return{r:parseInt(r[1]+r[1],16),g:parseInt(r[2]+r[2],16),b:parseInt(r[3]+r[3],16),a:100}}function hsl(r){var a=r.match(/hsl\(([^)]+)\)/);if(a){var n=a[1].split(/ *, */),t=parseInt(n[0],10),l=parseInt(n[1],10),u=parseInt(n[2],10),s=hsl2rgb$1(t,l,u);return _extends({},s,{a:100})}}function hsla(r){var a=r.match(/hsla\(([^)]+)\)/);if(a){var n=a[1].split(/ *, */),t=parseInt(n[0],10),l=parseInt(n[1],10),u=parseInt(n[2],10),s=parseInt(parseFloat(n[3])*100,10),p=hsl2rgb$1(t,l,u);return _extends({},p,{a:s})}}function css2array(r){let a=parse(r);return[a.r,a.g,a.b,Math.round(a.a*255/100)]}function hue2rgb(r,a,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?r+(a-r)*6*n:n<1/2?a:n<2/3?r+(a-r)*(2/3-n)*6:r}function hsl2rgb(r,a,n){let t,l,u,s,p,d;return a/=100,n/=100,a===0?s=p=d=n*255:(n<=.5?l=n*(a+1):l=n+a-n*a,t=n*2-l,u=r/360,s=hue2rgb(t,l,u+1/3),p=hue2rgb(t,l,u),d=hue2rgb(t,l,u-1/3)),{r:s,g:p,b:d}}function getDistinctColors(r){let a=new Array(r),n=0;for(let t=0;t<360;t+=360/r){n++;let l=hsl2rgb(t,100,30+n%4*15);a[n-1]=[Math.round(l.r*255),Math.round(l.g*255),Math.round(l.b*255)]}return a}function getRandomColor(){return[Math.floor(Math.random()*256),Math.floor(Math.random()*256),Math.floor(Math.random()*256)]}function getColors(r){let{color:a,colors:n,randomColors:t,numberColors:l=50}=r;if(a&&!Array.isArray(a)&&(a=css2array(a)),a)return[a];if(n)return n=n.map(function(u){return Array.isArray(u)?u:css2array(u)}),n;if(t){n=new Array(l);for(let u=0;u<l;u++)n[u]=getRandomColor()}return getDistinctColors(l)}function paintLabels(r,a,n={}){let{color:t="blue",colors:l,font:u="12px Helvetica",rotate:s=0}=n;if(this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:RGB$1}),!Array.isArray(r))throw Error("paintLabels: labels must be an array");if(!Array.isArray(a))throw Error("paintLabels: positions must be an array");if(t&&!Array.isArray(t)&&(t=css2array(t)),l?l=l.map(function(h){return Array.isArray(h)?h:css2array(h)}):l=[t],r.length!==a.length)throw Error("paintLabels: positions and labels must be arrays from the same size");Array.isArray(u)||(u=[u]),Array.isArray(s)||(s=[s]);let d=this.getCanvas().getContext("2d");for(let h=0;h<r.length;h++){d.save();let N=l[h%l.length];d.fillStyle=`rgba(${N[0]},${N[1]},${N[2]},${N[3]/this.maxValue})`,d.font=u[h%u.length];let Be=a[h];d.translate(Be[0],Be[1]),d.rotate(s[h%s.length]/180*Math.PI),d.fillText(r[h],0,0),d.restore()}return this.data=Uint8Array.from(d.getImageData(0,0,this.width,this.height).data),this}function paintMasks(r,a={}){let{alpha:n=255,labels:t=[],labelsPosition:l=[],labelColor:u="blue",labelFont:s="12px Helvetica"}=a;this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:RGB$1});let p=getColors(Object.assign({},a,{numberColors:r.length}));Array.isArray(r)||(r=[r]);for(let d=0;d<r.length;d++){let h=r[d],N=p[d%p.length];for(let Be=0;Be<h.width;Be++)for(let b=0;b<h.height;b++)if(h.getBitXY(Be,b))for(let E=0;E<Math.min(this.components,N.length);E++)if(n===255)this.setValueXY(Be+h.position[0],b+h.position[1],E,N[E]);else{let de=this.getValueXY(Be+h.position[0],b+h.position[1],E);de=Math.round((de*(255-n)+N[E]*n)/255),this.setValueXY(Be+h.position[0],b+h.position[1],E,de)}}if(Array.isArray(t)&&t.length>0){let h=this.getCanvas().getContext("2d");h.fillStyle=u,h.font=s;for(let N=0;N<Math.min(r.length,t.length);N++){let Be=l[N]?l[N]:r[N].position;h.fillText(t[N],Be[0],Be[1])}this.data=Uint8Array.from(h.getImageData(0,0,this.width,this.height).data)}return this}function zerosMatrix(r,a){let n=new Array(r);for(let t=0;t<r;t++)n[t]=new Array(a).fill(0);return n}const cross=[[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0]],smallCross=[[0,1,0],[1,1,1],[0,1,0]];class Shape{constructor(a={}){let{kind:n="cross",shape:t,size:l,width:u,height:s,filled:p=!0}=a;if(l&&(u=l,s=l),t)switch(t.toLowerCase()){case"square":case"rectangle":this.matrix=rectangle(u,s,{filled:p});break;case"circle":case"ellipse":this.matrix=ellipse(u,s,{filled:p});break;case"triangle":this.matrix=triangle(u,s,{filled:p});break;default:throw new Error(`Shape: unexpected shape: ${t}`)}else if(n)switch(n.toLowerCase()){case"cross":this.matrix=cross;break;case"smallcross":this.matrix=smallCross;break;default:throw new Error(`Shape: unexpected kind: ${n}`)}else throw new Error("Shape: expected a kind or a shape option");this.height=this.matrix.length,this.width=this.matrix[0].length,this.halfHeight=this.height/2>>0,this.halfWidth=this.width/2>>0}getPoints(){let a=this.matrix,n=[];for(let t=0;t<a.length;t++)for(let l=0;l<a[0].length;l++)a[t][l]&&n.push([l-this.halfWidth,t-this.halfHeight]);return n}getMask(){let a=new Image$1(this.width,this.height,{kind:BINARY});for(let n=0;n<this.matrix.length;n++)for(let t=0;t<this.matrix[0].length;t++)this.matrix[n][t]&&a.setBitXY(t,n);return a}}function rectangle(r,a,n){const t=zerosMatrix(a,r);if(n.filled)for(let l=0;l<a;l++)for(let u=0;u<r;u++)t[l][u]=1;else{for(let l of[0,a-1])for(let u=0;u<r;u++)t[l][u]=1;for(let l=0;l<a;l++)for(let u of[0,r-1])t[l][u]=1}return t}function ellipse(r,a,n){const t=zerosMatrix(a,r);let l=1-a%2,u=1-r%2,s=Math.floor((r-1)/2),p=Math.floor((a-1)/2),d=s*s,h=p*p;if(n.filled)for(let N=0;N<=p;N++){let Be=Math.floor(Math.sqrt(d-d*N*N/h));for(let b=s-Be;b<=s;b++)t[p-N][b]=1,t[p+N+l][b]=1,t[p-N][r-b-1]=1,t[p+N+l][r-b-1]=1}else{for(let N=0;N<=p;N++){let Be=Math.floor(Math.sqrt(d-d*N*N/h)),b=s-Be;t[p-N][b]=1,t[p+N+l][b]=1,t[p-N][r-b-1]=1,t[p+N+l][r-b-1]=1}for(let N=0;N<=s;N++){let Be=Math.floor(Math.sqrt(h-h*N*N/d)),b=p-Be;t[b][s-N]=1,t[b][s+N+u]=1,t[a-b-1][s-N]=1,t[a-b-1][s+N+u]=1}}return t}function triangle(r,a,n){if(!n.filled)throw new Error("Non filled triangle is not implemented");const t=zerosMatrix(a,r);for(let l=0;l<a;l++){let u=Math.floor((1-l/a)*r/2);for(let s=u;s<r-u;s++)t[l][s]=1}return t}function paintPoints(r,a={}){let{shape:n}=a;this.checkProcessable("paintPoints",{bitDepth:[8,16]});let t=getColors(Object.assign({},a,{numberColors:r.length})),l=new Shape(n).getPoints(),u=Math.min(this.channels,t[0].length);for(let s=0;s<r.length;s++){let p=t[s%t.length],d=r[s][0],h=r[s][1];for(let N=0;N<l.length;N++){let Be=l[N][0],b=l[N][1];if(d+Be>=0&&h+b>=0&&d+Be<this.width&&h+b<this.height){let E=(d+Be+(h+b)*this.width)*this.channels;for(let de=0;de<u;de++)this.data[E+de]=p[de]}}}return this}function paintPolyline(r,a={}){let{color:n=[this.maxValue,0,0],closed:t=!1}=a;this.checkProcessable("paintPoints",{bitDepth:[1,8,16]});let l=Math.min(this.channels,n.length);for(let u=0;u<r.length-1+t;u++){let s=r[u],p=r[(u+1)%r.length],d=p[0]-s[0],h=p[1]-s[1],N=Math.max(Math.abs(d),Math.abs(h)),Be=d/N,b=h/N,E=s[0],de=s[1];for(let pe=0;pe<=N;pe++){let Ye=Math.round(E),me=Math.round(de);if(Ye>=0&&me>=0&&Ye<this.width&&me<this.height)if(this.bitDepth===1)this.setBitXY(Ye,me);else{let Le=(Ye+me*this.width)*this.channels;for(let nt=0;nt<l;nt++)this.data[Le+nt]=n[nt]}E=E+Be,de=de+b}}return this}function paintPolylines(r,a={}){let n=Object.assign({},a);this.checkProcessable("paintPolylines",{bitDepth:[8,16]});let t=getColors(Object.assign({},a,{numberColors:r.length}));for(let l=0;l<r.length;l++)n.color=t[l%t.length],this.paintPolyline(r[l],n);return this}function paintPolygon(r,a={}){let{color:n=[this.maxValue,0,0],filled:t=!1}=a;this.checkProcessable("paintPoints",{bitDepth:[1,8,16]}),a.closed=!0;let l=deleteDouble(r);if(t===!1)return this.paintPolyline(r,a);{let u=Array(this.height);for(let s=0;s<this.height;s++){u[s]=[];for(let p=0;p<this.width;p++)u[s].push(0)}for(let s=0;s<l.length;s++){const p=lineBetweenTwoPoints(l[s],l[(s+1)%l.length]);for(let d=0;d<this.height;d++)for(let h=0;h<this.width;h++)isAtTheRightOfTheLine(h,d,p,this.height)&&(u[d][h]=u[d][h]===0?1:0)}for(let s=0;s<this.height;s++)for(let p=0;p<this.width;p++)if(u[s][p]===1)if(this.bitDepth===1)this.setBitXY(p,s);else{let d=Math.min(this.channels,n.length),h=(p+s*this.width)*this.channels;for(let N=0;N<d;N++)this.data[h+N]=n[N]}return this.paintPolyline(r,a)}}function deleteDouble(r){let a=[];for(let n=0;n<r.length;n++)if(!(r[n][0]===r[(n+1)%r.length][0]&&r[n][1]===r[(n+1)%r.length][1])){if(r[n][0]===r[(n-1+r.length)%r.length][0]&&r[n][1]===r[(n-1+r.length)%r.length][1])continue;if(r[(n+1)%r.length][0]===r[(n-1+r.length)%r.length][0]&&r[(n-1+r.length)%r.length][1]===r[(n+1)%r.length][1])continue;a.push(r[n])}return a}function lineBetweenTwoPoints(r,a){if(r[0]===a[0])return{a:0,b:r[0],vertical:!0};{const n=(a[1]-r[1])/(a[0]-r[0]),t=r[1]-n*r[0];return{a:n,b:t,vertical:!1}}}function isAtTheRightOfTheLine(r,a,n,t){if(n.vertical===!0)return n.b<=r;if(n.a===0)return!1;{const l=(a-n.b)/n.a;return l<r&&l>=0&&l<=t}}function paintPolygons(r,a={}){let n=Object.assign({},a);this.checkProcessable("paintPolygons",{bitDepth:[8,16]});let t=getColors(Object.assign({},a,{numberColors:r.length}));for(let l=0;l<r.length;l++)n.color=t[l%t.length],this.paintPolygon(r[l],n);return this}function getHistogram(r={}){let{maxSlots:a=256,channel:n,useAlpha:t=!0}=r;if(this.checkProcessable("getHistogram",{bitDepth:[1,8,16]}),n===void 0){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");n=0}return getChannelHistogram.call(this,n,{useAlpha:t,maxSlots:a})}function getHistograms(r={}){const{maxSlots:a=256,useAlpha:n=!0}=r;this.checkProcessable("getHistograms",{bitDepth:[8,16]});let t=new Array(n?this.components:this.channels);for(let l=0;l<t.length;l++)t[l]=getChannelHistogram.call(this,l,{useAlpha:n,maxSlots:a});return t}function getChannelHistogram(r,a){let{useAlpha:n,maxSlots:t}=a;if(this.bitDepth===1){let d=[0,0];for(let h=0;h<this.height;h++)for(let N=0;N<this.width;N++){let Be=this.getBitXY(h,N);Be===0?d[0]+=1:Be===1&&(d[1]+=1)}return d}let l=Math.log2(t);if(!isInteger$1(l))throw new RangeError("maxSlots must be a power of 2, for example: 64, 256, 1024");let u=0;this.bitDepth>l&&(u=this.bitDepth-l);let s=this.data,p=newArray(Math.pow(2,Math.min(this.bitDepth,l)),0);if(n&&this.alpha){let d=this.channels-r-1;for(let h=r;h<s.length;h+=this.channels)p[s[h]>>u]+=s[h+d]/this.maxValue}else for(let d=r;d<s.length;d+=this.channels)p[s[d]>>u]++;return p}function getColorHistogram(r={}){let{useAlpha:a=!0,nbSlots:n=512}=r;this.checkProcessable("getColorHistogram",{bitDepth:[8,16],components:[3]});let t=Math.log(n)/Math.log(8);if(t!==Math.floor(t))throw new RangeError("nbSlots must be a power of 8. Usually 8, 64, 512 or 4096");let l=this.bitDepth-t,u=this.data,s=newArray(Math.pow(8,t),0),p=Math.pow(2,t*2),d=Math.pow(2,t);for(let h=0;h<u.length;h+=this.channels){let N=(u[h]>>l)*p+(u[h+1]>>l)*d+(u[h+2]>>l);a&&this.alpha?s[N]+=u[h+this.channels-1]/this.maxValue:s[N]++}return s}function min(){this.checkProcessable("min",{bitDepth:[8,16,32]});let r=newArray(this.channels,1/0);for(let a=0;a<this.data.length;a+=this.channels)for(let n=0;n<this.channels;n++)this.data[a+n]<r[n]&&(r[n]=this.data[a+n]);return r}function max(){this.checkProcessable("max",{bitDepth:[8,16,32]});let r=newArray(this.channels,-1/0);for(let a=0;a<this.data.length;a+=this.channels)for(let n=0;n<this.channels;n++)this.data[a+n]>r[n]&&(r[n]=this.data[a+n]);return r}function sum(){this.checkProcessable("sum",{bitDepth:[8,16]});let r=newArray(this.channels,0);for(let a=0;a<this.data.length;a+=this.channels)for(let n=0;n<this.channels;n++)r[n]+=this.data[a+n];return r}function getMoment(r=0,a=0){this.checkProcessable("getMoment",{bitDepth:[1]});let n=0;for(let t=0;t<this.width;t++)for(let l=0;l<this.height;l++)this.getBitXY(t,l)===1&&(n+=t**r*l**a);return n}function localMaxima(r={}){let{mask:a,region:n=3,removeClosePoints:t=0,invert:l=!1,maxEquals:u=2}=r,s=this;this.checkProcessable("localMaxima",{bitDepth:[8,16],components:1}),n*=4;let p=l?0:1,d=[1,0,-1,0,1,1,-1,-1,2,0,-2,0,2,2,-2,-2],h=[0,1,0,-1,1,-1,1,-1,0,2,0,-2,2,-2,2,-2],N=n<=8?1:2,Be=[];for(let b=N;b<s.height-N;b++)for(let E=N;E<s.width-N;E++){if(a&&a.getBitXY(E,b)!==p)continue;let de=0,pe=0,Ye=s.data[E+b*s.width];for(let me=0;me<n;me++)l?s.data[E+d[me]+(b+h[me])*s.width]>Ye&&de++:s.data[E+d[me]+(b+h[me])*s.width]<Ye&&de++,s.data[E+d[me]+(b+h[me])*s.width]===Ye&&pe++;de+pe===n&&pe<=u&&Be.push([E,b])}if(t>0)for(let b=0;b<Be.length;b++)for(let E=b+1;E<Be.length;E++)Math.sqrt(Math.pow(Be[b][0]-Be[E][0],2)+Math.pow(Be[b][1]-Be[E][1],2))<t&&(Be[b][0]=Be[b][0]+Be[E][0]>>1,Be[b][1]=Be[b][1]+Be[E][1]>>1,Be.splice(E,1),E--);return Be}function mean(){let r=this.getHistograms({maxSlots:this.maxValue+1}),a=new Array(r.length);for(let n=0;n<r.length;n++){let t=r[n];a[n]=mean$2(t)}return a}function median(){let r=this.getHistograms({maxSlots:this.maxValue+1}),a=new Array(r.length);for(let n=0;n<r.length;n++){let t=r[n];a[n]=median$2(t)}return a}function points(){this.checkProcessable("points",{bitDepth:[1]});const r=[];for(let a=0;a<this.width;a++)for(let n=0;n<this.height;n++)this.getBitXY(a,n)===1&&r.push([a,n]);return r}function extendedPoints(){this.checkProcessable("extendedPoints",{bitDepth:[1]});const r=[];for(let a=0;a<this.height;a++)for(let n=0;n<this.width;n++)if(this.getBitXY(n,a)===1)for(r.push([n,a]),this.getBitXY(n+1,a)!==1?(r.push([n+1,a]),r.push([n+1,a+1]),this.getBitXY(n,a+1)!==1&&r.push([n,a+1])):this.getBitXY(n,a+1)!==1&&(r.push([n,a+1]),r.push([n+1,a+1]));n<this.width-2&&this.getBitXY(n+1,a)===1&&this.getBitXY(n+2,a)===1;)n++;return r}function getRelativePosition(r,a={}){if(this===r)return[0,0];let n=[0,0],t=this;for(;t;){if(t===r)return n;t.position&&(n[0]+=t.position[0],n[1]+=t.position[1]),t=t.parent}return a.defaultFurther?n:!1}function countAlphaPixels(r={}){let{alpha:a=1}=r;this.checkProcessable("countAlphaPixels",{bitDepth:[8,16],alpha:1});let n=0;if(a!==void 0){for(let t=this.components;t<this.data.length;t+=this.channels)this.data[t]===a&&n++;return n}else return this.size}function monotoneChainConvexHull$1(r,a={}){const{sorted:n}=a;n||(r=r.slice().sort(byXThenY));const t=r.length,l=new Array(t*2);let u=0;for(let p=0;p<t;p++){const d=r[p];for(;u>=2&&cw(l[u-2],l[u-1],d)<=0;)u--;l[u++]=d}const s=u+1;for(let p=t-2;p>=0;p--){const d=r[p];for(;u>=s&&cw(l[u-2],l[u-1],d)<=0;)u--;l[u++]=d}return l.slice(0,u-1)}function cw(r,a,n){return(a[1]-r[1])*(n[0]-r[0])-(a[0]-r[0])*(n[1]-r[1])}function byXThenY(r,a){return r[0]===a[0]?r[1]-a[1]:r[0]-a[0]}function monotoneChainConvexHull(){return monotoneChainConvexHull$1(this.extendedPoints,{sorted:!1})}function round(r){for(let a=0;a<r.length;a++)r[a][0]=Math.round(r[a][0]),r[a][1]=Math.round(r[a][1]);return r}function difference(r,a){return[r[0]-a[0],r[1]-a[1]]}function normalize(r){let a=Math.sqrt(r[0]**2+r[1]**2);return[r[0]/a,r[1]/a]}function rotate(r,a,n){n===void 0&&(n=new Array(a.length));let t=Math.cos(r),l=Math.sin(r);for(let u=0;u<n.length;++u)n[u]=[t*a[u][0]-l*a[u][1],l*a[u][0]+t*a[u][1]];return n}function perimeter(r){let a=0;for(let n=0;n<r.length;n++){let t=r[n][0],l=r[n][1],u=r[n===r.length-1?0:n+1][0],s=r[n===r.length-1?0:n+1][1];a+=Math.sqrt((u-t)**2+(s-l)**2)}return a}function surface(r){let a=0;for(let n=0;n<r.length;n++){let t=r[n][0],l=r[n===r.length-1?0:n+1][1],u=r[n===r.length-1?0:n+1][0],s=r[n][1];a+=t*l*.5,a-=u*s*.5}return Math.abs(a)}function minMax(r){let a=1/0,n=1/0,t=-1/0,l=-1/0;for(let u=0;u<r.length;u++)r[u][0]<a&&(a=r[u][0]),r[u][0]>t&&(t=r[u][0]),r[u][1]<n&&(n=r[u][1]),r[u][1]>l&&(l=r[u][1]);return[[a,n],[t,l]]}function moveToZeroZero(r,a){a===void 0&&(a=new Array(r.length).fill(0).map(()=>[]));let n=minMax(r),t=n[0][0],l=n[0][1];for(let u=0;u<r.length;u++)a[u][0]=r[u][0]-t,a[u][1]=r[u][1]-l;return a}function minimalBoundingRectangle(r={}){const{originalPoints:a=monotoneChainConvexHull.call(this)}=r;if(a.length===0)return[];if(a.length===1)return[a[0],a[0],a[0],a[0]];const n=new Array(a.length);let t=1/0,l=0,u;for(let s=0;s<n.length;s++){let p=getAngle$1(a[s],a[(s+1)%n.length]);rotate(-p,a,n);let d=n[s][0],h=n[s][1],N=n[(s+1)%n.length][0],Be=n[(s+1)%n.length][1],b=!0,E=0,de=0,pe=0;for(let nt=0;nt<n.length;nt++){let tt=n[nt][0],ft=n[nt][1],yt=(tt-d)/(N-d);b===!0?(b=!1,E=yt,de=yt):(yt<E&&(E=yt),yt>de&&(de=yt));let gt=(-(N-d)*ft+N*h-Be*d)/(N-d);Math.abs(gt)>Math.abs(pe)&&(pe=gt)}let Ye=[d+E*(N-d),h],me=[d+de*(N-d),h],Le=Math.abs(pe*(E-de)*(N-d));Le<t&&(l=p,t=Le,u=[Ye,me,[me[0],me[1]-pe],[Ye[0],Ye[1]-pe]])}return rotate(l,u,u),u}function getAngle$1(r,a){let n=difference(a,r),t=normalize(n),l=Math.acos(t[0]);return t[1]<0?-l:l}function extend$2(r){let a={inPlace:!0};r.extendMethod("invert",invert),r.extendMethod("abs",abs),r.extendMethod("level",level,a),r.extendMethod("add",add,a),r.extendMethod("subtract",subtract,a),r.extendMethod("subtractImage",subtractImage),r.extendMethod("multiply",multiply,a),r.extendMethod("divide",divide,a),r.extendMethod("hypotenuse",hypotenuse),r.extendMethod("background",background$1),r.extendMethod("flipX",flipX),r.extendMethod("flipY",flipY),r.extendMethod("blurFilter",blurFilter),r.extendMethod("medianFilter",medianFilter),r.extendMethod("gaussianFilter",gaussianFilter),r.extendMethod("sobelFilter",sobelFilter),r.extendMethod("gradientFilter",gradientFilter),r.extendMethod("scharrFilter",scharrFilter),r.extendMethod("dilate",dilate),r.extendMethod("erode",erode),r.extendMethod("open",open),r.extendMethod("close",close),r.extendMethod("topHat",topHat),r.extendMethod("blackHat",blackHat),r.extendMethod("morphologicalGradient",morphologicalGradient),r.extendMethod("warpingFourPoints",warpingFourPoints),r.extendMethod("crop",crop),r.extendMethod("cropAlpha",cropAlpha),r.extendMethod("resize",resize).extendMethod("scale",resize),r.extendMethod("hsv",hsv),r.extendMethod("hsl",hsl$1),r.extendMethod("cmyk",cmyk),r.extendMethod("rgba8",rgba8),r.extendMethod("grey",grey).extendMethod("gray",grey),r.extendMethod("mask",mask),r.extendMethod("pad",pad),r.extendMethod("colorDepth",colorDepth),r.extendMethod("setBorder",setBorder,a),r.extendMethod("rotate",rotate$1),r.extendMethod("rotateLeft",rotateLeft),r.extendMethod("rotateRight",rotateRight),r.extendMethod("insert",insert),r.extendMethod("getRow",getRow),r.extendMethod("getColumn",getColumn),r.extendMethod("getMatrix",getMatrix),r.extendMethod("setMatrix",setMatrix),r.extendMethod("getPixelsArray",getPixelsArray),r.extendMethod("getIntersection",getIntersection),r.extendMethod("getClosestCommonParent",getClosestCommonParent),r.extendMethod("getThreshold",getThreshold),r.extendMethod("split",split),r.extendMethod("getChannel",getChannel),r.extendMethod("combineChannels",combineChannels),r.extendMethod("setChannel",setChannel),r.extendMethod("getSimilarity",getSimilarity),r.extendMethod("getPixelsGrid",getPixelsGrid),r.extendMethod("getBestMatch",getBestMatch),r.extendMethod("cannyEdge",cannyEdge),r.extendMethod("convolution",convolution),r.extendMethod("extract",extract),r.extendMethod("floodFill",floodFill),r.extendMethod("paintLabels",paintLabels,a),r.extendMethod("paintMasks",paintMasks,a),r.extendMethod("paintPoints",paintPoints,a),r.extendMethod("paintPolyline",paintPolyline,a),r.extendMethod("paintPolylines",paintPolylines,a),r.extendMethod("paintPolygon",paintPolygon,a),r.extendMethod("paintPolygons",paintPolygons,a),r.extendMethod("countAlphaPixels",countAlphaPixels),r.extendMethod("monotoneChainConvexHull",monotoneChainConvexHull),r.extendMethod("minimalBoundingRectangle",minimalBoundingRectangle),r.extendMethod("getHistogram",getHistogram).extendProperty("histogram",getHistogram),r.extendMethod("getHistograms",getHistograms).extendProperty("histograms",getHistograms),r.extendMethod("getColorHistogram",getColorHistogram).extendProperty("colorHistogram",getColorHistogram),r.extendMethod("getMin",min).extendProperty("min",min),r.extendMethod("getMax",max).extendProperty("max",max),r.extendMethod("getSum",sum).extendProperty("sum",sum),r.extendMethod("getMoment",getMoment).extendProperty("moment",getMoment),r.extendMethod("getLocalMaxima",localMaxima),r.extendMethod("getMedian",median).extendProperty("median",median),r.extendMethod("getMean",mean).extendProperty("mean",mean),r.extendMethod("getPoints",points).extendProperty("points",points),r.extendMethod("getExtendedPoints",extendedPoints).extendProperty("extendedPoints",extendedPoints),r.extendMethod("getRelativePosition",getRelativePosition)}var quantities$1={exports:{}},quantities=quantities$1.exports,hasRequiredQuantities;function requireQuantities(){return hasRequiredQuantities||(hasRequiredQuantities=1,function(r,a){(function(n,t){r.exports=t()})(quantities,function(){function n(Ft){return typeof Ft=="string"||Ft instanceof String}var t=Number.isFinite||window.isFinite;function l(Ft){return t(Ft)}function u(Ft){return Ft}function s(Ft){var Tt={};return Ft.filter(function(jt){return Tt.hasOwnProperty(jt)?!1:Tt[jt]=!0})}function p(Ft,Tt){if(Tt.length!==Ft.length)return!1;for(var jt=0;jt<Ft.length;jt++)if(Tt[jt].compareArray&&!Tt[jt].compareArray(Ft[jt])||Tt[jt]!==Ft[jt])return!1;return!0}function d(Ft,Tt){Object.keys(Tt).forEach(function(jt){Ft[jt]=Tt[jt]})}function h(){for(var Ft=1,Tt=0,jt=0;jt<arguments.length;jt++){var xt=arguments[jt];Tt=Tt+b(xt),Ft*=xt}return Tt!==0?Be(Ft,Tt):Ft}function N(Ft,Tt){if(Tt===0)throw new Error("Divide by zero");var jt=Math.pow(10,b(Tt)),xt=jt/(jt*Tt);return h(Ft,xt)}function Be(Ft,Tt){return Math.round(Ft*Math.pow(10,Tt))/Math.pow(10,Tt)}function b(Ft){if(!isFinite(Ft))return 0;for(var Tt=0;Ft%1!==0;)Ft*=10,Tt++;return Tt}function E(){var Ft;if(!this)return Ft=Object.create(E.prototype),E.apply(Ft,arguments),Ft;Ft=Error.apply(this,arguments),this.name="QtyError",this.message=Ft.message,this.stack=Ft.stack}E.prototype=Object.create(Error.prototype,{constructor:{value:E}});function de(Ft,Tt){throw new E("Incompatible units: "+Ft+" and "+Tt)}var pe={"<googol>":[["googol"],1e100,"prefix"],"<kibi>":[["Ki","Kibi","kibi"],Math.pow(2,10),"prefix"],"<mebi>":[["Mi","Mebi","mebi"],Math.pow(2,20),"prefix"],"<gibi>":[["Gi","Gibi","gibi"],Math.pow(2,30),"prefix"],"<tebi>":[["Ti","Tebi","tebi"],Math.pow(2,40),"prefix"],"<pebi>":[["Pi","Pebi","pebi"],Math.pow(2,50),"prefix"],"<exi>":[["Ei","Exi","exi"],Math.pow(2,60),"prefix"],"<zebi>":[["Zi","Zebi","zebi"],Math.pow(2,70),"prefix"],"<yebi>":[["Yi","Yebi","yebi"],Math.pow(2,80),"prefix"],"<yotta>":[["Y","Yotta","yotta"],1e24,"prefix"],"<zetta>":[["Z","Zetta","zetta"],1e21,"prefix"],"<exa>":[["E","Exa","exa"],1e18,"prefix"],"<peta>":[["P","Peta","peta"],1e15,"prefix"],"<tera>":[["T","Tera","tera"],1e12,"prefix"],"<giga>":[["G","Giga","giga"],1e9,"prefix"],"<mega>":[["M","Mega","mega"],1e6,"prefix"],"<kilo>":[["k","kilo"],1e3,"prefix"],"<hecto>":[["h","Hecto","hecto"],100,"prefix"],"<deca>":[["da","Deca","deca","deka"],10,"prefix"],"<deci>":[["d","Deci","deci"],.1,"prefix"],"<centi>":[["c","Centi","centi"],.01,"prefix"],"<milli>":[["m","Milli","milli"],.001,"prefix"],"<micro>":[["u","","","Micro","mc","micro"],1e-6,"prefix"],"<nano>":[["n","Nano","nano"],1e-9,"prefix"],"<pico>":[["p","Pico","pico"],1e-12,"prefix"],"<femto>":[["f","Femto","femto"],1e-15,"prefix"],"<atto>":[["a","Atto","atto"],1e-18,"prefix"],"<zepto>":[["z","Zepto","zepto"],1e-21,"prefix"],"<yocto>":[["y","Yocto","yocto"],1e-24,"prefix"],"<1>":[["1","<1>"],1,""],"<meter>":[["m","meter","meters","metre","metres"],1,"length",["<meter>"]],"<inch>":[["in","inch","inches",'"'],.0254,"length",["<meter>"]],"<foot>":[["ft","foot","feet","'"],.3048,"length",["<meter>"]],"<yard>":[["yd","yard","yards"],.9144,"length",["<meter>"]],"<mile>":[["mi","mile","miles"],1609.344,"length",["<meter>"]],"<naut-mile>":[["nmi","naut-mile"],1852,"length",["<meter>"]],"<league>":[["league","leagues"],4828,"length",["<meter>"]],"<furlong>":[["furlong","furlongs"],201.2,"length",["<meter>"]],"<rod>":[["rd","rod","rods"],5.029,"length",["<meter>"]],"<mil>":[["mil","mils"],254e-7,"length",["<meter>"]],"<angstrom>":[["ang","angstrom","angstroms"],1e-10,"length",["<meter>"]],"<fathom>":[["fathom","fathoms"],1.829,"length",["<meter>"]],"<pica>":[["pica","picas"],.00423333333,"length",["<meter>"]],"<point>":[["pt","point","points"],.000352777778,"length",["<meter>"]],"<redshift>":[["z","red-shift","redshift"],1302773e20,"length",["<meter>"]],"<AU>":[["AU","astronomical-unit"],1495979e5,"length",["<meter>"]],"<light-second>":[["ls","light-second"],299792500,"length",["<meter>"]],"<light-minute>":[["lmin","light-minute"],1798755e4,"length",["<meter>"]],"<light-year>":[["ly","light-year"],9460528e9,"length",["<meter>"]],"<parsec>":[["pc","parsec","parsecs"],3085678e10,"length",["<meter>"]],"<datamile>":[["DM","datamile"],1828.8,"length",["<meter>"]],"<kilogram>":[["kg","kilogram","kilograms"],1,"mass",["<kilogram>"]],"<AMU>":[["u","AMU","amu"],1660538921e-36,"mass",["<kilogram>"]],"<dalton>":[["Da","Dalton","Daltons","dalton","daltons"],1660538921e-36,"mass",["<kilogram>"]],"<slug>":[["slug","slugs"],14.5939029,"mass",["<kilogram>"]],"<short-ton>":[["tn","ton","short-ton"],907.18474,"mass",["<kilogram>"]],"<metric-ton>":[["t","tonne","metric-ton"],1e3,"mass",["<kilogram>"]],"<carat>":[["ct","carat","carats"],2e-4,"mass",["<kilogram>"]],"<pound>":[["lbs","lb","pound","pounds","#"],.45359237,"mass",["<kilogram>"]],"<ounce>":[["oz","ounce","ounces"],.0283495231,"mass",["<kilogram>"]],"<gram>":[["g","gram","grams","gramme","grammes"],.001,"mass",["<kilogram>"]],"<grain>":[["grain","grains","gr"],6479891e-11,"mass",["<kilogram>"]],"<dram>":[["dram","drams","dr"],.0017718452,"mass",["<kilogram>"]],"<stone>":[["stone","stones","st"],6.35029318,"mass",["<kilogram>"]],"<hectare>":[["hectare"],1e4,"area",["<meter>","<meter>"]],"<acre>":[["acre","acres"],4046.85642,"area",["<meter>","<meter>"]],"<sqft>":[["sqft"],1,"area",["<foot>","<foot>"]],"<liter>":[["l","L","liter","liters","litre","litres"],.001,"volume",["<meter>","<meter>","<meter>"]],"<gallon>":[["gal","gallon","gallons"],.0037854118,"volume",["<meter>","<meter>","<meter>"]],"<gallon-imp>":[["galimp","gallon-imp","gallons-imp"],.00454609,"volume",["<meter>","<meter>","<meter>"]],"<quart>":[["qt","quart","quarts"],.00094635295,"volume",["<meter>","<meter>","<meter>"]],"<pint>":[["pt","pint","pints"],.000473176475,"volume",["<meter>","<meter>","<meter>"]],"<pint-imp>":[["ptimp","pint-imp","pints-imp"],.00056826125,"volume",["<meter>","<meter>","<meter>"]],"<cup>":[["cu","cup","cups"],.000236588238,"volume",["<meter>","<meter>","<meter>"]],"<fluid-ounce>":[["floz","fluid-ounce","fluid-ounces"],295735297e-13,"volume",["<meter>","<meter>","<meter>"]],"<fluid-ounce-imp>":[["flozimp","floz-imp","fluid-ounce-imp","fluid-ounces-imp"],284130625e-13,"volume",["<meter>","<meter>","<meter>"]],"<tablespoon>":[["tb","tbsp","tbs","tablespoon","tablespoons"],147867648e-13,"volume",["<meter>","<meter>","<meter>"]],"<teaspoon>":[["tsp","teaspoon","teaspoons"],492892161e-14,"volume",["<meter>","<meter>","<meter>"]],"<bushel>":[["bu","bsh","bushel","bushels"],.035239072,"volume",["<meter>","<meter>","<meter>"]],"<oilbarrel>":[["bbl","oilbarrel","oilbarrels","oil-barrel","oil-barrels"],.158987294928,"volume",["<meter>","<meter>","<meter>"]],"<beerbarrel>":[["bl","bl-us","beerbarrel","beerbarrels","beer-barrel","beer-barrels"],.1173477658,"volume",["<meter>","<meter>","<meter>"]],"<beerbarrel-imp>":[["blimp","bl-imp","beerbarrel-imp","beerbarrels-imp","beer-barrel-imp","beer-barrels-imp"],.16365924,"volume",["<meter>","<meter>","<meter>"]],"<kph>":[["kph"],.277777778,"speed",["<meter>"],["<second>"]],"<mph>":[["mph"],.44704,"speed",["<meter>"],["<second>"]],"<knot>":[["kt","kn","kts","knot","knots"],.514444444,"speed",["<meter>"],["<second>"]],"<fps>":[["fps"],.3048,"speed",["<meter>"],["<second>"]],"<gee>":[["gee"],9.80665,"acceleration",["<meter>"],["<second>","<second>"]],"<Gal>":[["Gal"],.01,"acceleration",["<meter>"],["<second>","<second>"]],"<kelvin>":[["degK","kelvin"],1,"temperature",["<kelvin>"]],"<celsius>":[["degC","celsius","celsius","centigrade"],1,"temperature",["<kelvin>"]],"<fahrenheit>":[["degF","fahrenheit"],5/9,"temperature",["<kelvin>"]],"<rankine>":[["degR","rankine"],5/9,"temperature",["<kelvin>"]],"<temp-K>":[["tempK","temp-K"],1,"temperature",["<temp-K>"]],"<temp-C>":[["tempC","temp-C"],1,"temperature",["<temp-K>"]],"<temp-F>":[["tempF","temp-F"],5/9,"temperature",["<temp-K>"]],"<temp-R>":[["tempR","temp-R"],5/9,"temperature",["<temp-K>"]],"<second>":[["s","sec","secs","second","seconds"],1,"time",["<second>"]],"<minute>":[["min","mins","minute","minutes"],60,"time",["<second>"]],"<hour>":[["h","hr","hrs","hour","hours"],3600,"time",["<second>"]],"<day>":[["d","day","days"],3600*24,"time",["<second>"]],"<week>":[["wk","week","weeks"],7*3600*24,"time",["<second>"]],"<fortnight>":[["fortnight","fortnights"],1209600,"time",["<second>"]],"<year>":[["y","yr","year","years","annum"],31556926,"time",["<second>"]],"<decade>":[["decade","decades"],315569260,"time",["<second>"]],"<century>":[["century","centuries"],3155692600,"time",["<second>"]],"<pascal>":[["Pa","pascal","Pascal"],1,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<bar>":[["bar","bars"],1e5,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<mmHg>":[["mmHg"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inHg>":[["inHg"],3386.3881472,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<torr>":[["torr"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<atm>":[["atm","ATM","atmosphere","atmospheres"],101325,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<psi>":[["psi"],6894.76,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<cmh2o>":[["cmH2O","cmh2o"],98.0638,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inh2o>":[["inH2O","inh2o"],249.082052,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<poise>":[["P","poise"],.1,"viscosity",["<kilogram>"],["<meter>","<second>"]],"<stokes>":[["St","stokes"],1e-4,"viscosity",["<meter>","<meter>"],["<second>"]],"<mole>":[["mol","mole"],1,"substance",["<mole>"]],"<molar>":[["M","molar"],1e3,"molar_concentration",["<mole>"],["<meter>","<meter>","<meter>"]],"<wtpercent>":[["wt%","wtpercent"],10,"molar_concentration",["<kilogram>"],["<meter>","<meter>","<meter>"]],"<katal>":[["kat","katal","Katal"],1,"activity",["<mole>"],["<second>"]],"<unit>":[["U","enzUnit","unit"],16667e-19,"activity",["<mole>"],["<second>"]],"<farad>":[["F","farad","Farad"],1,"capacitance",["<second>","<second>","<second>","<second>","<ampere>","<ampere>"],["<meter>","<meter>","<kilogram>"]],"<coulomb>":[["C","coulomb","Coulomb"],1,"charge",["<ampere>","<second>"]],"<Ah>":[["Ah"],3600,"charge",["<ampere>","<second>"]],"<ampere>":[["A","Ampere","ampere","amp","amps"],1,"current",["<ampere>"]],"<siemens>":[["S","Siemens","siemens"],1,"conductance",["<second>","<second>","<second>","<ampere>","<ampere>"],["<kilogram>","<meter>","<meter>"]],"<henry>":[["H","Henry","henry"],1,"inductance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>","<ampere>"]],"<volt>":[["V","Volt","volt","volts"],1,"potential",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>"]],"<ohm>":[["Ohm","ohm","",""],1,"resistance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>","<ampere>"]],"<weber>":[["Wb","weber","webers"],1,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<tesla>":[["T","tesla","teslas"],1,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<gauss>":[["G","gauss"],1e-4,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<maxwell>":[["Mx","maxwell","maxwells"],1e-8,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<oersted>":[["Oe","oersted","oersteds"],250/Math.PI,"magnetism",["<ampere>"],["<meter>"]],"<joule>":[["J","joule","Joule","joules","Joules"],1,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<erg>":[["erg","ergs"],1e-7,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<btu>":[["BTU","btu","BTUs"],1055.056,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<calorie>":[["cal","calorie","calories"],4.184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<Calorie>":[["Cal","Calorie","Calories"],4184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<therm-US>":[["th","therm","therms","Therm","therm-US"],105480400,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<Wh>":[["Wh"],3600,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<electronvolt>":[["eV","electronvolt","electronvolts"],1602176634e-28,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<newton>":[["N","Newton","newton"],1,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<dyne>":[["dyn","dyne"],1e-5,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<pound-force>":[["lbf","pound-force"],4.448222,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<hertz>":[["Hz","hertz","Hertz"],1,"frequency",["<1>"],["<second>"]],"<radian>":[["rad","radian","radians"],1,"angle",["<radian>"]],"<degree>":[["deg","degree","degrees"],Math.PI/180,"angle",["<radian>"]],"<arcminute>":[["arcmin","arcminute","arcminutes"],Math.PI/10800,"angle",["<radian>"]],"<arcsecond>":[["arcsec","arcsecond","arcseconds"],Math.PI/648e3,"angle",["<radian>"]],"<gradian>":[["gon","grad","gradian","grads"],Math.PI/200,"angle",["<radian>"]],"<steradian>":[["sr","steradian","steradians"],1,"solid_angle",["<steradian>"]],"<rotation>":[["rotation"],2*Math.PI,"angle",["<radian>"]],"<rpm>":[["rpm"],2*Math.PI/60,"angular_velocity",["<radian>"],["<second>"]],"<byte>":[["B","byte","bytes"],1,"information",["<byte>"]],"<bit>":[["b","bit","bits"],.125,"information",["<byte>"]],"<Bps>":[["Bps"],1,"information_rate",["<byte>"],["<second>"]],"<bps>":[["bps"],.125,"information_rate",["<byte>"],["<second>"]],"<dollar>":[["USD","dollar"],1,"currency",["<dollar>"]],"<cents>":[["cents"],.01,"currency",["<dollar>"]],"<candela>":[["cd","candela"],1,"luminosity",["<candela>"]],"<lumen>":[["lm","lumen"],1,"luminous_power",["<candela>","<steradian>"]],"<lux>":[["lux"],1,"illuminance",["<candela>","<steradian>"],["<meter>","<meter>"]],"<watt>":[["W","watt","watts"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<volt-ampere>":[["VA","volt-ampere"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<volt-ampere-reactive>":[["var","Var","VAr","VAR","volt-ampere-reactive"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<horsepower>":[["hp","horsepower"],745.699872,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<gray>":[["Gy","gray","grays"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<roentgen>":[["R","roentgen"],.00933,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<sievert>":[["Sv","sievert","sieverts"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<becquerel>":[["Bq","becquerel","becquerels"],1,"radiation",["<1>"],["<second>"]],"<curie>":[["Ci","curie","curies"],37e9,"radiation",["<1>"],["<second>"]],"<cpm>":[["cpm"],1/60,"rate",["<count>"],["<second>"]],"<dpm>":[["dpm"],1/60,"rate",["<count>"],["<second>"]],"<bpm>":[["bpm"],1/60,"rate",["<count>"],["<second>"]],"<dot>":[["dot","dots"],1,"resolution",["<each>"]],"<pixel>":[["pixel","px"],1,"resolution",["<each>"]],"<ppi>":[["ppi"],1,"resolution",["<pixel>"],["<inch>"]],"<dpi>":[["dpi"],1,"typography",["<dot>"],["<inch>"]],"<cell>":[["cells","cell"],1,"counting",["<each>"]],"<each>":[["each"],1,"counting",["<each>"]],"<count>":[["count"],1,"counting",["<each>"]],"<base-pair>":[["bp","base-pair"],1,"counting",["<each>"]],"<nucleotide>":[["nt","nucleotide"],1,"counting",["<each>"]],"<molecule>":[["molecule","molecules"],1,"counting",["<1>"]],"<dozen>":[["doz","dz","dozen"],12,"prefix_only",["<each>"]],"<percent>":[["%","percent"],.01,"prefix_only",["<1>"]],"<ppm>":[["ppm"],1e-6,"prefix_only",["<1>"]],"<ppb>":[["ppb"],1e-9,"prefix_only",["<1>"]],"<ppt>":[["ppt"],1e-12,"prefix_only",["<1>"]],"<ppq>":[["ppq"],1e-15,"prefix_only",["<1>"]],"<gross>":[["gr","gross"],144,"prefix_only",["<dozen>","<dozen>"]],"<decibel>":[["dB","decibel","decibels"],1,"logarithmic",["<decibel>"]]},Ye=["<meter>","<kilogram>","<second>","<mole>","<ampere>","<radian>","<kelvin>","<temp-K>","<byte>","<dollar>","<candela>","<each>","<steradian>","<decibel>"],me="<1>",Le=[me];function nt(Ft,Tt){var jt=Tt[1],xt=Tt[3]||[],At=Tt[4]||[];if(!l(jt))throw new E(Ft+": Invalid unit definition. 'scalar' must be a number");xt.forEach(function(Bt){if(pe[Bt]===void 0)throw new E(Ft+": Invalid unit definition. Unit "+Bt+" in 'numerator' is not recognized")}),At.forEach(function(Bt){if(pe[Bt]===void 0)throw new E(Ft+": Invalid unit definition. Unit "+Bt+" in 'denominator' is not recognized")})}var tt={},ft={},yt={},gt={},mt={};for(var wt in pe)if(pe.hasOwnProperty(wt)){var St=pe[wt];if(St[2]==="prefix"){tt[wt]=St[1];for(var bt=0;bt<St[0].length;bt++)ft[St[0][bt]]=wt}else{nt(wt,St),yt[wt]={scalar:St[1],numerator:St[3],denominator:St[4]};for(var Ct=0;Ct<St[0].length;Ct++)gt[St[0][Ct]]=wt}mt[wt]=St[0][0]}function Et(Ft){var Tt,jt=[],xt=Object.keys(pe);if(typeof Ft>"u")for(Tt=0;Tt<xt.length;Tt++)["","prefix"].indexOf(pe[xt[Tt]][2])===-1&&jt.push(xt[Tt].substr(1,xt[Tt].length-2));else{if(this.getKinds().indexOf(Ft)===-1)throw new E("Kind not recognized");for(Tt=0;Tt<xt.length;Tt++)pe[xt[Tt]][2]===Ft&&jt.push(xt[Tt].substr(1,xt[Tt].length-2))}return jt.sort(function(At,Bt){return At.toLowerCase()<Bt.toLowerCase()?-1:At.toLowerCase()>Bt.toLowerCase()?1:0})}function It(Ft){if(!gt[Ft])throw new E("Unit not recognized");return pe[gt[Ft]][0]}var Dt=["length","time","temperature","mass","current","substance","luminosity","currency","information","angle"];function Pt(){if(this.signature)return this.signature;for(var Ft=qt.call(this),Tt=0;Tt<Ft.length;Tt++)Ft[Tt]*=Math.pow(20,Tt);return Ft.reduce(function(jt,xt){return jt+xt},0)}function qt(){if(!this.isBase())return qt.call(this.toBase());for(var Ft=new Array(Dt.length),Tt=0;Tt<Ft.length;Tt++)Ft[Tt]=0;for(var jt,xt,At=0;At<this.numerator.length;At++)(jt=pe[this.numerator[At]])&&(xt=Dt.indexOf(jt[2]),xt>=0&&(Ft[xt]=Ft[xt]+1));for(var Bt=0;Bt<this.denominator.length;Bt++)(jt=pe[this.denominator[Bt]])&&(xt=Dt.indexOf(jt[2]),xt>=0&&(Ft[xt]=Ft[xt]-1));return Ft}var Ht="[+-]",Gt="\\d+",Ut=Ht+"?"+Gt,Yt="\\."+Gt,Zt="(?:"+Gt+"(?:"+Yt+")?)|(?:"+Yt+")",vt="[Ee]"+Ut,Rt="(?:"+Zt+")(?:"+vt+")?",Lt=Ht+"?\\s*"+Rt,Vt="("+Lt+")?\\s*([^/]*)(?:/(.+))?",Jt=new RegExp("^"+Vt+"$"),er="\\^|\\*{2}",ur="[01234]",yr=new RegExp("([^ \\*\\d]+?)(?:"+er+")?(-?"+ur+"(?![a-zA-Z]))"),Qt=new RegExp("([^ \\*\\d]+?)(?:"+er+")?("+ur+"(?![a-zA-Z]))");function nr(Ft){n(Ft)||(Ft=Ft.toString()),Ft=Ft.trim();var Tt=Jt.exec(Ft);if(!Tt)throw new E(Ft+": Quantity not recognized");var jt=Tt[1];jt?(jt=jt.replace(/\s/g,""),this.scalar=parseFloat(jt)):this.scalar=1;for(var xt=Tt[2],At=Tt[3],Bt,lr,hr;Tt=yr.exec(xt);){if(Bt=parseFloat(Tt[2]),isNaN(Bt))throw new E("Unit exponent is not a number");if(Bt===0&&!Sr.test(Tt[1]))throw new E("Unit not recognized");lr=Tt[1]+" ",hr="";for(var dr=0;dr<Math.abs(Bt);dr++)hr+=lr;Bt>=0?xt=xt.replace(Tt[0],hr):(At=At?At+hr:hr,xt=xt.replace(Tt[0],""))}for(;Tt=Qt.exec(At);){if(Bt=parseFloat(Tt[2]),isNaN(Bt))throw new E("Unit exponent is not a number");if(Bt===0&&!Sr.test(Tt[1]))throw new E("Unit not recognized");lr=Tt[1]+" ",hr="";for(var vr=0;vr<Bt;vr++)hr+=lr;At=At.replace(Tt[0],hr)}xt&&(this.numerator=jr(xt.trim())),At&&(this.denominator=jr(At.trim()))}var or=Object.keys(ft).sort(function(Ft,Tt){return Tt.length-Ft.length}).join("|"),Wt=Object.keys(gt).sort(function(Ft,Tt){return Tt.length-Ft.length}).join("|"),ir="\\b|$",br="("+or+")??("+Wt+")(?:"+ir+")",Sr=new RegExp("^\\s*("+br+"[\\s\\*]*)+$"),_r=new RegExp(br,"g"),sr={};function jr(Ft){var Tt=sr[Ft];if(Tt)return Tt;var jt,xt=[];if(!Sr.test(Ft))throw new E("Unit not recognized");for(;jt=_r.exec(Ft);)xt.push(jt.slice(1));return xt=xt.map(function(At){return ft[At[0]]?[ft[At[0]],gt[At[1]]]:[gt[At[1]]]}),xt=xt.reduce(function(At,Bt){return At.concat(Bt)},[]),xt=xt.filter(function(At){return At}),sr[Ft]=xt,xt}function Nr(Ft){if(!n(Ft))throw new E("Argument should be a string");try{return this(Ft)}catch{return null}}function kr(Ft){return Ft instanceof qr}function qr(Ft,Tt){if(Pr.apply(null,arguments),!kr(this))return new qr(Ft,Tt);if(this.scalar=null,this.baseScalar=null,this.signature=null,this._conversionCache={},this.numerator=Le,this.denominator=Le,Vr(Ft)?(this.scalar=Ft.scalar,this.numerator=Ft.numerator&&Ft.numerator.length!==0?Ft.numerator:Le,this.denominator=Ft.denominator&&Ft.denominator.length!==0?Ft.denominator:Le):Tt?(nr.call(this,Tt),this.scalar=Ft):nr.call(this,Ft),this.denominator.join("*").indexOf("temp")>=0)throw new E("Cannot divide with temperatures");if(this.numerator.join("*").indexOf("temp")>=0){if(this.numerator.length>1)throw new E("Cannot multiply by temperatures");if(!p(this.denominator,Le))throw new E("Cannot divide with temperatures")}if(this.initValue=Ft,Xr.call(this),this.isTemperature()&&this.baseScalar<0)throw new E("Temperatures must not be less than absolute zero")}qr.prototype={constructor:qr};function Pr(Ft,Tt){if(Tt){if(!(l(Ft)&&n(Tt)))throw new E("Only number accepted as initialization value when units are explicitly provided")}else if(!(n(Ft)||l(Ft)||kr(Ft)||Vr(Ft)))throw new E("Only string, number or quantity accepted as single initialization value")}function Vr(Ft){return Ft&&typeof Ft=="object"&&Ft.hasOwnProperty("scalar")}function Xr(){if(this.baseScalar)return this.baseScalar;if(this.isBase())this.baseScalar=this.scalar,this.signature=Pt.call(this);else{var Ft=this.toBase();this.baseScalar=Ft.scalar,this.signature=Ft.signature}}var Gr={"-312078":"elastance","-312058":"resistance","-312038":"inductance","-152058":"potential","-152040":"magnetism","-152038":"magnetism","-7997":"specific_volume","-79":"snap","-59":"jolt","-39":"acceleration","-38":"radiation","-20":"frequency","-19":"speed","-18":"viscosity","-17":"volumetric_flow","-1":"wavenumber",0:"unitless",1:"length",2:"area",3:"volume",20:"time",400:"temperature",7941:"yank",7942:"power",7959:"pressure",7961:"force",7962:"energy",7979:"viscosity",7981:"momentum",7982:"angular_momentum",7997:"density",7998:"area_density",8e3:"mass",152020:"radiation_exposure",159999:"magnetism",16e4:"current",160020:"charge",312058:"conductance",312078:"capacitance",3199980:"activity",3199997:"molar_concentration",32e5:"substance",63999998:"illuminance",64e6:"luminous_power",128e7:"currency","25599999980":"information_rate","25600000000":"information","511999999980":"angular_velocity","512000000000":"angle"};function Er(){return s(Object.keys(Gr).map(function(Ft){return Gr[Ft]}))}qr.prototype.kind=function(){return Gr[this.signature.toString()]},d(qr.prototype,{isDegrees:function(){return(this.signature===null||this.signature===400)&&this.numerator.length===1&&p(this.denominator,Le)&&(this.numerator[0].match(/<temp-[CFRK]>/)||this.numerator[0].match(/<(kelvin|celsius|rankine|fahrenheit)>/))},isTemperature:function(){return this.isDegrees()&&this.numerator[0].match(/<temp-[CFRK]>/)}});function Ir(Ft,Tt){var jt=Ft.units(),xt=Tt.to(jt),At=qr(ar(jt));return qr({scalar:Ft.scalar-xt.scalar,numerator:At.numerator,denominator:At.denominator})}function Cr(Ft,Tt){var jt=Tt.to(ar(Ft.units()));return qr({scalar:Ft.scalar-jt.scalar,numerator:Ft.numerator,denominator:Ft.denominator})}function tr(Ft,Tt){var jt=Tt.to(ar(Ft.units()));return qr({scalar:Ft.scalar+jt.scalar,numerator:Ft.numerator,denominator:Ft.denominator})}function ar(Ft){if(Ft==="tempK")return"degK";if(Ft==="tempC")return"degC";if(Ft==="tempF")return"degF";if(Ft==="tempR")return"degR";throw new E("Unknown type for temp conversion from: "+Ft)}function Kt(Ft,Tt){var jt=cr(Ft),xt=Tt.units(),At;if(xt==="degK")At=jt.scalar;else if(xt==="degC")At=jt.scalar;else if(xt==="degF")At=jt.scalar*9/5;else if(xt==="degR")At=jt.scalar*9/5;else throw new E("Unknown type for degree conversion to: "+xt);return qr({scalar:At,numerator:Tt.numerator,denominator:Tt.denominator})}function cr(Ft){var Tt=Ft.units(),jt;if(Tt.match(/(deg)[CFRK]/))jt=Ft.baseScalar;else if(Tt==="tempK")jt=Ft.scalar;else if(Tt==="tempC")jt=Ft.scalar;else if(Tt==="tempF")jt=Ft.scalar*5/9;else if(Tt==="tempR")jt=Ft.scalar*5/9;else throw new E("Unknown type for temp conversion from: "+Tt);return qr({scalar:jt,numerator:["<kelvin>"],denominator:Le})}function Tr(Ft,Tt){var jt=Tt.units(),xt;if(jt==="tempK")xt=Ft.baseScalar;else if(jt==="tempC")xt=Ft.baseScalar-273.15;else if(jt==="tempF")xt=Ft.baseScalar*9/5-459.67;else if(jt==="tempR")xt=Ft.baseScalar*9/5;else throw new E("Unknown type for temp conversion to: "+jt);return qr({scalar:xt,numerator:Tt.numerator,denominator:Tt.denominator})}function Dr(Ft){var Tt=Ft.units(),jt;if(Tt.match(/(deg)[CFRK]/))jt=Ft.baseScalar;else if(Tt==="tempK")jt=Ft.scalar;else if(Tt==="tempC")jt=Ft.scalar+273.15;else if(Tt==="tempF")jt=(Ft.scalar+459.67)*5/9;else if(Tt==="tempR")jt=Ft.scalar*5/9;else throw new E("Unknown type for temp conversion from: "+Tt);return qr({scalar:jt,numerator:["<temp-K>"],denominator:Le})}d(qr.prototype,{to:function(Ft){var Tt,jt;if(Ft==null)return this;if(!n(Ft))return this.to(Ft.units());if(Tt=this._conversionCache[Ft],Tt)return Tt;if(jt=qr(Ft),jt.units()===this.units())return this;if(!this.isCompatible(jt))this.isInverse(jt)?jt=this.inverse().to(Ft):de(this.units(),jt.units());else if(jt.isTemperature())jt=Tr(this,jt);else if(jt.isDegrees())jt=Kt(this,jt);else{var xt=N(this.baseScalar,jt.baseScalar);jt=qr({scalar:xt,numerator:jt.numerator,denominator:jt.denominator})}return this._conversionCache[Ft]=jt,jt},toBase:function(){if(this.isBase())return this;if(this.isTemperature())return Dr(this);var Ft=fn[this.units()];return Ft||(Ft=vn(this.numerator,this.denominator),fn[this.units()]=Ft),Ft.mul(this.scalar)},toFloat:function(){if(this.isUnitless())return this.scalar;throw new E("Can't convert to Float unless unitless.  Use Unit#scalar")},toPrec:function(Ft){if(n(Ft)&&(Ft=qr(Ft)),l(Ft)&&(Ft=qr(Ft+" "+this.units())),this.isUnitless()?Ft.isUnitless()||de(this.units(),Ft.units()):Ft=Ft.to(this.units()),Ft.scalar===0)throw new E("Divide by zero");var Tt=h(Math.round(this.scalar/Ft.scalar),Ft.scalar);return qr(Tt+this.units())}});function zr(Ft,Tt){var jt=qr(Ft),xt=qr(Tt);if(jt.eq(xt))return u;var At;return jt.isTemperature()?At=function(Bt){return jt.mul(Bt).to(xt).scalar}:At=function(Bt){return Bt*jt.baseScalar/xt.baseScalar},function(lr){var hr,dr,vr;if(Array.isArray(lr)){for(dr=lr.length,vr=[],hr=0;hr<dr;hr++)vr.push(At(lr[hr]));return vr}else return At(lr)}}var fn={};function vn(Ft,Tt){for(var jt=[],xt=[],At=1,Bt,lr=0;lr<Ft.length;lr++)Bt=Ft[lr],tt[Bt]?At=h(At,tt[Bt]):yt[Bt]&&(At*=yt[Bt].scalar,yt[Bt].numerator&&jt.push(yt[Bt].numerator),yt[Bt].denominator&&xt.push(yt[Bt].denominator));for(var hr=0;hr<Tt.length;hr++)Bt=Tt[hr],tt[Bt]?At/=tt[Bt]:yt[Bt]&&(At/=yt[Bt].scalar,yt[Bt].numerator&&xt.push(yt[Bt].numerator),yt[Bt].denominator&&jt.push(yt[Bt].denominator));return jt=jt.reduce(function(dr,vr){return dr.concat(vr)},[]),xt=xt.reduce(function(dr,vr){return dr.concat(vr)},[]),qr({scalar:At,numerator:jt,denominator:xt})}qr.parse=Nr,qr.getUnits=Et,qr.getAliases=It,qr.mulSafe=h,qr.divSafe=N,qr.getKinds=Er,qr.swiftConverter=zr,qr.Error=E,d(qr.prototype,{add:function(Ft){if(n(Ft)&&(Ft=qr(Ft)),this.isCompatible(Ft)||de(this.units(),Ft.units()),this.isTemperature()&&Ft.isTemperature())throw new E("Cannot add two temperatures");return this.isTemperature()?tr(this,Ft):Ft.isTemperature()?tr(Ft,this):qr({scalar:this.scalar+Ft.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},sub:function(Ft){if(n(Ft)&&(Ft=qr(Ft)),this.isCompatible(Ft)||de(this.units(),Ft.units()),this.isTemperature()&&Ft.isTemperature())return Ir(this,Ft);if(this.isTemperature())return Cr(this,Ft);if(Ft.isTemperature())throw new E("Cannot subtract a temperature from a differential degree unit");return qr({scalar:this.scalar-Ft.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},mul:function(Ft){if(l(Ft))return qr({scalar:h(this.scalar,Ft),numerator:this.numerator,denominator:this.denominator});if(n(Ft)&&(Ft=qr(Ft)),(this.isTemperature()||Ft.isTemperature())&&!(this.isUnitless()||Ft.isUnitless()))throw new E("Cannot multiply by temperatures");var Tt=this,jt=Ft;Tt.isCompatible(jt)&&Tt.signature!==400&&(jt=jt.to(Tt));var xt=_n(Tt.numerator,Tt.denominator,jt.numerator,jt.denominator);return qr({scalar:h(Tt.scalar,jt.scalar,xt[2]),numerator:xt[0],denominator:xt[1]})},div:function(Ft){if(l(Ft)){if(Ft===0)throw new E("Divide by zero");return qr({scalar:this.scalar/Ft,numerator:this.numerator,denominator:this.denominator})}else n(Ft)&&(Ft=qr(Ft));if(Ft.scalar===0)throw new E("Divide by zero");if(Ft.isTemperature())throw new E("Cannot divide with temperatures");if(this.isTemperature()&&!Ft.isUnitless())throw new E("Cannot divide with temperatures");var Tt=this,jt=Ft;Tt.isCompatible(jt)&&Tt.signature!==400&&(jt=jt.to(Tt));var xt=_n(Tt.numerator,Tt.denominator,jt.denominator,jt.numerator);return qr({scalar:h(Tt.scalar,xt[2])/jt.scalar,numerator:xt[0],denominator:xt[1]})},inverse:function(){if(this.isTemperature())throw new E("Cannot divide with temperatures");if(this.scalar===0)throw new E("Divide by zero");return qr({scalar:1/this.scalar,numerator:this.denominator,denominator:this.numerator})}});function _n(Ft,Tt,jt,xt){function At(pn){return pn!==me}Ft=Ft.filter(At),jt=jt.filter(At),Tt=Tt.filter(At),xt=xt.filter(At);var Bt={};function lr(pn,Jr){for(var on,mr,gr,Yr=0;Yr<pn.length;Yr++)if(tt[pn[Yr]]?(on=pn[Yr+1],mr=pn[Yr],gr=tt[mr],Yr++):(on=pn[Yr],mr=null,gr=1),on&&on!==me)if(Bt[on]){Bt[on][0]+=Jr;var Hr=Bt[on][2]?tt[Bt[on][2]]:1;Bt[on][Jr===1?3:4]*=N(gr,Hr)}else Bt[on]=[Jr,on,mr,1,1]}lr(Ft,1),lr(Tt,-1),lr(jt,1),lr(xt,-1);var hr=[],dr=[],vr=1;for(var Ur in Bt)if(Bt.hasOwnProperty(Ur)){var Ar=Bt[Ur],an;if(Ar[0]>0)for(an=0;an<Ar[0];an++)hr.push(Ar[2]===null?Ar[1]:[Ar[2],Ar[1]]);else if(Ar[0]<0)for(an=0;an<-Ar[0];an++)dr.push(Ar[2]===null?Ar[1]:[Ar[2],Ar[1]]);vr*=N(Ar[3],Ar[4])}return hr.length===0&&(hr=Le),dr.length===0&&(dr=Le),hr=hr.reduce(function(pn,Jr){return pn.concat(Jr)},[]),dr=dr.reduce(function(pn,Jr){return pn.concat(Jr)},[]),[hr,dr,vr]}d(qr.prototype,{eq:function(Ft){return this.compareTo(Ft)===0},lt:function(Ft){return this.compareTo(Ft)===-1},lte:function(Ft){return this.eq(Ft)||this.lt(Ft)},gt:function(Ft){return this.compareTo(Ft)===1},gte:function(Ft){return this.eq(Ft)||this.gt(Ft)},compareTo:function(Ft){if(n(Ft))return this.compareTo(qr(Ft));if(this.isCompatible(Ft)||de(this.units(),Ft.units()),this.baseScalar<Ft.baseScalar)return-1;if(this.baseScalar===Ft.baseScalar)return 0;if(this.baseScalar>Ft.baseScalar)return 1},same:function(Ft){return this.scalar===Ft.scalar&&this.units()===Ft.units()}}),d(qr.prototype,{isUnitless:function(){return[this.numerator,this.denominator].every(function(Ft){return p(Ft,Le)})},isCompatible:function(Ft){return n(Ft)?this.isCompatible(qr(Ft)):kr(Ft)&&Ft.signature!==void 0?this.signature===Ft.signature:!1},isInverse:function(Ft){return this.inverse().isCompatible(Ft)},isBase:function(){return this._isBase!==void 0?this._isBase:this.isDegrees()&&this.numerator[0].match(/<(kelvin|temp-K)>/)?(this._isBase=!0,this._isBase):(this.numerator.concat(this.denominator).forEach(function(Ft){Ft!==me&&Ye.indexOf(Ft)===-1&&(this._isBase=!1)},this),this._isBase===!1?this._isBase:(this._isBase=!0,this._isBase))}});function wn(){}wn.prototype.get=function(Ft){return arguments.length>1&&(Ft=Array.apply(null,arguments)),Ft.reduce(function(Tt,jt,xt){if(Tt){var At=Tt[jt];return xt===Ft.length-1?At?At.data:void 0:At}},this)},wn.prototype.set=function(Ft,Tt){return arguments.length>2&&(Ft=Array.prototype.slice.call(arguments,0,-1),Tt=arguments[arguments.length-1]),Ft.reduce(function(jt,xt,At){var Bt=jt[xt];return Bt===void 0&&(Bt=jt[xt]={}),At===Ft.length-1?(Bt.data=Tt,Tt):Bt},this)};function An(Ft,Tt){return(Ft+" "+Tt).trim()}qr.formatter=An,d(qr.prototype,{units:function(){if(this._units!==void 0)return this._units;var Ft=p(this.numerator,Le),Tt=p(this.denominator,Le);if(Ft&&Tt)return this._units="",this._units;var jt=En(this.numerator),xt=En(this.denominator);return this._units=jt+(Tt?"":"/"+xt),this._units},toString:function(Ft,Tt){var jt;if(l(Ft))jt=this.units(),Tt=Ft;else if(n(Ft))jt=Ft;else if(kr(Ft))return this.toPrec(Ft).toString(Tt);var xt=this.to(jt),At=Tt!==void 0?Be(xt.scalar,Tt):xt.scalar;return xt=(At+" "+xt.units()).trim(),xt},format:function(Ft,Tt){arguments.length===1&&typeof Ft=="function"&&(Tt=Ft,Ft=void 0),Tt=Tt||qr.formatter;var jt=this.to(Ft);return Tt.call(this,jt.scalar,jt.units())}});var Cn=new wn;function En(Ft){var Tt=Cn.get(Ft);if(Tt)return Tt;var jt=p(Ft,Le);return jt?Tt="1":Tt=Mn(Tn(Ft)).join("*"),Cn.set(Ft,Tt),Tt}function Tn(Ft){for(var Tt=[],jt,xt,At=0;At<Ft.length;At++)jt=Ft[At],xt=Ft[At+1],tt[jt]?(Tt.push(mt[jt]+mt[xt]),At++):Tt.push(mt[jt]);return Tt}function Mn(Ft){var Tt=Ft.reduce(function(jt,xt){var At=jt[xt];return At||jt.push(At=jt[xt]=[xt,0]),At[1]++,jt},[]);return Tt.map(function(jt){return jt[0]+(jt[1]>1?jt[1]:"")})}return qr.version="1.8.0",qr})}(quantities$1)),quantities$1.exports}var quantitiesExports=requireQuantities();const Qty=getDefaultExportFromCjs(quantitiesExports);function deepValue(r,a=""){let n=a.split(".");for(let t of n){if(r[t]===void 0)return;r=r[t]}return r}var orientation={exports:{}},twoProduct_1,hasRequiredTwoProduct;function requireTwoProduct(){if(hasRequiredTwoProduct)return twoProduct_1;hasRequiredTwoProduct=1,twoProduct_1=a;var r=+(Math.pow(2,27)+1);function a(n,t,l){var u=n*t,s=r*n,p=s-n,d=s-p,h=n-d,N=r*t,Be=N-t,b=N-Be,E=t-b,de=u-d*b,pe=de-h*b,Ye=pe-d*E,me=h*E-Ye;return l?(l[0]=me,l[1]=u,l):[me,u]}return twoProduct_1}var robustSum,hasRequiredRobustSum;function requireRobustSum(){if(hasRequiredRobustSum)return robustSum;hasRequiredRobustSum=1,robustSum=a;function r(n,t){var l=n+t,u=l-n,s=l-u,p=t-u,d=n-s,h=d+p;return h?[h,l]:[l]}function a(n,t){var l=n.length|0,u=t.length|0;if(l===1&&u===1)return r(n[0],t[0]);var s=l+u,p=new Array(s),d=0,h=0,N=0,Be=Math.abs,b=n[h],E=Be(b),de=t[N],pe=Be(de),Ye,me;E<pe?(me=b,h+=1,h<l&&(b=n[h],E=Be(b))):(me=de,N+=1,N<u&&(de=t[N],pe=Be(de))),h<l&&E<pe||N>=u?(Ye=b,h+=1,h<l&&(b=n[h],E=Be(b))):(Ye=de,N+=1,N<u&&(de=t[N],pe=Be(de)));for(var Le=Ye+me,nt=Le-Ye,tt=me-nt,ft=tt,yt=Le,gt,mt,wt,St,bt;h<l&&N<u;)E<pe?(Ye=b,h+=1,h<l&&(b=n[h],E=Be(b))):(Ye=de,N+=1,N<u&&(de=t[N],pe=Be(de))),me=ft,Le=Ye+me,nt=Le-Ye,tt=me-nt,tt&&(p[d++]=tt),gt=yt+Le,mt=gt-yt,wt=gt-mt,St=Le-mt,bt=yt-wt,ft=bt+St,yt=gt;for(;h<l;)Ye=b,me=ft,Le=Ye+me,nt=Le-Ye,tt=me-nt,tt&&(p[d++]=tt),gt=yt+Le,mt=gt-yt,wt=gt-mt,St=Le-mt,bt=yt-wt,ft=bt+St,yt=gt,h+=1,h<l&&(b=n[h]);for(;N<u;)Ye=de,me=ft,Le=Ye+me,nt=Le-Ye,tt=me-nt,tt&&(p[d++]=tt),gt=yt+Le,mt=gt-yt,wt=gt-mt,St=Le-mt,bt=yt-wt,ft=bt+St,yt=gt,N+=1,N<u&&(de=t[N]);return ft&&(p[d++]=ft),yt&&(p[d++]=yt),d||(p[d++]=0),p.length=d,p}return robustSum}var twoSum,hasRequiredTwoSum;function requireTwoSum(){if(hasRequiredTwoSum)return twoSum;hasRequiredTwoSum=1,twoSum=r;function r(a,n,t){var l=a+n,u=l-a,s=l-u,p=n-u,d=a-s;return t?(t[0]=d+p,t[1]=l,t):[d+p,l]}return twoSum}var robustScale,hasRequiredRobustScale;function requireRobustScale(){if(hasRequiredRobustScale)return robustScale;hasRequiredRobustScale=1;var r=requireTwoProduct(),a=requireTwoSum();robustScale=n;function n(t,l){var u=t.length;if(u===1){var s=r(t[0],l);return s[0]?s:[s[1]]}var p=new Array(2*u),d=[.1,.1],h=[.1,.1],N=0;r(t[0],l,d),d[0]&&(p[N++]=d[0]);for(var Be=1;Be<u;++Be){r(t[Be],l,h);var b=d[1];a(b,h[0],d),d[0]&&(p[N++]=d[0]);var E=h[1],de=d[1],pe=E+de,Ye=pe-E,me=de-Ye;d[1]=pe,me&&(p[N++]=me)}return d[1]&&(p[N++]=d[1]),N===0&&(p[N++]=0),p.length=N,p}return robustScale}var robustDiff,hasRequiredRobustDiff;function requireRobustDiff(){if(hasRequiredRobustDiff)return robustDiff;hasRequiredRobustDiff=1,robustDiff=a;function r(n,t){var l=n+t,u=l-n,s=l-u,p=t-u,d=n-s,h=d+p;return h?[h,l]:[l]}function a(n,t){var l=n.length|0,u=t.length|0;if(l===1&&u===1)return r(n[0],-t[0]);var s=l+u,p=new Array(s),d=0,h=0,N=0,Be=Math.abs,b=n[h],E=Be(b),de=-t[N],pe=Be(de),Ye,me;E<pe?(me=b,h+=1,h<l&&(b=n[h],E=Be(b))):(me=de,N+=1,N<u&&(de=-t[N],pe=Be(de))),h<l&&E<pe||N>=u?(Ye=b,h+=1,h<l&&(b=n[h],E=Be(b))):(Ye=de,N+=1,N<u&&(de=-t[N],pe=Be(de)));for(var Le=Ye+me,nt=Le-Ye,tt=me-nt,ft=tt,yt=Le,gt,mt,wt,St,bt;h<l&&N<u;)E<pe?(Ye=b,h+=1,h<l&&(b=n[h],E=Be(b))):(Ye=de,N+=1,N<u&&(de=-t[N],pe=Be(de))),me=ft,Le=Ye+me,nt=Le-Ye,tt=me-nt,tt&&(p[d++]=tt),gt=yt+Le,mt=gt-yt,wt=gt-mt,St=Le-mt,bt=yt-wt,ft=bt+St,yt=gt;for(;h<l;)Ye=b,me=ft,Le=Ye+me,nt=Le-Ye,tt=me-nt,tt&&(p[d++]=tt),gt=yt+Le,mt=gt-yt,wt=gt-mt,St=Le-mt,bt=yt-wt,ft=bt+St,yt=gt,h+=1,h<l&&(b=n[h]);for(;N<u;)Ye=de,me=ft,Le=Ye+me,nt=Le-Ye,tt=me-nt,tt&&(p[d++]=tt),gt=yt+Le,mt=gt-yt,wt=gt-mt,St=Le-mt,bt=yt-wt,ft=bt+St,yt=gt,N+=1,N<u&&(de=-t[N]);return ft&&(p[d++]=ft),yt&&(p[d++]=yt),d||(p[d++]=0),p.length=d,p}return robustDiff}var hasRequiredOrientation;function requireOrientation(){return hasRequiredOrientation||(hasRequiredOrientation=1,function(r){var a=requireTwoProduct(),n=requireRobustSum(),t=requireRobustScale(),l=requireRobustDiff(),u=5,s=11102230246251565e-32,p=(3+16*s)*s,d=(7+56*s)*s;function h(nt,tt,ft,yt){return function(mt,wt,St){var bt=nt(nt(tt(wt[1],St[0]),tt(-St[1],wt[0])),nt(tt(mt[1],wt[0]),tt(-wt[1],mt[0]))),Ct=nt(tt(mt[1],St[0]),tt(-St[1],mt[0])),Et=yt(bt,Ct);return Et[Et.length-1]}}function N(nt,tt,ft,yt){return function(mt,wt,St,bt){var Ct=nt(nt(ft(nt(tt(St[1],bt[0]),tt(-bt[1],St[0])),wt[2]),nt(ft(nt(tt(wt[1],bt[0]),tt(-bt[1],wt[0])),-St[2]),ft(nt(tt(wt[1],St[0]),tt(-St[1],wt[0])),bt[2]))),nt(ft(nt(tt(wt[1],bt[0]),tt(-bt[1],wt[0])),mt[2]),nt(ft(nt(tt(mt[1],bt[0]),tt(-bt[1],mt[0])),-wt[2]),ft(nt(tt(mt[1],wt[0]),tt(-wt[1],mt[0])),bt[2])))),Et=nt(nt(ft(nt(tt(St[1],bt[0]),tt(-bt[1],St[0])),mt[2]),nt(ft(nt(tt(mt[1],bt[0]),tt(-bt[1],mt[0])),-St[2]),ft(nt(tt(mt[1],St[0]),tt(-St[1],mt[0])),bt[2]))),nt(ft(nt(tt(wt[1],St[0]),tt(-St[1],wt[0])),mt[2]),nt(ft(nt(tt(mt[1],St[0]),tt(-St[1],mt[0])),-wt[2]),ft(nt(tt(mt[1],wt[0]),tt(-wt[1],mt[0])),St[2])))),It=yt(Ct,Et);return It[It.length-1]}}function Be(nt,tt,ft,yt){return function(mt,wt,St,bt,Ct){var Et=nt(nt(nt(ft(nt(ft(nt(tt(bt[1],Ct[0]),tt(-Ct[1],bt[0])),St[2]),nt(ft(nt(tt(St[1],Ct[0]),tt(-Ct[1],St[0])),-bt[2]),ft(nt(tt(St[1],bt[0]),tt(-bt[1],St[0])),Ct[2]))),wt[3]),nt(ft(nt(ft(nt(tt(bt[1],Ct[0]),tt(-Ct[1],bt[0])),wt[2]),nt(ft(nt(tt(wt[1],Ct[0]),tt(-Ct[1],wt[0])),-bt[2]),ft(nt(tt(wt[1],bt[0]),tt(-bt[1],wt[0])),Ct[2]))),-St[3]),ft(nt(ft(nt(tt(St[1],Ct[0]),tt(-Ct[1],St[0])),wt[2]),nt(ft(nt(tt(wt[1],Ct[0]),tt(-Ct[1],wt[0])),-St[2]),ft(nt(tt(wt[1],St[0]),tt(-St[1],wt[0])),Ct[2]))),bt[3]))),nt(ft(nt(ft(nt(tt(St[1],bt[0]),tt(-bt[1],St[0])),wt[2]),nt(ft(nt(tt(wt[1],bt[0]),tt(-bt[1],wt[0])),-St[2]),ft(nt(tt(wt[1],St[0]),tt(-St[1],wt[0])),bt[2]))),-Ct[3]),nt(ft(nt(ft(nt(tt(bt[1],Ct[0]),tt(-Ct[1],bt[0])),wt[2]),nt(ft(nt(tt(wt[1],Ct[0]),tt(-Ct[1],wt[0])),-bt[2]),ft(nt(tt(wt[1],bt[0]),tt(-bt[1],wt[0])),Ct[2]))),mt[3]),ft(nt(ft(nt(tt(bt[1],Ct[0]),tt(-Ct[1],bt[0])),mt[2]),nt(ft(nt(tt(mt[1],Ct[0]),tt(-Ct[1],mt[0])),-bt[2]),ft(nt(tt(mt[1],bt[0]),tt(-bt[1],mt[0])),Ct[2]))),-wt[3])))),nt(nt(ft(nt(ft(nt(tt(wt[1],Ct[0]),tt(-Ct[1],wt[0])),mt[2]),nt(ft(nt(tt(mt[1],Ct[0]),tt(-Ct[1],mt[0])),-wt[2]),ft(nt(tt(mt[1],wt[0]),tt(-wt[1],mt[0])),Ct[2]))),bt[3]),nt(ft(nt(ft(nt(tt(wt[1],bt[0]),tt(-bt[1],wt[0])),mt[2]),nt(ft(nt(tt(mt[1],bt[0]),tt(-bt[1],mt[0])),-wt[2]),ft(nt(tt(mt[1],wt[0]),tt(-wt[1],mt[0])),bt[2]))),-Ct[3]),ft(nt(ft(nt(tt(St[1],bt[0]),tt(-bt[1],St[0])),wt[2]),nt(ft(nt(tt(wt[1],bt[0]),tt(-bt[1],wt[0])),-St[2]),ft(nt(tt(wt[1],St[0]),tt(-St[1],wt[0])),bt[2]))),mt[3]))),nt(ft(nt(ft(nt(tt(St[1],bt[0]),tt(-bt[1],St[0])),mt[2]),nt(ft(nt(tt(mt[1],bt[0]),tt(-bt[1],mt[0])),-St[2]),ft(nt(tt(mt[1],St[0]),tt(-St[1],mt[0])),bt[2]))),-wt[3]),nt(ft(nt(ft(nt(tt(wt[1],bt[0]),tt(-bt[1],wt[0])),mt[2]),nt(ft(nt(tt(mt[1],bt[0]),tt(-bt[1],mt[0])),-wt[2]),ft(nt(tt(mt[1],wt[0]),tt(-wt[1],mt[0])),bt[2]))),St[3]),ft(nt(ft(nt(tt(wt[1],St[0]),tt(-St[1],wt[0])),mt[2]),nt(ft(nt(tt(mt[1],St[0]),tt(-St[1],mt[0])),-wt[2]),ft(nt(tt(mt[1],wt[0]),tt(-wt[1],mt[0])),St[2]))),-bt[3]))))),It=nt(nt(nt(ft(nt(ft(nt(tt(bt[1],Ct[0]),tt(-Ct[1],bt[0])),St[2]),nt(ft(nt(tt(St[1],Ct[0]),tt(-Ct[1],St[0])),-bt[2]),ft(nt(tt(St[1],bt[0]),tt(-bt[1],St[0])),Ct[2]))),mt[3]),ft(nt(ft(nt(tt(bt[1],Ct[0]),tt(-Ct[1],bt[0])),mt[2]),nt(ft(nt(tt(mt[1],Ct[0]),tt(-Ct[1],mt[0])),-bt[2]),ft(nt(tt(mt[1],bt[0]),tt(-bt[1],mt[0])),Ct[2]))),-St[3])),nt(ft(nt(ft(nt(tt(St[1],Ct[0]),tt(-Ct[1],St[0])),mt[2]),nt(ft(nt(tt(mt[1],Ct[0]),tt(-Ct[1],mt[0])),-St[2]),ft(nt(tt(mt[1],St[0]),tt(-St[1],mt[0])),Ct[2]))),bt[3]),ft(nt(ft(nt(tt(St[1],bt[0]),tt(-bt[1],St[0])),mt[2]),nt(ft(nt(tt(mt[1],bt[0]),tt(-bt[1],mt[0])),-St[2]),ft(nt(tt(mt[1],St[0]),tt(-St[1],mt[0])),bt[2]))),-Ct[3]))),nt(nt(ft(nt(ft(nt(tt(St[1],Ct[0]),tt(-Ct[1],St[0])),wt[2]),nt(ft(nt(tt(wt[1],Ct[0]),tt(-Ct[1],wt[0])),-St[2]),ft(nt(tt(wt[1],St[0]),tt(-St[1],wt[0])),Ct[2]))),mt[3]),ft(nt(ft(nt(tt(St[1],Ct[0]),tt(-Ct[1],St[0])),mt[2]),nt(ft(nt(tt(mt[1],Ct[0]),tt(-Ct[1],mt[0])),-St[2]),ft(nt(tt(mt[1],St[0]),tt(-St[1],mt[0])),Ct[2]))),-wt[3])),nt(ft(nt(ft(nt(tt(wt[1],Ct[0]),tt(-Ct[1],wt[0])),mt[2]),nt(ft(nt(tt(mt[1],Ct[0]),tt(-Ct[1],mt[0])),-wt[2]),ft(nt(tt(mt[1],wt[0]),tt(-wt[1],mt[0])),Ct[2]))),St[3]),ft(nt(ft(nt(tt(wt[1],St[0]),tt(-St[1],wt[0])),mt[2]),nt(ft(nt(tt(mt[1],St[0]),tt(-St[1],mt[0])),-wt[2]),ft(nt(tt(mt[1],wt[0]),tt(-wt[1],mt[0])),St[2]))),-Ct[3])))),Dt=yt(Et,It);return Dt[Dt.length-1]}}function b(nt){var tt=nt===3?h:nt===4?N:Be;return tt(n,a,t,l)}var E=b(3),de=b(4),pe=[function(){return 0},function(){return 0},function(tt,ft){return ft[0]-tt[0]},function(tt,ft,yt){var gt=(tt[1]-yt[1])*(ft[0]-yt[0]),mt=(tt[0]-yt[0])*(ft[1]-yt[1]),wt=gt-mt,St;if(gt>0){if(mt<=0)return wt;St=gt+mt}else if(gt<0){if(mt>=0)return wt;St=-(gt+mt)}else return wt;var bt=p*St;return wt>=bt||wt<=-bt?wt:E(tt,ft,yt)},function(tt,ft,yt,gt){var mt=tt[0]-gt[0],wt=ft[0]-gt[0],St=yt[0]-gt[0],bt=tt[1]-gt[1],Ct=ft[1]-gt[1],Et=yt[1]-gt[1],It=tt[2]-gt[2],Dt=ft[2]-gt[2],Pt=yt[2]-gt[2],qt=wt*Et,Ht=St*Ct,Gt=St*bt,Ut=mt*Et,Yt=mt*Ct,Zt=wt*bt,vt=It*(qt-Ht)+Dt*(Gt-Ut)+Pt*(Yt-Zt),Rt=(Math.abs(qt)+Math.abs(Ht))*Math.abs(It)+(Math.abs(Gt)+Math.abs(Ut))*Math.abs(Dt)+(Math.abs(Yt)+Math.abs(Zt))*Math.abs(Pt),Lt=d*Rt;return vt>Lt||-vt>Lt?vt:de(tt,ft,yt,gt)}];function Ye(nt){var tt=pe[nt.length];return tt||(tt=pe[nt.length]=b(nt.length)),tt.apply(void 0,nt)}function me(nt,tt,ft,yt,gt,mt,wt){return function(bt,Ct,Et,It,Dt){switch(arguments.length){case 0:case 1:return 0;case 2:return yt(bt,Ct);case 3:return gt(bt,Ct,Et);case 4:return mt(bt,Ct,Et,It);case 5:return wt(bt,Ct,Et,It,Dt)}for(var Pt=new Array(arguments.length),qt=0;qt<arguments.length;++qt)Pt[qt]=arguments[qt];return nt(Pt)}}function Le(){for(;pe.length<=u;)pe.push(b(pe.length));r.exports=me.apply(void 0,[Ye].concat(pe));for(var nt=0;nt<=u;++nt)r.exports[nt]=pe[nt]}Le()}(orientation)),orientation.exports}var robustPnp,hasRequiredRobustPnp;function requireRobustPnp(){if(hasRequiredRobustPnp)return robustPnp;hasRequiredRobustPnp=1,robustPnp=a;var r=requireOrientation();function a(n,t){for(var l=t[0],u=t[1],s=n.length,p=1,d=s,h=0,N=s-1;h<d;N=h++){var Be=n[h],b=n[N],E=Be[1],de=b[1];if(de<E){if(de<u&&u<E){var pe=r(Be,b,t);if(pe===0)return 0;p^=0<pe|0}else if(u===E){var Ye=n[(h+1)%s],me=Ye[1];if(E<me){var pe=r(Be,b,t);if(pe===0)return 0;p^=0<pe|0}}}else if(E<de){if(E<u&&u<de){var pe=r(Be,b,t);if(pe===0)return 0;p^=pe<0|0}else if(u===E){var Ye=n[(h+1)%s],me=Ye[1];if(me<E){var pe=r(Be,b,t);if(pe===0)return 0;p^=pe<0|0}}}else if(u===E){var Le=Math.min(Be[0],b[0]),nt=Math.max(Be[0],b[0]);if(h===0){for(;N>0;){var tt=(N+s-1)%s,ft=n[tt];if(ft[1]!==u)break;var yt=ft[0];Le=Math.min(Le,yt),nt=Math.max(nt,yt),N=tt}if(N===0)return Le<=l&&l<=nt?0:1;d=N+1}for(var gt=n[(N+s-1)%s][1];h+1<d;){var ft=n[h+1];if(ft[1]!==u)break;var yt=ft[0];Le=Math.min(Le,yt),nt=Math.max(nt,yt),h+=1}if(Le<=l&&l<=nt)return 0;var mt=n[(h+1)%s][1];l<Le&&gt<u!=mt<u&&(p^=1)}}return 2*p-1}return robustPnp}var robustPnpExports=requireRobustPnp();const robustPointInPolygon=getDefaultExportFromCjs(robustPnpExports);function feretDiameters(r={}){const{originalPoints:a=monotoneChainConvexHull.call(this)}=r;if(a.length===0)return{min:0,max:0,minLine:[],maxLine:[],aspectRatio:1};if(a.length===1)return{min:1,max:1,minLine:[a[0],a[0]],maxLine:[a[0],a[0]],aspectRatio:1};const n=new Array(a.length);let t=1/0,l=0,u=[];for(let h=0;h<a.length;h++){let N=getAngle(a[h],a[(h+1)%a.length]);rotate(-N,a,n);let Be=0,b=[];for(let E=0;E<a.length;E++){let de=Math.abs(n[h][1]-n[E][1]);de>Be&&(Be=de,b=[],b.push([n[E][0],n[h][1]],[n[E][0],n[E][1]]))}Be<t&&(t=Be,l=N,u=b)}rotate(l,u,u);let s=0,p=[],d=0;for(let h=0;h<a.length-1;h++)for(let N=h+1;N<a.length;N++){let Be=(a[h][0]-a[N][0])**2+(a[h][1]-a[N][1])**2;Be>d&&(d=Be,s=Math.sqrt(Be),p=[a[h],a[N]])}return{min:t,minLine:u,max:s,maxLine:p,aspectRatio:t/s}}function getAngle(r,a){let n=difference(a,r),t=normalize(n),l=Math.acos(t[0]);return t[1]<0?-l:l}class Roi{constructor(a,n){this.map=a,this.id=n,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,this.meanX=0,this.meanY=0,this.surface=0,this.computed={}}getMask(a={}){const{scale:n=1,kind:t=""}=a;let l;switch(t){case"contour":l=this.contourMask;break;case"box":l=this.boxMask;break;case"filled":l=this.filledMask;break;case"center":l=this.centerMask;break;case"mbr":l=this.mbrFilledMask;break;case"hull":l=this.convexHullFilledMask;break;case"hullContour":l=this.convexHullMask;break;case"mbrContour":l=this.mbrMask;break;case"feret":l=this.feretMask;break;default:l=this.mask}return n<1&&(l=l.resize({factor:n}),l.parent=this.mask.parent,l.position[0]+=this.minX,l.position[1]+=this.minY),l}get mean(){throw new Error("Roi mean not implemented yet")}get center(){return this.computed.center||(this.computed.center=[this.width/2>>0,this.height/2>>0]),this.computed.center}get ratio(){return this.width/this.height}get width(){return this.maxX-this.minX+1}get height(){return this.maxY-this.minY+1}_computExternalIDs(){let a=this.borderIDs,n=this.borderLengths;this.computed.externalIDs=[],this.computed.externalLengths=[];let t=this.internalIDs;for(let l=0;l<a.length;l++)t.includes(a[l])||(this.computed.externalIDs.push(a[l]),this.computed.externalLengths.push(n[l]))}get externalIDs(){return this.computed.externalIDs?this.computed.externalIDs:(this._computExternalIDs(),this.computed.externalIDs)}get externalLengths(){return this.computed.externalLengths?this.computed.externalLengths:(this._computExternalIDs(),this.computed.externalLengths)}_computeBorderIDs(){let a=getBorders(this);this.computed.borderIDs=a.ids,this.computed.borderLengths=a.lengths}get borderIDs(){return this.computed.borderIDs?this.computed.borderIDs:(this._computeBorderIDs(),this.computed.borderIDs)}get borderLengths(){return this.computed.borderLengths?this.computed.borderLengths:(this._computeBorderIDs(),this.computed.borderLengths)}get boxIDs(){return this.computed.boxIDs||(this.computed.boxIDs=getBoxIDs(this)),this.computed.boxIDs}get internalIDs(){return this.computed.internalIDs||(this.computed.internalIDs=getInternalIDs(this)),this.computed.internalIDs}get box(){return this.computed.box||(this.computed.box=getBox(this)),this.computed.box}get external(){return this.computed.external||(this.computed.external=getExternal(this)),this.computed.external}get holesInfo(){return this.computed.holesInfo||(this.computed.holesInfo=getHolesInfo(this)),this.computed.holesInfo}get border(){return this.computed.border||(this.computed.border=getBorder(this)),this.computed.border}get contourMask(){if(!this.computed.contourMask){let a=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let n=0;n<this.width;n++)for(let t=0;t<this.height;t++)this.map.data[n+this.minX+(t+this.minY)*this.map.width]===this.id&&(n>0&&n<this.width-1&&t>0&&t<this.height-1?(this.map.data[n-1+this.minX+(t+this.minY)*this.map.width]!==this.id||this.map.data[n+1+this.minX+(t+this.minY)*this.map.width]!==this.id||this.map.data[n+this.minX+(t-1+this.minY)*this.map.width]!==this.id||this.map.data[n+this.minX+(t+1+this.minY)*this.map.width]!==this.id)&&a.setBitXY(n,t):a.setBitXY(n,t));this.computed.contourMask=a}return this.computed.contourMask}get boxMask(){if(!this.computed.boxMask){let a=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let n=0;n<this.width;n++)a.setBitXY(n,0),a.setBitXY(n,this.height-1);for(let n=0;n<this.height;n++)a.setBitXY(0,n),a.setBitXY(this.width-1,n);this.computed.boxMask=a}return this.computed.boxMask}get mask(){if(!this.computed.mask){let a=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let n=0;n<this.width;n++)for(let t=0;t<this.height;t++)this.map.data[n+this.minX+(t+this.minY)*this.map.width]===this.id&&a.setBitXY(n,t);this.computed.mask=a}return this.computed.mask}get filledMask(){if(!this.computed.filledMask){let a=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let n=0;n<this.width;n++)for(let t=0;t<this.height;t++){let l=n+this.minX+(t+this.minY)*this.map.width;this.internalIDs.includes(this.map.data[l])&&a.setBitXY(n,t)}this.computed.filledMask=a}return this.computed.filledMask}get centerMask(){if(!this.computed.centerMask){let a=new Shape({kind:"smallCross"}).getMask();a.parent=this.map.parent,a.position=[this.minX+this.center[0]-1,this.minY+this.center[1]-1],this.computed.centerMask=a}return this.computed.centerMask}get convexHull(){if(!this.computed.convexHull){const a=[];for(let t=0;t<this.width;t++)for(let l=0;l<this.height;l++)this.map.data[t+this.minX+(l+this.minY)*this.map.width]===this.id&&(t>0&&t<this.width-1&&l>0&&l<this.height-1?(this.map.data[t-1+this.minX+(l+this.minY)*this.map.width]!==this.id||this.map.data[t+1+this.minX+(l+this.minY)*this.map.width]!==this.id||this.map.data[t+this.minX+(l-1+this.minY)*this.map.width]!==this.id||this.map.data[t+this.minX+(l+1+this.minY)*this.map.width]!==this.id)&&(a.push([t,l]),a.push([t+1,l]),a.push([t,l+1]),a.push([t+1,l+1])):(a.push([t,l]),a.push([t+1,l]),a.push([t,l+1]),a.push([t+1,l+1])));const n=monotoneChainConvexHull$1(a);this.computed.convexHull={polyline:n,surface:surface(n),perimeter:perimeter(n)}}return this.computed.convexHull}get convexHullMask(){if(!this.computed.convexHullMask){const a=this.convexHull,n=new Image$1(this.width+1,this.height+1,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});n.paintPolyline(a.polyline,{closed:!0}),this.computed.convexHullMask=n}return this.computed.convexHullMask}get convexHullFilledMask(){if(!this.computed.convexHullFilledMask){const a=this.convexHull,n=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let t=0;t<this.width;t++)for(let l=0;l<this.height;l++)robustPointInPolygon(a.polyline,[t,l])!==1&&n.setBitXY(t,l);this.computed.convexHullFilledMask=n}return this.computed.convexHullFilledMask}get mbr(){if(!this.computed.mbr){let a=minimalBoundingRectangle({originalPoints:this.convexHull.polyline});if(a.length===0)this.computed.mbr={width:0,height:0,surface:0,perimeter:0,rectangle:a};else{let n=a[0],t=a[1],l=a[2],u=Math.sqrt((n[0]-t[0])**2+(n[1]-t[1])**2),s=Math.sqrt((l[0]-t[0])**2+(l[1]-t[1])**2);this.computed.mbr={width:u,height:s,elongation:1-u/s,aspectRatio:u/s,surface:u*s,perimeter:(u+s)*2,rectangle:a}}}return this.computed.mbr}get filledSurface(){return this.surface+this.holesInfo.surface}get fillRatio(){return this.surface/(this.surface+this.holesInfo.surface)}get feretDiameters(){return this.computed.feretDiameters||(this.computed.feretDiameters=feretDiameters({originalPoints:this.convexHull.polyline})),this.computed.feretDiameters}get eqpc(){return this.computed.eqpc||(this.computed.eqpc=2*Math.sqrt(this.surface/Math.PI)),this.computed.eqpc}get perimeterInfo(){return this.computed.perimeterInfo||(this.computed.perimeterInfo=getPerimeterInfo(this)),this.computed.perimeterInfo}get perimeter(){let a=this.perimeterInfo,n=2-Math.sqrt(2);return a.one+a.two*2+a.three*3+a.four*4-n*(a.two+a.three*2+a.four)}get ped(){return this.computed.ped||(this.computed.ped=this.perimeter/Math.PI),this.computed.ped}get feretMask(){if(!this.computed.feretMask){const a=new Image$1(this.width+1,this.height+1,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});a.paintPolyline(this.feretDiameters.minLine),a.paintPolyline(this.feretDiameters.maxLine),this.computed.feretMask=a}return this.computed.feretMask}get mbrMask(){if(!this.computed.mbrMask){let a=round(this.mbr.rectangle);if(a.length>0){const n=minMax(a),t=new Image$1(n[1][0]-n[0][0]+1,n[1][1]-n[0][1]+1,{kind:BINARY,position:[this.minX+n[0][0],this.minY+n[0][1]],parent:this.map.parent});a=moveToZeroZero(a),t.paintPolyline(a,{closed:!0}),this.computed.mbrMask=t}else this.computed.mbrMask=new Image$1(1,1,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent})}return this.computed.mbrMask}get mbrFilledMask(){if(!this.computed.mbrFilledMask){const a=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent}),n=this.mask.minimalBoundingRectangle();for(let t=0;t<this.width;t++)for(let l=0;l<this.height;l++)robustPointInPolygon(n,[t,l])!==1&&a.setBitXY(t,l);this.computed.mbrFilledMask=a}return this.computed.mbrFilledMask}get points(){if(!this.computed.points){let a=[];for(let n=0;n<this.height;n++)for(let t=0;t<this.width;t++){let l=(n+this.minY)*this.map.width+t+this.minX;this.map.data[l]===this.id&&a.push([t,n])}this.computed.points=a}return this.computed.points}get maxLengthPoints(){if(!this.computed.maxLengthPoints){let a=0,n;const t=this.points;for(let l=0;l<t.length;l++)for(let u=l+1;u<t.length;u++){let s=Math.pow(t[l][0]-t[u][0],2)+Math.pow(t[l][1]-t[u][1],2);s>=a&&(a=s,n=[t[l],t[u]])}this.computed.maxLengthPoints=n}return this.computed.maxLengthPoints}get maxLength(){if(!this.computed.maxLength){let a=Math.sqrt(Math.pow(this.maxLengthPoints[0][0]-this.maxLengthPoints[1][0],2)+Math.pow(this.maxLengthPoints[0][1]-this.maxLengthPoints[1][1],2));this.computed.maxLength=a}return this.computed.maxLength}get roundness(){return 4*this.surface/(Math.PI*this.feretDiameters.max**2)}get sphericity(){return 2*Math.sqrt(this.surface*Math.PI)/this.perimeter}get solidity(){return this.surface/this.convexHull.surface}get angle(){if(!this.computed.angle){let a=this.maxLengthPoints,n=-Math.atan2(a[0][1]-a[1][1],a[0][0]-a[1][0])*180/Math.PI;this.computed.angle=n}return this.computed.angle}toJSON(){return{id:this.id,minX:this.minX,maxX:this.maxX,minY:this.minY,maxY:this.maxY,meanX:this.meanX,meanY:this.meanY,height:this.height,width:this.width,filledSurface:this.filledSurface,surface:this.surface,hullSurface:this.convexHull.surface,hullPerimeter:this.convexHull.perimeter,mbrWidth:this.mbr.width,mbrHeight:this.mbr.height,mbrSurface:this.mbr.surface,eqpc:this.eqpc,ped:this.ped,feretDiameterMin:this.feretDiameters.min,feretDiameterMax:this.feretDiameters.max,aspectRatio:this.feretDiameters.aspectRatio,fillRatio:this.fillRatio,sphericity:this.sphericity,roundness:this.roundness,solidity:this.solidity,perimeter:this.perimeter}}}function getBorders(r){let a=r.map,n=a.data,t=new Set,l=new Map,u=new Set,s=[1,0,-1,0],p=[0,1,0,-1];for(let N=r.minX;N<=r.maxX;N++)for(let Be=r.minY;Be<=r.maxY;Be++){let b=N+Be*a.width;if(n[b]===r.id)for(let E=0;E<4;E++){let de=N+s[E],pe=Be+p[E];if(de>=0&&pe>=0&&de<a.width&&pe<a.height){let Ye=de+pe*a.width;if(n[Ye]!==r.id&&!u.has(Ye)){u.add(Ye),t.add(n[Ye]);let me=l.get(n[Ye]);me?l.set(n[Ye],++me):l.set(n[Ye],1)}}}}let d=Array.from(t),h=d.map(function(N){return l.get(N)});return{ids:d,lengths:h}}function getBoxIDs(r){let a=new Set,n=r.map,t=n.data;for(let l of[0,r.height-1])for(let u=0;u<r.width;u++){let s=(l+r.minY)*n.width+u+r.minX;if(u-r.minX>0&&t[s]===r.id&&t[s-1]!==r.id){let p=t[s-1];a.add(p)}if(n.width-u-r.minX>1&&t[s]===r.id&&t[s+1]!==r.id){let p=t[s+1];a.add(p)}}for(let l of[0,r.width-1])for(let u=0;u<r.height;u++){let s=(u+r.minY)*n.width+l+r.minX;if(u-r.minY>0&&t[s]===r.id&&t[s-n.width]!==r.id){let p=t[s-n.width];a.add(p)}if(n.height-u-r.minY>1&&t[s]===r.id&&t[s+n.width]!==r.id){let p=t[s+n.width];a.add(p)}}return Array.from(a)}function getBox(r){let a=0,n=r.map,t=n.data,l=[0];r.height>1&&(l[1]=r.height-1);for(let s of l)for(let p=1;p<r.width-1;p++){let d=(s+r.minY)*n.width+p+r.minX;t[d]===r.id&&a++}let u=[0];r.width>1&&(u[1]=r.width-1);for(let s of u)for(let p=0;p<r.height;p++){let d=(p+r.minY)*n.width+s+r.minX;t[d]===r.id&&a++}return a}function getBorder(r){let a=0,n=r.map,t=n.data;for(let l=1;l<r.width-1;l++)for(let u=1;u<r.height-1;u++){let s=(u+r.minY)*n.width+l+r.minX;t[s]===r.id&&(t[s-1]!==r.id||t[s+1]!==r.id||t[s-n.width]!==r.id||t[s+n.width]!==r.id)&&a++}return a+r.box}function getPerimeterInfo(r){let a=r.map,n=a.data,t=0,l=0,u=0,s=0;for(let p=0;p<r.width;p++)for(let d=0;d<r.height;d++){let h=(d+r.minY)*a.width+p+r.minX;if(n[h]===r.id){let N=0;switch((p===0||r.externalIDs.includes(n[h-1]))&&N++,(p===r.width-1||r.externalIDs.includes(n[h+1]))&&N++,(d===0||r.externalIDs.includes(n[h-a.width]))&&N++,(d===r.height-1||r.externalIDs.includes(n[h+a.width]))&&N++,N){case 1:t++;break;case 2:l++;break;case 3:u++;break;case 4:s++;break}}}return{one:t,two:l,three:u,four:s}}function getExternal(r){let a=0,n=r.map,t=n.data;for(let l=1;l<r.width-1;l++)for(let u=1;u<r.height-1;u++){let s=(u+r.minY)*n.width+l+r.minX;t[s]===r.id&&(r.externalIDs.includes(t[s-1])||r.externalIDs.includes(t[s+1])||r.externalIDs.includes(t[s-n.width])||r.externalIDs.includes(t[s+n.width]))&&a++}return a+r.box}function getHolesInfo(r){let a=0,n=r.map.width,t=r.map.data;for(let l=1;l<r.width-1;l++)for(let u=1;u<r.height-1;u++){let s=(u+r.minY)*n+l+r.minX;r.internalIDs.includes(t[s])&&t[s]!==r.id&&a++}return{number:r.internalIDs.length-1,surface:a}}function getInternalIDs(r){let a=[r.id],n=r.map,t=n.data;if(r.height>2)for(let u=0;u<r.width;u++){let s=r.minY*n.width+u+r.minX;if(a.includes(t[s])){let p=t[s+n.width];!a.includes(p)&&!r.boxIDs.includes(p)&&a.push(p)}}let l=new Array(4);for(let u=1;u<r.width-1;u++)for(let s=1;s<r.height-1;s++){let p=(s+r.minY)*n.width+u+r.minX;if(a.includes(t[p])){l[0]=t[p-1],l[1]=t[p+1],l[2]=t[p-n.width],l[3]=t[p+n.width];for(let d=0;d<4;d++){let h=l[d];!a.includes(h)&&!r.boxIDs.includes(h)&&a.push(h)}}}return a}class RoiLayer{constructor(a,n){this.roiMap=a,this.options=n,this.roi=this.createRoi()}createRoi(){let a=this.roiMap.data,n={};this.roiMap.positive=0,this.roiMap.negative=0;for(let p=0;p<a.length;p++)a[p]&&!n[a[p]]&&(n[a[p]]=!0,a[p]>0?this.roiMap.positive++:this.roiMap.negative++);let t={};for(let p in n)t[p]=new Roi(this.roiMap,p*1);let l=this.roiMap.width,u=this.roiMap.height;for(let p=0;p<u;p++)for(let d=0;d<l;d++){let h=p*l+d;if(a[h]!==0){const N=a[h],Be=t[N];d<Be.minX&&(Be.minX=d),d>Be.maxX&&(Be.maxX=d),p<Be.minY&&(Be.minY=p),p>Be.maxY&&(Be.maxY=p),Be.meanX+=d,Be.meanY+=p,Be.surface++}}let s=[];for(let p in n)t[p].meanX/=t[p].surface,t[p].meanY/=t[p].surface,s.push(t[p]);return s}}function commonBorderLength(r){let a=r.data,n=[1,0,-1,0],t=[0,1,0,-1],l=r.minMax,u=-l.min,s=l.max+u,p=[];for(let h=0;h<=s;h++)p.push(Object.create(null));for(let h=0;h<r.width;h++)for(let N=0;N<r.height;N++){let Be=h+N*r.width,b=a[Be];if(b!==0){let E=Object.create(null),de=!1;for(let pe=0;pe<4;pe++){let Ye=h+n[pe],me=N+t[pe];if(Ye>=0&&me>=0&&Ye<r.width&&me<r.height){let Le=a[Ye+me*r.width];b!==Le&&(de=!0,Le!==0&&E[Le]===void 0&&(E[Le]=!0,p[Le+u][b]?p[Le+u][b]++:p[Le+u][b]=1))}else de=!0}de&&(p[b+u][b]?p[b+u][b]++:p[b+u][b]=1)}}let d={};for(let h=0;h<p.length;h++)Object.keys(p[h]).length>0&&(d[h-u]=p[h]);return d}function mergeRoi(r={}){const{algorithm:a="commonBorderLength",minCommonBorderLength:n=5,maxCommonBorderLength:t=100,minCommonBorderRatio:l=.3,maxCommonBorderRatio:u=1}=r;let s=function(Ye,me,Le){return Ye[Le]>=n&&Ye[Le]<=t};typeof a=="function"&&(s=a),a.toLowerCase()==="commonborderratio"&&(s=function(Ye,me,Le){let nt=Math.min(Ye[Le]/Ye[me],1);return nt>=l&&nt<=u});const p=this,d=p.commonBorderLength;let h={},N={};for(let Ye of Object.keys(d)){let me=d[Ye],Le=Object.keys(me);for(let nt of Le)if(nt!==Ye&&s(me,Ye,nt)){let tt=nt;N[nt]&&(tt=N[nt]);let ft=Ye;if(N[Ye]&&(ft=N[Ye]),Number(tt)!==ft){let yt=Math.min(tt,ft),gt=Math.max(tt,ft);if(h[yt]||(h[yt]={}),h[yt][gt]=!0,N[gt]=yt,h[gt]){for(let mt of Object.keys(h[gt]))h[yt][mt]=!0,N[mt]=yt;delete h[gt]}}}}let Be=p.minMax,b=-Be.min,E=Be.max+b,de=new Array(E+1).fill(0);for(let Ye of Object.keys(N))de[Number(Ye)+b]=N[Ye];let pe=p.data;for(let Ye=0;Ye<pe.length;Ye++){let me=pe[Ye];if(me!==0){let Le=de[me+b];Le!==0&&(pe[Ye]=Le)}}return p.computed={},p}class RoiMap{constructor(a,n){this.parent=a,this.width=a.width,this.height=a.height,this.data=n,this.negative=0,this.positive=0}get total(){return this.negative+this.positive}get minMax(){let a=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;for(let t=0;t<this.data.length;t++)this.data[t]<a&&(a=this.data[t]),this.data[t]>n&&(n=this.data[t]);return{min:a,max:n}}get commonBorderLength(){return commonBorderLength(this)}mergeRoi(a={}){return mergeRoi.call(this,a)}mergeRois(a){const n=a[0],t=a.slice(1);for(let l=0;l<this.data.length;l++)t.includes(this.data[l])&&(this.data[l]=n)}rowsInfo(){let a=new Array(this.height),n=0;for(let t=0;t<this.data.length;t+=this.width){let l={row:n,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};a[n++]=l;let u={},s={},p=[],d=this.data[t],h=0;for(let N=t;N<t+this.width;N++){let Be=this.data[N];d!==Be&&(d=Be,p.push(h),h=0),h++,Be>0?(l.positivePixel++,u[Be]||(u[Be]=!0)):Be<0?(l.negativePixel++,s[Be]||(s[Be]=!0)):l.zeroPixel++}p.push(h),l.medianChange=p.sort((N,Be)=>N-Be)[Math.floor(p.length/2)],l.positiveRoiIDs=Object.keys(u),l.negativeRoiIDs=Object.keys(s),l.positiveRoi=l.positiveRoiIDs.length,l.negativeRoi=l.negativeRoiIDs.length}return a}colsInfo(){let a=new Array(this.width),n=0;for(let t=0;t<this.width;t++){let l={col:n,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};a[n++]=l;let u={},s={},p=[],d=this.data[t],h=0;for(let N=t;N<t+this.data.length;N+=this.width){let Be=this.data[N];d!==Be&&(d=Be,p.push(h),h=0),h++,Be>0?(l.positivePixel++,u[Be]||(u[Be]=!0)):Be<0?(l.negativePixel++,s[Be]||(s[Be]=!0)):l.zeroPixel++}p.push(h),l.medianChange=p.sort((N,Be)=>N-Be)[Math.floor(p.length/2)],l.positiveRoiIDs=Object.keys(u),l.negativeRoiIDs=Object.keys(s),l.positiveRoi=l.positiveRoiIDs.length,l.negativeRoi=l.negativeRoiIDs.length}return a}}function fromMask(r,a={}){const{allowCorners:n=!1}=a,t=65535;let l=new Int16Array(r.size),u=0,s=0,p=new Uint16Array(t+1),d=new Uint16Array(t+1);for(let N=0;N<r.width;N++)for(let Be=0;Be<r.height;Be++)l[Be*r.width+N]===0&&h(N,Be);function h(N,Be){let b=0,E=0,de=r.getBitXY(N,Be),pe=de?++u:--s;if(u>32767||s<-32768)throw new Error("Too many regions of interest");for(p[0]=N,d[0]=Be;b<=E;){let Ye=p[b&t],me=d[b&t];if(l[me*r.width+Ye]=pe,Ye>0&&l[me*r.width+Ye-1]===0&&r.getBitXY(Ye-1,me)===de&&(E++,p[E&t]=Ye-1,d[E&t]=me,l[me*r.width+Ye-1]=-32768),me>0&&l[(me-1)*r.width+Ye]===0&&r.getBitXY(Ye,me-1)===de&&(E++,p[E&t]=Ye,d[E&t]=me-1,l[(me-1)*r.width+Ye]=-32768),Ye<r.width-1&&l[me*r.width+Ye+1]===0&&r.getBitXY(Ye+1,me)===de&&(E++,p[E&t]=Ye+1,d[E&t]=me,l[me*r.width+Ye+1]=-32768),me<r.height-1&&l[(me+1)*r.width+Ye]===0&&r.getBitXY(Ye,me+1)===de&&(E++,p[E&t]=Ye,d[E&t]=me+1,l[(me+1)*r.width+Ye]=-32768),n&&(Ye>0&&me>0&&l[(me-1)*r.width+Ye-1]===0&&r.getBitXY(Ye-1,me-1)===de&&(E++,p[E&t]=Ye-1,d[E&t]=me-1,l[(me-1)*r.width+Ye-1]=-32768),Ye<r.width-1&&me>0&&l[(me-1)*r.width+Ye+1]===0&&r.getBitXY(Ye+1,me-1)===de&&(E++,p[E&t]=Ye+1,d[E&t]=me-1,l[(me-1)*r.width+Ye+1]=-32768),Ye>0&&me<r.height-1&&l[(me+1)*r.width+Ye-1]===0&&r.getBitXY(Ye-1,me+1)===de&&(E++,p[E&t]=Ye-1,d[E&t]=me+1,l[(me+1)*r.width+Ye-1]=-32768),Ye<r.width-1&&me<r.height-1&&l[(me+1)*r.width+Ye+1]===0&&r.getBitXY(Ye+1,me+1)===de&&(E++,p[E&t]=Ye+1,d[E&t]=me+1,l[(me+1)*r.width+Ye+1]=-32768)),b++,E-b>t)throw new Error("analyseMask can not finish, the array to manage internal data is not big enough.You could improve mask by changing MAX_ARRAY")}}return new RoiMap(r,l)}var DisjointSet_1,hasRequiredDisjointSet;function requireDisjointSet(){if(hasRequiredDisjointSet)return DisjointSet_1;hasRequiredDisjointSet=1;class r{constructor(){this.nodes=new Map}add(t){var l=this.nodes.get(t);return l||(l=new a(t),this.nodes.set(t,l)),l}union(t,l){const u=this.find(t),s=this.find(l);u!==s&&(u.rank<s.rank?u.parent=s:u.rank>s.rank?s.parent=u:(s.parent=u,u.rank++))}find(t){for(var l=t;l.parent!==null;)l=l.parent;for(var u=t;u.parent!==null;){var s=u;u=u.parent,s.parent=l}return l}connected(t,l){return this.find(t)===this.find(l)}}DisjointSet_1=r;function a(n){this.value=n,this.parent=null,this.rank=0}return DisjointSet_1}var DisjointSetExports=requireDisjointSet();const DisjointSet=getDefaultExportFromCjs(DisjointSetExports),direction4X=[-1,0],direction4Y=[0,-1],neighbours4=[null,null],direction8X=[-1,-1,0,1],direction8Y=[0,-1,-1,-1],neighbours8=[null,null,null,null];function fromMaskConnectedComponentLabelingAlgorithm(r,a={}){const{allowCorners:n=!1}=a;let t=4;n&&(t=8);let l,u,s;if(t===8)l=direction8X,u=direction8Y,s=neighbours8;else if(t===4)l=direction4X,u=direction4Y,s=neighbours4;else throw new RangeError(`unsupported neighbours count: ${t}`);const p=r.size,d=r.width,h=r.height,N=new Array(p),Be=new Uint32Array(p),b=new DisjointSet;let E=1;for(let de=0;de<h;de++)for(let pe=0;pe<d;pe++){const Ye=pe+de*d;if(r.getBit(Ye)){let me=null;for(let Le=0;Le<s.length;Le++){const nt=pe+l[Le],tt=de+u[Le];if(nt>=0&&tt>=0&&nt<d&&tt<h){const ft=nt+tt*d;let yt=N[ft];yt?(s[Le]=yt,(!me||s[Le].value<me.value)&&(me=s[Le])):s[Le]=null}}if(!me)N[Ye]=b.add(E++);else{N[Ye]=me;for(let Le=0;Le<s.length;Le++)s[Le]&&s[Le]!==me&&b.union(me,s[Le])}}}for(let de=0;de<h;de++)for(let pe=0;pe<d;pe++){const Ye=pe+de*d;r.getBit(Ye)&&(Be[Ye]=b.find(N[Ye]).value)}return new RoiMap(r,Be)}function fromMaxima(r={}){let{allowCorner:a=!0,onlyTop:n=!1,invert:t=!1}=r,l=this;l.checkProcessable("fromMaxima",{components:[1]});const u=1,s=2;let p=0,d=0,h=new Int16Array(l.size),N=new Int8Array(l.size),Be=new Float32Array(l.size),b=1048575,E=new Uint16Array(b+1),de=new Uint16Array(b+1),pe=0,Ye=0,me=new Uint16Array(b+1),Le=new Uint16Array(b+1),nt=0,tt=0;for(ft(l);pe<Ye;){let mt=E[pe&b],wt=de[pe&b];gt(mt,wt,s),pe++}return new RoiMap(l,h);function ft({maxima:mt=!0}){for(let wt=1;wt<l.height-1;wt++)for(let St=1;St<l.width-1;St++){let bt=St+wt*l.width;if(N[bt]===0){let Ct=mt?l.data[bt]:-l.data[St+wt*l.width];if(l.data[wt*l.width+St-1]>Ct||l.data[wt*l.width+St+1]>Ct||l.data[(wt-1)*l.width+St]>Ct||l.data[(wt+1)*l.width+St]>Ct||a&&(l.data[(wt-1)*l.width+St-1]>Ct||l.data[(wt-1)*l.width+St+1]>Ct||l.data[(wt+1)*l.width+St-1]>Ct||l.data[(wt+1)*l.width+St+1]>Ct))continue;h[bt]=mt?++p:--d,yt(St,wt)||(mt?--p:++d)}}}function yt(mt,wt){let St=Ye;nt=0,tt=1,me[0]=mt,Le[0]=wt;let bt=!0;for(;nt<tt;){let Ct=me[nt&b],Et=Le[nt&b];bt&=gt(Ct,Et,u),nt++}if(!bt){for(let Ct=0;Ct<tt;Ct++){let Et=me[Ct&b],Dt=Le[Ct&b]*l.width+Et;h[Dt]=0}Ye=St}return bt}function gt(mt,wt,St){let bt=h[wt*l.width+mt],Ct=l.data[wt*l.width+mt];for(let Et=wt-1;Et<=wt+1;Et++)for(let It=mt-1;It<=mt+1;It++){let Dt=Et*l.width+It;if(N[Dt]===0)switch(N[Dt]=1,Be[Dt]=l.data[Dt]-Ct,St){case u:if(Be[Dt]===0){if(It===0||Et===0||It===l.width-1||Et===l.height-1)return!1;h[Dt]=bt,me[tt&b]=It,Le[tt&b]=Et,tt++}else{if(Be[Dt]>0)return!1;n||(h[Dt]=bt,E[Ye&b]=It,de[Ye&b]=Et,Ye++)}break;case s:Be[Dt]<=0&&(h[Dt]=bt,E[Ye&b]=It,de[Ye&b]=Et,Ye++);break;default:throw new Error("unreachable")}}return!0}}function fromPoints(r,a={}){let n=new Shape(a),t=new Int16Array(this.size),l=0,u=n.getPoints();for(let s=0;s<r.length;s++){l++;let p=r[s][0],d=r[s][1];for(let h=0;h<u.length;h++){let N=u[h][0],Be=u[h][1];p+N>=0&&d+Be>=0&&p+N<this.width&&d+Be<this.height&&(t[p+N+(d+Be)*this.width]=l)}}return new RoiMap(this,t)}var priorityQueue={exports:{}},hasRequiredPriorityQueue;function requirePriorityQueue(){return hasRequiredPriorityQueue||(hasRequiredPriorityQueue=1,function(r,a){(function(n){r.exports=n()})(function(){return function n(t,l,u){function s(h,N){if(!l[h]){if(!t[h]){var Be=typeof commonjsRequire=="function"&&commonjsRequire;if(!N&&Be)return Be(h,!0);if(p)return p(h,!0);var b=new Error("Cannot find module '"+h+"'");throw b.code="MODULE_NOT_FOUND",b}var E=l[h]={exports:{}};t[h][0].call(E.exports,function(de){var pe=t[h][1][de];return s(pe||de)},E,E.exports,n,t,l,u)}return l[h].exports}for(var p=typeof commonjsRequire=="function"&&commonjsRequire,d=0;d<u.length;d++)s(u[d]);return s}({1:[function(n,t,l){var u,s,p,d,h,N=function(b,E){for(var de in E)Be.call(E,de)&&(b[de]=E[de]);function pe(){this.constructor=b}return pe.prototype=E.prototype,b.prototype=new pe,b.__super__=E.prototype,b},Be={}.hasOwnProperty;u=n("./PriorityQueue/AbstractPriorityQueue"),s=n("./PriorityQueue/ArrayStrategy"),d=n("./PriorityQueue/BinaryHeapStrategy"),p=n("./PriorityQueue/BHeapStrategy"),h=function(b){N(E,b);function E(de){de||(de={}),de.strategy||(de.strategy=d),de.comparator||(de.comparator=function(pe,Ye){return(pe||0)-(Ye||0)}),E.__super__.constructor.call(this,de)}return E}(u),h.ArrayStrategy=s,h.BinaryHeapStrategy=d,h.BHeapStrategy=p,t.exports=h},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3,"./PriorityQueue/BHeapStrategy":4,"./PriorityQueue/BinaryHeapStrategy":5}],2:[function(n,t,l){t.exports=function(){function u(s){var p;if((s!=null?s.strategy:void 0)==null)throw"Must pass options.strategy, a strategy";if((s!=null?s.comparator:void 0)==null)throw"Must pass options.comparator, a comparator";this.priv=new s.strategy(s),this.length=(s!=null&&(p=s.initialValues)!=null?p.length:void 0)||0}return u.prototype.queue=function(s){this.length++,this.priv.queue(s)},u.prototype.dequeue=function(s){if(!this.length)throw"Empty queue";return this.length--,this.priv.dequeue()},u.prototype.peek=function(s){if(!this.length)throw"Empty queue";return this.priv.peek()},u.prototype.clear=function(){return this.length=0,this.priv.clear()},u}()},{}],3:[function(n,t,l){var u;u=function(s,p,d){var h,N,Be;for(N=0,h=s.length;N<h;)Be=N+h>>>1,d(s[Be],p)>=0?N=Be+1:h=Be;return N},t.exports=function(){function s(p){var d;this.options=p,this.comparator=this.options.comparator,this.data=((d=this.options.initialValues)!=null?d.slice(0):void 0)||[],this.data.sort(this.comparator).reverse()}return s.prototype.queue=function(p){var d;d=u(this.data,p,this.comparator),this.data.splice(d,0,p)},s.prototype.dequeue=function(){return this.data.pop()},s.prototype.peek=function(){return this.data[this.data.length-1]},s.prototype.clear=function(){this.data.length=0},s}()},{}],4:[function(n,t,l){t.exports=function(){function u(s){var p,d,h,N,Be,b,E,de;for(this.comparator=(s!=null?s.comparator:void 0)||function(pe,Ye){return pe-Ye},this.pageSize=(s!=null?s.pageSize:void 0)||512,this.length=0,E=0;1<<E<this.pageSize;)E+=1;if(1<<E!==this.pageSize)throw"pageSize must be a power of two";for(this._shift=E,this._emptyMemoryPageTemplate=p=[],d=0,Be=this.pageSize;0<=Be?d<Be:d>Be;0<=Be?++d:--d)p.push(null);if(this._memory=[],this._mask=this.pageSize-1,s.initialValues)for(b=s.initialValues,h=0,N=b.length;h<N;h++)de=b[h],this.queue(de)}return u.prototype.queue=function(s){this.length+=1,this._write(this.length,s),this._bubbleUp(this.length,s)},u.prototype.dequeue=function(){var s,p;return s=this._read(1),p=this._read(this.length),this.length-=1,this.length>0&&(this._write(1,p),this._bubbleDown(1,p)),s},u.prototype.peek=function(){return this._read(1)},u.prototype.clear=function(){this.length=0,this._memory.length=0},u.prototype._write=function(s,p){var d;for(d=s>>this._shift;d>=this._memory.length;)this._memory.push(this._emptyMemoryPageTemplate.slice(0));return this._memory[d][s&this._mask]=p},u.prototype._read=function(s){return this._memory[s>>this._shift][s&this._mask]},u.prototype._bubbleUp=function(s,p){var d,h,N,Be;for(d=this.comparator;s>1&&(h=s&this._mask,s<this.pageSize||h>3?N=s&~this._mask|h>>1:h<2?(N=s-this.pageSize>>this._shift,N+=N&~(this._mask>>1),N|=this.pageSize>>1):N=s-2,Be=this._read(N),!(d(Be,p)<0));)this._write(N,p),this._write(s,Be),s=N},u.prototype._bubbleDown=function(s,p){var d,h,N,Be,b;for(b=this.comparator;s<this.length;)if(s>this._mask&&!(s&this._mask-1)?d=h=s+2:s&this.pageSize>>1?(d=(s&~this._mask)>>1,d|=s&this._mask>>1,d=d+1<<this._shift,h=d+1):(d=s+(s&this._mask),h=d+1),d!==h&&h<=this.length)if(N=this._read(d),Be=this._read(h),b(N,p)<0&&b(N,Be)<=0)this._write(d,p),this._write(s,N),s=d;else if(b(Be,p)<0)this._write(h,p),this._write(s,Be),s=h;else break;else if(d<=this.length)if(N=this._read(d),b(N,p)<0)this._write(d,p),this._write(s,N),s=d;else break;else break},u}()},{}],5:[function(n,t,l){t.exports=function(){function u(s){var p;this.comparator=(s!=null?s.comparator:void 0)||function(d,h){return d-h},this.length=0,this.data=((p=s.initialValues)!=null?p.slice(0):void 0)||[],this._heapify()}return u.prototype._heapify=function(){var s,p,d;if(this.data.length>0)for(s=p=1,d=this.data.length;1<=d?p<d:p>d;s=1<=d?++p:--p)this._bubbleUp(s)},u.prototype.queue=function(s){this.data.push(s),this._bubbleUp(this.data.length-1)},u.prototype.dequeue=function(){var s,p;return p=this.data[0],s=this.data.pop(),this.data.length>0&&(this.data[0]=s,this._bubbleDown(0)),p},u.prototype.peek=function(){return this.data[0]},u.prototype.clear=function(){this.length=0,this.data.length=0},u.prototype._bubbleUp=function(s){for(var p,d;s>0&&(p=s-1>>>1,this.comparator(this.data[s],this.data[p])<0);)d=this.data[p],this.data[p]=this.data[s],this.data[s]=d,s=p},u.prototype._bubbleDown=function(s){var p,d,h,N,Be;for(p=this.data.length-1;d=(s<<1)+1,N=d+1,h=s,d<=p&&this.comparator(this.data[d],this.data[h])<0&&(h=d),N<=p&&this.comparator(this.data[N],this.data[h])<0&&(h=N),h!==s;)Be=this.data[h],this.data[h]=this.data[s],this.data[s]=Be,s=h},u}()},{}]},{},[1])(1)})}(priorityQueue)),priorityQueue.exports}var priorityQueueExports=requirePriorityQueue();const PriorityQueue=getDefaultExportFromCjs(priorityQueueExports),dxs=[1,0,-1,0,1,1,-1,-1],dys=[0,1,0,-1,1,-1,1,-1];function fromWaterShed(r={}){let{points:a,mask:n,image:t,fillMaxValue:l=this.maxValue,invert:u=!1}=r,s=t||this;s.checkProcessable("fromWaterShed",{bitDepth:[8,16],components:1}),u=!u,a||(a=s.getLocalMaxima({invert:u,mask:n}));let p=u?0:1,d=new Int16Array(s.size),h=s.width,N=s.height,Be=new PriorityQueue({comparator:(b,E)=>b[2]-E[2],strategy:PriorityQueue.BinaryHeapStrategy});for(let b=0;b<a.length;b++){let E=a[b][0]+a[b][1]*h;d[E]=b+1;let de=s.data[E];(u&&de<=l||!u&&de>=l)&&Be.queue([a[b][0],a[b][1],de])}for(;Be.length>0;){let b=Be.dequeue(),E=b[0]+b[1]*h;for(let de=0;de<4;de++){let pe=b[0]+dxs[de],Ye=b[1]+dys[de];if(pe>=0&&Ye>=0&&pe<h&&Ye<N){let me=pe+Ye*h;if(!n||n.getBit(me)===p){let Le=s.data[me];(u&&Le<=l||!u&&Le>=l)&&d[me]===0&&(d[me]=d[E],Be.queue([b[0]+dxs[de],b[1]+dys[de],Le]))}}}}return new RoiMap(s,d)}class RoiManager{constructor(a,n={}){this._image=a,this._options=n,this._options.label||(this._options.label="default"),this._layers={},this._painted=null}fromMaxima(a={}){let n=Object.assign({},this._options,a),t=fromMaxima.call(this._image,a);this._layers[n.label]=new RoiLayer(t,n)}fromPoints(a,n={}){let t=Object.assign({},this._options,n),l=fromPoints.call(this._image,a,n);return this._layers[t.label]=new RoiLayer(l,t),this}putMap(a,n={}){let t=new RoiMap(this._image,a),l=Object.assign({},this._options,n);return this._layers[l.label]=new RoiLayer(t,l),this}fromWaterShed(a={}){let n=Object.assign({},this._options,a),t=fromWaterShed.call(this._image,a);this._layers[n.label]=new RoiLayer(t,n)}fromMask(a,n={}){let t=Object.assign({},this._options,n),l=fromMask.call(this._image,a,n);return this._layers[t.label]=new RoiLayer(l,t),this}fromMaskConnectedComponentLabelingAlgorithm(a,n={}){let t=Object.assign({},this._options,n),l=fromMaskConnectedComponentLabelingAlgorithm.call(this._image,a,n);return this._layers[t.label]=new RoiLayer(l,t),this}getMap(a={}){let n=Object.assign({},this._options,a);return this._assertLayerWithLabel(n.label),this._layers[n.label].roiMap}rowsInfo(a={}){return this.getMap(a).rowsInfo()}colsInfo(a={}){return this.getMap(a).rowsInfo()}getRoiIds(a={}){let n=this.getRois(a);if(n){let t=new Array(n.length);for(let l=0;l<n.length;l++)t[l]=n[l].id;return t}throw new Error("ROIs not found")}getRois(a={}){let{label:n=this._options.label,positive:t=!0,negative:l=!0,minSurface:u=0,maxSurface:s=Number.POSITIVE_INFINITY,minWidth:p=0,maxWidth:d=Number.POSITIVE_INFINITY,minHeight:h=0,maxHeight:N=Number.POSITIVE_INFINITY,minRatio:Be=0,maxRatio:b=Number.POSITIVE_INFINITY}=a;if(!this._layers[n])throw new Error(`this Roi layer (${n}) does not exist`);const E=this._layers[n].roi,de=[];for(const pe of E)(pe.id<0&&l||pe.id>0&&t)&&pe.surface>=u&&pe.surface<=s&&pe.width>=p&&pe.width<=d&&pe.height>=h&&pe.height<=N&&pe.ratio>=Be&&pe.ratio<=b&&de.push(pe);return de}getRoi(a,n={}){const{label:t=this._options.label}=n;if(!this._layers[t])throw new Error(`this Roi layer (${t}) does not exist`);const l=this._layers[t].roi.find(u=>u.id===a);if(!l)throw new Error(`found no Roi with id ${a}`);return l}getMasks(a={}){let n=this.getRois(a),t=new Array(n.length);for(let l=0;l<n.length;l++)t[l]=n[l].getMask(a);return t}getAnalysisMasks(a={}){const{analysisProperty:n}=a;let t=`${n}Mask`,l=this.getRois(a);return l.length===0||!l[0][t]?[]:l.map(u=>u[t])}getData(a={}){let n=Object.assign({},this._options,a);return this._assertLayerWithLabel(n.label),this._layers[n.label].roiMap.data}paint(a={}){let{labelProperty:n,analysisProperty:t}=a;this._painted||(this._painted=this._image.rgba8());let l=this.getMasks(a);if(n){const u=this.getRois(a);a.labels=u.map(h=>deepValue(h,n));const s=Math.max(...a.labels);let p=!1,d=!1;if(n.includes("surface")?p=!0:/(?:perimeter|min|max|external|width|height|length)/.test(n)&&(d=!0),isFinite(s)){let h="";if(a.unit!=="pixel"&&a.pixelSize&&(d||p)){h=p?`${a.unit}^2`:a.unit;let N=p?"m^2":"m",Be=p?a.pixelSize**2:a.pixelSize;const b=Qty.swiftConverter(N,h);a.labels=a.labels.map(E=>b(Be*E))}s>50?a.labels=a.labels.map(N=>Math.round(N)+h):s>10?a.labels=a.labels.map(N=>N.toFixed(1)+h):a.labels=a.labels.map(N=>N.toFixed(2)+h)}a.labelsPosition=u.map(h=>[h.meanX,h.meanY])}if(this._painted.paintMasks(l,a),t){let u=this.getAnalysisMasks(a);this._painted.paintMasks(u,{color:a.analysisColor,alpha:a.analysisAlpha})}return this._painted}getMask(a={}){let n=new Image$1(this._image.width,this._image.height,{kind:"BINARY"}),t=this.getMasks(a);for(let l=0;l<t.length;l++){let u=t[l];for(let s=0;s<u.width;s++)for(let p=0;p<u.height;p++)u.getBitXY(s,p)&&n.setBitXY(s+u.position[0],p+u.position[1])}return n}resetPainted(a={}){const{image:n}=a;n?this._painted=this.image.rgba8():this._painted=this._image.rgba8()}mergeRoi(a={}){const n=this.getMap(a);return n.mergeRoi(a),this.putMap(n.data,a),this}mergeRois(a,n={}){if(!Array.isArray(a)||a.some(l=>!Number.isInteger(l)))throw new Error("Roi ids must be an array of integers");if(a.length<2)throw new Error("Roi ids must have at least two elements");if(new Set(a).size!==a.length)throw new Error("Roi ids must be all different");a.forEach(l=>this.getRoi(l));const t=this.getMap(n);return t.mergeRois(a),this.putMap(t.data,n),this}findCorrespondingRoi(a,n={}){let t=this.getRois(n),l=[];for(let u=0;u<t.length;u++){let s=t[u],p=s.minX,d=s.minY,h=s.points,N=Math.sign(s.id),Be=correspondingRoisInformation(p,d,h,a,N);l.push(Be)}return l}_assertLayerWithLabel(a){if(!this._layers[a])throw new Error(`no layer with label ${a}`)}}function correspondingRoisInformation(r,a,n,t,l){let u={id:[],surface:[],roiSurfaceCovered:[],same:0,opposite:0,total:0};for(let s=0;s<n.length;s++){let p=n[s],d=p[0],h=p[1],N=d+r+(h+a)*t.width,Be=t.data[N];(Be>0||Be<0)&&(u.id.includes(Be)?u.surface[u.id.indexOf(Be)]+=1:(u.id.push(Be),u.surface.push(1)))}for(let s=0;s<u.id.length;s++)Math.sign(u.id[s])===l?u.same+=u.surface[s]:u.opposite+=u.surface[s],u.roiSurfaceCovered[s]=u.surface[s]/n.length;return u.total=u.opposite+u.same,u}const objectToString=Object.prototype.toString;let Image$1=class zu{constructor(a,n,t,l){if(arguments.length===1?(l=a,{width:a,height:n,data:t}=l):t&&!t.length&&(l=t,{data:t}=l),a===void 0&&(a=1),n===void 0&&(n=1),l===void 0&&(l={}),typeof l!="object"||l===null)throw new TypeError("options must be an object");if(!Number.isInteger(a)||a<=0)throw new RangeError("width must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new RangeError("height must be a positive integer");const{kind:u=RGBA}=l;if(typeof u!="string")throw new TypeError("kind must be a string");const s=getKind(u),p=Object.assign({},l);for(const pe in s)p[pe]===void 0&&(p[pe]=s[pe]);verifyKindDefinition(p);const{components:d,bitDepth:h,colorModel:N}=p,Be=p.alpha+0,b=a*n,E=d+Be,de=h===32?Number.MAX_VALUE:2**h-1;if(t===void 0)t=createPixelArray(b,d,Be,E,h,de);else{const pe=getTheoreticalPixelArraySize(b,E,h);if(t.length!==pe)throw new RangeError(`incorrect data size: ${t.length}. Should be ${pe}`)}this.width=a,this.height=n,this.data=t,this.size=b,this.components=d,this.alpha=Be,this.bitDepth=h,this.maxValue=de,this.colorModel=N,this.channels=E,this.meta=l.meta||{},Object.defineProperty(this,"parent",{enumerable:!1,writable:!0,configurable:!0,value:l.parent||null}),this.position=l.position||[0,0],this.computed=null,this.sizes=[this.width,this.height],this.multiplierX=this.channels,this.multiplierY=this.channels*this.width,this.isClamped=this.bitDepth<32,this.borderSizes=[0,0]}get[Symbol.toStringTag](){return"IJSImage"}static isImage(a){return objectToString.call(a)==="[object IJSImage]"}static fromCanvas(a){const t=a.getContext("2d").getImageData(0,0,a.width,a.height);return new zu(t.width,t.height,t.data)}static createFrom(a,n){const t=getImageParameters(a);return Object.assign(t,{parent:a,position:[0,0]},n),new zu(t)}getRoiManager(a){return new RoiManager(this,a)}clone(){const a=this.data.slice();return new zu(this.width,this.height,a,this)}apply(a){for(let n=0;n<this.height;n++)for(let t=0;t<this.width;t++){let l=(n*this.width+t)*this.channels;a.call(this,l)}}};setValueMethods(Image$1);setBitMethods(Image$1);setExportMethods(Image$1);Image$1.prototype.checkProcessable=checkProcessable;Image$1.prototype.getRGBAData=getRGBAData;Image$1.load=load$2;Image$1.extendMethod=extendMethod;Image$1.extendProperty=extendProperty;extend$2(Image$1);var workerTemplate={},hasRequiredWorkerTemplate;function requireWorkerTemplate(){if(hasRequiredWorkerTemplate)return workerTemplate;hasRequiredWorkerTemplate=1;var r=function(){self.window=self;function n(){this._listeners={}}n.prototype.on=function(l,u){if(this._listeners[l])throw new RangeError("there is already a listener for "+l);if(typeof u!="function")throw new TypeError("callback argument must be a function");this._listeners[l]=u},n.prototype._send=function(l,u,s){s===void 0?s=[]:Array.isArray(s)||(s=[s]),self.postMessage({id:l,data:u},s)},n.prototype._trigger=function(l,u){if(!this._listeners[l])throw new Error("event "+l+" is not defined");this._listeners[l].apply(null,u)};var t=new n;self.onmessage=function(l){switch(l.data.action){case"exec":l.data.args.unshift(function(u,s){t._send(l.data.id,u,s)}),t._trigger(l.data.event,l.data.args);break;case"ping":t._send(l.data.id,"pong");break;default:throw new Error("unexpected action: "+l.data.action)}}},a=r.toString().split('"CODE";');return workerTemplate.newWorkerURL=function(t,l){var u=new Blob(["(",a[0],"importScripts.apply(self, "+JSON.stringify(l)+`);
`,"(",t,")();",a[1],")();"],{type:"application/javascript"});return URL.createObjectURL(u)},workerTemplate}var src,hasRequiredSrc;function requireSrc(){if(hasRequiredSrc)return src;hasRequiredSrc=1;var r=requireWorkerTemplate(),a=navigator.hardwareConcurrency||1;function n(t,l){if(typeof t!="string"&&typeof t!="function")throw new TypeError("func argument must be a function");if(l===void 0&&(l={}),typeof l!="object"||l===null)throw new TypeError("options argument must be an object");this._workerCode=t.toString(),l.maxWorkers===void 0||l.maxWorkers==="auto"?this._numWorkers=Math.min(a-1,1):l.maxWorkers>0?this._numWorkers=Math.min(l.maxWorkers,a):this._numWorkers=a,this._workers=new Map,this._timeout=l.timeout||0,this._terminateOnError=!!l.terminateOnError;var u=l.deps;typeof u=="string"&&(u=[u]),Array.isArray(u)||(u=void 0),this._id=0,this._terminated=!1,this._working=0,this._waiting=[],this._init(u)}return n.prototype._init=function(t){for(var l=r.newWorkerURL(this._workerCode,t),u=0;u<this._numWorkers;u++){var s=new Worker(l);s.onmessage=this._onmessage.bind(this,s),s.onerror=this._onerror.bind(this,s),s.running=!1,s.id=u,this._workers.set(s,null)}URL.revokeObjectURL(l)},n.prototype._onerror=function(t,l){if(!this._terminated){this._working--,t.running=!1;var u=this._workers.get(t);u&&u[1](l.message),this._workers.set(t,null),this._terminateOnError?this.terminate():this._exec()}},n.prototype._onmessage=function(t,l){if(!this._terminated){this._working--,t.running=!1;var u=this._workers.get(t);u&&u[0](l.data.data),this._workers.set(t,null),this._exec()}},n.prototype._exec=function(){for(var t of this._workers.keys()){if(this._working===this._numWorkers||this._waiting.length===0)return;if(!t.running)for(var l=0;l<this._waiting.length;l++){var u=this._waiting[l];if(!(typeof u[4]=="number"&&u[4]!==t.id)){this._waiting.splice(l,1),t.postMessage({action:"exec",event:u[0],args:u[1]},u[2]),t.running=!0,t.time=Date.now(),this._workers.set(t,u[3]),this._working++;break}}}},n.prototype.terminate=function(){if(!this._terminated){for(var t of this._workers)t[0].terminate(),t[1]&&t[1][1](new Error("Terminated"));this._workers.clear(),this._waiting=[],this._working=0,this._terminated=!0}},n.prototype.postAll=function(t,l){if(this._terminated)throw new Error("Cannot post (terminated)");var u=[];for(var s of this._workers.keys())u.push(this.post(t,l,[],s.id));return Promise.all(u)},n.prototype.post=function(t,l,u,s){l===void 0&&(l=[]),u===void 0&&(u=[]),Array.isArray(l)||(l=[l]),Array.isArray(u)||(u=[u]);var p=this;return new Promise(function(d,h){if(p._terminated)throw new Error("Cannot post (terminated)");p._waiting.push([t,l,u,[d,h],s]),p._exec()})},src=n,src}var srcExports=requireSrc();const WorkerManager=getDefaultExportFromCjs(srcExports),defaultOptions={regression:{kernelType:"polynomial",kernelOptions:{degree:2,constant:1}},threshold:.02,roi:{minSurface:100,positive:!1},sampling:20,include:[]};function run(r,a,n){a=Object.assign({},defaultOptions,a);const t=this.manager;return Array.isArray(r)?Promise.all(r.map(function(l){const u=runOnce(t,l,a);return typeof n=="function"&&u.then(n),u})):runOnce(t,r,a)}function runOnce(r,a,n){return r.post("data",[a,n]).then(function(t){for(let l in t)t[l]=new Image$1(t[l]);return t})}function work(){worker.on("data",function(r,a,n){a=new IJS(a);const t={},l=[],u=a.grey(),s=u.sobelFilter();E("sobel",s);const p=s.level().mask({threshold:n.threshold});E("mask",p);const d=s.getRoiManager();d.fromMask(p);const h=d.getMask(n.roi);E("realMask",h);const N=u.getPixelsGrid({sampling:n.sampling,mask:h}),Be=a.getBackground(N.xyS,N.zS,n.regression);E("background",Be);const b=a.subtract(Be);t.result=b,l.push(b.data.buffer),r(t,l);function E(de,pe){n.include.includes(de)&&(t[de]=pe,l.push(pe.data.buffer))}})}const background={run,work};function extend$1(r){r.extendMethod("background",background)}let Worker$1=class Up{constructor(){this._url=null,this._deps=[null]}checkUrl(){if(this._url===null)throw new Error("image worker must be initialized with an URL")}get url(){return this._url}set url(a){if(typeof a!="string")throw new TypeError("worker URL must be a string");this._url=a,this._deps[0]=a}static extendMethod(a,n){let t,l,u={};function s(...p){return t||(this.checkUrl(),l=this.url,t=new WorkerManager(n.work,{deps:l}),u.manager=t),n.run.call(u,...p)}s.reset=function(){t&&(t.terminate(),t=new WorkerManager(n.work,{deps:l}),u.manager=t)},Up.prototype[a]=s}};extend$1(Worker$1);/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function isNothing(r){return typeof r>"u"||r===null}function isObject$1(r){return typeof r=="object"&&r!==null}function toArray(r){return Array.isArray(r)?r:isNothing(r)?[]:[r]}function extend(r,a){var n,t,l,u;if(a)for(u=Object.keys(a),n=0,t=u.length;n<t;n+=1)l=u[n],r[l]=a[l];return r}function repeat(r,a){var n="",t;for(t=0;t<a;t+=1)n+=r;return n}function isNegativeZero(r){return r===0&&Number.NEGATIVE_INFINITY===1/r}var isNothing_1=isNothing,isObject_1=isObject$1,toArray_1=toArray,repeat_1=repeat,isNegativeZero_1=isNegativeZero,extend_1=extend,common={isNothing:isNothing_1,isObject:isObject_1,toArray:toArray_1,repeat:repeat_1,isNegativeZero:isNegativeZero_1,extend:extend_1};function formatError(r,a){var n="",t=r.reason||"(unknown reason)";return r.mark?(r.mark.name&&(n+='in "'+r.mark.name+'" '),n+="("+(r.mark.line+1)+":"+(r.mark.column+1)+")",!a&&r.mark.snippet&&(n+=`

`+r.mark.snippet),t+" "+n):t}function YAMLException$1(r,a){Error.call(this),this.name="YAMLException",this.reason=r,this.mark=a,this.message=formatError(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}YAMLException$1.prototype=Object.create(Error.prototype);YAMLException$1.prototype.constructor=YAMLException$1;YAMLException$1.prototype.toString=function r(a){return this.name+": "+formatError(this,a)};var exception=YAMLException$1;function getLine(r,a,n,t,l){var u="",s="",p=Math.floor(l/2)-1;return t-a>p&&(u=" ... ",a=t-p+u.length),n-t>p&&(s=" ...",n=t+p-s.length),{str:u+r.slice(a,n).replace(/\t/g,"")+s,pos:t-a+u.length}}function padStart(r,a){return common.repeat(" ",a-r.length)+r}function makeSnippet(r,a){if(a=Object.create(a||null),!r.buffer)return null;a.maxLength||(a.maxLength=79),typeof a.indent!="number"&&(a.indent=1),typeof a.linesBefore!="number"&&(a.linesBefore=3),typeof a.linesAfter!="number"&&(a.linesAfter=2);for(var n=/\r?\n|\r|\0/g,t=[0],l=[],u,s=-1;u=n.exec(r.buffer);)l.push(u.index),t.push(u.index+u[0].length),r.position<=u.index&&s<0&&(s=t.length-2);s<0&&(s=t.length-1);var p="",d,h,N=Math.min(r.line+a.linesAfter,l.length).toString().length,Be=a.maxLength-(a.indent+N+3);for(d=1;d<=a.linesBefore&&!(s-d<0);d++)h=getLine(r.buffer,t[s-d],l[s-d],r.position-(t[s]-t[s-d]),Be),p=common.repeat(" ",a.indent)+padStart((r.line-d+1).toString(),N)+" | "+h.str+`
`+p;for(h=getLine(r.buffer,t[s],l[s],r.position,Be),p+=common.repeat(" ",a.indent)+padStart((r.line+1).toString(),N)+" | "+h.str+`
`,p+=common.repeat("-",a.indent+N+3+h.pos)+`^
`,d=1;d<=a.linesAfter&&!(s+d>=l.length);d++)h=getLine(r.buffer,t[s+d],l[s+d],r.position-(t[s]-t[s+d]),Be),p+=common.repeat(" ",a.indent)+padStart((r.line+d+1).toString(),N)+" | "+h.str+`
`;return p.replace(/\n$/,"")}var snippet=makeSnippet,TYPE_CONSTRUCTOR_OPTIONS=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],YAML_NODE_KINDS=["scalar","sequence","mapping"];function compileStyleAliases(r){var a={};return r!==null&&Object.keys(r).forEach(function(n){r[n].forEach(function(t){a[String(t)]=n})}),a}function Type$1(r,a){if(a=a||{},Object.keys(a).forEach(function(n){if(TYPE_CONSTRUCTOR_OPTIONS.indexOf(n)===-1)throw new exception('Unknown option "'+n+'" is met in definition of "'+r+'" YAML type.')}),this.options=a,this.tag=r,this.kind=a.kind||null,this.resolve=a.resolve||function(){return!0},this.construct=a.construct||function(n){return n},this.instanceOf=a.instanceOf||null,this.predicate=a.predicate||null,this.represent=a.represent||null,this.representName=a.representName||null,this.defaultStyle=a.defaultStyle||null,this.multi=a.multi||!1,this.styleAliases=compileStyleAliases(a.styleAliases||null),YAML_NODE_KINDS.indexOf(this.kind)===-1)throw new exception('Unknown kind "'+this.kind+'" is specified for "'+r+'" YAML type.')}var type=Type$1;function compileList(r,a){var n=[];return r[a].forEach(function(t){var l=n.length;n.forEach(function(u,s){u.tag===t.tag&&u.kind===t.kind&&u.multi===t.multi&&(l=s)}),n[l]=t}),n}function compileMap(){var r={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},a,n;function t(l){l.multi?(r.multi[l.kind].push(l),r.multi.fallback.push(l)):r[l.kind][l.tag]=r.fallback[l.tag]=l}for(a=0,n=arguments.length;a<n;a+=1)arguments[a].forEach(t);return r}function Schema$1(r){return this.extend(r)}Schema$1.prototype.extend=function r(a){var n=[],t=[];if(a instanceof type)t.push(a);else if(Array.isArray(a))t=t.concat(a);else if(a&&(Array.isArray(a.implicit)||Array.isArray(a.explicit)))a.implicit&&(n=n.concat(a.implicit)),a.explicit&&(t=t.concat(a.explicit));else throw new exception("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(u){if(!(u instanceof type))throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(u.loadKind&&u.loadKind!=="scalar")throw new exception("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(u.multi)throw new exception("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),t.forEach(function(u){if(!(u instanceof type))throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var l=Object.create(Schema$1.prototype);return l.implicit=(this.implicit||[]).concat(n),l.explicit=(this.explicit||[]).concat(t),l.compiledImplicit=compileList(l,"implicit"),l.compiledExplicit=compileList(l,"explicit"),l.compiledTypeMap=compileMap(l.compiledImplicit,l.compiledExplicit),l};var schema=Schema$1,str=new type("tag:yaml.org,2002:str",{kind:"scalar",construct:function(r){return r!==null?r:""}}),seq=new type("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(r){return r!==null?r:[]}}),map=new type("tag:yaml.org,2002:map",{kind:"mapping",construct:function(r){return r!==null?r:{}}}),failsafe=new schema({explicit:[str,seq,map]});function resolveYamlNull(r){if(r===null)return!0;var a=r.length;return a===1&&r==="~"||a===4&&(r==="null"||r==="Null"||r==="NULL")}function constructYamlNull(){return null}function isNull(r){return r===null}var _null=new type("tag:yaml.org,2002:null",{kind:"scalar",resolve:resolveYamlNull,construct:constructYamlNull,predicate:isNull,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function resolveYamlBoolean(r){if(r===null)return!1;var a=r.length;return a===4&&(r==="true"||r==="True"||r==="TRUE")||a===5&&(r==="false"||r==="False"||r==="FALSE")}function constructYamlBoolean(r){return r==="true"||r==="True"||r==="TRUE"}function isBoolean(r){return Object.prototype.toString.call(r)==="[object Boolean]"}var bool=new type("tag:yaml.org,2002:bool",{kind:"scalar",resolve:resolveYamlBoolean,construct:constructYamlBoolean,predicate:isBoolean,represent:{lowercase:function(r){return r?"true":"false"},uppercase:function(r){return r?"TRUE":"FALSE"},camelcase:function(r){return r?"True":"False"}},defaultStyle:"lowercase"});function isHexCode(r){return 48<=r&&r<=57||65<=r&&r<=70||97<=r&&r<=102}function isOctCode(r){return 48<=r&&r<=55}function isDecCode(r){return 48<=r&&r<=57}function resolveYamlInteger(r){if(r===null)return!1;var a=r.length,n=0,t=!1,l;if(!a)return!1;if(l=r[n],(l==="-"||l==="+")&&(l=r[++n]),l==="0"){if(n+1===a)return!0;if(l=r[++n],l==="b"){for(n++;n<a;n++)if(l=r[n],l!=="_"){if(l!=="0"&&l!=="1")return!1;t=!0}return t&&l!=="_"}if(l==="x"){for(n++;n<a;n++)if(l=r[n],l!=="_"){if(!isHexCode(r.charCodeAt(n)))return!1;t=!0}return t&&l!=="_"}if(l==="o"){for(n++;n<a;n++)if(l=r[n],l!=="_"){if(!isOctCode(r.charCodeAt(n)))return!1;t=!0}return t&&l!=="_"}}if(l==="_")return!1;for(;n<a;n++)if(l=r[n],l!=="_"){if(!isDecCode(r.charCodeAt(n)))return!1;t=!0}return!(!t||l==="_")}function constructYamlInteger(r){var a=r,n=1,t;if(a.indexOf("_")!==-1&&(a=a.replace(/_/g,"")),t=a[0],(t==="-"||t==="+")&&(t==="-"&&(n=-1),a=a.slice(1),t=a[0]),a==="0")return 0;if(t==="0"){if(a[1]==="b")return n*parseInt(a.slice(2),2);if(a[1]==="x")return n*parseInt(a.slice(2),16);if(a[1]==="o")return n*parseInt(a.slice(2),8)}return n*parseInt(a,10)}function isInteger(r){return Object.prototype.toString.call(r)==="[object Number]"&&r%1===0&&!common.isNegativeZero(r)}var int=new type("tag:yaml.org,2002:int",{kind:"scalar",resolve:resolveYamlInteger,construct:constructYamlInteger,predicate:isInteger,represent:{binary:function(r){return r>=0?"0b"+r.toString(2):"-0b"+r.toString(2).slice(1)},octal:function(r){return r>=0?"0o"+r.toString(8):"-0o"+r.toString(8).slice(1)},decimal:function(r){return r.toString(10)},hexadecimal:function(r){return r>=0?"0x"+r.toString(16).toUpperCase():"-0x"+r.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),YAML_FLOAT_PATTERN=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function resolveYamlFloat(r){return!(r===null||!YAML_FLOAT_PATTERN.test(r)||r[r.length-1]==="_")}function constructYamlFloat(r){var a,n;return a=r.replace(/_/g,"").toLowerCase(),n=a[0]==="-"?-1:1,"+-".indexOf(a[0])>=0&&(a=a.slice(1)),a===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:a===".nan"?NaN:n*parseFloat(a,10)}var SCIENTIFIC_WITHOUT_DOT=/^[-+]?[0-9]+e/;function representYamlFloat(r,a){var n;if(isNaN(r))switch(a){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===r)switch(a){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===r)switch(a){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(common.isNegativeZero(r))return"-0.0";return n=r.toString(10),SCIENTIFIC_WITHOUT_DOT.test(n)?n.replace("e",".e"):n}function isFloat(r){return Object.prototype.toString.call(r)==="[object Number]"&&(r%1!==0||common.isNegativeZero(r))}var float=new type("tag:yaml.org,2002:float",{kind:"scalar",resolve:resolveYamlFloat,construct:constructYamlFloat,predicate:isFloat,represent:representYamlFloat,defaultStyle:"lowercase"}),json=failsafe.extend({implicit:[_null,bool,int,float]}),core=json,YAML_DATE_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),YAML_TIMESTAMP_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function resolveYamlTimestamp(r){return r===null?!1:YAML_DATE_REGEXP.exec(r)!==null||YAML_TIMESTAMP_REGEXP.exec(r)!==null}function constructYamlTimestamp(r){var a,n,t,l,u,s,p,d=0,h=null,N,Be,b;if(a=YAML_DATE_REGEXP.exec(r),a===null&&(a=YAML_TIMESTAMP_REGEXP.exec(r)),a===null)throw new Error("Date resolve error");if(n=+a[1],t=+a[2]-1,l=+a[3],!a[4])return new Date(Date.UTC(n,t,l));if(u=+a[4],s=+a[5],p=+a[6],a[7]){for(d=a[7].slice(0,3);d.length<3;)d+="0";d=+d}return a[9]&&(N=+a[10],Be=+(a[11]||0),h=(N*60+Be)*6e4,a[9]==="-"&&(h=-h)),b=new Date(Date.UTC(n,t,l,u,s,p,d)),h&&b.setTime(b.getTime()-h),b}function representYamlTimestamp(r){return r.toISOString()}var timestamp=new type("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:resolveYamlTimestamp,construct:constructYamlTimestamp,instanceOf:Date,represent:representYamlTimestamp});function resolveYamlMerge(r){return r==="<<"||r===null}var merge=new type("tag:yaml.org,2002:merge",{kind:"scalar",resolve:resolveYamlMerge}),BASE64_MAP=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function resolveYamlBinary(r){if(r===null)return!1;var a,n,t=0,l=r.length,u=BASE64_MAP;for(n=0;n<l;n++)if(a=u.indexOf(r.charAt(n)),!(a>64)){if(a<0)return!1;t+=6}return t%8===0}function constructYamlBinary(r){var a,n,t=r.replace(/[\r\n=]/g,""),l=t.length,u=BASE64_MAP,s=0,p=[];for(a=0;a<l;a++)a%4===0&&a&&(p.push(s>>16&255),p.push(s>>8&255),p.push(s&255)),s=s<<6|u.indexOf(t.charAt(a));return n=l%4*6,n===0?(p.push(s>>16&255),p.push(s>>8&255),p.push(s&255)):n===18?(p.push(s>>10&255),p.push(s>>2&255)):n===12&&p.push(s>>4&255),new Uint8Array(p)}function representYamlBinary(r){var a="",n=0,t,l,u=r.length,s=BASE64_MAP;for(t=0;t<u;t++)t%3===0&&t&&(a+=s[n>>18&63],a+=s[n>>12&63],a+=s[n>>6&63],a+=s[n&63]),n=(n<<8)+r[t];return l=u%3,l===0?(a+=s[n>>18&63],a+=s[n>>12&63],a+=s[n>>6&63],a+=s[n&63]):l===2?(a+=s[n>>10&63],a+=s[n>>4&63],a+=s[n<<2&63],a+=s[64]):l===1&&(a+=s[n>>2&63],a+=s[n<<4&63],a+=s[64],a+=s[64]),a}function isBinary(r){return Object.prototype.toString.call(r)==="[object Uint8Array]"}var binary=new type("tag:yaml.org,2002:binary",{kind:"scalar",resolve:resolveYamlBinary,construct:constructYamlBinary,predicate:isBinary,represent:representYamlBinary}),_hasOwnProperty$3=Object.prototype.hasOwnProperty,_toString$2=Object.prototype.toString;function resolveYamlOmap(r){if(r===null)return!0;var a=[],n,t,l,u,s,p=r;for(n=0,t=p.length;n<t;n+=1){if(l=p[n],s=!1,_toString$2.call(l)!=="[object Object]")return!1;for(u in l)if(_hasOwnProperty$3.call(l,u))if(!s)s=!0;else return!1;if(!s)return!1;if(a.indexOf(u)===-1)a.push(u);else return!1}return!0}function constructYamlOmap(r){return r!==null?r:[]}var omap=new type("tag:yaml.org,2002:omap",{kind:"sequence",resolve:resolveYamlOmap,construct:constructYamlOmap}),_toString$1=Object.prototype.toString;function resolveYamlPairs(r){if(r===null)return!0;var a,n,t,l,u,s=r;for(u=new Array(s.length),a=0,n=s.length;a<n;a+=1){if(t=s[a],_toString$1.call(t)!=="[object Object]"||(l=Object.keys(t),l.length!==1))return!1;u[a]=[l[0],t[l[0]]]}return!0}function constructYamlPairs(r){if(r===null)return[];var a,n,t,l,u,s=r;for(u=new Array(s.length),a=0,n=s.length;a<n;a+=1)t=s[a],l=Object.keys(t),u[a]=[l[0],t[l[0]]];return u}var pairs=new type("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:resolveYamlPairs,construct:constructYamlPairs}),_hasOwnProperty$2=Object.prototype.hasOwnProperty;function resolveYamlSet(r){if(r===null)return!0;var a,n=r;for(a in n)if(_hasOwnProperty$2.call(n,a)&&n[a]!==null)return!1;return!0}function constructYamlSet(r){return r!==null?r:{}}var set=new type("tag:yaml.org,2002:set",{kind:"mapping",resolve:resolveYamlSet,construct:constructYamlSet}),_default=core.extend({implicit:[timestamp,merge],explicit:[binary,omap,pairs,set]}),_hasOwnProperty$1=Object.prototype.hasOwnProperty,CONTEXT_FLOW_IN=1,CONTEXT_FLOW_OUT=2,CONTEXT_BLOCK_IN=3,CONTEXT_BLOCK_OUT=4,CHOMPING_CLIP=1,CHOMPING_STRIP=2,CHOMPING_KEEP=3,PATTERN_NON_PRINTABLE=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,PATTERN_NON_ASCII_LINE_BREAKS=/[\x85\u2028\u2029]/,PATTERN_FLOW_INDICATORS=/[,\[\]\{\}]/,PATTERN_TAG_HANDLE=/^(?:!|!!|![a-z\-]+!)$/i,PATTERN_TAG_URI=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function _class(r){return Object.prototype.toString.call(r)}function is_EOL(r){return r===10||r===13}function is_WHITE_SPACE(r){return r===9||r===32}function is_WS_OR_EOL(r){return r===9||r===32||r===10||r===13}function is_FLOW_INDICATOR(r){return r===44||r===91||r===93||r===123||r===125}function fromHexCode(r){var a;return 48<=r&&r<=57?r-48:(a=r|32,97<=a&&a<=102?a-97+10:-1)}function escapedHexLen(r){return r===120?2:r===117?4:r===85?8:0}function fromDecimalCode(r){return 48<=r&&r<=57?r-48:-1}function simpleEscapeSequence(r){return r===48?"\0":r===97?"\x07":r===98?"\b":r===116||r===9?"	":r===110?`
`:r===118?"\v":r===102?"\f":r===114?"\r":r===101?"\x1B":r===32?" ":r===34?'"':r===47?"/":r===92?"\\":r===78?"":r===95?"":r===76?"\u2028":r===80?"\u2029":""}function charFromCodepoint(r){return r<=65535?String.fromCharCode(r):String.fromCharCode((r-65536>>10)+55296,(r-65536&1023)+56320)}var simpleEscapeCheck=new Array(256),simpleEscapeMap=new Array(256);for(var i=0;i<256;i++)simpleEscapeCheck[i]=simpleEscapeSequence(i)?1:0,simpleEscapeMap[i]=simpleEscapeSequence(i);function State$1(r,a){this.input=r,this.filename=a.filename||null,this.schema=a.schema||_default,this.onWarning=a.onWarning||null,this.legacy=a.legacy||!1,this.json=a.json||!1,this.listener=a.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=r.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function generateError(r,a){var n={name:r.filename,buffer:r.input.slice(0,-1),position:r.position,line:r.line,column:r.position-r.lineStart};return n.snippet=snippet(n),new exception(a,n)}function throwError(r,a){throw generateError(r,a)}function throwWarning(r,a){r.onWarning&&r.onWarning.call(null,generateError(r,a))}var directiveHandlers={YAML:function r(a,n,t){var l,u,s;a.version!==null&&throwError(a,"duplication of %YAML directive"),t.length!==1&&throwError(a,"YAML directive accepts exactly one argument"),l=/^([0-9]+)\.([0-9]+)$/.exec(t[0]),l===null&&throwError(a,"ill-formed argument of the YAML directive"),u=parseInt(l[1],10),s=parseInt(l[2],10),u!==1&&throwError(a,"unacceptable YAML version of the document"),a.version=t[0],a.checkLineBreaks=s<2,s!==1&&s!==2&&throwWarning(a,"unsupported YAML version of the document")},TAG:function r(a,n,t){var l,u;t.length!==2&&throwError(a,"TAG directive accepts exactly two arguments"),l=t[0],u=t[1],PATTERN_TAG_HANDLE.test(l)||throwError(a,"ill-formed tag handle (first argument) of the TAG directive"),_hasOwnProperty$1.call(a.tagMap,l)&&throwError(a,'there is a previously declared suffix for "'+l+'" tag handle'),PATTERN_TAG_URI.test(u)||throwError(a,"ill-formed tag prefix (second argument) of the TAG directive");try{u=decodeURIComponent(u)}catch{throwError(a,"tag prefix is malformed: "+u)}a.tagMap[l]=u}};function captureSegment(r,a,n,t){var l,u,s,p;if(a<n){if(p=r.input.slice(a,n),t)for(l=0,u=p.length;l<u;l+=1)s=p.charCodeAt(l),s===9||32<=s&&s<=1114111||throwError(r,"expected valid JSON character");else PATTERN_NON_PRINTABLE.test(p)&&throwError(r,"the stream contains non-printable characters");r.result+=p}}function mergeMappings(r,a,n,t){var l,u,s,p;for(common.isObject(n)||throwError(r,"cannot merge mappings; the provided source object is unacceptable"),l=Object.keys(n),s=0,p=l.length;s<p;s+=1)u=l[s],_hasOwnProperty$1.call(a,u)||(a[u]=n[u],t[u]=!0)}function storeMappingPair(r,a,n,t,l,u,s,p,d){var h,N;if(Array.isArray(l))for(l=Array.prototype.slice.call(l),h=0,N=l.length;h<N;h+=1)Array.isArray(l[h])&&throwError(r,"nested arrays are not supported inside keys"),typeof l=="object"&&_class(l[h])==="[object Object]"&&(l[h]="[object Object]");if(typeof l=="object"&&_class(l)==="[object Object]"&&(l="[object Object]"),l=String(l),a===null&&(a={}),t==="tag:yaml.org,2002:merge")if(Array.isArray(u))for(h=0,N=u.length;h<N;h+=1)mergeMappings(r,a,u[h],n);else mergeMappings(r,a,u,n);else!r.json&&!_hasOwnProperty$1.call(n,l)&&_hasOwnProperty$1.call(a,l)&&(r.line=s||r.line,r.lineStart=p||r.lineStart,r.position=d||r.position,throwError(r,"duplicated mapping key")),l==="__proto__"?Object.defineProperty(a,l,{configurable:!0,enumerable:!0,writable:!0,value:u}):a[l]=u,delete n[l];return a}function readLineBreak(r){var a;a=r.input.charCodeAt(r.position),a===10?r.position++:a===13?(r.position++,r.input.charCodeAt(r.position)===10&&r.position++):throwError(r,"a line break is expected"),r.line+=1,r.lineStart=r.position,r.firstTabInLine=-1}function skipSeparationSpace(r,a,n){for(var t=0,l=r.input.charCodeAt(r.position);l!==0;){for(;is_WHITE_SPACE(l);)l===9&&r.firstTabInLine===-1&&(r.firstTabInLine=r.position),l=r.input.charCodeAt(++r.position);if(a&&l===35)do l=r.input.charCodeAt(++r.position);while(l!==10&&l!==13&&l!==0);if(is_EOL(l))for(readLineBreak(r),l=r.input.charCodeAt(r.position),t++,r.lineIndent=0;l===32;)r.lineIndent++,l=r.input.charCodeAt(++r.position);else break}return n!==-1&&t!==0&&r.lineIndent<n&&throwWarning(r,"deficient indentation"),t}function testDocumentSeparator(r){var a=r.position,n;return n=r.input.charCodeAt(a),!!((n===45||n===46)&&n===r.input.charCodeAt(a+1)&&n===r.input.charCodeAt(a+2)&&(a+=3,n=r.input.charCodeAt(a),n===0||is_WS_OR_EOL(n)))}function writeFoldedLines(r,a){a===1?r.result+=" ":a>1&&(r.result+=common.repeat(`
`,a-1))}function readPlainScalar(r,a,n){var t,l,u,s,p,d,h,N,Be=r.kind,b=r.result,E;if(E=r.input.charCodeAt(r.position),is_WS_OR_EOL(E)||is_FLOW_INDICATOR(E)||E===35||E===38||E===42||E===33||E===124||E===62||E===39||E===34||E===37||E===64||E===96||(E===63||E===45)&&(l=r.input.charCodeAt(r.position+1),is_WS_OR_EOL(l)||n&&is_FLOW_INDICATOR(l)))return!1;for(r.kind="scalar",r.result="",u=s=r.position,p=!1;E!==0;){if(E===58){if(l=r.input.charCodeAt(r.position+1),is_WS_OR_EOL(l)||n&&is_FLOW_INDICATOR(l))break}else if(E===35){if(t=r.input.charCodeAt(r.position-1),is_WS_OR_EOL(t))break}else{if(r.position===r.lineStart&&testDocumentSeparator(r)||n&&is_FLOW_INDICATOR(E))break;if(is_EOL(E))if(d=r.line,h=r.lineStart,N=r.lineIndent,skipSeparationSpace(r,!1,-1),r.lineIndent>=a){p=!0,E=r.input.charCodeAt(r.position);continue}else{r.position=s,r.line=d,r.lineStart=h,r.lineIndent=N;break}}p&&(captureSegment(r,u,s,!1),writeFoldedLines(r,r.line-d),u=s=r.position,p=!1),is_WHITE_SPACE(E)||(s=r.position+1),E=r.input.charCodeAt(++r.position)}return captureSegment(r,u,s,!1),r.result?!0:(r.kind=Be,r.result=b,!1)}function readSingleQuotedScalar(r,a){var n,t,l;if(n=r.input.charCodeAt(r.position),n!==39)return!1;for(r.kind="scalar",r.result="",r.position++,t=l=r.position;(n=r.input.charCodeAt(r.position))!==0;)if(n===39)if(captureSegment(r,t,r.position,!0),n=r.input.charCodeAt(++r.position),n===39)t=r.position,r.position++,l=r.position;else return!0;else is_EOL(n)?(captureSegment(r,t,l,!0),writeFoldedLines(r,skipSeparationSpace(r,!1,a)),t=l=r.position):r.position===r.lineStart&&testDocumentSeparator(r)?throwError(r,"unexpected end of the document within a single quoted scalar"):(r.position++,l=r.position);throwError(r,"unexpected end of the stream within a single quoted scalar")}function readDoubleQuotedScalar(r,a){var n,t,l,u,s,p;if(p=r.input.charCodeAt(r.position),p!==34)return!1;for(r.kind="scalar",r.result="",r.position++,n=t=r.position;(p=r.input.charCodeAt(r.position))!==0;){if(p===34)return captureSegment(r,n,r.position,!0),r.position++,!0;if(p===92){if(captureSegment(r,n,r.position,!0),p=r.input.charCodeAt(++r.position),is_EOL(p))skipSeparationSpace(r,!1,a);else if(p<256&&simpleEscapeCheck[p])r.result+=simpleEscapeMap[p],r.position++;else if((s=escapedHexLen(p))>0){for(l=s,u=0;l>0;l--)p=r.input.charCodeAt(++r.position),(s=fromHexCode(p))>=0?u=(u<<4)+s:throwError(r,"expected hexadecimal character");r.result+=charFromCodepoint(u),r.position++}else throwError(r,"unknown escape sequence");n=t=r.position}else is_EOL(p)?(captureSegment(r,n,t,!0),writeFoldedLines(r,skipSeparationSpace(r,!1,a)),n=t=r.position):r.position===r.lineStart&&testDocumentSeparator(r)?throwError(r,"unexpected end of the document within a double quoted scalar"):(r.position++,t=r.position)}throwError(r,"unexpected end of the stream within a double quoted scalar")}function readFlowCollection(r,a){var n=!0,t,l,u,s=r.tag,p,d=r.anchor,h,N,Be,b,E,de=Object.create(null),pe,Ye,me,Le;if(Le=r.input.charCodeAt(r.position),Le===91)N=93,E=!1,p=[];else if(Le===123)N=125,E=!0,p={};else return!1;for(r.anchor!==null&&(r.anchorMap[r.anchor]=p),Le=r.input.charCodeAt(++r.position);Le!==0;){if(skipSeparationSpace(r,!0,a),Le=r.input.charCodeAt(r.position),Le===N)return r.position++,r.tag=s,r.anchor=d,r.kind=E?"mapping":"sequence",r.result=p,!0;n?Le===44&&throwError(r,"expected the node content, but found ','"):throwError(r,"missed comma between flow collection entries"),Ye=pe=me=null,Be=b=!1,Le===63&&(h=r.input.charCodeAt(r.position+1),is_WS_OR_EOL(h)&&(Be=b=!0,r.position++,skipSeparationSpace(r,!0,a))),t=r.line,l=r.lineStart,u=r.position,composeNode(r,a,CONTEXT_FLOW_IN,!1,!0),Ye=r.tag,pe=r.result,skipSeparationSpace(r,!0,a),Le=r.input.charCodeAt(r.position),(b||r.line===t)&&Le===58&&(Be=!0,Le=r.input.charCodeAt(++r.position),skipSeparationSpace(r,!0,a),composeNode(r,a,CONTEXT_FLOW_IN,!1,!0),me=r.result),E?storeMappingPair(r,p,de,Ye,pe,me,t,l,u):Be?p.push(storeMappingPair(r,null,de,Ye,pe,me,t,l,u)):p.push(pe),skipSeparationSpace(r,!0,a),Le=r.input.charCodeAt(r.position),Le===44?(n=!0,Le=r.input.charCodeAt(++r.position)):n=!1}throwError(r,"unexpected end of the stream within a flow collection")}function readBlockScalar(r,a){var n,t,l=CHOMPING_CLIP,u=!1,s=!1,p=a,d=0,h=!1,N,Be;if(Be=r.input.charCodeAt(r.position),Be===124)t=!1;else if(Be===62)t=!0;else return!1;for(r.kind="scalar",r.result="";Be!==0;)if(Be=r.input.charCodeAt(++r.position),Be===43||Be===45)CHOMPING_CLIP===l?l=Be===43?CHOMPING_KEEP:CHOMPING_STRIP:throwError(r,"repeat of a chomping mode identifier");else if((N=fromDecimalCode(Be))>=0)N===0?throwError(r,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?throwError(r,"repeat of an indentation width identifier"):(p=a+N-1,s=!0);else break;if(is_WHITE_SPACE(Be)){do Be=r.input.charCodeAt(++r.position);while(is_WHITE_SPACE(Be));if(Be===35)do Be=r.input.charCodeAt(++r.position);while(!is_EOL(Be)&&Be!==0)}for(;Be!==0;){for(readLineBreak(r),r.lineIndent=0,Be=r.input.charCodeAt(r.position);(!s||r.lineIndent<p)&&Be===32;)r.lineIndent++,Be=r.input.charCodeAt(++r.position);if(!s&&r.lineIndent>p&&(p=r.lineIndent),is_EOL(Be)){d++;continue}if(r.lineIndent<p){l===CHOMPING_KEEP?r.result+=common.repeat(`
`,u?1+d:d):l===CHOMPING_CLIP&&u&&(r.result+=`
`);break}for(t?is_WHITE_SPACE(Be)?(h=!0,r.result+=common.repeat(`
`,u?1+d:d)):h?(h=!1,r.result+=common.repeat(`
`,d+1)):d===0?u&&(r.result+=" "):r.result+=common.repeat(`
`,d):r.result+=common.repeat(`
`,u?1+d:d),u=!0,s=!0,d=0,n=r.position;!is_EOL(Be)&&Be!==0;)Be=r.input.charCodeAt(++r.position);captureSegment(r,n,r.position,!1)}return!0}function readBlockSequence(r,a){var n,t=r.tag,l=r.anchor,u=[],s,p=!1,d;if(r.firstTabInLine!==-1)return!1;for(r.anchor!==null&&(r.anchorMap[r.anchor]=u),d=r.input.charCodeAt(r.position);d!==0&&(r.firstTabInLine!==-1&&(r.position=r.firstTabInLine,throwError(r,"tab characters must not be used in indentation")),!(d!==45||(s=r.input.charCodeAt(r.position+1),!is_WS_OR_EOL(s))));){if(p=!0,r.position++,skipSeparationSpace(r,!0,-1)&&r.lineIndent<=a){u.push(null),d=r.input.charCodeAt(r.position);continue}if(n=r.line,composeNode(r,a,CONTEXT_BLOCK_IN,!1,!0),u.push(r.result),skipSeparationSpace(r,!0,-1),d=r.input.charCodeAt(r.position),(r.line===n||r.lineIndent>a)&&d!==0)throwError(r,"bad indentation of a sequence entry");else if(r.lineIndent<a)break}return p?(r.tag=t,r.anchor=l,r.kind="sequence",r.result=u,!0):!1}function readBlockMapping(r,a,n){var t,l,u,s,p,d,h=r.tag,N=r.anchor,Be={},b=Object.create(null),E=null,de=null,pe=null,Ye=!1,me=!1,Le;if(r.firstTabInLine!==-1)return!1;for(r.anchor!==null&&(r.anchorMap[r.anchor]=Be),Le=r.input.charCodeAt(r.position);Le!==0;){if(!Ye&&r.firstTabInLine!==-1&&(r.position=r.firstTabInLine,throwError(r,"tab characters must not be used in indentation")),t=r.input.charCodeAt(r.position+1),u=r.line,(Le===63||Le===58)&&is_WS_OR_EOL(t))Le===63?(Ye&&(storeMappingPair(r,Be,b,E,de,null,s,p,d),E=de=pe=null),me=!0,Ye=!0,l=!0):Ye?(Ye=!1,l=!0):throwError(r,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),r.position+=1,Le=t;else{if(s=r.line,p=r.lineStart,d=r.position,!composeNode(r,n,CONTEXT_FLOW_OUT,!1,!0))break;if(r.line===u){for(Le=r.input.charCodeAt(r.position);is_WHITE_SPACE(Le);)Le=r.input.charCodeAt(++r.position);if(Le===58)Le=r.input.charCodeAt(++r.position),is_WS_OR_EOL(Le)||throwError(r,"a whitespace character is expected after the key-value separator within a block mapping"),Ye&&(storeMappingPair(r,Be,b,E,de,null,s,p,d),E=de=pe=null),me=!0,Ye=!1,l=!1,E=r.tag,de=r.result;else if(me)throwError(r,"can not read an implicit mapping pair; a colon is missed");else return r.tag=h,r.anchor=N,!0}else if(me)throwError(r,"can not read a block mapping entry; a multiline key may not be an implicit key");else return r.tag=h,r.anchor=N,!0}if((r.line===u||r.lineIndent>a)&&(Ye&&(s=r.line,p=r.lineStart,d=r.position),composeNode(r,a,CONTEXT_BLOCK_OUT,!0,l)&&(Ye?de=r.result:pe=r.result),Ye||(storeMappingPair(r,Be,b,E,de,pe,s,p,d),E=de=pe=null),skipSeparationSpace(r,!0,-1),Le=r.input.charCodeAt(r.position)),(r.line===u||r.lineIndent>a)&&Le!==0)throwError(r,"bad indentation of a mapping entry");else if(r.lineIndent<a)break}return Ye&&storeMappingPair(r,Be,b,E,de,null,s,p,d),me&&(r.tag=h,r.anchor=N,r.kind="mapping",r.result=Be),me}function readTagProperty(r){var a,n=!1,t=!1,l,u,s;if(s=r.input.charCodeAt(r.position),s!==33)return!1;if(r.tag!==null&&throwError(r,"duplication of a tag property"),s=r.input.charCodeAt(++r.position),s===60?(n=!0,s=r.input.charCodeAt(++r.position)):s===33?(t=!0,l="!!",s=r.input.charCodeAt(++r.position)):l="!",a=r.position,n){do s=r.input.charCodeAt(++r.position);while(s!==0&&s!==62);r.position<r.length?(u=r.input.slice(a,r.position),s=r.input.charCodeAt(++r.position)):throwError(r,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!is_WS_OR_EOL(s);)s===33&&(t?throwError(r,"tag suffix cannot contain exclamation marks"):(l=r.input.slice(a-1,r.position+1),PATTERN_TAG_HANDLE.test(l)||throwError(r,"named tag handle cannot contain such characters"),t=!0,a=r.position+1)),s=r.input.charCodeAt(++r.position);u=r.input.slice(a,r.position),PATTERN_FLOW_INDICATORS.test(u)&&throwError(r,"tag suffix cannot contain flow indicator characters")}u&&!PATTERN_TAG_URI.test(u)&&throwError(r,"tag name cannot contain such characters: "+u);try{u=decodeURIComponent(u)}catch{throwError(r,"tag name is malformed: "+u)}return n?r.tag=u:_hasOwnProperty$1.call(r.tagMap,l)?r.tag=r.tagMap[l]+u:l==="!"?r.tag="!"+u:l==="!!"?r.tag="tag:yaml.org,2002:"+u:throwError(r,'undeclared tag handle "'+l+'"'),!0}function readAnchorProperty(r){var a,n;if(n=r.input.charCodeAt(r.position),n!==38)return!1;for(r.anchor!==null&&throwError(r,"duplication of an anchor property"),n=r.input.charCodeAt(++r.position),a=r.position;n!==0&&!is_WS_OR_EOL(n)&&!is_FLOW_INDICATOR(n);)n=r.input.charCodeAt(++r.position);return r.position===a&&throwError(r,"name of an anchor node must contain at least one character"),r.anchor=r.input.slice(a,r.position),!0}function readAlias(r){var a,n,t;if(t=r.input.charCodeAt(r.position),t!==42)return!1;for(t=r.input.charCodeAt(++r.position),a=r.position;t!==0&&!is_WS_OR_EOL(t)&&!is_FLOW_INDICATOR(t);)t=r.input.charCodeAt(++r.position);return r.position===a&&throwError(r,"name of an alias node must contain at least one character"),n=r.input.slice(a,r.position),_hasOwnProperty$1.call(r.anchorMap,n)||throwError(r,'unidentified alias "'+n+'"'),r.result=r.anchorMap[n],skipSeparationSpace(r,!0,-1),!0}function composeNode(r,a,n,t,l){var u,s,p,d=1,h=!1,N=!1,Be,b,E,de,pe,Ye;if(r.listener!==null&&r.listener("open",r),r.tag=null,r.anchor=null,r.kind=null,r.result=null,u=s=p=CONTEXT_BLOCK_OUT===n||CONTEXT_BLOCK_IN===n,t&&skipSeparationSpace(r,!0,-1)&&(h=!0,r.lineIndent>a?d=1:r.lineIndent===a?d=0:r.lineIndent<a&&(d=-1)),d===1)for(;readTagProperty(r)||readAnchorProperty(r);)skipSeparationSpace(r,!0,-1)?(h=!0,p=u,r.lineIndent>a?d=1:r.lineIndent===a?d=0:r.lineIndent<a&&(d=-1)):p=!1;if(p&&(p=h||l),(d===1||CONTEXT_BLOCK_OUT===n)&&(CONTEXT_FLOW_IN===n||CONTEXT_FLOW_OUT===n?pe=a:pe=a+1,Ye=r.position-r.lineStart,d===1?p&&(readBlockSequence(r,Ye)||readBlockMapping(r,Ye,pe))||readFlowCollection(r,pe)?N=!0:(s&&readBlockScalar(r,pe)||readSingleQuotedScalar(r,pe)||readDoubleQuotedScalar(r,pe)?N=!0:readAlias(r)?(N=!0,(r.tag!==null||r.anchor!==null)&&throwError(r,"alias node should not have any properties")):readPlainScalar(r,pe,CONTEXT_FLOW_IN===n)&&(N=!0,r.tag===null&&(r.tag="?")),r.anchor!==null&&(r.anchorMap[r.anchor]=r.result)):d===0&&(N=p&&readBlockSequence(r,Ye))),r.tag===null)r.anchor!==null&&(r.anchorMap[r.anchor]=r.result);else if(r.tag==="?"){for(r.result!==null&&r.kind!=="scalar"&&throwError(r,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+r.kind+'"'),Be=0,b=r.implicitTypes.length;Be<b;Be+=1)if(de=r.implicitTypes[Be],de.resolve(r.result)){r.result=de.construct(r.result),r.tag=de.tag,r.anchor!==null&&(r.anchorMap[r.anchor]=r.result);break}}else if(r.tag!=="!"){if(_hasOwnProperty$1.call(r.typeMap[r.kind||"fallback"],r.tag))de=r.typeMap[r.kind||"fallback"][r.tag];else for(de=null,E=r.typeMap.multi[r.kind||"fallback"],Be=0,b=E.length;Be<b;Be+=1)if(r.tag.slice(0,E[Be].tag.length)===E[Be].tag){de=E[Be];break}de||throwError(r,"unknown tag !<"+r.tag+">"),r.result!==null&&de.kind!==r.kind&&throwError(r,"unacceptable node kind for !<"+r.tag+'> tag; it should be "'+de.kind+'", not "'+r.kind+'"'),de.resolve(r.result,r.tag)?(r.result=de.construct(r.result,r.tag),r.anchor!==null&&(r.anchorMap[r.anchor]=r.result)):throwError(r,"cannot resolve a node with !<"+r.tag+"> explicit tag")}return r.listener!==null&&r.listener("close",r),r.tag!==null||r.anchor!==null||N}function readDocument(r){var a=r.position,n,t,l,u=!1,s;for(r.version=null,r.checkLineBreaks=r.legacy,r.tagMap=Object.create(null),r.anchorMap=Object.create(null);(s=r.input.charCodeAt(r.position))!==0&&(skipSeparationSpace(r,!0,-1),s=r.input.charCodeAt(r.position),!(r.lineIndent>0||s!==37));){for(u=!0,s=r.input.charCodeAt(++r.position),n=r.position;s!==0&&!is_WS_OR_EOL(s);)s=r.input.charCodeAt(++r.position);for(t=r.input.slice(n,r.position),l=[],t.length<1&&throwError(r,"directive name must not be less than one character in length");s!==0;){for(;is_WHITE_SPACE(s);)s=r.input.charCodeAt(++r.position);if(s===35){do s=r.input.charCodeAt(++r.position);while(s!==0&&!is_EOL(s));break}if(is_EOL(s))break;for(n=r.position;s!==0&&!is_WS_OR_EOL(s);)s=r.input.charCodeAt(++r.position);l.push(r.input.slice(n,r.position))}s!==0&&readLineBreak(r),_hasOwnProperty$1.call(directiveHandlers,t)?directiveHandlers[t](r,t,l):throwWarning(r,'unknown document directive "'+t+'"')}if(skipSeparationSpace(r,!0,-1),r.lineIndent===0&&r.input.charCodeAt(r.position)===45&&r.input.charCodeAt(r.position+1)===45&&r.input.charCodeAt(r.position+2)===45?(r.position+=3,skipSeparationSpace(r,!0,-1)):u&&throwError(r,"directives end mark is expected"),composeNode(r,r.lineIndent-1,CONTEXT_BLOCK_OUT,!1,!0),skipSeparationSpace(r,!0,-1),r.checkLineBreaks&&PATTERN_NON_ASCII_LINE_BREAKS.test(r.input.slice(a,r.position))&&throwWarning(r,"non-ASCII line breaks are interpreted as content"),r.documents.push(r.result),r.position===r.lineStart&&testDocumentSeparator(r)){r.input.charCodeAt(r.position)===46&&(r.position+=3,skipSeparationSpace(r,!0,-1));return}if(r.position<r.length-1)throwError(r,"end of the stream or a document separator is expected");else return}function loadDocuments(r,a){r=String(r),a=a||{},r.length!==0&&(r.charCodeAt(r.length-1)!==10&&r.charCodeAt(r.length-1)!==13&&(r+=`
`),r.charCodeAt(0)===65279&&(r=r.slice(1)));var n=new State$1(r,a),t=r.indexOf("\0");for(t!==-1&&(n.position=t,throwError(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)readDocument(n);return n.documents}function loadAll$1(r,a,n){a!==null&&typeof a=="object"&&typeof n>"u"&&(n=a,a=null);var t=loadDocuments(r,n);if(typeof a!="function")return t;for(var l=0,u=t.length;l<u;l+=1)a(t[l])}function load$1(r,a){var n=loadDocuments(r,a);if(n.length!==0){if(n.length===1)return n[0];throw new exception("expected a single document in the stream, but found more")}}var loadAll_1=loadAll$1,load_1=load$1,loader={loadAll:loadAll_1,load:load_1},_toString=Object.prototype.toString,_hasOwnProperty=Object.prototype.hasOwnProperty,CHAR_BOM=65279,CHAR_TAB=9,CHAR_LINE_FEED=10,CHAR_CARRIAGE_RETURN=13,CHAR_SPACE=32,CHAR_EXCLAMATION=33,CHAR_DOUBLE_QUOTE=34,CHAR_SHARP=35,CHAR_PERCENT=37,CHAR_AMPERSAND=38,CHAR_SINGLE_QUOTE=39,CHAR_ASTERISK=42,CHAR_COMMA=44,CHAR_MINUS=45,CHAR_COLON=58,CHAR_EQUALS=61,CHAR_GREATER_THAN=62,CHAR_QUESTION=63,CHAR_COMMERCIAL_AT=64,CHAR_LEFT_SQUARE_BRACKET=91,CHAR_RIGHT_SQUARE_BRACKET=93,CHAR_GRAVE_ACCENT=96,CHAR_LEFT_CURLY_BRACKET=123,CHAR_VERTICAL_LINE=124,CHAR_RIGHT_CURLY_BRACKET=125,ESCAPE_SEQUENCES={};ESCAPE_SEQUENCES[0]="\\0";ESCAPE_SEQUENCES[7]="\\a";ESCAPE_SEQUENCES[8]="\\b";ESCAPE_SEQUENCES[9]="\\t";ESCAPE_SEQUENCES[10]="\\n";ESCAPE_SEQUENCES[11]="\\v";ESCAPE_SEQUENCES[12]="\\f";ESCAPE_SEQUENCES[13]="\\r";ESCAPE_SEQUENCES[27]="\\e";ESCAPE_SEQUENCES[34]='\\"';ESCAPE_SEQUENCES[92]="\\\\";ESCAPE_SEQUENCES[133]="\\N";ESCAPE_SEQUENCES[160]="\\_";ESCAPE_SEQUENCES[8232]="\\L";ESCAPE_SEQUENCES[8233]="\\P";var DEPRECATED_BOOLEANS_SYNTAX=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],DEPRECATED_BASE60_SYNTAX=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function compileStyleMap(r,a){var n,t,l,u,s,p,d;if(a===null)return{};for(n={},t=Object.keys(a),l=0,u=t.length;l<u;l+=1)s=t[l],p=String(a[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),d=r.compiledTypeMap.fallback[s],d&&_hasOwnProperty.call(d.styleAliases,p)&&(p=d.styleAliases[p]),n[s]=p;return n}function encodeHex(r){var a,n,t;if(a=r.toString(16).toUpperCase(),r<=255)n="x",t=2;else if(r<=65535)n="u",t=4;else if(r<=4294967295)n="U",t=8;else throw new exception("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+common.repeat("0",t-a.length)+a}var QUOTING_TYPE_SINGLE=1,QUOTING_TYPE_DOUBLE=2;function State(r){this.schema=r.schema||_default,this.indent=Math.max(1,r.indent||2),this.noArrayIndent=r.noArrayIndent||!1,this.skipInvalid=r.skipInvalid||!1,this.flowLevel=common.isNothing(r.flowLevel)?-1:r.flowLevel,this.styleMap=compileStyleMap(this.schema,r.styles||null),this.sortKeys=r.sortKeys||!1,this.lineWidth=r.lineWidth||80,this.noRefs=r.noRefs||!1,this.noCompatMode=r.noCompatMode||!1,this.condenseFlow=r.condenseFlow||!1,this.quotingType=r.quotingType==='"'?QUOTING_TYPE_DOUBLE:QUOTING_TYPE_SINGLE,this.forceQuotes=r.forceQuotes||!1,this.replacer=typeof r.replacer=="function"?r.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function indentString(r,a){for(var n=common.repeat(" ",a),t=0,l=-1,u="",s,p=r.length;t<p;)l=r.indexOf(`
`,t),l===-1?(s=r.slice(t),t=p):(s=r.slice(t,l+1),t=l+1),s.length&&s!==`
`&&(u+=n),u+=s;return u}function generateNextLine(r,a){return`
`+common.repeat(" ",r.indent*a)}function testImplicitResolving(r,a){var n,t,l;for(n=0,t=r.implicitTypes.length;n<t;n+=1)if(l=r.implicitTypes[n],l.resolve(a))return!0;return!1}function isWhitespace(r){return r===CHAR_SPACE||r===CHAR_TAB}function isPrintable(r){return 32<=r&&r<=126||161<=r&&r<=55295&&r!==8232&&r!==8233||57344<=r&&r<=65533&&r!==CHAR_BOM||65536<=r&&r<=1114111}function isNsCharOrWhitespace(r){return isPrintable(r)&&r!==CHAR_BOM&&r!==CHAR_CARRIAGE_RETURN&&r!==CHAR_LINE_FEED}function isPlainSafe(r,a,n){var t=isNsCharOrWhitespace(r),l=t&&!isWhitespace(r);return(n?t:t&&r!==CHAR_COMMA&&r!==CHAR_LEFT_SQUARE_BRACKET&&r!==CHAR_RIGHT_SQUARE_BRACKET&&r!==CHAR_LEFT_CURLY_BRACKET&&r!==CHAR_RIGHT_CURLY_BRACKET)&&r!==CHAR_SHARP&&!(a===CHAR_COLON&&!l)||isNsCharOrWhitespace(a)&&!isWhitespace(a)&&r===CHAR_SHARP||a===CHAR_COLON&&l}function isPlainSafeFirst(r){return isPrintable(r)&&r!==CHAR_BOM&&!isWhitespace(r)&&r!==CHAR_MINUS&&r!==CHAR_QUESTION&&r!==CHAR_COLON&&r!==CHAR_COMMA&&r!==CHAR_LEFT_SQUARE_BRACKET&&r!==CHAR_RIGHT_SQUARE_BRACKET&&r!==CHAR_LEFT_CURLY_BRACKET&&r!==CHAR_RIGHT_CURLY_BRACKET&&r!==CHAR_SHARP&&r!==CHAR_AMPERSAND&&r!==CHAR_ASTERISK&&r!==CHAR_EXCLAMATION&&r!==CHAR_VERTICAL_LINE&&r!==CHAR_EQUALS&&r!==CHAR_GREATER_THAN&&r!==CHAR_SINGLE_QUOTE&&r!==CHAR_DOUBLE_QUOTE&&r!==CHAR_PERCENT&&r!==CHAR_COMMERCIAL_AT&&r!==CHAR_GRAVE_ACCENT}function isPlainSafeLast(r){return!isWhitespace(r)&&r!==CHAR_COLON}function codePointAt(r,a){var n=r.charCodeAt(a),t;return n>=55296&&n<=56319&&a+1<r.length&&(t=r.charCodeAt(a+1),t>=56320&&t<=57343)?(n-55296)*1024+t-56320+65536:n}function needIndentIndicator(r){var a=/^\n* /;return a.test(r)}var STYLE_PLAIN=1,STYLE_SINGLE=2,STYLE_LITERAL=3,STYLE_FOLDED=4,STYLE_DOUBLE=5;function chooseScalarStyle(r,a,n,t,l,u,s,p){var d,h=0,N=null,Be=!1,b=!1,E=t!==-1,de=-1,pe=isPlainSafeFirst(codePointAt(r,0))&&isPlainSafeLast(codePointAt(r,r.length-1));if(a||s)for(d=0;d<r.length;h>=65536?d+=2:d++){if(h=codePointAt(r,d),!isPrintable(h))return STYLE_DOUBLE;pe=pe&&isPlainSafe(h,N,p),N=h}else{for(d=0;d<r.length;h>=65536?d+=2:d++){if(h=codePointAt(r,d),h===CHAR_LINE_FEED)Be=!0,E&&(b=b||d-de-1>t&&r[de+1]!==" ",de=d);else if(!isPrintable(h))return STYLE_DOUBLE;pe=pe&&isPlainSafe(h,N,p),N=h}b=b||E&&d-de-1>t&&r[de+1]!==" "}return!Be&&!b?pe&&!s&&!l(r)?STYLE_PLAIN:u===QUOTING_TYPE_DOUBLE?STYLE_DOUBLE:STYLE_SINGLE:n>9&&needIndentIndicator(r)?STYLE_DOUBLE:s?u===QUOTING_TYPE_DOUBLE?STYLE_DOUBLE:STYLE_SINGLE:b?STYLE_FOLDED:STYLE_LITERAL}function writeScalar(r,a,n,t,l){r.dump=function(){if(a.length===0)return r.quotingType===QUOTING_TYPE_DOUBLE?'""':"''";if(!r.noCompatMode&&(DEPRECATED_BOOLEANS_SYNTAX.indexOf(a)!==-1||DEPRECATED_BASE60_SYNTAX.test(a)))return r.quotingType===QUOTING_TYPE_DOUBLE?'"'+a+'"':"'"+a+"'";var u=r.indent*Math.max(1,n),s=r.lineWidth===-1?-1:Math.max(Math.min(r.lineWidth,40),r.lineWidth-u),p=t||r.flowLevel>-1&&n>=r.flowLevel;function d(h){return testImplicitResolving(r,h)}switch(chooseScalarStyle(a,p,r.indent,s,d,r.quotingType,r.forceQuotes&&!t,l)){case STYLE_PLAIN:return a;case STYLE_SINGLE:return"'"+a.replace(/'/g,"''")+"'";case STYLE_LITERAL:return"|"+blockHeader(a,r.indent)+dropEndingNewline(indentString(a,u));case STYLE_FOLDED:return">"+blockHeader(a,r.indent)+dropEndingNewline(indentString(foldString(a,s),u));case STYLE_DOUBLE:return'"'+escapeString(a)+'"';default:throw new exception("impossible error: invalid scalar style")}}()}function blockHeader(r,a){var n=needIndentIndicator(r)?String(a):"",t=r[r.length-1]===`
`,l=t&&(r[r.length-2]===`
`||r===`
`),u=l?"+":t?"":"-";return n+u+`
`}function dropEndingNewline(r){return r[r.length-1]===`
`?r.slice(0,-1):r}function foldString(r,a){for(var n=/(\n+)([^\n]*)/g,t=function(){var h=r.indexOf(`
`);return h=h!==-1?h:r.length,n.lastIndex=h,foldLine(r.slice(0,h),a)}(),l=r[0]===`
`||r[0]===" ",u,s;s=n.exec(r);){var p=s[1],d=s[2];u=d[0]===" ",t+=p+(!l&&!u&&d!==""?`
`:"")+foldLine(d,a),l=u}return t}function foldLine(r,a){if(r===""||r[0]===" ")return r;for(var n=/ [^ ]/g,t,l=0,u,s=0,p=0,d="";t=n.exec(r);)p=t.index,p-l>a&&(u=s>l?s:p,d+=`
`+r.slice(l,u),l=u+1),s=p;return d+=`
`,r.length-l>a&&s>l?d+=r.slice(l,s)+`
`+r.slice(s+1):d+=r.slice(l),d.slice(1)}function escapeString(r){for(var a="",n=0,t,l=0;l<r.length;n>=65536?l+=2:l++)n=codePointAt(r,l),t=ESCAPE_SEQUENCES[n],!t&&isPrintable(n)?(a+=r[l],n>=65536&&(a+=r[l+1])):a+=t||encodeHex(n);return a}function writeFlowSequence(r,a,n){var t="",l=r.tag,u,s,p;for(u=0,s=n.length;u<s;u+=1)p=n[u],r.replacer&&(p=r.replacer.call(n,String(u),p)),(writeNode(r,a,p,!1,!1)||typeof p>"u"&&writeNode(r,a,null,!1,!1))&&(t!==""&&(t+=","+(r.condenseFlow?"":" ")),t+=r.dump);r.tag=l,r.dump="["+t+"]"}function writeBlockSequence(r,a,n,t){var l="",u=r.tag,s,p,d;for(s=0,p=n.length;s<p;s+=1)d=n[s],r.replacer&&(d=r.replacer.call(n,String(s),d)),(writeNode(r,a+1,d,!0,!0,!1,!0)||typeof d>"u"&&writeNode(r,a+1,null,!0,!0,!1,!0))&&((!t||l!=="")&&(l+=generateNextLine(r,a)),r.dump&&CHAR_LINE_FEED===r.dump.charCodeAt(0)?l+="-":l+="- ",l+=r.dump);r.tag=u,r.dump=l||"[]"}function writeFlowMapping(r,a,n){var t="",l=r.tag,u=Object.keys(n),s,p,d,h,N;for(s=0,p=u.length;s<p;s+=1)N="",t!==""&&(N+=", "),r.condenseFlow&&(N+='"'),d=u[s],h=n[d],r.replacer&&(h=r.replacer.call(n,d,h)),writeNode(r,a,d,!1,!1)&&(r.dump.length>1024&&(N+="? "),N+=r.dump+(r.condenseFlow?'"':"")+":"+(r.condenseFlow?"":" "),writeNode(r,a,h,!1,!1)&&(N+=r.dump,t+=N));r.tag=l,r.dump="{"+t+"}"}function writeBlockMapping(r,a,n,t){var l="",u=r.tag,s=Object.keys(n),p,d,h,N,Be,b;if(r.sortKeys===!0)s.sort();else if(typeof r.sortKeys=="function")s.sort(r.sortKeys);else if(r.sortKeys)throw new exception("sortKeys must be a boolean or a function");for(p=0,d=s.length;p<d;p+=1)b="",(!t||l!=="")&&(b+=generateNextLine(r,a)),h=s[p],N=n[h],r.replacer&&(N=r.replacer.call(n,h,N)),writeNode(r,a+1,h,!0,!0,!0)&&(Be=r.tag!==null&&r.tag!=="?"||r.dump&&r.dump.length>1024,Be&&(r.dump&&CHAR_LINE_FEED===r.dump.charCodeAt(0)?b+="?":b+="? "),b+=r.dump,Be&&(b+=generateNextLine(r,a)),writeNode(r,a+1,N,!0,Be)&&(r.dump&&CHAR_LINE_FEED===r.dump.charCodeAt(0)?b+=":":b+=": ",b+=r.dump,l+=b));r.tag=u,r.dump=l||"{}"}function detectType(r,a,n){var t,l,u,s,p,d;for(l=n?r.explicitTypes:r.implicitTypes,u=0,s=l.length;u<s;u+=1)if(p=l[u],(p.instanceOf||p.predicate)&&(!p.instanceOf||typeof a=="object"&&a instanceof p.instanceOf)&&(!p.predicate||p.predicate(a))){if(n?p.multi&&p.representName?r.tag=p.representName(a):r.tag=p.tag:r.tag="?",p.represent){if(d=r.styleMap[p.tag]||p.defaultStyle,_toString.call(p.represent)==="[object Function]")t=p.represent(a,d);else if(_hasOwnProperty.call(p.represent,d))t=p.represent[d](a,d);else throw new exception("!<"+p.tag+'> tag resolver accepts not "'+d+'" style');r.dump=t}return!0}return!1}function writeNode(r,a,n,t,l,u,s){r.tag=null,r.dump=n,detectType(r,n,!1)||detectType(r,n,!0);var p=_toString.call(r.dump),d=t,h;t&&(t=r.flowLevel<0||r.flowLevel>a);var N=p==="[object Object]"||p==="[object Array]",Be,b;if(N&&(Be=r.duplicates.indexOf(n),b=Be!==-1),(r.tag!==null&&r.tag!=="?"||b||r.indent!==2&&a>0)&&(l=!1),b&&r.usedDuplicates[Be])r.dump="*ref_"+Be;else{if(N&&b&&!r.usedDuplicates[Be]&&(r.usedDuplicates[Be]=!0),p==="[object Object]")t&&Object.keys(r.dump).length!==0?(writeBlockMapping(r,a,r.dump,l),b&&(r.dump="&ref_"+Be+r.dump)):(writeFlowMapping(r,a,r.dump),b&&(r.dump="&ref_"+Be+" "+r.dump));else if(p==="[object Array]")t&&r.dump.length!==0?(r.noArrayIndent&&!s&&a>0?writeBlockSequence(r,a-1,r.dump,l):writeBlockSequence(r,a,r.dump,l),b&&(r.dump="&ref_"+Be+r.dump)):(writeFlowSequence(r,a,r.dump),b&&(r.dump="&ref_"+Be+" "+r.dump));else if(p==="[object String]")r.tag!=="?"&&writeScalar(r,r.dump,a,u,d);else{if(p==="[object Undefined]")return!1;if(r.skipInvalid)return!1;throw new exception("unacceptable kind of an object to dump "+p)}r.tag!==null&&r.tag!=="?"&&(h=encodeURI(r.tag[0]==="!"?r.tag.slice(1):r.tag).replace(/!/g,"%21"),r.tag[0]==="!"?h="!"+h:h.slice(0,18)==="tag:yaml.org,2002:"?h="!!"+h.slice(18):h="!<"+h+">",r.dump=h+" "+r.dump)}return!0}function getDuplicateReferences(r,a){var n=[],t=[],l,u;for(inspectNode(r,n,t),l=0,u=t.length;l<u;l+=1)a.duplicates.push(n[t[l]]);a.usedDuplicates=new Array(u)}function inspectNode(r,a,n){var t,l,u;if(r!==null&&typeof r=="object")if(l=a.indexOf(r),l!==-1)n.indexOf(l)===-1&&n.push(l);else if(a.push(r),Array.isArray(r))for(l=0,u=r.length;l<u;l+=1)inspectNode(r[l],a,n);else for(t=Object.keys(r),l=0,u=t.length;l<u;l+=1)inspectNode(r[t[l]],a,n)}function dump$1(r,a){a=a||{};var n=new State(a);n.noRefs||getDuplicateReferences(r,n);var t=r;return n.replacer&&(t=n.replacer.call({"":t},"",t)),writeNode(n,0,t,!0,!0)?n.dump+`
`:""}var dump_1=dump$1,dumper={dump:dump_1};function renamed(r,a){return function(){throw new Error("Function yaml."+r+" is removed in js-yaml 4. Use yaml."+a+" instead, which is now safe by default.")}}var Type=type,Schema=schema,FAILSAFE_SCHEMA=failsafe,JSON_SCHEMA=json,CORE_SCHEMA=core,DEFAULT_SCHEMA=_default,load=loader.load,loadAll=loader.loadAll,dump=dumper.dump,YAMLException=exception,types={binary,float,map,null:_null,pairs,set,timestamp,bool,int,merge,omap,seq,str},safeLoad=renamed("safeLoad","load"),safeLoadAll=renamed("safeLoadAll","loadAll"),safeDump=renamed("safeDump","dump"),jsYaml={Type,Schema,FAILSAFE_SCHEMA,JSON_SCHEMA,CORE_SCHEMA,DEFAULT_SCHEMA,load,loadAll,dump,YAMLException,types,safeLoad,safeLoadAll,safeDump};const getArrayRow=(r,a,n)=>r.slice(a*n,a*n+n),getArrayColumn=(r,a,n,t)=>{const l=new Float32Array(t);for(let u=0;u<t;u++)l[u]=r[a+u*n];return l},getArrayDiagonal=(r,a,n,t)=>{let l=0,u=Math.max(0,a-n+1),s=Math.min(t-1,a);const p=new Float32Array(s-u+1);for(let d=u;d<=s;d++){let h=a-d;if(h>=n||d>=t)throw new Error("Overflow (x,y): "+h+d);p[l]=r[h+d*n],l++}return p},PixelSorter=({imageFile:r,onGoBack:a})=>{const[n,t]=reactExports.useState(null),[l,u]=reactExports.useState(100),[s,p]=reactExports.useState(!0),[d,h]=reactExports.useState({blurSigma:1.1,lowThreshold:10,highThreshold:30}),[N,Be]=reactExports.useState([{id:v4(),direction:"rows",order:"asc",disabled:!1}]),b=reactExports.useRef(document.createElement("div")),E=reactExports.useRef(null),de=reactExports.useRef(document.createElement("div")),pe=reactExports.useRef(null),Ye=reactExports.useRef(document.createElement("div")),me=reactExports.useRef(null),Le=[200,200],nt=[640,640],tt=reactExports.useRef(new Float32Array),ft=200,yt=reactExports.useRef(new Float32Array),gt=reactExports.useRef(new Float32Array);let mt=new Float32Array;const wt=()=>{const Qt={globalThreshold:l,useEdgeDetection:s,cannyParams:d,pipeline:N},nr=jsYaml.dump(Qt),or=new Blob([nr],{type:"text/yaml"}),Wt=URL.createObjectURL(or),ir=document.createElement("a");ir.href=Wt,ir.download="pixel-sorter-config.yaml",ir.click(),URL.revokeObjectURL(Wt)},St=Qt=>{var Wt;const nr=(Wt=Qt.target.files)==null?void 0:Wt[0];if(!nr)return;const or=new FileReader;or.onload=ir=>{var Sr;const br=(Sr=ir.target)==null?void 0:Sr.result;try{const _r=jsYaml.load(br);u(_r.globalThreshold),p(_r.useEdgeDetection),h(_r.cannyParams),Be(_r.pipeline)}catch(_r){console.error("Failed to load configuration:",_r)}},or.readAsText(nr)};reactExports.useEffect(()=>{console.log("useEffect ON CANVAS CREATE (ATTACH TO DOM)");const Qt=nr=>{nr.setup=()=>{nr.pixelDensity(1);let[or,Wt]=Le;nr.createCanvas(or,Wt),nr.background(240)},nr.draw=()=>{}};return E.current=new p5(Qt,b.current),()=>{var nr;console.log("CLEANUP useEffect ON CANVAS CREATE"),(nr=E.current)==null||nr.remove()}},[]),reactExports.useEffect(()=>{var nr;const Qt=or=>{or.setup=()=>{or.pixelDensity(1);let[Wt,ir]=Le;or.createCanvas(Wt,ir),or.background(240)},or.draw=()=>{}};return(nr=pe.current)==null||nr.remove(),pe.current=new p5(Qt,de.current),()=>{var or;(or=pe.current)==null||or.remove()}},[]),reactExports.useEffect(()=>{var nr;const Qt=or=>{or.setup=()=>{or.pixelDensity(1);let[Wt,ir]=Le;or.createCanvas(Wt,ir),or.background(240)},or.draw=()=>{}};return(nr=me.current)==null||nr.remove(),me.current=new p5(Qt,Ye.current),()=>{var or;(or=me.current)==null||or.remove()}},[]),reactExports.useEffect(()=>{if(!E.current)return;console.log("useEffect ON IMAGE UPLOAD");const Qt=E.current,nr=URL.createObjectURL(r);Qt.loadImage(nr,or=>{URL.revokeObjectURL(nr);let[Wt,ir]=bt(or);Qt.resizeCanvas(Wt,ir),or.loadPixels();let[br,Sr]=[or.width,or.height];console.log("useEffect ON IMAGE LOAD (p5)"),tt.current=new Float32Array(br*Sr),Jt(tt.current,or,br,Sr),console.log("useEffect: imgSrc.pixels: ",or.pixels),console.log("useEffect: imgSrcPixelsOriginal: ",tt.current),t(or),Qt.draw=()=>{Qt.image(or,0,0,Qt.width,Qt.height)}},or=>{console.log("Failed to load image",or),URL.revokeObjectURL(nr)}),console.log("IMAGE LOADED: ",n)},[]),reactExports.useEffect(()=>{if(!pe.current||!n)return;const Qt=pe.current;let nr=Qt.createImage(n.width,n.height),[or,Wt]=bt(nr);Qt.resizeCanvas(or,Wt),nr.loadPixels();let ir=tt.current;gt.current=new Float32Array(n.width*n.height);for(let br=0;br<n.width*n.height;br++){const Sr=er(ir[br],l)?255:0;gt.current[br]=Sr,nr.pixels[br*4+0]=Sr,nr.pixels[br*4+1]=Sr,nr.pixels[br*4+2]=Sr,nr.pixels[br*4+3]=255}nr.updatePixels(),Qt.image(nr,0,0,Qt.width,Qt.height),Qt.draw=()=>{}},[n,l]),reactExports.useEffect(()=>{if(!me.current||!n)return;const Qt=me.current,nr=n.width,or=n.height;let Wt=Qt.createImage(nr,or),[ir,br]=bt(Wt);Qt.resizeCanvas(ir,br);let Sr=tt.current;const _r=new Uint8Array(Sr.length*3);for(let jr=0;jr<Sr.length;jr++){const Nr=Sr[jr];_r[jr*3]=Nr,_r[jr*3+1]=Nr>>8,_r[jr*3+2]=Nr>>16}let sr=new Image$1(nr,or,_r,{kind:"RGB"});sr=sr.grey(),sr=sr.cannyEdge(d),console.log("canny",sr),yt.current=Float32Array.from(sr.data),Wt.loadPixels();for(let jr=0;jr<nr*or;jr++)Wt.pixels[jr*4]=yt.current[jr],Wt.pixels[jr*4+1]=yt.current[jr],Wt.pixels[jr*4+2]=yt.current[jr],Wt.pixels[jr*4+3]=255;console.log("sobelPixels SET: ",yt),Wt.updatePixels(),Qt.image(Wt,0,0,Qt.width,Qt.height),Qt.draw=()=>{}},[n,l,d]),reactExports.useEffect(()=>{if(!pe.current||!n)return;const Qt=pe.current;let nr=Qt.createImage(n.width,n.height),[or,Wt]=bt(nr);Qt.resizeCanvas(or,Wt),nr.loadPixels();let ir=tt.current;for(let br=0;br<n.width*n.height;br++){const Sr=er(ir[br],l)?255:0;gt.current[br]=Sr,nr.pixels[br*4+0]=Sr,nr.pixels[br*4+1]=Sr,nr.pixels[br*4+2]=Sr,nr.pixels[br*4+3]=255}nr.updatePixels(),Qt.image(nr,0,0,Qt.width,Qt.height),Qt.draw=()=>{}},[n,l]),reactExports.useEffect(()=>{Ht()},[l,N,d]);const bt=Qt=>{const[nr,or]=nt;let Wt=Qt.width/Qt.height,ir=Qt.width,br=Qt.height;return console.log("Image size: ",Qt.width,Qt.height),console.log("Max size: ",nt),Wt>=1&&ir>nr?(ir=nr,br=ir/Wt):Wt<1&&br>or&&(br=or,ir=br*Wt),console.log("Set canvas size: ",ir,br),[ir,br]},Ct=Qt=>{h(nr=>({...nr,lowThreshold:Qt>d.highThreshold?d.highThreshold-1:Qt}))},Et=Qt=>{h(nr=>({...nr,highThreshold:Qt<d.lowThreshold?d.lowThreshold+1:Qt}))},It=reactExports.useCallback(Qt=>{Be(Qt)},[]),Dt=Qt=>Qt.replace(/\.[^/.]+$/,""),Pt=()=>{if(E.current){let Qt=Dt(r.name);Qt=Qt.toLowerCase(),N.length==0&&console.log("Sort pipeline is empty!"),Qt+=s?"_edge":"_mask";for(const or of N)Qt+=`_${or.direction}_${or.order}`;let nr=Qt+".png";n==null||n.save(nr,"png")}},qt=Qt=>{mt=tt.current.slice(),Qt.length==0&&console.log("Sort pipeline is empty!");for(const nr of Qt){if(nr.disabled){console.log(`Skipping disabled step: ${nr.direction}, ${nr.order}`);continue}console.log(`Sorting: ${nr.direction}, ${nr.order}`);let or=nr.order==="asc"?(Wt,ir)=>Wt-ir:(Wt,ir)=>ir-Wt;nr.direction==="rows"?(console.log("SORTING rows"),Zt(or)):nr.direction==="cols"?(console.log("SORTING columns"),vt(or)):nr.direction==="diag"&&(console.log("SORTING diagonal"),Rt(or))}Vt(n,mt,n.width,n.height)},Ht=c(()=>{qt(N)},ft),Gt=()=>{if(!E.current||!n){console.error("handleSortPixels did not take effect: ",E.current,n);return}qt(N)},Ut=Qt=>{u(Qt)},Yt=Qt=>Qt?yt.current:gt.current.map(nr=>255-nr),Zt=Qt=>{let nr=n.width,or=n.height,Wt=0;for(;Wt<or-1;){let br=Wt,Sr=getArrayRow(mt,br,nr),_r=Yt(s);_r=getArrayRow(_r,br,nr);var ir=Lt(_r);for(const[sr,jr]of ir){let Nr=Sr.slice(sr,jr).sort(Qt);for(let kr=sr;kr<jr;kr++)mt[br*nr+kr]=Nr[kr-sr]}Wt++}},vt=Qt=>{let nr=n.width,or=n.height,Wt=0;for(;Wt<nr;){let br=Wt,Sr=getArrayColumn(mt,br,nr,or),_r=Yt(s);_r=getArrayColumn(_r,br,nr,or);var ir=Lt(_r);for(const[sr,jr]of ir){let Nr=Sr.slice(sr,jr).sort(Qt);for(let kr=sr;kr<jr;kr++)mt[br+kr*nr]=Nr[kr-sr]}Wt++}},Rt=Qt=>{let nr=n.width,or=n.height;for(let Wt=0;Wt<nr+or-2;Wt++){let ir=getArrayDiagonal(mt,Wt,nr,or),br=Yt(s);br=getArrayDiagonal(br,Wt,nr,or);let Sr=Lt(br),_r=Math.max(0,Wt-nr+1),sr=Math.min(or-1,Wt);for(const[jr,Nr]of Sr){let kr=ir.slice(jr,Nr).sort(Qt),qr=0;for(let Pr=_r;Pr<=sr;Pr++){let Vr=Wt-Pr;if(Vr>=nr||Pr>=or)throw new Error("Overflow (x,y): "+Vr+Pr);if(qr>=jr&&qr<Nr){let Xr=qr-jr;mt[Vr+Pr*nr]=kr[Xr]}qr++}}}},Lt=Qt=>{const nr=[];let or=!1,Wt=0,ir=0;for(;ir<Qt.length;ir++)if(Qt[ir]===255){if(or)continue;ir!=Wt&&nr.push([Wt,ir]),or=!0}else{if(!or)continue;Wt=ir,or=!1}return or||(ir==Wt&&console.error("getThresholdedRanges zero range at end, start_i: ",Wt),nr.push([Wt,ir])),nr},Vt=(Qt,nr,or,Wt)=>{let ir=0;for(;ir<4*or*Wt;){let br=nr[Math.floor(ir/4)];Qt.pixels[ir++]=br>>16&255,Qt.pixels[ir++]=br>>8&255,Qt.pixels[ir++]=br&255,Qt.pixels[ir++]=255}Qt.updatePixels()},Jt=(Qt,nr,or,Wt)=>{for(let ir=0;ir<4*(or*Wt);ir+=4)Qt[Math.floor(ir/4)]=255<<24|nr.pixels[ir]<<16|nr.pixels[ir+1]<<8|nr.pixels[ir+2]},er=(Qt,nr)=>{let[or,Wt,ir]=yr(Qt);return ur(or,Wt,ir)>=nr},ur=(Qt,nr,or)=>.299*Qt+.587*nr+.114*or,yr=Qt=>{let nr=Qt&255,or=Qt>>8&255,Wt=Qt>>16&255;return[nr,or,Wt]};return jsxRuntimeExports.jsxs("div",{style:{padding:"2rem"},children:[jsxRuntimeExports.jsx("h1",{style:{marginBottom:"1.5rem"},children:"Pixel Sorter"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",gap:"2rem"},children:[jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",minWidth:"250px"},children:[jsxRuntimeExports.jsx(StyledButton,{onClick:a,children:"Go Back"}),jsxRuntimeExports.jsx(StyledButton,{onClick:Gt,children:"Sort Pixels"}),jsxRuntimeExports.jsx(StyledButton,{onClick:Pt,children:"Save Image"}),jsxRuntimeExports.jsx(StyledButton,{onClick:wt,children:"Save Configuration"}),jsxRuntimeExports.jsxs("label",{children:["Load Configuration:",jsxRuntimeExports.jsx("input",{type:"file",accept:".yaml",onChange:St,style:{marginTop:"0.5rem"}})]}),jsxRuntimeExports.jsxs(ToggleButtonGroup,{children:[jsxRuntimeExports.jsx(ToggleButton$1,{active:!s,onClick:()=>p(!1),children:"Threshold Mask"}),jsxRuntimeExports.jsx(ToggleButton$1,{active:s,onClick:()=>p(!0),children:"Edge Detection"})]}),!s&&jsxRuntimeExports.jsx(ThresholdControl,{name:"Threshold",threshold:l,onThresholdChange:Ut}),s&&jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:"1em"},children:[jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-end",gap:"1em"},children:jsxRuntimeExports.jsxs(TooltipContainer,{children:[jsxRuntimeExports.jsx(TooltipIcon,{title:"Low Threshold",children:""}),jsxRuntimeExports.jsxs(TooltipText,{children:[jsxRuntimeExports.jsx("strong",{children:"High Threshold: "}),"Pixels above this threshold are classified as strong edges.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("strong",{children:"Low Threshold: "}),"Pixels below this threshold are classified as non-edges (or suppressed). Helps get rid of noise.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("strong",{children:"Between Thresholds: "}),"Pixels become edges if they are connected to strong edges."]})]})}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1em"},children:[jsxRuntimeExports.jsx(ThresholdControl,{name:"Low Threshold",threshold:d.lowThreshold,onThresholdChange:Ct}),jsxRuntimeExports.jsx(ThresholdControl,{name:"High Threshold",threshold:d.highThreshold,onThresholdChange:Et})]})]}),jsxRuntimeExports.jsx(SortPipeline,{pipeline:N,globalThreshold:l,onPipelineChange:It})]}),jsxRuntimeExports.jsxs("div",{className:"canvas-container",children:[jsxRuntimeExports.jsxs(PreviewContainer,{children:[jsxRuntimeExports.jsx(PreviewCaption,{children:"Result"}),jsxRuntimeExports.jsx(CanvasWrapper,{children:jsxRuntimeExports.jsx("div",{ref:b})})]}),jsxRuntimeExports.jsxs(CollapsiblePreview,{isVisible:!s,open:!0,children:[jsxRuntimeExports.jsx(CollapsibleSummary,{children:"Threshold Mask Preview"}),jsxRuntimeExports.jsx(CollapsibleContent,{children:jsxRuntimeExports.jsx(CanvasWrapper,{children:jsxRuntimeExports.jsx("div",{ref:de})})})]}),jsxRuntimeExports.jsxs(CollapsiblePreview,{isVisible:s,open:!0,children:[jsxRuntimeExports.jsx(CollapsibleSummary,{children:"Edge Map Preview"}),jsxRuntimeExports.jsx(CollapsibleContent,{children:jsxRuntimeExports.jsx(CanvasWrapper,{children:jsxRuntimeExports.jsx("div",{ref:Ye})})})]})]})]})]})};var propTypes={exports:{}},ReactPropTypesSecret_1,hasRequiredReactPropTypesSecret;function requireReactPropTypesSecret(){if(hasRequiredReactPropTypesSecret)return ReactPropTypesSecret_1;hasRequiredReactPropTypesSecret=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ReactPropTypesSecret_1=r,ReactPropTypesSecret_1}var factoryWithThrowingShims,hasRequiredFactoryWithThrowingShims;function requireFactoryWithThrowingShims(){if(hasRequiredFactoryWithThrowingShims)return factoryWithThrowingShims;hasRequiredFactoryWithThrowingShims=1;var r=requireReactPropTypesSecret();function a(){}function n(){}return n.resetWarningCache=a,factoryWithThrowingShims=function(){function t(s,p,d,h,N,Be){if(Be!==r){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}t.isRequired=t;function l(){return t}var u={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:l,element:t,elementType:t,instanceOf:l,node:t,objectOf:l,oneOf:l,oneOfType:l,shape:l,exact:l,checkPropTypes:n,resetWarningCache:a};return u.PropTypes=u,u},factoryWithThrowingShims}var hasRequiredPropTypes;function requirePropTypes(){return hasRequiredPropTypes||(hasRequiredPropTypes=1,propTypes.exports=requireFactoryWithThrowingShims()()),propTypes.exports}var propTypesExports=requirePropTypes();const PropTypes=getDefaultExportFromCjs(propTypesExports);function __awaiter(r,a,n,t){function l(u){return u instanceof n?u:new n(function(s){s(u)})}return new(n||(n=Promise))(function(u,s){function p(N){try{h(t.next(N))}catch(Be){s(Be)}}function d(N){try{h(t.throw(N))}catch(Be){s(Be)}}function h(N){N.done?u(N.value):l(N.value).then(p,d)}h((t=t.apply(r,a||[])).next())})}typeof SuppressedError=="function"&&SuppressedError;const COMMON_MIME_TYPES=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function toFileWithPath(r,a,n){const t=withMimeType(r),{webkitRelativePath:l}=r,u=typeof a=="string"?a:typeof l=="string"&&l.length>0?l:`./${r.name}`;return typeof t.path!="string"&&setObjProp(t,"path",u),setObjProp(t,"relativePath",u),t}function withMimeType(r){const{name:a}=r;if(a&&a.lastIndexOf(".")!==-1&&!r.type){const t=a.split(".").pop().toLowerCase(),l=COMMON_MIME_TYPES.get(t);l&&Object.defineProperty(r,"type",{value:l,writable:!1,configurable:!1,enumerable:!0})}return r}function setObjProp(r,a,n){Object.defineProperty(r,a,{value:n,writable:!1,configurable:!1,enumerable:!0})}const FILES_TO_IGNORE=[".DS_Store","Thumbs.db"];function fromEvent(r){return __awaiter(this,void 0,void 0,function*(){return isObject(r)&&isDataTransfer(r.dataTransfer)?getDataTransferFiles(r.dataTransfer,r.type):isChangeEvt(r)?getInputFiles(r):Array.isArray(r)&&r.every(a=>"getFile"in a&&typeof a.getFile=="function")?getFsHandleFiles(r):[]})}function isDataTransfer(r){return isObject(r)}function isChangeEvt(r){return isObject(r)&&isObject(r.target)}function isObject(r){return typeof r=="object"&&r!==null}function getInputFiles(r){return fromList(r.target.files).map(a=>toFileWithPath(a))}function getFsHandleFiles(r){return __awaiter(this,void 0,void 0,function*(){return(yield Promise.all(r.map(n=>n.getFile()))).map(n=>toFileWithPath(n))})}function getDataTransferFiles(r,a){return __awaiter(this,void 0,void 0,function*(){if(r.items){const n=fromList(r.items).filter(l=>l.kind==="file");if(a!=="drop")return n;const t=yield Promise.all(n.map(toFilePromises));return noIgnoredFiles(flatten(t))}return noIgnoredFiles(fromList(r.files).map(n=>toFileWithPath(n)))})}function noIgnoredFiles(r){return r.filter(a=>FILES_TO_IGNORE.indexOf(a.name)===-1)}function fromList(r){if(r===null)return[];const a=[];for(let n=0;n<r.length;n++){const t=r[n];a.push(t)}return a}function toFilePromises(r){if(typeof r.webkitGetAsEntry!="function")return fromDataTransferItem(r);const a=r.webkitGetAsEntry();return a&&a.isDirectory?fromDirEntry(a):fromDataTransferItem(r,a)}function flatten(r){return r.reduce((a,n)=>[...a,...Array.isArray(n)?flatten(n):[n]],[])}function fromDataTransferItem(r,a){return __awaiter(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof r.getAsFileSystemHandle=="function"){const u=yield r.getAsFileSystemHandle();if(u===null)throw new Error(`${r} is not a File`);if(u!==void 0){const s=yield u.getFile();return s.handle=u,toFileWithPath(s)}}const t=r.getAsFile();if(!t)throw new Error(`${r} is not a File`);return toFileWithPath(t,(n=a==null?void 0:a.fullPath)!==null&&n!==void 0?n:void 0)})}function fromEntry(r){return __awaiter(this,void 0,void 0,function*(){return r.isDirectory?fromDirEntry(r):fromFileEntry(r)})}function fromDirEntry(r){const a=r.createReader();return new Promise((n,t)=>{const l=[];function u(){a.readEntries(s=>__awaiter(this,void 0,void 0,function*(){if(s.length){const p=Promise.all(s.map(fromEntry));l.push(p),u()}else try{const p=yield Promise.all(l);n(p)}catch(p){t(p)}}),s=>{t(s)})}u()})}function fromFileEntry(r){return __awaiter(this,void 0,void 0,function*(){return new Promise((a,n)=>{r.file(t=>{const l=toFileWithPath(t,r.fullPath);a(l)},t=>{n(t)})})})}var es={},hasRequiredEs;function requireEs(){return hasRequiredEs||(hasRequiredEs=1,es.__esModule=!0,es.default=function(r,a){if(r&&a){var n=Array.isArray(a)?a:a.split(",");if(n.length===0)return!0;var t=r.name||"",l=(r.type||"").toLowerCase(),u=l.replace(/\/.*$/,"");return n.some(function(s){var p=s.trim().toLowerCase();return p.charAt(0)==="."?t.toLowerCase().endsWith(p):p.endsWith("/*")?u===p.replace(/\/.*$/,""):l===p})}return!0}),es}var esExports=requireEs();const _accepts=getDefaultExportFromCjs(esExports);function _toConsumableArray$1(r){return _arrayWithoutHoles$1(r)||_iterableToArray$1(r)||_unsupportedIterableToArray$1(r)||_nonIterableSpread$1()}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray$1(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function _arrayWithoutHoles$1(r){if(Array.isArray(r))return _arrayLikeToArray$1(r)}function ownKeys$1(r,a){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);a&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function _objectSpread$1(r){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?ownKeys$1(Object(n),!0).forEach(function(t){_defineProperty$1(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):ownKeys$1(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function _defineProperty$1(r,a,n){return a in r?Object.defineProperty(r,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[a]=n,r}function _slicedToArray$1(r,a){return _arrayWithHoles$1(r)||_iterableToArrayLimit$1(r,a)||_unsupportedIterableToArray$1(r,a)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(r,a){if(r){if(typeof r=="string")return _arrayLikeToArray$1(r,a);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$1(r,a)}}function _arrayLikeToArray$1(r,a){(a==null||a>r.length)&&(a=r.length);for(var n=0,t=new Array(a);n<a;n++)t[n]=r[n];return t}function _iterableToArrayLimit$1(r,a){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,u=!1,s,p;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(a&&t.length===a));l=!0);}catch(d){u=!0,p=d}finally{try{!l&&n.return!=null&&n.return()}finally{if(u)throw p}}return t}}function _arrayWithHoles$1(r){if(Array.isArray(r))return r}var accepts=typeof _accepts=="function"?_accepts:_accepts.default,FILE_INVALID_TYPE="file-invalid-type",FILE_TOO_LARGE="file-too-large",FILE_TOO_SMALL="file-too-small",TOO_MANY_FILES="too-many-files",getInvalidTypeRejectionErr=function r(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=a.split(","),t=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:FILE_INVALID_TYPE,message:"File type must be ".concat(t)}},getTooLargeRejectionErr=function r(a){return{code:FILE_TOO_LARGE,message:"File is larger than ".concat(a," ").concat(a===1?"byte":"bytes")}},getTooSmallRejectionErr=function r(a){return{code:FILE_TOO_SMALL,message:"File is smaller than ".concat(a," ").concat(a===1?"byte":"bytes")}},TOO_MANY_FILES_REJECTION={code:TOO_MANY_FILES,message:"Too many files"};function fileAccepted(r,a){var n=r.type==="application/x-moz-file"||accepts(r,a);return[n,n?null:getInvalidTypeRejectionErr(a)]}function fileMatchSize(r,a,n){if(isDefined(r.size))if(isDefined(a)&&isDefined(n)){if(r.size>n)return[!1,getTooLargeRejectionErr(n)];if(r.size<a)return[!1,getTooSmallRejectionErr(a)]}else{if(isDefined(a)&&r.size<a)return[!1,getTooSmallRejectionErr(a)];if(isDefined(n)&&r.size>n)return[!1,getTooLargeRejectionErr(n)]}return[!0,null]}function isDefined(r){return r!=null}function allFilesAccepted(r){var a=r.files,n=r.accept,t=r.minSize,l=r.maxSize,u=r.multiple,s=r.maxFiles,p=r.validator;return!u&&a.length>1||u&&s>=1&&a.length>s?!1:a.every(function(d){var h=fileAccepted(d,n),N=_slicedToArray$1(h,1),Be=N[0],b=fileMatchSize(d,t,l),E=_slicedToArray$1(b,1),de=E[0],pe=p?p(d):null;return Be&&de&&!pe})}function isPropagationStopped(r){return typeof r.isPropagationStopped=="function"?r.isPropagationStopped():typeof r.cancelBubble<"u"?r.cancelBubble:!1}function isEvtWithFiles(r){return r.dataTransfer?Array.prototype.some.call(r.dataTransfer.types,function(a){return a==="Files"||a==="application/x-moz-file"}):!!r.target&&!!r.target.files}function onDocumentDragOver(r){r.preventDefault()}function isIe(r){return r.indexOf("MSIE")!==-1||r.indexOf("Trident/")!==-1}function isEdge(r){return r.indexOf("Edge/")!==-1}function isIeOrEdge(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return isIe(r)||isEdge(r)}function composeEventHandlers(){for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return function(t){for(var l=arguments.length,u=new Array(l>1?l-1:0),s=1;s<l;s++)u[s-1]=arguments[s];return a.some(function(p){return!isPropagationStopped(t)&&p&&p.apply(void 0,[t].concat(u)),isPropagationStopped(t)})}}function canUseFileSystemAccessAPI(){return"showOpenFilePicker"in window}function pickerOptionsFromAccept(r){if(isDefined(r)){var a=Object.entries(r).filter(function(n){var t=_slicedToArray$1(n,2),l=t[0],u=t[1],s=!0;return isMIMEType(l)||(console.warn('Skipped "'.concat(l,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),s=!1),(!Array.isArray(u)||!u.every(isExt))&&(console.warn('Skipped "'.concat(l,'" because an invalid file extension was provided.')),s=!1),s}).reduce(function(n,t){var l=_slicedToArray$1(t,2),u=l[0],s=l[1];return _objectSpread$1(_objectSpread$1({},n),{},_defineProperty$1({},u,s))},{});return[{description:"Files",accept:a}]}return r}function acceptPropAsAcceptAttr(r){if(isDefined(r))return Object.entries(r).reduce(function(a,n){var t=_slicedToArray$1(n,2),l=t[0],u=t[1];return[].concat(_toConsumableArray$1(a),[l],_toConsumableArray$1(u))},[]).filter(function(a){return isMIMEType(a)||isExt(a)}).join(",")}function isAbort(r){return r instanceof DOMException&&(r.name==="AbortError"||r.code===r.ABORT_ERR)}function isSecurityError(r){return r instanceof DOMException&&(r.name==="SecurityError"||r.code===r.SECURITY_ERR)}function isMIMEType(r){return r==="audio/*"||r==="video/*"||r==="image/*"||r==="text/*"||r==="application/*"||/\w+\/[-+.\w]+/g.test(r)}function isExt(r){return/^.*\.[\w]+$/.test(r)}var _excluded=["children"],_excluded2=["open"],_excluded3=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],_excluded4=["refKey","onChange","onClick"];function _toConsumableArray(r){return _arrayWithoutHoles(r)||_iterableToArray(r)||_unsupportedIterableToArray(r)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray(r)}function _slicedToArray(r,a){return _arrayWithHoles(r)||_iterableToArrayLimit(r,a)||_unsupportedIterableToArray(r,a)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(r,a){if(r){if(typeof r=="string")return _arrayLikeToArray(r,a);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(r,a)}}function _arrayLikeToArray(r,a){(a==null||a>r.length)&&(a=r.length);for(var n=0,t=new Array(a);n<a;n++)t[n]=r[n];return t}function _iterableToArrayLimit(r,a){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,u=!1,s,p;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(a&&t.length===a));l=!0);}catch(d){u=!0,p=d}finally{try{!l&&n.return!=null&&n.return()}finally{if(u)throw p}}return t}}function _arrayWithHoles(r){if(Array.isArray(r))return r}function ownKeys(r,a){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);a&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function _objectSpread(r){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function _defineProperty(r,a,n){return a in r?Object.defineProperty(r,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[a]=n,r}function _objectWithoutProperties(r,a){if(r==null)return{};var n=_objectWithoutPropertiesLoose(r,a),t,l;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(r);for(l=0;l<u.length;l++)t=u[l],!(a.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function _objectWithoutPropertiesLoose(r,a){if(r==null)return{};var n={},t=Object.keys(r),l,u;for(u=0;u<t.length;u++)l=t[u],!(a.indexOf(l)>=0)&&(n[l]=r[l]);return n}var Dropzone=reactExports.forwardRef(function(r,a){var n=r.children,t=_objectWithoutProperties(r,_excluded),l=useDropzone(t),u=l.open,s=_objectWithoutProperties(l,_excluded2);return reactExports.useImperativeHandle(a,function(){return{open:u}},[u]),React.createElement(reactExports.Fragment,null,n(_objectSpread(_objectSpread({},s),{},{open:u})))});Dropzone.displayName="Dropzone";var defaultProps={disabled:!1,getFilesFromEvent:fromEvent,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Dropzone.defaultProps=defaultProps;Dropzone.propTypes={children:PropTypes.func,accept:PropTypes.objectOf(PropTypes.arrayOf(PropTypes.string)),multiple:PropTypes.bool,preventDropOnDocument:PropTypes.bool,noClick:PropTypes.bool,noKeyboard:PropTypes.bool,noDrag:PropTypes.bool,noDragEventsBubbling:PropTypes.bool,minSize:PropTypes.number,maxSize:PropTypes.number,maxFiles:PropTypes.number,disabled:PropTypes.bool,getFilesFromEvent:PropTypes.func,onFileDialogCancel:PropTypes.func,onFileDialogOpen:PropTypes.func,useFsAccessApi:PropTypes.bool,autoFocus:PropTypes.bool,onDragEnter:PropTypes.func,onDragLeave:PropTypes.func,onDragOver:PropTypes.func,onDrop:PropTypes.func,onDropAccepted:PropTypes.func,onDropRejected:PropTypes.func,onError:PropTypes.func,validator:PropTypes.func};var initialState={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function useDropzone(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=_objectSpread(_objectSpread({},defaultProps),r),n=a.accept,t=a.disabled,l=a.getFilesFromEvent,u=a.maxSize,s=a.minSize,p=a.multiple,d=a.maxFiles,h=a.onDragEnter,N=a.onDragLeave,Be=a.onDragOver,b=a.onDrop,E=a.onDropAccepted,de=a.onDropRejected,pe=a.onFileDialogCancel,Ye=a.onFileDialogOpen,me=a.useFsAccessApi,Le=a.autoFocus,nt=a.preventDropOnDocument,tt=a.noClick,ft=a.noKeyboard,yt=a.noDrag,gt=a.noDragEventsBubbling,mt=a.onError,wt=a.validator,St=reactExports.useMemo(function(){return acceptPropAsAcceptAttr(n)},[n]),bt=reactExports.useMemo(function(){return pickerOptionsFromAccept(n)},[n]),Ct=reactExports.useMemo(function(){return typeof Ye=="function"?Ye:noop},[Ye]),Et=reactExports.useMemo(function(){return typeof pe=="function"?pe:noop},[pe]),It=reactExports.useRef(null),Dt=reactExports.useRef(null),Pt=reactExports.useReducer(reducer,initialState),qt=_slicedToArray(Pt,2),Ht=qt[0],Gt=qt[1],Ut=Ht.isFocused,Yt=Ht.isFileDialogActive,Zt=reactExports.useRef(typeof window<"u"&&window.isSecureContext&&me&&canUseFileSystemAccessAPI()),vt=function(){!Zt.current&&Yt&&setTimeout(function(){if(Dt.current){var Vr=Dt.current.files;Vr.length||(Gt({type:"closeDialog"}),Et())}},300)};reactExports.useEffect(function(){return window.addEventListener("focus",vt,!1),function(){window.removeEventListener("focus",vt,!1)}},[Dt,Yt,Et,Zt]);var Rt=reactExports.useRef([]),Lt=function(Vr){It.current&&It.current.contains(Vr.target)||(Vr.preventDefault(),Rt.current=[])};reactExports.useEffect(function(){return nt&&(document.addEventListener("dragover",onDocumentDragOver,!1),document.addEventListener("drop",Lt,!1)),function(){nt&&(document.removeEventListener("dragover",onDocumentDragOver),document.removeEventListener("drop",Lt))}},[It,nt]),reactExports.useEffect(function(){return!t&&Le&&It.current&&It.current.focus(),function(){}},[It,Le,t]);var Vt=reactExports.useCallback(function(Pr){mt?mt(Pr):console.error(Pr)},[mt]),Jt=reactExports.useCallback(function(Pr){Pr.preventDefault(),Pr.persist(),jr(Pr),Rt.current=[].concat(_toConsumableArray(Rt.current),[Pr.target]),isEvtWithFiles(Pr)&&Promise.resolve(l(Pr)).then(function(Vr){if(!(isPropagationStopped(Pr)&&!gt)){var Xr=Vr.length,Gr=Xr>0&&allFilesAccepted({files:Vr,accept:St,minSize:s,maxSize:u,multiple:p,maxFiles:d,validator:wt}),Er=Xr>0&&!Gr;Gt({isDragAccept:Gr,isDragReject:Er,isDragActive:!0,type:"setDraggedFiles"}),h&&h(Pr)}}).catch(function(Vr){return Vt(Vr)})},[l,h,Vt,gt,St,s,u,p,d,wt]),er=reactExports.useCallback(function(Pr){Pr.preventDefault(),Pr.persist(),jr(Pr);var Vr=isEvtWithFiles(Pr);if(Vr&&Pr.dataTransfer)try{Pr.dataTransfer.dropEffect="copy"}catch{}return Vr&&Be&&Be(Pr),!1},[Be,gt]),ur=reactExports.useCallback(function(Pr){Pr.preventDefault(),Pr.persist(),jr(Pr);var Vr=Rt.current.filter(function(Gr){return It.current&&It.current.contains(Gr)}),Xr=Vr.indexOf(Pr.target);Xr!==-1&&Vr.splice(Xr,1),Rt.current=Vr,!(Vr.length>0)&&(Gt({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),isEvtWithFiles(Pr)&&N&&N(Pr))},[It,N,gt]),yr=reactExports.useCallback(function(Pr,Vr){var Xr=[],Gr=[];Pr.forEach(function(Er){var Ir=fileAccepted(Er,St),Cr=_slicedToArray(Ir,2),tr=Cr[0],ar=Cr[1],Kt=fileMatchSize(Er,s,u),cr=_slicedToArray(Kt,2),Tr=cr[0],Dr=cr[1],zr=wt?wt(Er):null;if(tr&&Tr&&!zr)Xr.push(Er);else{var fn=[ar,Dr];zr&&(fn=fn.concat(zr)),Gr.push({file:Er,errors:fn.filter(function(vn){return vn})})}}),(!p&&Xr.length>1||p&&d>=1&&Xr.length>d)&&(Xr.forEach(function(Er){Gr.push({file:Er,errors:[TOO_MANY_FILES_REJECTION]})}),Xr.splice(0)),Gt({acceptedFiles:Xr,fileRejections:Gr,isDragReject:Gr.length>0,type:"setFiles"}),b&&b(Xr,Gr,Vr),Gr.length>0&&de&&de(Gr,Vr),Xr.length>0&&E&&E(Xr,Vr)},[Gt,p,St,s,u,d,b,E,de,wt]),Qt=reactExports.useCallback(function(Pr){Pr.preventDefault(),Pr.persist(),jr(Pr),Rt.current=[],isEvtWithFiles(Pr)&&Promise.resolve(l(Pr)).then(function(Vr){isPropagationStopped(Pr)&&!gt||yr(Vr,Pr)}).catch(function(Vr){return Vt(Vr)}),Gt({type:"reset"})},[l,yr,Vt,gt]),nr=reactExports.useCallback(function(){if(Zt.current){Gt({type:"openDialog"}),Ct();var Pr={multiple:p,types:bt};window.showOpenFilePicker(Pr).then(function(Vr){return l(Vr)}).then(function(Vr){yr(Vr,null),Gt({type:"closeDialog"})}).catch(function(Vr){isAbort(Vr)?(Et(Vr),Gt({type:"closeDialog"})):isSecurityError(Vr)?(Zt.current=!1,Dt.current?(Dt.current.value=null,Dt.current.click()):Vt(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Vt(Vr)});return}Dt.current&&(Gt({type:"openDialog"}),Ct(),Dt.current.value=null,Dt.current.click())},[Gt,Ct,Et,me,yr,Vt,bt,p]),or=reactExports.useCallback(function(Pr){!It.current||!It.current.isEqualNode(Pr.target)||(Pr.key===" "||Pr.key==="Enter"||Pr.keyCode===32||Pr.keyCode===13)&&(Pr.preventDefault(),nr())},[It,nr]),Wt=reactExports.useCallback(function(){Gt({type:"focus"})},[]),ir=reactExports.useCallback(function(){Gt({type:"blur"})},[]),br=reactExports.useCallback(function(){tt||(isIeOrEdge()?setTimeout(nr,0):nr())},[tt,nr]),Sr=function(Vr){return t?null:Vr},_r=function(Vr){return ft?null:Sr(Vr)},sr=function(Vr){return yt?null:Sr(Vr)},jr=function(Vr){gt&&Vr.stopPropagation()},Nr=reactExports.useMemo(function(){return function(){var Pr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Vr=Pr.refKey,Xr=Vr===void 0?"ref":Vr,Gr=Pr.role,Er=Pr.onKeyDown,Ir=Pr.onFocus,Cr=Pr.onBlur,tr=Pr.onClick,ar=Pr.onDragEnter,Kt=Pr.onDragOver,cr=Pr.onDragLeave,Tr=Pr.onDrop,Dr=_objectWithoutProperties(Pr,_excluded3);return _objectSpread(_objectSpread(_defineProperty({onKeyDown:_r(composeEventHandlers(Er,or)),onFocus:_r(composeEventHandlers(Ir,Wt)),onBlur:_r(composeEventHandlers(Cr,ir)),onClick:Sr(composeEventHandlers(tr,br)),onDragEnter:sr(composeEventHandlers(ar,Jt)),onDragOver:sr(composeEventHandlers(Kt,er)),onDragLeave:sr(composeEventHandlers(cr,ur)),onDrop:sr(composeEventHandlers(Tr,Qt)),role:typeof Gr=="string"&&Gr!==""?Gr:"presentation"},Xr,It),!t&&!ft?{tabIndex:0}:{}),Dr)}},[It,or,Wt,ir,br,Jt,er,ur,Qt,ft,yt,t]),kr=reactExports.useCallback(function(Pr){Pr.stopPropagation()},[]),qr=reactExports.useMemo(function(){return function(){var Pr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Vr=Pr.refKey,Xr=Vr===void 0?"ref":Vr,Gr=Pr.onChange,Er=Pr.onClick,Ir=_objectWithoutProperties(Pr,_excluded4),Cr=_defineProperty({accept:St,multiple:p,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Sr(composeEventHandlers(Gr,Qt)),onClick:Sr(composeEventHandlers(Er,kr)),tabIndex:-1},Xr,Dt);return _objectSpread(_objectSpread({},Cr),Ir)}},[Dt,n,p,Qt,t]);return _objectSpread(_objectSpread({},Ht),{},{isFocused:Ut&&!t,getRootProps:Nr,getInputProps:qr,rootRef:It,inputRef:Dt,open:Sr(nr)})}function reducer(r,a){switch(a.type){case"focus":return _objectSpread(_objectSpread({},r),{},{isFocused:!0});case"blur":return _objectSpread(_objectSpread({},r),{},{isFocused:!1});case"openDialog":return _objectSpread(_objectSpread({},initialState),{},{isFileDialogActive:!0});case"closeDialog":return _objectSpread(_objectSpread({},r),{},{isFileDialogActive:!1});case"setDraggedFiles":return _objectSpread(_objectSpread({},r),{},{isDragActive:a.isDragActive,isDragAccept:a.isDragAccept,isDragReject:a.isDragReject});case"setFiles":return _objectSpread(_objectSpread({},r),{},{acceptedFiles:a.acceptedFiles,fileRejections:a.fileRejections,isDragReject:a.isDragReject});case"reset":return _objectSpread({},initialState);default:return r}}function noop(){}const UploadPage=({onUpload:r})=>{const a=reactExports.useCallback(u=>{const s=u[0];r(s)},[]),{getRootProps:n,getInputProps:t,isDragActive:l}=useDropzone({onDrop:a,accept:{"image/*":[]}});return jsxRuntimeExports.jsx("div",{style:{padding:"2rem"},children:jsxRuntimeExports.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",minWidth:"250px"},children:jsxRuntimeExports.jsxs("div",{...n(),style:{padding:"1rem",border:"2px dashed #ccc",borderRadius:"8px",textAlign:"center",cursor:"pointer"},children:[jsxRuntimeExports.jsx("input",{...t()}),l?jsxRuntimeExports.jsx("p",{children:"Drop the files here ..."}):jsxRuntimeExports.jsx("p",{children:"Drag 'n' drop an image here, or click to select"})]})})})},GalleryContainer=dt.div`
  display: flex;
  flex-direction: column;
  gap: 1rem;
  padding: 1rem;
`,GalleryItem=dt.div`
  display: flex;
  flex-direction: column;
  align-items: center;
`,ImageWrapper=dt.div`
  max-width: 420px; /* Set max width to avoid overflow */
  max-height: 420px; /* Set max height to avoid overflow */
  //overflow: hidden;

  img {
    width: 100%;
    height: auto;
    object-fit: contain; /* Ensure the image fits within the container */
    border: 2px solid #ccc;
    border-radius: 8px;
  }
`,ImageTitle=dt.div`
  margin-top: 0.5rem;
  font-size: 1rem;
  font-weight: bold;
  text-align: center;
`,Gallery=({images:r})=>jsxRuntimeExports.jsx(GalleryContainer,{children:r.map((a,n)=>jsxRuntimeExports.jsxs(GalleryItem,{children:[jsxRuntimeExports.jsx(ImageWrapper,{children:jsxRuntimeExports.jsx("img",{src:a.src,alt:a.title})}),jsxRuntimeExports.jsx(ImageTitle,{children:a.title})]},n))}),TopBarContainer=dt.div`
  position: fixed; /* Fix the top bar at the top of the page */
  top: 0;
  left: 0;
  width: 100%; /* Span the entire width */
  display: flex;
  justify-content: flex-start; /* Align content to the left */
  align-items: center; /* Center items vertically */
  padding: 1rem;
  background-color: #282c34; /* Background color */
  color: white; /* Text color */
  //z-index: 1000; /* Ensure it stays above other elements */
  box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.2); /* Add a subtle shadow for better visibility */
`,TopBarButton=dt.button`
  padding: 0.5rem 1rem;
  border-radius: 8px;
  background-color: #61dafb;
  color: #282c34;
  font-weight: bold;
  border: none;
  cursor: pointer;

  &:hover {
    background-color: #21a1f1;
  }
`,TopBar=({currentPage:r,onNavigate:a})=>{const n=r==="gallery"?"Pixel Sorter":"Gallery";return jsxRuntimeExports.jsx(TopBarContainer,{children:jsxRuntimeExports.jsx(TopBarButton,{onClick:()=>a(r==="gallery"?"pixelSorter":"gallery"),children:n})})},App=()=>{const[r,a]=reactExports.useState("pixelSorter"),[n,t]=reactExports.useState(null),[l,u]=reactExports.useState([]),s=h=>{t(h)},p=()=>{t(null)},d=h=>{a(h)};return reactExports.useEffect(()=>{const h=["cat_edge_rows_asc.png","lenna_edge_rows_asc_diag_asc.png","checkerboard_edge_cols_desc_rows_desc.png","firewatch_rows_asc_cols_asc.png"],N={};let Be=h.map(b=>{const E=`/gallery/${b}`,de=b.split("_")[0],pe=de.charAt(0).toUpperCase()+de.slice(1);return N[pe]?(N[pe]++,{src:E,title:`${pe} ${N[pe]}`}):(N[pe]=1,{src:E,title:pe})});u(Be)},[]),jsxRuntimeExports.jsxs("div",{style:{display:"block"},children:[jsxRuntimeExports.jsx(TopBar,{currentPage:r,onNavigate:d}),jsxRuntimeExports.jsx("div",{style:{marginTop:"60px"},children:r==="gallery"?jsxRuntimeExports.jsx(Gallery,{images:l}):n!=null?jsxRuntimeExports.jsx(PixelSorter,{imageFile:n,onGoBack:p}):jsxRuntimeExports.jsx(UploadPage,{onUpload:s})})]})};clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
